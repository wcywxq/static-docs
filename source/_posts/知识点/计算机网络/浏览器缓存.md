---
title: 浏览器缓存
date: 2020-10-18
categories: [知识点, 计算机网络]
tags:
  - 浏览器缓存
---

在工作中，前端代码打包之后的生成的静态资源就要发布到静态服务器上，这时候就要做对这些静态资源做一些运维配置，其中，gzip 和 设置缓存是必不可少的。这两项是最直接影响到网站性能和用户体验的。

- 缓存的优点

1. 减少了不必要的数据传输，节省带宽
2. 减少服务器的负担，提升网站性能
3. 加快了客户端加载网页的速度
4. 用户体验友好

- 缺点

> 资源如果有更改但是客户端不及时更新会造成用户获取信息滞后，如果老版本有 `bug` 的话，情况会更加糟糕。

## 强缓存（本地缓存）

1. 利用 `http` 头中的 `Expires` 和 `Cache-control` 两个字段控制的，用来表示资源的缓存时间。
2. 强缓存中，普通刷新会忽略它，但不清除它，需要强制刷新。浏览器强制刷新，请求会带上 `Cache-control: no-cache` 和 `Pragma: no-cache`

## 协商缓存（弱缓存）

1. 协商缓存就是由服务器来确定缓存资源是否可用。所以客户端与服务器端要通过某种标识来进行通信，从而让服务器判断请求是否可以缓存访问。
2. 普通刷新会启用弱缓存，忽略强缓存。只有在地址栏或收藏夹输入网址、通过链接引用资源等情况下，浏览器才会启用强缓存。
3. 主要涉及两组 `header` 字段：

- `Etag` 和 `If-None-Match`
- `Last-Modified` 和 `If-Modified-Since`
