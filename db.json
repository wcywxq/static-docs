{"meta":{"version":1,"warehouse":"4.0.0"},"models":{"Asset":[{"_id":"themes/stellar/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/stellar/source/js/main.js","path":"js/main.js","modified":0,"renderable":1},{"_id":"themes/stellar/source/js/plugins/friends.js","path":"js/plugins/friends.js","modified":0,"renderable":1},{"_id":"themes/stellar/source/js/plugins/sites.js","path":"js/plugins/sites.js","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/hello-world.md","hash":"7d98d6592de80fdcd2949bd7401cec12afd98cdf","modified":1617775672555},{"_id":"source/_posts/å¤§å‰ç«¯/å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•.md","hash":"569b903614aa3e1dfcd4a974d4f2e541b1e08dd2","modified":1617779561441},{"_id":"themes/stellar/.gitignore","hash":"cf4e2dcaa760ff6f7520fd032ce44574e2970e54","modified":1617776232782},{"_id":"themes/stellar/.npmignore","hash":"59be8a065e2fd8ae12002de7c5b13fec660a315f","modified":1617776232782},{"_id":"themes/stellar/LICENSE","hash":"7fdfdb5dbc7d672fa28a2a3c9efa03ff8df5917d","modified":1617776232782},{"_id":"themes/stellar/README.md","hash":"380d7b4de3fa89275e072a91d763f90925f9eb30","modified":1617776232782},{"_id":"themes/stellar/_config.yml","hash":"1b4fde522b2af6779abb6e623483a2de0bc5dd20","modified":1617776232782},{"_id":"themes/stellar/npm-publish.sh","hash":"cceb7463d6ec8588c744b9aaf7cc86da4cadf802","modified":1617776232798},{"_id":"themes/stellar/package.json","hash":"267c6360ab558aaba941e0ac40703cafdf9a80af","modified":1617776232798},{"_id":"themes/stellar/utterances.json","hash":"2d081c929dc790e3811eef037470194a19844da9","modified":1617776232830},{"_id":"themes/stellar/languages/en.yml","hash":"1864baaa91c996d7893655269731a8068d25659a","modified":1617776232783},{"_id":"themes/stellar/languages/zh-CN.yml","hash":"aea20515a3203b6236ef8a2f8fedbe8b0c2ecc74","modified":1617776232783},{"_id":"themes/stellar/languages/zh-TW.yml","hash":"391e7df8baff845efb094bcd73f77040ad091dbb","modified":1617776232783},{"_id":"themes/stellar/layout/404.ejs","hash":"c939d1f916f6ca3fc591ce7fb0b745642da79e73","modified":1617776232784},{"_id":"themes/stellar/layout/archive.ejs","hash":"32af3fd52bb7ac653816a3cf5f2b542226081518","modified":1617776232796},{"_id":"themes/stellar/layout/categories.ejs","hash":"80da9b1a714fe0868abe7d45cebff08164d06af1","modified":1617776232796},{"_id":"themes/stellar/layout/index.ejs","hash":"0d4a884fc1f6e999aa18f2b4347f11b09048fc7a","modified":1617776232796},{"_id":"themes/stellar/layout/layout.ejs","hash":"fa4f0803326acf105a3bbab6176f45f7a334ff3b","modified":1617776232796},{"_id":"themes/stellar/layout/page.ejs","hash":"90170dbc9ed8ffdaa9e02d2c246cdb8cc3f093ec","modified":1617776232797},{"_id":"themes/stellar/layout/post.ejs","hash":"ff002b086e0b1de72ddb80a1b692d9ba5c76a6a0","modified":1617776232797},{"_id":"themes/stellar/layout/tags.ejs","hash":"e0a6002fe01a2a93e2d84426383014a48b99a1aa","modified":1617776232797},{"_id":"themes/stellar/layout/wiki.ejs","hash":"aa030ca65bee4fde0923653402d9b7bd249b8c94","modified":1617776232797},{"_id":"themes/stellar/.github/config/label-commenter-config.yml","hash":"9c403157b2fd65b8210e85d5bc2a8942511868d4","modified":1617776232781},{"_id":"themes/stellar/.github/workflows/label-commenter.yml","hash":"6b338899366eba62473a3204e4b0408f06b0e070","modified":1617776232781},{"_id":"themes/stellar/.github/workflows/npm-publish.yml","hash":"9fffa22fb47867e6550a7dd8c049b5eeb96b900f","modified":1617776232781},{"_id":"themes/stellar/layout/_partial/head.ejs","hash":"3f455e4f979ff8da0fa812510fd8c0b20d03d0bc","modified":1617776232784},{"_id":"themes/stellar/layout/_partial/menubtn.ejs","hash":"b8407e7d00e896a1563d8708e04da4118cf83e39","modified":1617776232790},{"_id":"themes/stellar/scripts/events/index.js","hash":"97c1101964fef94c797b11edd0e564abbb5e3471","modified":1617776232798},{"_id":"themes/stellar/scripts/filters/index.js","hash":"5667f028990dd556133080090a5fcb00c64f05ac","modified":1617776232799},{"_id":"themes/stellar/scripts/generators/404.js","hash":"294c2e12ebc858cb47363626e5c6edcf4a5d67fa","modified":1617776232800},{"_id":"themes/stellar/scripts/generators/categories.js","hash":"37a443389795bf9047ab530e6111a5dde8567db5","modified":1617776232801},{"_id":"themes/stellar/scripts/generators/tags.js","hash":"9f9421ec4dc85e2bb8c3a376d4eb1c7c59d3b211","modified":1617776232801},{"_id":"themes/stellar/scripts/generators/wiki.js","hash":"a496297955c12817dc510ba9bc5a8f423d103416","modified":1617776232801},{"_id":"themes/stellar/scripts/helpers/category_color.js","hash":"35f459e5dcd845eef3d9b7a6205f015b92399d24","modified":1617776232802},{"_id":"themes/stellar/scripts/helpers/doc_tree.js","hash":"b8264dbd82e3239d2a787e76c7e98ba1926904b8","modified":1617776232802},{"_id":"themes/stellar/scripts/helpers/parse_config.js","hash":"c9712de293586ca529b9df8789b79e561acf85a9","modified":1617776232803},{"_id":"themes/stellar/scripts/helpers/related_posts.js","hash":"65075125851131ced601afb12a9b0d8c392a3e0d","modified":1617776232804},{"_id":"themes/stellar/scripts/helpers/scrollreveal.js","hash":"aecbaf28dfafe100bca014381e3f6e8f799da4d1","modified":1617776232804},{"_id":"themes/stellar/scripts/helpers/stellar_info.js","hash":"5b7a10c8b09237a467767f5467749c7d9378c2c1","modified":1617776232806},{"_id":"themes/stellar/scripts/tags/about.js","hash":"acd4cfea4ca8d3203c76afbb8752b50b0b9f5904","modified":1617776232806},{"_id":"themes/stellar/scripts/tags/checkbox.js","hash":"85a0f422a338cb5fa5c70ef30c93da95ef5ebbcf","modified":1617776232807},{"_id":"themes/stellar/scripts/tags/copy.js","hash":"26c9bc88aafda3b2c6c21aa8ce85607969cc3b00","modified":1617776232807},{"_id":"themes/stellar/scripts/tags/folding.js","hash":"b9cd2ff097aafcfcd461a898f20c2d6cd25ecc5b","modified":1617776232807},{"_id":"themes/stellar/scripts/tags/frame.js","hash":"6eba9dab0fde8908234df632b85efa6a312e7bf3","modified":1617776232808},{"_id":"themes/stellar/scripts/tags/friends.js","hash":"a2e9827810122e47f583f3cf1e418bf7933f781d","modified":1617776232808},{"_id":"themes/stellar/scripts/tags/ghcard.js","hash":"33d6d41ba4e01232eb72915b5b17fb0ed44f899c","modified":1617776232808},{"_id":"themes/stellar/scripts/tags/image.js","hash":"770c5e98ebd1e16a4fdbccbedaee490c4f476231","modified":1617776232808},{"_id":"themes/stellar/scripts/tags/index.js","hash":"eef64269ad7d7519fb3563f0118faff135760a2f","modified":1617776232809},{"_id":"themes/stellar/scripts/tags/inline-labels.js","hash":"08fbdc0ea622270e1236a28778f875c8ad2e5516","modified":1617776232809},{"_id":"themes/stellar/scripts/tags/issues.js","hash":"2028247a41e8427755b0007a6cf629f9f094f233","modified":1617776232809},{"_id":"themes/stellar/scripts/tags/link.js","hash":"857210520d82218bd9b61ac19414353ae5cb618c","modified":1617776232809},{"_id":"themes/stellar/scripts/tags/navbar.js","hash":"b403df437e2ac3c436461abb640d281b520bb0b8","modified":1617776232810},{"_id":"themes/stellar/scripts/tags/note.js","hash":"de6080779751eb6256912418383b2ea9afafe9d8","modified":1617776232810},{"_id":"themes/stellar/scripts/tags/site.js","hash":"5d32da930d4b10338386c20ca7e3414803954a1c","modified":1617776232810},{"_id":"themes/stellar/scripts/tags/swiper.js","hash":"dcecff446269b9553d280778640ff434391bfe9b","modified":1617776232811},{"_id":"themes/stellar/scripts/tags/timeline.js","hash":"549a5aeecea2f4dc730a08fb14e39de307d0844e","modified":1617776232811},{"_id":"themes/stellar/source/css/_custom.styl","hash":"90251301e412e44bb036345c411d4723c6c47e76","modified":1617776232816},{"_id":"themes/stellar/source/css/main.styl","hash":"28f7f6f69ed6aa3083784c0f4c1b17955dc5924e","modified":1617776232829},{"_id":"themes/stellar/source/js/main.js","hash":"a9f17a43d63c00994a40b156a5fb45e89dd5b272","modified":1617776232829},{"_id":"themes/stellar/layout/_partial/main/footer.ejs","hash":"77c785070f5e96d03217f846ad77065e97620432","modified":1617776232786},{"_id":"themes/stellar/layout/_partial/scripts/index.ejs","hash":"85c8728b1fb9a59577fb6e1f4fcd8ca8eb63bc22","modified":1617776232793},{"_id":"themes/stellar/layout/_partial/sidebar/header.ejs","hash":"c2569ecab9b22bb7861a13f6bce095338027b3b6","modified":1617776232794},{"_id":"themes/stellar/layout/_partial/sidebar/index.ejs","hash":"0a32b2f28cd802a06bde4a1de09fa29c5475d6e8","modified":1617776232794},{"_id":"themes/stellar/layout/_partial/sidebar/logo.ejs","hash":"456f2969188af91146653ffb423e9033a93f1f32","modified":1617776232794},{"_id":"themes/stellar/scripts/events/lib/config.js","hash":"a7c1b1d9009e3c84a8f18e97c9c12406bea07f42","modified":1617776232799},{"_id":"themes/stellar/scripts/events/lib/utils.js","hash":"2c342ae9ada7275beb6eaf51d010ee1cccf1033d","modified":1617776232799},{"_id":"themes/stellar/scripts/filters/lib/img_lazyload.js","hash":"b3dedcc1fc4189589e63d4fa6f169a70e9d63cd1","modified":1617776232800},{"_id":"themes/stellar/scripts/filters/lib/img_onerror.js","hash":"d44a8e20d4d537c0cf85b980e1fc3bc84865a2d3","modified":1617776232800},{"_id":"themes/stellar/scripts/tags/lib/tabs.js","hash":"79109c237faa248d38445effd75a748f550daeca","modified":1617776232809},{"_id":"themes/stellar/source/css/_common/base.styl","hash":"5a0aa29da6cb2bdaa9821add153c10f33498e4c8","modified":1617776232812},{"_id":"themes/stellar/source/css/_common/blur.styl","hash":"565c4598e306a7f69120ed9da6241cd66820d09a","modified":1617776232812},{"_id":"themes/stellar/source/css/_common/button.styl","hash":"29629862102ce14ebc5858c572e640d9e38917ce","modified":1617776232812},{"_id":"themes/stellar/source/css/_common/control.styl","hash":"75081ca9d522a76ec4acffb8111c918b2297650a","modified":1617776232813},{"_id":"themes/stellar/source/css/_common/cap.styl","hash":"41d81510d3781bf938987265ebd6b6fdaeac027c","modified":1617776232813},{"_id":"themes/stellar/source/css/_common/highlight.styl","hash":"5ae1a5c07319fc5296276301f688e3536d7044d7","modified":1617776232813},{"_id":"themes/stellar/source/css/_common/html.styl","hash":"fc4bf71512a12ae58b08da251394df7ac6e545c6","modified":1617776232813},{"_id":"themes/stellar/source/css/_common/image.styl","hash":"cca1103a9185202b13be49e16d77d259e9ffb482","modified":1617776232813},{"_id":"themes/stellar/source/css/_common/input.styl","hash":"2a765355617dd96c5974e7872c34eabc0052ed6f","modified":1617776232814},{"_id":"themes/stellar/source/css/_common/loading.styl","hash":"e05f621d367cd2b19c5f4c629f5213fbf3f39343","modified":1617776232814},{"_id":"themes/stellar/source/css/_common/mobile-only.styl","hash":"d357f92a758d51108886b8be575bddc9e4a5a3c8","modified":1617776232814},{"_id":"themes/stellar/source/css/_common/span.styl","hash":"78cf1b0b82fd60234e1f352501c3a27d1fe3be6b","modified":1617776232814},{"_id":"themes/stellar/source/css/_common/svg.styl","hash":"dd2fbe25de3e3cf475279d375e0d5e925f9058ea","modified":1617776232815},{"_id":"themes/stellar/source/css/_common/title.styl","hash":"a82504c42ae16920192370e4936d8a48ddf39cbe","modified":1617776232815},{"_id":"themes/stellar/source/css/_common/toast.styl","hash":"61ca6b42ded511bcc99fd684800bf84c5ab9454a","modified":1617776232815},{"_id":"themes/stellar/source/css/_defines/const.styl","hash":"1fc5588e6eeff7af7fcf4be3ba9be43cca7c1b6a","modified":1617776232816},{"_id":"themes/stellar/source/css/_defines/func.styl","hash":"229cf061e589443d065c106cde560967e8cdd8fa","modified":1617776232816},{"_id":"themes/stellar/source/css/_defines/theme.styl","hash":"8fe20db2b1d1ce2002123b624683310605068536","modified":1617776232816},{"_id":"themes/stellar/source/css/_layout/index.styl","hash":"388efb67ba82dc257f142281759519c69aba86ce","modified":1617776232817},{"_id":"themes/stellar/source/css/_layout/layout.styl","hash":"b086ecce84a5c319f071dea52bbdcd33645454ae","modified":1617776232817},{"_id":"themes/stellar/source/css/_layout/list.styl","hash":"5c386939f89ea3c5795706ac05033417857aa5b0","modified":1617776232817},{"_id":"themes/stellar/source/css/_layout/main.styl","hash":"1849a1615f632545fc5a32692bb3a52e04466ba0","modified":1617776232818},{"_id":"themes/stellar/source/css/_layout/md.styl","hash":"c00942b52d80fe887663edf3d7a2b085dfe47413","modified":1617776232818},{"_id":"themes/stellar/source/css/_plugins/index.styl","hash":"a5f73c7e6af62a2372adbe4dcc15970fa23bdb69","modified":1617776232827},{"_id":"themes/stellar/source/css/_plugins/lazyload.styl","hash":"a77e3ee71ab03628ce6085acdbfc35ef59faaf27","modified":1617776232827},{"_id":"themes/stellar/source/css/_plugins/scrollreveal.styl","hash":"bfeabad9cdaaa77ea0fa1fc0f20dc91520356a6f","modified":1617776232827},{"_id":"themes/stellar/source/css/_plugins/swiper.styl","hash":"4c7862c3de6922c92b715609a5c20b063335f193","modified":1617776232828},{"_id":"themes/stellar/source/js/plugins/friends.js","hash":"9815baf1e18d7cc2c8cb0623ce032a584cb2d40a","modified":1617776232830},{"_id":"themes/stellar/source/js/plugins/sites.js","hash":"dff454cd2bc34b718692dc4e941976311c73f670","modified":1617776232830},{"_id":"themes/stellar/layout/_partial/main/article/article_footer.ejs","hash":"4f3b6cfe51985f4ac081465a60c043e7ccd8dffa","modified":1617776232785},{"_id":"themes/stellar/layout/_partial/main/article/read_next.ejs","hash":"3db49086f591294225cfa39eac2343fdab701410","modified":1617776232785},{"_id":"themes/stellar/layout/_partial/main/article/related_posts.ejs","hash":"43c0fcdd9c55f287c65b8cd61c6e4a48e6f49dc8","modified":1617776232785},{"_id":"themes/stellar/layout/_partial/main/article/wiki_cover.ejs","hash":"44ed20ec39b6973ff00513e4c0bf6f2dd615d8ed","modified":1617776232785},{"_id":"themes/stellar/layout/_partial/main/header/index.ejs","hash":"bf1d8a6979daf4339e5452be1a2d23a152b44729","modified":1617776232786},{"_id":"themes/stellar/layout/_partial/main/navbar/breadcrumb.ejs","hash":"d9db4297891154b76b50c50c688b6818de52b68f","modified":1617776232786},{"_id":"themes/stellar/layout/_partial/main/navbar/list_post.ejs","hash":"7061ddc45c81a3c2fbc2f0376f2b1203d3835248","modified":1617776232787},{"_id":"themes/stellar/layout/_partial/main/navbar/list_wiki.ejs","hash":"bac0a90762e71f25f6fbf5134734c5dd44310308","modified":1617776232788},{"_id":"themes/stellar/layout/_partial/main/post_list/paginator.ejs","hash":"285c00bd0a97b9ff2c0daf30eee20739eb64d2c8","modified":1617776232788},{"_id":"themes/stellar/layout/_partial/main/post_list/post_card.ejs","hash":"3e0fdafed6a1b3d9f6b2cfe9a9b05a1f5379e929","modified":1617776232789},{"_id":"themes/stellar/layout/_partial/main/post_list/wiki_card.ejs","hash":"8f4a365b093f8743ab39256d8b1ddc08d650292d","modified":1617776232789},{"_id":"themes/stellar/layout/_partial/plugins/comments/layout.ejs","hash":"5f678bf8dac466fad0eea60fe7dced95737b716e","modified":1617776232790},{"_id":"themes/stellar/layout/_partial/plugins/comments/script.ejs","hash":"a9dce8066723ada71d91960d5dd07ab194cc3b05","modified":1617776232791},{"_id":"themes/stellar/layout/_partial/sidebar/widgets/markdown.ejs","hash":"2f14098e0834ad2b98b0dff3b6d19eed435ca689","modified":1617776232795},{"_id":"themes/stellar/layout/_partial/sidebar/widgets/recent.ejs","hash":"a9a215a52fd93be7ecf93cb70d4384d5fead01b2","modified":1617776232795},{"_id":"themes/stellar/layout/_partial/sidebar/widgets/toc.ejs","hash":"293fc23edbdc1224da7865106df9a86680edc249","modified":1617776232795},{"_id":"themes/stellar/layout/_partial/sidebar/widgets/wiki_more.ejs","hash":"ce52d61b9018c3c7688b0e9d05e8ab24a108ecf6","modified":1617776232795},{"_id":"themes/stellar/source/css/_layout/pages/archives.styl","hash":"f2fed99aebbdd42bcf80d00d9c2880f4107265b4","modified":1617776232818},{"_id":"themes/stellar/source/css/_layout/pages/error.styl","hash":"4c93c760b22d0e21800c45d7dc6f9e50c50da590","modified":1617776232819},{"_id":"themes/stellar/source/css/_layout/partial/article-footer.styl","hash":"b9041521e7557f13b876d51bc53eca966e3db49a","modified":1617776232819},{"_id":"themes/stellar/source/css/_layout/partial/bread-nav.styl","hash":"478d2f568f42a4fdf3cc7b43157070d1d2897d4b","modified":1617776232820},{"_id":"themes/stellar/source/css/_layout/partial/cover.styl","hash":"d57c16a3f3342f0189d8c3bb76d61ad159a47d25","modified":1617776232820},{"_id":"themes/stellar/source/css/_layout/partial/footer.styl","hash":"2da24b52b8c7ee98f1d55e296dc5279493ec2dd8","modified":1617776232820},{"_id":"themes/stellar/source/css/_layout/partial/navbar.styl","hash":"7a340b73437e27d763d8164a5c0116e82c955cdc","modified":1617776232820},{"_id":"themes/stellar/source/css/_layout/partial/paginator.styl","hash":"aaad37313623d12785088ab78846ead6a973dd12","modified":1617776232820},{"_id":"themes/stellar/source/css/_layout/partial/related.styl","hash":"4cabb6a1e43c470200f01e18aa406bb2d0c8f890","modified":1617776232822},{"_id":"themes/stellar/source/css/_layout/sidebar/footer.styl","hash":"283ccc89cb389b990a9fe7422f39e93cb4d07351","modified":1617776232822},{"_id":"themes/stellar/source/css/_layout/sidebar/sidebar.styl","hash":"1fc0db07afed5e2c45c7f5cd0bee4b8b26a81997","modified":1617776232823},{"_id":"themes/stellar/source/css/_layout/sidebar/toc.styl","hash":"2f2fd06702ba1a909bf3b4909b003e5dffc0f374","modified":1617776232823},{"_id":"themes/stellar/source/css/_layout/tag-plugins/about.styl","hash":"bda2ceb5a06324de67123a9c13c2c29980922839","modified":1617776232824},{"_id":"themes/stellar/source/css/_layout/tag-plugins/checkbox.styl","hash":"58f5cad89fe3879aa00bb8c9854d3f262fb2f2b4","modified":1617776232824},{"_id":"themes/stellar/source/css/_layout/tag-plugins/common.styl","hash":"373d896b12f59e049ab3fb61a8ea37943ec8251b","modified":1617776232824},{"_id":"themes/stellar/source/css/_layout/tag-plugins/copy.styl","hash":"a0c2c2d3d6b17f6bd92e4be47537cb0cc9bffdcc","modified":1617776232824},{"_id":"themes/stellar/source/css/_layout/tag-plugins/folding.styl","hash":"e18f3fe7dbe5b62d43f7cc1c23ceb2310943ff2d","modified":1617776232824},{"_id":"themes/stellar/source/css/_layout/tag-plugins/frame.styl","hash":"e15f5390951653b6ad62420afaed3ea2fe3f673c","modified":1617776232825},{"_id":"themes/stellar/source/css/_layout/tag-plugins/friends.styl","hash":"8f9e60b94c02197e4555f923d357017742bf8d7b","modified":1617776232825},{"_id":"themes/stellar/source/css/_layout/tag-plugins/ghcard.styl","hash":"98a50d3fab79ce03dd7f161fe3442d803712c284","modified":1617776232825},{"_id":"themes/stellar/source/css/_layout/tag-plugins/image.styl","hash":"6e8830da3d63216488b2d41936a553a7308907fd","modified":1617776232825},{"_id":"themes/stellar/source/css/_layout/tag-plugins/link.styl","hash":"5b53ce326172750ec895c814aab5b4574f8a44c0","modified":1617776232825},{"_id":"themes/stellar/source/css/_layout/tag-plugins/navbar.styl","hash":"e2216d3777fc49584f7e1d3f9115cfe0f08c8dac","modified":1617776232825},{"_id":"themes/stellar/source/css/_layout/tag-plugins/note.styl","hash":"3cd8f7e5264744b0d07d44cd396886ef8522bbcb","modified":1617776232826},{"_id":"themes/stellar/source/css/_layout/tag-plugins/sites.styl","hash":"df8db4a080a7b8595cad2676b94c855005cc6f19","modified":1617776232826},{"_id":"themes/stellar/source/css/_layout/tag-plugins/tabs.styl","hash":"fe272684d545563c1914a6c3ba4d323f97d099ca","modified":1617776232826},{"_id":"themes/stellar/source/css/_layout/tag-plugins/timeline.styl","hash":"50850e94bc31250b13ca616fdadb583edfe2d124","modified":1617776232826},{"_id":"themes/stellar/source/css/_plugins/comments/utterances.styl","hash":"80ef659cc375487632fab9768be482ec4bfc757a","modified":1617776232827},{"_id":"themes/stellar/source/css/_plugins/comments/valine.styl","hash":"246e66527c3eef915e4d7713ebf0fc8b7eb07d2a","modified":1617776232827},{"_id":"themes/stellar/layout/_partial/plugins/comments/utterances/layout.ejs","hash":"4e2ae1fdee9daa6bb8d92a74281d6a60ae0fc79a","modified":1617776232791},{"_id":"themes/stellar/layout/_partial/plugins/comments/utterances/script.ejs","hash":"4c00276007d6f8c327d2f7790efca5c9417ff194","modified":1617776232792},{"_id":"themes/stellar/layout/_partial/plugins/comments/valine/layout.ejs","hash":"e0b3ed8b13bb4b995b4bd8c8c7ec75e43b074d8e","modified":1617776232792},{"_id":"themes/stellar/layout/_partial/plugins/comments/valine/script.ejs","hash":"38d19501c576e444e349e7cab3d9f958d889a42b","modified":1617776232793},{"_id":"source/tags/index.md","hash":"c611dc2ac446dcc83a01ccd88bc1148bca4fe9cf","modified":1617776985657},{"_id":"source/_posts/å¤§å‰ç«¯/React Hooks çš„ä¸€äº›ç‰¹æ€§.md","hash":"6be79ec88c5c56e4be78488aa0273e39680c5fce","modified":1617779331075},{"_id":"source/_posts/å¤§å‰ç«¯/Chrome è°ƒè¯•æŠ€å·§.md","hash":"973121dcb7481de83a9799ba422da07cf79d0c37","modified":1617779556587},{"_id":"source/_posts/å¤§å‰ç«¯/React16 æ–‡æ¡£.md","hash":"0ec76c9a3f4cd2f747d5a3e78b26f85ac70d4991","modified":1617779335055},{"_id":"source/_posts/å¤§å‰ç«¯/Vue2 diff ç®—æ³•.md","hash":"1edbf2ac974fd0dfa8639db3af0732aadcaefc1b","modified":1617779354917},{"_id":"source/_posts/å¤§å‰ç«¯/Vue2 æ•°æ®é©±åŠ¨.md","hash":"dffe02c7e09a26700a6a11385f8998c476b5c362","modified":1617779339175},{"_id":"source/_posts/å¤§å‰ç«¯/Vue2 æ–‡æ¡£.md","hash":"2a2468ced4ea77d1a876a76faee6d2d7ecf35c84","modified":1617779347133},{"_id":"source/_posts/å¤§å‰ç«¯/Vue2 è™šæ‹Ÿ dom.md","hash":"d57579a1e9dfff9543e39003638746b4da95a2f5","modified":1617779351013},{"_id":"source/_posts/å¤§å‰ç«¯/ä»å›¾ç‰‡è£å‰ªäº†è§£ js äºŒè¿›åˆ¶å¸¸ç”¨ api.md","hash":"32c870e878c091d66c81043c7a679ed203f76ad8","modified":1617779528733},{"_id":"source/_posts/å¤§å‰ç«¯/h5 ç›¸å…³é—®é¢˜æ”¶é›†.md","hash":"2f143c234480b0a73f3ff79596036e8af761b900","modified":1617779328085},{"_id":"source/_posts/å¤§å‰ç«¯/ç¼–å†™ React ç»„ä»¶æ—¶å¸¸è§çš„ 5 ä¸ªé”™è¯¯.md","hash":"c375df493d7cb29f6e89be91f92ef604ae6bcce6","modified":1617779306533},{"_id":"source/_posts/å¤§å‰ç«¯/ç½‘ç»œè¯·æ±‚ ajax å’Œ fetch.md","hash":"61b6a2ca5f3aa45aa838f4a0e34e87c79a461525","modified":1617779558943},{"_id":"source/_posts/å¤§å‰ç«¯/é˜²æŠ–å’ŒèŠ‚æµ.md","hash":"4af0d6e03b9c4f8e5c4e3d3aab00f31027449946","modified":1617779564110},{"_id":"source/_posts/å¤§å‰ç«¯/TypeScript æ–‡æ¡£.md","hash":"d1d48af3f1fff907551510fe7b4fa49785bc551f","modified":1617779342754},{"_id":"source/_posts/å‰ç«¯/Vue2 diff ç®—æ³•.md","hash":"f15b47fd0ab308bba07cba4e40b631b178be1623","modified":1617780197007},{"_id":"source/_posts/å‰ç«¯/Vue2 è™šæ‹Ÿ dom.md","hash":"7bbbddc043abbd88321b8a78c97f7df9dad13d59","modified":1617780200285},{"_id":"source/_posts/å‰ç«¯/h5 ç›¸å…³é—®é¢˜æ”¶é›†.md","hash":"2f143c234480b0a73f3ff79596036e8af761b900","modified":1617779328085},{"_id":"source/_posts/å‰ç«¯/ä»å›¾ç‰‡è£å‰ªäº†è§£ js äºŒè¿›åˆ¶å¸¸ç”¨ api.md","hash":"08a26f9721a164cc4b430e274c0a0c9fe05d0c17","modified":1617780449657},{"_id":"source/_posts/å‰ç«¯/å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•.md","hash":"d95988db9ab867d1c292190751fcb2ac71c65b78","modified":1617781159368},{"_id":"source/_posts/å‰ç«¯/ç¼–å†™ React ç»„ä»¶æ—¶å¸¸è§çš„ 5 ä¸ªé”™è¯¯.md","hash":"a04540c87d3600e44ba10e6aba9af3c8bc9d8d27","modified":1617781151351},{"_id":"source/_posts/å‰ç«¯/ç½‘ç»œè¯·æ±‚ ajax å’Œ fetch.md","hash":"133f43431326d17adab05574d3f77082a8f86830","modified":1617780665441},{"_id":"source/_posts/å‰ç«¯/é˜²æŠ–å’ŒèŠ‚æµ.md","hash":"af6241bf0789344bcc9d17967ebd309b733e3082","modified":1617780716210},{"_id":"source/_posts/å‰ç«¯/Chrome è°ƒè¯•æŠ€å·§.md","hash":"cac8094ba25ca6c8f7c42ee521f4703047ef91de","modified":1617780284045},{"_id":"source/_posts/å‰ç«¯/Vue2 æ–‡æ¡£.md","hash":"e6748f4202c6133246495bf618bdb9782f911490","modified":1617780203482},{"_id":"source/_posts/å‰ç«¯/React Hooks çš„ä¸€äº›ç‰¹æ€§.md","hash":"034f027b8b7212c04a925d47ed8b2bba818a093f","modified":1617781168001},{"_id":"source/_posts/å‰ç«¯/React16 æ–‡æ¡£.md","hash":"ee054eb7665598aa941883ff2390643030f9ad69","modified":1617780586117},{"_id":"source/_posts/å‰ç«¯/Vue2 æ•°æ®é©±åŠ¨.md","hash":"17c5a20ccd102cf7a9a2ade40fe8be712b7349ab","modified":1617780563605},{"_id":"source/_posts/å‰ç«¯/TypeScript æ–‡æ¡£.md","hash":"d46643289ccd095916c0504f2ffd3ca894e6f9b9","modified":1617780604867},{"_id":"source/_posts/å‰ç«¯/Hybrid ç®€ä»‹.md","hash":"62e57e60ef88f46b2afc973e5a5d8ac668c208f4","modified":1617780546242},{"_id":"source/_posts/å‰ç«¯/H5 ç›¸å…³é—®é¢˜æ”¶é›†.md","hash":"495bf68a0e38368ea19a392cbf2a226fe305ea8c","modified":1617780553982},{"_id":"source/_posts/å‰ç«¯/æ¸è¿›å¼ web åº”ç”¨ç¨‹åº pwa ç®€ä»‹.md","hash":"74c30b5f51c6e8b6f9caa1a4ab1a3bcd3f76225a","modified":1617780427656}],"Category":[{"name":"å¤§å‰ç«¯","_id":"ckn724nl000024d7y3eu5gt0i"},{"name":"javascript","parent":"ckn724nl000024d7y3eu5gt0i","_id":"ckn73cy0z000o4f7yg2dt947h"},{"name":"ä½¿ç”¨æŠ€å·§","parent":"ckn724nl000024d7y3eu5gt0i","_id":"ckn73ey0r000r4f7ybtxc3k7n"},{"name":"å‰ç«¯","parent":"ckn724nl000024d7y3eu5gt0i","_id":"ckn73g6cm000v4f7y0pks8fht"},{"name":"js","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73gnhk000x4f7y1wry0ks4"},{"name":"react","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73grzz00104f7y9x6ogo1d"},{"name":"äºŒè¿›åˆ¶","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73gvv400124f7ybheh9nsv"},{"name":"ä½¿ç”¨æŠ€å·§","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73hddp00154f7y8uknga3u"},{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73hseb00184f7y84nv0xu5"},{"name":"è§£å†³æ–¹æ¡ˆ","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73jbgh001j4f7yeeo93fgh"},{"name":"h5","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73motu001z4f7y8qsfb5n4"},{"name":"vue","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73paob002a4f7ybpnebfei"},{"name":"typescript","parent":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73sgs7002v4f7y386idm2r"},{"name":"å‰ç«¯","_id":"ckn73y16y00002b7yhsgu5ukt"},{"name":"react","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn73y16z00012b7y8cj11ow7"},{"name":"js","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn73yagp00222b7yftoc34u4"},{"name":"h5","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn73yq2u002d2b7y8v6r4oxf"},{"name":"typescript","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn73z6fa002k2b7y2yj1b6rf"},{"name":"vue","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn73z9ui002n2b7yduwfbvhf"},{"name":"javascript","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn745toq0000yx7y2d9704vp"},{"name":"jjavascripts","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7463j00005yx7y933s9lnd"},{"name":"ts","parent":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn747lph003jyx7ya58sbihb"}],"Data":[],"Page":[],"Post":[{"title":"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•","date":"2021-04-05T16:00:00.000Z","_content":"\nåœ¨å‰ç«¯å¤§å‹é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ˜¯ä¸å¯ç¼ºå°‘çš„ä¸€ç¯ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•ä¸ä½†å¯ä»¥é™ä½ bug å‡ºç°çš„é¢‘ç‡ï¼Œä¹Ÿå¯è®©é¡¹ç›®æ›´åŠ å¥å£®\n\n<!-- more -->\n\n> å®˜æ–¹æ–‡æ¡£: [https://developers.google.com/](https://developers.google.com/)\n\n> éš†é‡æ„Ÿè°¢: [æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§](https://juejin.cn/book/6844733783166418958)\n\n### 1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \n\n- æ§åˆ¶å°è¾“å…¥ `$0`Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273)\n\n### 2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\n\n- é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ `Break on`ã€‚\n- `subtree modifications` ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« `ç§»é™¤` æˆ–è€… `æ·»åŠ `çš„äº‹ä»¶\n- `Break > attribute modifications`Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« `æ·»åŠ `ï¼Œ`ç§»é™¤` æˆ–è€… `è¢«ä¿®æ”¹å€¼`çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n- `Break > node removal`Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« `ç§»é™¤` çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n\n### 3ã€debug å‡½æ•°\n\n- å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435)\n\n### 4ã€console.log æ·»åŠ æ ·å¼\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654)\n\n### 5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\n\n- é€‰ä¸­ `Memory > Heap snapshot`Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚\n- é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ `Comparison`Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ `delta`Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919)\n\n### 6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \n\n- Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567)\n\n### 7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\n\n- `node --inspect-brk æ–‡ä»¶å`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868)\n\n### 8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\n\n- æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ `debug`ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623)\n\n- æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ `XHR`ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» `Break > node removal` ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ `call stack` æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938)\n\n- æ–¹æ¡ˆ 3: ä½¿ç”¨ `getEventListeners` è·å– `Dom` å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ `Chrome` æ§åˆ¶å°ä½¿ç”¨)\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740)\n\n### 9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\n\n1. åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹\n1. å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶\n1. ä½¿ç”¨ node --inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡\n1. æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101)\n\n### 10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\n\n- æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯\n- æ–¹æ¡ˆ 2: ç‚¹å‡» `Sources`Â  åç‚¹å‡» `Pause on exceptions`Â  æœ€åå‹¾é€‰ `Pause on exceptions`ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901)\n\n### 11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\n\n- é€‰ä¸­ `Sources > Filesystem`Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067)\n\n### 12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \n\n- é€‰ä¸­ `Sources > Snippets`Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ\n- è¾“å…¥ `Command + p`Â  åè¾“å…¥ `i`Â  åæ‰§è¡Œ\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845)\n\n### 13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\n\n- é€‰ä¸­ `Source > Overrides`Â ï¼Œä¹‹åç‚¹å‡» `+`Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ `Enable Local Overrides`Â ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831)\n\n### 14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\n\n- è¾“å…¥ `Command + shift + p`Â ï¼Œæœç´¢ `show changes`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928)\n\n### 15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\n\n- é€‰æ‹© `NetWork > Initialtor`Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744)\n\n### 16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\n\n- `Command + shift + p`Â  è¾“å…¥ `show performance monitor`Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚\n  - `CPU usage`Â ï¼š `cpu` çš„ç›‘å¬\n  - `JS heap size`Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° `window`Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚\n  - `DOM Nodes`: å†…å­˜ä¸­æ‰€åˆ†é…çš„ `dom` èŠ‚ç‚¹çš„ä¸ªæ•°\n  - `JS envnt listeners`: `js` ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919)\n\n### 17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\n\n- é€‰æ‹© `performance`Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… `js` ä»£ç è¿è¡Œçš„æƒ…å†µã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919)\n\n### 18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\n\n- `Command + shift + p`Â  è¾“å…¥ `show animations`Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919)\n\n### 19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\n\n- `Command + shift +p`Â  è¾“å…¥ `show coverage`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893)\n\n### 20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\n\n- å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â `copy()`Â  åœ¨ Â `console`Â  é‡Œ Â `copy`Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â `copy($_)`Â  æˆ– Â `copy($0)`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332)\n\n### 21ã€$\\_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\n\n- `$_`Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ **å¼•ç”¨**\n\n\\*\\*\n**![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507)**\n\n### 22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\n\n- æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ `npm` åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ [Chrome æ’ä»¶:Console Importer](https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related) çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ `console` ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› `npm` åº“ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332)\n\n### 23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\n\n- `DevTools` åœ¨ `Console` é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º `Live expression` çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ \"çœ¼ç›\" ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• `JavaScript` è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102)\n\n### 24ã€é€šè¿‡ 'h' æ¥éšè—å…ƒç´ \n\n- æŒ‰ä¸€ä¸‹ Â `'h'`Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ '`h`' å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332)\n\n### 25ã€æ‹–åŠ¨ & æ”¾ç½® å…ƒç´ \n\n- å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â `DOM`Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)\n\n![2.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066)\n\n### 26ã€ä½¿ç”¨ `control` (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\n\n- å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â `DOM`Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨`[ctrl]`Â +Â `[â¬†]`Â /Â `[ctrl]`Â +Â `[â¬‡]`Â (`[âŒ˜]`Â +Â `[â¬†]`Â /Â `[âŒ˜]`Â +Â `[â¬‡]`Â on Mac).\n\n![3.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332)\n\n### 27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\n\n- ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ `[ctrl]` + `[v]` æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ `HTML` ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ\n\n- ä½¿ç”¨`[ctrl]` + `[z]` (`[âŒ˜]` + `[z]` on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ `[ctrl]` + `[shift]` + `[z]`é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066)\n\n### 28ã€`Shadow editor` é˜´å½±ç¼–è¾‘å™¨\n\n- ä½ å¯ä»¥é€šè¿‡åœ¨ Â `Style`Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â `box-shadow`Â  å±æ€§æˆ–è€… Â `text-shadow`Â  å±æ€§çš„ Â `é˜´å½±æ–¹å½¢ç¬¦å·`Â  æ¥æ‰“å¼€å®ƒï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576)\n\n### 29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\n\n- ä¹Ÿç§°ä¸º `Cubic bezier(è´å¡å°”)` ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ `CSS` çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ `é­”æ³•æ•°å€¼` ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º `transition-timing-function` æˆ–è€… `animation-timing-function` CSS å±æ€§ã€‚\n\n- åƒä¹‹å‰è¯´çš„ `Color picker` å’Œ `Shadow editor` ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š`trasition`ï¼Œ `animation` - è¯·æ³¨æ„ï¼šå¦‚æœ`timing` å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474)\n\n### 30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\n\nå½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ `Color` å’Œ `Shadow` ç¼–è¾‘å™¨æ·»åŠ  `CSS` å±æ€§çš„æŒ‰é’®ï¼š\n\n- `text-shadow`\n\n- `box-shadow`\n\n- `color`\n\n- `background-color`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632)\n\n### 31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\n\n- ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â `â–¶`Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â `expand recursively`Â  å‘½ä»¤ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760)\n\n### 32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\n\n- å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ `API` è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚\n\n- `Drawer` é‡Œçš„ `Sensors(ä¼ æ„Ÿå™¨)` é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« `navigator.geolocation.watchPosition`ï¼ˆæˆ– `.getCurrentPosition` ï¼‰æŠ¥å‘Šã€‚\n\n- å¦‚æœä½ çš„ `App` ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774)\n","source":"_posts/å¤§å‰ç«¯/chrome è°ƒè¯•å°æŠ€å·§.md","raw":"---\ntitle: å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•\ndate: 2021-04-06\ncategories: [å¤§å‰ç«¯, å‰ç«¯, js]\ntags: \n  - ä½¿ç”¨æŠ€å·§\n---\n\nåœ¨å‰ç«¯å¤§å‹é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ˜¯ä¸å¯ç¼ºå°‘çš„ä¸€ç¯ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•ä¸ä½†å¯ä»¥é™ä½ bug å‡ºç°çš„é¢‘ç‡ï¼Œä¹Ÿå¯è®©é¡¹ç›®æ›´åŠ å¥å£®\n\n<!-- more -->\n\n> å®˜æ–¹æ–‡æ¡£: [https://developers.google.com/](https://developers.google.com/)\n\n> éš†é‡æ„Ÿè°¢: [æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§](https://juejin.cn/book/6844733783166418958)\n\n### 1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \n\n- æ§åˆ¶å°è¾“å…¥ `$0`Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273)\n\n### 2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\n\n- é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ `Break on`ã€‚\n- `subtree modifications` ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« `ç§»é™¤` æˆ–è€… `æ·»åŠ `çš„äº‹ä»¶\n- `Break > attribute modifications`Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« `æ·»åŠ `ï¼Œ`ç§»é™¤` æˆ–è€… `è¢«ä¿®æ”¹å€¼`çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n- `Break > node removal`Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« `ç§»é™¤` çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n\n### 3ã€debug å‡½æ•°\n\n- å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435)\n\n### 4ã€console.log æ·»åŠ æ ·å¼\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654)\n\n### 5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\n\n- é€‰ä¸­ `Memory > Heap snapshot`Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚\n- é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ `Comparison`Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ `delta`Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919)\n\n### 6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \n\n- Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567)\n\n### 7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\n\n- `node --inspect-brk æ–‡ä»¶å`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868)\n\n### 8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\n\n- æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ `debug`ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623)\n\n- æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ `XHR`ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» `Break > node removal` ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ `call stack` æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938)\n\n- æ–¹æ¡ˆ 3: ä½¿ç”¨ `getEventListeners` è·å– `Dom` å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ `Chrome` æ§åˆ¶å°ä½¿ç”¨)\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740)\n\n### 9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\n\n1. åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹\n1. å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶\n1. ä½¿ç”¨ node --inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡\n1. æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101)\n\n### 10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\n\n- æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯\n- æ–¹æ¡ˆ 2: ç‚¹å‡» `Sources`Â  åç‚¹å‡» `Pause on exceptions`Â  æœ€åå‹¾é€‰ `Pause on exceptions`ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901)\n\n### 11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\n\n- é€‰ä¸­ `Sources > Filesystem`Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067)\n\n### 12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \n\n- é€‰ä¸­ `Sources > Snippets`Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ\n- è¾“å…¥ `Command + p`Â  åè¾“å…¥ `i`Â  åæ‰§è¡Œ\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845)\n\n### 13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\n\n- é€‰ä¸­ `Source > Overrides`Â ï¼Œä¹‹åç‚¹å‡» `+`Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ `Enable Local Overrides`Â ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831)\n\n### 14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\n\n- è¾“å…¥ `Command + shift + p`Â ï¼Œæœç´¢ `show changes`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928)\n\n### 15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\n\n- é€‰æ‹© `NetWork > Initialtor`Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744)\n\n### 16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\n\n- `Command + shift + p`Â  è¾“å…¥ `show performance monitor`Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚\n  - `CPU usage`Â ï¼š `cpu` çš„ç›‘å¬\n  - `JS heap size`Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° `window`Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚\n  - `DOM Nodes`: å†…å­˜ä¸­æ‰€åˆ†é…çš„ `dom` èŠ‚ç‚¹çš„ä¸ªæ•°\n  - `JS envnt listeners`: `js` ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919)\n\n### 17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\n\n- é€‰æ‹© `performance`Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… `js` ä»£ç è¿è¡Œçš„æƒ…å†µã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919)\n\n### 18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\n\n- `Command + shift + p`Â  è¾“å…¥ `show animations`Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919)\n\n### 19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\n\n- `Command + shift +p`Â  è¾“å…¥ `show coverage`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893)\n\n### 20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\n\n- å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â `copy()`Â  åœ¨ Â `console`Â  é‡Œ Â `copy`Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â `copy($_)`Â  æˆ– Â `copy($0)`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332)\n\n### 21ã€$\\_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\n\n- `$_`Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ **å¼•ç”¨**\n\n\\*\\*\n**![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507)**\n\n### 22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\n\n- æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ `npm` åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ [Chrome æ’ä»¶:Console Importer](https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related) çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ `console` ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› `npm` åº“ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332)\n\n### 23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\n\n- `DevTools` åœ¨ `Console` é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º `Live expression` çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ \"çœ¼ç›\" ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• `JavaScript` è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102)\n\n### 24ã€é€šè¿‡ 'h' æ¥éšè—å…ƒç´ \n\n- æŒ‰ä¸€ä¸‹ Â `'h'`Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ '`h`' å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332)\n\n### 25ã€æ‹–åŠ¨ & æ”¾ç½® å…ƒç´ \n\n- å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â `DOM`Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)\n\n![2.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066)\n\n### 26ã€ä½¿ç”¨ `control` (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\n\n- å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â `DOM`Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨`[ctrl]`Â +Â `[â¬†]`Â /Â `[ctrl]`Â +Â `[â¬‡]`Â (`[âŒ˜]`Â +Â `[â¬†]`Â /Â `[âŒ˜]`Â +Â `[â¬‡]`Â on Mac).\n\n![3.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332)\n\n### 27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\n\n- ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ `[ctrl]` + `[v]` æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ `HTML` ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ\n\n- ä½¿ç”¨`[ctrl]` + `[z]` (`[âŒ˜]` + `[z]` on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ `[ctrl]` + `[shift]` + `[z]`é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066)\n\n### 28ã€`Shadow editor` é˜´å½±ç¼–è¾‘å™¨\n\n- ä½ å¯ä»¥é€šè¿‡åœ¨ Â `Style`Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â `box-shadow`Â  å±æ€§æˆ–è€… Â `text-shadow`Â  å±æ€§çš„ Â `é˜´å½±æ–¹å½¢ç¬¦å·`Â  æ¥æ‰“å¼€å®ƒï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576)\n\n### 29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\n\n- ä¹Ÿç§°ä¸º `Cubic bezier(è´å¡å°”)` ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ `CSS` çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ `é­”æ³•æ•°å€¼` ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º `transition-timing-function` æˆ–è€… `animation-timing-function` CSS å±æ€§ã€‚\n\n- åƒä¹‹å‰è¯´çš„ `Color picker` å’Œ `Shadow editor` ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š`trasition`ï¼Œ `animation` - è¯·æ³¨æ„ï¼šå¦‚æœ`timing` å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474)\n\n### 30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\n\nå½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ `Color` å’Œ `Shadow` ç¼–è¾‘å™¨æ·»åŠ  `CSS` å±æ€§çš„æŒ‰é’®ï¼š\n\n- `text-shadow`\n\n- `box-shadow`\n\n- `color`\n\n- `background-color`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632)\n\n### 31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\n\n- ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â `â–¶`Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â `expand recursively`Â  å‘½ä»¤ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760)\n\n### 32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\n\n- å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ `API` è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚\n\n- `Drawer` é‡Œçš„ `Sensors(ä¼ æ„Ÿå™¨)` é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« `navigator.geolocation.watchPosition`ï¼ˆæˆ– `.getCurrentPosition` ï¼‰æŠ¥å‘Šã€‚\n\n- å¦‚æœä½ çš„ `App` ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774)\n","slug":"å¤§å‰ç«¯/chrome è°ƒè¯•å°æŠ€å·§","published":1,"updated":"2021-04-07T07:03:58.165Z","_id":"ckn72xyzx00014f7ybq9j8n0k","comments":1,"layout":"post","photos":[],"link":"","content":"<p>åœ¨å‰ç«¯å¤§å‹é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ˜¯ä¸å¯ç¼ºå°‘çš„ä¸€ç¯ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•ä¸ä½†å¯ä»¥é™ä½ bug å‡ºç°çš„é¢‘ç‡ï¼Œä¹Ÿå¯è®©é¡¹ç›®æ›´åŠ å¥å£®</p>\n<span id=\"more\"></span>\n\n<blockquote>\n<p>å®˜æ–¹æ–‡æ¡£: <a href=\"https://developers.google.com/\">https://developers.google.com/</a></p>\n</blockquote>\n<blockquote>\n<p>éš†é‡æ„Ÿè°¢: <a href=\"https://juejin.cn/book/6844733783166418958\">æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§</a></p>\n</blockquote>\n<h3 id=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \"><a href=\"#1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \" class=\"headerlink\" title=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \"></a>1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ </h3><ul>\n<li>æ§åˆ¶å°è¾“å…¥ <code>$0</code>Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273\" alt=\"image.png\"></p>\n<h3 id=\"2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\"><a href=\"#2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\" class=\"headerlink\" title=\"2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\"></a>2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹</h3><ul>\n<li>é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ <code>Break on</code>ã€‚</li>\n<li><code>subtree modifications</code> ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« <code>ç§»é™¤</code> æˆ–è€… <code>æ·»åŠ </code>çš„äº‹ä»¶</li>\n<li><code>Break &gt; attribute modifications</code>Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« <code>æ·»åŠ </code>ï¼Œ<code>ç§»é™¤</code> æˆ–è€… <code>è¢«ä¿®æ”¹å€¼</code>çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n<li><code>Break &gt; node removal</code>Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« <code>ç§»é™¤</code> çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n</ul>\n<h3 id=\"3ã€debug-å‡½æ•°\"><a href=\"#3ã€debug-å‡½æ•°\" class=\"headerlink\" title=\"3ã€debug å‡½æ•°\"></a>3ã€debug å‡½æ•°</h3><ul>\n<li>å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435\" alt=\"image.png\"></p>\n<h3 id=\"4ã€console-log-æ·»åŠ æ ·å¼\"><a href=\"#4ã€console-log-æ·»åŠ æ ·å¼\" class=\"headerlink\" title=\"4ã€console.log æ·»åŠ æ ·å¼\"></a>4ã€console.log æ·»åŠ æ ·å¼</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654\" alt=\"image.png\"></p>\n<h3 id=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"><a href=\"#5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"></a>5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼</h3><ul>\n<li>é€‰ä¸­ <code>Memory &gt; Heap snapshot</code>Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚</li>\n<li>é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ <code>Comparison</code>Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ <code>delta</code>Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \"><a href=\"#6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \" class=\"headerlink\" title=\"6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \"></a>6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ </h3><ul>\n<li>Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567\" alt=\"image.png\"></p>\n<h3 id=\"7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\"><a href=\"#7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\" class=\"headerlink\" title=\"7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\"></a>7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº</h3><ul>\n<li><code>node --inspect-brk æ–‡ä»¶å</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868\" alt=\"image.png\"></p>\n<h3 id=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"><a href=\"#8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\" class=\"headerlink\" title=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"></a>8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹</h3><ul>\n<li>æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ <code>debug</code>ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ <code>XHR</code>ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» <code>Break &gt; node removal</code> ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ <code>call stack</code> æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 3: ä½¿ç”¨ <code>getEventListeners</code> è·å– <code>Dom</code> å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ <code>Chrome</code> æ§åˆ¶å°ä½¿ç”¨)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740\" alt=\"image.png\"></p>\n<h3 id=\"9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\"><a href=\"#9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\" class=\"headerlink\" title=\"9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\"></a>9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº</h3><ol>\n<li>åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹</li>\n<li>å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶</li>\n<li>ä½¿ç”¨ node â€“inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡</li>\n<li>æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101\" alt=\"image.png\"></p>\n<h3 id=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"><a href=\"#10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\" class=\"headerlink\" title=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"></a>10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ</h3><ul>\n<li>æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯</li>\n<li>æ–¹æ¡ˆ 2: ç‚¹å‡» <code>Sources</code>Â  åç‚¹å‡» <code>Pause on exceptions</code>Â  æœ€åå‹¾é€‰ <code>Pause on exceptions</code>ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901\" alt=\"image.png\"></p>\n<h3 id=\"11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"><a href=\"#11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\" class=\"headerlink\" title=\"11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"></a>11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·</h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Filesystem</code>Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067\" alt=\"image.png\"></p>\n<h3 id=\"12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"><a href=\"#12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \" class=\"headerlink\" title=\"12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"></a>12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç </h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Snippets</code>Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ</li>\n<li>è¾“å…¥ <code>Command + p</code>Â  åè¾“å…¥ <code>i</code>Â  åæ‰§è¡Œ</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845\" alt=\"image.png\"></p>\n<h3 id=\"13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\"><a href=\"#13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\" class=\"headerlink\" title=\"13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\"></a>13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼</h3><ul>\n<li>é€‰ä¸­ <code>Source &gt; Overrides</code>Â ï¼Œä¹‹åç‚¹å‡» <code>+</code>Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ <code>Enable Local Overrides</code>Â ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831\" alt=\"image.png\"></p>\n<h3 id=\"14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"><a href=\"#14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\" class=\"headerlink\" title=\"14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"></a>14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”</h3><ul>\n<li>è¾“å…¥ <code>Command + shift + p</code>Â ï¼Œæœç´¢ <code>show changes</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928\" alt=\"image.png\"></p>\n<h3 id=\"15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"><a href=\"#15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\" class=\"headerlink\" title=\"15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"></a>15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„</h3><ul>\n<li>é€‰æ‹© <code>NetWork &gt; Initialtor</code>Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744\" alt=\"image.png\"></p>\n<h3 id=\"16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\"><a href=\"#16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\" class=\"headerlink\" title=\"16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\"></a>16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show performance monitor</code>Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚<ul>\n<li><code>CPU usage</code>Â ï¼š <code>cpu</code> çš„ç›‘å¬</li>\n<li><code>JS heap size</code>Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° <code>window</code>Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚</li>\n<li><code>DOM Nodes</code>: å†…å­˜ä¸­æ‰€åˆ†é…çš„ <code>dom</code> èŠ‚ç‚¹çš„ä¸ªæ•°</li>\n<li><code>JS envnt listeners</code>: <code>js</code> ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"><a href=\"#17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\" class=\"headerlink\" title=\"17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"></a>17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜</h3><ul>\n<li>é€‰æ‹© <code>performance</code>Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… <code>js</code> ä»£ç è¿è¡Œçš„æƒ…å†µã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"><a href=\"#18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\" class=\"headerlink\" title=\"18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"></a>18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show animations</code>Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"><a href=\"#19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\" class=\"headerlink\" title=\"19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"></a>19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ</h3><ul>\n<li><code>Command + shift +p</code>Â  è¾“å…¥ <code>show coverage</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893\" alt=\"image.png\"></p>\n<h3 id=\"20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\"><a href=\"#20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\" class=\"headerlink\" title=\"20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\"></a>20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹</h3><ul>\n<li>å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â <code>copy()</code>Â  åœ¨ Â <code>console</code>Â  é‡Œ Â <code>copy</code>Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â <code>copy($_)</code>Â  æˆ– Â <code>copy($0)</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"><a href=\"#21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\" class=\"headerlink\" title=\"21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"></a>21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ</h3><ul>\n<li><code>$_</code>Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ <strong>å¼•ç”¨</strong></li>\n</ul>\n<p>**<br><strong><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507\" alt=\"image.png\"></strong></p>\n<h3 id=\"22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"><a href=\"#22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\" class=\"headerlink\" title=\"22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"></a>22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…</h3><ul>\n<li>æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ <code>npm</code> åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ <a href=\"https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related\">Chrome æ’ä»¶:Console Importer</a> çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ <code>console</code> ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› <code>npm</code> åº“ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"><a href=\"#23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\" class=\"headerlink\" title=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"></a>23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼</h3><ul>\n<li><code>DevTools</code> åœ¨ <code>Console</code> é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º <code>Live expression</code> çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ â€œçœ¼ç›â€ ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• <code>JavaScript</code> è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102\" alt=\"1.gif\"></p>\n<h3 id=\"24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \"><a href=\"#24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \" class=\"headerlink\" title=\"24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ \"></a>24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ </h3><ul>\n<li>æŒ‰ä¸€ä¸‹ Â <code>&#39;h&#39;</code>Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ â€˜<code>h</code>â€˜ å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \"><a href=\"#25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \" class=\"headerlink\" title=\"25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ \"></a>25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ </h3><ul>\n<li>å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â <code>DOM</code>Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066\" alt=\"2.gif\"></p>\n<h3 id=\"26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \"><a href=\"#26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \" class=\"headerlink\" title=\"26ã€ä½¿ç”¨ control (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\"></a>26ã€ä½¿ç”¨ <code>control</code> (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !</h3><ul>\n<li>å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â <code>DOM</code>Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨<code>[ctrl]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[ctrl]</code>Â +Â <code>[â¬‡]</code>Â (<code>[âŒ˜]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[âŒ˜]</code>Â +Â <code>[â¬‡]</code>Â on Mac).</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332\" alt=\"3.gif\"></p>\n<h3 id=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"><a href=\"#27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\" class=\"headerlink\" title=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"></a>27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ</h3><ul>\n<li><p>ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ <code>[ctrl]</code> + <code>[v]</code> æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ <code>HTML</code> ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ</p>\n</li>\n<li><p>ä½¿ç”¨<code>[ctrl]</code> + <code>[z]</code> (<code>[âŒ˜]</code> + <code>[z]</code> on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ <code>[ctrl]</code> + <code>[shift]</code> + <code>[z]</code>é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066\" alt=\"1.gif\"></p>\n<h3 id=\"28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\"><a href=\"#28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"28ã€Shadow editor é˜´å½±ç¼–è¾‘å™¨\"></a>28ã€<code>Shadow editor</code> é˜´å½±ç¼–è¾‘å™¨</h3><ul>\n<li>ä½ å¯ä»¥é€šè¿‡åœ¨ Â <code>Style</code>Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â <code>box-shadow</code>Â  å±æ€§æˆ–è€… Â <code>text-shadow</code>Â  å±æ€§çš„ Â <code>é˜´å½±æ–¹å½¢ç¬¦å·</code>Â  æ¥æ‰“å¼€å®ƒï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576\" alt=\"1.gif\"></p>\n<h3 id=\"29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"><a href=\"#29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"></a>29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨</h3><ul>\n<li><p>ä¹Ÿç§°ä¸º <code>Cubic bezier(è´å¡å°”)</code> ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ <code>CSS</code> çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ <code>é­”æ³•æ•°å€¼</code> ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º <code>transition-timing-function</code> æˆ–è€… <code>animation-timing-function</code> CSS å±æ€§ã€‚</p>\n</li>\n<li><p>åƒä¹‹å‰è¯´çš„ <code>Color picker</code> å’Œ <code>Shadow editor</code> ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š<code>trasition</code>ï¼Œ <code>animation</code> - è¯·æ³¨æ„ï¼šå¦‚æœ<code>timing</code> å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474\" alt=\"1.gif\"></p>\n<h3 id=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"><a href=\"#30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\" class=\"headerlink\" title=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"></a>30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®</h3><p>å½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ <code>Color</code> å’Œ <code>Shadow</code> ç¼–è¾‘å™¨æ·»åŠ  <code>CSS</code> å±æ€§çš„æŒ‰é’®ï¼š</p>\n<ul>\n<li><p><code>text-shadow</code></p>\n</li>\n<li><p><code>box-shadow</code></p>\n</li>\n<li><p><code>color</code></p>\n</li>\n<li><p><code>background-color</code></p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632\" alt=\"1.gif\"></p>\n<h3 id=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"><a href=\"#31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\" class=\"headerlink\" title=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"></a>31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹</h3><ul>\n<li>ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â <code>â–¶</code>Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â <code>expand recursively</code>Â  å‘½ä»¤ï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760\" alt=\"1.gif\"></p>\n<h3 id=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"><a href=\"#32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\" class=\"headerlink\" title=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"></a>32ã€æ§åˆ¶ä¼ æ„Ÿå™¨</h3><ul>\n<li><p>å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ <code>API</code> è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚</p>\n</li>\n<li><p><code>Drawer</code> é‡Œçš„ <code>Sensors(ä¼ æ„Ÿå™¨)</code> é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« <code>navigator.geolocation.watchPosition</code>ï¼ˆæˆ– <code>.getCurrentPosition</code> ï¼‰æŠ¥å‘Šã€‚</p>\n</li>\n<li><p>å¦‚æœä½ çš„ <code>App</code> ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774\" alt=\"1.gif\"></p>\n","site":{"data":{}},"excerpt":"<p>åœ¨å‰ç«¯å¤§å‹é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•éƒ½æ˜¯ä¸å¯ç¼ºå°‘çš„ä¸€ç¯ã€‚è‡ªåŠ¨åŒ–æµ‹è¯•ä¸ä½†å¯ä»¥é™ä½ bug å‡ºç°çš„é¢‘ç‡ï¼Œä¹Ÿå¯è®©é¡¹ç›®æ›´åŠ å¥å£®</p>","more":"<blockquote>\n<p>å®˜æ–¹æ–‡æ¡£: <a href=\"https://developers.google.com/\">https://developers.google.com/</a></p>\n</blockquote>\n<blockquote>\n<p>éš†é‡æ„Ÿè°¢: <a href=\"https://juejin.cn/book/6844733783166418958\">æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§</a></p>\n</blockquote>\n<h3 id=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \"><a href=\"#1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \" class=\"headerlink\" title=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \"></a>1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ </h3><ul>\n<li>æ§åˆ¶å°è¾“å…¥ <code>$0</code>Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273\" alt=\"image.png\"></p>\n<h3 id=\"2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\"><a href=\"#2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\" class=\"headerlink\" title=\"2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\"></a>2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹</h3><ul>\n<li>é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ <code>Break on</code>ã€‚</li>\n<li><code>subtree modifications</code> ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« <code>ç§»é™¤</code> æˆ–è€… <code>æ·»åŠ </code>çš„äº‹ä»¶</li>\n<li><code>Break &gt; attribute modifications</code>Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« <code>æ·»åŠ </code>ï¼Œ<code>ç§»é™¤</code> æˆ–è€… <code>è¢«ä¿®æ”¹å€¼</code>çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n<li><code>Break &gt; node removal</code>Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« <code>ç§»é™¤</code> çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n</ul>\n<h3 id=\"3ã€debug-å‡½æ•°\"><a href=\"#3ã€debug-å‡½æ•°\" class=\"headerlink\" title=\"3ã€debug å‡½æ•°\"></a>3ã€debug å‡½æ•°</h3><ul>\n<li>å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435\" alt=\"image.png\"></p>\n<h3 id=\"4ã€console-log-æ·»åŠ æ ·å¼\"><a href=\"#4ã€console-log-æ·»åŠ æ ·å¼\" class=\"headerlink\" title=\"4ã€console.log æ·»åŠ æ ·å¼\"></a>4ã€console.log æ·»åŠ æ ·å¼</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654\" alt=\"image.png\"></p>\n<h3 id=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"><a href=\"#5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"></a>5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼</h3><ul>\n<li>é€‰ä¸­ <code>Memory &gt; Heap snapshot</code>Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚</li>\n<li>é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ <code>Comparison</code>Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ <code>delta</code>Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \"><a href=\"#6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \" class=\"headerlink\" title=\"6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \"></a>6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ </h3><ul>\n<li>Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567\" alt=\"image.png\"></p>\n<h3 id=\"7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\"><a href=\"#7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\" class=\"headerlink\" title=\"7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\"></a>7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº</h3><ul>\n<li><code>node --inspect-brk æ–‡ä»¶å</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868\" alt=\"image.png\"></p>\n<h3 id=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"><a href=\"#8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\" class=\"headerlink\" title=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"></a>8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹</h3><ul>\n<li>æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ <code>debug</code>ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ <code>XHR</code>ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» <code>Break &gt; node removal</code> ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ <code>call stack</code> æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 3: ä½¿ç”¨ <code>getEventListeners</code> è·å– <code>Dom</code> å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ <code>Chrome</code> æ§åˆ¶å°ä½¿ç”¨)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740\" alt=\"image.png\"></p>\n<h3 id=\"9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\"><a href=\"#9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\" class=\"headerlink\" title=\"9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\"></a>9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº</h3><ol>\n<li>åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹</li>\n<li>å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶</li>\n<li>ä½¿ç”¨ node â€“inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡</li>\n<li>æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101\" alt=\"image.png\"></p>\n<h3 id=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"><a href=\"#10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\" class=\"headerlink\" title=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"></a>10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ</h3><ul>\n<li>æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯</li>\n<li>æ–¹æ¡ˆ 2: ç‚¹å‡» <code>Sources</code>Â  åç‚¹å‡» <code>Pause on exceptions</code>Â  æœ€åå‹¾é€‰ <code>Pause on exceptions</code>ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901\" alt=\"image.png\"></p>\n<h3 id=\"11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"><a href=\"#11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\" class=\"headerlink\" title=\"11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"></a>11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·</h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Filesystem</code>Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067\" alt=\"image.png\"></p>\n<h3 id=\"12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"><a href=\"#12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \" class=\"headerlink\" title=\"12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"></a>12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç </h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Snippets</code>Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ</li>\n<li>è¾“å…¥ <code>Command + p</code>Â  åè¾“å…¥ <code>i</code>Â  åæ‰§è¡Œ</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845\" alt=\"image.png\"></p>\n<h3 id=\"13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\"><a href=\"#13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\" class=\"headerlink\" title=\"13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\"></a>13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼</h3><ul>\n<li>é€‰ä¸­ <code>Source &gt; Overrides</code>Â ï¼Œä¹‹åç‚¹å‡» <code>+</code>Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ <code>Enable Local Overrides</code>Â ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831\" alt=\"image.png\"></p>\n<h3 id=\"14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"><a href=\"#14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\" class=\"headerlink\" title=\"14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"></a>14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”</h3><ul>\n<li>è¾“å…¥ <code>Command + shift + p</code>Â ï¼Œæœç´¢ <code>show changes</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928\" alt=\"image.png\"></p>\n<h3 id=\"15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"><a href=\"#15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\" class=\"headerlink\" title=\"15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"></a>15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„</h3><ul>\n<li>é€‰æ‹© <code>NetWork &gt; Initialtor</code>Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744\" alt=\"image.png\"></p>\n<h3 id=\"16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\"><a href=\"#16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\" class=\"headerlink\" title=\"16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\"></a>16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show performance monitor</code>Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚<ul>\n<li><code>CPU usage</code>Â ï¼š <code>cpu</code> çš„ç›‘å¬</li>\n<li><code>JS heap size</code>Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° <code>window</code>Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚</li>\n<li><code>DOM Nodes</code>: å†…å­˜ä¸­æ‰€åˆ†é…çš„ <code>dom</code> èŠ‚ç‚¹çš„ä¸ªæ•°</li>\n<li><code>JS envnt listeners</code>: <code>js</code> ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"><a href=\"#17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\" class=\"headerlink\" title=\"17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"></a>17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜</h3><ul>\n<li>é€‰æ‹© <code>performance</code>Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… <code>js</code> ä»£ç è¿è¡Œçš„æƒ…å†µã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"><a href=\"#18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\" class=\"headerlink\" title=\"18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"></a>18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show animations</code>Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"><a href=\"#19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\" class=\"headerlink\" title=\"19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"></a>19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ</h3><ul>\n<li><code>Command + shift +p</code>Â  è¾“å…¥ <code>show coverage</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893\" alt=\"image.png\"></p>\n<h3 id=\"20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\"><a href=\"#20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\" class=\"headerlink\" title=\"20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\"></a>20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹</h3><ul>\n<li>å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â <code>copy()</code>Â  åœ¨ Â <code>console</code>Â  é‡Œ Â <code>copy</code>Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â <code>copy($_)</code>Â  æˆ– Â <code>copy($0)</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"><a href=\"#21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\" class=\"headerlink\" title=\"21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"></a>21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ</h3><ul>\n<li><code>$_</code>Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ <strong>å¼•ç”¨</strong></li>\n</ul>\n<p>**<br><strong><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507\" alt=\"image.png\"></strong></p>\n<h3 id=\"22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"><a href=\"#22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\" class=\"headerlink\" title=\"22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"></a>22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…</h3><ul>\n<li>æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ <code>npm</code> åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ <a href=\"https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related\">Chrome æ’ä»¶:Console Importer</a> çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ <code>console</code> ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› <code>npm</code> åº“ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"><a href=\"#23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\" class=\"headerlink\" title=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"></a>23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼</h3><ul>\n<li><code>DevTools</code> åœ¨ <code>Console</code> é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º <code>Live expression</code> çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ â€œçœ¼ç›â€ ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• <code>JavaScript</code> è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102\" alt=\"1.gif\"></p>\n<h3 id=\"24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \"><a href=\"#24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \" class=\"headerlink\" title=\"24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ \"></a>24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ </h3><ul>\n<li>æŒ‰ä¸€ä¸‹ Â <code>&#39;h&#39;</code>Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ â€˜<code>h</code>â€˜ å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \"><a href=\"#25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \" class=\"headerlink\" title=\"25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ \"></a>25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ </h3><ul>\n<li>å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â <code>DOM</code>Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066\" alt=\"2.gif\"></p>\n<h3 id=\"26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \"><a href=\"#26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \" class=\"headerlink\" title=\"26ã€ä½¿ç”¨ control (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\"></a>26ã€ä½¿ç”¨ <code>control</code> (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !</h3><ul>\n<li>å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â <code>DOM</code>Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨<code>[ctrl]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[ctrl]</code>Â +Â <code>[â¬‡]</code>Â (<code>[âŒ˜]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[âŒ˜]</code>Â +Â <code>[â¬‡]</code>Â on Mac).</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332\" alt=\"3.gif\"></p>\n<h3 id=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"><a href=\"#27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\" class=\"headerlink\" title=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"></a>27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ</h3><ul>\n<li><p>ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ <code>[ctrl]</code> + <code>[v]</code> æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ <code>HTML</code> ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ</p>\n</li>\n<li><p>ä½¿ç”¨<code>[ctrl]</code> + <code>[z]</code> (<code>[âŒ˜]</code> + <code>[z]</code> on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ <code>[ctrl]</code> + <code>[shift]</code> + <code>[z]</code>é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066\" alt=\"1.gif\"></p>\n<h3 id=\"28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\"><a href=\"#28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"28ã€Shadow editor é˜´å½±ç¼–è¾‘å™¨\"></a>28ã€<code>Shadow editor</code> é˜´å½±ç¼–è¾‘å™¨</h3><ul>\n<li>ä½ å¯ä»¥é€šè¿‡åœ¨ Â <code>Style</code>Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â <code>box-shadow</code>Â  å±æ€§æˆ–è€… Â <code>text-shadow</code>Â  å±æ€§çš„ Â <code>é˜´å½±æ–¹å½¢ç¬¦å·</code>Â  æ¥æ‰“å¼€å®ƒï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576\" alt=\"1.gif\"></p>\n<h3 id=\"29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"><a href=\"#29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"></a>29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨</h3><ul>\n<li><p>ä¹Ÿç§°ä¸º <code>Cubic bezier(è´å¡å°”)</code> ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ <code>CSS</code> çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ <code>é­”æ³•æ•°å€¼</code> ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º <code>transition-timing-function</code> æˆ–è€… <code>animation-timing-function</code> CSS å±æ€§ã€‚</p>\n</li>\n<li><p>åƒä¹‹å‰è¯´çš„ <code>Color picker</code> å’Œ <code>Shadow editor</code> ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š<code>trasition</code>ï¼Œ <code>animation</code> - è¯·æ³¨æ„ï¼šå¦‚æœ<code>timing</code> å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474\" alt=\"1.gif\"></p>\n<h3 id=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"><a href=\"#30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\" class=\"headerlink\" title=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"></a>30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®</h3><p>å½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ <code>Color</code> å’Œ <code>Shadow</code> ç¼–è¾‘å™¨æ·»åŠ  <code>CSS</code> å±æ€§çš„æŒ‰é’®ï¼š</p>\n<ul>\n<li><p><code>text-shadow</code></p>\n</li>\n<li><p><code>box-shadow</code></p>\n</li>\n<li><p><code>color</code></p>\n</li>\n<li><p><code>background-color</code></p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632\" alt=\"1.gif\"></p>\n<h3 id=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"><a href=\"#31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\" class=\"headerlink\" title=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"></a>31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹</h3><ul>\n<li>ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â <code>â–¶</code>Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â <code>expand recursively</code>Â  å‘½ä»¤ï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760\" alt=\"1.gif\"></p>\n<h3 id=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"><a href=\"#32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\" class=\"headerlink\" title=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"></a>32ã€æ§åˆ¶ä¼ æ„Ÿå™¨</h3><ul>\n<li><p>å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ <code>API</code> è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚</p>\n</li>\n<li><p><code>Drawer</code> é‡Œçš„ <code>Sensors(ä¼ æ„Ÿå™¨)</code> é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« <code>navigator.geolocation.watchPosition</code>ï¼ˆæˆ– <code>.getCurrentPosition</code> ï¼‰æŠ¥å‘Šã€‚</p>\n</li>\n<li><p>å¦‚æœä½ çš„ <code>App</code> ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774\" alt=\"1.gif\"></p>"},{"title":"React Hooks çš„ä¸€äº›ç‰¹æ€§","date":"2020-08-15T16:00:00.000Z","_content":"\n## 1. é€†æ½®è€ŒåŠ¨\n\næ¯ä¸€ä¸ªç»„ä»¶å†…çš„å‡½æ•°(åŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ã€effectsã€å®šæ—¶å™¨ æˆ–è€… API è°ƒç”¨ç­‰ç­‰)ä¼šæ•æ‰æŸæ¬¡æ¸²æŸ“ä¸­å®šä¹‰çš„ props å’Œ state\n\n```jsx\nfunction Example(props) {\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(props.counter);\n    }, 1000);\n  });\n}\n\n// ç­‰æ•ˆäº\n\nfunction Example(props) {\n  const counter = props.counter;\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(counter);\n    });\n  });\n}\n```\n\n## 2. effects ä¸­çš„æ¸…ç†\n\nç›®çš„: æœ‰äº› effects å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªæ¸…ç†æ­¥éª¤ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤å‰¯ä½œç”¨çš„ effectï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…ã€‚\n\neffect çš„æ¸…é™¤å¹¶ä¸ä¼šè¯»å– \"æœ€æ–°\" çš„ propsã€‚å®ƒåªèƒ½è¯»å–åˆ°å®šä¹‰å®ƒçš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ props çš„å€¼\n\n```jsx\n// First render, props are {id: 10}\nfunction Example() {\n  // ...\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(10, handleStatusChange);\n    // cleanup for effect from first render\n    return () => {\n      ChatAPI.subscribeToFriendStatus(10, handleStatusChange);\n    };\n  });\n  // ...\n}\n// Next render, props are {id: 20}\nfunction Example() {\n  // ...\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(20, handleStatusChange);\n    return () => {\n      ChatAPI.subscribeToFriendStatus(20, handleStatusChange);\n    };\n  });\n  // ...\n}\n```\n\n## 3. é¿å…é‡å¤è°ƒç”¨\n\nä¸ºäº†é¿å… effects ä¸å¿…è¦çš„é‡å¤è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ç»™ useEffect ä¸€ä¸ªä¾èµ–æ•°ç»„å‚æ•°(deps)\n\n```jsx\nuseEffect(() => {\n  document.title = \"Hello, \" + title;\n}, [name]);\n```\n\nå¦‚æœå½“å‰æ¸²æŸ“ä¸­çš„è¿™äº›ä¾èµ–é¡¹å’Œä¸Šä¸€æ¬¡è¿è¡Œè¿™ä¸ª effect çš„æ—¶å€™å€¼ä¸€æ ·ï¼Œå› ä¸ºæ²¡æœ‰ä»€ä¹ˆéœ€è¦åŒæ­¥ React ä¼šè‡ªåŠ¨è·³è¿‡è¿™æ¬¡ effectã€‚\n\n## 4. ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\n\n- åœ¨ä¾èµ–ä¸­åŒ…å«æ‰€æœ‰ effect ä¸­ç”¨åˆ°çš„ç»„ä»¶å†…çš„å€¼\n\n```jsx\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nexport default function App() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCount(count + 1);\n    });\n    return () => clearInterval(id);\n  }, [count]);\n\n  return (\n    <div>\n      <p>you clicked it {count} times</p>\n      <button onClick={() => setCount(count + 1)}>click me</button>\n    </div>\n  );\n}\nReactDOM.render(<App />, document.getElementById(\"root\"));\n```\n\n- ä¿®æ”¹ effect å†…éƒ¨çš„ä»£ç ä»¥ç¡®ä¿å®ƒåŒ…å«çš„å€¼åªä¼šåœ¨éœ€è¦çš„æ—¶å€™å‘ç”Ÿå˜æ›´ã€‚æˆ‘ä»¬ä¸æƒ³å‘ŠçŸ¥é”™è¯¯çš„ä¾èµ– - æˆ‘ä»¬åªæ˜¯ä¿®æ”¹ effect ä½¿ä¾èµ–æ›´å°‘ã€‚\n\n## 5. è®© Effect è‡ªç»™è‡ªè¶³\n\næˆ‘ä»¬æƒ³è¦æ ¹æ®å‰ä¸€ä¸ªçŠ¶æ€æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„ å‡½æ•°å½¢å¼\n\n```jsx\nuseEffect(() => {\n  const id = setInterval(() => {\n    setCount(c => c + 1);\n  }, 1000);\n  return () => clearInterval(id);\n}, []);\n```\n\nè¿™æ­£æ˜¯ setCount(c => c + 1) åšçš„äº‹æƒ…ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯åœ¨ç»™ React \"å‘é€æŒ‡ä»¤\" å‘ŠçŸ¥å¦‚ä½•æ›´æ–°çŠ¶æ€ã€‚è¿™ç§ \"æ›´æ–°å½¢å¼\" åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿæœ‰å¸®åŠ©ï¼Œæ¯”å¦‚ä½ éœ€è¦ \"æ‰¹é‡æ›´æ–°\"ã€‚\n\n## 6. è§£è€¦æ¥è‡ª Actions çš„æ›´æ–°\n\nå½“ä½ æƒ³æ›´æ–°ä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”è¿™ä¸ªçŠ¶æ€æ›´æ–°ä¾èµ–äºå¦ä¸€ä¸ªçŠ¶æ€çš„å€¼æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ç”¨ useReducer å»æ›¿æ¢å®ƒä»¬ã€‚\n\nå½“ä½ å†™ç±»ä¼¼ setSomething(something => ...) è¿™ç§ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿè®¸å°±æ˜¯è€ƒè™‘ä½¿ç”¨ reducer çš„å¥‘æœºã€‚reducer å¯ä»¥è®©ä½  **æŠŠç»„ä»¶å†…å‘ç”Ÿäº†ä»€ä¹ˆ(actions)** å’Œ **çŠ¶æ€å¦‚ä½•å“åº”å¹¶æ›´æ–°** åˆ†å¼€è¡¨è¿°ã€‚\n\n```jsx\nconst [state, dispatch] = useReducer(reducer, initialState);\nconst { count, step } = state;\nuseEffect(() => {\nÂ Â Â Â const id = setInterval(() => {\nÂ Â Â Â Â Â Â Â dispatch({ type: \"tick\" }); // Instead of setCount(c => c + step) }, 1000);\nÂ Â Â Â Â Â Â Â return () => clearInterval(id);\n}, [dispatch]);\n```\n\nç›¸æ¯”äºç›´æ¥åœ¨ effect é‡Œé¢è¯»å–çŠ¶æ€ï¼Œå®ƒ dispatch äº†ä¸€ä¸ª action æ¥æè¿°å‘ç”Ÿäº†ä»€ä¹ˆã€‚è¿™ä½¿å¾—æˆ‘ä»¬çš„ effect å’Œ step çŠ¶æ€è§£è€¦ã€‚æˆ‘ä»¬çš„ effect ä¸å†å…³å¿ƒæ€ä¹ˆæ›´æ–°çŠ¶æ€ï¼Œå®ƒåªè´Ÿè´£å‘Šè¯‰æˆ‘ä»¬å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ›´æ–°çš„é€»è¾‘å…¨éƒ½äº¤ç”± reducer å»ç»Ÿä¸€å¤„ç†ã€‚\n\n```jsx\nconst initialState = {\n  count: 0,\n  step: 1\n};\nfunction reducer(state, action) {\n  const { count, step } = state;\n  if (action.type === \"tick\") {\n    return { count: count + step, step };\n  } else if (action.type === \"step\") {\n    return { count, step: action.step };\n  } else {\n    throw new Error();\n  }\n}\n```\n\n## 7. ä¸ºä»€ä¹ˆ useReducer æ˜¯ Hooks çš„ä½œå¼Šæ¨¡å¼\n\nå‡å¦‚æˆ‘ä»¬éœ€è¦ä¾èµ– props å»è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¹Ÿè®¸æˆ‘ä»¬çš„ API æ˜¯ `<Counter step={1} />`ã€‚ç¡®å®šçš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æ³•é¿å…ä¾èµ– props.step ã€‚\n\nå®é™…ä¸Šï¼Œ æˆ‘ä»¬å¯ä»¥é¿å…ï¼æˆ‘ä»¬å¯ä»¥æŠŠ reducer å‡½æ•°æ”¾åˆ°ç»„ä»¶å†…å»è¯»å– propsã€‚\n\n```jsx\nfunction Counter({ step }) {\n  const [count, dispatch] = useReducer(reducer, 0);\n  function reducer(state, action) {\n    if (action.type === \"tick\") {\n      return state + step;\n    } else {\n      throw new Error();\n    }\n  }\n  useEffect(() => {\n    const id = setInterval(() => {\n      dispatch({ type: \"tick\" });\n    }, 1000);\n  }, [dispatch]);\n  return <h1>{count}</h1>;\n}\n```\n\næ³¨æ„ï¼šè¿™ç§æ¨¡å¼ä¼šä½¿ä¸€äº›ä¼˜åŒ–å¤±è´¥ï¼Œæ‰€ä»¥ä½ åº”è¯¥é¿å…æ»¥ç”¨å®ƒï¼Œä¸è¿‡å¦‚æœä½ éœ€è¦ï¼Œå®Œå…¨å¯ä»¥åœ¨ reducer é‡Œé¢è®¿é—® propsã€‚\n\nå®ƒå¯ä»¥æŠŠæ›´æ–°é€»è¾‘å’Œæè¿°å‘ç”Ÿäº†ä»€ä¹ˆåˆ†å¼€ã€‚ç»“æœæ˜¯ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ç§»é™¤ä¸å¿…éœ€çš„ä¾èµ–ï¼Œé¿å…ä¸å¿…è¦çš„ effect è°ƒç”¨ã€‚\n\n## 8. å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ° Effect é‡Œ\n\næœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠå‡½æ•°ç§»å…¥ effect é‡Œã€‚\n\næ¯”å¦‚ï¼Œç»„ä»¶å†…æœ‰å‡ ä¸ª effect ä½¿ç”¨äº†ç›¸åŒçš„å‡½æ•°ï¼Œä½ ä¸æƒ³åœ¨æ¯ä¸ª effect é‡Œå¤åˆ¶é»è´´ä¸€éè¿™ä¸ªé€»è¾‘ã€‚ä¹Ÿæˆ–è®¸è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª propã€‚\n\nå‡½æ•°æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ”¹å˜è¿™ä¸ªäº‹å®æœ¬èº«å°±æ˜¯ä¸ªé—®é¢˜ã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ª effects ä¼šè°ƒç”¨ getFetchUrl:\n\n```jsx\nfunction SearchResults() {\n  function getFetchUrl(query) {\n    return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n  }\n\n  useEffect(() => {\n    const url = getFetchUrl(\"react\");\n    // ... Fetch data and do something ...\n  }, []); // ğŸ”´ Missing dep: getFetchUrl\n\n  useEffect(() => {\n    const url = getFetchUrl(\"redux\");\n    // ... Fetch data and do something ...\n  }, []); // ğŸ”´ Missing dep: getFetchUrl\n\n  // ...\n}\n```\n\næˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠ getFetchUrl ç§»åˆ° effect ä¸­ï¼Œå› ä¸ºä½ æƒ³å¤ç”¨é€»è¾‘ã€‚\n\n### 8.1 æ–¹æ³•ä¸€\n\n- å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰ä½¿ç”¨ç»„ä»¶å†…çš„ä»»ä½•å€¼ï¼Œä½ åº”è¯¥æŠŠå®ƒæåˆ°ç»„ä»¶å¤–é¢å»å®šä¹‰ï¼Œç„¶åå°±å¯ä»¥è‡ªç”±åœ°åœ¨ effects ä¸­ä½¿ç”¨\n\n```jsx\n// âœ… Not affected by the data flow\nfunction getFetchUrl(query) {\n  return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n}\n\nfunction SearchResults() {\n  useEffect(() => {\n    const url = getFetchUrl(\"react\");\n    // ... Fetch data and do something ...\n  }, []); // âœ… Deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl(\"redux\");\n    // ... Fetch data and do something ...\n  }, []); // âœ… Deps are OK\n\n  // ...\n}\n```\n\nä½ ä¸å†éœ€è¦æŠŠå®ƒè®¾ä¸ºä¾èµ–ï¼Œå› ä¸ºå®ƒä»¬ä¸åœ¨æ¸²æŸ“èŒƒå›´å†…ï¼Œå› æ­¤ä¸ä¼šè¢«æ•°æ®æµå½±å“ã€‚å®ƒä¸å¯èƒ½çªç„¶æ„å¤–åœ°ä¾èµ–äº props æˆ– state ã€‚\n\n### 8.2 æ–¹æ³•äºŒ\n\n- ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒåŒ…è£…æˆ useCallback Hook\n\n```jsx\nfunction SearchResults() {\n  // âœ… Preserves identity when its own deps are the same\n  const getFetchUrl = useCallback(query => {\n    return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n  }, []); // âœ… Callback deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl(\"react\");\n    // ... Fetch data and do something ...\n  }, [getFetchUrl]); // âœ… Effect deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl(\"redux\");\n    // ... Fetch data and do something ...\n  }, [getFetchUrl]); // âœ… Effect deps are OK\n\n  // ...\n}\n```\n\nuseCallback æœ¬è´¨ä¸Šæ˜¯æ·»åŠ äº†ä¸€å±‚ä¾èµ–æ£€æŸ¥ã€‚å®ƒä»¥å¦ä¸€ç§æ–¹å¼è§£å†³äº†é—®é¢˜ - æˆ‘ä»¬ä½¿å‡½æ•°æœ¬èº«åªåœ¨éœ€è¦çš„æ—¶å€™æ‰æ”¹å˜ï¼Œè€Œä¸æ˜¯å»æ‰å¯¹å‡½æ•°çš„ä¾èµ–ã€‚\n\nå¦‚æœæˆ‘ä»¬æƒ³æ·»åŠ ä¸€ä¸ªè¾“å…¥æ¡†å…è®¸ä½ è¾“å…¥ä»»æ„çš„æŸ¥è¯¢æ¡ä»¶(query)ã€‚ä¸åŒäºä¼ é€’ query å‚æ•°çš„æ–¹å¼ï¼Œç°åœ¨ getFetchUrl ä¼šä»çŠ¶æ€ä¸­è¯»å–ã€‚\n\nå¦‚æœæˆ‘ä»¬æŠŠ query æ·»åŠ åˆ° useCallback çš„ä¾èµ–ä¸­ï¼Œä»»ä½•è°ƒç”¨äº† getFetchUrl çš„ effect åœ¨ query æ”¹å˜åéƒ½ä¼šé‡æ–°è¿è¡Œï¼š\n\n```jsx\nfunction SearchResults() {\n  const [query, setQuery] = useState(\"react\");\n\n  // âœ… Preserves identity until query changes\n  const getFetchUrl = useCallback(() => {\n    return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n  }, [query]); // âœ… Callback deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl();\n    // ... Fetch data and do something ...\n  }, [getFetchUrl]); // âœ… Effect deps are OK\n\n  // ...\n}\n```\n\nè¿™æ­£æ˜¯æ‹¥æŠ±æ•°æ®æµå’ŒåŒæ­¥æ€ç»´çš„ç»“æœã€‚å¯¹äºé€šè¿‡å±æ€§ä»çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°è¿™ä¸ªæ–¹æ³•ä¹Ÿé€‚ç”¨\n\n```jsx\nfunction Parent() {\n  const [query, setQuery] = useState(\"react\");\n  // âœ… Preserves identity until query changes\n  const fetchData = useCallback(() => {\n    const url = \"https://hn.algolia.com/api/v1/search?query=\" + query;\n    // ... Fetch data and return it ...\n  }, [query]); // âœ… Callback deps are OK\n  return <Child fetchData={fetchData} />;\n}\n\nfunction Child({ fetchData }) {\n  let [data, setData] = useState(null);\n\n  useEffect(() => {\n    fetchData().then(setData);\n  }, [fetchData]); // âœ… Effect deps are OK\n  // ...\n}\n```\n\nå› ä¸º fetchData åªæœ‰åœ¨ Parent çš„ query çŠ¶æ€å˜æ›´æ—¶æ‰ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ Child åªä¼šåœ¨éœ€è¦çš„æ—¶å€™æ‰å»é‡æ–°è¯·æ±‚æ•°æ®ã€‚\n\n## 9. å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\n\nåœ¨ class ç»„ä»¶ä¸­ï¼Œå‡½æ•°å±æ€§æœ¬èº«å¹¶ä¸æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚ç»„ä»¶çš„æ–¹æ³•ä¸­åŒ…å«äº†å¯å˜çš„ this å˜é‡å¯¼è‡´æˆ‘ä»¬ä¸èƒ½ç¡®å®šæ— ç–‘åœ°è®¤ä¸ºå®ƒæ˜¯ä¸å˜çš„ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»æŠŠä¸€å †æ•°æ®ä¼ é€’ä¸‹å»ä»…ä»…æ˜¯ä¸ºäº†åš \"diff\"ã€‚æˆ‘ä»¬æ— æ³•çŸ¥é“ä¼ å…¥çš„ this.props.fetchData æ˜¯å¦ä¾èµ–çŠ¶æ€ï¼Œå¹¶ä¸”ä¸çŸ¥é“å®ƒä¾èµ–çš„çŠ¶æ€æ˜¯å¦æ”¹å˜äº†ã€‚\n\nä½¿ç”¨ useCallbackï¼Œå‡½æ•°å®Œå…¨å¯ä»¥å‚ä¸åˆ°æ•°æ®æµä¸­ã€‚æˆ‘ä»¬å¯ä»¥è¯´å¦‚æœä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ”¹å˜äº†ï¼Œè¿™ä¸ªå‡½æ•°å°±æ”¹å˜äº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œå‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ä½¿ç”¨çš„ useCallbackï¼Œå±æ€§ props.fetchData çš„æ”¹å˜ä¹Ÿä¼šè‡ªåŠ¨ä¼ é€’ä¸‹å»ã€‚\n\nç±»ä¼¼åœ°ï¼ŒuseMemo å¯ä»¥è®©æˆ‘ä»¬å¯¹å¤æ‚å¯¹è±¡åšç±»ä¼¼çš„äº‹æƒ…ã€‚\n\n```jsx\nfunction ColorPicker() {\n  // Doesn't break Child's shallow equality prop check\n  // unless the color actually changes.\n  const [color, setColor] = useState(\"pink\");\n  const style = useMemo(() => ({ color }), [color]);\n  return <Child style={style} />;\n}\n```\n\n## 10. ç«æ€\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åœ¨ class ç»„ä»¶é‡Œå‘è¯·æ±‚çš„ä¾‹å­ï¼š\n\n```jsx\nclass Article extends React.Component {\n  state = {\n    article: null\n  };\n  componentDidMount() {\n    this.fetchData(this.props.id);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.id !== this.props.id) {\n      this.fetchData(this.props.id);\n    }\n  }\n  async fetchData(id) {\n    const article = await API.fetchArticle(id);\n    this.setState({ article });\n  }\n  // ...\n}\n```\n\nè¿™è¢«å«åšç«æ€ï¼Œè¿™åœ¨æ··åˆäº† async / awaitï¼ˆå‡è®¾åœ¨ç­‰å¾…ç»“æœè¿”å›ï¼‰å’Œè‡ªé¡¶å‘ä¸‹æ•°æ®æµçš„ä»£ç ä¸­éå¸¸å…¸å‹ï¼ˆ props å’Œ state å¯èƒ½ä¼šåœ¨ async å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å‘ç”Ÿæ”¹å˜ï¼‰ã€‚\n\nEffects å¹¶æ²¡æœ‰ç¥å¥‡åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°½ç®¡å®ƒä¼šè­¦å‘Šä½ å¦‚æœä½ ç›´æ¥ä¼ äº†ä¸€ä¸ª async å‡½æ•°ç»™ effectã€‚\n\n- è§£å†³æ–¹å¼\n\n1. \nå¦‚æœä½ ä½¿ç”¨çš„å¼‚æ­¥æ–¹å¼æ”¯æŒå–æ¶ˆã€‚ä½ å¯ä»¥ç›´æ¥åœ¨æ¸…é™¤å‡½æ•°ä¸­å–æ¶ˆå¼‚æ­¥è¯·æ±‚ã€‚\n\n2. \næˆ–è€…ï¼Œæœ€ç®€å•çš„æƒå®œä¹‹è®¡æ˜¯ç”¨ä¸€ä¸ªå¸ƒå°”å€¼æ¥è·Ÿè¸ªå®ƒã€‚\n\n\n```jsx\nfunction Article({ id }) {\n  const [article, setArticle] = useState(null);\n\n  useEffect(() => {\n    let didCancel = false;\n    const fetchData = async () => {\n      const article = await API.fetchArticle(id);\n      if (!didCancel) {\n        setArticle(article);\n      }\n    };\n    fetchData();\n    return () => {\n      didCancel = true;\n    };\n  }, [id]);\n  // ...\n}\n```\n","source":"_posts/å‰ç«¯/React Hooks çš„ä¸€äº›ç‰¹æ€§.md","raw":"---\ntitle: React Hooks çš„ä¸€äº›ç‰¹æ€§\ndate: 2020-08-16\ncategories: [å‰ç«¯, react]\ntags:\n  - react-hooks\n---\n\n## 1. é€†æ½®è€ŒåŠ¨\n\næ¯ä¸€ä¸ªç»„ä»¶å†…çš„å‡½æ•°(åŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ã€effectsã€å®šæ—¶å™¨ æˆ–è€… API è°ƒç”¨ç­‰ç­‰)ä¼šæ•æ‰æŸæ¬¡æ¸²æŸ“ä¸­å®šä¹‰çš„ props å’Œ state\n\n```jsx\nfunction Example(props) {\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(props.counter);\n    }, 1000);\n  });\n}\n\n// ç­‰æ•ˆäº\n\nfunction Example(props) {\n  const counter = props.counter;\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(counter);\n    });\n  });\n}\n```\n\n## 2. effects ä¸­çš„æ¸…ç†\n\nç›®çš„: æœ‰äº› effects å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªæ¸…ç†æ­¥éª¤ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤å‰¯ä½œç”¨çš„ effectï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…ã€‚\n\neffect çš„æ¸…é™¤å¹¶ä¸ä¼šè¯»å– \"æœ€æ–°\" çš„ propsã€‚å®ƒåªèƒ½è¯»å–åˆ°å®šä¹‰å®ƒçš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ props çš„å€¼\n\n```jsx\n// First render, props are {id: 10}\nfunction Example() {\n  // ...\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(10, handleStatusChange);\n    // cleanup for effect from first render\n    return () => {\n      ChatAPI.subscribeToFriendStatus(10, handleStatusChange);\n    };\n  });\n  // ...\n}\n// Next render, props are {id: 20}\nfunction Example() {\n  // ...\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(20, handleStatusChange);\n    return () => {\n      ChatAPI.subscribeToFriendStatus(20, handleStatusChange);\n    };\n  });\n  // ...\n}\n```\n\n## 3. é¿å…é‡å¤è°ƒç”¨\n\nä¸ºäº†é¿å… effects ä¸å¿…è¦çš„é‡å¤è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ç»™ useEffect ä¸€ä¸ªä¾èµ–æ•°ç»„å‚æ•°(deps)\n\n```jsx\nuseEffect(() => {\n  document.title = \"Hello, \" + title;\n}, [name]);\n```\n\nå¦‚æœå½“å‰æ¸²æŸ“ä¸­çš„è¿™äº›ä¾èµ–é¡¹å’Œä¸Šä¸€æ¬¡è¿è¡Œè¿™ä¸ª effect çš„æ—¶å€™å€¼ä¸€æ ·ï¼Œå› ä¸ºæ²¡æœ‰ä»€ä¹ˆéœ€è¦åŒæ­¥ React ä¼šè‡ªåŠ¨è·³è¿‡è¿™æ¬¡ effectã€‚\n\n## 4. ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\n\n- åœ¨ä¾èµ–ä¸­åŒ…å«æ‰€æœ‰ effect ä¸­ç”¨åˆ°çš„ç»„ä»¶å†…çš„å€¼\n\n```jsx\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nexport default function App() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setCount(count + 1);\n    });\n    return () => clearInterval(id);\n  }, [count]);\n\n  return (\n    <div>\n      <p>you clicked it {count} times</p>\n      <button onClick={() => setCount(count + 1)}>click me</button>\n    </div>\n  );\n}\nReactDOM.render(<App />, document.getElementById(\"root\"));\n```\n\n- ä¿®æ”¹ effect å†…éƒ¨çš„ä»£ç ä»¥ç¡®ä¿å®ƒåŒ…å«çš„å€¼åªä¼šåœ¨éœ€è¦çš„æ—¶å€™å‘ç”Ÿå˜æ›´ã€‚æˆ‘ä»¬ä¸æƒ³å‘ŠçŸ¥é”™è¯¯çš„ä¾èµ– - æˆ‘ä»¬åªæ˜¯ä¿®æ”¹ effect ä½¿ä¾èµ–æ›´å°‘ã€‚\n\n## 5. è®© Effect è‡ªç»™è‡ªè¶³\n\næˆ‘ä»¬æƒ³è¦æ ¹æ®å‰ä¸€ä¸ªçŠ¶æ€æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„ å‡½æ•°å½¢å¼\n\n```jsx\nuseEffect(() => {\n  const id = setInterval(() => {\n    setCount(c => c + 1);\n  }, 1000);\n  return () => clearInterval(id);\n}, []);\n```\n\nè¿™æ­£æ˜¯ setCount(c => c + 1) åšçš„äº‹æƒ…ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯åœ¨ç»™ React \"å‘é€æŒ‡ä»¤\" å‘ŠçŸ¥å¦‚ä½•æ›´æ–°çŠ¶æ€ã€‚è¿™ç§ \"æ›´æ–°å½¢å¼\" åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿæœ‰å¸®åŠ©ï¼Œæ¯”å¦‚ä½ éœ€è¦ \"æ‰¹é‡æ›´æ–°\"ã€‚\n\n## 6. è§£è€¦æ¥è‡ª Actions çš„æ›´æ–°\n\nå½“ä½ æƒ³æ›´æ–°ä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”è¿™ä¸ªçŠ¶æ€æ›´æ–°ä¾èµ–äºå¦ä¸€ä¸ªçŠ¶æ€çš„å€¼æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ç”¨ useReducer å»æ›¿æ¢å®ƒä»¬ã€‚\n\nå½“ä½ å†™ç±»ä¼¼ setSomething(something => ...) è¿™ç§ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿè®¸å°±æ˜¯è€ƒè™‘ä½¿ç”¨ reducer çš„å¥‘æœºã€‚reducer å¯ä»¥è®©ä½  **æŠŠç»„ä»¶å†…å‘ç”Ÿäº†ä»€ä¹ˆ(actions)** å’Œ **çŠ¶æ€å¦‚ä½•å“åº”å¹¶æ›´æ–°** åˆ†å¼€è¡¨è¿°ã€‚\n\n```jsx\nconst [state, dispatch] = useReducer(reducer, initialState);\nconst { count, step } = state;\nuseEffect(() => {\nÂ Â Â Â const id = setInterval(() => {\nÂ Â Â Â Â Â Â Â dispatch({ type: \"tick\" }); // Instead of setCount(c => c + step) }, 1000);\nÂ Â Â Â Â Â Â Â return () => clearInterval(id);\n}, [dispatch]);\n```\n\nç›¸æ¯”äºç›´æ¥åœ¨ effect é‡Œé¢è¯»å–çŠ¶æ€ï¼Œå®ƒ dispatch äº†ä¸€ä¸ª action æ¥æè¿°å‘ç”Ÿäº†ä»€ä¹ˆã€‚è¿™ä½¿å¾—æˆ‘ä»¬çš„ effect å’Œ step çŠ¶æ€è§£è€¦ã€‚æˆ‘ä»¬çš„ effect ä¸å†å…³å¿ƒæ€ä¹ˆæ›´æ–°çŠ¶æ€ï¼Œå®ƒåªè´Ÿè´£å‘Šè¯‰æˆ‘ä»¬å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ›´æ–°çš„é€»è¾‘å…¨éƒ½äº¤ç”± reducer å»ç»Ÿä¸€å¤„ç†ã€‚\n\n```jsx\nconst initialState = {\n  count: 0,\n  step: 1\n};\nfunction reducer(state, action) {\n  const { count, step } = state;\n  if (action.type === \"tick\") {\n    return { count: count + step, step };\n  } else if (action.type === \"step\") {\n    return { count, step: action.step };\n  } else {\n    throw new Error();\n  }\n}\n```\n\n## 7. ä¸ºä»€ä¹ˆ useReducer æ˜¯ Hooks çš„ä½œå¼Šæ¨¡å¼\n\nå‡å¦‚æˆ‘ä»¬éœ€è¦ä¾èµ– props å»è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¹Ÿè®¸æˆ‘ä»¬çš„ API æ˜¯ `<Counter step={1} />`ã€‚ç¡®å®šçš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æ³•é¿å…ä¾èµ– props.step ã€‚\n\nå®é™…ä¸Šï¼Œ æˆ‘ä»¬å¯ä»¥é¿å…ï¼æˆ‘ä»¬å¯ä»¥æŠŠ reducer å‡½æ•°æ”¾åˆ°ç»„ä»¶å†…å»è¯»å– propsã€‚\n\n```jsx\nfunction Counter({ step }) {\n  const [count, dispatch] = useReducer(reducer, 0);\n  function reducer(state, action) {\n    if (action.type === \"tick\") {\n      return state + step;\n    } else {\n      throw new Error();\n    }\n  }\n  useEffect(() => {\n    const id = setInterval(() => {\n      dispatch({ type: \"tick\" });\n    }, 1000);\n  }, [dispatch]);\n  return <h1>{count}</h1>;\n}\n```\n\næ³¨æ„ï¼šè¿™ç§æ¨¡å¼ä¼šä½¿ä¸€äº›ä¼˜åŒ–å¤±è´¥ï¼Œæ‰€ä»¥ä½ åº”è¯¥é¿å…æ»¥ç”¨å®ƒï¼Œä¸è¿‡å¦‚æœä½ éœ€è¦ï¼Œå®Œå…¨å¯ä»¥åœ¨ reducer é‡Œé¢è®¿é—® propsã€‚\n\nå®ƒå¯ä»¥æŠŠæ›´æ–°é€»è¾‘å’Œæè¿°å‘ç”Ÿäº†ä»€ä¹ˆåˆ†å¼€ã€‚ç»“æœæ˜¯ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ç§»é™¤ä¸å¿…éœ€çš„ä¾èµ–ï¼Œé¿å…ä¸å¿…è¦çš„ effect è°ƒç”¨ã€‚\n\n## 8. å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ° Effect é‡Œ\n\næœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠå‡½æ•°ç§»å…¥ effect é‡Œã€‚\n\næ¯”å¦‚ï¼Œç»„ä»¶å†…æœ‰å‡ ä¸ª effect ä½¿ç”¨äº†ç›¸åŒçš„å‡½æ•°ï¼Œä½ ä¸æƒ³åœ¨æ¯ä¸ª effect é‡Œå¤åˆ¶é»è´´ä¸€éè¿™ä¸ªé€»è¾‘ã€‚ä¹Ÿæˆ–è®¸è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª propã€‚\n\nå‡½æ•°æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ”¹å˜è¿™ä¸ªäº‹å®æœ¬èº«å°±æ˜¯ä¸ªé—®é¢˜ã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ª effects ä¼šè°ƒç”¨ getFetchUrl:\n\n```jsx\nfunction SearchResults() {\n  function getFetchUrl(query) {\n    return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n  }\n\n  useEffect(() => {\n    const url = getFetchUrl(\"react\");\n    // ... Fetch data and do something ...\n  }, []); // ğŸ”´ Missing dep: getFetchUrl\n\n  useEffect(() => {\n    const url = getFetchUrl(\"redux\");\n    // ... Fetch data and do something ...\n  }, []); // ğŸ”´ Missing dep: getFetchUrl\n\n  // ...\n}\n```\n\næˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠ getFetchUrl ç§»åˆ° effect ä¸­ï¼Œå› ä¸ºä½ æƒ³å¤ç”¨é€»è¾‘ã€‚\n\n### 8.1 æ–¹æ³•ä¸€\n\n- å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰ä½¿ç”¨ç»„ä»¶å†…çš„ä»»ä½•å€¼ï¼Œä½ åº”è¯¥æŠŠå®ƒæåˆ°ç»„ä»¶å¤–é¢å»å®šä¹‰ï¼Œç„¶åå°±å¯ä»¥è‡ªç”±åœ°åœ¨ effects ä¸­ä½¿ç”¨\n\n```jsx\n// âœ… Not affected by the data flow\nfunction getFetchUrl(query) {\n  return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n}\n\nfunction SearchResults() {\n  useEffect(() => {\n    const url = getFetchUrl(\"react\");\n    // ... Fetch data and do something ...\n  }, []); // âœ… Deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl(\"redux\");\n    // ... Fetch data and do something ...\n  }, []); // âœ… Deps are OK\n\n  // ...\n}\n```\n\nä½ ä¸å†éœ€è¦æŠŠå®ƒè®¾ä¸ºä¾èµ–ï¼Œå› ä¸ºå®ƒä»¬ä¸åœ¨æ¸²æŸ“èŒƒå›´å†…ï¼Œå› æ­¤ä¸ä¼šè¢«æ•°æ®æµå½±å“ã€‚å®ƒä¸å¯èƒ½çªç„¶æ„å¤–åœ°ä¾èµ–äº props æˆ– state ã€‚\n\n### 8.2 æ–¹æ³•äºŒ\n\n- ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒåŒ…è£…æˆ useCallback Hook\n\n```jsx\nfunction SearchResults() {\n  // âœ… Preserves identity when its own deps are the same\n  const getFetchUrl = useCallback(query => {\n    return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n  }, []); // âœ… Callback deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl(\"react\");\n    // ... Fetch data and do something ...\n  }, [getFetchUrl]); // âœ… Effect deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl(\"redux\");\n    // ... Fetch data and do something ...\n  }, [getFetchUrl]); // âœ… Effect deps are OK\n\n  // ...\n}\n```\n\nuseCallback æœ¬è´¨ä¸Šæ˜¯æ·»åŠ äº†ä¸€å±‚ä¾èµ–æ£€æŸ¥ã€‚å®ƒä»¥å¦ä¸€ç§æ–¹å¼è§£å†³äº†é—®é¢˜ - æˆ‘ä»¬ä½¿å‡½æ•°æœ¬èº«åªåœ¨éœ€è¦çš„æ—¶å€™æ‰æ”¹å˜ï¼Œè€Œä¸æ˜¯å»æ‰å¯¹å‡½æ•°çš„ä¾èµ–ã€‚\n\nå¦‚æœæˆ‘ä»¬æƒ³æ·»åŠ ä¸€ä¸ªè¾“å…¥æ¡†å…è®¸ä½ è¾“å…¥ä»»æ„çš„æŸ¥è¯¢æ¡ä»¶(query)ã€‚ä¸åŒäºä¼ é€’ query å‚æ•°çš„æ–¹å¼ï¼Œç°åœ¨ getFetchUrl ä¼šä»çŠ¶æ€ä¸­è¯»å–ã€‚\n\nå¦‚æœæˆ‘ä»¬æŠŠ query æ·»åŠ åˆ° useCallback çš„ä¾èµ–ä¸­ï¼Œä»»ä½•è°ƒç”¨äº† getFetchUrl çš„ effect åœ¨ query æ”¹å˜åéƒ½ä¼šé‡æ–°è¿è¡Œï¼š\n\n```jsx\nfunction SearchResults() {\n  const [query, setQuery] = useState(\"react\");\n\n  // âœ… Preserves identity until query changes\n  const getFetchUrl = useCallback(() => {\n    return \"https://hn.algolia.com/api/v1/search?query=\" + query;\n  }, [query]); // âœ… Callback deps are OK\n\n  useEffect(() => {\n    const url = getFetchUrl();\n    // ... Fetch data and do something ...\n  }, [getFetchUrl]); // âœ… Effect deps are OK\n\n  // ...\n}\n```\n\nè¿™æ­£æ˜¯æ‹¥æŠ±æ•°æ®æµå’ŒåŒæ­¥æ€ç»´çš„ç»“æœã€‚å¯¹äºé€šè¿‡å±æ€§ä»çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°è¿™ä¸ªæ–¹æ³•ä¹Ÿé€‚ç”¨\n\n```jsx\nfunction Parent() {\n  const [query, setQuery] = useState(\"react\");\n  // âœ… Preserves identity until query changes\n  const fetchData = useCallback(() => {\n    const url = \"https://hn.algolia.com/api/v1/search?query=\" + query;\n    // ... Fetch data and return it ...\n  }, [query]); // âœ… Callback deps are OK\n  return <Child fetchData={fetchData} />;\n}\n\nfunction Child({ fetchData }) {\n  let [data, setData] = useState(null);\n\n  useEffect(() => {\n    fetchData().then(setData);\n  }, [fetchData]); // âœ… Effect deps are OK\n  // ...\n}\n```\n\nå› ä¸º fetchData åªæœ‰åœ¨ Parent çš„ query çŠ¶æ€å˜æ›´æ—¶æ‰ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ Child åªä¼šåœ¨éœ€è¦çš„æ—¶å€™æ‰å»é‡æ–°è¯·æ±‚æ•°æ®ã€‚\n\n## 9. å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\n\nåœ¨ class ç»„ä»¶ä¸­ï¼Œå‡½æ•°å±æ€§æœ¬èº«å¹¶ä¸æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚ç»„ä»¶çš„æ–¹æ³•ä¸­åŒ…å«äº†å¯å˜çš„ this å˜é‡å¯¼è‡´æˆ‘ä»¬ä¸èƒ½ç¡®å®šæ— ç–‘åœ°è®¤ä¸ºå®ƒæ˜¯ä¸å˜çš„ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»æŠŠä¸€å †æ•°æ®ä¼ é€’ä¸‹å»ä»…ä»…æ˜¯ä¸ºäº†åš \"diff\"ã€‚æˆ‘ä»¬æ— æ³•çŸ¥é“ä¼ å…¥çš„ this.props.fetchData æ˜¯å¦ä¾èµ–çŠ¶æ€ï¼Œå¹¶ä¸”ä¸çŸ¥é“å®ƒä¾èµ–çš„çŠ¶æ€æ˜¯å¦æ”¹å˜äº†ã€‚\n\nä½¿ç”¨ useCallbackï¼Œå‡½æ•°å®Œå…¨å¯ä»¥å‚ä¸åˆ°æ•°æ®æµä¸­ã€‚æˆ‘ä»¬å¯ä»¥è¯´å¦‚æœä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ”¹å˜äº†ï¼Œè¿™ä¸ªå‡½æ•°å°±æ”¹å˜äº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œå‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ä½¿ç”¨çš„ useCallbackï¼Œå±æ€§ props.fetchData çš„æ”¹å˜ä¹Ÿä¼šè‡ªåŠ¨ä¼ é€’ä¸‹å»ã€‚\n\nç±»ä¼¼åœ°ï¼ŒuseMemo å¯ä»¥è®©æˆ‘ä»¬å¯¹å¤æ‚å¯¹è±¡åšç±»ä¼¼çš„äº‹æƒ…ã€‚\n\n```jsx\nfunction ColorPicker() {\n  // Doesn't break Child's shallow equality prop check\n  // unless the color actually changes.\n  const [color, setColor] = useState(\"pink\");\n  const style = useMemo(() => ({ color }), [color]);\n  return <Child style={style} />;\n}\n```\n\n## 10. ç«æ€\n\nä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åœ¨ class ç»„ä»¶é‡Œå‘è¯·æ±‚çš„ä¾‹å­ï¼š\n\n```jsx\nclass Article extends React.Component {\n  state = {\n    article: null\n  };\n  componentDidMount() {\n    this.fetchData(this.props.id);\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.id !== this.props.id) {\n      this.fetchData(this.props.id);\n    }\n  }\n  async fetchData(id) {\n    const article = await API.fetchArticle(id);\n    this.setState({ article });\n  }\n  // ...\n}\n```\n\nè¿™è¢«å«åšç«æ€ï¼Œè¿™åœ¨æ··åˆäº† async / awaitï¼ˆå‡è®¾åœ¨ç­‰å¾…ç»“æœè¿”å›ï¼‰å’Œè‡ªé¡¶å‘ä¸‹æ•°æ®æµçš„ä»£ç ä¸­éå¸¸å…¸å‹ï¼ˆ props å’Œ state å¯èƒ½ä¼šåœ¨ async å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å‘ç”Ÿæ”¹å˜ï¼‰ã€‚\n\nEffects å¹¶æ²¡æœ‰ç¥å¥‡åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°½ç®¡å®ƒä¼šè­¦å‘Šä½ å¦‚æœä½ ç›´æ¥ä¼ äº†ä¸€ä¸ª async å‡½æ•°ç»™ effectã€‚\n\n- è§£å†³æ–¹å¼\n\n1. \nå¦‚æœä½ ä½¿ç”¨çš„å¼‚æ­¥æ–¹å¼æ”¯æŒå–æ¶ˆã€‚ä½ å¯ä»¥ç›´æ¥åœ¨æ¸…é™¤å‡½æ•°ä¸­å–æ¶ˆå¼‚æ­¥è¯·æ±‚ã€‚\n\n2. \næˆ–è€…ï¼Œæœ€ç®€å•çš„æƒå®œä¹‹è®¡æ˜¯ç”¨ä¸€ä¸ªå¸ƒå°”å€¼æ¥è·Ÿè¸ªå®ƒã€‚\n\n\n```jsx\nfunction Article({ id }) {\n  const [article, setArticle] = useState(null);\n\n  useEffect(() => {\n    let didCancel = false;\n    const fetchData = async () => {\n      const article = await API.fetchArticle(id);\n      if (!didCancel) {\n        setArticle(article);\n      }\n    };\n    fetchData();\n    return () => {\n      didCancel = true;\n    };\n  }, [id]);\n  // ...\n}\n```\n","slug":"å‰ç«¯/React Hooks çš„ä¸€äº›ç‰¹æ€§","published":1,"updated":"2021-04-07T07:39:28.001Z","_id":"ckn7476ad001yyx7ybs7v7hez","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-é€†æ½®è€ŒåŠ¨\"><a href=\"#1-é€†æ½®è€ŒåŠ¨\" class=\"headerlink\" title=\"1. é€†æ½®è€ŒåŠ¨\"></a>1. é€†æ½®è€ŒåŠ¨</h2><p>æ¯ä¸€ä¸ªç»„ä»¶å†…çš„å‡½æ•°(åŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ã€effectsã€å®šæ—¶å™¨ æˆ–è€… API è°ƒç”¨ç­‰ç­‰)ä¼šæ•æ‰æŸæ¬¡æ¸²æŸ“ä¸­å®šä¹‰çš„ props å’Œ state</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(props.counter);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç­‰æ•ˆäº</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> counter = props.counter;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(counter);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-effects-ä¸­çš„æ¸…ç†\"><a href=\"#2-effects-ä¸­çš„æ¸…ç†\" class=\"headerlink\" title=\"2. effects ä¸­çš„æ¸…ç†\"></a>2. effects ä¸­çš„æ¸…ç†</h2><p>ç›®çš„: æœ‰äº› effects å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªæ¸…ç†æ­¥éª¤ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤å‰¯ä½œç”¨çš„ effectï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…ã€‚</p>\n<p>effect çš„æ¸…é™¤å¹¶ä¸ä¼šè¯»å– â€œæœ€æ–°â€ çš„ propsã€‚å®ƒåªèƒ½è¯»å–åˆ°å®šä¹‰å®ƒçš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ props çš„å€¼</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// First render, props are &#123;id: 10&#125;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(<span class=\"number\">10</span>, handleStatusChange);</span><br><span class=\"line\">    <span class=\"comment\">// cleanup for effect from first render</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      ChatAPI.subscribeToFriendStatus(<span class=\"number\">10</span>, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Next render, props are &#123;id: 20&#125;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(<span class=\"number\">20</span>, handleStatusChange);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      ChatAPI.subscribeToFriendStatus(<span class=\"number\">20</span>, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-é¿å…é‡å¤è°ƒç”¨\"><a href=\"#3-é¿å…é‡å¤è°ƒç”¨\" class=\"headerlink\" title=\"3. é¿å…é‡å¤è°ƒç”¨\"></a>3. é¿å…é‡å¤è°ƒç”¨</h2><p>ä¸ºäº†é¿å… effects ä¸å¿…è¦çš„é‡å¤è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ç»™ useEffect ä¸€ä¸ªä¾èµ–æ•°ç»„å‚æ•°(deps)</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.title = <span class=\"string\">&quot;Hello, &quot;</span> + title;</span><br><span class=\"line\">&#125;, [name]);</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœå½“å‰æ¸²æŸ“ä¸­çš„è¿™äº›ä¾èµ–é¡¹å’Œä¸Šä¸€æ¬¡è¿è¡Œè¿™ä¸ª effect çš„æ—¶å€™å€¼ä¸€æ ·ï¼Œå› ä¸ºæ²¡æœ‰ä»€ä¹ˆéœ€è¦åŒæ­¥ React ä¼šè‡ªåŠ¨è·³è¿‡è¿™æ¬¡ effectã€‚</p>\n<h2 id=\"4-ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\"><a href=\"#4-ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\" class=\"headerlink\" title=\"4. ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\"></a>4. ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•</h2><ul>\n<li>åœ¨ä¾èµ–ä¸­åŒ…å«æ‰€æœ‰ effect ä¸­ç”¨åˆ°çš„ç»„ä»¶å†…çš„å€¼</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      setCount(count + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">  &#125;, [count]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;you clicked it &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹ effect å†…éƒ¨çš„ä»£ç ä»¥ç¡®ä¿å®ƒåŒ…å«çš„å€¼åªä¼šåœ¨éœ€è¦çš„æ—¶å€™å‘ç”Ÿå˜æ›´ã€‚æˆ‘ä»¬ä¸æƒ³å‘ŠçŸ¥é”™è¯¯çš„ä¾èµ– - æˆ‘ä»¬åªæ˜¯ä¿®æ”¹ effect ä½¿ä¾èµ–æ›´å°‘ã€‚</li>\n</ul>\n<h2 id=\"5-è®©-Effect-è‡ªç»™è‡ªè¶³\"><a href=\"#5-è®©-Effect-è‡ªç»™è‡ªè¶³\" class=\"headerlink\" title=\"5. è®© Effect è‡ªç»™è‡ªè¶³\"></a>5. è®© Effect è‡ªç»™è‡ªè¶³</h2><p>æˆ‘ä»¬æƒ³è¦æ ¹æ®å‰ä¸€ä¸ªçŠ¶æ€æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„ å‡½æ•°å½¢å¼</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setCount(<span class=\"function\"><span class=\"params\">c</span> =&gt;</span> c + <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">&#125;, []);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ­£æ˜¯ setCount(c =&gt; c + 1) åšçš„äº‹æƒ…ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯åœ¨ç»™ React â€œå‘é€æŒ‡ä»¤â€ å‘ŠçŸ¥å¦‚ä½•æ›´æ–°çŠ¶æ€ã€‚è¿™ç§ â€œæ›´æ–°å½¢å¼â€ åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿæœ‰å¸®åŠ©ï¼Œæ¯”å¦‚ä½ éœ€è¦ â€œæ‰¹é‡æ›´æ–°â€ã€‚</p>\n<h2 id=\"6-è§£è€¦æ¥è‡ª-Actions-çš„æ›´æ–°\"><a href=\"#6-è§£è€¦æ¥è‡ª-Actions-çš„æ›´æ–°\" class=\"headerlink\" title=\"6. è§£è€¦æ¥è‡ª Actions çš„æ›´æ–°\"></a>6. è§£è€¦æ¥è‡ª Actions çš„æ›´æ–°</h2><p>å½“ä½ æƒ³æ›´æ–°ä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”è¿™ä¸ªçŠ¶æ€æ›´æ–°ä¾èµ–äºå¦ä¸€ä¸ªçŠ¶æ€çš„å€¼æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ç”¨ useReducer å»æ›¿æ¢å®ƒä»¬ã€‚</p>\n<p>å½“ä½ å†™ç±»ä¼¼ setSomething(something =&gt; â€¦) è¿™ç§ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿè®¸å°±æ˜¯è€ƒè™‘ä½¿ç”¨ reducer çš„å¥‘æœºã€‚reducer å¯ä»¥è®©ä½  <strong>æŠŠç»„ä»¶å†…å‘ç”Ÿäº†ä»€ä¹ˆ(actions)</strong> å’Œ <strong>çŠ¶æ€å¦‚ä½•å“åº”å¹¶æ›´æ–°</strong> åˆ†å¼€è¡¨è¿°ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initialState);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; count, step &#125; = state;</span><br><span class=\"line\">useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;tick&quot;</span> &#125;); <span class=\"comment\">// Instead of setCount(c =&gt; c + step) &#125;, 1000);</span></span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">&#125;, [dispatch]);</span><br></pre></td></tr></table></figure>\n\n<p>ç›¸æ¯”äºç›´æ¥åœ¨ effect é‡Œé¢è¯»å–çŠ¶æ€ï¼Œå®ƒ dispatch äº†ä¸€ä¸ª action æ¥æè¿°å‘ç”Ÿäº†ä»€ä¹ˆã€‚è¿™ä½¿å¾—æˆ‘ä»¬çš„ effect å’Œ step çŠ¶æ€è§£è€¦ã€‚æˆ‘ä»¬çš„ effect ä¸å†å…³å¿ƒæ€ä¹ˆæ›´æ–°çŠ¶æ€ï¼Œå®ƒåªè´Ÿè´£å‘Šè¯‰æˆ‘ä»¬å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ›´æ–°çš„é€»è¾‘å…¨éƒ½äº¤ç”± reducer å»ç»Ÿä¸€å¤„ç†ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  count: <span class=\"number\">0</span>,</span><br><span class=\"line\">  step: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; count, step &#125; = state;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (action.type === <span class=\"string\">&quot;tick&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">count</span>: count + step, step &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (action.type === <span class=\"string\">&quot;step&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; count, <span class=\"attr\">step</span>: action.step &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-ä¸ºä»€ä¹ˆ-useReducer-æ˜¯-Hooks-çš„ä½œå¼Šæ¨¡å¼\"><a href=\"#7-ä¸ºä»€ä¹ˆ-useReducer-æ˜¯-Hooks-çš„ä½œå¼Šæ¨¡å¼\" class=\"headerlink\" title=\"7. ä¸ºä»€ä¹ˆ useReducer æ˜¯ Hooks çš„ä½œå¼Šæ¨¡å¼\"></a>7. ä¸ºä»€ä¹ˆ useReducer æ˜¯ Hooks çš„ä½œå¼Šæ¨¡å¼</h2><p>å‡å¦‚æˆ‘ä»¬éœ€è¦ä¾èµ– props å»è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¹Ÿè®¸æˆ‘ä»¬çš„ API æ˜¯ <code>&lt;Counter step=&#123;1&#125; /&gt;</code>ã€‚ç¡®å®šçš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æ³•é¿å…ä¾èµ– props.step ã€‚</p>\n<p>å®é™…ä¸Šï¼Œ æˆ‘ä»¬å¯ä»¥é¿å…ï¼æˆ‘ä»¬å¯ä»¥æŠŠ reducer å‡½æ•°æ”¾åˆ°ç»„ä»¶å†…å»è¯»å– propsã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Counter</span>(<span class=\"params\">&#123; step &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, dispatch] = useReducer(reducer, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (action.type === <span class=\"string\">&quot;tick&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state + step;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;tick&quot;</span> &#125;);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;, [dispatch]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>&#123;count&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šè¿™ç§æ¨¡å¼ä¼šä½¿ä¸€äº›ä¼˜åŒ–å¤±è´¥ï¼Œæ‰€ä»¥ä½ åº”è¯¥é¿å…æ»¥ç”¨å®ƒï¼Œä¸è¿‡å¦‚æœä½ éœ€è¦ï¼Œå®Œå…¨å¯ä»¥åœ¨ reducer é‡Œé¢è®¿é—® propsã€‚</p>\n<p>å®ƒå¯ä»¥æŠŠæ›´æ–°é€»è¾‘å’Œæè¿°å‘ç”Ÿäº†ä»€ä¹ˆåˆ†å¼€ã€‚ç»“æœæ˜¯ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ç§»é™¤ä¸å¿…éœ€çš„ä¾èµ–ï¼Œé¿å…ä¸å¿…è¦çš„ effect è°ƒç”¨ã€‚</p>\n<h2 id=\"8-å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ°-Effect-é‡Œ\"><a href=\"#8-å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ°-Effect-é‡Œ\" class=\"headerlink\" title=\"8. å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ° Effect é‡Œ\"></a>8. å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ° Effect é‡Œ</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠå‡½æ•°ç§»å…¥ effect é‡Œã€‚</p>\n<p>æ¯”å¦‚ï¼Œç»„ä»¶å†…æœ‰å‡ ä¸ª effect ä½¿ç”¨äº†ç›¸åŒçš„å‡½æ•°ï¼Œä½ ä¸æƒ³åœ¨æ¯ä¸ª effect é‡Œå¤åˆ¶é»è´´ä¸€éè¿™ä¸ªé€»è¾‘ã€‚ä¹Ÿæˆ–è®¸è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª propã€‚</p>\n<p>å‡½æ•°æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ”¹å˜è¿™ä¸ªäº‹å®æœ¬èº«å°±æ˜¯ä¸ªé—®é¢˜ã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ª effects ä¼šè°ƒç”¨ getFetchUrl:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFetchUrl</span>(<span class=\"params\">query</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// ğŸ”´ Missing dep: getFetchUrl</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// ğŸ”´ Missing dep: getFetchUrl</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠ getFetchUrl ç§»åˆ° effect ä¸­ï¼Œå› ä¸ºä½ æƒ³å¤ç”¨é€»è¾‘ã€‚</p>\n<h3 id=\"8-1-æ–¹æ³•ä¸€\"><a href=\"#8-1-æ–¹æ³•ä¸€\" class=\"headerlink\" title=\"8.1 æ–¹æ³•ä¸€\"></a>8.1 æ–¹æ³•ä¸€</h3><ul>\n<li>å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰ä½¿ç”¨ç»„ä»¶å†…çš„ä»»ä½•å€¼ï¼Œä½ åº”è¯¥æŠŠå®ƒæåˆ°ç»„ä»¶å¤–é¢å»å®šä¹‰ï¼Œç„¶åå°±å¯ä»¥è‡ªç”±åœ°åœ¨ effects ä¸­ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// âœ… Not affected by the data flow</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFetchUrl</span>(<span class=\"params\">query</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// âœ… Deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// âœ… Deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä½ ä¸å†éœ€è¦æŠŠå®ƒè®¾ä¸ºä¾èµ–ï¼Œå› ä¸ºå®ƒä»¬ä¸åœ¨æ¸²æŸ“èŒƒå›´å†…ï¼Œå› æ­¤ä¸ä¼šè¢«æ•°æ®æµå½±å“ã€‚å®ƒä¸å¯èƒ½çªç„¶æ„å¤–åœ°ä¾èµ–äº props æˆ– state ã€‚</p>\n<h3 id=\"8-2-æ–¹æ³•äºŒ\"><a href=\"#8-2-æ–¹æ³•äºŒ\" class=\"headerlink\" title=\"8.2 æ–¹æ³•äºŒ\"></a>8.2 æ–¹æ³•äºŒ</h3><ul>\n<li>ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒåŒ…è£…æˆ useCallback Hook</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// âœ… Preserves identity when its own deps are the same</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getFetchUrl = useCallback(<span class=\"function\"><span class=\"params\">query</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// âœ… Callback deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, [getFetchUrl]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, [getFetchUrl]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>useCallback æœ¬è´¨ä¸Šæ˜¯æ·»åŠ äº†ä¸€å±‚ä¾èµ–æ£€æŸ¥ã€‚å®ƒä»¥å¦ä¸€ç§æ–¹å¼è§£å†³äº†é—®é¢˜ - æˆ‘ä»¬ä½¿å‡½æ•°æœ¬èº«åªåœ¨éœ€è¦çš„æ—¶å€™æ‰æ”¹å˜ï¼Œè€Œä¸æ˜¯å»æ‰å¯¹å‡½æ•°çš„ä¾èµ–ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬æƒ³æ·»åŠ ä¸€ä¸ªè¾“å…¥æ¡†å…è®¸ä½ è¾“å…¥ä»»æ„çš„æŸ¥è¯¢æ¡ä»¶(query)ã€‚ä¸åŒäºä¼ é€’ query å‚æ•°çš„æ–¹å¼ï¼Œç°åœ¨ getFetchUrl ä¼šä»çŠ¶æ€ä¸­è¯»å–ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬æŠŠ query æ·»åŠ åˆ° useCallback çš„ä¾èµ–ä¸­ï¼Œä»»ä½•è°ƒç”¨äº† getFetchUrl çš„ effect åœ¨ query æ”¹å˜åéƒ½ä¼šé‡æ–°è¿è¡Œï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [query, setQuery] = useState(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// âœ… Preserves identity until query changes</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getFetchUrl = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">  &#125;, [query]); <span class=\"comment\">// âœ… Callback deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl();</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, [getFetchUrl]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ­£æ˜¯æ‹¥æŠ±æ•°æ®æµå’ŒåŒæ­¥æ€ç»´çš„ç»“æœã€‚å¯¹äºé€šè¿‡å±æ€§ä»çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°è¿™ä¸ªæ–¹æ³•ä¹Ÿé€‚ç”¨</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [query, setQuery] = useState(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">  <span class=\"comment\">// âœ… Preserves identity until query changes</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and return it ...</span></span><br><span class=\"line\">  &#125;, [query]); <span class=\"comment\">// âœ… Callback deps are OK</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Child</span> <span class=\"attr\">fetchData</span>=<span class=\"string\">&#123;fetchData&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">&#123; fetchData &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> [data, setData] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData().then(setData);</span><br><span class=\"line\">  &#125;, [fetchData]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å› ä¸º fetchData åªæœ‰åœ¨ Parent çš„ query çŠ¶æ€å˜æ›´æ—¶æ‰ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ Child åªä¼šåœ¨éœ€è¦çš„æ—¶å€™æ‰å»é‡æ–°è¯·æ±‚æ•°æ®ã€‚</p>\n<h2 id=\"9-å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\"><a href=\"#9-å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\" class=\"headerlink\" title=\"9. å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\"></a>9. å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ</h2><p>åœ¨ class ç»„ä»¶ä¸­ï¼Œå‡½æ•°å±æ€§æœ¬èº«å¹¶ä¸æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚ç»„ä»¶çš„æ–¹æ³•ä¸­åŒ…å«äº†å¯å˜çš„ this å˜é‡å¯¼è‡´æˆ‘ä»¬ä¸èƒ½ç¡®å®šæ— ç–‘åœ°è®¤ä¸ºå®ƒæ˜¯ä¸å˜çš„ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»æŠŠä¸€å †æ•°æ®ä¼ é€’ä¸‹å»ä»…ä»…æ˜¯ä¸ºäº†åš â€œdiffâ€ã€‚æˆ‘ä»¬æ— æ³•çŸ¥é“ä¼ å…¥çš„ this.props.fetchData æ˜¯å¦ä¾èµ–çŠ¶æ€ï¼Œå¹¶ä¸”ä¸çŸ¥é“å®ƒä¾èµ–çš„çŠ¶æ€æ˜¯å¦æ”¹å˜äº†ã€‚</p>\n<p>ä½¿ç”¨ useCallbackï¼Œå‡½æ•°å®Œå…¨å¯ä»¥å‚ä¸åˆ°æ•°æ®æµä¸­ã€‚æˆ‘ä»¬å¯ä»¥è¯´å¦‚æœä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ”¹å˜äº†ï¼Œè¿™ä¸ªå‡½æ•°å°±æ”¹å˜äº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œå‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ä½¿ç”¨çš„ useCallbackï¼Œå±æ€§ props.fetchData çš„æ”¹å˜ä¹Ÿä¼šè‡ªåŠ¨ä¼ é€’ä¸‹å»ã€‚</p>\n<p>ç±»ä¼¼åœ°ï¼ŒuseMemo å¯ä»¥è®©æˆ‘ä»¬å¯¹å¤æ‚å¯¹è±¡åšç±»ä¼¼çš„äº‹æƒ…ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ColorPicker</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Doesn&#x27;t break Child&#x27;s shallow equality prop check</span></span><br><span class=\"line\">  <span class=\"comment\">// unless the color actually changes.</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [color, setColor] = useState(<span class=\"string\">&quot;pink&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> style = useMemo(<span class=\"function\">() =&gt;</span> (&#123; color &#125;), [color]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Child</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;style&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-ç«æ€\"><a href=\"#10-ç«æ€\" class=\"headerlink\" title=\"10. ç«æ€\"></a>10. ç«æ€</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åœ¨ class ç»„ä»¶é‡Œå‘è¯·æ±‚çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Article</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  state = &#123;</span><br><span class=\"line\">    article: <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.fetchData(<span class=\"built_in\">this</span>.props.id);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\">prevProps</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (prevProps.id !== <span class=\"built_in\">this</span>.props.id) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.fetchData(<span class=\"built_in\">this</span>.props.id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">fetchData</span>(<span class=\"params\">id</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> article = <span class=\"keyword\">await</span> API.fetchArticle(id);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123; article &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™è¢«å«åšç«æ€ï¼Œè¿™åœ¨æ··åˆäº† async / awaitï¼ˆå‡è®¾åœ¨ç­‰å¾…ç»“æœè¿”å›ï¼‰å’Œè‡ªé¡¶å‘ä¸‹æ•°æ®æµçš„ä»£ç ä¸­éå¸¸å…¸å‹ï¼ˆ props å’Œ state å¯èƒ½ä¼šåœ¨ async å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å‘ç”Ÿæ”¹å˜ï¼‰ã€‚</p>\n<p>Effects å¹¶æ²¡æœ‰ç¥å¥‡åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°½ç®¡å®ƒä¼šè­¦å‘Šä½ å¦‚æœä½ ç›´æ¥ä¼ äº†ä¸€ä¸ª async å‡½æ•°ç»™ effectã€‚</p>\n<ul>\n<li>è§£å†³æ–¹å¼</li>\n</ul>\n<ol>\n<li><p>å¦‚æœä½ ä½¿ç”¨çš„å¼‚æ­¥æ–¹å¼æ”¯æŒå–æ¶ˆã€‚ä½ å¯ä»¥ç›´æ¥åœ¨æ¸…é™¤å‡½æ•°ä¸­å–æ¶ˆå¼‚æ­¥è¯·æ±‚ã€‚</p>\n</li>\n<li><p>æˆ–è€…ï¼Œæœ€ç®€å•çš„æƒå®œä¹‹è®¡æ˜¯ç”¨ä¸€ä¸ªå¸ƒå°”å€¼æ¥è·Ÿè¸ªå®ƒã€‚</p>\n</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Article</span>(<span class=\"params\">&#123; id &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [article, setArticle] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> didCancel = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fetchData = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> article = <span class=\"keyword\">await</span> API.fetchArticle(id);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!didCancel) &#123;</span><br><span class=\"line\">        setArticle(article);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      didCancel = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, [id]);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-é€†æ½®è€ŒåŠ¨\"><a href=\"#1-é€†æ½®è€ŒåŠ¨\" class=\"headerlink\" title=\"1. é€†æ½®è€ŒåŠ¨\"></a>1. é€†æ½®è€ŒåŠ¨</h2><p>æ¯ä¸€ä¸ªç»„ä»¶å†…çš„å‡½æ•°(åŒ…æ‹¬äº‹ä»¶å¤„ç†å‡½æ•°ã€effectsã€å®šæ—¶å™¨ æˆ–è€… API è°ƒç”¨ç­‰ç­‰)ä¼šæ•æ‰æŸæ¬¡æ¸²æŸ“ä¸­å®šä¹‰çš„ props å’Œ state</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(props.counter);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç­‰æ•ˆäº</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> counter = props.counter;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(counter);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-effects-ä¸­çš„æ¸…ç†\"><a href=\"#2-effects-ä¸­çš„æ¸…ç†\" class=\"headerlink\" title=\"2. effects ä¸­çš„æ¸…ç†\"></a>2. effects ä¸­çš„æ¸…ç†</h2><p>ç›®çš„: æœ‰äº› effects å¯èƒ½éœ€è¦æœ‰ä¸€ä¸ªæ¸…ç†æ­¥éª¤ã€‚æœ¬è´¨ä¸Šï¼Œå®ƒçš„ç›®çš„æ˜¯æ¶ˆé™¤å‰¯ä½œç”¨çš„ effectï¼Œæ¯”å¦‚å–æ¶ˆè®¢é˜…ã€‚</p>\n<p>effect çš„æ¸…é™¤å¹¶ä¸ä¼šè¯»å– â€œæœ€æ–°â€ çš„ propsã€‚å®ƒåªèƒ½è¯»å–åˆ°å®šä¹‰å®ƒçš„é‚£æ¬¡æ¸²æŸ“ä¸­çš„ props çš„å€¼</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// First render, props are &#123;id: 10&#125;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(<span class=\"number\">10</span>, handleStatusChange);</span><br><span class=\"line\">    <span class=\"comment\">// cleanup for effect from first render</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      ChatAPI.subscribeToFriendStatus(<span class=\"number\">10</span>, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Next render, props are &#123;id: 20&#125;</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(<span class=\"number\">20</span>, handleStatusChange);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      ChatAPI.subscribeToFriendStatus(<span class=\"number\">20</span>, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-é¿å…é‡å¤è°ƒç”¨\"><a href=\"#3-é¿å…é‡å¤è°ƒç”¨\" class=\"headerlink\" title=\"3. é¿å…é‡å¤è°ƒç”¨\"></a>3. é¿å…é‡å¤è°ƒç”¨</h2><p>ä¸ºäº†é¿å… effects ä¸å¿…è¦çš„é‡å¤è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ç»™ useEffect ä¸€ä¸ªä¾èµ–æ•°ç»„å‚æ•°(deps)</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.title = <span class=\"string\">&quot;Hello, &quot;</span> + title;</span><br><span class=\"line\">&#125;, [name]);</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœå½“å‰æ¸²æŸ“ä¸­çš„è¿™äº›ä¾èµ–é¡¹å’Œä¸Šä¸€æ¬¡è¿è¡Œè¿™ä¸ª effect çš„æ—¶å€™å€¼ä¸€æ ·ï¼Œå› ä¸ºæ²¡æœ‰ä»€ä¹ˆéœ€è¦åŒæ­¥ React ä¼šè‡ªåŠ¨è·³è¿‡è¿™æ¬¡ effectã€‚</p>\n<h2 id=\"4-ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\"><a href=\"#4-ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\" class=\"headerlink\" title=\"4. ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•\"></a>4. ä¸¤ç§è¯šå®å‘ŠçŸ¥ä¾èµ–çš„æ–¹æ³•</h2><ul>\n<li>åœ¨ä¾èµ–ä¸­åŒ…å«æ‰€æœ‰ effect ä¸­ç”¨åˆ°çš„ç»„ä»¶å†…çš„å€¼</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      setCount(count + <span class=\"number\">1</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">  &#125;, [count]);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;you clicked it &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¿®æ”¹ effect å†…éƒ¨çš„ä»£ç ä»¥ç¡®ä¿å®ƒåŒ…å«çš„å€¼åªä¼šåœ¨éœ€è¦çš„æ—¶å€™å‘ç”Ÿå˜æ›´ã€‚æˆ‘ä»¬ä¸æƒ³å‘ŠçŸ¥é”™è¯¯çš„ä¾èµ– - æˆ‘ä»¬åªæ˜¯ä¿®æ”¹ effect ä½¿ä¾èµ–æ›´å°‘ã€‚</li>\n</ul>\n<h2 id=\"5-è®©-Effect-è‡ªç»™è‡ªè¶³\"><a href=\"#5-è®©-Effect-è‡ªç»™è‡ªè¶³\" class=\"headerlink\" title=\"5. è®© Effect è‡ªç»™è‡ªè¶³\"></a>5. è®© Effect è‡ªç»™è‡ªè¶³</h2><p>æˆ‘ä»¬æƒ³è¦æ ¹æ®å‰ä¸€ä¸ªçŠ¶æ€æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ setState çš„ å‡½æ•°å½¢å¼</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setCount(<span class=\"function\"><span class=\"params\">c</span> =&gt;</span> c + <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">&#125;, []);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ­£æ˜¯ setCount(c =&gt; c + 1) åšçš„äº‹æƒ…ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒæ˜¯åœ¨ç»™ React â€œå‘é€æŒ‡ä»¤â€ å‘ŠçŸ¥å¦‚ä½•æ›´æ–°çŠ¶æ€ã€‚è¿™ç§ â€œæ›´æ–°å½¢å¼â€ åœ¨å…¶ä»–æƒ…å†µä¸‹ä¹Ÿæœ‰å¸®åŠ©ï¼Œæ¯”å¦‚ä½ éœ€è¦ â€œæ‰¹é‡æ›´æ–°â€ã€‚</p>\n<h2 id=\"6-è§£è€¦æ¥è‡ª-Actions-çš„æ›´æ–°\"><a href=\"#6-è§£è€¦æ¥è‡ª-Actions-çš„æ›´æ–°\" class=\"headerlink\" title=\"6. è§£è€¦æ¥è‡ª Actions çš„æ›´æ–°\"></a>6. è§£è€¦æ¥è‡ª Actions çš„æ›´æ–°</h2><p>å½“ä½ æƒ³æ›´æ–°ä¸€ä¸ªçŠ¶æ€ï¼Œå¹¶ä¸”è¿™ä¸ªçŠ¶æ€æ›´æ–°ä¾èµ–äºå¦ä¸€ä¸ªçŠ¶æ€çš„å€¼æ—¶ï¼Œä½ å¯èƒ½éœ€è¦ç”¨ useReducer å»æ›¿æ¢å®ƒä»¬ã€‚</p>\n<p>å½“ä½ å†™ç±»ä¼¼ setSomething(something =&gt; â€¦) è¿™ç§ä»£ç çš„æ—¶å€™ï¼Œä¹Ÿè®¸å°±æ˜¯è€ƒè™‘ä½¿ç”¨ reducer çš„å¥‘æœºã€‚reducer å¯ä»¥è®©ä½  <strong>æŠŠç»„ä»¶å†…å‘ç”Ÿäº†ä»€ä¹ˆ(actions)</strong> å’Œ <strong>çŠ¶æ€å¦‚ä½•å“åº”å¹¶æ›´æ–°</strong> åˆ†å¼€è¡¨è¿°ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initialState);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; count, step &#125; = state;</span><br><span class=\"line\">useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">Â Â Â Â <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">Â Â Â Â Â Â Â Â dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;tick&quot;</span> &#125;); <span class=\"comment\">// Instead of setCount(c =&gt; c + step) &#125;, 1000);</span></span><br><span class=\"line\">Â Â Â Â Â Â Â Â <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> <span class=\"built_in\">clearInterval</span>(id);</span><br><span class=\"line\">&#125;, [dispatch]);</span><br></pre></td></tr></table></figure>\n\n<p>ç›¸æ¯”äºç›´æ¥åœ¨ effect é‡Œé¢è¯»å–çŠ¶æ€ï¼Œå®ƒ dispatch äº†ä¸€ä¸ª action æ¥æè¿°å‘ç”Ÿäº†ä»€ä¹ˆã€‚è¿™ä½¿å¾—æˆ‘ä»¬çš„ effect å’Œ step çŠ¶æ€è§£è€¦ã€‚æˆ‘ä»¬çš„ effect ä¸å†å…³å¿ƒæ€ä¹ˆæ›´æ–°çŠ¶æ€ï¼Œå®ƒåªè´Ÿè´£å‘Šè¯‰æˆ‘ä»¬å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ›´æ–°çš„é€»è¾‘å…¨éƒ½äº¤ç”± reducer å»ç»Ÿä¸€å¤„ç†ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123;</span><br><span class=\"line\">  count: <span class=\"number\">0</span>,</span><br><span class=\"line\">  step: <span class=\"number\">1</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; count, step &#125; = state;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (action.type === <span class=\"string\">&quot;tick&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; <span class=\"attr\">count</span>: count + step, step &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (action.type === <span class=\"string\">&quot;step&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123; count, <span class=\"attr\">step</span>: action.step &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-ä¸ºä»€ä¹ˆ-useReducer-æ˜¯-Hooks-çš„ä½œå¼Šæ¨¡å¼\"><a href=\"#7-ä¸ºä»€ä¹ˆ-useReducer-æ˜¯-Hooks-çš„ä½œå¼Šæ¨¡å¼\" class=\"headerlink\" title=\"7. ä¸ºä»€ä¹ˆ useReducer æ˜¯ Hooks çš„ä½œå¼Šæ¨¡å¼\"></a>7. ä¸ºä»€ä¹ˆ useReducer æ˜¯ Hooks çš„ä½œå¼Šæ¨¡å¼</h2><p>å‡å¦‚æˆ‘ä»¬éœ€è¦ä¾èµ– props å»è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¹Ÿè®¸æˆ‘ä»¬çš„ API æ˜¯ <code>&lt;Counter step=&#123;1&#125; /&gt;</code>ã€‚ç¡®å®šçš„æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æ³•é¿å…ä¾èµ– props.step ã€‚</p>\n<p>å®é™…ä¸Šï¼Œ æˆ‘ä»¬å¯ä»¥é¿å…ï¼æˆ‘ä»¬å¯ä»¥æŠŠ reducer å‡½æ•°æ”¾åˆ°ç»„ä»¶å†…å»è¯»å– propsã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Counter</span>(<span class=\"params\">&#123; step &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, dispatch] = useReducer(reducer, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (action.type === <span class=\"string\">&quot;tick&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> state + step;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;tick&quot;</span> &#125;);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">  &#125;, [dispatch]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>&#123;count&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„ï¼šè¿™ç§æ¨¡å¼ä¼šä½¿ä¸€äº›ä¼˜åŒ–å¤±è´¥ï¼Œæ‰€ä»¥ä½ åº”è¯¥é¿å…æ»¥ç”¨å®ƒï¼Œä¸è¿‡å¦‚æœä½ éœ€è¦ï¼Œå®Œå…¨å¯ä»¥åœ¨ reducer é‡Œé¢è®¿é—® propsã€‚</p>\n<p>å®ƒå¯ä»¥æŠŠæ›´æ–°é€»è¾‘å’Œæè¿°å‘ç”Ÿäº†ä»€ä¹ˆåˆ†å¼€ã€‚ç»“æœæ˜¯ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘ç§»é™¤ä¸å¿…éœ€çš„ä¾èµ–ï¼Œé¿å…ä¸å¿…è¦çš„ effect è°ƒç”¨ã€‚</p>\n<h2 id=\"8-å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ°-Effect-é‡Œ\"><a href=\"#8-å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ°-Effect-é‡Œ\" class=\"headerlink\" title=\"8. å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ° Effect é‡Œ\"></a>8. å¦‚ä½•ä¸æŠŠå‡½æ•°æ”¾åˆ° Effect é‡Œ</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠå‡½æ•°ç§»å…¥ effect é‡Œã€‚</p>\n<p>æ¯”å¦‚ï¼Œç»„ä»¶å†…æœ‰å‡ ä¸ª effect ä½¿ç”¨äº†ç›¸åŒçš„å‡½æ•°ï¼Œä½ ä¸æƒ³åœ¨æ¯ä¸ª effect é‡Œå¤åˆ¶é»è´´ä¸€éè¿™ä¸ªé€»è¾‘ã€‚ä¹Ÿæˆ–è®¸è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª propã€‚</p>\n<p>å‡½æ•°æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ”¹å˜è¿™ä¸ªäº‹å®æœ¬èº«å°±æ˜¯ä¸ªé—®é¢˜ã€‚æ¯”å¦‚æœ‰ä¸¤ä¸ª effects ä¼šè°ƒç”¨ getFetchUrl:</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFetchUrl</span>(<span class=\"params\">query</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// ğŸ”´ Missing dep: getFetchUrl</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// ğŸ”´ Missing dep: getFetchUrl</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬å¯èƒ½ä¸æƒ³æŠŠ getFetchUrl ç§»åˆ° effect ä¸­ï¼Œå› ä¸ºä½ æƒ³å¤ç”¨é€»è¾‘ã€‚</p>\n<h3 id=\"8-1-æ–¹æ³•ä¸€\"><a href=\"#8-1-æ–¹æ³•ä¸€\" class=\"headerlink\" title=\"8.1 æ–¹æ³•ä¸€\"></a>8.1 æ–¹æ³•ä¸€</h3><ul>\n<li>å¦‚æœä¸€ä¸ªå‡½æ•°æ²¡æœ‰ä½¿ç”¨ç»„ä»¶å†…çš„ä»»ä½•å€¼ï¼Œä½ åº”è¯¥æŠŠå®ƒæåˆ°ç»„ä»¶å¤–é¢å»å®šä¹‰ï¼Œç„¶åå°±å¯ä»¥è‡ªç”±åœ°åœ¨ effects ä¸­ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// âœ… Not affected by the data flow</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFetchUrl</span>(<span class=\"params\">query</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// âœ… Deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// âœ… Deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä½ ä¸å†éœ€è¦æŠŠå®ƒè®¾ä¸ºä¾èµ–ï¼Œå› ä¸ºå®ƒä»¬ä¸åœ¨æ¸²æŸ“èŒƒå›´å†…ï¼Œå› æ­¤ä¸ä¼šè¢«æ•°æ®æµå½±å“ã€‚å®ƒä¸å¯èƒ½çªç„¶æ„å¤–åœ°ä¾èµ–äº props æˆ– state ã€‚</p>\n<h3 id=\"8-2-æ–¹æ³•äºŒ\"><a href=\"#8-2-æ–¹æ³•äºŒ\" class=\"headerlink\" title=\"8.2 æ–¹æ³•äºŒ\"></a>8.2 æ–¹æ³•äºŒ</h3><ul>\n<li>ä½ ä¹Ÿå¯ä»¥æŠŠå®ƒåŒ…è£…æˆ useCallback Hook</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// âœ… Preserves identity when its own deps are the same</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getFetchUrl = useCallback(<span class=\"function\"><span class=\"params\">query</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">  &#125;, []); <span class=\"comment\">// âœ… Callback deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, [getFetchUrl]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl(<span class=\"string\">&quot;redux&quot;</span>);</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, [getFetchUrl]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>useCallback æœ¬è´¨ä¸Šæ˜¯æ·»åŠ äº†ä¸€å±‚ä¾èµ–æ£€æŸ¥ã€‚å®ƒä»¥å¦ä¸€ç§æ–¹å¼è§£å†³äº†é—®é¢˜ - æˆ‘ä»¬ä½¿å‡½æ•°æœ¬èº«åªåœ¨éœ€è¦çš„æ—¶å€™æ‰æ”¹å˜ï¼Œè€Œä¸æ˜¯å»æ‰å¯¹å‡½æ•°çš„ä¾èµ–ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬æƒ³æ·»åŠ ä¸€ä¸ªè¾“å…¥æ¡†å…è®¸ä½ è¾“å…¥ä»»æ„çš„æŸ¥è¯¢æ¡ä»¶(query)ã€‚ä¸åŒäºä¼ é€’ query å‚æ•°çš„æ–¹å¼ï¼Œç°åœ¨ getFetchUrl ä¼šä»çŠ¶æ€ä¸­è¯»å–ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬æŠŠ query æ·»åŠ åˆ° useCallback çš„ä¾èµ–ä¸­ï¼Œä»»ä½•è°ƒç”¨äº† getFetchUrl çš„ effect åœ¨ query æ”¹å˜åéƒ½ä¼šé‡æ–°è¿è¡Œï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">SearchResults</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [query, setQuery] = useState(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// âœ… Preserves identity until query changes</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getFetchUrl = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">  &#125;, [query]); <span class=\"comment\">// âœ… Callback deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = getFetchUrl();</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and do something ...</span></span><br><span class=\"line\">  &#125;, [getFetchUrl]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ­£æ˜¯æ‹¥æŠ±æ•°æ®æµå’ŒåŒæ­¥æ€ç»´çš„ç»“æœã€‚å¯¹äºé€šè¿‡å±æ€§ä»çˆ¶ç»„ä»¶ä¼ å…¥çš„å‡½æ•°è¿™ä¸ªæ–¹æ³•ä¹Ÿé€‚ç”¨</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [query, setQuery] = useState(<span class=\"string\">&quot;react&quot;</span>);</span><br><span class=\"line\">  <span class=\"comment\">// âœ… Preserves identity until query changes</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> url = <span class=\"string\">&quot;https://hn.algolia.com/api/v1/search?query=&quot;</span> + query;</span><br><span class=\"line\">    <span class=\"comment\">// ... Fetch data and return it ...</span></span><br><span class=\"line\">  &#125;, [query]); <span class=\"comment\">// âœ… Callback deps are OK</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Child</span> <span class=\"attr\">fetchData</span>=<span class=\"string\">&#123;fetchData&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">&#123; fetchData &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> [data, setData] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData().then(setData);</span><br><span class=\"line\">  &#125;, [fetchData]); <span class=\"comment\">// âœ… Effect deps are OK</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>å› ä¸º fetchData åªæœ‰åœ¨ Parent çš„ query çŠ¶æ€å˜æ›´æ—¶æ‰ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ Child åªä¼šåœ¨éœ€è¦çš„æ—¶å€™æ‰å»é‡æ–°è¯·æ±‚æ•°æ®ã€‚</p>\n<h2 id=\"9-å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\"><a href=\"#9-å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\" class=\"headerlink\" title=\"9. å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ\"></a>9. å‡½æ•°æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ä¹ˆ</h2><p>åœ¨ class ç»„ä»¶ä¸­ï¼Œå‡½æ•°å±æ€§æœ¬èº«å¹¶ä¸æ˜¯æ•°æ®æµçš„ä¸€éƒ¨åˆ†ã€‚ç»„ä»¶çš„æ–¹æ³•ä¸­åŒ…å«äº†å¯å˜çš„ this å˜é‡å¯¼è‡´æˆ‘ä»¬ä¸èƒ½ç¡®å®šæ— ç–‘åœ°è®¤ä¸ºå®ƒæ˜¯ä¸å˜çš„ã€‚å› æ­¤ï¼Œå³ä½¿æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»æŠŠä¸€å †æ•°æ®ä¼ é€’ä¸‹å»ä»…ä»…æ˜¯ä¸ºäº†åš â€œdiffâ€ã€‚æˆ‘ä»¬æ— æ³•çŸ¥é“ä¼ å…¥çš„ this.props.fetchData æ˜¯å¦ä¾èµ–çŠ¶æ€ï¼Œå¹¶ä¸”ä¸çŸ¥é“å®ƒä¾èµ–çš„çŠ¶æ€æ˜¯å¦æ”¹å˜äº†ã€‚</p>\n<p>ä½¿ç”¨ useCallbackï¼Œå‡½æ•°å®Œå…¨å¯ä»¥å‚ä¸åˆ°æ•°æ®æµä¸­ã€‚æˆ‘ä»¬å¯ä»¥è¯´å¦‚æœä¸€ä¸ªå‡½æ•°çš„è¾“å…¥æ”¹å˜äº†ï¼Œè¿™ä¸ªå‡½æ•°å°±æ”¹å˜äº†ã€‚å¦‚æœæ²¡æœ‰ï¼Œå‡½æ•°ä¹Ÿä¸ä¼šæ”¹å˜ã€‚ä½¿ç”¨çš„ useCallbackï¼Œå±æ€§ props.fetchData çš„æ”¹å˜ä¹Ÿä¼šè‡ªåŠ¨ä¼ é€’ä¸‹å»ã€‚</p>\n<p>ç±»ä¼¼åœ°ï¼ŒuseMemo å¯ä»¥è®©æˆ‘ä»¬å¯¹å¤æ‚å¯¹è±¡åšç±»ä¼¼çš„äº‹æƒ…ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ColorPicker</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Doesn&#x27;t break Child&#x27;s shallow equality prop check</span></span><br><span class=\"line\">  <span class=\"comment\">// unless the color actually changes.</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [color, setColor] = useState(<span class=\"string\">&quot;pink&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> style = useMemo(<span class=\"function\">() =&gt;</span> (&#123; color &#125;), [color]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Child</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;style&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-ç«æ€\"><a href=\"#10-ç«æ€\" class=\"headerlink\" title=\"10. ç«æ€\"></a>10. ç«æ€</h2><p>ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„åœ¨ class ç»„ä»¶é‡Œå‘è¯·æ±‚çš„ä¾‹å­ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Article</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  state = &#123;</span><br><span class=\"line\">    article: <span class=\"literal\">null</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.fetchData(<span class=\"built_in\">this</span>.props.id);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\">prevProps</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (prevProps.id !== <span class=\"built_in\">this</span>.props.id) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.fetchData(<span class=\"built_in\">this</span>.props.id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">fetchData</span>(<span class=\"params\">id</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> article = <span class=\"keyword\">await</span> API.fetchArticle(id);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123; article &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>è¿™è¢«å«åšç«æ€ï¼Œè¿™åœ¨æ··åˆäº† async / awaitï¼ˆå‡è®¾åœ¨ç­‰å¾…ç»“æœè¿”å›ï¼‰å’Œè‡ªé¡¶å‘ä¸‹æ•°æ®æµçš„ä»£ç ä¸­éå¸¸å…¸å‹ï¼ˆ props å’Œ state å¯èƒ½ä¼šåœ¨ async å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­å‘ç”Ÿæ”¹å˜ï¼‰ã€‚</p>\n<p>Effects å¹¶æ²¡æœ‰ç¥å¥‡åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°½ç®¡å®ƒä¼šè­¦å‘Šä½ å¦‚æœä½ ç›´æ¥ä¼ äº†ä¸€ä¸ª async å‡½æ•°ç»™ effectã€‚</p>\n<ul>\n<li>è§£å†³æ–¹å¼</li>\n</ul>\n<ol>\n<li><p>å¦‚æœä½ ä½¿ç”¨çš„å¼‚æ­¥æ–¹å¼æ”¯æŒå–æ¶ˆã€‚ä½ å¯ä»¥ç›´æ¥åœ¨æ¸…é™¤å‡½æ•°ä¸­å–æ¶ˆå¼‚æ­¥è¯·æ±‚ã€‚</p>\n</li>\n<li><p>æˆ–è€…ï¼Œæœ€ç®€å•çš„æƒå®œä¹‹è®¡æ˜¯ç”¨ä¸€ä¸ªå¸ƒå°”å€¼æ¥è·Ÿè¸ªå®ƒã€‚</p>\n</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Article</span>(<span class=\"params\">&#123; id &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [article, setArticle] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> didCancel = <span class=\"literal\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fetchData = <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> article = <span class=\"keyword\">await</span> API.fetchArticle(id);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!didCancel) &#123;</span><br><span class=\"line\">        setArticle(article);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      didCancel = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;, [id]);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n"},{"title":"Vue2 diff ç®—æ³•","date":"2020-07-19T16:00:00.000Z","_content":"\n## ç»“æ„å›¾\n\n![ç»“æ„å›¾.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703926503-0a8b70ad-ee2b-4b15-9f24-cb3008e56d1e.png#align=left&display=inline&height=699&margin=%5Bobject%20Object%5D&name=%E7%BB%93%E6%9E%84%E5%9B%BE.png&originHeight=699&originWidth=1424&size=257532&status=done&style=none&width=1424)\n\n## ä¸‰ä¸ªç»´åº¦\n\n> æ‰§è¡Œæ—¶æŒ‰ç…§ä»¥ä¸‹é¡ºåºä¾æ¬¡æ‰§è¡Œ\n\n### tree diff\n\n> `tree diff` æ˜¯å¯¹æ ‘çš„æ¯ä¸€å±‚è¿›è¡Œéå†,å¦‚æœæŸä¸ªç»„ä»¶ä¸å­˜åœ¨äº†ï¼Œåˆ™ä¼šç›´æ¥é”€æ¯ã€‚\n\n> å¦‚å›¾æ‰€ç¤ºï¼Œå·¦è¾¹æ˜¯æ—§å±ï¼Œå³è¾¹æ˜¯æ–°å±ï¼Œç¬¬ä¸€å±‚æ˜¯ `R` ç»„ä»¶ï¼Œä¸€æ¨¡ä¸€æ ·ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼›\n> ç¬¬äºŒå±‚è¿›å…¥ `Component DIFF`ï¼ŒåŒä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå‘ç° `A` ç»„ä»¶æ²¡æœ‰ï¼Œæ‰€ä»¥ç›´æ¥åˆ æ‰ `Aã€Bã€C` ç»„ä»¶ï¼›\n> ç»§ç»­ç¬¬ä¸‰å±‚ï¼Œé‡æ–°åˆ›å»º `Aã€Bã€C` ç»„ä»¶ã€‚\n\n![tree-diff.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703948400-4b9d5cfa-ddf5-404f-83f0-7de2c979afd2.png#align=left&display=inline&height=317&margin=%5Bobject%20Object%5D&name=tree-diff.png&originHeight=317&originWidth=533&size=61410&status=done&style=none&width=533)\n\n### component diff\n\n> å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€å±‚éå†å®Œï¼Œè¿›è¡Œç¬¬äºŒå±‚éå†æ—¶ï¼ŒD å’Œ G ç»„ä»¶æ˜¯ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œä¸åŒç±»å‹ç»„ä»¶ç›´æ¥è¿›è¡Œæ›¿æ¢ï¼Œå°† D åˆ æ‰ï¼Œå†å°† `G` é‡å»ºã€‚\n\n![component-diff.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703964946-362729fd-486b-461b-8210-c191053da87c.png#align=left&display=inline&height=244&margin=%5Bobject%20Object%5D&name=component-diff.png&originHeight=244&originWidth=566&size=81300&status=done&style=none&width=566)\n\n### element diff\n\n> `Element DIFF` ç´§æ¥ç€ä»¥ä¸Šç»Ÿä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå¸¸è§ç±»å‹å°±æ˜¯åˆ—è¡¨ã€‚åŒä¸€ä¸ªåˆ—è¡¨ç”±æ—§å˜æ–°æœ‰ä¸‰ç§è¡Œä¸ºï¼Œæ’å…¥ã€ç§»åŠ¨å’Œåˆ é™¤ï¼Œå®ƒçš„æ¯”è¾ƒç­–ç•¥æ˜¯å¯¹äºæ¯ä¸€ä¸ªåˆ—è¡¨æŒ‡å®š `key`ï¼Œå…ˆå°†æ‰€æœ‰åˆ—è¡¨éå†ä¸€éï¼Œç¡®å®šè¦æ–°å¢å’Œåˆ é™¤çš„ï¼Œå†ç¡®å®šéœ€è¦ç§»åŠ¨çš„ã€‚\n> å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€æ­¥å°† `D` åˆ æ‰ï¼Œç¬¬äºŒæ­¥å¢åŠ  `E`ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ `A` å’Œ `B` åªéœ€è¦ç§»åŠ¨ä½ç½®å³å¯ã€‚\n\n![element-diff.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703980058-5f99c653-2a0a-46c4-9bb5-f1af80d45afe.png#align=left&display=inline&height=331&margin=%5Bobject%20Object%5D&name=element-diff.png&originHeight=331&originWidth=523&size=81565&status=done&style=none&width=523)\n","source":"_posts/å‰ç«¯/Vue2 diff ç®—æ³•.md","raw":"---\ntitle: Vue2 diff ç®—æ³•\ndate: 2020-07-20\ncategories: [å‰ç«¯, vue]\ntags:\n  - diff ç®—æ³•\n---\n\n## ç»“æ„å›¾\n\n![ç»“æ„å›¾.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703926503-0a8b70ad-ee2b-4b15-9f24-cb3008e56d1e.png#align=left&display=inline&height=699&margin=%5Bobject%20Object%5D&name=%E7%BB%93%E6%9E%84%E5%9B%BE.png&originHeight=699&originWidth=1424&size=257532&status=done&style=none&width=1424)\n\n## ä¸‰ä¸ªç»´åº¦\n\n> æ‰§è¡Œæ—¶æŒ‰ç…§ä»¥ä¸‹é¡ºåºä¾æ¬¡æ‰§è¡Œ\n\n### tree diff\n\n> `tree diff` æ˜¯å¯¹æ ‘çš„æ¯ä¸€å±‚è¿›è¡Œéå†,å¦‚æœæŸä¸ªç»„ä»¶ä¸å­˜åœ¨äº†ï¼Œåˆ™ä¼šç›´æ¥é”€æ¯ã€‚\n\n> å¦‚å›¾æ‰€ç¤ºï¼Œå·¦è¾¹æ˜¯æ—§å±ï¼Œå³è¾¹æ˜¯æ–°å±ï¼Œç¬¬ä¸€å±‚æ˜¯ `R` ç»„ä»¶ï¼Œä¸€æ¨¡ä¸€æ ·ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼›\n> ç¬¬äºŒå±‚è¿›å…¥ `Component DIFF`ï¼ŒåŒä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå‘ç° `A` ç»„ä»¶æ²¡æœ‰ï¼Œæ‰€ä»¥ç›´æ¥åˆ æ‰ `Aã€Bã€C` ç»„ä»¶ï¼›\n> ç»§ç»­ç¬¬ä¸‰å±‚ï¼Œé‡æ–°åˆ›å»º `Aã€Bã€C` ç»„ä»¶ã€‚\n\n![tree-diff.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703948400-4b9d5cfa-ddf5-404f-83f0-7de2c979afd2.png#align=left&display=inline&height=317&margin=%5Bobject%20Object%5D&name=tree-diff.png&originHeight=317&originWidth=533&size=61410&status=done&style=none&width=533)\n\n### component diff\n\n> å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€å±‚éå†å®Œï¼Œè¿›è¡Œç¬¬äºŒå±‚éå†æ—¶ï¼ŒD å’Œ G ç»„ä»¶æ˜¯ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œä¸åŒç±»å‹ç»„ä»¶ç›´æ¥è¿›è¡Œæ›¿æ¢ï¼Œå°† D åˆ æ‰ï¼Œå†å°† `G` é‡å»ºã€‚\n\n![component-diff.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703964946-362729fd-486b-461b-8210-c191053da87c.png#align=left&display=inline&height=244&margin=%5Bobject%20Object%5D&name=component-diff.png&originHeight=244&originWidth=566&size=81300&status=done&style=none&width=566)\n\n### element diff\n\n> `Element DIFF` ç´§æ¥ç€ä»¥ä¸Šç»Ÿä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå¸¸è§ç±»å‹å°±æ˜¯åˆ—è¡¨ã€‚åŒä¸€ä¸ªåˆ—è¡¨ç”±æ—§å˜æ–°æœ‰ä¸‰ç§è¡Œä¸ºï¼Œæ’å…¥ã€ç§»åŠ¨å’Œåˆ é™¤ï¼Œå®ƒçš„æ¯”è¾ƒç­–ç•¥æ˜¯å¯¹äºæ¯ä¸€ä¸ªåˆ—è¡¨æŒ‡å®š `key`ï¼Œå…ˆå°†æ‰€æœ‰åˆ—è¡¨éå†ä¸€éï¼Œç¡®å®šè¦æ–°å¢å’Œåˆ é™¤çš„ï¼Œå†ç¡®å®šéœ€è¦ç§»åŠ¨çš„ã€‚\n> å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€æ­¥å°† `D` åˆ æ‰ï¼Œç¬¬äºŒæ­¥å¢åŠ  `E`ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ `A` å’Œ `B` åªéœ€è¦ç§»åŠ¨ä½ç½®å³å¯ã€‚\n\n![element-diff.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703980058-5f99c653-2a0a-46c4-9bb5-f1af80d45afe.png#align=left&display=inline&height=331&margin=%5Bobject%20Object%5D&name=element-diff.png&originHeight=331&originWidth=523&size=81565&status=done&style=none&width=523)\n","slug":"å‰ç«¯/Vue2 diff ç®—æ³•","published":1,"updated":"2021-04-07T07:23:17.007Z","_id":"ckn7476ad001zyx7yhda41in0","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"ç»“æ„å›¾\"><a href=\"#ç»“æ„å›¾\" class=\"headerlink\" title=\"ç»“æ„å›¾\"></a>ç»“æ„å›¾</h2><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703926503-0a8b70ad-ee2b-4b15-9f24-cb3008e56d1e.png#align=left&display=inline&height=699&margin=%5Bobject%20Object%5D&name=%E7%BB%93%E6%9E%84%E5%9B%BE.png&originHeight=699&originWidth=1424&size=257532&status=done&style=none&width=1424\" alt=\"ç»“æ„å›¾.png\"></p>\n<h2 id=\"ä¸‰ä¸ªç»´åº¦\"><a href=\"#ä¸‰ä¸ªç»´åº¦\" class=\"headerlink\" title=\"ä¸‰ä¸ªç»´åº¦\"></a>ä¸‰ä¸ªç»´åº¦</h2><blockquote>\n<p>æ‰§è¡Œæ—¶æŒ‰ç…§ä»¥ä¸‹é¡ºåºä¾æ¬¡æ‰§è¡Œ</p>\n</blockquote>\n<h3 id=\"tree-diff\"><a href=\"#tree-diff\" class=\"headerlink\" title=\"tree diff\"></a>tree diff</h3><blockquote>\n<p><code>tree diff</code> æ˜¯å¯¹æ ‘çš„æ¯ä¸€å±‚è¿›è¡Œéå†,å¦‚æœæŸä¸ªç»„ä»¶ä¸å­˜åœ¨äº†ï¼Œåˆ™ä¼šç›´æ¥é”€æ¯ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚å›¾æ‰€ç¤ºï¼Œå·¦è¾¹æ˜¯æ—§å±ï¼Œå³è¾¹æ˜¯æ–°å±ï¼Œç¬¬ä¸€å±‚æ˜¯ <code>R</code> ç»„ä»¶ï¼Œä¸€æ¨¡ä¸€æ ·ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼›<br>ç¬¬äºŒå±‚è¿›å…¥ <code>Component DIFF</code>ï¼ŒåŒä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå‘ç° <code>A</code> ç»„ä»¶æ²¡æœ‰ï¼Œæ‰€ä»¥ç›´æ¥åˆ æ‰ <code>Aã€Bã€C</code> ç»„ä»¶ï¼›<br>ç»§ç»­ç¬¬ä¸‰å±‚ï¼Œé‡æ–°åˆ›å»º <code>Aã€Bã€C</code> ç»„ä»¶ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703948400-4b9d5cfa-ddf5-404f-83f0-7de2c979afd2.png#align=left&display=inline&height=317&margin=%5Bobject%20Object%5D&name=tree-diff.png&originHeight=317&originWidth=533&size=61410&status=done&style=none&width=533\" alt=\"tree-diff.png\"></p>\n<h3 id=\"component-diff\"><a href=\"#component-diff\" class=\"headerlink\" title=\"component diff\"></a>component diff</h3><blockquote>\n<p>å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€å±‚éå†å®Œï¼Œè¿›è¡Œç¬¬äºŒå±‚éå†æ—¶ï¼ŒD å’Œ G ç»„ä»¶æ˜¯ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œä¸åŒç±»å‹ç»„ä»¶ç›´æ¥è¿›è¡Œæ›¿æ¢ï¼Œå°† D åˆ æ‰ï¼Œå†å°† <code>G</code> é‡å»ºã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703964946-362729fd-486b-461b-8210-c191053da87c.png#align=left&display=inline&height=244&margin=%5Bobject%20Object%5D&name=component-diff.png&originHeight=244&originWidth=566&size=81300&status=done&style=none&width=566\" alt=\"component-diff.png\"></p>\n<h3 id=\"element-diff\"><a href=\"#element-diff\" class=\"headerlink\" title=\"element diff\"></a>element diff</h3><blockquote>\n<p><code>Element DIFF</code> ç´§æ¥ç€ä»¥ä¸Šç»Ÿä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå¸¸è§ç±»å‹å°±æ˜¯åˆ—è¡¨ã€‚åŒä¸€ä¸ªåˆ—è¡¨ç”±æ—§å˜æ–°æœ‰ä¸‰ç§è¡Œä¸ºï¼Œæ’å…¥ã€ç§»åŠ¨å’Œåˆ é™¤ï¼Œå®ƒçš„æ¯”è¾ƒç­–ç•¥æ˜¯å¯¹äºæ¯ä¸€ä¸ªåˆ—è¡¨æŒ‡å®š <code>key</code>ï¼Œå…ˆå°†æ‰€æœ‰åˆ—è¡¨éå†ä¸€éï¼Œç¡®å®šè¦æ–°å¢å’Œåˆ é™¤çš„ï¼Œå†ç¡®å®šéœ€è¦ç§»åŠ¨çš„ã€‚<br>å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€æ­¥å°† <code>D</code> åˆ æ‰ï¼Œç¬¬äºŒæ­¥å¢åŠ  <code>E</code>ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ <code>A</code> å’Œ <code>B</code> åªéœ€è¦ç§»åŠ¨ä½ç½®å³å¯ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703980058-5f99c653-2a0a-46c4-9bb5-f1af80d45afe.png#align=left&display=inline&height=331&margin=%5Bobject%20Object%5D&name=element-diff.png&originHeight=331&originWidth=523&size=81565&status=done&style=none&width=523\" alt=\"element-diff.png\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"ç»“æ„å›¾\"><a href=\"#ç»“æ„å›¾\" class=\"headerlink\" title=\"ç»“æ„å›¾\"></a>ç»“æ„å›¾</h2><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703926503-0a8b70ad-ee2b-4b15-9f24-cb3008e56d1e.png#align=left&display=inline&height=699&margin=%5Bobject%20Object%5D&name=%E7%BB%93%E6%9E%84%E5%9B%BE.png&originHeight=699&originWidth=1424&size=257532&status=done&style=none&width=1424\" alt=\"ç»“æ„å›¾.png\"></p>\n<h2 id=\"ä¸‰ä¸ªç»´åº¦\"><a href=\"#ä¸‰ä¸ªç»´åº¦\" class=\"headerlink\" title=\"ä¸‰ä¸ªç»´åº¦\"></a>ä¸‰ä¸ªç»´åº¦</h2><blockquote>\n<p>æ‰§è¡Œæ—¶æŒ‰ç…§ä»¥ä¸‹é¡ºåºä¾æ¬¡æ‰§è¡Œ</p>\n</blockquote>\n<h3 id=\"tree-diff\"><a href=\"#tree-diff\" class=\"headerlink\" title=\"tree diff\"></a>tree diff</h3><blockquote>\n<p><code>tree diff</code> æ˜¯å¯¹æ ‘çš„æ¯ä¸€å±‚è¿›è¡Œéå†,å¦‚æœæŸä¸ªç»„ä»¶ä¸å­˜åœ¨äº†ï¼Œåˆ™ä¼šç›´æ¥é”€æ¯ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚å›¾æ‰€ç¤ºï¼Œå·¦è¾¹æ˜¯æ—§å±ï¼Œå³è¾¹æ˜¯æ–°å±ï¼Œç¬¬ä¸€å±‚æ˜¯ <code>R</code> ç»„ä»¶ï¼Œä¸€æ¨¡ä¸€æ ·ï¼Œä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼›<br>ç¬¬äºŒå±‚è¿›å…¥ <code>Component DIFF</code>ï¼ŒåŒä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå‘ç° <code>A</code> ç»„ä»¶æ²¡æœ‰ï¼Œæ‰€ä»¥ç›´æ¥åˆ æ‰ <code>Aã€Bã€C</code> ç»„ä»¶ï¼›<br>ç»§ç»­ç¬¬ä¸‰å±‚ï¼Œé‡æ–°åˆ›å»º <code>Aã€Bã€C</code> ç»„ä»¶ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703948400-4b9d5cfa-ddf5-404f-83f0-7de2c979afd2.png#align=left&display=inline&height=317&margin=%5Bobject%20Object%5D&name=tree-diff.png&originHeight=317&originWidth=533&size=61410&status=done&style=none&width=533\" alt=\"tree-diff.png\"></p>\n<h3 id=\"component-diff\"><a href=\"#component-diff\" class=\"headerlink\" title=\"component diff\"></a>component diff</h3><blockquote>\n<p>å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€å±‚éå†å®Œï¼Œè¿›è¡Œç¬¬äºŒå±‚éå†æ—¶ï¼ŒD å’Œ G ç»„ä»¶æ˜¯ä¸åŒç±»å‹çš„ç»„ä»¶ï¼Œä¸åŒç±»å‹ç»„ä»¶ç›´æ¥è¿›è¡Œæ›¿æ¢ï¼Œå°† D åˆ æ‰ï¼Œå†å°† <code>G</code> é‡å»ºã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703964946-362729fd-486b-461b-8210-c191053da87c.png#align=left&display=inline&height=244&margin=%5Bobject%20Object%5D&name=component-diff.png&originHeight=244&originWidth=566&size=81300&status=done&style=none&width=566\" alt=\"component-diff.png\"></p>\n<h3 id=\"element-diff\"><a href=\"#element-diff\" class=\"headerlink\" title=\"element diff\"></a>element diff</h3><blockquote>\n<p><code>Element DIFF</code> ç´§æ¥ç€ä»¥ä¸Šç»Ÿä¸€ç±»å‹ç»„ä»¶ç»§ç»­æ¯”è¾ƒä¸‹å»ï¼Œå¸¸è§ç±»å‹å°±æ˜¯åˆ—è¡¨ã€‚åŒä¸€ä¸ªåˆ—è¡¨ç”±æ—§å˜æ–°æœ‰ä¸‰ç§è¡Œä¸ºï¼Œæ’å…¥ã€ç§»åŠ¨å’Œåˆ é™¤ï¼Œå®ƒçš„æ¯”è¾ƒç­–ç•¥æ˜¯å¯¹äºæ¯ä¸€ä¸ªåˆ—è¡¨æŒ‡å®š <code>key</code>ï¼Œå…ˆå°†æ‰€æœ‰åˆ—è¡¨éå†ä¸€éï¼Œç¡®å®šè¦æ–°å¢å’Œåˆ é™¤çš„ï¼Œå†ç¡®å®šéœ€è¦ç§»åŠ¨çš„ã€‚<br>å¦‚å›¾æ‰€ç¤ºï¼Œç¬¬ä¸€æ­¥å°† <code>D</code> åˆ æ‰ï¼Œç¬¬äºŒæ­¥å¢åŠ  <code>E</code>ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ <code>A</code> å’Œ <code>B</code> åªéœ€è¦ç§»åŠ¨ä½ç½®å³å¯ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703980058-5f99c653-2a0a-46c4-9bb5-f1af80d45afe.png#align=left&display=inline&height=331&margin=%5Bobject%20Object%5D&name=element-diff.png&originHeight=331&originWidth=523&size=81565&status=done&style=none&width=523\" alt=\"element-diff.png\"></p>\n"},{"title":"Vue2 æ•°æ®é©±åŠ¨","date":"2020-07-20T16:00:00.000Z","_content":"\n## ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\n\n> å½“æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œç”¨æˆ·ç•Œé¢å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå¹¶ä¸”å¼€å‘è€…ä¸éœ€è¦å»æ‰‹åŠ¨æ“ä½œ `dom`\n\n## å®ç°åŸç†\n\n- `vue` åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹å®ä¾‹åŒ–å¯¹è±¡é€‰é¡¹ä¸­çš„ `data` é€‰é¡¹è¿›è¡Œéå†,éå†å…¶æ‰€æœ‰çš„å±æ€§å¹¶ä½¿ç”¨ `Object.defineProperty` æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬åŒ–æˆ `getter/setter`ã€‚\n- äºæ­¤åŒæ—¶ï¼Œæ¯ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª `watcher` å®ä¾‹å¯¹è±¡ï¼Œä»–ä¼šåœ¨æ¨¡æ¿ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç”¨ `getter` å»è®¿é—® `data` ä¸­çš„å±æ€§ï¼Œ`watcher` æ­¤æ—¶å°±ä¼šæŠŠç”¨åˆ°çš„ `data` å±æ€§è®°ä¸ºä¾èµ–ï¼Œè¿™æ ·å°±å»ºç«‹äº†è§†å›¾ä¸æ•°æ®ä¹‹é—´çš„è”ç³»ã€‚\n- ä¹‹åå½“æˆ‘ä»¬æ¸²æŸ“è§†å›¾çš„æ•°æ®ä¾èµ–å‘ç”Ÿæ”¹å˜ï¼ˆå³æ•°æ®çš„ `setter` è¢«è°ƒç”¨ï¼‰çš„æ—¶å€™ï¼Œ`watcher` ä¼šå¯¹æ¯”å‰åä¸¤ä¸ªçš„æ•°å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œç„¶åç¡®å®šæ˜¯å¦é€šçŸ¥è§†å›¾è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚\n\n## é€šä¿—åŸç†\n\n- åœ¨æ™®é€š `HTML` æ¨¡æ¿ä¸­ä½¿ç”¨ç‰¹æ®Šè¯­æ³•å°† `DOM` â€œç»‘å®šâ€åˆ°åº•å±‚æ•°æ®ã€‚\n- ä¸€æ—¦åˆ›å»ºäº†ç»‘å®šï¼Œ`DOM` å°†ä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚\n- æ¯å½“ä¿®æ”¹äº†æ•°æ®ï¼Œ`DOM` ä¾¿ç›¸åº”åœ°æ›´æ–°ã€‚\n","source":"_posts/å‰ç«¯/Vue2 æ•°æ®é©±åŠ¨.md","raw":"---\ntitle: Vue2 æ•°æ®é©±åŠ¨\ndate: 2020-07-21\ncategories: [å‰ç«¯, vue]\ntags:\n  - æ•°æ®é©±åŠ¨\n---\n\n## ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\n\n> å½“æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œç”¨æˆ·ç•Œé¢å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå¹¶ä¸”å¼€å‘è€…ä¸éœ€è¦å»æ‰‹åŠ¨æ“ä½œ `dom`\n\n## å®ç°åŸç†\n\n- `vue` åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹å®ä¾‹åŒ–å¯¹è±¡é€‰é¡¹ä¸­çš„ `data` é€‰é¡¹è¿›è¡Œéå†,éå†å…¶æ‰€æœ‰çš„å±æ€§å¹¶ä½¿ç”¨ `Object.defineProperty` æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬åŒ–æˆ `getter/setter`ã€‚\n- äºæ­¤åŒæ—¶ï¼Œæ¯ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª `watcher` å®ä¾‹å¯¹è±¡ï¼Œä»–ä¼šåœ¨æ¨¡æ¿ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç”¨ `getter` å»è®¿é—® `data` ä¸­çš„å±æ€§ï¼Œ`watcher` æ­¤æ—¶å°±ä¼šæŠŠç”¨åˆ°çš„ `data` å±æ€§è®°ä¸ºä¾èµ–ï¼Œè¿™æ ·å°±å»ºç«‹äº†è§†å›¾ä¸æ•°æ®ä¹‹é—´çš„è”ç³»ã€‚\n- ä¹‹åå½“æˆ‘ä»¬æ¸²æŸ“è§†å›¾çš„æ•°æ®ä¾èµ–å‘ç”Ÿæ”¹å˜ï¼ˆå³æ•°æ®çš„ `setter` è¢«è°ƒç”¨ï¼‰çš„æ—¶å€™ï¼Œ`watcher` ä¼šå¯¹æ¯”å‰åä¸¤ä¸ªçš„æ•°å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œç„¶åç¡®å®šæ˜¯å¦é€šçŸ¥è§†å›¾è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚\n\n## é€šä¿—åŸç†\n\n- åœ¨æ™®é€š `HTML` æ¨¡æ¿ä¸­ä½¿ç”¨ç‰¹æ®Šè¯­æ³•å°† `DOM` â€œç»‘å®šâ€åˆ°åº•å±‚æ•°æ®ã€‚\n- ä¸€æ—¦åˆ›å»ºäº†ç»‘å®šï¼Œ`DOM` å°†ä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚\n- æ¯å½“ä¿®æ”¹äº†æ•°æ®ï¼Œ`DOM` ä¾¿ç›¸åº”åœ°æ›´æ–°ã€‚\n","slug":"å‰ç«¯/Vue2 æ•°æ®é©±åŠ¨","published":1,"updated":"2021-04-07T07:29:23.605Z","_id":"ckn7476ae0021yx7y45at6zsv","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ</h2><blockquote>\n<p>å½“æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œç”¨æˆ·ç•Œé¢å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå¹¶ä¸”å¼€å‘è€…ä¸éœ€è¦å»æ‰‹åŠ¨æ“ä½œ <code>dom</code></p>\n</blockquote>\n<h2 id=\"å®ç°åŸç†\"><a href=\"#å®ç°åŸç†\" class=\"headerlink\" title=\"å®ç°åŸç†\"></a>å®ç°åŸç†</h2><ul>\n<li><code>vue</code> åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹å®ä¾‹åŒ–å¯¹è±¡é€‰é¡¹ä¸­çš„ <code>data</code> é€‰é¡¹è¿›è¡Œéå†,éå†å…¶æ‰€æœ‰çš„å±æ€§å¹¶ä½¿ç”¨ <code>Object.defineProperty</code> æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬åŒ–æˆ <code>getter/setter</code>ã€‚</li>\n<li>äºæ­¤åŒæ—¶ï¼Œæ¯ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>watcher</code> å®ä¾‹å¯¹è±¡ï¼Œä»–ä¼šåœ¨æ¨¡æ¿ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç”¨ <code>getter</code> å»è®¿é—® <code>data</code> ä¸­çš„å±æ€§ï¼Œ<code>watcher</code> æ­¤æ—¶å°±ä¼šæŠŠç”¨åˆ°çš„ <code>data</code> å±æ€§è®°ä¸ºä¾èµ–ï¼Œè¿™æ ·å°±å»ºç«‹äº†è§†å›¾ä¸æ•°æ®ä¹‹é—´çš„è”ç³»ã€‚</li>\n<li>ä¹‹åå½“æˆ‘ä»¬æ¸²æŸ“è§†å›¾çš„æ•°æ®ä¾èµ–å‘ç”Ÿæ”¹å˜ï¼ˆå³æ•°æ®çš„ <code>setter</code> è¢«è°ƒç”¨ï¼‰çš„æ—¶å€™ï¼Œ<code>watcher</code> ä¼šå¯¹æ¯”å‰åä¸¤ä¸ªçš„æ•°å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œç„¶åç¡®å®šæ˜¯å¦é€šçŸ¥è§†å›¾è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚</li>\n</ul>\n<h2 id=\"é€šä¿—åŸç†\"><a href=\"#é€šä¿—åŸç†\" class=\"headerlink\" title=\"é€šä¿—åŸç†\"></a>é€šä¿—åŸç†</h2><ul>\n<li>åœ¨æ™®é€š <code>HTML</code> æ¨¡æ¿ä¸­ä½¿ç”¨ç‰¹æ®Šè¯­æ³•å°† <code>DOM</code> â€œç»‘å®šâ€åˆ°åº•å±‚æ•°æ®ã€‚</li>\n<li>ä¸€æ—¦åˆ›å»ºäº†ç»‘å®šï¼Œ<code>DOM</code> å°†ä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚</li>\n<li>æ¯å½“ä¿®æ”¹äº†æ•°æ®ï¼Œ<code>DOM</code> ä¾¿ç›¸åº”åœ°æ›´æ–°ã€‚</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\"><a href=\"#ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ\"></a>ä»€ä¹ˆæ˜¯æ•°æ®é©±åŠ¨ï¼Ÿ</h2><blockquote>\n<p>å½“æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œç”¨æˆ·ç•Œé¢å‘ç”Ÿç›¸åº”çš„å˜åŒ–ï¼Œå¹¶ä¸”å¼€å‘è€…ä¸éœ€è¦å»æ‰‹åŠ¨æ“ä½œ <code>dom</code></p>\n</blockquote>\n<h2 id=\"å®ç°åŸç†\"><a href=\"#å®ç°åŸç†\" class=\"headerlink\" title=\"å®ç°åŸç†\"></a>å®ç°åŸç†</h2><ul>\n<li><code>vue</code> åœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹å®ä¾‹åŒ–å¯¹è±¡é€‰é¡¹ä¸­çš„ <code>data</code> é€‰é¡¹è¿›è¡Œéå†,éå†å…¶æ‰€æœ‰çš„å±æ€§å¹¶ä½¿ç”¨ <code>Object.defineProperty</code> æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬åŒ–æˆ <code>getter/setter</code>ã€‚</li>\n<li>äºæ­¤åŒæ—¶ï¼Œæ¯ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <code>watcher</code> å®ä¾‹å¯¹è±¡ï¼Œä»–ä¼šåœ¨æ¨¡æ¿ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç”¨ <code>getter</code> å»è®¿é—® <code>data</code> ä¸­çš„å±æ€§ï¼Œ<code>watcher</code> æ­¤æ—¶å°±ä¼šæŠŠç”¨åˆ°çš„ <code>data</code> å±æ€§è®°ä¸ºä¾èµ–ï¼Œè¿™æ ·å°±å»ºç«‹äº†è§†å›¾ä¸æ•°æ®ä¹‹é—´çš„è”ç³»ã€‚</li>\n<li>ä¹‹åå½“æˆ‘ä»¬æ¸²æŸ“è§†å›¾çš„æ•°æ®ä¾èµ–å‘ç”Ÿæ”¹å˜ï¼ˆå³æ•°æ®çš„ <code>setter</code> è¢«è°ƒç”¨ï¼‰çš„æ—¶å€™ï¼Œ<code>watcher</code> ä¼šå¯¹æ¯”å‰åä¸¤ä¸ªçš„æ•°å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œç„¶åç¡®å®šæ˜¯å¦é€šçŸ¥è§†å›¾è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚</li>\n</ul>\n<h2 id=\"é€šä¿—åŸç†\"><a href=\"#é€šä¿—åŸç†\" class=\"headerlink\" title=\"é€šä¿—åŸç†\"></a>é€šä¿—åŸç†</h2><ul>\n<li>åœ¨æ™®é€š <code>HTML</code> æ¨¡æ¿ä¸­ä½¿ç”¨ç‰¹æ®Šè¯­æ³•å°† <code>DOM</code> â€œç»‘å®šâ€åˆ°åº•å±‚æ•°æ®ã€‚</li>\n<li>ä¸€æ—¦åˆ›å»ºäº†ç»‘å®šï¼Œ<code>DOM</code> å°†ä¸æ•°æ®ä¿æŒåŒæ­¥ã€‚</li>\n<li>æ¯å½“ä¿®æ”¹äº†æ•°æ®ï¼Œ<code>DOM</code> ä¾¿ç›¸åº”åœ°æ›´æ–°ã€‚</li>\n</ul>\n"},{"title":"Vue2 è™šæ‹Ÿ dom","date":"2020-07-17T16:00:00.000Z","_content":"\n## å…³é”®ç‚¹\n\n### 1.Vnode å¯¹è±¡\n\n> ä¸€ä¸ª `VNode` çš„å®ä¾‹å¯¹è±¡åŒ…å«äº†ä»¥ä¸‹å±æ€§:\n\n- `tag`: å½“å‰èŠ‚ç‚¹çš„æ ‡ç­¾å\n- `data`: å½“å‰èŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡ï¼Œå…·ä½“åŒ…å«å“ªäº›å­—æ®µå¯ä»¥å‚è€ƒ `vue` æºç  `types/vnode.d.ts` ä¸­å¯¹ `VNodeData` çš„å®šä¹‰\n- `children`: æ•°ç»„ç±»å‹ï¼ŒåŒ…å«äº†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹\n- `text`: å½“å‰èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œä¸€èˆ¬æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ä¼šæœ‰è¯¥å±æ€§\n- `elm`: å½“å‰è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„çœŸå®çš„ `dom` èŠ‚ç‚¹\n- `ns`: èŠ‚ç‚¹çš„ `namespace`\n- `context`: ç¼–è¯‘ä½œç”¨åŸŸ\n- `functionalContext`: å‡½æ•°åŒ–ç»„ä»¶çš„ä½œç”¨åŸŸ\n- `key`: èŠ‚ç‚¹çš„ `key` å±æ€§ï¼Œç”¨äºä½œä¸ºèŠ‚ç‚¹çš„æ ‡è¯†ï¼Œæœ‰åˆ©äº `patch` çš„ä¼˜åŒ–\n- `componentOptions`: åˆ›å»ºç»„ä»¶å®ä¾‹æ—¶ä¼šç”¨åˆ°çš„é€‰é¡¹ä¿¡æ¯\n- `child`: å½“å‰èŠ‚ç‚¹å¯¹åº”çš„ç»„ä»¶å®ä¾‹\n- `parent`: ç»„ä»¶çš„å ä½èŠ‚ç‚¹\n- `raw`: `raw html`\n- `isStatic`: é™æ€èŠ‚ç‚¹çš„æ ‡è¯†\n- `isRootInsert`: æ˜¯å¦ä½œä¸ºæ ¹èŠ‚ç‚¹æ’å…¥ï¼Œè¢« `<transition>` åŒ…è£¹çš„èŠ‚ç‚¹ï¼Œè¯¥å±æ€§çš„å€¼ä¸º `false`\n- `isComment`: å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹\n- `isCloned`: å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå…‹éš†èŠ‚ç‚¹\n- `isOnce`: å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰ `v-once` æŒ‡ä»¤\n\n### 2.Vnode åˆ†ç±»\n\n- ç®€ä»‹\n\n> `VNode` å¯ä»¥ç†è§£ä¸º `vue` æ¡†æ¶çš„è™šæ‹Ÿ `dom` çš„åŸºç±»ï¼Œé€šè¿‡ `new` å®ä¾‹åŒ–çš„ `VNode` å¤§è‡´å¯ä»¥åˆ†ä¸ºå‡ ç±»\n\n- `EmptyVNode`: æ²¡æœ‰å†…å®¹çš„æ³¨é‡ŠèŠ‚ç‚¹\n- `TextVNode`: æ–‡æœ¬èŠ‚ç‚¹\n- `ElementVNode`: æ™®é€šå…ƒç´ èŠ‚ç‚¹\n- `ComponentVNode`: ç»„ä»¶èŠ‚ç‚¹\n- `CloneVNode`: å…‹éš†èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ä»¥ä¸Šä»»æ„ç±»å‹çš„èŠ‚ç‚¹ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äº `isCloned` å±æ€§ä¸º `true`\n\n### 3.createElement è§£æ\n\n```javascript\nconst SIMPLE_NORMALIZE = 1;\nconst ALWAYS_NORMALIZE = 2;\n\nfunction createElement(context, tag, data, children, normalizationType, alwaysNormalize) {\n  // å…¼å®¹ä¸ä¼ dataçš„æƒ…å†µ\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  // å¦‚æœalwaysNormalizeæ˜¯true\n  // é‚£ä¹ˆnormalizationTypeåº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ALWAYS_NORMALIZEçš„å€¼\n  if (alwaysNormalize) normalizationType = ALWAYS_NORMALIZE;\n  // è°ƒç”¨_createElementåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹\n  return _createElement(context, tag, data, children, normalizationType);\n}\n\nfunction _createElement(context, tag, data, children, normalizationType) {\n  /**\n   * å¦‚æœå­˜åœ¨data.__ob__ï¼Œè¯´æ˜dataæ˜¯è¢«Observerè§‚å¯Ÿçš„æ•°æ®\n   * ä¸èƒ½ç”¨ä½œè™šæ‹ŸèŠ‚ç‚¹çš„data\n   * éœ€è¦æŠ›å‡ºè­¦å‘Šï¼Œå¹¶è¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹\n   *\n   * è¢«ç›‘æ§çš„dataä¸èƒ½è¢«ç”¨ä½œvnodeæ¸²æŸ“çš„æ•°æ®çš„åŸå› æ˜¯ï¼š\n   * dataåœ¨vnodeæ¸²æŸ“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ”¹å˜ï¼Œè¿™æ ·ä¼šè§¦å‘ç›‘æ§ï¼Œå¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„æ“ä½œ\n   */\n  if (data && data.__ob__) {\n    process.env.NODE_ENV !== \"production\" && warn(`Avoid using observed data object as vnode data: ${JSON.stringify(data)}\\n` + \"Always create fresh vnode data objects in each render!\", context);\n    return createEmptyVNode();\n  }\n  // å½“ç»„ä»¶çš„iså±æ€§è¢«è®¾ç½®ä¸ºä¸€ä¸ªfalsyçš„å€¼\n  // Vueå°†ä¸ä¼šçŸ¥é“è¦æŠŠè¿™ä¸ªç»„ä»¶æ¸²æŸ“æˆä»€ä¹ˆ\n  // æ‰€ä»¥æ¸²æŸ“ä¸€ä¸ªç©ºèŠ‚ç‚¹\n  if (!tag) {\n    return createEmptyVNode();\n  }\n  // ä½œç”¨åŸŸæ’æ§½\n  if (Array.isArray(children) && typeof children[0] === \"function\") {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  // æ ¹æ®normalizationTypeçš„å€¼ï¼Œé€‰æ‹©ä¸åŒçš„å¤„ç†æ–¹æ³•\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  let vnode, ns;\n  // å¦‚æœæ ‡ç­¾åæ˜¯å­—ç¬¦ä¸²ç±»å‹\n  if (typeof tag === \"string\") {\n    let Ctor;\n    // è·å–æ ‡ç­¾åçš„å‘½åç©ºé—´\n    ns = config.getTagNamespace(tag);\n    // åˆ¤æ–­æ˜¯å¦ä¸ºä¿ç•™æ ‡ç­¾\n    if (config.isReservedTag(tag)) {\n      // å¦‚æœæ˜¯ä¿ç•™æ ‡ç­¾,å°±åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„vnode\n      vnode = new VNode(config.parsePlatformTagName(tag), data, children, undefined, undefined, context);\n      // å¦‚æœä¸æ˜¯ä¿ç•™æ ‡ç­¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å°è¯•ä»vmçš„componentsä¸ŠæŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰\n    } else if ((Ctor = resolveAsset(context.$options, \"components\", tag))) {\n      // å¦‚æœæ‰¾åˆ°äº†è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰ï¼Œå°±ä»¥æ­¤åˆ›å»ºè™šæ‹Ÿç»„ä»¶èŠ‚ç‚¹\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // å…œåº•æ–¹æ¡ˆï¼Œæ­£å¸¸åˆ›å»ºä¸€ä¸ªvnode\n      vnode = new VNode(tag, data, children, undefined, undefined, context);\n    }\n    // å½“tagä¸æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¤ä¸ºtagæ˜¯ç»„ä»¶çš„æ„é€ ç±»\n    // æ‰€ä»¥ç›´æ¥åˆ›å»º\n  } else {\n    vnode = createComponent(tag, data, context, children);\n  }\n  // å¦‚æœæœ‰vnode\n  if (vnode) {\n    // å¦‚æœæœ‰namespaceï¼Œå°±åº”ç”¨ä¸‹namespaceï¼Œç„¶åè¿”å›vnode\n    if (ns) applyNS(vnode, ns);\n    return vnode;\n    // å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹\n  } else {\n    return createEmptyVNode();\n  }\n}\n```\n\n### 4.patch åŸç†\n\n#### patch å‡½æ•°æ¥æ”¶ 6 ä¸ªå‚æ•°\n\n1. `oldVnode`: æ—§çš„è™šæ‹ŸèŠ‚ç‚¹æˆ–æ—§çš„çœŸå® `dom` èŠ‚ç‚¹\n2. `vnode`: æ–°çš„è™šæ‹ŸèŠ‚ç‚¹\n3. `hydrating`: æ˜¯å¦è¦è·ŸçœŸå® `dom` æ··åˆ\n4. `removeOnly`: ç‰¹æ®Š `flag`ï¼Œç”¨äº `<transition-group>` ç»„ä»¶\n5. `parentElm`: çˆ¶èŠ‚ç‚¹\n6. `refElm`: æ–°èŠ‚ç‚¹å°†æ’å…¥åˆ° `refElm` ä¹‹å‰\n\n#### patch çš„ç­–ç•¥\n\n- å¦‚æœ`vnode` ä¸å­˜åœ¨ä½†æ˜¯ `oldVnode` å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦é”€æ¯è€èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ `invokeDestroyHook(oldVnode)` æ¥è¿›è¡Œé”€æ¯\n- å¦‚æœ `oldVnode` ä¸å­˜åœ¨ä½†æ˜¯ `vnode` å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ `createElm` æ¥åˆ›å»ºæ–°èŠ‚ç‚¹\n- å½“ `vnode` å’Œ `oldVnode` éƒ½å­˜åœ¨æ—¶\n  - å¦‚æœ `oldVnode` å’Œ `vnode` æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±è°ƒç”¨ `patchVnode` æ¥è¿›è¡Œ `patch`\n  - å½“ `vnode` å’Œ `oldVnode` ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœ `oldVnode` æ˜¯çœŸå® `dom` èŠ‚ç‚¹ æˆ– `hydrating` è®¾ç½®ä¸º`true`ï¼Œéœ€è¦ç”¨ `hydrate` å‡½æ•°å°†è™šæ‹Ÿ `dom` å’ŒçœŸå® `dom` è¿›è¡Œæ˜ å°„ï¼Œç„¶åå°† `oldVnode` è®¾ç½®ä¸ºå¯¹åº”çš„è™šæ‹Ÿ `dom`ï¼Œæ‰¾åˆ° `oldVnode.elm` çš„çˆ¶èŠ‚ç‚¹ï¼Œæ ¹æ® `vnode` åˆ›å»ºä¸€ä¸ªçœŸå® `dom` èŠ‚ç‚¹å¹¶æ’å…¥åˆ°è¯¥çˆ¶èŠ‚ç‚¹ä¸­ `oldVnode.elm` çš„ä½ç½®\n\n> è¿™é‡Œé¢å€¼å¾—ä¸€æçš„æ˜¯ `patchVnode` å‡½æ•°ï¼Œå› ä¸ºçœŸæ­£çš„ `patch` ç®—æ³•æ˜¯ç”±å®ƒæ¥å®ç°çš„ï¼ˆ`patchVnode` ä¸­æ›´æ–°å­èŠ‚ç‚¹çš„ç®—æ³•å…¶å®æ˜¯åœ¨ `updateChildren` å‡½æ•°ä¸­å®ç°çš„\n\n#### patchVnode ç®—æ³•\n\n1. å¦‚æœ `oldVnode` è·Ÿ `vnode` å®Œå…¨ä¸€è‡´ï¼Œé‚£ä¹ˆä¸éœ€è¦åšä»»ä½•äº‹æƒ…\n2. å¦‚æœ `oldVnode` è·Ÿ `vnode` éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œä¸”å…·æœ‰ç›¸åŒçš„ `key`ï¼Œå½“ `vnode` æ˜¯å…‹éš†èŠ‚ç‚¹æˆ–æ˜¯ `v-once` æŒ‡ä»¤æ§åˆ¶çš„èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦æŠŠ `oldVnode.elm` å’Œ `oldVnode.child` éƒ½å¤åˆ¶åˆ° `vnode` ä¸Šï¼Œä¹Ÿä¸ç”¨å†æœ‰å…¶ä»–æ“ä½œ\n3. å¦åˆ™ï¼Œå¦‚æœ`vnode`ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹\n\n- å¦‚æœ `oldVnode`å’Œ `vnode` éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œä¸”åŒæ–¹çš„å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œå°±æ‰§è¡Œæ›´æ–°å­èŠ‚ç‚¹çš„æ“ä½œï¼ˆè¿™ä¸€éƒ¨åˆ†å…¶å®æ˜¯åœ¨ `updateChildren` å‡½æ•°ä¸­å®ç°ï¼‰ï¼Œç®—æ³•å¦‚ä¸‹:\n\n> åˆ†åˆ«è·å– `oldVnode` å’Œ `vnode` çš„ `firstChild`ã€`lastChild`ï¼Œèµ‹å€¼ç»™ `oldStartVnode`ã€`oldEndVnode`ã€`newStartVnode`ã€`newEndVnode`\n\n> å¦‚æœ `oldStartVnode` å’Œ `newStartVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œç„¶åå°† `oldStartVnode` å’Œ `newStartVnode` éƒ½è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom1.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704111320-57210d35-7b20-45f7-87b1-8a6a541754bc.png#align=left&display=inline&height=204&margin=%5Bobject%20Object%5D&name=virtual_dom1.png&originHeight=204&originWidth=667&size=20067&status=done&style=none&width=667)\n\n> å¦‚æœ `oldEndVnode` å’Œ `newEndVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œç„¶åå°† `oldEndVnode` å’Œ `newEndVnode` éƒ½è®¾ç½®ä¸ºä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom2.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704123342-e1a719db-cacd-4fe3-a4b5-730e73dec203.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=virtual_dom2.png&originHeight=221&originWidth=676&size=19741&status=done&style=none&width=676)\n\n> å¦‚æœ `oldStartVnode` å’Œ `newEndVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œå¦‚æœ `removeOnly` æ˜¯`false`ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ `oldStartVnode.elm` ç§»åŠ¨åˆ° `oldEndVnode.elm` ä¹‹åï¼Œç„¶åæŠŠ `oldStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`newEndVnode` è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹![virtual_dom3.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704137134-da7b6eab-d7ab-4e0d-bd3c-816548aa7050.png#align=left&display=inline&height=224&margin=%5Bobject%20Object%5D&name=virtual_dom3.png&originHeight=224&originWidth=826&size=24829&status=done&style=none&width=826)\n\n> å¦‚æœ `newStartVnode` å’Œ `oldEndVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œå¦‚æœ `removeOnly` æ˜¯ `false`ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ `oldEndVnode.elm` ç§»åŠ¨åˆ° `oldStartVnode.elm` ä¹‹å‰ï¼Œç„¶åæŠŠ `newStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`oldEndVnode` è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom4.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704166102-db7c7879-3e36-49db-9e96-9f587cfcb771.png#align=left&display=inline&height=214&margin=%5Bobject%20Object%5D&name=virtual_dom4.png&originHeight=214&originWidth=864&size=24556&status=done&style=none&width=864)\n\n> å¦‚æœä»¥ä¸Šéƒ½ä¸åŒ¹é…ï¼Œå°±å°è¯•åœ¨ `oldChildren` ä¸­å¯»æ‰¾è·Ÿ `newStartVnode` å…·æœ‰ç›¸åŒ `key` çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ç›¸åŒ `key`çš„èŠ‚ç‚¹ï¼Œè¯´æ˜ `newStartVnode` æ˜¯ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæŠŠ `newStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n\n> å¦‚æœä¸Šä¸€æ­¥æ‰¾åˆ°äº†è·Ÿ `newStartVnode` ç›¸åŒ `key` çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé€šè¿‡å…¶ä»–å±æ€§çš„æ¯”è¾ƒæ¥åˆ¤æ–­è¿™ 2 ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œå°±è°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œå¦‚æœ `removeOnly` æ˜¯ `false`ï¼Œå°±æŠŠ `newStartVnode.elm` æ’å…¥åˆ° `oldStartVnode.elm` ä¹‹å‰ï¼ŒæŠŠ `newStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom5.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704181185-2af64dae-c1a4-4505-aeeb-5ec7efad8930.png#align=left&display=inline&height=227&margin=%5Bobject%20Object%5D&name=virtual_dom5.png&originHeight=227&originWidth=869&size=24398&status=done&style=none&width=869)\n\n- å¦‚æœåªæœ‰ `oldVnode` æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±æŠŠè¿™äº›èŠ‚ç‚¹éƒ½åˆ é™¤\n- å¦‚æœåªæœ‰ `vnode` æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±åˆ›å»ºè¿™äº›å­èŠ‚ç‚¹\n- å¦‚æœ `oldVnodeå’Œvnode` éƒ½æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œä½†æ˜¯ `oldVnode` æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œå°±æŠŠ `vnode.elm` çš„æ–‡æœ¬è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²\n\n4. å¦‚æœ `vnode` æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œä½†æ˜¯ `vnode.text != oldVnode.text` æ—¶ï¼Œåªéœ€è¦æ›´æ–° `vnode.elm` çš„æ–‡æœ¬å†…å®¹å°±å¯ä»¥\n\n### ç”Ÿå‘½å‘¨æœŸ\n\n- `patch` æä¾›äº† `5` ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯\n  - `create`: åˆ›å»º `patch` æ—¶\n  - `activate`: æ¿€æ´»ç»„ä»¶æ—¶\n  - `update`: æ›´æ–°èŠ‚ç‚¹æ—¶\n  - `remove`: ç§»é™¤èŠ‚ç‚¹æ—¶\n  - `destroy`: é”€æ¯èŠ‚ç‚¹æ—¶\n- `vnode`ä¹Ÿæä¾›äº†ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯\n  - `init`: `vdom` åˆå§‹åŒ–æ—¶\n  - `create`: `vdom` åˆ›å»ºæ—¶\n  - `prepatch`: `patch` ä¹‹å‰\n  - `insert`: `vdom` æ’å…¥å\n  - `update`: `vdom` æ›´æ–°å‰\n  - `postpatch`: `patch` ä¹‹å\n  - `remove`: `vdom` ç§»é™¤æ—¶\n  - `destroy`: `vdom` é”€æ¯æ—¶\n","source":"_posts/å‰ç«¯/Vue2 è™šæ‹Ÿ dom.md","raw":"---\ntitle: Vue2 è™šæ‹Ÿ dom\ndate: 2020-07-18\ncategories: [å‰ç«¯, vue]\ntags:\n  - è™šæ‹Ÿ dom\n---\n\n## å…³é”®ç‚¹\n\n### 1.Vnode å¯¹è±¡\n\n> ä¸€ä¸ª `VNode` çš„å®ä¾‹å¯¹è±¡åŒ…å«äº†ä»¥ä¸‹å±æ€§:\n\n- `tag`: å½“å‰èŠ‚ç‚¹çš„æ ‡ç­¾å\n- `data`: å½“å‰èŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡ï¼Œå…·ä½“åŒ…å«å“ªäº›å­—æ®µå¯ä»¥å‚è€ƒ `vue` æºç  `types/vnode.d.ts` ä¸­å¯¹ `VNodeData` çš„å®šä¹‰\n- `children`: æ•°ç»„ç±»å‹ï¼ŒåŒ…å«äº†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹\n- `text`: å½“å‰èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œä¸€èˆ¬æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ä¼šæœ‰è¯¥å±æ€§\n- `elm`: å½“å‰è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„çœŸå®çš„ `dom` èŠ‚ç‚¹\n- `ns`: èŠ‚ç‚¹çš„ `namespace`\n- `context`: ç¼–è¯‘ä½œç”¨åŸŸ\n- `functionalContext`: å‡½æ•°åŒ–ç»„ä»¶çš„ä½œç”¨åŸŸ\n- `key`: èŠ‚ç‚¹çš„ `key` å±æ€§ï¼Œç”¨äºä½œä¸ºèŠ‚ç‚¹çš„æ ‡è¯†ï¼Œæœ‰åˆ©äº `patch` çš„ä¼˜åŒ–\n- `componentOptions`: åˆ›å»ºç»„ä»¶å®ä¾‹æ—¶ä¼šç”¨åˆ°çš„é€‰é¡¹ä¿¡æ¯\n- `child`: å½“å‰èŠ‚ç‚¹å¯¹åº”çš„ç»„ä»¶å®ä¾‹\n- `parent`: ç»„ä»¶çš„å ä½èŠ‚ç‚¹\n- `raw`: `raw html`\n- `isStatic`: é™æ€èŠ‚ç‚¹çš„æ ‡è¯†\n- `isRootInsert`: æ˜¯å¦ä½œä¸ºæ ¹èŠ‚ç‚¹æ’å…¥ï¼Œè¢« `<transition>` åŒ…è£¹çš„èŠ‚ç‚¹ï¼Œè¯¥å±æ€§çš„å€¼ä¸º `false`\n- `isComment`: å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹\n- `isCloned`: å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå…‹éš†èŠ‚ç‚¹\n- `isOnce`: å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰ `v-once` æŒ‡ä»¤\n\n### 2.Vnode åˆ†ç±»\n\n- ç®€ä»‹\n\n> `VNode` å¯ä»¥ç†è§£ä¸º `vue` æ¡†æ¶çš„è™šæ‹Ÿ `dom` çš„åŸºç±»ï¼Œé€šè¿‡ `new` å®ä¾‹åŒ–çš„ `VNode` å¤§è‡´å¯ä»¥åˆ†ä¸ºå‡ ç±»\n\n- `EmptyVNode`: æ²¡æœ‰å†…å®¹çš„æ³¨é‡ŠèŠ‚ç‚¹\n- `TextVNode`: æ–‡æœ¬èŠ‚ç‚¹\n- `ElementVNode`: æ™®é€šå…ƒç´ èŠ‚ç‚¹\n- `ComponentVNode`: ç»„ä»¶èŠ‚ç‚¹\n- `CloneVNode`: å…‹éš†èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ä»¥ä¸Šä»»æ„ç±»å‹çš„èŠ‚ç‚¹ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äº `isCloned` å±æ€§ä¸º `true`\n\n### 3.createElement è§£æ\n\n```javascript\nconst SIMPLE_NORMALIZE = 1;\nconst ALWAYS_NORMALIZE = 2;\n\nfunction createElement(context, tag, data, children, normalizationType, alwaysNormalize) {\n  // å…¼å®¹ä¸ä¼ dataçš„æƒ…å†µ\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  // å¦‚æœalwaysNormalizeæ˜¯true\n  // é‚£ä¹ˆnormalizationTypeåº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ALWAYS_NORMALIZEçš„å€¼\n  if (alwaysNormalize) normalizationType = ALWAYS_NORMALIZE;\n  // è°ƒç”¨_createElementåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹\n  return _createElement(context, tag, data, children, normalizationType);\n}\n\nfunction _createElement(context, tag, data, children, normalizationType) {\n  /**\n   * å¦‚æœå­˜åœ¨data.__ob__ï¼Œè¯´æ˜dataæ˜¯è¢«Observerè§‚å¯Ÿçš„æ•°æ®\n   * ä¸èƒ½ç”¨ä½œè™šæ‹ŸèŠ‚ç‚¹çš„data\n   * éœ€è¦æŠ›å‡ºè­¦å‘Šï¼Œå¹¶è¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹\n   *\n   * è¢«ç›‘æ§çš„dataä¸èƒ½è¢«ç”¨ä½œvnodeæ¸²æŸ“çš„æ•°æ®çš„åŸå› æ˜¯ï¼š\n   * dataåœ¨vnodeæ¸²æŸ“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ”¹å˜ï¼Œè¿™æ ·ä¼šè§¦å‘ç›‘æ§ï¼Œå¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„æ“ä½œ\n   */\n  if (data && data.__ob__) {\n    process.env.NODE_ENV !== \"production\" && warn(`Avoid using observed data object as vnode data: ${JSON.stringify(data)}\\n` + \"Always create fresh vnode data objects in each render!\", context);\n    return createEmptyVNode();\n  }\n  // å½“ç»„ä»¶çš„iså±æ€§è¢«è®¾ç½®ä¸ºä¸€ä¸ªfalsyçš„å€¼\n  // Vueå°†ä¸ä¼šçŸ¥é“è¦æŠŠè¿™ä¸ªç»„ä»¶æ¸²æŸ“æˆä»€ä¹ˆ\n  // æ‰€ä»¥æ¸²æŸ“ä¸€ä¸ªç©ºèŠ‚ç‚¹\n  if (!tag) {\n    return createEmptyVNode();\n  }\n  // ä½œç”¨åŸŸæ’æ§½\n  if (Array.isArray(children) && typeof children[0] === \"function\") {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  // æ ¹æ®normalizationTypeçš„å€¼ï¼Œé€‰æ‹©ä¸åŒçš„å¤„ç†æ–¹æ³•\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  let vnode, ns;\n  // å¦‚æœæ ‡ç­¾åæ˜¯å­—ç¬¦ä¸²ç±»å‹\n  if (typeof tag === \"string\") {\n    let Ctor;\n    // è·å–æ ‡ç­¾åçš„å‘½åç©ºé—´\n    ns = config.getTagNamespace(tag);\n    // åˆ¤æ–­æ˜¯å¦ä¸ºä¿ç•™æ ‡ç­¾\n    if (config.isReservedTag(tag)) {\n      // å¦‚æœæ˜¯ä¿ç•™æ ‡ç­¾,å°±åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„vnode\n      vnode = new VNode(config.parsePlatformTagName(tag), data, children, undefined, undefined, context);\n      // å¦‚æœä¸æ˜¯ä¿ç•™æ ‡ç­¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å°è¯•ä»vmçš„componentsä¸ŠæŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰\n    } else if ((Ctor = resolveAsset(context.$options, \"components\", tag))) {\n      // å¦‚æœæ‰¾åˆ°äº†è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰ï¼Œå°±ä»¥æ­¤åˆ›å»ºè™šæ‹Ÿç»„ä»¶èŠ‚ç‚¹\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // å…œåº•æ–¹æ¡ˆï¼Œæ­£å¸¸åˆ›å»ºä¸€ä¸ªvnode\n      vnode = new VNode(tag, data, children, undefined, undefined, context);\n    }\n    // å½“tagä¸æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¤ä¸ºtagæ˜¯ç»„ä»¶çš„æ„é€ ç±»\n    // æ‰€ä»¥ç›´æ¥åˆ›å»º\n  } else {\n    vnode = createComponent(tag, data, context, children);\n  }\n  // å¦‚æœæœ‰vnode\n  if (vnode) {\n    // å¦‚æœæœ‰namespaceï¼Œå°±åº”ç”¨ä¸‹namespaceï¼Œç„¶åè¿”å›vnode\n    if (ns) applyNS(vnode, ns);\n    return vnode;\n    // å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹\n  } else {\n    return createEmptyVNode();\n  }\n}\n```\n\n### 4.patch åŸç†\n\n#### patch å‡½æ•°æ¥æ”¶ 6 ä¸ªå‚æ•°\n\n1. `oldVnode`: æ—§çš„è™šæ‹ŸèŠ‚ç‚¹æˆ–æ—§çš„çœŸå® `dom` èŠ‚ç‚¹\n2. `vnode`: æ–°çš„è™šæ‹ŸèŠ‚ç‚¹\n3. `hydrating`: æ˜¯å¦è¦è·ŸçœŸå® `dom` æ··åˆ\n4. `removeOnly`: ç‰¹æ®Š `flag`ï¼Œç”¨äº `<transition-group>` ç»„ä»¶\n5. `parentElm`: çˆ¶èŠ‚ç‚¹\n6. `refElm`: æ–°èŠ‚ç‚¹å°†æ’å…¥åˆ° `refElm` ä¹‹å‰\n\n#### patch çš„ç­–ç•¥\n\n- å¦‚æœ`vnode` ä¸å­˜åœ¨ä½†æ˜¯ `oldVnode` å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦é”€æ¯è€èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ `invokeDestroyHook(oldVnode)` æ¥è¿›è¡Œé”€æ¯\n- å¦‚æœ `oldVnode` ä¸å­˜åœ¨ä½†æ˜¯ `vnode` å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ `createElm` æ¥åˆ›å»ºæ–°èŠ‚ç‚¹\n- å½“ `vnode` å’Œ `oldVnode` éƒ½å­˜åœ¨æ—¶\n  - å¦‚æœ `oldVnode` å’Œ `vnode` æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±è°ƒç”¨ `patchVnode` æ¥è¿›è¡Œ `patch`\n  - å½“ `vnode` å’Œ `oldVnode` ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœ `oldVnode` æ˜¯çœŸå® `dom` èŠ‚ç‚¹ æˆ– `hydrating` è®¾ç½®ä¸º`true`ï¼Œéœ€è¦ç”¨ `hydrate` å‡½æ•°å°†è™šæ‹Ÿ `dom` å’ŒçœŸå® `dom` è¿›è¡Œæ˜ å°„ï¼Œç„¶åå°† `oldVnode` è®¾ç½®ä¸ºå¯¹åº”çš„è™šæ‹Ÿ `dom`ï¼Œæ‰¾åˆ° `oldVnode.elm` çš„çˆ¶èŠ‚ç‚¹ï¼Œæ ¹æ® `vnode` åˆ›å»ºä¸€ä¸ªçœŸå® `dom` èŠ‚ç‚¹å¹¶æ’å…¥åˆ°è¯¥çˆ¶èŠ‚ç‚¹ä¸­ `oldVnode.elm` çš„ä½ç½®\n\n> è¿™é‡Œé¢å€¼å¾—ä¸€æçš„æ˜¯ `patchVnode` å‡½æ•°ï¼Œå› ä¸ºçœŸæ­£çš„ `patch` ç®—æ³•æ˜¯ç”±å®ƒæ¥å®ç°çš„ï¼ˆ`patchVnode` ä¸­æ›´æ–°å­èŠ‚ç‚¹çš„ç®—æ³•å…¶å®æ˜¯åœ¨ `updateChildren` å‡½æ•°ä¸­å®ç°çš„\n\n#### patchVnode ç®—æ³•\n\n1. å¦‚æœ `oldVnode` è·Ÿ `vnode` å®Œå…¨ä¸€è‡´ï¼Œé‚£ä¹ˆä¸éœ€è¦åšä»»ä½•äº‹æƒ…\n2. å¦‚æœ `oldVnode` è·Ÿ `vnode` éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œä¸”å…·æœ‰ç›¸åŒçš„ `key`ï¼Œå½“ `vnode` æ˜¯å…‹éš†èŠ‚ç‚¹æˆ–æ˜¯ `v-once` æŒ‡ä»¤æ§åˆ¶çš„èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦æŠŠ `oldVnode.elm` å’Œ `oldVnode.child` éƒ½å¤åˆ¶åˆ° `vnode` ä¸Šï¼Œä¹Ÿä¸ç”¨å†æœ‰å…¶ä»–æ“ä½œ\n3. å¦åˆ™ï¼Œå¦‚æœ`vnode`ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹\n\n- å¦‚æœ `oldVnode`å’Œ `vnode` éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œä¸”åŒæ–¹çš„å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œå°±æ‰§è¡Œæ›´æ–°å­èŠ‚ç‚¹çš„æ“ä½œï¼ˆè¿™ä¸€éƒ¨åˆ†å…¶å®æ˜¯åœ¨ `updateChildren` å‡½æ•°ä¸­å®ç°ï¼‰ï¼Œç®—æ³•å¦‚ä¸‹:\n\n> åˆ†åˆ«è·å– `oldVnode` å’Œ `vnode` çš„ `firstChild`ã€`lastChild`ï¼Œèµ‹å€¼ç»™ `oldStartVnode`ã€`oldEndVnode`ã€`newStartVnode`ã€`newEndVnode`\n\n> å¦‚æœ `oldStartVnode` å’Œ `newStartVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œç„¶åå°† `oldStartVnode` å’Œ `newStartVnode` éƒ½è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom1.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704111320-57210d35-7b20-45f7-87b1-8a6a541754bc.png#align=left&display=inline&height=204&margin=%5Bobject%20Object%5D&name=virtual_dom1.png&originHeight=204&originWidth=667&size=20067&status=done&style=none&width=667)\n\n> å¦‚æœ `oldEndVnode` å’Œ `newEndVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œç„¶åå°† `oldEndVnode` å’Œ `newEndVnode` éƒ½è®¾ç½®ä¸ºä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom2.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704123342-e1a719db-cacd-4fe3-a4b5-730e73dec203.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=virtual_dom2.png&originHeight=221&originWidth=676&size=19741&status=done&style=none&width=676)\n\n> å¦‚æœ `oldStartVnode` å’Œ `newEndVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œå¦‚æœ `removeOnly` æ˜¯`false`ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ `oldStartVnode.elm` ç§»åŠ¨åˆ° `oldEndVnode.elm` ä¹‹åï¼Œç„¶åæŠŠ `oldStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`newEndVnode` è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹![virtual_dom3.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704137134-da7b6eab-d7ab-4e0d-bd3c-816548aa7050.png#align=left&display=inline&height=224&margin=%5Bobject%20Object%5D&name=virtual_dom3.png&originHeight=224&originWidth=826&size=24829&status=done&style=none&width=826)\n\n> å¦‚æœ `newStartVnode` å’Œ `oldEndVnode` æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œå¦‚æœ `removeOnly` æ˜¯ `false`ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ `oldEndVnode.elm` ç§»åŠ¨åˆ° `oldStartVnode.elm` ä¹‹å‰ï¼Œç„¶åæŠŠ `newStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ`oldEndVnode` è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom4.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704166102-db7c7879-3e36-49db-9e96-9f587cfcb771.png#align=left&display=inline&height=214&margin=%5Bobject%20Object%5D&name=virtual_dom4.png&originHeight=214&originWidth=864&size=24556&status=done&style=none&width=864)\n\n> å¦‚æœä»¥ä¸Šéƒ½ä¸åŒ¹é…ï¼Œå°±å°è¯•åœ¨ `oldChildren` ä¸­å¯»æ‰¾è·Ÿ `newStartVnode` å…·æœ‰ç›¸åŒ `key` çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ç›¸åŒ `key`çš„èŠ‚ç‚¹ï¼Œè¯´æ˜ `newStartVnode` æ˜¯ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæŠŠ `newStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n\n> å¦‚æœä¸Šä¸€æ­¥æ‰¾åˆ°äº†è·Ÿ `newStartVnode` ç›¸åŒ `key` çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé€šè¿‡å…¶ä»–å±æ€§çš„æ¯”è¾ƒæ¥åˆ¤æ–­è¿™ 2 ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œå°±è°ƒç”¨ `patchVnode` è¿›è¡Œ `patch`ï¼Œå¦‚æœ `removeOnly` æ˜¯ `false`ï¼Œå°±æŠŠ `newStartVnode.elm` æ’å…¥åˆ° `oldStartVnode.elm` ä¹‹å‰ï¼ŒæŠŠ `newStartVnode` è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹\n> ![virtual_dom5.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608704181185-2af64dae-c1a4-4505-aeeb-5ec7efad8930.png#align=left&display=inline&height=227&margin=%5Bobject%20Object%5D&name=virtual_dom5.png&originHeight=227&originWidth=869&size=24398&status=done&style=none&width=869)\n\n- å¦‚æœåªæœ‰ `oldVnode` æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±æŠŠè¿™äº›èŠ‚ç‚¹éƒ½åˆ é™¤\n- å¦‚æœåªæœ‰ `vnode` æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±åˆ›å»ºè¿™äº›å­èŠ‚ç‚¹\n- å¦‚æœ `oldVnodeå’Œvnode` éƒ½æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œä½†æ˜¯ `oldVnode` æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œå°±æŠŠ `vnode.elm` çš„æ–‡æœ¬è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²\n\n4. å¦‚æœ `vnode` æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œä½†æ˜¯ `vnode.text != oldVnode.text` æ—¶ï¼Œåªéœ€è¦æ›´æ–° `vnode.elm` çš„æ–‡æœ¬å†…å®¹å°±å¯ä»¥\n\n### ç”Ÿå‘½å‘¨æœŸ\n\n- `patch` æä¾›äº† `5` ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯\n  - `create`: åˆ›å»º `patch` æ—¶\n  - `activate`: æ¿€æ´»ç»„ä»¶æ—¶\n  - `update`: æ›´æ–°èŠ‚ç‚¹æ—¶\n  - `remove`: ç§»é™¤èŠ‚ç‚¹æ—¶\n  - `destroy`: é”€æ¯èŠ‚ç‚¹æ—¶\n- `vnode`ä¹Ÿæä¾›äº†ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯\n  - `init`: `vdom` åˆå§‹åŒ–æ—¶\n  - `create`: `vdom` åˆ›å»ºæ—¶\n  - `prepatch`: `patch` ä¹‹å‰\n  - `insert`: `vdom` æ’å…¥å\n  - `update`: `vdom` æ›´æ–°å‰\n  - `postpatch`: `patch` ä¹‹å\n  - `remove`: `vdom` ç§»é™¤æ—¶\n  - `destroy`: `vdom` é”€æ¯æ—¶\n","slug":"å‰ç«¯/Vue2 è™šæ‹Ÿ dom","published":1,"updated":"2021-04-07T07:23:20.285Z","_id":"ckn7476af0023yx7ydfxjb6vn","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"å…³é”®ç‚¹\"><a href=\"#å…³é”®ç‚¹\" class=\"headerlink\" title=\"å…³é”®ç‚¹\"></a>å…³é”®ç‚¹</h2><h3 id=\"1-Vnode-å¯¹è±¡\"><a href=\"#1-Vnode-å¯¹è±¡\" class=\"headerlink\" title=\"1.Vnode å¯¹è±¡\"></a>1.Vnode å¯¹è±¡</h3><blockquote>\n<p>ä¸€ä¸ª <code>VNode</code> çš„å®ä¾‹å¯¹è±¡åŒ…å«äº†ä»¥ä¸‹å±æ€§:</p>\n</blockquote>\n<ul>\n<li><code>tag</code>: å½“å‰èŠ‚ç‚¹çš„æ ‡ç­¾å</li>\n<li><code>data</code>: å½“å‰èŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡ï¼Œå…·ä½“åŒ…å«å“ªäº›å­—æ®µå¯ä»¥å‚è€ƒ <code>vue</code> æºç  <code>types/vnode.d.ts</code> ä¸­å¯¹ <code>VNodeData</code> çš„å®šä¹‰</li>\n<li><code>children</code>: æ•°ç»„ç±»å‹ï¼ŒåŒ…å«äº†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</li>\n<li><code>text</code>: å½“å‰èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œä¸€èˆ¬æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ä¼šæœ‰è¯¥å±æ€§</li>\n<li><code>elm</code>: å½“å‰è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„çœŸå®çš„ <code>dom</code> èŠ‚ç‚¹</li>\n<li><code>ns</code>: èŠ‚ç‚¹çš„ <code>namespace</code></li>\n<li><code>context</code>: ç¼–è¯‘ä½œç”¨åŸŸ</li>\n<li><code>functionalContext</code>: å‡½æ•°åŒ–ç»„ä»¶çš„ä½œç”¨åŸŸ</li>\n<li><code>key</code>: èŠ‚ç‚¹çš„ <code>key</code> å±æ€§ï¼Œç”¨äºä½œä¸ºèŠ‚ç‚¹çš„æ ‡è¯†ï¼Œæœ‰åˆ©äº <code>patch</code> çš„ä¼˜åŒ–</li>\n<li><code>componentOptions</code>: åˆ›å»ºç»„ä»¶å®ä¾‹æ—¶ä¼šç”¨åˆ°çš„é€‰é¡¹ä¿¡æ¯</li>\n<li><code>child</code>: å½“å‰èŠ‚ç‚¹å¯¹åº”çš„ç»„ä»¶å®ä¾‹</li>\n<li><code>parent</code>: ç»„ä»¶çš„å ä½èŠ‚ç‚¹</li>\n<li><code>raw</code>: <code>raw html</code></li>\n<li><code>isStatic</code>: é™æ€èŠ‚ç‚¹çš„æ ‡è¯†</li>\n<li><code>isRootInsert</code>: æ˜¯å¦ä½œä¸ºæ ¹èŠ‚ç‚¹æ’å…¥ï¼Œè¢« <code>&lt;transition&gt;</code> åŒ…è£¹çš„èŠ‚ç‚¹ï¼Œè¯¥å±æ€§çš„å€¼ä¸º <code>false</code></li>\n<li><code>isComment</code>: å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹</li>\n<li><code>isCloned</code>: å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå…‹éš†èŠ‚ç‚¹</li>\n<li><code>isOnce</code>: å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰ <code>v-once</code> æŒ‡ä»¤</li>\n</ul>\n<h3 id=\"2-Vnode-åˆ†ç±»\"><a href=\"#2-Vnode-åˆ†ç±»\" class=\"headerlink\" title=\"2.Vnode åˆ†ç±»\"></a>2.Vnode åˆ†ç±»</h3><ul>\n<li>ç®€ä»‹</li>\n</ul>\n<blockquote>\n<p><code>VNode</code> å¯ä»¥ç†è§£ä¸º <code>vue</code> æ¡†æ¶çš„è™šæ‹Ÿ <code>dom</code> çš„åŸºç±»ï¼Œé€šè¿‡ <code>new</code> å®ä¾‹åŒ–çš„ <code>VNode</code> å¤§è‡´å¯ä»¥åˆ†ä¸ºå‡ ç±»</p>\n</blockquote>\n<ul>\n<li><code>EmptyVNode</code>: æ²¡æœ‰å†…å®¹çš„æ³¨é‡ŠèŠ‚ç‚¹</li>\n<li><code>TextVNode</code>: æ–‡æœ¬èŠ‚ç‚¹</li>\n<li><code>ElementVNode</code>: æ™®é€šå…ƒç´ èŠ‚ç‚¹</li>\n<li><code>ComponentVNode</code>: ç»„ä»¶èŠ‚ç‚¹</li>\n<li><code>CloneVNode</code>: å…‹éš†èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ä»¥ä¸Šä»»æ„ç±»å‹çš„èŠ‚ç‚¹ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äº <code>isCloned</code> å±æ€§ä¸º <code>true</code></li>\n</ul>\n<h3 id=\"3-createElement-è§£æ\"><a href=\"#3-createElement-è§£æ\" class=\"headerlink\" title=\"3.createElement è§£æ\"></a>3.createElement è§£æ</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> SIMPLE_NORMALIZE = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> ALWAYS_NORMALIZE = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span>(<span class=\"params\">context, tag, data, children, normalizationType, alwaysNormalize</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å…¼å®¹ä¸ä¼ dataçš„æƒ…å†µ</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(data) || isPrimitive(data)) &#123;</span><br><span class=\"line\">    normalizationType = children;</span><br><span class=\"line\">    children = data;</span><br><span class=\"line\">    data = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœalwaysNormalizeæ˜¯true</span></span><br><span class=\"line\">  <span class=\"comment\">// é‚£ä¹ˆnormalizationTypeåº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ALWAYS_NORMALIZEçš„å€¼</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (alwaysNormalize) normalizationType = ALWAYS_NORMALIZE;</span><br><span class=\"line\">  <span class=\"comment\">// è°ƒç”¨_createElementåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> _createElement(context, tag, data, children, normalizationType);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_createElement</span>(<span class=\"params\">context, tag, data, children, normalizationType</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * å¦‚æœå­˜åœ¨data.__ob__ï¼Œè¯´æ˜dataæ˜¯è¢«Observerè§‚å¯Ÿçš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   * ä¸èƒ½ç”¨ä½œè™šæ‹ŸèŠ‚ç‚¹çš„data</span></span><br><span class=\"line\"><span class=\"comment\">   * éœ€è¦æŠ›å‡ºè­¦å‘Šï¼Œå¹¶è¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * è¢«ç›‘æ§çš„dataä¸èƒ½è¢«ç”¨ä½œvnodeæ¸²æŸ“çš„æ•°æ®çš„åŸå› æ˜¯ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">   * dataåœ¨vnodeæ¸²æŸ“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ”¹å˜ï¼Œè¿™æ ·ä¼šè§¦å‘ç›‘æ§ï¼Œå¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (data &amp;&amp; data.__ob__) &#123;</span><br><span class=\"line\">    process.env.NODE_ENV !== <span class=\"string\">&quot;production&quot;</span> &amp;&amp; warn(<span class=\"string\">`Avoid using observed data object as vnode data: <span class=\"subst\">$&#123;<span class=\"built_in\">JSON</span>.stringify(data)&#125;</span>\\n`</span> + <span class=\"string\">&quot;Always create fresh vnode data objects in each render!&quot;</span>, context);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> createEmptyVNode();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å½“ç»„ä»¶çš„iså±æ€§è¢«è®¾ç½®ä¸ºä¸€ä¸ªfalsyçš„å€¼</span></span><br><span class=\"line\">  <span class=\"comment\">// Vueå°†ä¸ä¼šçŸ¥é“è¦æŠŠè¿™ä¸ªç»„ä»¶æ¸²æŸ“æˆä»€ä¹ˆ</span></span><br><span class=\"line\">  <span class=\"comment\">// æ‰€ä»¥æ¸²æŸ“ä¸€ä¸ªç©ºèŠ‚ç‚¹</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!tag) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> createEmptyVNode();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ä½œç”¨åŸŸæ’æ§½</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(children) &amp;&amp; <span class=\"keyword\">typeof</span> children[<span class=\"number\">0</span>] === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    data = data || &#123;&#125;;</span><br><span class=\"line\">    data.scopedSlots = &#123; <span class=\"attr\">default</span>: children[<span class=\"number\">0</span>] &#125;;</span><br><span class=\"line\">    children.length = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ ¹æ®normalizationTypeçš„å€¼ï¼Œé€‰æ‹©ä¸åŒçš„å¤„ç†æ–¹æ³•</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (normalizationType === ALWAYS_NORMALIZE) &#123;</span><br><span class=\"line\">    children = normalizeChildren(children);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (normalizationType === SIMPLE_NORMALIZE) &#123;</span><br><span class=\"line\">    children = simpleNormalizeChildren(children);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> vnode, ns;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœæ ‡ç­¾åæ˜¯å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> tag === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> Ctor;</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æ ‡ç­¾åçš„å‘½åç©ºé—´</span></span><br><span class=\"line\">    ns = config.getTagNamespace(tag);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦ä¸ºä¿ç•™æ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (config.isReservedTag(tag)) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœæ˜¯ä¿ç•™æ ‡ç­¾,å°±åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„vnode</span></span><br><span class=\"line\">      vnode = <span class=\"keyword\">new</span> VNode(config.parsePlatformTagName(tag), data, children, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, context);</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœä¸æ˜¯ä¿ç•™æ ‡ç­¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å°è¯•ä»vmçš„componentsä¸ŠæŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((Ctor = resolveAsset(context.$options, <span class=\"string\">&quot;components&quot;</span>, tag))) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœæ‰¾åˆ°äº†è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰ï¼Œå°±ä»¥æ­¤åˆ›å»ºè™šæ‹Ÿç»„ä»¶èŠ‚ç‚¹</span></span><br><span class=\"line\">      vnode = createComponent(Ctor, data, context, children, tag);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// å…œåº•æ–¹æ¡ˆï¼Œæ­£å¸¸åˆ›å»ºä¸€ä¸ªvnode</span></span><br><span class=\"line\">      vnode = <span class=\"keyword\">new</span> VNode(tag, data, children, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, context);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å½“tagä¸æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¤ä¸ºtagæ˜¯ç»„ä»¶çš„æ„é€ ç±»</span></span><br><span class=\"line\">    <span class=\"comment\">// æ‰€ä»¥ç›´æ¥åˆ›å»º</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    vnode = createComponent(tag, data, context, children);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœæœ‰vnode</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vnode) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæœ‰namespaceï¼Œå°±åº”ç”¨ä¸‹namespaceï¼Œç„¶åè¿”å›vnode</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ns) applyNS(vnode, ns);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> vnode;</span><br><span class=\"line\">    <span class=\"comment\">// å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> createEmptyVNode();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-patch-åŸç†\"><a href=\"#4-patch-åŸç†\" class=\"headerlink\" title=\"4.patch åŸç†\"></a>4.patch åŸç†</h3><h4 id=\"patch-å‡½æ•°æ¥æ”¶-6-ä¸ªå‚æ•°\"><a href=\"#patch-å‡½æ•°æ¥æ”¶-6-ä¸ªå‚æ•°\" class=\"headerlink\" title=\"patch å‡½æ•°æ¥æ”¶ 6 ä¸ªå‚æ•°\"></a>patch å‡½æ•°æ¥æ”¶ 6 ä¸ªå‚æ•°</h4><ol>\n<li><code>oldVnode</code>: æ—§çš„è™šæ‹ŸèŠ‚ç‚¹æˆ–æ—§çš„çœŸå® <code>dom</code> èŠ‚ç‚¹</li>\n<li><code>vnode</code>: æ–°çš„è™šæ‹ŸèŠ‚ç‚¹</li>\n<li><code>hydrating</code>: æ˜¯å¦è¦è·ŸçœŸå® <code>dom</code> æ··åˆ</li>\n<li><code>removeOnly</code>: ç‰¹æ®Š <code>flag</code>ï¼Œç”¨äº <code>&lt;transition-group&gt;</code> ç»„ä»¶</li>\n<li><code>parentElm</code>: çˆ¶èŠ‚ç‚¹</li>\n<li><code>refElm</code>: æ–°èŠ‚ç‚¹å°†æ’å…¥åˆ° <code>refElm</code> ä¹‹å‰</li>\n</ol>\n<h4 id=\"patch-çš„ç­–ç•¥\"><a href=\"#patch-çš„ç­–ç•¥\" class=\"headerlink\" title=\"patch çš„ç­–ç•¥\"></a>patch çš„ç­–ç•¥</h4><ul>\n<li>å¦‚æœ<code>vnode</code> ä¸å­˜åœ¨ä½†æ˜¯ <code>oldVnode</code> å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦é”€æ¯è€èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ <code>invokeDestroyHook(oldVnode)</code> æ¥è¿›è¡Œé”€æ¯</li>\n<li>å¦‚æœ <code>oldVnode</code> ä¸å­˜åœ¨ä½†æ˜¯ <code>vnode</code> å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ <code>createElm</code> æ¥åˆ›å»ºæ–°èŠ‚ç‚¹</li>\n<li>å½“ <code>vnode</code> å’Œ <code>oldVnode</code> éƒ½å­˜åœ¨æ—¶<ul>\n<li>å¦‚æœ <code>oldVnode</code> å’Œ <code>vnode</code> æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±è°ƒç”¨ <code>patchVnode</code> æ¥è¿›è¡Œ <code>patch</code></li>\n<li>å½“ <code>vnode</code> å’Œ <code>oldVnode</code> ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœ <code>oldVnode</code> æ˜¯çœŸå® <code>dom</code> èŠ‚ç‚¹ æˆ– <code>hydrating</code> è®¾ç½®ä¸º<code>true</code>ï¼Œéœ€è¦ç”¨ <code>hydrate</code> å‡½æ•°å°†è™šæ‹Ÿ <code>dom</code> å’ŒçœŸå® <code>dom</code> è¿›è¡Œæ˜ å°„ï¼Œç„¶åå°† <code>oldVnode</code> è®¾ç½®ä¸ºå¯¹åº”çš„è™šæ‹Ÿ <code>dom</code>ï¼Œæ‰¾åˆ° <code>oldVnode.elm</code> çš„çˆ¶èŠ‚ç‚¹ï¼Œæ ¹æ® <code>vnode</code> åˆ›å»ºä¸€ä¸ªçœŸå® <code>dom</code> èŠ‚ç‚¹å¹¶æ’å…¥åˆ°è¯¥çˆ¶èŠ‚ç‚¹ä¸­ <code>oldVnode.elm</code> çš„ä½ç½®</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>è¿™é‡Œé¢å€¼å¾—ä¸€æçš„æ˜¯ <code>patchVnode</code> å‡½æ•°ï¼Œå› ä¸ºçœŸæ­£çš„ <code>patch</code> ç®—æ³•æ˜¯ç”±å®ƒæ¥å®ç°çš„ï¼ˆ<code>patchVnode</code> ä¸­æ›´æ–°å­èŠ‚ç‚¹çš„ç®—æ³•å…¶å®æ˜¯åœ¨ <code>updateChildren</code> å‡½æ•°ä¸­å®ç°çš„</p>\n</blockquote>\n<h4 id=\"patchVnode-ç®—æ³•\"><a href=\"#patchVnode-ç®—æ³•\" class=\"headerlink\" title=\"patchVnode ç®—æ³•\"></a>patchVnode ç®—æ³•</h4><ol>\n<li>å¦‚æœ <code>oldVnode</code> è·Ÿ <code>vnode</code> å®Œå…¨ä¸€è‡´ï¼Œé‚£ä¹ˆä¸éœ€è¦åšä»»ä½•äº‹æƒ…</li>\n<li>å¦‚æœ <code>oldVnode</code> è·Ÿ <code>vnode</code> éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œä¸”å…·æœ‰ç›¸åŒçš„ <code>key</code>ï¼Œå½“ <code>vnode</code> æ˜¯å…‹éš†èŠ‚ç‚¹æˆ–æ˜¯ <code>v-once</code> æŒ‡ä»¤æ§åˆ¶çš„èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦æŠŠ <code>oldVnode.elm</code> å’Œ <code>oldVnode.child</code> éƒ½å¤åˆ¶åˆ° <code>vnode</code> ä¸Šï¼Œä¹Ÿä¸ç”¨å†æœ‰å…¶ä»–æ“ä½œ</li>\n<li>å¦åˆ™ï¼Œå¦‚æœ<code>vnode</code>ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹</li>\n</ol>\n<ul>\n<li>å¦‚æœ <code>oldVnode</code>å’Œ <code>vnode</code> éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œä¸”åŒæ–¹çš„å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œå°±æ‰§è¡Œæ›´æ–°å­èŠ‚ç‚¹çš„æ“ä½œï¼ˆè¿™ä¸€éƒ¨åˆ†å…¶å®æ˜¯åœ¨ <code>updateChildren</code> å‡½æ•°ä¸­å®ç°ï¼‰ï¼Œç®—æ³•å¦‚ä¸‹:</li>\n</ul>\n<blockquote>\n<p>åˆ†åˆ«è·å– <code>oldVnode</code> å’Œ <code>vnode</code> çš„ <code>firstChild</code>ã€<code>lastChild</code>ï¼Œèµ‹å€¼ç»™ <code>oldStartVnode</code>ã€<code>oldEndVnode</code>ã€<code>newStartVnode</code>ã€<code>newEndVnode</code></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>oldStartVnode</code> å’Œ <code>newStartVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œç„¶åå°† <code>oldStartVnode</code> å’Œ <code>newStartVnode</code> éƒ½è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704111320-57210d35-7b20-45f7-87b1-8a6a541754bc.png#align=left&display=inline&height=204&margin=%5Bobject%20Object%5D&name=virtual_dom1.png&originHeight=204&originWidth=667&size=20067&status=done&style=none&width=667\" alt=\"virtual_dom1.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>oldEndVnode</code> å’Œ <code>newEndVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œç„¶åå°† <code>oldEndVnode</code> å’Œ <code>newEndVnode</code> éƒ½è®¾ç½®ä¸ºä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704123342-e1a719db-cacd-4fe3-a4b5-730e73dec203.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=virtual_dom2.png&originHeight=221&originWidth=676&size=19741&status=done&style=none&width=676\" alt=\"virtual_dom2.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>oldStartVnode</code> å’Œ <code>newEndVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œå¦‚æœ <code>removeOnly</code> æ˜¯<code>false</code>ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ <code>oldStartVnode.elm</code> ç§»åŠ¨åˆ° <code>oldEndVnode.elm</code> ä¹‹åï¼Œç„¶åæŠŠ <code>oldStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code>newEndVnode</code> è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704137134-da7b6eab-d7ab-4e0d-bd3c-816548aa7050.png#align=left&display=inline&height=224&margin=%5Bobject%20Object%5D&name=virtual_dom3.png&originHeight=224&originWidth=826&size=24829&status=done&style=none&width=826\" alt=\"virtual_dom3.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>newStartVnode</code> å’Œ <code>oldEndVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œå¦‚æœ <code>removeOnly</code> æ˜¯ <code>false</code>ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ <code>oldEndVnode.elm</code> ç§»åŠ¨åˆ° <code>oldStartVnode.elm</code> ä¹‹å‰ï¼Œç„¶åæŠŠ <code>newStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code>oldEndVnode</code> è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704166102-db7c7879-3e36-49db-9e96-9f587cfcb771.png#align=left&display=inline&height=214&margin=%5Bobject%20Object%5D&name=virtual_dom4.png&originHeight=214&originWidth=864&size=24556&status=done&style=none&width=864\" alt=\"virtual_dom4.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœä»¥ä¸Šéƒ½ä¸åŒ¹é…ï¼Œå°±å°è¯•åœ¨ <code>oldChildren</code> ä¸­å¯»æ‰¾è·Ÿ <code>newStartVnode</code> å…·æœ‰ç›¸åŒ <code>key</code> çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ç›¸åŒ <code>key</code>çš„èŠ‚ç‚¹ï¼Œè¯´æ˜ <code>newStartVnode</code> æ˜¯ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæŠŠ <code>newStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœä¸Šä¸€æ­¥æ‰¾åˆ°äº†è·Ÿ <code>newStartVnode</code> ç›¸åŒ <code>key</code> çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé€šè¿‡å…¶ä»–å±æ€§çš„æ¯”è¾ƒæ¥åˆ¤æ–­è¿™ 2 ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œå°±è°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œå¦‚æœ <code>removeOnly</code> æ˜¯ <code>false</code>ï¼Œå°±æŠŠ <code>newStartVnode.elm</code> æ’å…¥åˆ° <code>oldStartVnode.elm</code> ä¹‹å‰ï¼ŒæŠŠ <code>newStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704181185-2af64dae-c1a4-4505-aeeb-5ec7efad8930.png#align=left&display=inline&height=227&margin=%5Bobject%20Object%5D&name=virtual_dom5.png&originHeight=227&originWidth=869&size=24398&status=done&style=none&width=869\" alt=\"virtual_dom5.png\"></p>\n</blockquote>\n<ul>\n<li>å¦‚æœåªæœ‰ <code>oldVnode</code> æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±æŠŠè¿™äº›èŠ‚ç‚¹éƒ½åˆ é™¤</li>\n<li>å¦‚æœåªæœ‰ <code>vnode</code> æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±åˆ›å»ºè¿™äº›å­èŠ‚ç‚¹</li>\n<li>å¦‚æœ <code>oldVnodeå’Œvnode</code> éƒ½æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œä½†æ˜¯ <code>oldVnode</code> æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œå°±æŠŠ <code>vnode.elm</code> çš„æ–‡æœ¬è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²</li>\n</ul>\n<ol start=\"4\">\n<li>å¦‚æœ <code>vnode</code> æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œä½†æ˜¯ <code>vnode.text != oldVnode.text</code> æ—¶ï¼Œåªéœ€è¦æ›´æ–° <code>vnode.elm</code> çš„æ–‡æœ¬å†…å®¹å°±å¯ä»¥</li>\n</ol>\n<h3 id=\"ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"ç”Ÿå‘½å‘¨æœŸ\"></a>ç”Ÿå‘½å‘¨æœŸ</h3><ul>\n<li><code>patch</code> æä¾›äº† <code>5</code> ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯<ul>\n<li><code>create</code>: åˆ›å»º <code>patch</code> æ—¶</li>\n<li><code>activate</code>: æ¿€æ´»ç»„ä»¶æ—¶</li>\n<li><code>update</code>: æ›´æ–°èŠ‚ç‚¹æ—¶</li>\n<li><code>remove</code>: ç§»é™¤èŠ‚ç‚¹æ—¶</li>\n<li><code>destroy</code>: é”€æ¯èŠ‚ç‚¹æ—¶</li>\n</ul>\n</li>\n<li><code>vnode</code>ä¹Ÿæä¾›äº†ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯<ul>\n<li><code>init</code>: <code>vdom</code> åˆå§‹åŒ–æ—¶</li>\n<li><code>create</code>: <code>vdom</code> åˆ›å»ºæ—¶</li>\n<li><code>prepatch</code>: <code>patch</code> ä¹‹å‰</li>\n<li><code>insert</code>: <code>vdom</code> æ’å…¥å</li>\n<li><code>update</code>: <code>vdom</code> æ›´æ–°å‰</li>\n<li><code>postpatch</code>: <code>patch</code> ä¹‹å</li>\n<li><code>remove</code>: <code>vdom</code> ç§»é™¤æ—¶</li>\n<li><code>destroy</code>: <code>vdom</code> é”€æ¯æ—¶</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"å…³é”®ç‚¹\"><a href=\"#å…³é”®ç‚¹\" class=\"headerlink\" title=\"å…³é”®ç‚¹\"></a>å…³é”®ç‚¹</h2><h3 id=\"1-Vnode-å¯¹è±¡\"><a href=\"#1-Vnode-å¯¹è±¡\" class=\"headerlink\" title=\"1.Vnode å¯¹è±¡\"></a>1.Vnode å¯¹è±¡</h3><blockquote>\n<p>ä¸€ä¸ª <code>VNode</code> çš„å®ä¾‹å¯¹è±¡åŒ…å«äº†ä»¥ä¸‹å±æ€§:</p>\n</blockquote>\n<ul>\n<li><code>tag</code>: å½“å‰èŠ‚ç‚¹çš„æ ‡ç­¾å</li>\n<li><code>data</code>: å½“å‰èŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡ï¼Œå…·ä½“åŒ…å«å“ªäº›å­—æ®µå¯ä»¥å‚è€ƒ <code>vue</code> æºç  <code>types/vnode.d.ts</code> ä¸­å¯¹ <code>VNodeData</code> çš„å®šä¹‰</li>\n<li><code>children</code>: æ•°ç»„ç±»å‹ï¼ŒåŒ…å«äº†å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹</li>\n<li><code>text</code>: å½“å‰èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œä¸€èˆ¬æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ä¼šæœ‰è¯¥å±æ€§</li>\n<li><code>elm</code>: å½“å‰è™šæ‹ŸèŠ‚ç‚¹å¯¹åº”çš„çœŸå®çš„ <code>dom</code> èŠ‚ç‚¹</li>\n<li><code>ns</code>: èŠ‚ç‚¹çš„ <code>namespace</code></li>\n<li><code>context</code>: ç¼–è¯‘ä½œç”¨åŸŸ</li>\n<li><code>functionalContext</code>: å‡½æ•°åŒ–ç»„ä»¶çš„ä½œç”¨åŸŸ</li>\n<li><code>key</code>: èŠ‚ç‚¹çš„ <code>key</code> å±æ€§ï¼Œç”¨äºä½œä¸ºèŠ‚ç‚¹çš„æ ‡è¯†ï¼Œæœ‰åˆ©äº <code>patch</code> çš„ä¼˜åŒ–</li>\n<li><code>componentOptions</code>: åˆ›å»ºç»„ä»¶å®ä¾‹æ—¶ä¼šç”¨åˆ°çš„é€‰é¡¹ä¿¡æ¯</li>\n<li><code>child</code>: å½“å‰èŠ‚ç‚¹å¯¹åº”çš„ç»„ä»¶å®ä¾‹</li>\n<li><code>parent</code>: ç»„ä»¶çš„å ä½èŠ‚ç‚¹</li>\n<li><code>raw</code>: <code>raw html</code></li>\n<li><code>isStatic</code>: é™æ€èŠ‚ç‚¹çš„æ ‡è¯†</li>\n<li><code>isRootInsert</code>: æ˜¯å¦ä½œä¸ºæ ¹èŠ‚ç‚¹æ’å…¥ï¼Œè¢« <code>&lt;transition&gt;</code> åŒ…è£¹çš„èŠ‚ç‚¹ï¼Œè¯¥å±æ€§çš„å€¼ä¸º <code>false</code></li>\n<li><code>isComment</code>: å½“å‰èŠ‚ç‚¹æ˜¯å¦æ˜¯æ³¨é‡ŠèŠ‚ç‚¹</li>\n<li><code>isCloned</code>: å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå…‹éš†èŠ‚ç‚¹</li>\n<li><code>isOnce</code>: å½“å‰èŠ‚ç‚¹æ˜¯å¦æœ‰ <code>v-once</code> æŒ‡ä»¤</li>\n</ul>\n<h3 id=\"2-Vnode-åˆ†ç±»\"><a href=\"#2-Vnode-åˆ†ç±»\" class=\"headerlink\" title=\"2.Vnode åˆ†ç±»\"></a>2.Vnode åˆ†ç±»</h3><ul>\n<li>ç®€ä»‹</li>\n</ul>\n<blockquote>\n<p><code>VNode</code> å¯ä»¥ç†è§£ä¸º <code>vue</code> æ¡†æ¶çš„è™šæ‹Ÿ <code>dom</code> çš„åŸºç±»ï¼Œé€šè¿‡ <code>new</code> å®ä¾‹åŒ–çš„ <code>VNode</code> å¤§è‡´å¯ä»¥åˆ†ä¸ºå‡ ç±»</p>\n</blockquote>\n<ul>\n<li><code>EmptyVNode</code>: æ²¡æœ‰å†…å®¹çš„æ³¨é‡ŠèŠ‚ç‚¹</li>\n<li><code>TextVNode</code>: æ–‡æœ¬èŠ‚ç‚¹</li>\n<li><code>ElementVNode</code>: æ™®é€šå…ƒç´ èŠ‚ç‚¹</li>\n<li><code>ComponentVNode</code>: ç»„ä»¶èŠ‚ç‚¹</li>\n<li><code>CloneVNode</code>: å…‹éš†èŠ‚ç‚¹ï¼Œå¯ä»¥æ˜¯ä»¥ä¸Šä»»æ„ç±»å‹çš„èŠ‚ç‚¹ï¼Œå”¯ä¸€çš„åŒºåˆ«åœ¨äº <code>isCloned</code> å±æ€§ä¸º <code>true</code></li>\n</ul>\n<h3 id=\"3-createElement-è§£æ\"><a href=\"#3-createElement-è§£æ\" class=\"headerlink\" title=\"3.createElement è§£æ\"></a>3.createElement è§£æ</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> SIMPLE_NORMALIZE = <span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> ALWAYS_NORMALIZE = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span>(<span class=\"params\">context, tag, data, children, normalizationType, alwaysNormalize</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å…¼å®¹ä¸ä¼ dataçš„æƒ…å†µ</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(data) || isPrimitive(data)) &#123;</span><br><span class=\"line\">    normalizationType = children;</span><br><span class=\"line\">    children = data;</span><br><span class=\"line\">    data = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœalwaysNormalizeæ˜¯true</span></span><br><span class=\"line\">  <span class=\"comment\">// é‚£ä¹ˆnormalizationTypeåº”è¯¥è®¾ç½®ä¸ºå¸¸é‡ALWAYS_NORMALIZEçš„å€¼</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (alwaysNormalize) normalizationType = ALWAYS_NORMALIZE;</span><br><span class=\"line\">  <span class=\"comment\">// è°ƒç”¨_createElementåˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> _createElement(context, tag, data, children, normalizationType);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_createElement</span>(<span class=\"params\">context, tag, data, children, normalizationType</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * å¦‚æœå­˜åœ¨data.__ob__ï¼Œè¯´æ˜dataæ˜¯è¢«Observerè§‚å¯Ÿçš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"comment\">   * ä¸èƒ½ç”¨ä½œè™šæ‹ŸèŠ‚ç‚¹çš„data</span></span><br><span class=\"line\"><span class=\"comment\">   * éœ€è¦æŠ›å‡ºè­¦å‘Šï¼Œå¹¶è¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * è¢«ç›‘æ§çš„dataä¸èƒ½è¢«ç”¨ä½œvnodeæ¸²æŸ“çš„æ•°æ®çš„åŸå› æ˜¯ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">   * dataåœ¨vnodeæ¸²æŸ“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šè¢«æ”¹å˜ï¼Œè¿™æ ·ä¼šè§¦å‘ç›‘æ§ï¼Œå¯¼è‡´ä¸ç¬¦åˆé¢„æœŸçš„æ“ä½œ</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (data &amp;&amp; data.__ob__) &#123;</span><br><span class=\"line\">    process.env.NODE_ENV !== <span class=\"string\">&quot;production&quot;</span> &amp;&amp; warn(<span class=\"string\">`Avoid using observed data object as vnode data: <span class=\"subst\">$&#123;<span class=\"built_in\">JSON</span>.stringify(data)&#125;</span>\\n`</span> + <span class=\"string\">&quot;Always create fresh vnode data objects in each render!&quot;</span>, context);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> createEmptyVNode();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å½“ç»„ä»¶çš„iså±æ€§è¢«è®¾ç½®ä¸ºä¸€ä¸ªfalsyçš„å€¼</span></span><br><span class=\"line\">  <span class=\"comment\">// Vueå°†ä¸ä¼šçŸ¥é“è¦æŠŠè¿™ä¸ªç»„ä»¶æ¸²æŸ“æˆä»€ä¹ˆ</span></span><br><span class=\"line\">  <span class=\"comment\">// æ‰€ä»¥æ¸²æŸ“ä¸€ä¸ªç©ºèŠ‚ç‚¹</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!tag) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> createEmptyVNode();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// ä½œç”¨åŸŸæ’æ§½</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Array</span>.isArray(children) &amp;&amp; <span class=\"keyword\">typeof</span> children[<span class=\"number\">0</span>] === <span class=\"string\">&quot;function&quot;</span>) &#123;</span><br><span class=\"line\">    data = data || &#123;&#125;;</span><br><span class=\"line\">    data.scopedSlots = &#123; <span class=\"attr\">default</span>: children[<span class=\"number\">0</span>] &#125;;</span><br><span class=\"line\">    children.length = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// æ ¹æ®normalizationTypeçš„å€¼ï¼Œé€‰æ‹©ä¸åŒçš„å¤„ç†æ–¹æ³•</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (normalizationType === ALWAYS_NORMALIZE) &#123;</span><br><span class=\"line\">    children = normalizeChildren(children);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (normalizationType === SIMPLE_NORMALIZE) &#123;</span><br><span class=\"line\">    children = simpleNormalizeChildren(children);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> vnode, ns;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœæ ‡ç­¾åæ˜¯å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> tag === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> Ctor;</span><br><span class=\"line\">    <span class=\"comment\">// è·å–æ ‡ç­¾åçš„å‘½åç©ºé—´</span></span><br><span class=\"line\">    ns = config.getTagNamespace(tag);</span><br><span class=\"line\">    <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦ä¸ºä¿ç•™æ ‡ç­¾</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (config.isReservedTag(tag)) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœæ˜¯ä¿ç•™æ ‡ç­¾,å°±åˆ›å»ºä¸€ä¸ªè¿™æ ·çš„vnode</span></span><br><span class=\"line\">      vnode = <span class=\"keyword\">new</span> VNode(config.parsePlatformTagName(tag), data, children, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, context);</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœä¸æ˜¯ä¿ç•™æ ‡ç­¾ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å°è¯•ä»vmçš„componentsä¸ŠæŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((Ctor = resolveAsset(context.$options, <span class=\"string\">&quot;components&quot;</span>, tag))) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// å¦‚æœæ‰¾åˆ°äº†è¿™ä¸ªæ ‡ç­¾çš„å®šä¹‰ï¼Œå°±ä»¥æ­¤åˆ›å»ºè™šæ‹Ÿç»„ä»¶èŠ‚ç‚¹</span></span><br><span class=\"line\">      vnode = createComponent(Ctor, data, context, children, tag);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// å…œåº•æ–¹æ¡ˆï¼Œæ­£å¸¸åˆ›å»ºä¸€ä¸ªvnode</span></span><br><span class=\"line\">      vnode = <span class=\"keyword\">new</span> VNode(tag, data, children, <span class=\"literal\">undefined</span>, <span class=\"literal\">undefined</span>, context);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// å½“tagä¸æ˜¯å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¤ä¸ºtagæ˜¯ç»„ä»¶çš„æ„é€ ç±»</span></span><br><span class=\"line\">    <span class=\"comment\">// æ‰€ä»¥ç›´æ¥åˆ›å»º</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    vnode = createComponent(tag, data, context, children);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœæœ‰vnode</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (vnode) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæœ‰namespaceï¼Œå°±åº”ç”¨ä¸‹namespaceï¼Œç„¶åè¿”å›vnode</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ns) applyNS(vnode, ns);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> vnode;</span><br><span class=\"line\">    <span class=\"comment\">// å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºèŠ‚ç‚¹</span></span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> createEmptyVNode();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-patch-åŸç†\"><a href=\"#4-patch-åŸç†\" class=\"headerlink\" title=\"4.patch åŸç†\"></a>4.patch åŸç†</h3><h4 id=\"patch-å‡½æ•°æ¥æ”¶-6-ä¸ªå‚æ•°\"><a href=\"#patch-å‡½æ•°æ¥æ”¶-6-ä¸ªå‚æ•°\" class=\"headerlink\" title=\"patch å‡½æ•°æ¥æ”¶ 6 ä¸ªå‚æ•°\"></a>patch å‡½æ•°æ¥æ”¶ 6 ä¸ªå‚æ•°</h4><ol>\n<li><code>oldVnode</code>: æ—§çš„è™šæ‹ŸèŠ‚ç‚¹æˆ–æ—§çš„çœŸå® <code>dom</code> èŠ‚ç‚¹</li>\n<li><code>vnode</code>: æ–°çš„è™šæ‹ŸèŠ‚ç‚¹</li>\n<li><code>hydrating</code>: æ˜¯å¦è¦è·ŸçœŸå® <code>dom</code> æ··åˆ</li>\n<li><code>removeOnly</code>: ç‰¹æ®Š <code>flag</code>ï¼Œç”¨äº <code>&lt;transition-group&gt;</code> ç»„ä»¶</li>\n<li><code>parentElm</code>: çˆ¶èŠ‚ç‚¹</li>\n<li><code>refElm</code>: æ–°èŠ‚ç‚¹å°†æ’å…¥åˆ° <code>refElm</code> ä¹‹å‰</li>\n</ol>\n<h4 id=\"patch-çš„ç­–ç•¥\"><a href=\"#patch-çš„ç­–ç•¥\" class=\"headerlink\" title=\"patch çš„ç­–ç•¥\"></a>patch çš„ç­–ç•¥</h4><ul>\n<li>å¦‚æœ<code>vnode</code> ä¸å­˜åœ¨ä½†æ˜¯ <code>oldVnode</code> å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦é”€æ¯è€èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ <code>invokeDestroyHook(oldVnode)</code> æ¥è¿›è¡Œé”€æ¯</li>\n<li>å¦‚æœ <code>oldVnode</code> ä¸å­˜åœ¨ä½†æ˜¯ <code>vnode</code> å­˜åœ¨ï¼Œè¯´æ˜æ„å›¾æ˜¯è¦åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±è°ƒç”¨ <code>createElm</code> æ¥åˆ›å»ºæ–°èŠ‚ç‚¹</li>\n<li>å½“ <code>vnode</code> å’Œ <code>oldVnode</code> éƒ½å­˜åœ¨æ—¶<ul>\n<li>å¦‚æœ <code>oldVnode</code> å’Œ <code>vnode</code> æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±è°ƒç”¨ <code>patchVnode</code> æ¥è¿›è¡Œ <code>patch</code></li>\n<li>å½“ <code>vnode</code> å’Œ <code>oldVnode</code> ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¦‚æœ <code>oldVnode</code> æ˜¯çœŸå® <code>dom</code> èŠ‚ç‚¹ æˆ– <code>hydrating</code> è®¾ç½®ä¸º<code>true</code>ï¼Œéœ€è¦ç”¨ <code>hydrate</code> å‡½æ•°å°†è™šæ‹Ÿ <code>dom</code> å’ŒçœŸå® <code>dom</code> è¿›è¡Œæ˜ å°„ï¼Œç„¶åå°† <code>oldVnode</code> è®¾ç½®ä¸ºå¯¹åº”çš„è™šæ‹Ÿ <code>dom</code>ï¼Œæ‰¾åˆ° <code>oldVnode.elm</code> çš„çˆ¶èŠ‚ç‚¹ï¼Œæ ¹æ® <code>vnode</code> åˆ›å»ºä¸€ä¸ªçœŸå® <code>dom</code> èŠ‚ç‚¹å¹¶æ’å…¥åˆ°è¯¥çˆ¶èŠ‚ç‚¹ä¸­ <code>oldVnode.elm</code> çš„ä½ç½®</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>è¿™é‡Œé¢å€¼å¾—ä¸€æçš„æ˜¯ <code>patchVnode</code> å‡½æ•°ï¼Œå› ä¸ºçœŸæ­£çš„ <code>patch</code> ç®—æ³•æ˜¯ç”±å®ƒæ¥å®ç°çš„ï¼ˆ<code>patchVnode</code> ä¸­æ›´æ–°å­èŠ‚ç‚¹çš„ç®—æ³•å…¶å®æ˜¯åœ¨ <code>updateChildren</code> å‡½æ•°ä¸­å®ç°çš„</p>\n</blockquote>\n<h4 id=\"patchVnode-ç®—æ³•\"><a href=\"#patchVnode-ç®—æ³•\" class=\"headerlink\" title=\"patchVnode ç®—æ³•\"></a>patchVnode ç®—æ³•</h4><ol>\n<li>å¦‚æœ <code>oldVnode</code> è·Ÿ <code>vnode</code> å®Œå…¨ä¸€è‡´ï¼Œé‚£ä¹ˆä¸éœ€è¦åšä»»ä½•äº‹æƒ…</li>\n<li>å¦‚æœ <code>oldVnode</code> è·Ÿ <code>vnode</code> éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œä¸”å…·æœ‰ç›¸åŒçš„ <code>key</code>ï¼Œå½“ <code>vnode</code> æ˜¯å…‹éš†èŠ‚ç‚¹æˆ–æ˜¯ <code>v-once</code> æŒ‡ä»¤æ§åˆ¶çš„èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦æŠŠ <code>oldVnode.elm</code> å’Œ <code>oldVnode.child</code> éƒ½å¤åˆ¶åˆ° <code>vnode</code> ä¸Šï¼Œä¹Ÿä¸ç”¨å†æœ‰å…¶ä»–æ“ä½œ</li>\n<li>å¦åˆ™ï¼Œå¦‚æœ<code>vnode</code>ä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹</li>\n</ol>\n<ul>\n<li>å¦‚æœ <code>oldVnode</code>å’Œ <code>vnode</code> éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œä¸”åŒæ–¹çš„å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œå°±æ‰§è¡Œæ›´æ–°å­èŠ‚ç‚¹çš„æ“ä½œï¼ˆè¿™ä¸€éƒ¨åˆ†å…¶å®æ˜¯åœ¨ <code>updateChildren</code> å‡½æ•°ä¸­å®ç°ï¼‰ï¼Œç®—æ³•å¦‚ä¸‹:</li>\n</ul>\n<blockquote>\n<p>åˆ†åˆ«è·å– <code>oldVnode</code> å’Œ <code>vnode</code> çš„ <code>firstChild</code>ã€<code>lastChild</code>ï¼Œèµ‹å€¼ç»™ <code>oldStartVnode</code>ã€<code>oldEndVnode</code>ã€<code>newStartVnode</code>ã€<code>newEndVnode</code></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>oldStartVnode</code> å’Œ <code>newStartVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œç„¶åå°† <code>oldStartVnode</code> å’Œ <code>newStartVnode</code> éƒ½è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704111320-57210d35-7b20-45f7-87b1-8a6a541754bc.png#align=left&display=inline&height=204&margin=%5Bobject%20Object%5D&name=virtual_dom1.png&originHeight=204&originWidth=667&size=20067&status=done&style=none&width=667\" alt=\"virtual_dom1.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>oldEndVnode</code> å’Œ <code>newEndVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œç„¶åå°† <code>oldEndVnode</code> å’Œ <code>newEndVnode</code> éƒ½è®¾ç½®ä¸ºä¸Šä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704123342-e1a719db-cacd-4fe3-a4b5-730e73dec203.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=virtual_dom2.png&originHeight=221&originWidth=676&size=19741&status=done&style=none&width=676\" alt=\"virtual_dom2.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>oldStartVnode</code> å’Œ <code>newEndVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œå¦‚æœ <code>removeOnly</code> æ˜¯<code>false</code>ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ <code>oldStartVnode.elm</code> ç§»åŠ¨åˆ° <code>oldEndVnode.elm</code> ä¹‹åï¼Œç„¶åæŠŠ <code>oldStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code>newEndVnode</code> è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704137134-da7b6eab-d7ab-4e0d-bd3c-816548aa7050.png#align=left&display=inline&height=224&margin=%5Bobject%20Object%5D&name=virtual_dom3.png&originHeight=224&originWidth=826&size=24829&status=done&style=none&width=826\" alt=\"virtual_dom3.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœ <code>newStartVnode</code> å’Œ <code>oldEndVnode</code> æ˜¯åŒä¸€èŠ‚ç‚¹ï¼Œè°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œå¦‚æœ <code>removeOnly</code> æ˜¯ <code>false</code>ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠ <code>oldEndVnode.elm</code> ç§»åŠ¨åˆ° <code>oldStartVnode.elm</code> ä¹‹å‰ï¼Œç„¶åæŠŠ <code>newStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<code>oldEndVnode</code> è®¾ç½®ä¸ºä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704166102-db7c7879-3e36-49db-9e96-9f587cfcb771.png#align=left&display=inline&height=214&margin=%5Bobject%20Object%5D&name=virtual_dom4.png&originHeight=214&originWidth=864&size=24556&status=done&style=none&width=864\" alt=\"virtual_dom4.png\"></p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœä»¥ä¸Šéƒ½ä¸åŒ¹é…ï¼Œå°±å°è¯•åœ¨ <code>oldChildren</code> ä¸­å¯»æ‰¾è·Ÿ <code>newStartVnode</code> å…·æœ‰ç›¸åŒ <code>key</code> çš„èŠ‚ç‚¹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ç›¸åŒ <code>key</code>çš„èŠ‚ç‚¹ï¼Œè¯´æ˜ <code>newStartVnode</code> æ˜¯ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå°±åˆ›å»ºä¸€ä¸ªï¼Œç„¶åæŠŠ <code>newStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœä¸Šä¸€æ­¥æ‰¾åˆ°äº†è·Ÿ <code>newStartVnode</code> ç›¸åŒ <code>key</code> çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé€šè¿‡å…¶ä»–å±æ€§çš„æ¯”è¾ƒæ¥åˆ¤æ–­è¿™ 2 ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œå°±è°ƒç”¨ <code>patchVnode</code> è¿›è¡Œ <code>patch</code>ï¼Œå¦‚æœ <code>removeOnly</code> æ˜¯ <code>false</code>ï¼Œå°±æŠŠ <code>newStartVnode.elm</code> æ’å…¥åˆ° <code>oldStartVnode.elm</code> ä¹‹å‰ï¼ŒæŠŠ <code>newStartVnode</code> è®¾ç½®ä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‡å¤ä¸Šè¿°æµç¨‹<br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608704181185-2af64dae-c1a4-4505-aeeb-5ec7efad8930.png#align=left&display=inline&height=227&margin=%5Bobject%20Object%5D&name=virtual_dom5.png&originHeight=227&originWidth=869&size=24398&status=done&style=none&width=869\" alt=\"virtual_dom5.png\"></p>\n</blockquote>\n<ul>\n<li>å¦‚æœåªæœ‰ <code>oldVnode</code> æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±æŠŠè¿™äº›èŠ‚ç‚¹éƒ½åˆ é™¤</li>\n<li>å¦‚æœåªæœ‰ <code>vnode</code> æœ‰å­èŠ‚ç‚¹ï¼Œé‚£å°±åˆ›å»ºè¿™äº›å­èŠ‚ç‚¹</li>\n<li>å¦‚æœ <code>oldVnodeå’Œvnode</code> éƒ½æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œä½†æ˜¯ <code>oldVnode</code> æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œå°±æŠŠ <code>vnode.elm</code> çš„æ–‡æœ¬è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²</li>\n</ul>\n<ol start=\"4\">\n<li>å¦‚æœ <code>vnode</code> æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ï¼Œä½†æ˜¯ <code>vnode.text != oldVnode.text</code> æ—¶ï¼Œåªéœ€è¦æ›´æ–° <code>vnode.elm</code> çš„æ–‡æœ¬å†…å®¹å°±å¯ä»¥</li>\n</ol>\n<h3 id=\"ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"ç”Ÿå‘½å‘¨æœŸ\"></a>ç”Ÿå‘½å‘¨æœŸ</h3><ul>\n<li><code>patch</code> æä¾›äº† <code>5</code> ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯<ul>\n<li><code>create</code>: åˆ›å»º <code>patch</code> æ—¶</li>\n<li><code>activate</code>: æ¿€æ´»ç»„ä»¶æ—¶</li>\n<li><code>update</code>: æ›´æ–°èŠ‚ç‚¹æ—¶</li>\n<li><code>remove</code>: ç§»é™¤èŠ‚ç‚¹æ—¶</li>\n<li><code>destroy</code>: é”€æ¯èŠ‚ç‚¹æ—¶</li>\n</ul>\n</li>\n<li><code>vnode</code>ä¹Ÿæä¾›äº†ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåˆ†åˆ«æ˜¯<ul>\n<li><code>init</code>: <code>vdom</code> åˆå§‹åŒ–æ—¶</li>\n<li><code>create</code>: <code>vdom</code> åˆ›å»ºæ—¶</li>\n<li><code>prepatch</code>: <code>patch</code> ä¹‹å‰</li>\n<li><code>insert</code>: <code>vdom</code> æ’å…¥å</li>\n<li><code>update</code>: <code>vdom</code> æ›´æ–°å‰</li>\n<li><code>postpatch</code>: <code>patch</code> ä¹‹å</li>\n<li><code>remove</code>: <code>vdom</code> ç§»é™¤æ—¶</li>\n<li><code>destroy</code>: <code>vdom</code> é”€æ¯æ—¶</li>\n</ul>\n</li>\n</ul>\n"},{"title":"ç¼–å†™ React ç»„ä»¶æ—¶å¸¸è§çš„ 5 ä¸ªé”™è¯¯","date":"2021-02-28T16:00:00.000Z","_content":"\n## 1. åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨ useState\n\nReact çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯å¤„ç†çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡çŠ¶æ€æ§åˆ¶æ•´ä¸ªæ•°æ®æµå’Œæ¸²æŸ“è¿‡ç¨‹ã€‚æ¯æ¬¡æ ‘è¢«é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºçŠ¶æ€çš„å˜åŒ–ã€‚\n\nä½¿ç”¨ useState hookï¼Œä½ ç°åœ¨è¿˜å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®šä¹‰çŠ¶æ€ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥çœŸæ­£ç®€æ´åœ°åœ¨ React ä¸­å¤„ç†çŠ¶æ€ã€‚ä½†æ­£å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼Œå®ƒä¹Ÿå¯èƒ½è¢«æ»¥ç”¨ã€‚\n\nå…³äºä¸‹é¢è¿™ä¸ªç¤ºä¾‹æˆ‘ä»¬éœ€è¦è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæŒ‰é’®æ˜¯è®¡æ•°å™¨ï¼Œå¦ä¸€ä¸ªæŒ‰é’®ä½¿ç”¨å½“å‰è®¡æ•°å‘é€è¯·æ±‚æˆ–è§¦å‘åŠ¨ä½œã€‚ä½†æ˜¯ï¼Œå½“å‰ç¼–å·æ°¸è¿œä¸ä¼šæ˜¾ç¤ºåœ¨ç»„ä»¶å†…ã€‚å½“ä½ å•å‡»ç¬¬äºŒä¸ªæŒ‰é’®æ—¶æ‰éœ€è¦è¿™ä¸ªè¯·æ±‚ã€‚\n\nè¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction ClickButton(props) {\n  const [count, setCount] = useState(0);\n  const onClickCount = () => {\n    setCount((c) => c + 1);\n  };\n  const onClickRequest = () => {\n    apiCall(count);\n  };\n  return (\n    <div>\n      <button onClick={onClickCount}>Counter</button>\n      <button onClick={onClickRequest}>Submit</button>\n    </div>\n  );\n}\n```\n\n### é—®é¢˜âš¡\n\nä¹ä¸€çœ‹ï¼Œä½ å¯èƒ½ä¼šé—®è¿™åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŸçŠ¶æ€ä¸å°±æ˜¯è¿™æ ·ç”¨çš„å—ï¼Ÿä½ å½“ç„¶æ²¡é”™ï¼Œå®ƒè¿è¡Œå¾ˆæ­£å¸¸ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯åœ¨ React ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€æ›´æ”¹éƒ½å°†å¼ºåˆ¶å¯¹è¯¥ç»„ä»¶ï¼Œå¾ˆæœ‰å¯èƒ½è¿˜æœ‰å…¶å­çº§è¿›è¡Œé‡æ¸²æŸ“ï¼Œä½†åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬ä»æœªåœ¨æ¸²æŸ“éƒ¨åˆ†ä¸­ä½¿ç”¨è¿™ä¸ªçŠ¶æ€ï¼Œç»“æœæ¯æ¬¡è®¾ç½®è®¡æ•°å™¨æ—¶éƒ½ä¼šæœ‰ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½æˆ–äº§ç”Ÿæ„å¤–çš„å‰¯ä½œç”¨ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nå¦‚æœè¦åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¸Œæœ›è¯¥å˜é‡åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒå…¶å€¼ï¼Œä½†åˆä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ useRef hookã€‚å®ƒå°†ä¿ç•™å€¼ï¼Œä½†ä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚\n\n```jsx\nfunction ClickButton(props) {\n  const count = useRef(0);\n  const onClickCount = () => {\n    count.current++;\n  };\n  const onClickRequest = () => {\n    apiCall(count.current);\n  };\n  return (\n    <div>\n      <button onClick={onClickCount}>Counter</button>\n      <button onClick={onClickRequest}>Submit</button>\n    </div>\n  );\n}\n```\n\n## 2. ä½¿ç”¨ router.push ä»£æ›¿é“¾æ¥\n\nè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå…¶å®å’Œ React æœ¬èº«æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯å½“äººä»¬ç¼–å†™ React ç»„ä»¶æ—¶ç»å¸¸ä¼šçŠ¯è¿™ç§é”™è¯¯ã€‚\n\nå‡è®¾ä½ è¦ç¼–å†™ä¸€ä¸ªæŒ‰é’®ï¼Œå•å‡»è¯¥æŒ‰é’®åº”å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ª SPAï¼Œå› æ­¤è¿™ä¸ªåŠ¨ä½œæ˜¯å®¢æˆ·ç«¯è·¯ç”±æœºåˆ¶ã€‚äºæ˜¯ä½ éœ€è¦æŸç§åº“æ¥æ‰§è¡Œæ­¤åŠ¨ä½œã€‚åœ¨ React ä¸­æœ€æµè¡Œçš„æ˜¯ react-routerï¼Œä¸‹é¢çš„ç¤ºä¾‹å°±ä¼šä½¿ç”¨å®ƒã€‚\n\næ‰€ä»¥ï¼Œæ·»åŠ ä¸€ä¸ªç‚¹å‡»ä¾¦å¬å™¨ä¼šå°†ç”¨æˆ·é‡å®šå‘åˆ°æ‰€éœ€çš„é¡µé¢ï¼Œå¯¹å—ï¼Ÿ\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction ClickButton(props) {\n  const history = useHistory();\n  const onClick = () => {\n    history.push('/next-page');\n  };\n  return <button onClick={onClick}>Go to next page</button>;\n}\n```\n\n### é—®é¢˜âš¡\n\nå°±ç®—è¿™æ®µä»£ç å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†è¿™é‡Œä¹Ÿæœ‰ä¸¥é‡çš„å¯è®¿é—®æ€§é—®é¢˜ã€‚è¿™ä¸ªæŒ‰é’®æ ¹æœ¬ä¸ä¼šè¢«æ ‡è®°ä¸ºé“¾æ¥åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œäºæ˜¯å±å¹•é˜…è¯»å™¨å‡ ä¹æ— æ³•è¯†åˆ«å®ƒã€‚è€Œä¸”ä½ èƒ½åœ¨æ–°æ ‡ç­¾é¡µæˆ–çª—å£ä¸­æ‰“å¼€å®ƒå—ï¼Ÿå¾ˆå¯èƒ½åšä¸åˆ°ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nåªè¦æŒ‡å‘å…¶ä»–é¡µé¢çš„é“¾æ¥å¸¦æœ‰æŸç§ç”¨æˆ·äº¤äº’ï¼Œå°±è¦å°½é‡ç”¨ < Link> ç»„ä»¶æˆ–å¸¸è§„çš„ < a> æ ‡ç­¾å¤„ç†ã€‚\n\n```jsx\nfunction ClickButton(props) {\n  return (\n    <Link to=\"/next-page\">\n      <span>Go to next page</span>\n    </Link>\n  );\n}\n```\n\nä¼˜ç‚¹ï¼šè¿™ä¹Ÿä½¿ä»£ç æ›´æ˜“è¯»ï¼Œæ›´çŸ­ï¼\n\n## 3. é€šè¿‡ useEffect å¤„ç†åŠ¨ä½œ\n\nReact å¼•å…¥çš„æœ€å¥½ç”¨ï¼Œæœ€è´´å¿ƒçš„ä¸€ä¸ª hook æ˜¯ useEffectã€‚å®ƒå¯ä»¥å¤„ç†ä¸ prop æˆ– state æ›´æ”¹ç›¸å…³çš„åŠ¨ä½œã€‚å¯å°±ç®—å®ƒå¾ˆå¥½ç”¨ï¼Œäººä»¬ä¹Ÿä¸è¯¥åˆ°å¤„æ»¥ç”¨å®ƒã€‚\n\næƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œå…¶è·å–ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨å¹¶å°†å…¶æ¸²æŸ“ç»™ domã€‚å¦å¤–ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œæˆ‘ä»¬å°†è°ƒç”¨â€œonSuccessâ€å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½œä¸ºä¸€ä¸ª prop ä¼ é€’ç»™è¿™ä¸ªç»„ä»¶ã€‚\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction DataList({ onSuccess }) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState(null);\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    callApi()\n      .then((res) => setData(res))\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  useEffect(() => {\n    if (!loading && !error && data) {\n      onSuccess();\n    }\n  }, [loading, error, data, onSuccess]);\n  return <div>Data: {data}</div>;\n}\n```\n\n### é—®é¢˜âš¡\n\nä¸€å…±æœ‰ä¸¤ä¸ª useEffect hooksï¼Œç¬¬ä¸€ä¸ªåœ¨åˆå§‹æ¸²æŸ“æ—¶å¤„ç† api è°ƒç”¨ï¼Œç¬¬äºŒä¸ªä¼šè°ƒç”¨ onSuccess å‡½æ•°ï¼Œå‡è®¾å½“çŠ¶æ€æ²¡æœ‰åŠ è½½ã€æ²¡æœ‰é”™è¯¯ä½†æœ‰æ•°æ®æ—¶è°ƒç”¨è‚¯å®šæˆåŠŸã€‚è¿™å¾ˆæœ‰é“ç†æ˜¯å§ï¼Ÿ\n\nå¯¹ç¬¬ä¸€ä¸ªè°ƒç”¨æ¥è¯´è¿™è‚¯å®šæ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå¤±è´¥ã€‚ä½†ä½ ä¹Ÿå¤±å»äº†åŠ¨ä½œå’Œéœ€è¦è°ƒç”¨çš„å‡½æ•°ä¹‹é—´çš„ç›´æ¥è”ç³»ã€‚åŒæ ·ä¹Ÿæ²¡æœ‰ 100ï¼…çš„ä¿è¯å¯ä»¥è¯´è¿™ç§æƒ…å†µä»…åœ¨ fetch åŠ¨ä½œæˆåŠŸåæ‰ä¼šå‘ç”Ÿï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜ä¸æƒ³çœ‹åˆ°çš„ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nä¸€ä¸ªç®€å•æ˜äº†çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†â€œonSuccessâ€å‡½æ•°è®¾ç½®ä¸ºè°ƒç”¨æˆåŠŸçš„å®é™…ä½ç½®ï¼š\n\n```jsx\nfunction DataList({ onSuccess }) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState(null);\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    callApi()\n      .then((fetchedData) => {\n        setData(fetchedData);\n        onSuccess();\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, [onSuccess]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  return <div>{data}</div>;\n}\n```\n\nç°åœ¨ä¸€ç›®äº†ç„¶äº†ï¼Œåœ¨ api è°ƒç”¨æˆåŠŸçš„æƒ…å†µä¸‹æ‰è°ƒç”¨ onSuccessã€‚\n\n## 4. å•ä¸€è´£ä»»ç»„ä»¶\n\nç»„åˆç»„ä»¶å¯èƒ½ä¸æ˜¯ä»€ä¹ˆè½»æ¾çš„äº‹æƒ…ã€‚ä»€ä¹ˆæ—¶å€™å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†ä¸ºå‡ ä¸ªè¾ƒå°çš„ç»„ä»¶ï¼Ÿå¦‚ä½•æ„é€ ç»„ä»¶æ ‘ï¼Ÿä½¿ç”¨åŸºäºç»„ä»¶çš„æ¡†æ¶æ—¶ï¼Œæ¯å¤©éƒ½ä¼šé‡åˆ°è¿™äº›é—®é¢˜ã€‚è®¾è®¡ç»„ä»¶æ—¶å¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯å°†ä¸¤ä¸ªç”¨ä¾‹åˆå¹¶åˆ°ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ä»¥ä¸€ä¸ª header ä¸ºä¾‹ï¼Œå…¶åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸€ä¸ªæ±‰å ¡æŒ‰é’®ï¼Œæˆ–åœ¨æ¡Œé¢å±å¹•ä¸Šæ˜¾ç¤ºæ ‡ç­¾ã€‚ï¼ˆè¿™é‡Œçš„æ¡ä»¶é€šè¿‡ç¥å¥‡çš„ isMobile å‡½æ•°å¤„ç†ï¼Œè¿™é‡Œå°±ä¸æ·±å…¥è®²è§£äº†ã€‚ï¼‰\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction Header(props) {\n  return (\n    <header>\n      <HeaderInner menuItems={menuItems} />\n    </header>\n  );\n}\nfunction HeaderInner({ menuItems }) {\n  return isMobile() ? \n        <BurgerButton menuItems={menuItems} /> : \n        <Tabs tabData={menuItems} />;\n}\n```\n\n### é—®é¢˜âš¡\n\nä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼ŒHeaderInner ç»„ä»¶è¯•å›¾åŒæ—¶å…¼é¡¾ä¸¤ä»¶äº‹æƒ…ï¼Œè€Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€å¿ƒæœ€å¥½ä¸è¦äºŒç”¨ã€‚è€Œä¸”ï¼Œè¿™ç§ç»„ä»¶å¾ˆéš¾åœ¨å…¶ä»–åœ°æ–¹æµ‹è¯•æˆ–é‡ç”¨ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nå°†æ¡ä»¶æé«˜ä¸€çº§ï¼Œè¿™æ ·å°±èƒ½æ›´å®¹æ˜“çœ‹æ¸…ç»„ä»¶çš„æœ¬æ¥ç”¨é€”ï¼Œææ˜ç™½å®ƒä»¬åªåº”è¯¥è´Ÿè´£ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ç®¡æ˜¯ Headerã€Tab æˆ– BurgerButton ä¹Ÿå¥½ï¼Œæ€»ä¹‹ä¸è¦ä¸€å¿ƒå¤šç”¨ã€‚\n\n```jsx\nfunction Header(props) {\n  return (\n    <header>\n        {\n            isMobile() ? \n                <BurgerButton menuItems={menuItems} /> : \n                <Tabs tabData={menuItems} />\n        }\n        </header>\n  );\n}\n```\n\n## 5. å•ä¸€è´£ä»»çš„ useEffects\n\nè¿˜è®°å¾—ä»¥å‰ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ componentWillReceiveProps æˆ– componentDidUpdate æ–¹æ³•æŒ‚æ¥åˆ° React ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹å—ï¼Ÿé‚£æ˜¯ä¸€æ®µé»‘æš—çš„å›å¿†ï¼Œä¹Ÿè®©æˆ‘ä»¬æ„è¯†åˆ°äº† useEffect hook çš„ç¾å¦™ä¹‹å¤„ï¼Œå°¤å…¶æ˜¯ä½ å¯ä»¥éšæ„ä½¿ç”¨è¿™äº› hooksã€‚\n\nä½†æ˜¯æœ‰æ—¶å› ä¸ºç²—å¿ƒè€Œè®©â€œuseEffectâ€èº«å…¼æ•°èŒï¼Œå°±ä¼šå¸¦å›é‚£äº›é»‘æš—çš„å›å¿†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç»„ä»¶ä»¥æŸç§æ–¹å¼ä»åç«¯è·å–ä¸€äº›æ•°æ®ï¼Œå¹¶ä¸”è¿˜ä¼šæ ¹æ®å½“å‰ä½ç½®æ˜¾ç¤ºé¢åŒ…å±‘ã€‚ï¼ˆå†æ¬¡ä½¿ç”¨ react-router è·å–å½“å‰ä½ç½®ã€‚ï¼‰\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction Example(props) {\n  const location = useLocation();\n  const fetchData = useCallback(() => {\n    /*  Calling the api */\n  }, []);\n  const updateBreadcrumbs = useCallback(() => {\n    /* Updating the breadcrumbs*/\n  }, []);\n  useEffect(() => {\n    fetchData();\n    updateBreadcrumbs();\n  }, [location.pathname, fetchData, updateBreadcrumbs]);\n  return (\n    <div>\n      <BreadCrumbs />\n    </div>\n  );\n}\n```\n\n### é—®é¢˜âš¡\n\nè¿™é‡Œæœ‰ä¸¤ä¸ªç”¨ä¾‹ï¼Œå³â€œæ•°æ®è·å–â€å’Œâ€œæ˜¾ç¤ºé¢åŒ…å±‘â€ã€‚ä¸¤è€…éƒ½é€šè¿‡ useEffect hook æ›´æ–°ã€‚å½“ fetchData å’Œ updateBreadcrumbs å‡½æ•°æˆ– location æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šè¿è¡Œè¿™ä¸ª useEffect hookã€‚ç°åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå½“ä½ç½®æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬è¿˜è°ƒç”¨äº† fetchData å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æˆ‘ä»¬æ²¡æœ‰æƒ³åˆ°çš„å‰¯ä½œç”¨ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\næŠŠæ•ˆæœæ‹†åˆ†å¼€æ¥ï¼Œç¡®ä¿å®ƒä»¬åªç”¨äºä¸€ç§æ•ˆæœï¼Œæ„å¤–çš„å‰¯ä½œç”¨ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚\n\n```jsx\nfunction Example(props) {\n  const location = useLocation();\n  const updateBreadcrumbs = useCallback(() => {\n    /* Updating the breadcrumbs*/\n  }, []);\n  useEffect(() => {\n    updateBreadcrumbs();\n  }, [location.pathname, updateBreadcrumbs]);\n  const fetchData = useCallback(() => {\n    /*  Calling the api */\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  return (\n    <div>\n      <BreadCrumbs />\n    </div>\n  );\n}\n```\n\n**é¢å¤–çš„æ”¶è·æ˜¯**ï¼Œè¿™äº›ç”¨ä¾‹ç°åœ¨ä¹Ÿåœ¨ç»„ä»¶å†…æŒ‰é¡ºåºæ’å¥½äº†ã€‚\n","source":"_posts/å‰ç«¯/ç¼–å†™ React ç»„ä»¶æ—¶å¸¸è§çš„ 5 ä¸ªé”™è¯¯.md","raw":"---\ntitle: ç¼–å†™ React ç»„ä»¶æ—¶å¸¸è§çš„ 5 ä¸ªé”™è¯¯\ndate: 2021-03-01\ncategories: [å‰ç«¯, react]\ntags: \n  - react\n---\n\n## 1. åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨ useState\n\nReact çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯å¤„ç†çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡çŠ¶æ€æ§åˆ¶æ•´ä¸ªæ•°æ®æµå’Œæ¸²æŸ“è¿‡ç¨‹ã€‚æ¯æ¬¡æ ‘è¢«é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºçŠ¶æ€çš„å˜åŒ–ã€‚\n\nä½¿ç”¨ useState hookï¼Œä½ ç°åœ¨è¿˜å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®šä¹‰çŠ¶æ€ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥çœŸæ­£ç®€æ´åœ°åœ¨ React ä¸­å¤„ç†çŠ¶æ€ã€‚ä½†æ­£å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼Œå®ƒä¹Ÿå¯èƒ½è¢«æ»¥ç”¨ã€‚\n\nå…³äºä¸‹é¢è¿™ä¸ªç¤ºä¾‹æˆ‘ä»¬éœ€è¦è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæŒ‰é’®æ˜¯è®¡æ•°å™¨ï¼Œå¦ä¸€ä¸ªæŒ‰é’®ä½¿ç”¨å½“å‰è®¡æ•°å‘é€è¯·æ±‚æˆ–è§¦å‘åŠ¨ä½œã€‚ä½†æ˜¯ï¼Œå½“å‰ç¼–å·æ°¸è¿œä¸ä¼šæ˜¾ç¤ºåœ¨ç»„ä»¶å†…ã€‚å½“ä½ å•å‡»ç¬¬äºŒä¸ªæŒ‰é’®æ—¶æ‰éœ€è¦è¿™ä¸ªè¯·æ±‚ã€‚\n\nè¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction ClickButton(props) {\n  const [count, setCount] = useState(0);\n  const onClickCount = () => {\n    setCount((c) => c + 1);\n  };\n  const onClickRequest = () => {\n    apiCall(count);\n  };\n  return (\n    <div>\n      <button onClick={onClickCount}>Counter</button>\n      <button onClick={onClickRequest}>Submit</button>\n    </div>\n  );\n}\n```\n\n### é—®é¢˜âš¡\n\nä¹ä¸€çœ‹ï¼Œä½ å¯èƒ½ä¼šé—®è¿™åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŸçŠ¶æ€ä¸å°±æ˜¯è¿™æ ·ç”¨çš„å—ï¼Ÿä½ å½“ç„¶æ²¡é”™ï¼Œå®ƒè¿è¡Œå¾ˆæ­£å¸¸ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯åœ¨ React ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€æ›´æ”¹éƒ½å°†å¼ºåˆ¶å¯¹è¯¥ç»„ä»¶ï¼Œå¾ˆæœ‰å¯èƒ½è¿˜æœ‰å…¶å­çº§è¿›è¡Œé‡æ¸²æŸ“ï¼Œä½†åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬ä»æœªåœ¨æ¸²æŸ“éƒ¨åˆ†ä¸­ä½¿ç”¨è¿™ä¸ªçŠ¶æ€ï¼Œç»“æœæ¯æ¬¡è®¾ç½®è®¡æ•°å™¨æ—¶éƒ½ä¼šæœ‰ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½æˆ–äº§ç”Ÿæ„å¤–çš„å‰¯ä½œç”¨ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nå¦‚æœè¦åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¸Œæœ›è¯¥å˜é‡åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒå…¶å€¼ï¼Œä½†åˆä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ useRef hookã€‚å®ƒå°†ä¿ç•™å€¼ï¼Œä½†ä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚\n\n```jsx\nfunction ClickButton(props) {\n  const count = useRef(0);\n  const onClickCount = () => {\n    count.current++;\n  };\n  const onClickRequest = () => {\n    apiCall(count.current);\n  };\n  return (\n    <div>\n      <button onClick={onClickCount}>Counter</button>\n      <button onClick={onClickRequest}>Submit</button>\n    </div>\n  );\n}\n```\n\n## 2. ä½¿ç”¨ router.push ä»£æ›¿é“¾æ¥\n\nè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå…¶å®å’Œ React æœ¬èº«æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯å½“äººä»¬ç¼–å†™ React ç»„ä»¶æ—¶ç»å¸¸ä¼šçŠ¯è¿™ç§é”™è¯¯ã€‚\n\nå‡è®¾ä½ è¦ç¼–å†™ä¸€ä¸ªæŒ‰é’®ï¼Œå•å‡»è¯¥æŒ‰é’®åº”å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ª SPAï¼Œå› æ­¤è¿™ä¸ªåŠ¨ä½œæ˜¯å®¢æˆ·ç«¯è·¯ç”±æœºåˆ¶ã€‚äºæ˜¯ä½ éœ€è¦æŸç§åº“æ¥æ‰§è¡Œæ­¤åŠ¨ä½œã€‚åœ¨ React ä¸­æœ€æµè¡Œçš„æ˜¯ react-routerï¼Œä¸‹é¢çš„ç¤ºä¾‹å°±ä¼šä½¿ç”¨å®ƒã€‚\n\næ‰€ä»¥ï¼Œæ·»åŠ ä¸€ä¸ªç‚¹å‡»ä¾¦å¬å™¨ä¼šå°†ç”¨æˆ·é‡å®šå‘åˆ°æ‰€éœ€çš„é¡µé¢ï¼Œå¯¹å—ï¼Ÿ\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction ClickButton(props) {\n  const history = useHistory();\n  const onClick = () => {\n    history.push('/next-page');\n  };\n  return <button onClick={onClick}>Go to next page</button>;\n}\n```\n\n### é—®é¢˜âš¡\n\nå°±ç®—è¿™æ®µä»£ç å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†è¿™é‡Œä¹Ÿæœ‰ä¸¥é‡çš„å¯è®¿é—®æ€§é—®é¢˜ã€‚è¿™ä¸ªæŒ‰é’®æ ¹æœ¬ä¸ä¼šè¢«æ ‡è®°ä¸ºé“¾æ¥åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œäºæ˜¯å±å¹•é˜…è¯»å™¨å‡ ä¹æ— æ³•è¯†åˆ«å®ƒã€‚è€Œä¸”ä½ èƒ½åœ¨æ–°æ ‡ç­¾é¡µæˆ–çª—å£ä¸­æ‰“å¼€å®ƒå—ï¼Ÿå¾ˆå¯èƒ½åšä¸åˆ°ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nåªè¦æŒ‡å‘å…¶ä»–é¡µé¢çš„é“¾æ¥å¸¦æœ‰æŸç§ç”¨æˆ·äº¤äº’ï¼Œå°±è¦å°½é‡ç”¨ < Link> ç»„ä»¶æˆ–å¸¸è§„çš„ < a> æ ‡ç­¾å¤„ç†ã€‚\n\n```jsx\nfunction ClickButton(props) {\n  return (\n    <Link to=\"/next-page\">\n      <span>Go to next page</span>\n    </Link>\n  );\n}\n```\n\nä¼˜ç‚¹ï¼šè¿™ä¹Ÿä½¿ä»£ç æ›´æ˜“è¯»ï¼Œæ›´çŸ­ï¼\n\n## 3. é€šè¿‡ useEffect å¤„ç†åŠ¨ä½œ\n\nReact å¼•å…¥çš„æœ€å¥½ç”¨ï¼Œæœ€è´´å¿ƒçš„ä¸€ä¸ª hook æ˜¯ useEffectã€‚å®ƒå¯ä»¥å¤„ç†ä¸ prop æˆ– state æ›´æ”¹ç›¸å…³çš„åŠ¨ä½œã€‚å¯å°±ç®—å®ƒå¾ˆå¥½ç”¨ï¼Œäººä»¬ä¹Ÿä¸è¯¥åˆ°å¤„æ»¥ç”¨å®ƒã€‚\n\næƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œå…¶è·å–ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨å¹¶å°†å…¶æ¸²æŸ“ç»™ domã€‚å¦å¤–ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œæˆ‘ä»¬å°†è°ƒç”¨â€œonSuccessâ€å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½œä¸ºä¸€ä¸ª prop ä¼ é€’ç»™è¿™ä¸ªç»„ä»¶ã€‚\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction DataList({ onSuccess }) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState(null);\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    callApi()\n      .then((res) => setData(res))\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  useEffect(() => {\n    if (!loading && !error && data) {\n      onSuccess();\n    }\n  }, [loading, error, data, onSuccess]);\n  return <div>Data: {data}</div>;\n}\n```\n\n### é—®é¢˜âš¡\n\nä¸€å…±æœ‰ä¸¤ä¸ª useEffect hooksï¼Œç¬¬ä¸€ä¸ªåœ¨åˆå§‹æ¸²æŸ“æ—¶å¤„ç† api è°ƒç”¨ï¼Œç¬¬äºŒä¸ªä¼šè°ƒç”¨ onSuccess å‡½æ•°ï¼Œå‡è®¾å½“çŠ¶æ€æ²¡æœ‰åŠ è½½ã€æ²¡æœ‰é”™è¯¯ä½†æœ‰æ•°æ®æ—¶è°ƒç”¨è‚¯å®šæˆåŠŸã€‚è¿™å¾ˆæœ‰é“ç†æ˜¯å§ï¼Ÿ\n\nå¯¹ç¬¬ä¸€ä¸ªè°ƒç”¨æ¥è¯´è¿™è‚¯å®šæ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå¤±è´¥ã€‚ä½†ä½ ä¹Ÿå¤±å»äº†åŠ¨ä½œå’Œéœ€è¦è°ƒç”¨çš„å‡½æ•°ä¹‹é—´çš„ç›´æ¥è”ç³»ã€‚åŒæ ·ä¹Ÿæ²¡æœ‰ 100ï¼…çš„ä¿è¯å¯ä»¥è¯´è¿™ç§æƒ…å†µä»…åœ¨ fetch åŠ¨ä½œæˆåŠŸåæ‰ä¼šå‘ç”Ÿï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜ä¸æƒ³çœ‹åˆ°çš„ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nä¸€ä¸ªç®€å•æ˜äº†çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†â€œonSuccessâ€å‡½æ•°è®¾ç½®ä¸ºè°ƒç”¨æˆåŠŸçš„å®é™…ä½ç½®ï¼š\n\n```jsx\nfunction DataList({ onSuccess }) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [data, setData] = useState(null);\n  const fetchData = useCallback(() => {\n    setLoading(true);\n    callApi()\n      .then((fetchedData) => {\n        setData(fetchedData);\n        onSuccess();\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, [onSuccess]);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  return <div>{data}</div>;\n}\n```\n\nç°åœ¨ä¸€ç›®äº†ç„¶äº†ï¼Œåœ¨ api è°ƒç”¨æˆåŠŸçš„æƒ…å†µä¸‹æ‰è°ƒç”¨ onSuccessã€‚\n\n## 4. å•ä¸€è´£ä»»ç»„ä»¶\n\nç»„åˆç»„ä»¶å¯èƒ½ä¸æ˜¯ä»€ä¹ˆè½»æ¾çš„äº‹æƒ…ã€‚ä»€ä¹ˆæ—¶å€™å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†ä¸ºå‡ ä¸ªè¾ƒå°çš„ç»„ä»¶ï¼Ÿå¦‚ä½•æ„é€ ç»„ä»¶æ ‘ï¼Ÿä½¿ç”¨åŸºäºç»„ä»¶çš„æ¡†æ¶æ—¶ï¼Œæ¯å¤©éƒ½ä¼šé‡åˆ°è¿™äº›é—®é¢˜ã€‚è®¾è®¡ç»„ä»¶æ—¶å¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯å°†ä¸¤ä¸ªç”¨ä¾‹åˆå¹¶åˆ°ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ä»¥ä¸€ä¸ª header ä¸ºä¾‹ï¼Œå…¶åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸€ä¸ªæ±‰å ¡æŒ‰é’®ï¼Œæˆ–åœ¨æ¡Œé¢å±å¹•ä¸Šæ˜¾ç¤ºæ ‡ç­¾ã€‚ï¼ˆè¿™é‡Œçš„æ¡ä»¶é€šè¿‡ç¥å¥‡çš„ isMobile å‡½æ•°å¤„ç†ï¼Œè¿™é‡Œå°±ä¸æ·±å…¥è®²è§£äº†ã€‚ï¼‰\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction Header(props) {\n  return (\n    <header>\n      <HeaderInner menuItems={menuItems} />\n    </header>\n  );\n}\nfunction HeaderInner({ menuItems }) {\n  return isMobile() ? \n        <BurgerButton menuItems={menuItems} /> : \n        <Tabs tabData={menuItems} />;\n}\n```\n\n### é—®é¢˜âš¡\n\nä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼ŒHeaderInner ç»„ä»¶è¯•å›¾åŒæ—¶å…¼é¡¾ä¸¤ä»¶äº‹æƒ…ï¼Œè€Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€å¿ƒæœ€å¥½ä¸è¦äºŒç”¨ã€‚è€Œä¸”ï¼Œè¿™ç§ç»„ä»¶å¾ˆéš¾åœ¨å…¶ä»–åœ°æ–¹æµ‹è¯•æˆ–é‡ç”¨ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\nå°†æ¡ä»¶æé«˜ä¸€çº§ï¼Œè¿™æ ·å°±èƒ½æ›´å®¹æ˜“çœ‹æ¸…ç»„ä»¶çš„æœ¬æ¥ç”¨é€”ï¼Œææ˜ç™½å®ƒä»¬åªåº”è¯¥è´Ÿè´£ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ç®¡æ˜¯ Headerã€Tab æˆ– BurgerButton ä¹Ÿå¥½ï¼Œæ€»ä¹‹ä¸è¦ä¸€å¿ƒå¤šç”¨ã€‚\n\n```jsx\nfunction Header(props) {\n  return (\n    <header>\n        {\n            isMobile() ? \n                <BurgerButton menuItems={menuItems} /> : \n                <Tabs tabData={menuItems} />\n        }\n        </header>\n  );\n}\n```\n\n## 5. å•ä¸€è´£ä»»çš„ useEffects\n\nè¿˜è®°å¾—ä»¥å‰ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ componentWillReceiveProps æˆ– componentDidUpdate æ–¹æ³•æŒ‚æ¥åˆ° React ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹å—ï¼Ÿé‚£æ˜¯ä¸€æ®µé»‘æš—çš„å›å¿†ï¼Œä¹Ÿè®©æˆ‘ä»¬æ„è¯†åˆ°äº† useEffect hook çš„ç¾å¦™ä¹‹å¤„ï¼Œå°¤å…¶æ˜¯ä½ å¯ä»¥éšæ„ä½¿ç”¨è¿™äº› hooksã€‚\n\nä½†æ˜¯æœ‰æ—¶å› ä¸ºç²—å¿ƒè€Œè®©â€œuseEffectâ€èº«å…¼æ•°èŒï¼Œå°±ä¼šå¸¦å›é‚£äº›é»‘æš—çš„å›å¿†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç»„ä»¶ä»¥æŸç§æ–¹å¼ä»åç«¯è·å–ä¸€äº›æ•°æ®ï¼Œå¹¶ä¸”è¿˜ä¼šæ ¹æ®å½“å‰ä½ç½®æ˜¾ç¤ºé¢åŒ…å±‘ã€‚ï¼ˆå†æ¬¡ä½¿ç”¨ react-router è·å–å½“å‰ä½ç½®ã€‚ï¼‰\n\n### è¿™å¾ˆå±é™©âŒ\n\n```jsx\nfunction Example(props) {\n  const location = useLocation();\n  const fetchData = useCallback(() => {\n    /*  Calling the api */\n  }, []);\n  const updateBreadcrumbs = useCallback(() => {\n    /* Updating the breadcrumbs*/\n  }, []);\n  useEffect(() => {\n    fetchData();\n    updateBreadcrumbs();\n  }, [location.pathname, fetchData, updateBreadcrumbs]);\n  return (\n    <div>\n      <BreadCrumbs />\n    </div>\n  );\n}\n```\n\n### é—®é¢˜âš¡\n\nè¿™é‡Œæœ‰ä¸¤ä¸ªç”¨ä¾‹ï¼Œå³â€œæ•°æ®è·å–â€å’Œâ€œæ˜¾ç¤ºé¢åŒ…å±‘â€ã€‚ä¸¤è€…éƒ½é€šè¿‡ useEffect hook æ›´æ–°ã€‚å½“ fetchData å’Œ updateBreadcrumbs å‡½æ•°æˆ– location æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šè¿è¡Œè¿™ä¸ª useEffect hookã€‚ç°åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå½“ä½ç½®æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬è¿˜è°ƒç”¨äº† fetchData å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æˆ‘ä»¬æ²¡æœ‰æƒ³åˆ°çš„å‰¯ä½œç”¨ã€‚\n\n### è§£å†³æ–¹æ¡ˆâœ…\n\næŠŠæ•ˆæœæ‹†åˆ†å¼€æ¥ï¼Œç¡®ä¿å®ƒä»¬åªç”¨äºä¸€ç§æ•ˆæœï¼Œæ„å¤–çš„å‰¯ä½œç”¨ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚\n\n```jsx\nfunction Example(props) {\n  const location = useLocation();\n  const updateBreadcrumbs = useCallback(() => {\n    /* Updating the breadcrumbs*/\n  }, []);\n  useEffect(() => {\n    updateBreadcrumbs();\n  }, [location.pathname, updateBreadcrumbs]);\n  const fetchData = useCallback(() => {\n    /*  Calling the api */\n  }, []);\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]);\n  return (\n    <div>\n      <BreadCrumbs />\n    </div>\n  );\n}\n```\n\n**é¢å¤–çš„æ”¶è·æ˜¯**ï¼Œè¿™äº›ç”¨ä¾‹ç°åœ¨ä¹Ÿåœ¨ç»„ä»¶å†…æŒ‰é¡ºåºæ’å¥½äº†ã€‚\n","slug":"å‰ç«¯/ç¼–å†™ React ç»„ä»¶æ—¶å¸¸è§çš„ 5 ä¸ªé”™è¯¯","published":1,"updated":"2021-04-07T07:39:11.351Z","_id":"ckn7476ai002iyx7y4htk6ur4","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨-useState\"><a href=\"#1-åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨-useState\" class=\"headerlink\" title=\"1. åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨ useState\"></a>1. åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨ useState</h2><p>React çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯å¤„ç†çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡çŠ¶æ€æ§åˆ¶æ•´ä¸ªæ•°æ®æµå’Œæ¸²æŸ“è¿‡ç¨‹ã€‚æ¯æ¬¡æ ‘è¢«é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºçŠ¶æ€çš„å˜åŒ–ã€‚</p>\n<p>ä½¿ç”¨ useState hookï¼Œä½ ç°åœ¨è¿˜å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®šä¹‰çŠ¶æ€ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥çœŸæ­£ç®€æ´åœ°åœ¨ React ä¸­å¤„ç†çŠ¶æ€ã€‚ä½†æ­£å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼Œå®ƒä¹Ÿå¯èƒ½è¢«æ»¥ç”¨ã€‚</p>\n<p>å…³äºä¸‹é¢è¿™ä¸ªç¤ºä¾‹æˆ‘ä»¬éœ€è¦è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæŒ‰é’®æ˜¯è®¡æ•°å™¨ï¼Œå¦ä¸€ä¸ªæŒ‰é’®ä½¿ç”¨å½“å‰è®¡æ•°å‘é€è¯·æ±‚æˆ–è§¦å‘åŠ¨ä½œã€‚ä½†æ˜¯ï¼Œå½“å‰ç¼–å·æ°¸è¿œä¸ä¼šæ˜¾ç¤ºåœ¨ç»„ä»¶å†…ã€‚å½“ä½ å•å‡»ç¬¬äºŒä¸ªæŒ‰é’®æ—¶æ‰éœ€è¦è¿™ä¸ªè¯·æ±‚ã€‚</p>\n<p>è¿™å¾ˆå±é™©âŒ</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickCount = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setCount(<span class=\"function\">(<span class=\"params\">c</span>) =&gt;</span> c + <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickRequest = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    apiCall(count);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickCount&#125;&gt;Counter&lt;/button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickRequest&#125;&gt;Submit&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡\"><a href=\"#é—®é¢˜âš¡\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>ä¹ä¸€çœ‹ï¼Œä½ å¯èƒ½ä¼šé—®è¿™åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŸçŠ¶æ€ä¸å°±æ˜¯è¿™æ ·ç”¨çš„å—ï¼Ÿä½ å½“ç„¶æ²¡é”™ï¼Œå®ƒè¿è¡Œå¾ˆæ­£å¸¸ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯åœ¨ React ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€æ›´æ”¹éƒ½å°†å¼ºåˆ¶å¯¹è¯¥ç»„ä»¶ï¼Œå¾ˆæœ‰å¯èƒ½è¿˜æœ‰å…¶å­çº§è¿›è¡Œé‡æ¸²æŸ“ï¼Œä½†åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬ä»æœªåœ¨æ¸²æŸ“éƒ¨åˆ†ä¸­ä½¿ç”¨è¿™ä¸ªçŠ¶æ€ï¼Œç»“æœæ¯æ¬¡è®¾ç½®è®¡æ•°å™¨æ—¶éƒ½ä¼šæœ‰ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½æˆ–äº§ç”Ÿæ„å¤–çš„å‰¯ä½œç”¨ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>å¦‚æœè¦åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¸Œæœ›è¯¥å˜é‡åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒå…¶å€¼ï¼Œä½†åˆä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ useRef hookã€‚å®ƒå°†ä¿ç•™å€¼ï¼Œä½†ä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = useRef(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickCount = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    count.current++;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickRequest = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    apiCall(count.current);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickCount&#125;&gt;Counter&lt;/button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickRequest&#125;&gt;Submit&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-ä½¿ç”¨-router-push-ä»£æ›¿é“¾æ¥\"><a href=\"#2-ä½¿ç”¨-router-push-ä»£æ›¿é“¾æ¥\" class=\"headerlink\" title=\"2. ä½¿ç”¨ router.push ä»£æ›¿é“¾æ¥\"></a>2. ä½¿ç”¨ router.push ä»£æ›¿é“¾æ¥</h2><p>è¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå…¶å®å’Œ React æœ¬èº«æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯å½“äººä»¬ç¼–å†™ React ç»„ä»¶æ—¶ç»å¸¸ä¼šçŠ¯è¿™ç§é”™è¯¯ã€‚</p>\n<p>å‡è®¾ä½ è¦ç¼–å†™ä¸€ä¸ªæŒ‰é’®ï¼Œå•å‡»è¯¥æŒ‰é’®åº”å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ª SPAï¼Œå› æ­¤è¿™ä¸ªåŠ¨ä½œæ˜¯å®¢æˆ·ç«¯è·¯ç”±æœºåˆ¶ã€‚äºæ˜¯ä½ éœ€è¦æŸç§åº“æ¥æ‰§è¡Œæ­¤åŠ¨ä½œã€‚åœ¨ React ä¸­æœ€æµè¡Œçš„æ˜¯ react-routerï¼Œä¸‹é¢çš„ç¤ºä¾‹å°±ä¼šä½¿ç”¨å®ƒã€‚</p>\n<p>æ‰€ä»¥ï¼Œæ·»åŠ ä¸€ä¸ªç‚¹å‡»ä¾¦å¬å™¨ä¼šå°†ç”¨æˆ·é‡å®šå‘åˆ°æ‰€éœ€çš„é¡µé¢ï¼Œå¯¹å—ï¼Ÿ</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ\"><a href=\"#è¿™å¾ˆå±é™©âŒ\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    history.push(<span class=\"string\">&#x27;/next-page&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;onClick&#125;</span>&gt;</span>Go to next page<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-1\"><a href=\"#é—®é¢˜âš¡-1\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>å°±ç®—è¿™æ®µä»£ç å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†è¿™é‡Œä¹Ÿæœ‰ä¸¥é‡çš„å¯è®¿é—®æ€§é—®é¢˜ã€‚è¿™ä¸ªæŒ‰é’®æ ¹æœ¬ä¸ä¼šè¢«æ ‡è®°ä¸ºé“¾æ¥åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œäºæ˜¯å±å¹•é˜…è¯»å™¨å‡ ä¹æ— æ³•è¯†åˆ«å®ƒã€‚è€Œä¸”ä½ èƒ½åœ¨æ–°æ ‡ç­¾é¡µæˆ–çª—å£ä¸­æ‰“å¼€å®ƒå—ï¼Ÿå¾ˆå¯èƒ½åšä¸åˆ°ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-1\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-1\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>åªè¦æŒ‡å‘å…¶ä»–é¡µé¢çš„é“¾æ¥å¸¦æœ‰æŸç§ç”¨æˆ·äº¤äº’ï¼Œå°±è¦å°½é‡ç”¨ &lt; Link&gt; ç»„ä»¶æˆ–å¸¸è§„çš„ &lt; a&gt; æ ‡ç­¾å¤„ç†ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Link to=<span class=\"string\">&quot;/next-page&quot;</span>&gt;</span><br><span class=\"line\">      &lt;span&gt;Go to next page&lt;/span&gt;</span><br><span class=\"line\">    &lt;/Link&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¼˜ç‚¹ï¼šè¿™ä¹Ÿä½¿ä»£ç æ›´æ˜“è¯»ï¼Œæ›´çŸ­ï¼</p>\n<h2 id=\"3-é€šè¿‡-useEffect-å¤„ç†åŠ¨ä½œ\"><a href=\"#3-é€šè¿‡-useEffect-å¤„ç†åŠ¨ä½œ\" class=\"headerlink\" title=\"3. é€šè¿‡ useEffect å¤„ç†åŠ¨ä½œ\"></a>3. é€šè¿‡ useEffect å¤„ç†åŠ¨ä½œ</h2><p>React å¼•å…¥çš„æœ€å¥½ç”¨ï¼Œæœ€è´´å¿ƒçš„ä¸€ä¸ª hook æ˜¯ useEffectã€‚å®ƒå¯ä»¥å¤„ç†ä¸ prop æˆ– state æ›´æ”¹ç›¸å…³çš„åŠ¨ä½œã€‚å¯å°±ç®—å®ƒå¾ˆå¥½ç”¨ï¼Œäººä»¬ä¹Ÿä¸è¯¥åˆ°å¤„æ»¥ç”¨å®ƒã€‚</p>\n<p>æƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œå…¶è·å–ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨å¹¶å°†å…¶æ¸²æŸ“ç»™ domã€‚å¦å¤–ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œæˆ‘ä»¬å°†è°ƒç”¨â€œonSuccessâ€å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½œä¸ºä¸€ä¸ª prop ä¼ é€’ç»™è¿™ä¸ªç»„ä»¶ã€‚</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ-1\"><a href=\"#è¿™å¾ˆå±é™©âŒ-1\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DataList</span>(<span class=\"params\">&#123; onSuccess &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [loading, setLoading] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setLoading(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    callApi()</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> setData(res))</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> setError(err))</span><br><span class=\"line\">      .finally(<span class=\"function\">() =&gt;</span> setLoading(<span class=\"literal\">false</span>));</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">  &#125;, [fetchData]);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!loading &amp;&amp; !error &amp;&amp; data) &#123;</span><br><span class=\"line\">      onSuccess();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [loading, error, data, onSuccess]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Data: &#123;data&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-2\"><a href=\"#é—®é¢˜âš¡-2\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>ä¸€å…±æœ‰ä¸¤ä¸ª useEffect hooksï¼Œç¬¬ä¸€ä¸ªåœ¨åˆå§‹æ¸²æŸ“æ—¶å¤„ç† api è°ƒç”¨ï¼Œç¬¬äºŒä¸ªä¼šè°ƒç”¨ onSuccess å‡½æ•°ï¼Œå‡è®¾å½“çŠ¶æ€æ²¡æœ‰åŠ è½½ã€æ²¡æœ‰é”™è¯¯ä½†æœ‰æ•°æ®æ—¶è°ƒç”¨è‚¯å®šæˆåŠŸã€‚è¿™å¾ˆæœ‰é“ç†æ˜¯å§ï¼Ÿ</p>\n<p>å¯¹ç¬¬ä¸€ä¸ªè°ƒç”¨æ¥è¯´è¿™è‚¯å®šæ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå¤±è´¥ã€‚ä½†ä½ ä¹Ÿå¤±å»äº†åŠ¨ä½œå’Œéœ€è¦è°ƒç”¨çš„å‡½æ•°ä¹‹é—´çš„ç›´æ¥è”ç³»ã€‚åŒæ ·ä¹Ÿæ²¡æœ‰ 100ï¼…çš„ä¿è¯å¯ä»¥è¯´è¿™ç§æƒ…å†µä»…åœ¨ fetch åŠ¨ä½œæˆåŠŸåæ‰ä¼šå‘ç”Ÿï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜ä¸æƒ³çœ‹åˆ°çš„ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-2\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-2\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>ä¸€ä¸ªç®€å•æ˜äº†çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†â€œonSuccessâ€å‡½æ•°è®¾ç½®ä¸ºè°ƒç”¨æˆåŠŸçš„å®é™…ä½ç½®ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DataList</span>(<span class=\"params\">&#123; onSuccess &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [loading, setLoading] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setLoading(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    callApi()</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">fetchedData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        setData(fetchedData);</span><br><span class=\"line\">        onSuccess();</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> setError(err))</span><br><span class=\"line\">      .finally(<span class=\"function\">() =&gt;</span> setLoading(<span class=\"literal\">false</span>));</span><br><span class=\"line\">  &#125;, [onSuccess]);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">  &#125;, [fetchData]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;data&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç°åœ¨ä¸€ç›®äº†ç„¶äº†ï¼Œåœ¨ api è°ƒç”¨æˆåŠŸçš„æƒ…å†µä¸‹æ‰è°ƒç”¨ onSuccessã€‚</p>\n<h2 id=\"4-å•ä¸€è´£ä»»ç»„ä»¶\"><a href=\"#4-å•ä¸€è´£ä»»ç»„ä»¶\" class=\"headerlink\" title=\"4. å•ä¸€è´£ä»»ç»„ä»¶\"></a>4. å•ä¸€è´£ä»»ç»„ä»¶</h2><p>ç»„åˆç»„ä»¶å¯èƒ½ä¸æ˜¯ä»€ä¹ˆè½»æ¾çš„äº‹æƒ…ã€‚ä»€ä¹ˆæ—¶å€™å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†ä¸ºå‡ ä¸ªè¾ƒå°çš„ç»„ä»¶ï¼Ÿå¦‚ä½•æ„é€ ç»„ä»¶æ ‘ï¼Ÿä½¿ç”¨åŸºäºç»„ä»¶çš„æ¡†æ¶æ—¶ï¼Œæ¯å¤©éƒ½ä¼šé‡åˆ°è¿™äº›é—®é¢˜ã€‚è®¾è®¡ç»„ä»¶æ—¶å¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯å°†ä¸¤ä¸ªç”¨ä¾‹åˆå¹¶åˆ°ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ä»¥ä¸€ä¸ª header ä¸ºä¾‹ï¼Œå…¶åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸€ä¸ªæ±‰å ¡æŒ‰é’®ï¼Œæˆ–åœ¨æ¡Œé¢å±å¹•ä¸Šæ˜¾ç¤ºæ ‡ç­¾ã€‚ï¼ˆè¿™é‡Œçš„æ¡ä»¶é€šè¿‡ç¥å¥‡çš„ isMobile å‡½æ•°å¤„ç†ï¼Œè¿™é‡Œå°±ä¸æ·±å…¥è®²è§£äº†ã€‚ï¼‰</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ-2\"><a href=\"#è¿™å¾ˆå±é™©âŒ-2\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;header&gt;</span><br><span class=\"line\">      &lt;HeaderInner menuItems=&#123;menuItems&#125; /&gt;</span><br><span class=\"line\">    &lt;/header&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HeaderInner</span>(<span class=\"params\">&#123; menuItems &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isMobile() ? </span><br><span class=\"line\">        &lt;BurgerButton menuItems=&#123;menuItems&#125; /&gt; : </span><br><span class=\"line\">        &lt;Tabs tabData=&#123;menuItems&#125; /&gt;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-3\"><a href=\"#é—®é¢˜âš¡-3\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼ŒHeaderInner ç»„ä»¶è¯•å›¾åŒæ—¶å…¼é¡¾ä¸¤ä»¶äº‹æƒ…ï¼Œè€Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€å¿ƒæœ€å¥½ä¸è¦äºŒç”¨ã€‚è€Œä¸”ï¼Œè¿™ç§ç»„ä»¶å¾ˆéš¾åœ¨å…¶ä»–åœ°æ–¹æµ‹è¯•æˆ–é‡ç”¨ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-3\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-3\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>å°†æ¡ä»¶æé«˜ä¸€çº§ï¼Œè¿™æ ·å°±èƒ½æ›´å®¹æ˜“çœ‹æ¸…ç»„ä»¶çš„æœ¬æ¥ç”¨é€”ï¼Œææ˜ç™½å®ƒä»¬åªåº”è¯¥è´Ÿè´£ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ç®¡æ˜¯ Headerã€Tab æˆ– BurgerButton ä¹Ÿå¥½ï¼Œæ€»ä¹‹ä¸è¦ä¸€å¿ƒå¤šç”¨ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;header&gt;</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            isMobile() ? </span><br><span class=\"line\">                &lt;BurgerButton menuItems=&#123;menuItems&#125; /&gt; : </span><br><span class=\"line\">                &lt;Tabs tabData=&#123;menuItems&#125; /&gt;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &lt;/header&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-å•ä¸€è´£ä»»çš„-useEffects\"><a href=\"#5-å•ä¸€è´£ä»»çš„-useEffects\" class=\"headerlink\" title=\"5. å•ä¸€è´£ä»»çš„ useEffects\"></a>5. å•ä¸€è´£ä»»çš„ useEffects</h2><p>è¿˜è®°å¾—ä»¥å‰ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ componentWillReceiveProps æˆ– componentDidUpdate æ–¹æ³•æŒ‚æ¥åˆ° React ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹å—ï¼Ÿé‚£æ˜¯ä¸€æ®µé»‘æš—çš„å›å¿†ï¼Œä¹Ÿè®©æˆ‘ä»¬æ„è¯†åˆ°äº† useEffect hook çš„ç¾å¦™ä¹‹å¤„ï¼Œå°¤å…¶æ˜¯ä½ å¯ä»¥éšæ„ä½¿ç”¨è¿™äº› hooksã€‚</p>\n<p>ä½†æ˜¯æœ‰æ—¶å› ä¸ºç²—å¿ƒè€Œè®©â€œuseEffectâ€èº«å…¼æ•°èŒï¼Œå°±ä¼šå¸¦å›é‚£äº›é»‘æš—çš„å›å¿†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç»„ä»¶ä»¥æŸç§æ–¹å¼ä»åç«¯è·å–ä¸€äº›æ•°æ®ï¼Œå¹¶ä¸”è¿˜ä¼šæ ¹æ®å½“å‰ä½ç½®æ˜¾ç¤ºé¢åŒ…å±‘ã€‚ï¼ˆå†æ¬¡ä½¿ç”¨ react-router è·å–å½“å‰ä½ç½®ã€‚ï¼‰</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ-3\"><a href=\"#è¿™å¾ˆå±é™©âŒ-3\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  Calling the api */</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> updateBreadcrumbs = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* Updating the breadcrumbs*/</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">    updateBreadcrumbs();</span><br><span class=\"line\">  &#125;, [location.pathname, fetchData, updateBreadcrumbs]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BreadCrumbs /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-4\"><a href=\"#é—®é¢˜âš¡-4\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>è¿™é‡Œæœ‰ä¸¤ä¸ªç”¨ä¾‹ï¼Œå³â€œæ•°æ®è·å–â€å’Œâ€œæ˜¾ç¤ºé¢åŒ…å±‘â€ã€‚ä¸¤è€…éƒ½é€šè¿‡ useEffect hook æ›´æ–°ã€‚å½“ fetchData å’Œ updateBreadcrumbs å‡½æ•°æˆ– location æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šè¿è¡Œè¿™ä¸ª useEffect hookã€‚ç°åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå½“ä½ç½®æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬è¿˜è°ƒç”¨äº† fetchData å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æˆ‘ä»¬æ²¡æœ‰æƒ³åˆ°çš„å‰¯ä½œç”¨ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-4\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-4\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>æŠŠæ•ˆæœæ‹†åˆ†å¼€æ¥ï¼Œç¡®ä¿å®ƒä»¬åªç”¨äºä¸€ç§æ•ˆæœï¼Œæ„å¤–çš„å‰¯ä½œç”¨ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> updateBreadcrumbs = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* Updating the breadcrumbs*/</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    updateBreadcrumbs();</span><br><span class=\"line\">  &#125;, [location.pathname, updateBreadcrumbs]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  Calling the api */</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">  &#125;, [fetchData]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BreadCrumbs /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>é¢å¤–çš„æ”¶è·æ˜¯</strong>ï¼Œè¿™äº›ç”¨ä¾‹ç°åœ¨ä¹Ÿåœ¨ç»„ä»¶å†…æŒ‰é¡ºåºæ’å¥½äº†ã€‚</p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨-useState\"><a href=\"#1-åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨-useState\" class=\"headerlink\" title=\"1. åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨ useState\"></a>1. åœ¨ä¸éœ€è¦é‡æ¸²æŸ“æ—¶ä½¿ç”¨ useState</h2><p>React çš„ä¸€ä¸ªæ ¸å¿ƒæ¦‚å¿µæ˜¯å¤„ç†çŠ¶æ€ã€‚ä½ å¯ä»¥é€šè¿‡çŠ¶æ€æ§åˆ¶æ•´ä¸ªæ•°æ®æµå’Œæ¸²æŸ“è¿‡ç¨‹ã€‚æ¯æ¬¡æ ‘è¢«é‡æ–°æ¸²æŸ“æ—¶ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºçŠ¶æ€çš„å˜åŒ–ã€‚</p>\n<p>ä½¿ç”¨ useState hookï¼Œä½ ç°åœ¨è¿˜å¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®šä¹‰çŠ¶æ€ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥çœŸæ­£ç®€æ´åœ°åœ¨ React ä¸­å¤„ç†çŠ¶æ€ã€‚ä½†æ­£å¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼Œå®ƒä¹Ÿå¯èƒ½è¢«æ»¥ç”¨ã€‚</p>\n<p>å…³äºä¸‹é¢è¿™ä¸ªç¤ºä¾‹æˆ‘ä»¬éœ€è¦è¯´æ˜ä¸€ä¸‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæŒ‰é’®æ˜¯è®¡æ•°å™¨ï¼Œå¦ä¸€ä¸ªæŒ‰é’®ä½¿ç”¨å½“å‰è®¡æ•°å‘é€è¯·æ±‚æˆ–è§¦å‘åŠ¨ä½œã€‚ä½†æ˜¯ï¼Œå½“å‰ç¼–å·æ°¸è¿œä¸ä¼šæ˜¾ç¤ºåœ¨ç»„ä»¶å†…ã€‚å½“ä½ å•å‡»ç¬¬äºŒä¸ªæŒ‰é’®æ—¶æ‰éœ€è¦è¿™ä¸ªè¯·æ±‚ã€‚</p>\n<p>è¿™å¾ˆå±é™©âŒ</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickCount = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setCount(<span class=\"function\">(<span class=\"params\">c</span>) =&gt;</span> c + <span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickRequest = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    apiCall(count);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickCount&#125;&gt;Counter&lt;/button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickRequest&#125;&gt;Submit&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡\"><a href=\"#é—®é¢˜âš¡\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>ä¹ä¸€çœ‹ï¼Œä½ å¯èƒ½ä¼šé—®è¿™åˆ°åº•æœ‰ä»€ä¹ˆé—®é¢˜ï¼ŸçŠ¶æ€ä¸å°±æ˜¯è¿™æ ·ç”¨çš„å—ï¼Ÿä½ å½“ç„¶æ²¡é”™ï¼Œå®ƒè¿è¡Œå¾ˆæ­£å¸¸ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå‡ºé—®é¢˜ï¼Œä½†æ˜¯åœ¨ React ä¸­ï¼Œæ¯ä¸ªçŠ¶æ€æ›´æ”¹éƒ½å°†å¼ºåˆ¶å¯¹è¯¥ç»„ä»¶ï¼Œå¾ˆæœ‰å¯èƒ½è¿˜æœ‰å…¶å­çº§è¿›è¡Œé‡æ¸²æŸ“ï¼Œä½†åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬ä»æœªåœ¨æ¸²æŸ“éƒ¨åˆ†ä¸­ä½¿ç”¨è¿™ä¸ªçŠ¶æ€ï¼Œç»“æœæ¯æ¬¡è®¾ç½®è®¡æ•°å™¨æ—¶éƒ½ä¼šæœ‰ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½æˆ–äº§ç”Ÿæ„å¤–çš„å‰¯ä½œç”¨ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>å¦‚æœè¦åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼Œå¸Œæœ›è¯¥å˜é‡åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒå…¶å€¼ï¼Œä½†åˆä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ useRef hookã€‚å®ƒå°†ä¿ç•™å€¼ï¼Œä½†ä¸å¼ºåˆ¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = useRef(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickCount = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    count.current++;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClickRequest = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    apiCall(count.current);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickCount&#125;&gt;Counter&lt;/button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;onClickRequest&#125;&gt;Submit&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-ä½¿ç”¨-router-push-ä»£æ›¿é“¾æ¥\"><a href=\"#2-ä½¿ç”¨-router-push-ä»£æ›¿é“¾æ¥\" class=\"headerlink\" title=\"2. ä½¿ç”¨ router.push ä»£æ›¿é“¾æ¥\"></a>2. ä½¿ç”¨ router.push ä»£æ›¿é“¾æ¥</h2><p>è¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå…¶å®å’Œ React æœ¬èº«æ²¡ä»€ä¹ˆå…³ç³»ï¼Œä½†æ˜¯å½“äººä»¬ç¼–å†™ React ç»„ä»¶æ—¶ç»å¸¸ä¼šçŠ¯è¿™ç§é”™è¯¯ã€‚</p>\n<p>å‡è®¾ä½ è¦ç¼–å†™ä¸€ä¸ªæŒ‰é’®ï¼Œå•å‡»è¯¥æŒ‰é’®åº”å°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ª SPAï¼Œå› æ­¤è¿™ä¸ªåŠ¨ä½œæ˜¯å®¢æˆ·ç«¯è·¯ç”±æœºåˆ¶ã€‚äºæ˜¯ä½ éœ€è¦æŸç§åº“æ¥æ‰§è¡Œæ­¤åŠ¨ä½œã€‚åœ¨ React ä¸­æœ€æµè¡Œçš„æ˜¯ react-routerï¼Œä¸‹é¢çš„ç¤ºä¾‹å°±ä¼šä½¿ç”¨å®ƒã€‚</p>\n<p>æ‰€ä»¥ï¼Œæ·»åŠ ä¸€ä¸ªç‚¹å‡»ä¾¦å¬å™¨ä¼šå°†ç”¨æˆ·é‡å®šå‘åˆ°æ‰€éœ€çš„é¡µé¢ï¼Œå¯¹å—ï¼Ÿ</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ\"><a href=\"#è¿™å¾ˆå±é™©âŒ\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> history = useHistory();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> onClick = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    history.push(<span class=\"string\">&#x27;/next-page&#x27;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;onClick&#125;</span>&gt;</span>Go to next page<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-1\"><a href=\"#é—®é¢˜âš¡-1\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>å°±ç®—è¿™æ®µä»£ç å¯¹äºå¤§å¤šæ•°ç”¨æˆ·æ¥è¯´éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œï¼Œä½†è¿™é‡Œä¹Ÿæœ‰ä¸¥é‡çš„å¯è®¿é—®æ€§é—®é¢˜ã€‚è¿™ä¸ªæŒ‰é’®æ ¹æœ¬ä¸ä¼šè¢«æ ‡è®°ä¸ºé“¾æ¥åˆ°å¦ä¸€ä¸ªé¡µé¢ï¼Œäºæ˜¯å±å¹•é˜…è¯»å™¨å‡ ä¹æ— æ³•è¯†åˆ«å®ƒã€‚è€Œä¸”ä½ èƒ½åœ¨æ–°æ ‡ç­¾é¡µæˆ–çª—å£ä¸­æ‰“å¼€å®ƒå—ï¼Ÿå¾ˆå¯èƒ½åšä¸åˆ°ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-1\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-1\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>åªè¦æŒ‡å‘å…¶ä»–é¡µé¢çš„é“¾æ¥å¸¦æœ‰æŸç§ç”¨æˆ·äº¤äº’ï¼Œå°±è¦å°½é‡ç”¨ &lt; Link&gt; ç»„ä»¶æˆ–å¸¸è§„çš„ &lt; a&gt; æ ‡ç­¾å¤„ç†ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ClickButton</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Link to=<span class=\"string\">&quot;/next-page&quot;</span>&gt;</span><br><span class=\"line\">      &lt;span&gt;Go to next page&lt;/span&gt;</span><br><span class=\"line\">    &lt;/Link&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ä¼˜ç‚¹ï¼šè¿™ä¹Ÿä½¿ä»£ç æ›´æ˜“è¯»ï¼Œæ›´çŸ­ï¼</p>\n<h2 id=\"3-é€šè¿‡-useEffect-å¤„ç†åŠ¨ä½œ\"><a href=\"#3-é€šè¿‡-useEffect-å¤„ç†åŠ¨ä½œ\" class=\"headerlink\" title=\"3. é€šè¿‡ useEffect å¤„ç†åŠ¨ä½œ\"></a>3. é€šè¿‡ useEffect å¤„ç†åŠ¨ä½œ</h2><p>React å¼•å…¥çš„æœ€å¥½ç”¨ï¼Œæœ€è´´å¿ƒçš„ä¸€ä¸ª hook æ˜¯ useEffectã€‚å®ƒå¯ä»¥å¤„ç†ä¸ prop æˆ– state æ›´æ”¹ç›¸å…³çš„åŠ¨ä½œã€‚å¯å°±ç®—å®ƒå¾ˆå¥½ç”¨ï¼Œäººä»¬ä¹Ÿä¸è¯¥åˆ°å¤„æ»¥ç”¨å®ƒã€‚</p>\n<p>æƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªç»„ä»¶ï¼Œå…¶è·å–ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨å¹¶å°†å…¶æ¸²æŸ“ç»™ domã€‚å¦å¤–ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œæˆ‘ä»¬å°†è°ƒç”¨â€œonSuccessâ€å‡½æ•°ï¼Œè¯¥å‡½æ•°ä½œä¸ºä¸€ä¸ª prop ä¼ é€’ç»™è¿™ä¸ªç»„ä»¶ã€‚</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ-1\"><a href=\"#è¿™å¾ˆå±é™©âŒ-1\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DataList</span>(<span class=\"params\">&#123; onSuccess &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [loading, setLoading] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setLoading(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    callApi()</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> setData(res))</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> setError(err))</span><br><span class=\"line\">      .finally(<span class=\"function\">() =&gt;</span> setLoading(<span class=\"literal\">false</span>));</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">  &#125;, [fetchData]);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!loading &amp;&amp; !error &amp;&amp; data) &#123;</span><br><span class=\"line\">      onSuccess();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;, [loading, error, data, onSuccess]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>Data: &#123;data&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-2\"><a href=\"#é—®é¢˜âš¡-2\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>ä¸€å…±æœ‰ä¸¤ä¸ª useEffect hooksï¼Œç¬¬ä¸€ä¸ªåœ¨åˆå§‹æ¸²æŸ“æ—¶å¤„ç† api è°ƒç”¨ï¼Œç¬¬äºŒä¸ªä¼šè°ƒç”¨ onSuccess å‡½æ•°ï¼Œå‡è®¾å½“çŠ¶æ€æ²¡æœ‰åŠ è½½ã€æ²¡æœ‰é”™è¯¯ä½†æœ‰æ•°æ®æ—¶è°ƒç”¨è‚¯å®šæˆåŠŸã€‚è¿™å¾ˆæœ‰é“ç†æ˜¯å§ï¼Ÿ</p>\n<p>å¯¹ç¬¬ä¸€ä¸ªè°ƒç”¨æ¥è¯´è¿™è‚¯å®šæ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”å¯èƒ½æ°¸è¿œä¸ä¼šå¤±è´¥ã€‚ä½†ä½ ä¹Ÿå¤±å»äº†åŠ¨ä½œå’Œéœ€è¦è°ƒç”¨çš„å‡½æ•°ä¹‹é—´çš„ç›´æ¥è”ç³»ã€‚åŒæ ·ä¹Ÿæ²¡æœ‰ 100ï¼…çš„ä¿è¯å¯ä»¥è¯´è¿™ç§æƒ…å†µä»…åœ¨ fetch åŠ¨ä½œæˆåŠŸåæ‰ä¼šå‘ç”Ÿï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬å¼€å‘äººå‘˜ä¸æƒ³çœ‹åˆ°çš„ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-2\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-2\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>ä¸€ä¸ªç®€å•æ˜äº†çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†â€œonSuccessâ€å‡½æ•°è®¾ç½®ä¸ºè°ƒç”¨æˆåŠŸçš„å®é™…ä½ç½®ï¼š</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">DataList</span>(<span class=\"params\">&#123; onSuccess &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [loading, setLoading] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [error, setError] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [data, setData] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    setLoading(<span class=\"literal\">true</span>);</span><br><span class=\"line\">    callApi()</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">fetchedData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        setData(fetchedData);</span><br><span class=\"line\">        onSuccess();</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">      .catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> setError(err))</span><br><span class=\"line\">      .finally(<span class=\"function\">() =&gt;</span> setLoading(<span class=\"literal\">false</span>));</span><br><span class=\"line\">  &#125;, [onSuccess]);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">  &#125;, [fetchData]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>&#123;data&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>ç°åœ¨ä¸€ç›®äº†ç„¶äº†ï¼Œåœ¨ api è°ƒç”¨æˆåŠŸçš„æƒ…å†µä¸‹æ‰è°ƒç”¨ onSuccessã€‚</p>\n<h2 id=\"4-å•ä¸€è´£ä»»ç»„ä»¶\"><a href=\"#4-å•ä¸€è´£ä»»ç»„ä»¶\" class=\"headerlink\" title=\"4. å•ä¸€è´£ä»»ç»„ä»¶\"></a>4. å•ä¸€è´£ä»»ç»„ä»¶</h2><p>ç»„åˆç»„ä»¶å¯èƒ½ä¸æ˜¯ä»€ä¹ˆè½»æ¾çš„äº‹æƒ…ã€‚ä»€ä¹ˆæ—¶å€™å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†ä¸ºå‡ ä¸ªè¾ƒå°çš„ç»„ä»¶ï¼Ÿå¦‚ä½•æ„é€ ç»„ä»¶æ ‘ï¼Ÿä½¿ç”¨åŸºäºç»„ä»¶çš„æ¡†æ¶æ—¶ï¼Œæ¯å¤©éƒ½ä¼šé‡åˆ°è¿™äº›é—®é¢˜ã€‚è®¾è®¡ç»„ä»¶æ—¶å¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯å°†ä¸¤ä¸ªç”¨ä¾‹åˆå¹¶åˆ°ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ä»¥ä¸€ä¸ª header ä¸ºä¾‹ï¼Œå…¶åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸€ä¸ªæ±‰å ¡æŒ‰é’®ï¼Œæˆ–åœ¨æ¡Œé¢å±å¹•ä¸Šæ˜¾ç¤ºæ ‡ç­¾ã€‚ï¼ˆè¿™é‡Œçš„æ¡ä»¶é€šè¿‡ç¥å¥‡çš„ isMobile å‡½æ•°å¤„ç†ï¼Œè¿™é‡Œå°±ä¸æ·±å…¥è®²è§£äº†ã€‚ï¼‰</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ-2\"><a href=\"#è¿™å¾ˆå±é™©âŒ-2\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;header&gt;</span><br><span class=\"line\">      &lt;HeaderInner menuItems=&#123;menuItems&#125; /&gt;</span><br><span class=\"line\">    &lt;/header&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">HeaderInner</span>(<span class=\"params\">&#123; menuItems &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isMobile() ? </span><br><span class=\"line\">        &lt;BurgerButton menuItems=&#123;menuItems&#125; /&gt; : </span><br><span class=\"line\">        &lt;Tabs tabData=&#123;menuItems&#125; /&gt;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-3\"><a href=\"#é—®é¢˜âš¡-3\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼ŒHeaderInner ç»„ä»¶è¯•å›¾åŒæ—¶å…¼é¡¾ä¸¤ä»¶äº‹æƒ…ï¼Œè€Œæˆ‘ä»¬éƒ½çŸ¥é“ä¸€å¿ƒæœ€å¥½ä¸è¦äºŒç”¨ã€‚è€Œä¸”ï¼Œè¿™ç§ç»„ä»¶å¾ˆéš¾åœ¨å…¶ä»–åœ°æ–¹æµ‹è¯•æˆ–é‡ç”¨ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-3\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-3\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>å°†æ¡ä»¶æé«˜ä¸€çº§ï¼Œè¿™æ ·å°±èƒ½æ›´å®¹æ˜“çœ‹æ¸…ç»„ä»¶çš„æœ¬æ¥ç”¨é€”ï¼Œææ˜ç™½å®ƒä»¬åªåº”è¯¥è´Ÿè´£ä¸€ä¸ªä»»åŠ¡ï¼Œä¸ç®¡æ˜¯ Headerã€Tab æˆ– BurgerButton ä¹Ÿå¥½ï¼Œæ€»ä¹‹ä¸è¦ä¸€å¿ƒå¤šç”¨ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Header</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;header&gt;</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">            isMobile() ? </span><br><span class=\"line\">                &lt;BurgerButton menuItems=&#123;menuItems&#125; /&gt; : </span><br><span class=\"line\">                &lt;Tabs tabData=&#123;menuItems&#125; /&gt;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &lt;/header&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-å•ä¸€è´£ä»»çš„-useEffects\"><a href=\"#5-å•ä¸€è´£ä»»çš„-useEffects\" class=\"headerlink\" title=\"5. å•ä¸€è´£ä»»çš„ useEffects\"></a>5. å•ä¸€è´£ä»»çš„ useEffects</h2><p>è¿˜è®°å¾—ä»¥å‰ï¼Œæˆ‘ä»¬åªèƒ½ç”¨ componentWillReceiveProps æˆ– componentDidUpdate æ–¹æ³•æŒ‚æ¥åˆ° React ç»„ä»¶çš„æ¸²æŸ“è¿‡ç¨‹å—ï¼Ÿé‚£æ˜¯ä¸€æ®µé»‘æš—çš„å›å¿†ï¼Œä¹Ÿè®©æˆ‘ä»¬æ„è¯†åˆ°äº† useEffect hook çš„ç¾å¦™ä¹‹å¤„ï¼Œå°¤å…¶æ˜¯ä½ å¯ä»¥éšæ„ä½¿ç”¨è¿™äº› hooksã€‚</p>\n<p>ä½†æ˜¯æœ‰æ—¶å› ä¸ºç²—å¿ƒè€Œè®©â€œuseEffectâ€èº«å…¼æ•°èŒï¼Œå°±ä¼šå¸¦å›é‚£äº›é»‘æš—çš„å›å¿†ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç»„ä»¶ä»¥æŸç§æ–¹å¼ä»åç«¯è·å–ä¸€äº›æ•°æ®ï¼Œå¹¶ä¸”è¿˜ä¼šæ ¹æ®å½“å‰ä½ç½®æ˜¾ç¤ºé¢åŒ…å±‘ã€‚ï¼ˆå†æ¬¡ä½¿ç”¨ react-router è·å–å½“å‰ä½ç½®ã€‚ï¼‰</p>\n<h3 id=\"è¿™å¾ˆå±é™©âŒ-3\"><a href=\"#è¿™å¾ˆå±é™©âŒ-3\" class=\"headerlink\" title=\"è¿™å¾ˆå±é™©âŒ\"></a>è¿™å¾ˆå±é™©âŒ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  Calling the api */</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> updateBreadcrumbs = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* Updating the breadcrumbs*/</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">    updateBreadcrumbs();</span><br><span class=\"line\">  &#125;, [location.pathname, fetchData, updateBreadcrumbs]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BreadCrumbs /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é—®é¢˜âš¡-4\"><a href=\"#é—®é¢˜âš¡-4\" class=\"headerlink\" title=\"é—®é¢˜âš¡\"></a>é—®é¢˜âš¡</h3><p>è¿™é‡Œæœ‰ä¸¤ä¸ªç”¨ä¾‹ï¼Œå³â€œæ•°æ®è·å–â€å’Œâ€œæ˜¾ç¤ºé¢åŒ…å±‘â€ã€‚ä¸¤è€…éƒ½é€šè¿‡ useEffect hook æ›´æ–°ã€‚å½“ fetchData å’Œ updateBreadcrumbs å‡½æ•°æˆ– location æ›´æ”¹æ—¶ï¼Œéƒ½ä¼šè¿è¡Œè¿™ä¸ª useEffect hookã€‚ç°åœ¨çš„ä¸»è¦é—®é¢˜æ˜¯ï¼Œå½“ä½ç½®æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬è¿˜è°ƒç”¨äº† fetchData å‡½æ•°ã€‚è¿™å¯èƒ½æ˜¯æˆ‘ä»¬æ²¡æœ‰æƒ³åˆ°çš„å‰¯ä½œç”¨ã€‚</p>\n<h3 id=\"è§£å†³æ–¹æ¡ˆâœ…-4\"><a href=\"#è§£å†³æ–¹æ¡ˆâœ…-4\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆâœ…\"></a>è§£å†³æ–¹æ¡ˆâœ…</h3><p>æŠŠæ•ˆæœæ‹†åˆ†å¼€æ¥ï¼Œç¡®ä¿å®ƒä»¬åªç”¨äºä¸€ç§æ•ˆæœï¼Œæ„å¤–çš„å‰¯ä½œç”¨ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> location = useLocation();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> updateBreadcrumbs = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* Updating the breadcrumbs*/</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    updateBreadcrumbs();</span><br><span class=\"line\">  &#125;, [location.pathname, updateBreadcrumbs]);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fetchData = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  Calling the api */</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    fetchData();</span><br><span class=\"line\">  &#125;, [fetchData]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;BreadCrumbs /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><strong>é¢å¤–çš„æ”¶è·æ˜¯</strong>ï¼Œè¿™äº›ç”¨ä¾‹ç°åœ¨ä¹Ÿåœ¨ç»„ä»¶å†…æŒ‰é¡ºåºæ’å¥½äº†ã€‚</p>\n"},{"title":"ç½‘ç»œè¯·æ±‚ ajax å’Œ fetch","date":"2020-07-12T16:00:00.000Z","_content":"\n## 1. ajax\n\n> `ajax` æ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ã€å¿«é€ŸåŠ¨æ€ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹åŸç”Ÿçš„å®ç°ã€‚\n\n### 1.1 åŸç”Ÿ ajax å®ç°\n\n> 1. åˆ›å»º `XMLHttpRequest` å¯¹è±¡\n> 2. å‘é€è¯·æ±‚\n> 3. æœåŠ¡å™¨ç«¯çš„å“åº”\n\n```javascript\nvar movieUrl = \"https://***\";\n//\t1.åˆ›å»ºXMLHttpRequestå¯¹è±¡\nvar xmlhttp;\nif (window.XMLHttpRequest) {\n  xmlhttp = new XMLHttpRequest();\n} else {\n  xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n}\n//\t2.å‘é€è¯·æ±‚\nxmlhttp.open(\"GET\", movieUrl, true); //\tç¬¬ä¸‰ä¸ªå‚æ•° true:å¼‚æ­¥\nxmlhttp.send();\n//\t3.æœåŠ¡å™¨ç«¯çš„å“åº”\nxmlhttp.addEventListener(\"readystatechange\", function () {\n  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n    var obj = JSON.parse(xmlhttp.responseText);\n    console.log(obj);\n  }\n});\n```\n","source":"_posts/å‰ç«¯/ç½‘ç»œè¯·æ±‚ ajax å’Œ fetch.md","raw":"---\ntitle: ç½‘ç»œè¯·æ±‚ ajax å’Œ fetch\ndate: 2020-07-13\ncategories: [å‰ç«¯, js]\ntags:\n  - ajax\n  - fetch\n---\n\n## 1. ajax\n\n> `ajax` æ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ã€å¿«é€ŸåŠ¨æ€ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹åŸç”Ÿçš„å®ç°ã€‚\n\n### 1.1 åŸç”Ÿ ajax å®ç°\n\n> 1. åˆ›å»º `XMLHttpRequest` å¯¹è±¡\n> 2. å‘é€è¯·æ±‚\n> 3. æœåŠ¡å™¨ç«¯çš„å“åº”\n\n```javascript\nvar movieUrl = \"https://***\";\n//\t1.åˆ›å»ºXMLHttpRequestå¯¹è±¡\nvar xmlhttp;\nif (window.XMLHttpRequest) {\n  xmlhttp = new XMLHttpRequest();\n} else {\n  xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n}\n//\t2.å‘é€è¯·æ±‚\nxmlhttp.open(\"GET\", movieUrl, true); //\tç¬¬ä¸‰ä¸ªå‚æ•° true:å¼‚æ­¥\nxmlhttp.send();\n//\t3.æœåŠ¡å™¨ç«¯çš„å“åº”\nxmlhttp.addEventListener(\"readystatechange\", function () {\n  if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n    var obj = JSON.parse(xmlhttp.responseText);\n    console.log(obj);\n  }\n});\n```\n","slug":"å‰ç«¯/ç½‘ç»œè¯·æ±‚ ajax å’Œ fetch","published":1,"updated":"2021-04-07T07:31:05.441Z","_id":"ckn7476aj002jyx7ydtbx6zny","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-ajax\"><a href=\"#1-ajax\" class=\"headerlink\" title=\"1. ajax\"></a>1. ajax</h2><blockquote>\n<p><code>ajax</code> æ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ã€å¿«é€ŸåŠ¨æ€ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹åŸç”Ÿçš„å®ç°ã€‚</p>\n</blockquote>\n<h3 id=\"1-1-åŸç”Ÿ-ajax-å®ç°\"><a href=\"#1-1-åŸç”Ÿ-ajax-å®ç°\" class=\"headerlink\" title=\"1.1 åŸç”Ÿ ajax å®ç°\"></a>1.1 åŸç”Ÿ ajax å®ç°</h3><blockquote>\n<ol>\n<li>åˆ›å»º <code>XMLHttpRequest</code> å¯¹è±¡</li>\n<li>å‘é€è¯·æ±‚</li>\n<li>æœåŠ¡å™¨ç«¯çš„å“åº”</li>\n</ol>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> movieUrl = <span class=\"string\">&quot;https://***&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//\t1.åˆ›å»ºXMLHttpRequestå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xmlhttp;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.XMLHttpRequest) &#123;</span><br><span class=\"line\">  xmlhttp = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  xmlhttp = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//\t2.å‘é€è¯·æ±‚</span></span><br><span class=\"line\">xmlhttp.open(<span class=\"string\">&quot;GET&quot;</span>, movieUrl, <span class=\"literal\">true</span>); <span class=\"comment\">//\tç¬¬ä¸‰ä¸ªå‚æ•° true:å¼‚æ­¥</span></span><br><span class=\"line\">xmlhttp.send();</span><br><span class=\"line\"><span class=\"comment\">//\t3.æœåŠ¡å™¨ç«¯çš„å“åº”</span></span><br><span class=\"line\">xmlhttp.addEventListener(<span class=\"string\">&quot;readystatechange&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (xmlhttp.readyState == <span class=\"number\">4</span> &amp;&amp; xmlhttp.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"built_in\">JSON</span>.parse(xmlhttp.responseText);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(obj);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-ajax\"><a href=\"#1-ajax\" class=\"headerlink\" title=\"1. ajax\"></a>1. ajax</h2><blockquote>\n<p><code>ajax</code> æ˜¯ä¸€ç§ä½¿ç”¨ç°æœ‰æ ‡å‡†çš„æ–°æ–¹æ³•ã€‚æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ã€å¿«é€ŸåŠ¨æ€ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹åŸç”Ÿçš„å®ç°ã€‚</p>\n</blockquote>\n<h3 id=\"1-1-åŸç”Ÿ-ajax-å®ç°\"><a href=\"#1-1-åŸç”Ÿ-ajax-å®ç°\" class=\"headerlink\" title=\"1.1 åŸç”Ÿ ajax å®ç°\"></a>1.1 åŸç”Ÿ ajax å®ç°</h3><blockquote>\n<ol>\n<li>åˆ›å»º <code>XMLHttpRequest</code> å¯¹è±¡</li>\n<li>å‘é€è¯·æ±‚</li>\n<li>æœåŠ¡å™¨ç«¯çš„å“åº”</li>\n</ol>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> movieUrl = <span class=\"string\">&quot;https://***&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//\t1.åˆ›å»ºXMLHttpRequestå¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> xmlhttp;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">window</span>.XMLHttpRequest) &#123;</span><br><span class=\"line\">  xmlhttp = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  xmlhttp = <span class=\"keyword\">new</span> ActiveXObject(<span class=\"string\">&quot;Microsoft.XMLHTTP&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">//\t2.å‘é€è¯·æ±‚</span></span><br><span class=\"line\">xmlhttp.open(<span class=\"string\">&quot;GET&quot;</span>, movieUrl, <span class=\"literal\">true</span>); <span class=\"comment\">//\tç¬¬ä¸‰ä¸ªå‚æ•° true:å¼‚æ­¥</span></span><br><span class=\"line\">xmlhttp.send();</span><br><span class=\"line\"><span class=\"comment\">//\t3.æœåŠ¡å™¨ç«¯çš„å“åº”</span></span><br><span class=\"line\">xmlhttp.addEventListener(<span class=\"string\">&quot;readystatechange&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (xmlhttp.readyState == <span class=\"number\">4</span> &amp;&amp; xmlhttp.status == <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> obj = <span class=\"built_in\">JSON</span>.parse(xmlhttp.responseText);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(obj);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n"},{"title":"é˜²æŠ–å’ŒèŠ‚æµ","date":"2020-10-16T16:00:00.000Z","_content":"\n## èƒŒæ™¯\n\n> 1. åœ¨è¿›è¡Œçª—å£çš„ `resize`ã€`scroll`\n> 2. `è¾“å…¥æ¡†å†…å®¹æ ¡éªŒ`\n> 3. `mousedown`ã€`mousemove`\n> 4. `keyup`, `keydown`\n>    ç­‰æ“ä½œæ—¶ï¼Œå¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨çš„é¢‘ç‡æ— é™åˆ¶ï¼Œä¼šåŠ é‡æµè§ˆå™¨çš„è´Ÿæ‹…ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ `debounce`ï¼ˆé˜²æŠ–ï¼‰å’Œ `throttle`ï¼ˆèŠ‚æµï¼‰çš„æ–¹å¼æ¥å‡å°‘è°ƒç”¨é¢‘ç‡ï¼ŒåŒæ—¶åˆä¸å½±å“å®é™…æ•ˆæœã€‚\n\n## é˜²æŠ–\n\n> å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ `scroll` äº‹ä»¶æ—¶ï¼Œå¹¶ä¸æ‰§è¡Œ `handle` å‡½æ•°ï¼Œå½“ `1s` å†…æ²¡æœ‰è§¦å‘ `scroll`äº‹ä»¶æ—¶ï¼Œæ‰ä¼šå»¶æ—¶è§¦å‘ `scroll` äº‹ä»¶ã€‚\n\n![é˜²æŠ–.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703595580-b3299f97-9961-476b-89e1-64db6b1090e5.png#align=left&display=inline&height=150&margin=%5Bobject%20Object%5D&name=%E9%98%B2%E6%8A%96.png&originHeight=150&originWidth=700&size=8748&status=done&style=none&width=700)\n\n### ä¼ ç»Ÿé˜²æŠ–\n\n#### æœ€ç®€å•çš„é˜²æŠ–\n\n```javascript\nfunction debounce(fn, wait) {\n  var timer = null;\n  return function () {\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = setTimeout(fn, wait);\n    }\n  };\n}\n\n// å¤„ç†å‡½æ•°\nfunction hanlder() {\n  console.log(parseInt(Math.random()));\n}\n\n// äº‹ä»¶\nwindow.addEventListener(\"scroll\", debounce(handler, 1000));\n```\n\n#### ä¿®æ”¹ this\n\n> åœ¨ `debounce` åŒ…è£¹åçš„ `fn` ä¸­æˆ‘ä»¬è¾“å‡º `this` ä¼šæŒ‡å‘ `window` å¯¹è±¡ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹ `fn` å†…çš„ `this` å¹¶ä¸æŒ‡å‘ `window`ï¼Œæ‰€ä»¥ä¿®æ­£åçš„ `é˜²æŠ–å‡½æ•°` å¦‚ä¸‹\n\n```javascript\nfunction debounce(fn, wait) {\n  var timer = null;\n  return function () {\n    var context = this;\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        fn.apply(context);\n      }, wait);\n    }\n  };\n}\n```\n\n#### ä¼ é€’ event äº‹ä»¶å¯¹è±¡\n\n> åœ¨ `debounce` åŒ…è£¹åçš„ `fn` ä¸­æˆ‘ä»¬è¾“å‡º `event` ä¸º `undefined`ï¼Œè€Œä¸è¢«åŒ…è£¹çš„ `fn` ä¸­å°†è¾“å‡ºç›¸åº”çš„äº‹ä»¶æºï¼Œæ‰€ä»¥ä¿®æ­£åçš„ `é˜²æŠ–å‡½æ•°` å¦‚ä¸‹\n\n```javascript\nfunction debounce(fn, wait) {\n  var timer = null;\n  return function () {\n    var context = this;\n    var args = arguments;\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n  };\n}\n```\n\n### ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\n\n> æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›éè¦ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œç›¸åº”é€»è¾‘ï¼Œå¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼Œä½†æ˜¯è¦ç­‰åˆ°åœæ­¢è§¦å‘ `n` ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚\n> æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¢åŠ  `immediate` å‚æ•°æ¥è¿›è¡Œæ§åˆ¶æ˜¯å¦ç«‹å³æ‰§è¡Œã€‚\n\n```javascript\nfunction debounce(func, wait, immediate) {\n  var timer = null;\n  return function () {\n    var context = this;\n    var args = arguments;\n\n    if (timer != null) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // ç«‹å³æ‰§è¡Œ\n      timer = setTimeout(function () {\n        timer = null;\n      }, wait);\n      if (!timer) {\n        fn.apply(context, args);\n      }\n    } else {\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n  };\n}\n```\n\n> æ­¤æ—¶æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯ `fn` å‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯å½“ `immediate` ä¸º Â `false` çš„æ—¶å€™ï¼Œå› ä¸ºä½¿ç”¨äº† `setTimeout` ï¼Œæˆ‘ä»¬å°† `fn.apply(context, args)` çš„è¿”å›å€¼èµ‹ç»™å˜é‡ï¼Œæœ€åå† `return` çš„æ—¶å€™ï¼Œå€¼å°†ä¼šä¸€ç›´æ˜¯ `undefined`ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåœ¨ `immediate` ä¸º `true` çš„æ—¶å€™è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚\n\n```javascript\nfunction debounce(func, wait, immediate) {\n  var timer = null;\n  var result;\n  return function () {\n    var context = this;\n    var args = arguments;\n\n    if (timer != null) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // ç«‹å³æ‰§è¡Œ\n      timer = setTimeout(function () {\n        timer = null;\n      }, wait);\n      if (!timer) {\n        result = fn.apply(context, args);\n      }\n    } else {\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n    return result;\n  };\n}\n```\n\n### å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\n\n> æ–°çš„éœ€æ±‚æ˜¯å¸Œæœ›èƒ½å–æ¶ˆ `debounce` å‡½æ•°ï¼Œæ¯”å¦‚è¯´ `debounce` çš„æ—¶é—´é—´éš”æ˜¯ `10` ç§’é’Ÿï¼Œ`immediate` ä¸º `true`ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘åªæœ‰ç­‰ `10` ç§’åæ‰èƒ½é‡æ–°è§¦å‘äº‹ä»¶ï¼Œç°åœ¨æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åï¼Œå–æ¶ˆé˜²æŠ–ï¼Œè¿™æ ·æˆ‘å†å»è§¦å‘ï¼Œå°±å¯ä»¥åˆç«‹åˆ»æ‰§è¡Œã€‚\n\n```javascript\nfunction debounce(func, wait, immediate) {\n  var timer = null;\n  var result;\n  var debounceCallback = function () {\n    var context = this;\n    var args = arguments;\n\n    if (timer != null) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // ç«‹å³æ‰§è¡Œ\n      timer = setTimeout(function () {\n        timer = null;\n      }, wait);\n      if (!timer) {\n        result = fn.apply(context, args);\n      }\n    } else {\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n    return result;\n  };\n\n  debounceCallback.cancel = function () {\n    clearTimeout(timer);\n    timer = null;\n  };\n\n  return debounceCallback;\n}\n```\n\n## èŠ‚æµ\n\n> å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ `ä¸€å®šæ—¶é—´æ®µå†…åªè°ƒç”¨ä¸€æ¬¡` äº‹ä»¶å¤„ç†å‡½æ•°ã€‚èŠ‚æµé€šä¿—è§£é‡Šå°±æ¯”å¦‚æˆ‘ä»¬æ°´é¾™å¤´æ”¾æ°´ï¼Œé˜€é—¨ä¸€æ‰“å¼€ï¼Œæ°´å“—å“—çš„å¾€ä¸‹æµï¼Œç§‰ç€å‹¤ä¿­èŠ‚çº¦çš„ä¼˜è‰¯ä¼ ç»Ÿç¾å¾·ï¼Œæˆ‘ä»¬è¦æŠŠæ°´é¾™å¤´å…³å°ç‚¹ï¼Œæœ€å¥½æ˜¯å¦‚æˆ‘ä»¬å¿ƒæ„æŒ‰ç…§ä¸€å®šè§„å¾‹åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…ä¸€æ»´ä¸€æ»´çš„å¾€ä¸‹æ»´ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ `scroll` äº‹ä»¶æ—¶ï¼Œå¹¶ä¸ç«‹å³æ‰§è¡Œ `handle` å‡½æ•°ï¼Œæ¯éš” `1s` æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ `handle` å‡½æ•°ã€‚\n\n![èŠ‚æµ.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703615184-c4c3dd6f-7242-4dfb-a924-fe04be39ae04.png#align=left&display=inline&height=323&margin=%5Bobject%20Object%5D&name=%E8%8A%82%E6%B5%81.png&originHeight=323&originWidth=330&size=8046&status=done&style=none&width=330)\n\n### æ—¶é—´æˆ³æ³•\n\n> å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚\n\n```javascript\nvar throttle = function (func, delay) {\n  var prev = Date.now();\n  return function () {\n    var now = Date.now();\n    var context = this;\n    var args = arguments;\n    if (now - prev >= delay) {\n      func.apply(context, args);\n      prev = Date.now();\n    }\n  };\n};\n\nfunction handler() {\n  console.log(parseInt(Math.random()));\n}\n\nwindow.addEventListener(\"scroll\", throttle(handler, 1000));\n```\n\n### å®šæ—¶å™¨æ³•\n\n> å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚\n\n```javascript\nvar throttle = function (func, delay) {\n  var timer = null;\n  return function () {\n    var context = this;\n    var args = arguments;\n    if (!timer) {\n      timer = setTimeout(function () {\n        func.apply(context, args);\n        timer = null;\n      }, delay);\n    }\n  };\n};\nfunction handle() {\n  console.log(Math.random());\n}\nwindow.addEventListener(\"scroll\", throttle(handle, 1000));\n```\n\n### æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\n\n> æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶ä¼šç«‹å³æ‰§è¡Œï¼Œå®šæ—¶å™¨æ³•ä¼šåœ¨ n ç§’ä¹‹åç¬¬ä¸€æ¬¡æ‰§è¡Œ\n> æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ‰§è¡Œäº‹ä»¶ï¼Œå®šæ—¶å™¨æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶\n\n### æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\n\n> ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä»ä¼šæ‰§è¡Œä¸€æ¬¡\n\n```javascript\nfunction throttle(func, delay) {\n  var timer = null;\n  var startTime = Date.now();\n  var context;\n  var args;\n\n  var later = function () {\n    startTime = Date.now();\n    timer = null;\n    func.apply(context, args);\n  };\n\n  return function () {\n    var currentTime = Date.now();\n    var remaining = delay - (currentTime - startTime);\n    context = this;\n    args = arguments;\n    // å¦‚æœæ²¡æœ‰å‰©ä½™çš„æ—¶é—´æˆ–è€…è‡ªè¡Œä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´\n    if (remaining <= 0 || remaining > wait) {\n      func.apply(context, args);\n      startTime = Date.now();\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n    }\n    if (!timer) {\n      timer = setTimeout(func, remaining);\n    }\n  };\n}\n```\n\n### å…¶ä»–åŠŸèƒ½\n\n- åŒ…æ‹¬ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä¸æ‰§è¡Œï¼›ç¬¬ä¸€æ¬¡ä¸ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åå†æ‰§è¡Œä¸€æ¬¡ï¼›å–æ¶ˆèŠ‚æµï¼›\n\n```javascript\nfunction throttle(func, wait, options) {\n  var timer = null;\n  var startTime = Date.now();\n  var context;\n  var args;\n\n  if (!options) options = {};\n\n  var later = function () {\n    startTime = options.leading === false ? 0 : Date.now();\n    timer = null;\n    func.apply(context, args);\n    if (!timer) context = args = null;\n  };\n\n  var throttled = function () {\n    var now = Date.now();\n    if (!startTime && options.leading === false) startTime = now;\n    var remaining = wait - (now - startTime);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n      startTime = now;\n      func.apply(context, args);\n      if (!timer) context = args = null;\n    } else if (!timer && options.trailing !== false) {\n      timer = setTimeout(later, remaining);\n    }\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    startTime = 0;\n    timeout = null;\n  };\n\n  return throttled;\n}\n```\n\n## æ€»ç»“\n\n- é˜²æŠ–\n\n> `å°†å‡ æ¬¡æ“ä½œåˆå¹¶ä¸ºä¸€æ­¤æ“ä½œè¿›è¡Œ`ã€‚åŸç†æ˜¯ç»´æŠ¤ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè§„å®šåœ¨ `delay` æ—¶é—´åè§¦å‘å‡½æ•°ï¼Œä½†æ˜¯åœ¨ `delay` æ—¶é—´å†…å†æ¬¡è§¦å‘çš„è¯ï¼Œå°±ä¼šå–æ¶ˆä¹‹å‰çš„è®¡æ—¶å™¨è€Œé‡æ–°è®¾ç½®ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰æœ€åä¸€æ¬¡æ“ä½œèƒ½è¢«è§¦å‘ã€‚\n\n- èŠ‚æµ\n\n> `ä½¿å¾—ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°`ã€‚åŸç†æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ä¸€å®šæ—¶é—´æ¥è§¦å‘å‡½æ•°ã€‚\n\n> å‡½æ•°èŠ‚æµä¸ç®¡äº‹ä»¶è§¦å‘æœ‰å¤šé¢‘ç¹ï¼Œéƒ½ä¼šä¿è¯åœ¨è§„å®šæ—¶é—´å†…ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œå‡½æ•°é˜²æŠ–åªæ˜¯åœ¨æœ€åä¸€æ¬¡äº‹ä»¶åæ‰è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚ æ¯”å¦‚åœ¨é¡µé¢çš„æ— é™åŠ è½½åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨æ»šåŠ¨é¡µé¢æ—¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡ `Ajax` è¯·æ±‚ï¼Œè€Œä¸æ˜¯åœ¨ç”¨æˆ·åœä¸‹æ»šåŠ¨é¡µé¢æ“ä½œæ—¶æ‰å»è¯·æ±‚æ•°æ®ã€‚è¿™æ ·çš„åœºæ™¯ï¼Œå°±é€‚åˆç”¨èŠ‚æµæŠ€æœ¯æ¥å®ç°ã€‚\n","source":"_posts/å‰ç«¯/é˜²æŠ–å’ŒèŠ‚æµ.md","raw":"---\ntitle: é˜²æŠ–å’ŒèŠ‚æµ\ndate: 2020-10-17\ncategories: [å‰ç«¯, js]\ntags:\n  - è§£å†³æ–¹æ¡ˆ\n---\n\n## èƒŒæ™¯\n\n> 1. åœ¨è¿›è¡Œçª—å£çš„ `resize`ã€`scroll`\n> 2. `è¾“å…¥æ¡†å†…å®¹æ ¡éªŒ`\n> 3. `mousedown`ã€`mousemove`\n> 4. `keyup`, `keydown`\n>    ç­‰æ“ä½œæ—¶ï¼Œå¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨çš„é¢‘ç‡æ— é™åˆ¶ï¼Œä¼šåŠ é‡æµè§ˆå™¨çš„è´Ÿæ‹…ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ `debounce`ï¼ˆé˜²æŠ–ï¼‰å’Œ `throttle`ï¼ˆèŠ‚æµï¼‰çš„æ–¹å¼æ¥å‡å°‘è°ƒç”¨é¢‘ç‡ï¼ŒåŒæ—¶åˆä¸å½±å“å®é™…æ•ˆæœã€‚\n\n## é˜²æŠ–\n\n> å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ `scroll` äº‹ä»¶æ—¶ï¼Œå¹¶ä¸æ‰§è¡Œ `handle` å‡½æ•°ï¼Œå½“ `1s` å†…æ²¡æœ‰è§¦å‘ `scroll`äº‹ä»¶æ—¶ï¼Œæ‰ä¼šå»¶æ—¶è§¦å‘ `scroll` äº‹ä»¶ã€‚\n\n![é˜²æŠ–.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703595580-b3299f97-9961-476b-89e1-64db6b1090e5.png#align=left&display=inline&height=150&margin=%5Bobject%20Object%5D&name=%E9%98%B2%E6%8A%96.png&originHeight=150&originWidth=700&size=8748&status=done&style=none&width=700)\n\n### ä¼ ç»Ÿé˜²æŠ–\n\n#### æœ€ç®€å•çš„é˜²æŠ–\n\n```javascript\nfunction debounce(fn, wait) {\n  var timer = null;\n  return function () {\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = setTimeout(fn, wait);\n    }\n  };\n}\n\n// å¤„ç†å‡½æ•°\nfunction hanlder() {\n  console.log(parseInt(Math.random()));\n}\n\n// äº‹ä»¶\nwindow.addEventListener(\"scroll\", debounce(handler, 1000));\n```\n\n#### ä¿®æ”¹ this\n\n> åœ¨ `debounce` åŒ…è£¹åçš„ `fn` ä¸­æˆ‘ä»¬è¾“å‡º `this` ä¼šæŒ‡å‘ `window` å¯¹è±¡ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹ `fn` å†…çš„ `this` å¹¶ä¸æŒ‡å‘ `window`ï¼Œæ‰€ä»¥ä¿®æ­£åçš„ `é˜²æŠ–å‡½æ•°` å¦‚ä¸‹\n\n```javascript\nfunction debounce(fn, wait) {\n  var timer = null;\n  return function () {\n    var context = this;\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        fn.apply(context);\n      }, wait);\n    }\n  };\n}\n```\n\n#### ä¼ é€’ event äº‹ä»¶å¯¹è±¡\n\n> åœ¨ `debounce` åŒ…è£¹åçš„ `fn` ä¸­æˆ‘ä»¬è¾“å‡º `event` ä¸º `undefined`ï¼Œè€Œä¸è¢«åŒ…è£¹çš„ `fn` ä¸­å°†è¾“å‡ºç›¸åº”çš„äº‹ä»¶æºï¼Œæ‰€ä»¥ä¿®æ­£åçš„ `é˜²æŠ–å‡½æ•°` å¦‚ä¸‹\n\n```javascript\nfunction debounce(fn, wait) {\n  var timer = null;\n  return function () {\n    var context = this;\n    var args = arguments;\n    if (timer !== null) {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n  };\n}\n```\n\n### ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\n\n> æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›éè¦ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œç›¸åº”é€»è¾‘ï¼Œå¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼Œä½†æ˜¯è¦ç­‰åˆ°åœæ­¢è§¦å‘ `n` ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚\n> æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¢åŠ  `immediate` å‚æ•°æ¥è¿›è¡Œæ§åˆ¶æ˜¯å¦ç«‹å³æ‰§è¡Œã€‚\n\n```javascript\nfunction debounce(func, wait, immediate) {\n  var timer = null;\n  return function () {\n    var context = this;\n    var args = arguments;\n\n    if (timer != null) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // ç«‹å³æ‰§è¡Œ\n      timer = setTimeout(function () {\n        timer = null;\n      }, wait);\n      if (!timer) {\n        fn.apply(context, args);\n      }\n    } else {\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n  };\n}\n```\n\n> æ­¤æ—¶æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯ `fn` å‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯å½“ `immediate` ä¸º Â `false` çš„æ—¶å€™ï¼Œå› ä¸ºä½¿ç”¨äº† `setTimeout` ï¼Œæˆ‘ä»¬å°† `fn.apply(context, args)` çš„è¿”å›å€¼èµ‹ç»™å˜é‡ï¼Œæœ€åå† `return` çš„æ—¶å€™ï¼Œå€¼å°†ä¼šä¸€ç›´æ˜¯ `undefined`ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåœ¨ `immediate` ä¸º `true` çš„æ—¶å€™è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚\n\n```javascript\nfunction debounce(func, wait, immediate) {\n  var timer = null;\n  var result;\n  return function () {\n    var context = this;\n    var args = arguments;\n\n    if (timer != null) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // ç«‹å³æ‰§è¡Œ\n      timer = setTimeout(function () {\n        timer = null;\n      }, wait);\n      if (!timer) {\n        result = fn.apply(context, args);\n      }\n    } else {\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n    return result;\n  };\n}\n```\n\n### å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\n\n> æ–°çš„éœ€æ±‚æ˜¯å¸Œæœ›èƒ½å–æ¶ˆ `debounce` å‡½æ•°ï¼Œæ¯”å¦‚è¯´ `debounce` çš„æ—¶é—´é—´éš”æ˜¯ `10` ç§’é’Ÿï¼Œ`immediate` ä¸º `true`ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘åªæœ‰ç­‰ `10` ç§’åæ‰èƒ½é‡æ–°è§¦å‘äº‹ä»¶ï¼Œç°åœ¨æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åï¼Œå–æ¶ˆé˜²æŠ–ï¼Œè¿™æ ·æˆ‘å†å»è§¦å‘ï¼Œå°±å¯ä»¥åˆç«‹åˆ»æ‰§è¡Œã€‚\n\n```javascript\nfunction debounce(func, wait, immediate) {\n  var timer = null;\n  var result;\n  var debounceCallback = function () {\n    var context = this;\n    var args = arguments;\n\n    if (timer != null) {\n      clearTimeout(timer);\n    }\n    if (immediate) {\n      // ç«‹å³æ‰§è¡Œ\n      timer = setTimeout(function () {\n        timer = null;\n      }, wait);\n      if (!timer) {\n        result = fn.apply(context, args);\n      }\n    } else {\n      timer = setTimeout(function () {\n        fn.apply(context, args);\n      }, wait);\n    }\n    return result;\n  };\n\n  debounceCallback.cancel = function () {\n    clearTimeout(timer);\n    timer = null;\n  };\n\n  return debounceCallback;\n}\n```\n\n## èŠ‚æµ\n\n> å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ `ä¸€å®šæ—¶é—´æ®µå†…åªè°ƒç”¨ä¸€æ¬¡` äº‹ä»¶å¤„ç†å‡½æ•°ã€‚èŠ‚æµé€šä¿—è§£é‡Šå°±æ¯”å¦‚æˆ‘ä»¬æ°´é¾™å¤´æ”¾æ°´ï¼Œé˜€é—¨ä¸€æ‰“å¼€ï¼Œæ°´å“—å“—çš„å¾€ä¸‹æµï¼Œç§‰ç€å‹¤ä¿­èŠ‚çº¦çš„ä¼˜è‰¯ä¼ ç»Ÿç¾å¾·ï¼Œæˆ‘ä»¬è¦æŠŠæ°´é¾™å¤´å…³å°ç‚¹ï¼Œæœ€å¥½æ˜¯å¦‚æˆ‘ä»¬å¿ƒæ„æŒ‰ç…§ä¸€å®šè§„å¾‹åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…ä¸€æ»´ä¸€æ»´çš„å¾€ä¸‹æ»´ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ `scroll` äº‹ä»¶æ—¶ï¼Œå¹¶ä¸ç«‹å³æ‰§è¡Œ `handle` å‡½æ•°ï¼Œæ¯éš” `1s` æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ `handle` å‡½æ•°ã€‚\n\n![èŠ‚æµ.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703615184-c4c3dd6f-7242-4dfb-a924-fe04be39ae04.png#align=left&display=inline&height=323&margin=%5Bobject%20Object%5D&name=%E8%8A%82%E6%B5%81.png&originHeight=323&originWidth=330&size=8046&status=done&style=none&width=330)\n\n### æ—¶é—´æˆ³æ³•\n\n> å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚\n\n```javascript\nvar throttle = function (func, delay) {\n  var prev = Date.now();\n  return function () {\n    var now = Date.now();\n    var context = this;\n    var args = arguments;\n    if (now - prev >= delay) {\n      func.apply(context, args);\n      prev = Date.now();\n    }\n  };\n};\n\nfunction handler() {\n  console.log(parseInt(Math.random()));\n}\n\nwindow.addEventListener(\"scroll\", throttle(handler, 1000));\n```\n\n### å®šæ—¶å™¨æ³•\n\n> å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚\n\n```javascript\nvar throttle = function (func, delay) {\n  var timer = null;\n  return function () {\n    var context = this;\n    var args = arguments;\n    if (!timer) {\n      timer = setTimeout(function () {\n        func.apply(context, args);\n        timer = null;\n      }, delay);\n    }\n  };\n};\nfunction handle() {\n  console.log(Math.random());\n}\nwindow.addEventListener(\"scroll\", throttle(handle, 1000));\n```\n\n### æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\n\n> æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶ä¼šç«‹å³æ‰§è¡Œï¼Œå®šæ—¶å™¨æ³•ä¼šåœ¨ n ç§’ä¹‹åç¬¬ä¸€æ¬¡æ‰§è¡Œ\n> æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ‰§è¡Œäº‹ä»¶ï¼Œå®šæ—¶å™¨æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶\n\n### æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\n\n> ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä»ä¼šæ‰§è¡Œä¸€æ¬¡\n\n```javascript\nfunction throttle(func, delay) {\n  var timer = null;\n  var startTime = Date.now();\n  var context;\n  var args;\n\n  var later = function () {\n    startTime = Date.now();\n    timer = null;\n    func.apply(context, args);\n  };\n\n  return function () {\n    var currentTime = Date.now();\n    var remaining = delay - (currentTime - startTime);\n    context = this;\n    args = arguments;\n    // å¦‚æœæ²¡æœ‰å‰©ä½™çš„æ—¶é—´æˆ–è€…è‡ªè¡Œä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´\n    if (remaining <= 0 || remaining > wait) {\n      func.apply(context, args);\n      startTime = Date.now();\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n    }\n    if (!timer) {\n      timer = setTimeout(func, remaining);\n    }\n  };\n}\n```\n\n### å…¶ä»–åŠŸèƒ½\n\n- åŒ…æ‹¬ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä¸æ‰§è¡Œï¼›ç¬¬ä¸€æ¬¡ä¸ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åå†æ‰§è¡Œä¸€æ¬¡ï¼›å–æ¶ˆèŠ‚æµï¼›\n\n```javascript\nfunction throttle(func, wait, options) {\n  var timer = null;\n  var startTime = Date.now();\n  var context;\n  var args;\n\n  if (!options) options = {};\n\n  var later = function () {\n    startTime = options.leading === false ? 0 : Date.now();\n    timer = null;\n    func.apply(context, args);\n    if (!timer) context = args = null;\n  };\n\n  var throttled = function () {\n    var now = Date.now();\n    if (!startTime && options.leading === false) startTime = now;\n    var remaining = wait - (now - startTime);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n      startTime = now;\n      func.apply(context, args);\n      if (!timer) context = args = null;\n    } else if (!timer && options.trailing !== false) {\n      timer = setTimeout(later, remaining);\n    }\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    startTime = 0;\n    timeout = null;\n  };\n\n  return throttled;\n}\n```\n\n## æ€»ç»“\n\n- é˜²æŠ–\n\n> `å°†å‡ æ¬¡æ“ä½œåˆå¹¶ä¸ºä¸€æ­¤æ“ä½œè¿›è¡Œ`ã€‚åŸç†æ˜¯ç»´æŠ¤ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè§„å®šåœ¨ `delay` æ—¶é—´åè§¦å‘å‡½æ•°ï¼Œä½†æ˜¯åœ¨ `delay` æ—¶é—´å†…å†æ¬¡è§¦å‘çš„è¯ï¼Œå°±ä¼šå–æ¶ˆä¹‹å‰çš„è®¡æ—¶å™¨è€Œé‡æ–°è®¾ç½®ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰æœ€åä¸€æ¬¡æ“ä½œèƒ½è¢«è§¦å‘ã€‚\n\n- èŠ‚æµ\n\n> `ä½¿å¾—ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°`ã€‚åŸç†æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ä¸€å®šæ—¶é—´æ¥è§¦å‘å‡½æ•°ã€‚\n\n> å‡½æ•°èŠ‚æµä¸ç®¡äº‹ä»¶è§¦å‘æœ‰å¤šé¢‘ç¹ï¼Œéƒ½ä¼šä¿è¯åœ¨è§„å®šæ—¶é—´å†…ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œå‡½æ•°é˜²æŠ–åªæ˜¯åœ¨æœ€åä¸€æ¬¡äº‹ä»¶åæ‰è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚ æ¯”å¦‚åœ¨é¡µé¢çš„æ— é™åŠ è½½åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨æ»šåŠ¨é¡µé¢æ—¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡ `Ajax` è¯·æ±‚ï¼Œè€Œä¸æ˜¯åœ¨ç”¨æˆ·åœä¸‹æ»šåŠ¨é¡µé¢æ“ä½œæ—¶æ‰å»è¯·æ±‚æ•°æ®ã€‚è¿™æ ·çš„åœºæ™¯ï¼Œå°±é€‚åˆç”¨èŠ‚æµæŠ€æœ¯æ¥å®ç°ã€‚\n","slug":"å‰ç«¯/é˜²æŠ–å’ŒèŠ‚æµ","published":1,"updated":"2021-04-07T07:31:56.210Z","_id":"ckn7476ak002lyx7y36092igs","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h2><blockquote>\n<ol>\n<li>åœ¨è¿›è¡Œçª—å£çš„ <code>resize</code>ã€<code>scroll</code></li>\n<li><code>è¾“å…¥æ¡†å†…å®¹æ ¡éªŒ</code></li>\n<li><code>mousedown</code>ã€<code>mousemove</code></li>\n<li><code>keyup</code>, <code>keydown</code><br>ç­‰æ“ä½œæ—¶ï¼Œå¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨çš„é¢‘ç‡æ— é™åˆ¶ï¼Œä¼šåŠ é‡æµè§ˆå™¨çš„è´Ÿæ‹…ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <code>debounce</code>ï¼ˆé˜²æŠ–ï¼‰å’Œ <code>throttle</code>ï¼ˆèŠ‚æµï¼‰çš„æ–¹å¼æ¥å‡å°‘è°ƒç”¨é¢‘ç‡ï¼ŒåŒæ—¶åˆä¸å½±å“å®é™…æ•ˆæœã€‚</li>\n</ol>\n</blockquote>\n<h2 id=\"é˜²æŠ–\"><a href=\"#é˜²æŠ–\" class=\"headerlink\" title=\"é˜²æŠ–\"></a>é˜²æŠ–</h2><blockquote>\n<p>å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ <code>scroll</code> äº‹ä»¶æ—¶ï¼Œå¹¶ä¸æ‰§è¡Œ <code>handle</code> å‡½æ•°ï¼Œå½“ <code>1s</code> å†…æ²¡æœ‰è§¦å‘ <code>scroll</code>äº‹ä»¶æ—¶ï¼Œæ‰ä¼šå»¶æ—¶è§¦å‘ <code>scroll</code> äº‹ä»¶ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703595580-b3299f97-9961-476b-89e1-64db6b1090e5.png#align=left&display=inline&height=150&margin=%5Bobject%20Object%5D&name=%E9%98%B2%E6%8A%96.png&originHeight=150&originWidth=700&size=8748&status=done&style=none&width=700\" alt=\"é˜²æŠ–.png\"></p>\n<h3 id=\"ä¼ ç»Ÿé˜²æŠ–\"><a href=\"#ä¼ ç»Ÿé˜²æŠ–\" class=\"headerlink\" title=\"ä¼ ç»Ÿé˜²æŠ–\"></a>ä¼ ç»Ÿé˜²æŠ–</h3><h4 id=\"æœ€ç®€å•çš„é˜²æŠ–\"><a href=\"#æœ€ç®€å•çš„é˜²æŠ–\" class=\"headerlink\" title=\"æœ€ç®€å•çš„é˜²æŠ–\"></a>æœ€ç®€å•çš„é˜²æŠ–</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">fn, wait</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(fn, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†å‡½æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hanlder</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// äº‹ä»¶</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, debounce(handler, <span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¿®æ”¹-this\"><a href=\"#ä¿®æ”¹-this\" class=\"headerlink\" title=\"ä¿®æ”¹ this\"></a>ä¿®æ”¹ this</h4><blockquote>\n<p>åœ¨ <code>debounce</code> åŒ…è£¹åçš„ <code>fn</code> ä¸­æˆ‘ä»¬è¾“å‡º <code>this</code> ä¼šæŒ‡å‘ <code>window</code> å¯¹è±¡ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹ <code>fn</code> å†…çš„ <code>this</code> å¹¶ä¸æŒ‡å‘ <code>window</code>ï¼Œæ‰€ä»¥ä¿®æ­£åçš„ <code>é˜²æŠ–å‡½æ•°</code> å¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">fn, wait</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¼ é€’-event-äº‹ä»¶å¯¹è±¡\"><a href=\"#ä¼ é€’-event-äº‹ä»¶å¯¹è±¡\" class=\"headerlink\" title=\"ä¼ é€’ event äº‹ä»¶å¯¹è±¡\"></a>ä¼ é€’ event äº‹ä»¶å¯¹è±¡</h4><blockquote>\n<p>åœ¨ <code>debounce</code> åŒ…è£¹åçš„ <code>fn</code> ä¸­æˆ‘ä»¬è¾“å‡º <code>event</code> ä¸º <code>undefined</code>ï¼Œè€Œä¸è¢«åŒ…è£¹çš„ <code>fn</code> ä¸­å°†è¾“å‡ºç›¸åº”çš„äº‹ä»¶æºï¼Œæ‰€ä»¥ä¿®æ­£åçš„ <code>é˜²æŠ–å‡½æ•°</code> å¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">fn, wait</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\"><a href=\"#ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\" class=\"headerlink\" title=\"ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\"></a>ç«‹å³æ‰§è¡Œçš„é˜²æŠ–</h3><blockquote>\n<p>æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›éè¦ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œç›¸åº”é€»è¾‘ï¼Œå¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼Œä½†æ˜¯è¦ç­‰åˆ°åœæ­¢è§¦å‘ <code>n</code> ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚<br>æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¢åŠ  <code>immediate</code> å‚æ•°æ¥è¿›è¡Œæ§åˆ¶æ˜¯å¦ç«‹å³æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ­¤æ—¶æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯ <code>fn</code> å‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯å½“ <code>immediate</code> ä¸º Â <code>false</code> çš„æ—¶å€™ï¼Œå› ä¸ºä½¿ç”¨äº† <code>setTimeout</code> ï¼Œæˆ‘ä»¬å°† <code>fn.apply(context, args)</code> çš„è¿”å›å€¼èµ‹ç»™å˜é‡ï¼Œæœ€åå† <code>return</code> çš„æ—¶å€™ï¼Œå€¼å°†ä¼šä¸€ç›´æ˜¯ <code>undefined</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåœ¨ <code>immediate</code> ä¸º <code>true</code> çš„æ—¶å€™è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">        result = fn.apply(context, args);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\"><a href=\"#å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\" class=\"headerlink\" title=\"å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\"></a>å¯ä»¥å–æ¶ˆçš„é˜²æŠ–</h3><blockquote>\n<p>æ–°çš„éœ€æ±‚æ˜¯å¸Œæœ›èƒ½å–æ¶ˆ <code>debounce</code> å‡½æ•°ï¼Œæ¯”å¦‚è¯´ <code>debounce</code> çš„æ—¶é—´é—´éš”æ˜¯ <code>10</code> ç§’é’Ÿï¼Œ<code>immediate</code> ä¸º <code>true</code>ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘åªæœ‰ç­‰ <code>10</code> ç§’åæ‰èƒ½é‡æ–°è§¦å‘äº‹ä»¶ï¼Œç°åœ¨æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åï¼Œå–æ¶ˆé˜²æŠ–ï¼Œè¿™æ ·æˆ‘å†å»è§¦å‘ï¼Œå°±å¯ä»¥åˆç«‹åˆ»æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> debounceCallback = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">        result = fn.apply(context, args);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  debounceCallback.cancel = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> debounceCallback;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"èŠ‚æµ\"><a href=\"#èŠ‚æµ\" class=\"headerlink\" title=\"èŠ‚æµ\"></a>èŠ‚æµ</h2><blockquote>\n<p>å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ <code>ä¸€å®šæ—¶é—´æ®µå†…åªè°ƒç”¨ä¸€æ¬¡</code> äº‹ä»¶å¤„ç†å‡½æ•°ã€‚èŠ‚æµé€šä¿—è§£é‡Šå°±æ¯”å¦‚æˆ‘ä»¬æ°´é¾™å¤´æ”¾æ°´ï¼Œé˜€é—¨ä¸€æ‰“å¼€ï¼Œæ°´å“—å“—çš„å¾€ä¸‹æµï¼Œç§‰ç€å‹¤ä¿­èŠ‚çº¦çš„ä¼˜è‰¯ä¼ ç»Ÿç¾å¾·ï¼Œæˆ‘ä»¬è¦æŠŠæ°´é¾™å¤´å…³å°ç‚¹ï¼Œæœ€å¥½æ˜¯å¦‚æˆ‘ä»¬å¿ƒæ„æŒ‰ç…§ä¸€å®šè§„å¾‹åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…ä¸€æ»´ä¸€æ»´çš„å¾€ä¸‹æ»´ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ <code>scroll</code> äº‹ä»¶æ—¶ï¼Œå¹¶ä¸ç«‹å³æ‰§è¡Œ <code>handle</code> å‡½æ•°ï¼Œæ¯éš” <code>1s</code> æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ <code>handle</code> å‡½æ•°ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703615184-c4c3dd6f-7242-4dfb-a924-fe04be39ae04.png#align=left&display=inline&height=323&margin=%5Bobject%20Object%5D&name=%E8%8A%82%E6%B5%81.png&originHeight=323&originWidth=330&size=8046&status=done&style=none&width=330\" alt=\"èŠ‚æµ.png\"></p>\n<h3 id=\"æ—¶é—´æˆ³æ³•\"><a href=\"#æ—¶é—´æˆ³æ³•\" class=\"headerlink\" title=\"æ—¶é—´æˆ³æ³•\"></a>æ—¶é—´æˆ³æ³•</h3><blockquote>\n<p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prev = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> now = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (now - prev &gt;= delay) &#123;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">      prev = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, throttle(handler, <span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®šæ—¶å™¨æ³•\"><a href=\"#å®šæ—¶å™¨æ³•\" class=\"headerlink\" title=\"å®šæ—¶å™¨æ³•\"></a>å®šæ—¶å™¨æ³•</h3><blockquote>\n<p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        func.apply(context, args);</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, delay);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.random());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, throttle(handle, <span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\"><a href=\"#æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\" class=\"headerlink\" title=\"æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\"></a>æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ</h3><blockquote>\n<p>æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶ä¼šç«‹å³æ‰§è¡Œï¼Œå®šæ—¶å™¨æ³•ä¼šåœ¨ n ç§’ä¹‹åç¬¬ä¸€æ¬¡æ‰§è¡Œ<br>æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ‰§è¡Œäº‹ä»¶ï¼Œå®šæ—¶å™¨æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶</p>\n</blockquote>\n<h3 id=\"æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\"><a href=\"#æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\" class=\"headerlink\" title=\"æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\"></a>æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬</h3><blockquote>\n<p>ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä»ä¼šæ‰§è¡Œä¸€æ¬¡</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> context;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> args;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    func.apply(context, args);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> remaining = delay - (currentTime - startTime);</span><br><span class=\"line\">    context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ²¡æœ‰å‰©ä½™çš„æ—¶é—´æˆ–è€…è‡ªè¡Œä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">      startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (timer) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(func, remaining);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å…¶ä»–åŠŸèƒ½\"><a href=\"#å…¶ä»–åŠŸèƒ½\" class=\"headerlink\" title=\"å…¶ä»–åŠŸèƒ½\"></a>å…¶ä»–åŠŸèƒ½</h3><ul>\n<li>åŒ…æ‹¬ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä¸æ‰§è¡Œï¼›ç¬¬ä¸€æ¬¡ä¸ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åå†æ‰§è¡Œä¸€æ¬¡ï¼›å–æ¶ˆèŠ‚æµï¼›</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, wait, options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> context;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> args;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!options) options = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    startTime = options.leading === <span class=\"literal\">false</span> ? <span class=\"number\">0</span> : <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    func.apply(context, args);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) context = args = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> throttled = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> now = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!startTime &amp;&amp; options.leading === <span class=\"literal\">false</span>) startTime = now;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> remaining = wait - (now - startTime);</span><br><span class=\"line\">    context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (timer) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      startTime = now;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) context = args = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!timer &amp;&amp; options.trailing !== <span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(later, remaining);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  throttled.cancel = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    startTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">    timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> throttled;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><ul>\n<li>é˜²æŠ–</li>\n</ul>\n<blockquote>\n<p><code>å°†å‡ æ¬¡æ“ä½œåˆå¹¶ä¸ºä¸€æ­¤æ“ä½œè¿›è¡Œ</code>ã€‚åŸç†æ˜¯ç»´æŠ¤ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè§„å®šåœ¨ <code>delay</code> æ—¶é—´åè§¦å‘å‡½æ•°ï¼Œä½†æ˜¯åœ¨ <code>delay</code> æ—¶é—´å†…å†æ¬¡è§¦å‘çš„è¯ï¼Œå°±ä¼šå–æ¶ˆä¹‹å‰çš„è®¡æ—¶å™¨è€Œé‡æ–°è®¾ç½®ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰æœ€åä¸€æ¬¡æ“ä½œèƒ½è¢«è§¦å‘ã€‚</p>\n</blockquote>\n<ul>\n<li>èŠ‚æµ</li>\n</ul>\n<blockquote>\n<p><code>ä½¿å¾—ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°</code>ã€‚åŸç†æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ä¸€å®šæ—¶é—´æ¥è§¦å‘å‡½æ•°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡½æ•°èŠ‚æµä¸ç®¡äº‹ä»¶è§¦å‘æœ‰å¤šé¢‘ç¹ï¼Œéƒ½ä¼šä¿è¯åœ¨è§„å®šæ—¶é—´å†…ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œå‡½æ•°é˜²æŠ–åªæ˜¯åœ¨æœ€åä¸€æ¬¡äº‹ä»¶åæ‰è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚ æ¯”å¦‚åœ¨é¡µé¢çš„æ— é™åŠ è½½åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨æ»šåŠ¨é¡µé¢æ—¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡ <code>Ajax</code> è¯·æ±‚ï¼Œè€Œä¸æ˜¯åœ¨ç”¨æˆ·åœä¸‹æ»šåŠ¨é¡µé¢æ“ä½œæ—¶æ‰å»è¯·æ±‚æ•°æ®ã€‚è¿™æ ·çš„åœºæ™¯ï¼Œå°±é€‚åˆç”¨èŠ‚æµæŠ€æœ¯æ¥å®ç°ã€‚</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h2><blockquote>\n<ol>\n<li>åœ¨è¿›è¡Œçª—å£çš„ <code>resize</code>ã€<code>scroll</code></li>\n<li><code>è¾“å…¥æ¡†å†…å®¹æ ¡éªŒ</code></li>\n<li><code>mousedown</code>ã€<code>mousemove</code></li>\n<li><code>keyup</code>, <code>keydown</code><br>ç­‰æ“ä½œæ—¶ï¼Œå¦‚æœäº‹ä»¶å¤„ç†å‡½æ•°è°ƒç”¨çš„é¢‘ç‡æ— é™åˆ¶ï¼Œä¼šåŠ é‡æµè§ˆå™¨çš„è´Ÿæ‹…ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒéå¸¸ç³Ÿç³•ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨ <code>debounce</code>ï¼ˆé˜²æŠ–ï¼‰å’Œ <code>throttle</code>ï¼ˆèŠ‚æµï¼‰çš„æ–¹å¼æ¥å‡å°‘è°ƒç”¨é¢‘ç‡ï¼ŒåŒæ—¶åˆä¸å½±å“å®é™…æ•ˆæœã€‚</li>\n</ol>\n</blockquote>\n<h2 id=\"é˜²æŠ–\"><a href=\"#é˜²æŠ–\" class=\"headerlink\" title=\"é˜²æŠ–\"></a>é˜²æŠ–</h2><blockquote>\n<p>å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ <code>scroll</code> äº‹ä»¶æ—¶ï¼Œå¹¶ä¸æ‰§è¡Œ <code>handle</code> å‡½æ•°ï¼Œå½“ <code>1s</code> å†…æ²¡æœ‰è§¦å‘ <code>scroll</code>äº‹ä»¶æ—¶ï¼Œæ‰ä¼šå»¶æ—¶è§¦å‘ <code>scroll</code> äº‹ä»¶ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703595580-b3299f97-9961-476b-89e1-64db6b1090e5.png#align=left&display=inline&height=150&margin=%5Bobject%20Object%5D&name=%E9%98%B2%E6%8A%96.png&originHeight=150&originWidth=700&size=8748&status=done&style=none&width=700\" alt=\"é˜²æŠ–.png\"></p>\n<h3 id=\"ä¼ ç»Ÿé˜²æŠ–\"><a href=\"#ä¼ ç»Ÿé˜²æŠ–\" class=\"headerlink\" title=\"ä¼ ç»Ÿé˜²æŠ–\"></a>ä¼ ç»Ÿé˜²æŠ–</h3><h4 id=\"æœ€ç®€å•çš„é˜²æŠ–\"><a href=\"#æœ€ç®€å•çš„é˜²æŠ–\" class=\"headerlink\" title=\"æœ€ç®€å•çš„é˜²æŠ–\"></a>æœ€ç®€å•çš„é˜²æŠ–</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">fn, wait</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(fn, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å¤„ç†å‡½æ•°</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hanlder</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// äº‹ä»¶</span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, debounce(handler, <span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¿®æ”¹-this\"><a href=\"#ä¿®æ”¹-this\" class=\"headerlink\" title=\"ä¿®æ”¹ this\"></a>ä¿®æ”¹ this</h4><blockquote>\n<p>åœ¨ <code>debounce</code> åŒ…è£¹åçš„ <code>fn</code> ä¸­æˆ‘ä»¬è¾“å‡º <code>this</code> ä¼šæŒ‡å‘ <code>window</code> å¯¹è±¡ï¼Œè€Œæœ‰äº›æƒ…å†µä¸‹ <code>fn</code> å†…çš„ <code>this</code> å¹¶ä¸æŒ‡å‘ <code>window</code>ï¼Œæ‰€ä»¥ä¿®æ­£åçš„ <code>é˜²æŠ–å‡½æ•°</code> å¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">fn, wait</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¼ é€’-event-äº‹ä»¶å¯¹è±¡\"><a href=\"#ä¼ é€’-event-äº‹ä»¶å¯¹è±¡\" class=\"headerlink\" title=\"ä¼ é€’ event äº‹ä»¶å¯¹è±¡\"></a>ä¼ é€’ event äº‹ä»¶å¯¹è±¡</h4><blockquote>\n<p>åœ¨ <code>debounce</code> åŒ…è£¹åçš„ <code>fn</code> ä¸­æˆ‘ä»¬è¾“å‡º <code>event</code> ä¸º <code>undefined</code>ï¼Œè€Œä¸è¢«åŒ…è£¹çš„ <code>fn</code> ä¸­å°†è¾“å‡ºç›¸åº”çš„äº‹ä»¶æºï¼Œæ‰€ä»¥ä¿®æ­£åçš„ <code>é˜²æŠ–å‡½æ•°</code> å¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">fn, wait</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\"><a href=\"#ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\" class=\"headerlink\" title=\"ç«‹å³æ‰§è¡Œçš„é˜²æŠ–\"></a>ç«‹å³æ‰§è¡Œçš„é˜²æŠ–</h3><blockquote>\n<p>æŸäº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›éè¦ç­‰åˆ°äº‹ä»¶åœæ­¢è§¦å‘åæ‰æ‰§è¡Œç›¸åº”é€»è¾‘ï¼Œå¸Œæœ›ç«‹åˆ»æ‰§è¡Œå‡½æ•°ï¼Œä½†æ˜¯è¦ç­‰åˆ°åœæ­¢è§¦å‘ <code>n</code> ç§’åï¼Œæ‰å¯ä»¥é‡æ–°è§¦å‘æ‰§è¡Œã€‚<br>æ­¤æ—¶æˆ‘ä»¬éœ€è¦å¢åŠ  <code>immediate</code> å‚æ•°æ¥è¿›è¡Œæ§åˆ¶æ˜¯å¦ç«‹å³æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ­¤æ—¶æ³¨æ„ä¸€ç‚¹ï¼Œå°±æ˜¯ <code>fn</code> å‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿè¦è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯å½“ <code>immediate</code> ä¸º Â <code>false</code> çš„æ—¶å€™ï¼Œå› ä¸ºä½¿ç”¨äº† <code>setTimeout</code> ï¼Œæˆ‘ä»¬å°† <code>fn.apply(context, args)</code> çš„è¿”å›å€¼èµ‹ç»™å˜é‡ï¼Œæœ€åå† <code>return</code> çš„æ—¶å€™ï¼Œå€¼å°†ä¼šä¸€ç›´æ˜¯ <code>undefined</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåœ¨ <code>immediate</code> ä¸º <code>true</code> çš„æ—¶å€™è¿”å›å‡½æ•°çš„æ‰§è¡Œç»“æœã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">        result = fn.apply(context, args);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\"><a href=\"#å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\" class=\"headerlink\" title=\"å¯ä»¥å–æ¶ˆçš„é˜²æŠ–\"></a>å¯ä»¥å–æ¶ˆçš„é˜²æŠ–</h3><blockquote>\n<p>æ–°çš„éœ€æ±‚æ˜¯å¸Œæœ›èƒ½å–æ¶ˆ <code>debounce</code> å‡½æ•°ï¼Œæ¯”å¦‚è¯´ <code>debounce</code> çš„æ—¶é—´é—´éš”æ˜¯ <code>10</code> ç§’é’Ÿï¼Œ<code>immediate</code> ä¸º <code>true</code>ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘åªæœ‰ç­‰ <code>10</code> ç§’åæ‰èƒ½é‡æ–°è§¦å‘äº‹ä»¶ï¼Œç°åœ¨æˆ‘å¸Œæœ›æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åï¼Œå–æ¶ˆé˜²æŠ–ï¼Œè¿™æ ·æˆ‘å†å»è§¦å‘ï¼Œå°±å¯ä»¥åˆç«‹åˆ»æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">debounce</span>(<span class=\"params\">func, wait, immediate</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> result;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> debounceCallback = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timer != <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (immediate) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ç«‹å³æ‰§è¡Œ</span></span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">        result = fn.apply(context, args);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        fn.apply(context, args);</span><br><span class=\"line\">      &#125;, wait);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  debounceCallback.cancel = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">    timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> debounceCallback;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"èŠ‚æµ\"><a href=\"#èŠ‚æµ\" class=\"headerlink\" title=\"èŠ‚æµ\"></a>èŠ‚æµ</h2><blockquote>\n<p>å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ <code>ä¸€å®šæ—¶é—´æ®µå†…åªè°ƒç”¨ä¸€æ¬¡</code> äº‹ä»¶å¤„ç†å‡½æ•°ã€‚èŠ‚æµé€šä¿—è§£é‡Šå°±æ¯”å¦‚æˆ‘ä»¬æ°´é¾™å¤´æ”¾æ°´ï¼Œé˜€é—¨ä¸€æ‰“å¼€ï¼Œæ°´å“—å“—çš„å¾€ä¸‹æµï¼Œç§‰ç€å‹¤ä¿­èŠ‚çº¦çš„ä¼˜è‰¯ä¼ ç»Ÿç¾å¾·ï¼Œæˆ‘ä»¬è¦æŠŠæ°´é¾™å¤´å…³å°ç‚¹ï¼Œæœ€å¥½æ˜¯å¦‚æˆ‘ä»¬å¿ƒæ„æŒ‰ç…§ä¸€å®šè§„å¾‹åœ¨æŸä¸ªæ—¶é—´é—´éš”å†…ä¸€æ»´ä¸€æ»´çš„å¾€ä¸‹æ»´ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘ <code>scroll</code> äº‹ä»¶æ—¶ï¼Œå¹¶ä¸ç«‹å³æ‰§è¡Œ <code>handle</code> å‡½æ•°ï¼Œæ¯éš” <code>1s</code> æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ <code>handle</code> å‡½æ•°ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703615184-c4c3dd6f-7242-4dfb-a924-fe04be39ae04.png#align=left&display=inline&height=323&margin=%5Bobject%20Object%5D&name=%E8%8A%82%E6%B5%81.png&originHeight=323&originWidth=330&size=8046&status=done&style=none&width=330\" alt=\"èŠ‚æµ.png\"></p>\n<h3 id=\"æ—¶é—´æˆ³æ³•\"><a href=\"#æ—¶é—´æˆ³æ³•\" class=\"headerlink\" title=\"æ—¶é—´æˆ³æ³•\"></a>æ—¶é—´æˆ³æ³•</h3><blockquote>\n<p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å–å‡ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œç„¶åå‡å»ä¹‹å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå¤§äºè®¾ç½®çš„æ—¶é—´å‘¨æœŸï¼Œå°±æ‰§è¡Œå‡½æ•°ï¼Œç„¶åæ›´æ–°æ—¶é—´æˆ³ä¸ºå½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚æœå°äºï¼Œå°±ä¸æ‰§è¡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> prev = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> now = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (now - prev &gt;= delay) &#123;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">      prev = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">parseInt</span>(<span class=\"built_in\">Math</span>.random()));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, throttle(handler, <span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®šæ—¶å™¨æ³•\"><a href=\"#å®šæ—¶å™¨æ³•\" class=\"headerlink\" title=\"å®šæ—¶å™¨æ³•\"></a>å®šæ—¶å™¨æ³•</h3><blockquote>\n<p>å½“è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå†è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå®šæ—¶å™¨å­˜åœ¨ï¼Œå°±ä¸æ‰§è¡Œï¼Œç›´åˆ°å®šæ—¶å™¨æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œå‡½æ•°ï¼Œæ¸…ç©ºå®šæ—¶å™¨ï¼Œè¿™æ ·å°±å¯ä»¥è®¾ç½®ä¸‹ä¸ªå®šæ—¶å™¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> throttle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        func.apply(context, args);</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;, delay);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handle</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">Math</span>.random());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, throttle(handle, <span class=\"number\">1000</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\"><a href=\"#æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\" class=\"headerlink\" title=\"æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ\"></a>æ—¶é—´æˆ³æ³•å’Œå®šæ—¶å™¨æ³•çš„æ¯”è¾ƒ</h3><blockquote>\n<p>æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶ä¼šç«‹å³æ‰§è¡Œï¼Œå®šæ—¶å™¨æ³•ä¼šåœ¨ n ç§’ä¹‹åç¬¬ä¸€æ¬¡æ‰§è¡Œ<br>æ—¶é—´æˆ³æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åæ²¡æœ‰åŠæ³•å†æ‰§è¡Œäº‹ä»¶ï¼Œå®šæ—¶å™¨æ³•ä¸­äº‹ä»¶åœæ­¢è§¦å‘åä¾ç„¶ä¼šå†æ‰§è¡Œä¸€æ¬¡äº‹ä»¶</p>\n</blockquote>\n<h3 id=\"æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\"><a href=\"#æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\" class=\"headerlink\" title=\"æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬\"></a>æœ€ç»ˆåŠ å¼ºç‰ˆæœ¬</h3><blockquote>\n<p>ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä»ä¼šæ‰§è¡Œä¸€æ¬¡</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, delay</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> context;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> args;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    func.apply(context, args);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">var</span> remaining = delay - (currentTime - startTime);</span><br><span class=\"line\">    context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"comment\">// å¦‚æœæ²¡æœ‰å‰©ä½™çš„æ—¶é—´æˆ–è€…è‡ªè¡Œä¿®æ”¹äº†ç³»ç»Ÿæ—¶é—´</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">      startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (timer) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(func, remaining);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å…¶ä»–åŠŸèƒ½\"><a href=\"#å…¶ä»–åŠŸèƒ½\" class=\"headerlink\" title=\"å…¶ä»–åŠŸèƒ½\"></a>å…¶ä»–åŠŸèƒ½</h3><ul>\n<li>åŒ…æ‹¬ç¬¬ä¸€æ¬¡ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åä¸æ‰§è¡Œï¼›ç¬¬ä¸€æ¬¡ä¸ç«‹å³æ‰§è¡Œï¼Œæœ€åä¸€æ¬¡åœæ­¢åå†æ‰§è¡Œä¸€æ¬¡ï¼›å–æ¶ˆèŠ‚æµï¼›</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">throttle</span>(<span class=\"params\">func, wait, options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> startTime = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> context;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> args;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!options) options = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> later = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    startTime = options.leading === <span class=\"literal\">false</span> ? <span class=\"number\">0</span> : <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    func.apply(context, args);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!timer) context = args = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> throttled = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> now = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!startTime &amp;&amp; options.leading === <span class=\"literal\">false</span>) startTime = now;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> remaining = wait - (now - startTime);</span><br><span class=\"line\">    context = <span class=\"built_in\">this</span>;</span><br><span class=\"line\">    args = <span class=\"built_in\">arguments</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (remaining &lt;= <span class=\"number\">0</span> || remaining &gt; wait) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (timer) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">clearTimeout</span>(timer);</span><br><span class=\"line\">        timer = <span class=\"literal\">null</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      startTime = now;</span><br><span class=\"line\">      func.apply(context, args);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!timer) context = args = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (!timer &amp;&amp; options.trailing !== <span class=\"literal\">false</span>) &#123;</span><br><span class=\"line\">      timer = <span class=\"built_in\">setTimeout</span>(later, remaining);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  throttled.cancel = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    startTime = <span class=\"number\">0</span>;</span><br><span class=\"line\">    timeout = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> throttled;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><ul>\n<li>é˜²æŠ–</li>\n</ul>\n<blockquote>\n<p><code>å°†å‡ æ¬¡æ“ä½œåˆå¹¶ä¸ºä¸€æ­¤æ“ä½œè¿›è¡Œ</code>ã€‚åŸç†æ˜¯ç»´æŠ¤ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œè§„å®šåœ¨ <code>delay</code> æ—¶é—´åè§¦å‘å‡½æ•°ï¼Œä½†æ˜¯åœ¨ <code>delay</code> æ—¶é—´å†…å†æ¬¡è§¦å‘çš„è¯ï¼Œå°±ä¼šå–æ¶ˆä¹‹å‰çš„è®¡æ—¶å™¨è€Œé‡æ–°è®¾ç½®ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªæœ‰æœ€åä¸€æ¬¡æ“ä½œèƒ½è¢«è§¦å‘ã€‚</p>\n</blockquote>\n<ul>\n<li>èŠ‚æµ</li>\n</ul>\n<blockquote>\n<p><code>ä½¿å¾—ä¸€å®šæ—¶é—´å†…åªè§¦å‘ä¸€æ¬¡å‡½æ•°</code>ã€‚åŸç†æ˜¯é€šè¿‡åˆ¤æ–­æ˜¯å¦åˆ°è¾¾ä¸€å®šæ—¶é—´æ¥è§¦å‘å‡½æ•°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡½æ•°èŠ‚æµä¸ç®¡äº‹ä»¶è§¦å‘æœ‰å¤šé¢‘ç¹ï¼Œéƒ½ä¼šä¿è¯åœ¨è§„å®šæ—¶é—´å†…ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œå‡½æ•°é˜²æŠ–åªæ˜¯åœ¨æœ€åä¸€æ¬¡äº‹ä»¶åæ‰è§¦å‘ä¸€æ¬¡å‡½æ•°ã€‚ æ¯”å¦‚åœ¨é¡µé¢çš„æ— é™åŠ è½½åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æˆ·åœ¨æ»šåŠ¨é¡µé¢æ—¶ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å‘ä¸€æ¬¡ <code>Ajax</code> è¯·æ±‚ï¼Œè€Œä¸æ˜¯åœ¨ç”¨æˆ·åœä¸‹æ»šåŠ¨é¡µé¢æ“ä½œæ—¶æ‰å»è¯·æ±‚æ•°æ®ã€‚è¿™æ ·çš„åœºæ™¯ï¼Œå°±é€‚åˆç”¨èŠ‚æµæŠ€æœ¯æ¥å®ç°ã€‚</p>\n</blockquote>\n"},{"title":"Chrome è°ƒè¯•æŠ€å·§","date":"2020-10-14T16:00:00.000Z","_content":"\n> å®˜æ–¹æ–‡æ¡£: [https://developers.google.com/](https://developers.google.com/)\n\n> éš†é‡æ„Ÿè°¢: [æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§](https://juejin.cn/book/6844733783166418958)\n\n### 1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \n\n- æ§åˆ¶å°è¾“å…¥ `$0`Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273)\n\n### 2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\n\n- é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ `Break on`ã€‚\n- `subtree modifications` ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« `ç§»é™¤` æˆ–è€… `æ·»åŠ `çš„äº‹ä»¶\n- `Break > attribute modifications`Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« `æ·»åŠ `ï¼Œ`ç§»é™¤` æˆ–è€… `è¢«ä¿®æ”¹å€¼`çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n- `Break > node removal`Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« `ç§»é™¤` çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n\n### 3ã€debug å‡½æ•°\n\n- å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435)\n\n### 4ã€console.log æ·»åŠ æ ·å¼\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654)\n\n### 5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\n\n- é€‰ä¸­ `Memory > Heap snapshot`Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚\n- é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ `Comparison`Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ `delta`Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919)\n\n### 6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \n\n- Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567)\n\n### 7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\n\n- `node --inspect-brk æ–‡ä»¶å`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868)\n\n### 8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\n\n- æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ `debug`ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623)\n\n- æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ `XHR`ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» `Break > node removal` ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ `call stack` æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938)\n\n- æ–¹æ¡ˆ 3: ä½¿ç”¨ `getEventListeners` è·å– `Dom` å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ `Chrome` æ§åˆ¶å°ä½¿ç”¨)\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740)\n\n### 9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\n\n1. åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹\n1. å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶\n1. ä½¿ç”¨ node --inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡\n1. æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101)\n\n### 10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\n\n- æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯\n- æ–¹æ¡ˆ 2: ç‚¹å‡» `Sources`Â  åç‚¹å‡» `Pause on exceptions`Â  æœ€åå‹¾é€‰ `Pause on exceptions`ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901)\n\n### 11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\n\n- é€‰ä¸­ `Sources > Filesystem`Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067)\n\n### 12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \n\n- é€‰ä¸­ `Sources > Snippets`Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ\n- è¾“å…¥ `Command + p`Â  åè¾“å…¥ `i`Â  åæ‰§è¡Œ\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845)\n\n### 13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\n\n- é€‰ä¸­ `Source > Overrides`Â ï¼Œä¹‹åç‚¹å‡» `+`Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ `Enable Local Overrides`Â ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831)\n\n### 14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\n\n- è¾“å…¥ `Command + shift + p`Â ï¼Œæœç´¢ `show changes`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928)\n\n### 15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\n\n- é€‰æ‹© `NetWork > Initialtor`Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744)\n\n### 16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\n\n- `Command + shift + p`Â  è¾“å…¥ `show performance monitor`Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚\n  - `CPU usage`Â ï¼š `cpu` çš„ç›‘å¬\n  - `JS heap size`Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° `window`Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚\n  - `DOM Nodes`: å†…å­˜ä¸­æ‰€åˆ†é…çš„ `dom` èŠ‚ç‚¹çš„ä¸ªæ•°\n  - `JS envnt listeners`: `js` ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919)\n\n### 17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\n\n- é€‰æ‹© `performance`Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… `js` ä»£ç è¿è¡Œçš„æƒ…å†µã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919)\n\n### 18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\n\n- `Command + shift + p`Â  è¾“å…¥ `show animations`Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919)\n\n### 19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\n\n- `Command + shift +p`Â  è¾“å…¥ `show coverage`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893)\n\n### 20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\n\n- å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â `copy()`Â  åœ¨ Â `console`Â  é‡Œ Â `copy`Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â `copy($_)`Â  æˆ– Â `copy($0)`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332)\n\n### 21ã€$\\_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\n\n- `$_`Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ **å¼•ç”¨**\n\n\\*\\*\n**![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507)**\n\n### 22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\n\n- æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ `npm` åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ [Chrome æ’ä»¶:Console Importer](https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related) çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ `console` ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› `npm` åº“ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332)\n\n### 23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\n\n- `DevTools` åœ¨ `Console` é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º `Live expression` çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ \"çœ¼ç›\" ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• `JavaScript` è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102)\n\n### 24ã€é€šè¿‡ 'h' æ¥éšè—å…ƒç´ \n\n- æŒ‰ä¸€ä¸‹ Â `'h'`Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ '`h`' å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332)\n\n### 25ã€æ‹–åŠ¨ & æ”¾ç½® å…ƒç´ \n\n- å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â `DOM`Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)\n\n![2.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066)\n\n### 26ã€ä½¿ç”¨ `control` (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\n\n- å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â `DOM`Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨`[ctrl]`Â +Â `[â¬†]`Â /Â `[ctrl]`Â +Â `[â¬‡]`Â (`[âŒ˜]`Â +Â `[â¬†]`Â /Â `[âŒ˜]`Â +Â `[â¬‡]`Â on Mac).\n\n![3.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332)\n\n### 27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\n\n- ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ `[ctrl]` + `[v]` æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ `HTML` ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ\n\n- ä½¿ç”¨`[ctrl]` + `[z]` (`[âŒ˜]` + `[z]` on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ `[ctrl]` + `[shift]` + `[z]`é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066)\n\n### 28ã€`Shadow editor` é˜´å½±ç¼–è¾‘å™¨\n\n- ä½ å¯ä»¥é€šè¿‡åœ¨ Â `Style`Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â `box-shadow`Â  å±æ€§æˆ–è€… Â `text-shadow`Â  å±æ€§çš„ Â `é˜´å½±æ–¹å½¢ç¬¦å·`Â  æ¥æ‰“å¼€å®ƒï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576)\n\n### 29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\n\n- ä¹Ÿç§°ä¸º `Cubic bezier(è´å¡å°”)` ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ `CSS` çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ `é­”æ³•æ•°å€¼` ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º `transition-timing-function` æˆ–è€… `animation-timing-function` CSS å±æ€§ã€‚\n\n- åƒä¹‹å‰è¯´çš„ `Color picker` å’Œ `Shadow editor` ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š`trasition`ï¼Œ `animation` - è¯·æ³¨æ„ï¼šå¦‚æœ`timing` å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474)\n\n### 30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\n\nå½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ `Color` å’Œ `Shadow` ç¼–è¾‘å™¨æ·»åŠ  `CSS` å±æ€§çš„æŒ‰é’®ï¼š\n\n- `text-shadow`\n\n- `box-shadow`\n\n- `color`\n\n- `background-color`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632)\n\n### 31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\n\n- ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â `â–¶`Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â `expand recursively`Â  å‘½ä»¤ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760)\n\n### 32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\n\n- å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ `API` è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚\n\n- `Drawer` é‡Œçš„ `Sensors(ä¼ æ„Ÿå™¨)` é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« `navigator.geolocation.watchPosition`ï¼ˆæˆ– `.getCurrentPosition` ï¼‰æŠ¥å‘Šã€‚\n\n- å¦‚æœä½ çš„ `App` ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774)\n","source":"_posts/å‰ç«¯/Chrome è°ƒè¯•æŠ€å·§.md","raw":"---\ntitle: Chrome è°ƒè¯•æŠ€å·§\ndate: 2020-10-15\ncategories: [å‰ç«¯, js]\ntags: \n  - ä½¿ç”¨æŠ€å·§\n---\n\n> å®˜æ–¹æ–‡æ¡£: [https://developers.google.com/](https://developers.google.com/)\n\n> éš†é‡æ„Ÿè°¢: [æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§](https://juejin.cn/book/6844733783166418958)\n\n### 1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \n\n- æ§åˆ¶å°è¾“å…¥ `$0`Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273)\n\n### 2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\n\n- é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ `Break on`ã€‚\n- `subtree modifications` ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« `ç§»é™¤` æˆ–è€… `æ·»åŠ `çš„äº‹ä»¶\n- `Break > attribute modifications`Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« `æ·»åŠ `ï¼Œ`ç§»é™¤` æˆ–è€… `è¢«ä¿®æ”¹å€¼`çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n- `Break > node removal`Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« `ç§»é™¤` çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚\n\n### 3ã€debug å‡½æ•°\n\n- å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435)\n\n### 4ã€console.log æ·»åŠ æ ·å¼\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654)\n\n### 5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\n\n- é€‰ä¸­ `Memory > Heap snapshot`Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚\n- é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ `Comparison`Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ `delta`Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919)\n\n### 6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \n\n- Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ \n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567)\n\n### 7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\n\n- `node --inspect-brk æ–‡ä»¶å`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868)\n\n### 8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\n\n- æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ `debug`ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623)\n\n- æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ `XHR`ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» `Break > node removal` ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ `call stack` æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938)\n\n- æ–¹æ¡ˆ 3: ä½¿ç”¨ `getEventListeners` è·å– `Dom` å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ `Chrome` æ§åˆ¶å°ä½¿ç”¨)\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740)\n\n### 9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\n\n1. åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹\n1. å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶\n1. ä½¿ç”¨ node --inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡\n1. æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101)\n\n### 10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\n\n- æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯\n- æ–¹æ¡ˆ 2: ç‚¹å‡» `Sources`Â  åç‚¹å‡» `Pause on exceptions`Â  æœ€åå‹¾é€‰ `Pause on exceptions`ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901)\n\n### 11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\n\n- é€‰ä¸­ `Sources > Filesystem`Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067)\n\n### 12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \n\n- é€‰ä¸­ `Sources > Snippets`Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ\n- è¾“å…¥ `Command + p`Â  åè¾“å…¥ `i`Â  åæ‰§è¡Œ\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845)\n\n### 13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\n\n- é€‰ä¸­ `Source > Overrides`Â ï¼Œä¹‹åç‚¹å‡» `+`Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ `Enable Local Overrides`Â ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831)\n\n### 14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\n\n- è¾“å…¥ `Command + shift + p`Â ï¼Œæœç´¢ `show changes`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928)\n\n### 15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\n\n- é€‰æ‹© `NetWork > Initialtor`Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077)\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744)\n\n### 16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\n\n- `Command + shift + p`Â  è¾“å…¥ `show performance monitor`Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚\n  - `CPU usage`Â ï¼š `cpu` çš„ç›‘å¬\n  - `JS heap size`Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° `window`Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚\n  - `DOM Nodes`: å†…å­˜ä¸­æ‰€åˆ†é…çš„ `dom` èŠ‚ç‚¹çš„ä¸ªæ•°\n  - `JS envnt listeners`: `js` ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919)\n\n### 17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\n\n- é€‰æ‹© `performance`Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… `js` ä»£ç è¿è¡Œçš„æƒ…å†µã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919)\n\n### 18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\n\n- `Command + shift + p`Â  è¾“å…¥ `show animations`Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919)\n\n### 19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\n\n- `Command + shift +p`Â  è¾“å…¥ `show coverage`\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893)\n\n### 20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\n\n- å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â `copy()`Â  åœ¨ Â `console`Â  é‡Œ Â `copy`Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â `copy($_)`Â  æˆ– Â `copy($0)`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332)\n\n### 21ã€$\\_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\n\n- `$_`Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ **å¼•ç”¨**\n\n\\*\\*\n**![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507)**\n\n### 22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\n\n- æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ `npm` åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ [Chrome æ’ä»¶:Console Importer](https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related) çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ `console` ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› `npm` åº“ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332)\n\n### 23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\n\n- `DevTools` åœ¨ `Console` é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º `Live expression` çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ \"çœ¼ç›\" ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• `JavaScript` è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102)\n\n### 24ã€é€šè¿‡ 'h' æ¥éšè—å…ƒç´ \n\n- æŒ‰ä¸€ä¸‹ Â `'h'`Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ '`h`' å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332)\n\n### 25ã€æ‹–åŠ¨ & æ”¾ç½® å…ƒç´ \n\n- å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â `DOM`Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)\n\n![2.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066)\n\n### 26ã€ä½¿ç”¨ `control` (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\n\n- å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â `DOM`Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨`[ctrl]`Â +Â `[â¬†]`Â /Â `[ctrl]`Â +Â `[â¬‡]`Â (`[âŒ˜]`Â +Â `[â¬†]`Â /Â `[âŒ˜]`Â +Â `[â¬‡]`Â on Mac).\n\n![3.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332)\n\n### 27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\n\n- ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ `[ctrl]` + `[v]` æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ `HTML` ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ\n\n- ä½¿ç”¨`[ctrl]` + `[z]` (`[âŒ˜]` + `[z]` on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ `[ctrl]` + `[shift]` + `[z]`é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066)\n\n### 28ã€`Shadow editor` é˜´å½±ç¼–è¾‘å™¨\n\n- ä½ å¯ä»¥é€šè¿‡åœ¨ Â `Style`Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â `box-shadow`Â  å±æ€§æˆ–è€… Â `text-shadow`Â  å±æ€§çš„ Â `é˜´å½±æ–¹å½¢ç¬¦å·`Â  æ¥æ‰“å¼€å®ƒï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576)\n\n### 29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\n\n- ä¹Ÿç§°ä¸º `Cubic bezier(è´å¡å°”)` ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ `CSS` çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ `é­”æ³•æ•°å€¼` ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º `transition-timing-function` æˆ–è€… `animation-timing-function` CSS å±æ€§ã€‚\n\n- åƒä¹‹å‰è¯´çš„ `Color picker` å’Œ `Shadow editor` ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š`trasition`ï¼Œ `animation` - è¯·æ³¨æ„ï¼šå¦‚æœ`timing` å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474)\n\n### 30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\n\nå½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ `Color` å’Œ `Shadow` ç¼–è¾‘å™¨æ·»åŠ  `CSS` å±æ€§çš„æŒ‰é’®ï¼š\n\n- `text-shadow`\n\n- `box-shadow`\n\n- `color`\n\n- `background-color`\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632)\n\n### 31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\n\n- ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â `â–¶`Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â `expand recursively`Â  å‘½ä»¤ï¼š\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760)\n\n### 32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\n\n- å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ `API` è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚\n\n- `Drawer` é‡Œçš„ `Sensors(ä¼ æ„Ÿå™¨)` é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« `navigator.geolocation.watchPosition`ï¼ˆæˆ– `.getCurrentPosition` ï¼‰æŠ¥å‘Šã€‚\n\n- å¦‚æœä½ çš„ `App` ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼\n\n![1.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774)\n","slug":"å‰ç«¯/Chrome è°ƒè¯•æŠ€å·§","published":1,"updated":"2021-04-07T07:24:44.045Z","_id":"ckn7476ak002nyx7yfi4b9int","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote>\n<p>å®˜æ–¹æ–‡æ¡£: <a href=\"https://developers.google.com/\">https://developers.google.com/</a></p>\n</blockquote>\n<blockquote>\n<p>éš†é‡æ„Ÿè°¢: <a href=\"https://juejin.cn/book/6844733783166418958\">æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§</a></p>\n</blockquote>\n<h3 id=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \"><a href=\"#1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \" class=\"headerlink\" title=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \"></a>1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ </h3><ul>\n<li>æ§åˆ¶å°è¾“å…¥ <code>$0</code>Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273\" alt=\"image.png\"></p>\n<h3 id=\"2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\"><a href=\"#2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\" class=\"headerlink\" title=\"2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\"></a>2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹</h3><ul>\n<li>é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ <code>Break on</code>ã€‚</li>\n<li><code>subtree modifications</code> ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« <code>ç§»é™¤</code> æˆ–è€… <code>æ·»åŠ </code>çš„äº‹ä»¶</li>\n<li><code>Break &gt; attribute modifications</code>Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« <code>æ·»åŠ </code>ï¼Œ<code>ç§»é™¤</code> æˆ–è€… <code>è¢«ä¿®æ”¹å€¼</code>çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n<li><code>Break &gt; node removal</code>Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« <code>ç§»é™¤</code> çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n</ul>\n<h3 id=\"3ã€debug-å‡½æ•°\"><a href=\"#3ã€debug-å‡½æ•°\" class=\"headerlink\" title=\"3ã€debug å‡½æ•°\"></a>3ã€debug å‡½æ•°</h3><ul>\n<li>å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435\" alt=\"image.png\"></p>\n<h3 id=\"4ã€console-log-æ·»åŠ æ ·å¼\"><a href=\"#4ã€console-log-æ·»åŠ æ ·å¼\" class=\"headerlink\" title=\"4ã€console.log æ·»åŠ æ ·å¼\"></a>4ã€console.log æ·»åŠ æ ·å¼</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654\" alt=\"image.png\"></p>\n<h3 id=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"><a href=\"#5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"></a>5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼</h3><ul>\n<li>é€‰ä¸­ <code>Memory &gt; Heap snapshot</code>Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚</li>\n<li>é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ <code>Comparison</code>Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ <code>delta</code>Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \"><a href=\"#6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \" class=\"headerlink\" title=\"6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \"></a>6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ </h3><ul>\n<li>Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567\" alt=\"image.png\"></p>\n<h3 id=\"7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\"><a href=\"#7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\" class=\"headerlink\" title=\"7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\"></a>7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº</h3><ul>\n<li><code>node --inspect-brk æ–‡ä»¶å</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868\" alt=\"image.png\"></p>\n<h3 id=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"><a href=\"#8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\" class=\"headerlink\" title=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"></a>8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹</h3><ul>\n<li>æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ <code>debug</code>ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ <code>XHR</code>ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» <code>Break &gt; node removal</code> ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ <code>call stack</code> æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 3: ä½¿ç”¨ <code>getEventListeners</code> è·å– <code>Dom</code> å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ <code>Chrome</code> æ§åˆ¶å°ä½¿ç”¨)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740\" alt=\"image.png\"></p>\n<h3 id=\"9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\"><a href=\"#9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\" class=\"headerlink\" title=\"9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\"></a>9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº</h3><ol>\n<li>åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹</li>\n<li>å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶</li>\n<li>ä½¿ç”¨ node â€“inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡</li>\n<li>æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101\" alt=\"image.png\"></p>\n<h3 id=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"><a href=\"#10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\" class=\"headerlink\" title=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"></a>10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ</h3><ul>\n<li>æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯</li>\n<li>æ–¹æ¡ˆ 2: ç‚¹å‡» <code>Sources</code>Â  åç‚¹å‡» <code>Pause on exceptions</code>Â  æœ€åå‹¾é€‰ <code>Pause on exceptions</code>ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901\" alt=\"image.png\"></p>\n<h3 id=\"11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"><a href=\"#11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\" class=\"headerlink\" title=\"11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"></a>11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·</h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Filesystem</code>Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067\" alt=\"image.png\"></p>\n<h3 id=\"12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"><a href=\"#12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \" class=\"headerlink\" title=\"12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"></a>12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç </h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Snippets</code>Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ</li>\n<li>è¾“å…¥ <code>Command + p</code>Â  åè¾“å…¥ <code>i</code>Â  åæ‰§è¡Œ</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845\" alt=\"image.png\"></p>\n<h3 id=\"13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\"><a href=\"#13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\" class=\"headerlink\" title=\"13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\"></a>13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼</h3><ul>\n<li>é€‰ä¸­ <code>Source &gt; Overrides</code>Â ï¼Œä¹‹åç‚¹å‡» <code>+</code>Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ <code>Enable Local Overrides</code>Â ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831\" alt=\"image.png\"></p>\n<h3 id=\"14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"><a href=\"#14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\" class=\"headerlink\" title=\"14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"></a>14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”</h3><ul>\n<li>è¾“å…¥ <code>Command + shift + p</code>Â ï¼Œæœç´¢ <code>show changes</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928\" alt=\"image.png\"></p>\n<h3 id=\"15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"><a href=\"#15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\" class=\"headerlink\" title=\"15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"></a>15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„</h3><ul>\n<li>é€‰æ‹© <code>NetWork &gt; Initialtor</code>Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744\" alt=\"image.png\"></p>\n<h3 id=\"16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\"><a href=\"#16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\" class=\"headerlink\" title=\"16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\"></a>16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show performance monitor</code>Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚<ul>\n<li><code>CPU usage</code>Â ï¼š <code>cpu</code> çš„ç›‘å¬</li>\n<li><code>JS heap size</code>Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° <code>window</code>Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚</li>\n<li><code>DOM Nodes</code>: å†…å­˜ä¸­æ‰€åˆ†é…çš„ <code>dom</code> èŠ‚ç‚¹çš„ä¸ªæ•°</li>\n<li><code>JS envnt listeners</code>: <code>js</code> ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"><a href=\"#17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\" class=\"headerlink\" title=\"17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"></a>17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜</h3><ul>\n<li>é€‰æ‹© <code>performance</code>Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… <code>js</code> ä»£ç è¿è¡Œçš„æƒ…å†µã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"><a href=\"#18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\" class=\"headerlink\" title=\"18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"></a>18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show animations</code>Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"><a href=\"#19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\" class=\"headerlink\" title=\"19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"></a>19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ</h3><ul>\n<li><code>Command + shift +p</code>Â  è¾“å…¥ <code>show coverage</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893\" alt=\"image.png\"></p>\n<h3 id=\"20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\"><a href=\"#20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\" class=\"headerlink\" title=\"20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\"></a>20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹</h3><ul>\n<li>å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â <code>copy()</code>Â  åœ¨ Â <code>console</code>Â  é‡Œ Â <code>copy</code>Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â <code>copy($_)</code>Â  æˆ– Â <code>copy($0)</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"><a href=\"#21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\" class=\"headerlink\" title=\"21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"></a>21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ</h3><ul>\n<li><code>$_</code>Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ <strong>å¼•ç”¨</strong></li>\n</ul>\n<p>**<br><strong><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507\" alt=\"image.png\"></strong></p>\n<h3 id=\"22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"><a href=\"#22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\" class=\"headerlink\" title=\"22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"></a>22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…</h3><ul>\n<li>æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ <code>npm</code> åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ <a href=\"https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related\">Chrome æ’ä»¶:Console Importer</a> çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ <code>console</code> ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› <code>npm</code> åº“ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"><a href=\"#23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\" class=\"headerlink\" title=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"></a>23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼</h3><ul>\n<li><code>DevTools</code> åœ¨ <code>Console</code> é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º <code>Live expression</code> çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ â€œçœ¼ç›â€ ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• <code>JavaScript</code> è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102\" alt=\"1.gif\"></p>\n<h3 id=\"24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \"><a href=\"#24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \" class=\"headerlink\" title=\"24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ \"></a>24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ </h3><ul>\n<li>æŒ‰ä¸€ä¸‹ Â <code>&#39;h&#39;</code>Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ â€˜<code>h</code>â€˜ å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \"><a href=\"#25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \" class=\"headerlink\" title=\"25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ \"></a>25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ </h3><ul>\n<li>å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â <code>DOM</code>Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066\" alt=\"2.gif\"></p>\n<h3 id=\"26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \"><a href=\"#26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \" class=\"headerlink\" title=\"26ã€ä½¿ç”¨ control (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\"></a>26ã€ä½¿ç”¨ <code>control</code> (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !</h3><ul>\n<li>å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â <code>DOM</code>Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨<code>[ctrl]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[ctrl]</code>Â +Â <code>[â¬‡]</code>Â (<code>[âŒ˜]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[âŒ˜]</code>Â +Â <code>[â¬‡]</code>Â on Mac).</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332\" alt=\"3.gif\"></p>\n<h3 id=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"><a href=\"#27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\" class=\"headerlink\" title=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"></a>27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ</h3><ul>\n<li><p>ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ <code>[ctrl]</code> + <code>[v]</code> æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ <code>HTML</code> ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ</p>\n</li>\n<li><p>ä½¿ç”¨<code>[ctrl]</code> + <code>[z]</code> (<code>[âŒ˜]</code> + <code>[z]</code> on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ <code>[ctrl]</code> + <code>[shift]</code> + <code>[z]</code>é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066\" alt=\"1.gif\"></p>\n<h3 id=\"28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\"><a href=\"#28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"28ã€Shadow editor é˜´å½±ç¼–è¾‘å™¨\"></a>28ã€<code>Shadow editor</code> é˜´å½±ç¼–è¾‘å™¨</h3><ul>\n<li>ä½ å¯ä»¥é€šè¿‡åœ¨ Â <code>Style</code>Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â <code>box-shadow</code>Â  å±æ€§æˆ–è€… Â <code>text-shadow</code>Â  å±æ€§çš„ Â <code>é˜´å½±æ–¹å½¢ç¬¦å·</code>Â  æ¥æ‰“å¼€å®ƒï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576\" alt=\"1.gif\"></p>\n<h3 id=\"29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"><a href=\"#29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"></a>29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨</h3><ul>\n<li><p>ä¹Ÿç§°ä¸º <code>Cubic bezier(è´å¡å°”)</code> ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ <code>CSS</code> çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ <code>é­”æ³•æ•°å€¼</code> ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º <code>transition-timing-function</code> æˆ–è€… <code>animation-timing-function</code> CSS å±æ€§ã€‚</p>\n</li>\n<li><p>åƒä¹‹å‰è¯´çš„ <code>Color picker</code> å’Œ <code>Shadow editor</code> ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š<code>trasition</code>ï¼Œ <code>animation</code> - è¯·æ³¨æ„ï¼šå¦‚æœ<code>timing</code> å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474\" alt=\"1.gif\"></p>\n<h3 id=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"><a href=\"#30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\" class=\"headerlink\" title=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"></a>30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®</h3><p>å½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ <code>Color</code> å’Œ <code>Shadow</code> ç¼–è¾‘å™¨æ·»åŠ  <code>CSS</code> å±æ€§çš„æŒ‰é’®ï¼š</p>\n<ul>\n<li><p><code>text-shadow</code></p>\n</li>\n<li><p><code>box-shadow</code></p>\n</li>\n<li><p><code>color</code></p>\n</li>\n<li><p><code>background-color</code></p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632\" alt=\"1.gif\"></p>\n<h3 id=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"><a href=\"#31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\" class=\"headerlink\" title=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"></a>31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹</h3><ul>\n<li>ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â <code>â–¶</code>Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â <code>expand recursively</code>Â  å‘½ä»¤ï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760\" alt=\"1.gif\"></p>\n<h3 id=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"><a href=\"#32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\" class=\"headerlink\" title=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"></a>32ã€æ§åˆ¶ä¼ æ„Ÿå™¨</h3><ul>\n<li><p>å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ <code>API</code> è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚</p>\n</li>\n<li><p><code>Drawer</code> é‡Œçš„ <code>Sensors(ä¼ æ„Ÿå™¨)</code> é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« <code>navigator.geolocation.watchPosition</code>ï¼ˆæˆ– <code>.getCurrentPosition</code> ï¼‰æŠ¥å‘Šã€‚</p>\n</li>\n<li><p>å¦‚æœä½ çš„ <code>App</code> ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774\" alt=\"1.gif\"></p>\n","site":{"data":{}},"excerpt":"","more":"<blockquote>\n<p>å®˜æ–¹æ–‡æ¡£: <a href=\"https://developers.google.com/\">https://developers.google.com/</a></p>\n</blockquote>\n<blockquote>\n<p>éš†é‡æ„Ÿè°¢: <a href=\"https://juejin.cn/book/6844733783166418958\">æ˜é‡‘å°å†Œ-ä½ ä¸çŸ¥é“çš„ Chrome è°ƒè¯•æŠ€å·§</a></p>\n</blockquote>\n<h3 id=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \"><a href=\"#1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„-dom-å…ƒç´ \" class=\"headerlink\" title=\"1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ \"></a>1ã€å¿«é€Ÿæ‰“å°æƒ³è¦çš„ dom å…ƒç´ </h3><ul>\n<li>æ§åˆ¶å°è¾“å…¥ <code>$0</code>Â  å³å¯æ‰“å°å‡ºå½“å‰æŒ‡é’ˆæ‰€é€‰ä¸­çš„å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962961066-f8c6bcff-e407-4e61-a727-4f67246c1891.png#align=left&display=inline&height=72&margin=%5Bobject%20Object%5D&name=image.png&originHeight=72&originWidth=273&size=3469&status=done&style=none&width=273\" alt=\"image.png\"></p>\n<h3 id=\"2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\"><a href=\"#2ã€å¦‚ä½•ç»™-Dom-å…ƒç´ æ‰“æ–­ç‚¹\" class=\"headerlink\" title=\"2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹\"></a>2ã€å¦‚ä½•ç»™ Dom å…ƒç´ æ‰“æ–­ç‚¹</h3><ul>\n<li>é¼ æ ‡å³é”®é€‰ä¸­å…ƒç´ ï¼Œé€‰ä¸­ <code>Break on</code>ã€‚</li>\n<li><code>subtree modifications</code> ç›‘å¬ä»»ä½•å®ƒå†…éƒ¨çš„èŠ‚ç‚¹è¢« <code>ç§»é™¤</code> æˆ–è€… <code>æ·»åŠ </code>çš„äº‹ä»¶</li>\n<li><code>Break &gt; attribute modifications</code>Â  ç›‘å¬ä»»ä½•å½“å‰é€‰ä¸­çš„èŠ‚ç‚¹è¢« <code>æ·»åŠ </code>ï¼Œ<code>ç§»é™¤</code> æˆ–è€… <code>è¢«ä¿®æ”¹å€¼</code>çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«ä¿®æ”¹åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n<li><code>Break &gt; node removal</code>Â  ç›‘å¬è¢«é€‰ä¸­çš„å…ƒç´ è¢« <code>ç§»é™¤</code> çš„äº‹ä»¶ã€‚æ­¤æ—¶å±æ€§è¢«åˆ é™¤åå°†ä¼šäº§ç”Ÿæ–­ç‚¹è°ƒè¯•ã€‚</li>\n</ul>\n<h3 id=\"3ã€debug-å‡½æ•°\"><a href=\"#3ã€debug-å‡½æ•°\" class=\"headerlink\" title=\"3ã€debug å‡½æ•°\"></a>3ã€debug å‡½æ•°</h3><ul>\n<li>å¯ä»¥å°†æƒ³è¦æ‰“æ–­ç‚¹çš„å‡½æ•°ä¼ å…¥è¿›å»ï¼Œä¹‹åå‡½æ•°è¢«è°ƒç”¨æ—¶å°†ä¼šè‡ªåŠ¨å¼€å¯æ–­ç‚¹æ¨¡å¼ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962755747-0c7f7146-c878-47de-9ce8-b686d323fdbf.png#align=left&display=inline&height=124&margin=%5Bobject%20Object%5D&name=image.png&originHeight=124&originWidth=352&size=8413&status=done&style=none&width=352\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962788973-1b1642f8-c89b-4ad6-a58a-62c3b386cfe5.png#align=left&display=inline&height=418&margin=%5Bobject%20Object%5D&name=image.png&originHeight=418&originWidth=1435&size=55406&status=done&style=none&width=1435\" alt=\"image.png\"></p>\n<h3 id=\"4ã€console-log-æ·»åŠ æ ·å¼\"><a href=\"#4ã€console-log-æ·»åŠ æ ·å¼\" class=\"headerlink\" title=\"4ã€console.log æ·»åŠ æ ·å¼\"></a>4ã€console.log æ·»åŠ æ ·å¼</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962692139-67609724-968f-48a4-b9cb-d3a17e89ef35.png#align=left&display=inline&height=55&margin=%5Bobject%20Object%5D&name=image.png&originHeight=55&originWidth=654&size=12329&status=done&style=none&width=654\" alt=\"image.png\"></p>\n<h3 id=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"><a href=\"#5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\" class=\"headerlink\" title=\"5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼\"></a>5ã€å‘ç°é—®é¢˜å¹¶å®šä½ä»£ç çš„å†…å­˜æ³„æ¼</h3><ul>\n<li>é€‰ä¸­ <code>Memory &gt; Heap snapshot</code>Â  ç‚¹å‡»å¼€å§‹å½•åˆ¶çš„å°åœ†åœˆä¹‹åï¼Œchrome å°†ä¼šç”Ÿæˆå¿«ç…§ï¼Œä¸ºäº†é˜²æ­¢æŸäº›ä¸å¿…è¦çš„å½±å“ï¼Œå½•åˆ¶ä¹‹å‰æœ€å¥½å…ˆç‚¹ä¸€ä¸‹åƒåœ¾å›æ”¶ã€‚åå¤çš„æ‰§è¡Œå¯èƒ½è¢«è®¤ä¸ºå†…å­˜æ³„æ¼çš„éƒ¨åˆ†åï¼Œå¤šæ¬¡ç”Ÿæˆå¿«ç…§ï¼Œè‹¥å†…å­˜ä¸€ç›´åœ¨å¢åŠ ï¼Œæ²¡æœ‰è¢«å›æ”¶ï¼Œè¯´æ˜å†…å­˜å·²ç»æ³„æ¼ã€‚</li>\n<li>é€‰ä¸­åƒåœ¾å›æ”¶æŒ‰é’®å³ä¾§ä¸‹æ‹‰èœå•é‡Œçš„ <code>Comparison</code>Â ï¼Œå³å¯å°†é€‰ä¸­çš„å¿«ç…§ä¸å®ƒä¸Šä¸€æ¬¡å¿«ç…§è¿›è¡Œå¯¹æ¯”ã€‚å¦‚ <code>delta</code>Â  çš„æ•°æ®å¯¹æ¯”ï¼Œä»è€Œå¿«é€Ÿå®šä½åˆ°é—®é¢˜å‡ºç°çš„ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963059293-544a6af9-6f7c-40c1-9c70-0953335483ef.png#align=left&display=inline&height=793&margin=%5Bobject%20Object%5D&name=image.png&originHeight=793&originWidth=1919&size=95966&status=done&style=none&width=1919\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963178973-dbc985f5-aefc-4bac-ae79-e9b62bf19485.png#align=left&display=inline&height=631&margin=%5Bobject%20Object%5D&name=image.png&originHeight=631&originWidth=1919&size=122190&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \"><a href=\"#6ã€-å¿«é€Ÿé€‰ä¸­å…ƒç´ \" class=\"headerlink\" title=\"6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ \"></a>6ã€$ å¿«é€Ÿé€‰ä¸­å…ƒç´ </h3><ul>\n<li>Chrome å†…ç½®äº† $ å‡½æ•°ï¼Œå®ƒå’Œ document.querySelector åŠŸèƒ½ç›¸åŒï¼Œä½†åªèƒ½é€‰æ‹©åˆ°ä¸€ä¸ªå…ƒç´ ã€‚$$ å°†åŒ¹é…åˆ°é€‰æ‹©å™¨æ‰€æ‰¾åˆ°çš„æ‰€æœ‰å…ƒç´ </li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962607992-66922bde-af81-4856-a03a-920c36bb1671.png#align=left&display=inline&height=737&margin=%5Bobject%20Object%5D&name=image.png&originHeight=737&originWidth=567&size=74761&status=done&style=none&width=567\" alt=\"image.png\"></p>\n<h3 id=\"7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\"><a href=\"#7ã€ä½¿ç”¨-chrome-è°ƒè¯•-node-js-ç¨‹åº\" class=\"headerlink\" title=\"7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº\"></a>7ã€ä½¿ç”¨ chrome è°ƒè¯• node.js ç¨‹åº</h3><ul>\n<li><code>node --inspect-brk æ–‡ä»¶å</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963302502-b4507a3c-9d9f-4653-ad80-353e509adf07.png#align=left&display=inline&height=39&margin=%5Bobject%20Object%5D&name=image.png&originHeight=39&originWidth=1033&size=8284&status=done&style=none&width=1033\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963324179-88589108-e39a-462e-803e-a70bb2096085.png#align=left&display=inline&height=708&margin=%5Bobject%20Object%5D&name=image.png&originHeight=708&originWidth=2868&size=152314&status=done&style=none&width=2868\" alt=\"image.png\"></p>\n<h3 id=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"><a href=\"#8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\" class=\"headerlink\" title=\"8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹\"></a>8ã€ç‚¹å‡»ä¸€ä¸ªå…ƒç´ ï¼Œè·å–ä¸‹é¢æ‰€æœ‰ä»£ç æ‰§è¡Œè¿‡ç¨‹</h3><ul>\n<li>æ–¹æ¡ˆ 1: å®šä½è¯¥å…ƒç´ çš„æ—¶é—´å¤„ç†å‡½æ•°ï¼Œç„¶åä»è¯¥å‡½æ•°å¾€åæ‰§è¡Œ <code>debug</code>ï¼Œç¡®å®šæ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962134298-7d0081df-45c3-497b-9ede-a1354c8a667e.png#align=left&display=inline&height=304&margin=%5Bobject%20Object%5D&name=image.png&originHeight=304&originWidth=623&size=27216&status=done&style=none&width=623\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 2: æ‰¾åˆ°å½“å‰ç‚¹å‡»æ‰€é€ æˆçš„å½±å“ï¼ˆå¦‚ï¼šåˆ é™¤å…ƒç´ ï¼Œ <code>XHR</code>ï¼‰ç­‰ï¼Œé€šè¿‡ç‚¹å‡» <code>Break &gt; node removal</code> ç­‰æ“ä½œï¼Œåœ¨é€ æˆå½±å“çš„ä½ç½®ä¸‹æ–­ç‚¹ï¼Œé€šè¿‡æŸ¥çœ‹ <code>call stack</code> æŸ¥çœ‹æ‰§è¡Œè¿‡ç¨‹ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606962517481-012784d3-353b-47a6-a7ff-78abf31f6f32.png#align=left&display=inline&height=563&margin=%5Bobject%20Object%5D&name=image.png&originHeight=563&originWidth=938&size=57934&status=done&style=none&width=938\" alt=\"image.png\"></p>\n<ul>\n<li>æ–¹æ¡ˆ 3: ä½¿ç”¨ <code>getEventListeners</code> è·å– <code>Dom</code> å…ƒç´ ä¸Šç»‘å®šçš„äº‹ä»¶ã€‚(æ³¨æ„ï¼šæ­¤æ–¹æ³•åªèƒ½åœ¨ <code>Chrome</code> æ§åˆ¶å°ä½¿ç”¨)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967025807-3772a909-f699-4caf-add2-c5731f96873c.png#align=left&display=inline&height=318&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=740&size=38124&status=done&style=none&width=740\" alt=\"image.png\"></p>\n<h3 id=\"9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\"><a href=\"#9ã€å¦‚ä½•ä½¿ç”¨-Chrome-è°ƒè¯•-Webpack-ç¨‹åº\" class=\"headerlink\" title=\"9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº\"></a>9ã€å¦‚ä½•ä½¿ç”¨ Chrome è°ƒè¯• Webpack ç¨‹åº</h3><ol>\n<li>åœ¨æƒ³è¦è°ƒè¯•çš„ä»£ç ä¸ºæ­¢ä½¿ç”¨ debugger æ‰“æ–­ç‚¹</li>\n<li>å®šä½ webpack-dev-server çš„å‘½ä»¤æ–‡ä»¶</li>\n<li>ä½¿ç”¨ node â€“inspect-brk æ‰“å¼€è°ƒè¯•æœåŠ¡</li>\n<li>æ‰“å¼€ chrome devtool è¿›è¡Œè°ƒè¯•</li>\n</ol>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963641175-f70486be-9e35-4e1f-9623-e82720f7f850.png#align=left&display=inline&height=221&margin=%5Bobject%20Object%5D&name=image.png&originHeight=221&originWidth=1445&size=61528&status=done&style=none&width=1445\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963678848-aaef5b5b-790f-41b5-baaf-a8f7323db103.png#align=left&display=inline&height=603&margin=%5Bobject%20Object%5D&name=image.png&originHeight=603&originWidth=991&size=81341&status=done&style=none&width=991\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606963786975-515fd78b-8273-4ea0-9f23-9ecd0432c169.png#align=left&display=inline&height=56&margin=%5Bobject%20Object%5D&name=image.png&originHeight=56&originWidth=1101&size=16555&status=done&style=none&width=1101\" alt=\"image.png\"></p>\n<h3 id=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"><a href=\"#10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\" class=\"headerlink\" title=\"10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ\"></a>10ã€ä½¿ç”¨é”™è¯¯æ–­ç‚¹ï¼Œè®©ç¨‹åºåœ¨é”™è¯¯å¤„æš‚åœ</h3><ul>\n<li>æ–¹æ¡ˆ 1: åœ¨æ§åˆ¶é¢æ¿é‡Œç›´æ¥ç‚¹å‡»é”™è¯¯ä¿¡æ¯</li>\n<li>æ–¹æ¡ˆ 2: ç‚¹å‡» <code>Sources</code>Â  åç‚¹å‡» <code>Pause on exceptions</code>Â  æœ€åå‹¾é€‰ <code>Pause on exceptions</code>ã€‚ä¹‹ååˆ·æ–°é¡µé¢å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964277828-1264593c-59f8-43c4-b13a-4bf37b26b95e.png#align=left&display=inline&height=372&margin=%5Bobject%20Object%5D&name=image.png&originHeight=372&originWidth=901&size=46311&status=done&style=none&width=901\" alt=\"image.png\"></p>\n<h3 id=\"11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"><a href=\"#11ã€ä½¿ç”¨-Chrome-ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\" class=\"headerlink\" title=\"11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·\"></a>11ã€ä½¿ç”¨ Chrome ä½œä¸ºä»£ç ç¼–è¾‘å·¥å…·</h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Filesystem</code>Â  ç„¶åå…³è”æœ¬åœ°æ–‡ä»¶å¤¹å³å¯</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964541164-bfa7a598-c5df-4ac4-9782-93fc5e7cdd82.png#align=left&display=inline&height=620&margin=%5Bobject%20Object%5D&name=image.png&originHeight=620&originWidth=1067&size=131817&status=done&style=none&width=1067\" alt=\"image.png\"></p>\n<h3 id=\"12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"><a href=\"#12ã€ä½¿ç”¨-Chrome-çš„-Snippets-åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \" class=\"headerlink\" title=\"12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç \"></a>12ã€ä½¿ç”¨ Chrome çš„ Snippets åŠŸèƒ½ä¿å­˜ä»£ç ç‰‡æ®µï¼Œæ‹’ç»é‡å¤çš„ä»£ç </h3><ul>\n<li>é€‰ä¸­ <code>Sources &gt; Snippets</code>Â  åˆ›å»ºæ–°çš„ä»£ç ç‰‡æ®µ</li>\n<li>è¾“å…¥ <code>Command + p</code>Â  åè¾“å…¥ <code>i</code>Â  åæ‰§è¡Œ</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606964857768-858ca1ae-b5d2-4147-b2f8-1632e49c85b8.png#align=left&display=inline&height=446&margin=%5Bobject%20Object%5D&name=image.png&originHeight=446&originWidth=1845&size=79129&status=done&style=none&width=1845\" alt=\"image.png\"></p>\n<h3 id=\"13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\"><a href=\"#13ã€ä½¿ç”¨-Chome-å®æ—¶ä¿å­˜æ›´æ”¹çš„-css-æ ·å¼\" class=\"headerlink\" title=\"13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼\"></a>13ã€ä½¿ç”¨ Chome å®æ—¶ä¿å­˜æ›´æ”¹çš„ css æ ·å¼</h3><ul>\n<li>é€‰ä¸­ <code>Source &gt; Overrides</code>Â ï¼Œä¹‹åç‚¹å‡» <code>+</code>Â  é€‰æ‹©ä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ›´æ”¹åçš„æ ·å¼ï¼Œæœ€åå‹¾é€‰ <code>Enable Local Overrides</code>Â ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965107087-3d47d726-c4fb-4d0c-9d48-38c5422db524.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=1522&size=23539&status=done&style=none&width=1522\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965155644-099a9d4e-fec1-4433-9d24-55f52727ca22.png#align=left&display=inline&height=114&margin=%5Bobject%20Object%5D&name=image.png&originHeight=114&originWidth=395&size=9886&status=done&style=none&width=395\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965811764-61b27e31-8e8f-4b23-b93f-46c0a52f8069.png#align=left&display=inline&height=417&margin=%5Bobject%20Object%5D&name=image.png&originHeight=417&originWidth=831&size=60690&status=done&style=none&width=831\" alt=\"image.png\"></p>\n<h3 id=\"14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"><a href=\"#14ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä½¿ç”¨-Overrides-æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\" class=\"headerlink\" title=\"14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”\"></a>14ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä½¿ç”¨ Overrides æ›´æ”¹åå†…å®¹ä¸ä¹‹å‰å†…å®¹çš„å¯¹æ¯”</h3><ul>\n<li>è¾“å…¥ <code>Command + shift + p</code>Â ï¼Œæœç´¢ <code>show changes</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965562313-e3ac2cd8-614a-457e-a0c6-912660c48270.png#align=left&display=inline&height=95&margin=%5Bobject%20Object%5D&name=image.png&originHeight=95&originWidth=519&size=7584&status=done&style=none&width=519\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965855015-feca9397-66d0-40ac-ab41-e349241c14e1.png#align=left&display=inline&height=651&margin=%5Bobject%20Object%5D&name=image.png&originHeight=651&originWidth=1136&size=118201&status=done&style=none&width=1136\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606965980764-b6e363ca-172d-4a63-b141-137b186f97e7.png#align=left&display=inline&height=435&margin=%5Bobject%20Object%5D&name=image.png&originHeight=435&originWidth=928&size=40226&status=done&style=none&width=928\" alt=\"image.png\"></p>\n<h3 id=\"15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"><a href=\"#15ã€æŸ¥çœ‹-Chrome-è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\" class=\"headerlink\" title=\"15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„\"></a>15ã€æŸ¥çœ‹ Chrome è¯·æ±‚æ˜¯ç”±è°å‘èµ·çš„</h3><ul>\n<li>é€‰æ‹© <code>NetWork &gt; Initialtor</code>Â ï¼Œä¸ä½†å¯ä»¥æŸ¥çœ‹è°ƒç”¨ä½ç½®ï¼Œä¹Ÿå¯è·å–è§¦å‘ä½ç½®ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966265653-8fd5a74d-5486-4b50-951d-3ac4aa2dafb9.png#align=left&display=inline&height=650&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1077&size=93651&status=done&style=none&width=1077\" alt=\"image.png\"><br><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966315917-5db64699-69bd-4b64-b041-36e35a03bedc.png#align=left&display=inline&height=96&margin=%5Bobject%20Object%5D&name=image.png&originHeight=96&originWidth=744&size=15715&status=done&style=none&width=744\" alt=\"image.png\"></p>\n<h3 id=\"16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\"><a href=\"#16ã€Chrome-æ€§èƒ½ç›‘æµ‹å·¥å…·\" class=\"headerlink\" title=\"16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·\"></a>16ã€Chrome æ€§èƒ½ç›‘æµ‹å·¥å…·</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show performance monitor</code>Â  å³å¯å®æ—¶æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„æ€§èƒ½ã€‚<ul>\n<li><code>CPU usage</code>Â ï¼š <code>cpu</code> çš„ç›‘å¬</li>\n<li><code>JS heap size</code>Â : å†…å­˜å ç”¨ç›‘å¬ï¼Œå¦‚æ·»åŠ åˆ° <code>window</code>Â  å¯¹è±¡ä¸Šçš„äº‹ä»¶ä¸å›æ”¶ä¼šé€ æˆå†…å­˜æº¢å‡ºã€‚</li>\n<li><code>DOM Nodes</code>: å†…å­˜ä¸­æ‰€åˆ†é…çš„ <code>dom</code> èŠ‚ç‚¹çš„ä¸ªæ•°</li>\n<li><code>JS envnt listeners</code>: <code>js</code> ä¸­å·²ç»ç»‘å®šçš„äº‹ä»¶ä¸ªæ•°</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606966748112-fdd53dde-e210-458e-992a-68429c28b334.png#align=left&display=inline&height=319&margin=%5Bobject%20Object%5D&name=image.png&originHeight=319&originWidth=1919&size=60517&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"><a href=\"#17ã€ä½¿ç”¨-Chrome-åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\" class=\"headerlink\" title=\"17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜\"></a>17ã€ä½¿ç”¨ Chrome åšæ€§èƒ½è°ƒä¼˜ï¼Œè¿…é€Ÿå®šä½é—®é¢˜</h3><ul>\n<li>é€‰æ‹© <code>performance</code>Â  ç‚¹å‡»å½•åˆ¶æŒ‰é’®ï¼Œå¯ä»¥æŸ¥çœ‹ä»å½•åˆ¶å¼€å§‹åˆ°åœæ­¢æ—¶é—´å†… <code>js</code> ä»£ç è¿è¡Œçš„æƒ…å†µã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967325061-7ddbd154-20e4-4ff2-b903-ca2a8e05c378.png#align=left&display=inline&height=766&margin=%5Bobject%20Object%5D&name=image.png&originHeight=766&originWidth=1919&size=111943&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"><a href=\"#18ã€ä½¿ç”¨-Chrome-åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹-css-åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\" class=\"headerlink\" title=\"18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡\"></a>18ã€ä½¿ç”¨ Chrome åŠ¨ç”»æ£€æŸ¥å™¨ï¼Œæ£€æŸ¥ä¿®æ”¹ css åŠ¨ç”»ï¼Œæå‡æ•ˆç‡</h3><ul>\n<li><code>Command + shift + p</code>Â  è¾“å…¥ <code>show animations</code>Â  æ‰“å¼€åŠ¨ç”»çš„è°ƒè¯•å™¨ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1606967977814-c5fa0c33-8952-46b2-84d2-a1315a766658.png#align=left&display=inline&height=600&margin=%5Bobject%20Object%5D&name=image.png&originHeight=600&originWidth=1919&size=108889&status=done&style=none&width=1919\" alt=\"image.png\"></p>\n<h3 id=\"19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"><a href=\"#19ã€ä½¿ç”¨-Chrome-æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\" class=\"headerlink\" title=\"19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ\"></a>19ã€ä½¿ç”¨ Chrome æŸ¥çœ‹ä»£ç è¦†ç›–ç‡ï¼Œæ£€æŸ¥ä»£ç è¦†ç›–æƒ…å†µ</h3><ul>\n<li><code>Command + shift +p</code>Â  è¾“å…¥ <code>show coverage</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1607172475188-07f61e49-f764-427e-8b1b-71a45b552b27.png#align=left&display=inline&height=555&margin=%5Bobject%20Object%5D&name=image.png&originHeight=555&originWidth=1893&size=172193&status=done&style=none&width=1893\" alt=\"image.png\"></p>\n<h3 id=\"20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\"><a href=\"#20ã€copy-å¤åˆ¶æ§åˆ¶å°å†…å®¹\" class=\"headerlink\" title=\"20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹\"></a>20ã€copy() å¤åˆ¶æ§åˆ¶å°å†…å®¹</h3><ul>\n<li>å¯ä»¥é€šè¿‡å…¨å±€çš„æ–¹æ³• Â <code>copy()</code>Â  åœ¨ Â <code>console</code>Â  é‡Œ Â <code>copy</code>Â  ä»»ä½•ä½ èƒ½æ‹¿åˆ°çš„èµ„æºï¼ŒåŒ…æ‹¬æˆ‘ä»¬åœ¨åé¢[ç¬¬å…­èŠ‚]ä¼šæåˆ°çš„é‚£äº›å˜é‡ã€‚ä¾‹å¦‚ Â <code>copy($_)</code>Â  æˆ– Â <code>copy($0)</code></li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278259306-ac7e6a27-9b73-424c-955c-9d60cde38aad.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1780049&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"><a href=\"#21ã€-æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\" class=\"headerlink\" title=\"21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ\"></a>21ã€$_æŸ¥çœ‹ä¸Šä¸€æ¬¡ç¨‹åºæ‰§è¡Œç»“æœ</h3><ul>\n<li><code>$_</code>Â  æ˜¯å¯¹ä¸Šæ¬¡æ‰§è¡Œçš„ç»“æœçš„ <strong>å¼•ç”¨</strong></li>\n</ul>\n<p>**<br><strong><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608278776314-7be09c82-b10e-4760-9dc0-ecccb00e01c9.png#align=left&display=inline&height=184&margin=%5Bobject%20Object%5D&name=image.png&originHeight=368&originWidth=1014&size=116869&status=done&style=none&width=507\" alt=\"image.png\"></strong></p>\n<h3 id=\"22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"><a href=\"#22ã€-i-é…åˆ-chrome-æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\" class=\"headerlink\" title=\"22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…\"></a>22ã€$i é…åˆ chrome æ’ä»¶å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…</h3><ul>\n<li>æœ‰æ—¶ä½ åªæ˜¯æƒ³ç©ç©æ–°å‡ºçš„ <code>npm</code> åŒ…ï¼Œç°åœ¨ä¸ç”¨å†å¤§è´¹å‘¨ç« å»å»ºä¸€ä¸ªé¡¹ç›®æµ‹è¯•äº†ï¼Œåªéœ€è¦åœ¨ <a href=\"https://chrome.google.com/webstore/detail/console-importer/hgajpakhafplebkdljleajgbpdmplhie/related\">Chrome æ’ä»¶:Console Importer</a> çš„å¸®åŠ©ä¹‹ä¸‹ï¼Œå¿«é€Ÿçš„åœ¨ <code>console</code> ä¸­å¼•å…¥å’Œæµ‹è¯•ä¸€äº› <code>npm</code> åº“ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608278892044-9115b62e-c6ff-40ac-8330-253b84191be6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1817520&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"><a href=\"#23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\" class=\"headerlink\" title=\"23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼\"></a>23ã€ä½¿ç”¨å®æ—¶è¡¨è¾¾å¼</h3><ul>\n<li><code>DevTools</code> åœ¨ <code>Console</code> é¢æ¿ä¸­å¼•å…¥äº†ä¸€ä¸ªéå¸¸æ¼‚äº®çš„é™„åŠ åŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¸º <code>Live expression</code> çš„å·¥å…·ã€‚åªéœ€æŒ‰ä¸‹ â€œçœ¼ç›â€ ç¬¦å·ï¼Œä½ å°±å¯ä»¥åœ¨é‚£é‡Œå®šä¹‰ä»»ä½• <code>JavaScript</code> è¡¨è¾¾å¼ã€‚ å®ƒä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥è¡¨è¾¾çš„ç»“æœå°†æ°¸è¿œï¼Œå­˜åœ¨ :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281376215-967b1d31-4690-4f9d-a5f7-868365ce3f6a.gif#align=left&display=inline&height=716&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=716&originWidth=1102&size=2073027&status=done&style=none&width=1102\" alt=\"1.gif\"></p>\n<h3 id=\"24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \"><a href=\"#24ã€é€šè¿‡-â€˜hâ€™-æ¥éšè—å…ƒç´ \" class=\"headerlink\" title=\"24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ \"></a>24ã€é€šè¿‡ â€˜hâ€™ æ¥éšè—å…ƒç´ </h3><ul>\n<li>æŒ‰ä¸€ä¸‹ Â <code>&#39;h&#39;</code>Â  å°±å¯ä»¥éšè—ä½ åœ¨å…ƒç´ é¢æ¿ä¸­é€‰æ‹©çš„å…ƒç´ ã€‚å†æ¬¡æŒ‰ä¸‹ â€˜<code>h</code>â€˜ å¯ä»¥ä½¿å®ƒå‡ºç°ã€‚æŸäº›çš„æ—¶å€™è¿™å¾ˆæœ‰ç”¨ï¼šä¾‹å¦‚ä½ æƒ³æˆªå›¾ï¼Œä½†ä½ æƒ³å»æ‰é‡Œé¢çš„æ•æ„Ÿä¿¡æ¯ã€‚</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281579251-0b47cee8-0d8d-4445-a858-2d409edd6e7c.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=802&originWidth=1332&size=1651328&status=done&style=none&width=1332\" alt=\"1.gif\"></p>\n<h3 id=\"25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \"><a href=\"#25ã€æ‹–åŠ¨-amp-æ”¾ç½®-å…ƒç´ \" class=\"headerlink\" title=\"25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ \"></a>25ã€æ‹–åŠ¨ &amp; æ”¾ç½® å…ƒç´ </h3><ul>\n<li>å½“ä½ æƒ³çœ‹çœ‹é¡µé¢çš„æŸä¸€éƒ¨åˆ†åœ¨ Â <code>DOM</code>Â  æ ‘çš„ä¸åŒä½ç½®çš„æ˜¾ç¤ºæ•ˆæœæ—¶ï¼Œåªéœ€è¦æ‹–åŠ¨æ”¾ç½®å®ƒ(åˆ°æŒ‡å®šçš„ä½ç½®)ï¼Œå°±åƒåœ¨æœºå™¨ä¸Šçš„å…¶ä»–ä»»ä½•åœ°æ–¹ä¸€æ · :-)</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281657769-7775b7d5-2c49-44e8-9f5f-0d52ced8ac17.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=2.gif&originHeight=642&originWidth=1066&size=891397&status=done&style=none&width=1066\" alt=\"2.gif\"></p>\n<h3 id=\"26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \"><a href=\"#26ã€ä½¿ç”¨-control-æŒ‰é’®-æ¥ç§»åŠ¨å…ƒç´ \" class=\"headerlink\" title=\"26ã€ä½¿ç”¨ control (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !\"></a>26ã€ä½¿ç”¨ <code>control</code> (æŒ‰é’®) æ¥ç§»åŠ¨å…ƒç´ !</h3><ul>\n<li>å¦‚æœä½ åªæ˜¯æƒ³ç§»åŠ¨ä½ å½“å‰é€‰ä¸­çš„å…ƒç´ ï¼Œåœ¨ Â <code>DOM</code>Â  ç»“æ„ä¸­å¾€ä¸ŠæŒªä¸€ç‚¹æˆ–è€…å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œè€Œä¸æ˜¯æ‹–åŠ¨å’Œæ”¾ç½®ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨<code>[ctrl]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[ctrl]</code>Â +Â <code>[â¬‡]</code>Â (<code>[âŒ˜]</code>Â +Â <code>[â¬†]</code>Â /Â <code>[âŒ˜]</code>Â +Â <code>[â¬‡]</code>Â on Mac).</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281716760-63613a96-c29f-488f-b7e9-f16994b0c2b6.gif#align=left&display=inline&height=802&margin=%5Bobject%20Object%5D&name=3.gif&originHeight=802&originWidth=1332&size=3046583&status=done&style=none&width=1332\" alt=\"3.gif\"></p>\n<h3 id=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"><a href=\"#27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\" class=\"headerlink\" title=\"27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ\"></a>27ã€å…ƒç´ é¢æ¿ä¸­ç±»ä¼¼äºåŸºç¡€ç¼–è¾‘å™¨çš„æ“ä½œ</h3><ul>\n<li><p>ä»æŸä¸€ç‚¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ‹–åŠ¨ï¼Œæ”¾ç½®ï¼Œç¼–è¾‘ï¼Œå¤åˆ¶(å½“ç„¶ï¼Œä»¥åŠä½¿ç”¨ <code>[ctrl]</code> + <code>[v]</code> æ¥ç²˜è´´)ï¼Œ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ é¢æ¿é‡ŒæŠŠ <code>HTML</code> ç»“æ„æå¾—ä¸€å›¢ç³Ÿã€‚åœ¨ä»»æ„ä¸€ä¸ªç¼–è¾‘å™¨ä¸­éƒ½æœ‰ä¸€ä¸ªæ ‡å‡†ï¼Œé‚£ä¹ˆå¦‚ä½•æ’¤å›ä½ çš„æ“ä½œå‘¢ï¼Ÿ</p>\n</li>\n<li><p>ä½¿ç”¨<code>[ctrl]</code> + <code>[z]</code> (<code>[âŒ˜]</code> + <code>[z]</code> on Mac)æ’¤é”€æˆ‘ä»¬çš„ä»»ä½•æ”¹åŠ¨ã€‚ ä½¿ç”¨ <code>[ctrl]</code> + <code>[shift]</code> + <code>[z]</code>é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„ä»»ä½•ä¿®æ”¹ã€‚</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281829967-1a9d3db2-270a-4f23-9d25-52585c80aed7.gif#align=left&display=inline&height=642&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=642&originWidth=1066&size=5633497&status=done&style=none&width=1066\" alt=\"1.gif\"></p>\n<h3 id=\"28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\"><a href=\"#28ã€Shadow-editor-é˜´å½±ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"28ã€Shadow editor é˜´å½±ç¼–è¾‘å™¨\"></a>28ã€<code>Shadow editor</code> é˜´å½±ç¼–è¾‘å™¨</h3><ul>\n<li>ä½ å¯ä»¥é€šè¿‡åœ¨ Â <code>Style</code>Â  é¢æ¿ä¸­ç‚¹å‡»é è¿‘ Â <code>box-shadow</code>Â  å±æ€§æˆ–è€… Â <code>text-shadow</code>Â  å±æ€§çš„ Â <code>é˜´å½±æ–¹å½¢ç¬¦å·</code>Â  æ¥æ‰“å¼€å®ƒï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281887248-eed208b7-7636-4172-b428-ba7a07bec474.gif#align=left&display=inline&height=718&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=718&originWidth=576&size=722085&status=done&style=none&width=576\" alt=\"1.gif\"></p>\n<h3 id=\"29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"><a href=\"#29ã€Timing-function-editor-å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\" class=\"headerlink\" title=\"29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨\"></a>29ã€Timing function editor å®šæ—¶å‡½æ•°ç¼–è¾‘å™¨</h3><ul>\n<li><p>ä¹Ÿç§°ä¸º <code>Cubic bezier(è´å¡å°”)</code> ç¼–è¾‘å™¨ã€‚è´å¡å°”æ›²çº¿æ˜¯ä¸€ä¸²ç”¨æ¥å®šä¹‰ <code>CSS</code> çš„åŠ¨ç”»é€Ÿåº¦åœ¨æ•´ä¸ªåŠ¨ç”»è¿‡ç¨‹ä¸­å¦‚ä½•å˜åŒ–çš„ <code>é­”æ³•æ•°å€¼</code> ã€‚æˆ‘ä»¬å°†å…¶å®šä¹‰ä¸º <code>transition-timing-function</code> æˆ–è€… <code>animation-timing-function</code> CSS å±æ€§ã€‚</p>\n</li>\n<li><p>åƒä¹‹å‰è¯´çš„ <code>Color picker</code> å’Œ <code>Shadow editor</code> ä¸€æ ·ï¼Œç›´æ¥ç‚¹å‡»æˆ‘ä»¬åˆšåˆšæåˆ°çš„å±æ€§(æˆ–è€…ä»–ä»¬çš„ç®€å†™å½¢å¼ï¼š<code>trasition</code>ï¼Œ <code>animation</code> - è¯·æ³¨æ„ï¼šå¦‚æœ<code>timing</code> å‡½æ•°çš„å€¼æ²¡æœ‰è®¾ç½®åœ¨è¿™ä¸ªç®€å†™çš„å½¢å¼ä¸­ï¼Œè¿™ä¸ªç¬¦å·ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥)è¾¹ä¸Šçš„æ›²çº¿ç¬¦å·ï¼š</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608281968319-1ce527ef-daf5-4eb7-8d8c-f3c2747bfa4d.gif#align=left&display=inline&height=590&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=590&originWidth=474&size=3886698&status=done&style=none&width=474\" alt=\"1.gif\"></p>\n<h3 id=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"><a href=\"#30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\" class=\"headerlink\" title=\"30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®\"></a>30ã€æ’å…¥æ ·å¼è§„åˆ™çš„æŒ‰é’®</h3><p>å½“ä½ æŠŠé¼ æ ‡æ”¾åœ¨æ ·å¼é€‰æ‹©å™¨çš„é€‰æ‹©åŒºåŸŸçš„æœ€åæ—¶ï¼Œä½ ä¼šçœ‹åˆ°å‡ ä¸ªè®©ä½ å¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨ <code>Color</code> å’Œ <code>Shadow</code> ç¼–è¾‘å™¨æ·»åŠ  <code>CSS</code> å±æ€§çš„æŒ‰é’®ï¼š</p>\n<ul>\n<li><p><code>text-shadow</code></p>\n</li>\n<li><p><code>box-shadow</code></p>\n</li>\n<li><p><code>color</code></p>\n</li>\n<li><p><code>background-color</code></p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282091218-b368c609-f0ae-49c2-a1cf-fbc31424917e.gif#align=left&display=inline&height=558&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=558&originWidth=632&size=1958540&status=done&style=none&width=632\" alt=\"1.gif\"></p>\n<h3 id=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"><a href=\"#31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\" class=\"headerlink\" title=\"31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹\"></a>31ã€åœ¨å…ƒç´ é¢æ¿ä¸­å±•å¼€æ‰€æœ‰çš„å­èŠ‚ç‚¹</h3><ul>\n<li>ä¸€ä¸ªä¸€ä¸ªçš„å»ç‚¹å‡»çº§è”çš„ Â <code>â–¶</code>Â  æŒ‰é’®å¤ªæ…¢äº†ï¼Œä¸å¦‚ä½¿ç”¨å³å‡»èŠ‚ç‚¹åçš„ Â <code>expand recursively</code>Â  å‘½ä»¤ï¼š</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282162863-1a2d16de-4444-497e-b927-0f85bfd59964.gif#align=left&display=inline&height=520&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=520&originWidth=760&size=7216217&status=done&style=none&width=760\" alt=\"1.gif\"></p>\n<h3 id=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"><a href=\"#32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\" class=\"headerlink\" title=\"32ã€æ§åˆ¶ä¼ æ„Ÿå™¨\"></a>32ã€æ§åˆ¶ä¼ æ„Ÿå™¨</h3><ul>\n<li><p>å¦‚æœä½ æ­£åœ¨ä½ çš„åº”ç”¨ä¸­ä½¿ç”¨ä¸€äº›è·å–ä½ç½®ä¿¡æ¯çš„ <code>API</code> è€Œä¸”æƒ³è¦æµ‹è¯•ä¸€ä¸‹å®ƒï¼Œæ€»ä¸èƒ½å¼€ç€è½¦ç¯ç»•ä¸–ç•Œå§ï¼Œ(å…¶å®ä¹Ÿä¸æ˜¯ä¸è¡Œ ğŸ˜‰)ã€‚</p>\n</li>\n<li><p><code>Drawer</code> é‡Œçš„ <code>Sensors(ä¼ æ„Ÿå™¨)</code> é¢æ¿å¯ä»¥è®©ä½ æ¨¡æ‹Ÿç‰¹å®šçš„ä½ç½®: æ”¯æŒä»é¢„å®šä¹‰çš„ä½ç½®ä¸­è¿›è¡Œé€‰æ‹©ï¼Œæ·»åŠ è‡ªå·±çš„ä½ç½®ï¼Œæˆ–è€…æ‰‹åŠ¨é”®å…¥çº¬åº¦/ç»åº¦ã€‚é€‰å®šçš„å€¼å°†è¢« <code>navigator.geolocation.watchPosition</code>ï¼ˆæˆ– <code>.getCurrentPosition</code> ï¼‰æŠ¥å‘Šã€‚</p>\n</li>\n<li><p>å¦‚æœä½ çš„ <code>App</code> ä½¿ç”¨åŠ é€Ÿè®¡ï¼Œä¼ æ„Ÿå™¨é¢æ¿ä¹Ÿå¯ä»¥æ¨¡æ‹Ÿä½ è®¾å¤‡åœ¨ 3D ç©ºé—´ä¸­çš„ä½ç½®ï¼</p>\n</li>\n</ul>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1608282513575-bb313d74-b584-4f58-ac1b-f577ffe719c0.gif#align=left&display=inline&height=728&margin=%5Bobject%20Object%5D&name=1.gif&originHeight=728&originWidth=774&size=1259259&status=done&style=none&width=774\" alt=\"1.gif\"></p>\n"},{"title":"Vue2 æ–‡æ¡£","date":"2020-07-14T16:00:00.000Z","_content":"\n## 1. çˆ¶å­ç»„ä»¶ä¼ å€¼\n\n- çˆ¶å­ï¼š `props`\n- å­çˆ¶ï¼š `this.$emit('äº‹ä»¶å', å‚æ•°)`\n\n## 2. è·å– dom èŠ‚ç‚¹\n\n> `this.$refs`ï¼Œ å¯ä»¥è·å–ç»„ä»¶çš„å¼•ç”¨ï¼ŒåŒæ—¶å¯ä»¥è·å–ç»„ä»¶çš„ `dataï¼Œmethods` ç­‰\n\n## 3. è·¯ç”±\n\n- åç«¯è·¯ç”±\n\n> å¯¹äºæ™®é€šçš„ç½‘ç«™ï¼Œæ‰€æœ‰çš„è¶…é“¾æ¥éƒ½æ˜¯ `URL` åœ°å€ï¼Œæ‰€æœ‰çš„ `URL` åœ°å€éƒ½å¯¹åº”æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚\n\n- å‰ç«¯è·¯ç”±\n\n> å¯¹äºå•é¡µé¢åº”ç”¨ç¨‹åºï¼ˆ`SPA`ï¼‰ï¼Œä¸»è¦é€šè¿‡ `URL` çš„ `hash(#)` æ¥å®ç°ä¸åŒé¡µé¢ä¹‹é—´çš„åˆ‡æ¢ï¼›åŒæ—¶ï¼Œ`hash` æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œ`http` è¯·æ±‚ä¸­ä¸ä¼šåŒ…å« `hash` ç›¸å…³çš„å†…å®¹\n\n## 4. å‘½åè§†å›¾ router-view\n\n```vue\n<template>\n  <div id=\"app\">\n    <router-view></router-view>\n    <router-view name=\"left\"></router-view>\n    <router-view name=\"main\"></router-view>\n  </div>\n</template>\n\n<script>\nvar header = {\n  template: \"<div>header</div>\"\n};\nvar leftBox = {\n  template: \"<div>left</div>\"\n};\nvar mainBox = {\n  template: \"<div>main</div>\"\n};\n\nvar router = new VueRouter({\n  routes: [\n    {\n      path: \"/\",\n      components: {\n        default: header,\n        left: leftBox,\n        main: mainBox\n      }\n    }\n  ]\n});\n\nvar vm = new Vue({\n  el: \"#app\",\n  router\n});\n</script>\n```\n\n## 5. watch\n\n```vue\n<template>\n  <input type=\"text\" v-model=\"msg\" />\n</template>\n\n<script>\ndata: {\n   msg: ''\n},\nwatch: {\n  msg(newVal, oldVal) {\n    console.log(newVal, oldVal)\n  },\n  \"$route.path\": (newVal, oldVal) => {\n    console.log(newVal, oldVal)\n  }\n}\n</script>\n```\n\n## 6. computed\n\n- åœ¨ `computed` ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ï¼ˆè®¡ç®—å±æ€§ï¼‰ï¼›è®¡ç®—å±æ€§çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚åªä¸è¿‡åœ¨æˆ‘ä»¬è¿™äº›è®¡ç®—å±æ€§çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥æŠŠä»–ä»¬çš„åç§°å½“ä½œå±æ€§æ¥ä½¿ç”¨çš„ï¼Œå¹¶ä¸ä¼šæŠŠè®¡ç®—å±æ€§å½“ä½œæ–¹æ³•æ¥è°ƒç”¨ã€‚\n- è®¡ç®—å±æ€§çš„æ±‚å€¼ç»“æœï¼Œä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ä½¿ç”¨; å¦‚æœ `è®¡ç®—å±æ€§` æ–¹æ³•ä¸­ï¼Œæ‰€ä¾èµ–çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°å¯¹ `è®¡ç®—å±æ€§` è¿›è¡Œæ±‚å€¼\n\n```vue\n<template>\n  <input type=\"text\" v-model=\"firstname\" />\n  <input type=\"text\" v-model=\"lastname\" />\n  <input type=\"text\" v-model=\"fullname\" />\n</template>\n\n<script>\ndata: {\n    firstname: '',\n    lastname: ''\n},\ncomputed: {\n    fullname() {\n        return this.firstname + '-' + this.lastname;\n    }\n}\n</script>\n```\n\n## 7. render\n\n- `createElements` æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨å®ƒï¼Œèƒ½å¤ŸæŠŠæŒ‡å®šçš„ç»„ä»¶æ¨¡æ¿ï¼Œæ¸²æŸ“ä¸º `html` ç»“æ„\n- é€šå¸¸ä¹ æƒ¯æ€§å°† `createElements` å†™æˆ `h`\n\n```vue\n<script>\nvar login = {\n  template: \"<h1>è¿™æ˜¯ç™»é™†ç»„ä»¶</h1>\"\n};\n\nvar vm = new Vue({\n  el: \"#app\",\n  data: {},\n  render: function (createElements) {\n    return createElements(login);\n  }\n});\n</script>\n```\n\n## 8. æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\n\n- `commenJs` å¯¼å…¥å¯¼å‡ºæ¨¡å—\n\n> å¯¼å…¥\n\n```javascript\nvar åç§° = require(\"æ¨¡å—æ ‡è¯†ç¬¦\");\n```\n\n> å¯¼å‡º\n\n```javascript\nmodule.exports = {};\n```\n\n- `import` å¯¼å…¥å¯¼å‡ºæ¨¡å—\n\n> å¯¼å…¥\n\n```javascript\ninport åç§°A from 'æ¨¡å—æ ‡è¯†ç¬¦'\ninport { åç§°B } 'æ ‡è¯†è·¯å¾„'\n```\n\n> å¯¼å‡º\n\n```javascript\nexport default åç§°A\nexport åç§°B\n```\n\n> é‡å‘½å\n\n```javascript\nimport åç§°A as newA from 'æ¨¡å—æ ‡è¯†ç¬¦'\nimport { åç§°B as newB } from 'æ ‡ç¤ºè·¯å¾„'\n```\n\n## 9. vuex\n\n### ä»‹ç»\n\n- `vuex` æ˜¯ `vue.js` åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ˆçŠ¶æ€å¯ä»¥ç†è§£ä¸ºæ•°æ®ï¼‰ï¼Œå®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ï¼Œç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯æ£€æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–\n\n### propsï¼Œdata å’Œ vuex çš„åŒºåˆ«\n\n- `props`: å­˜æ”¾çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®\n- `data`: å­˜æ”¾ç§æœ‰æ•°æ®\n- `vuex`: ç»„ä»¶ä¹‹é—´å…±äº«çš„æ•°æ®\n\n### stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\n\n- `state`ï¼šç±»ä¼¼äº `data`ï¼Œç”¨æ¥å­˜æ•°æ®\n\n> è®¿é—®\n\n```javascript\nthis.$store.state.æ•°æ®a\n\n...mapState\n```\n\n- `mutations`ï¼šç±»ä¼¼äº `methods`ï¼Œå¤„ç†åŒæ­¥æ–¹æ³•\n\n> ä½¿ç”¨\n\n```javascript\nmutations: {\n    \"METHODS\": function(state, value) {\n        state.value = value;\n    }\n}\n```\n\n> è®¿é—®\n\n```javascript\nthis.$store.commit('æ–¹æ³•å', 'å‚æ•°')\n\n...mapMutations\n```\n\n- `actions`ï¼šç±»ä¼¼äº `methods`ï¼Œå¤„ç†å¼‚æ­¥æ–¹æ³•\n\n> ä½¿ç”¨\n\n```javascript\nactions: {\n    async methodsAsync({ commit }, value) {\n        try {\n            const result = await apiMethods()\n            if (result.code === 200) {\n                commit(\"SET_METHODS\", result.data)\n            }\n        } catch(err) {\n            throw new Error(err);\n        }\n    }\n}\n```\n\n> è®¿é—®\n\n```javascript\nthis.$store.dispatch('æ–¹æ³•å', 'å‚æ•°')\n\n...mapActions\n```\n\n- `getters`ï¼šç±»ä¼¼äº `computed` å’Œ `filter`ï¼Œå¤„ç†æ•°æ®\n\n> ä½¿ç”¨\n\n```javascript\ngetters: {\n    newData(state) {\n        return state.arr.filter(item => item.id === 1)\n    }\n}\n```\n\n> è®¿é—®\n\n```javascript\nthis.$store.getters('åç§°')\n\n...mapGetters\n```\n\n## 10. props ä¼ é€’æ•°æ®æœªæ›´æ–°\n\n> è§£å†³æ–¹å¼ï¼šä½¿ç”¨ `watch` ç›‘å¬ `props`\n\n## 11. ç”Ÿå‘½å‘¨æœŸ\n\n### beforeCreate\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> æ­¤æ—¶ï¼Œç»„ä»¶çš„ `data` å’Œ `methods` ä»¥åŠé¡µé¢ `DOM` ç»“æ„éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–\n\n### created\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> æ­¤æ—¶ï¼Œç»„ä»¶çš„ `data` å’Œ `methods` å·²ç»å¯ç”¨äº†ï¼Œä½†æ˜¯é¡µé¢ `DOM` ç»“æ„è¿˜æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼›ç»å¸¸ç”¨æ¥å‘èµ· `ajax` è¯·æ±‚\n> æ³¨æ„ï¼Œåœ¨ `ssr` æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼Œåœ¨æ­¤å¤„å‘èµ· `ajax` è¯·æ±‚ä¼šæœ‰é—®é¢˜ï¼Œæ¨èåœ¨ `mounted` ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ¥å‘èµ· `ajax` è¯·æ±‚ã€‚\n\n### beforeMount\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> æ­¤æ—¶å†…å­˜ä¸­çš„æ¨¡æ¿ç»“æ„è¿˜æ²¡æœ‰*çœŸæ­£æ¸²æŸ“åˆ°é¡µé¢ä¸Š*ï¼›æ­¤æ—¶ï¼Œé¡µé¢ä¸Š*çœ‹ä¸åˆ°çœŸå®çš„æ•°æ®*ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢\n\n### Mounted\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> ç»„ä»¶æŒ‚è½½å®Œæ¯•ï¼Œå¯åˆå§‹åŒ–æ’ä»¶\n\n### beforeUpdate\n\n> _æ•°æ®è‚¯å®šæ˜¯æœ€æ–°çš„_ï¼Œç„¶è€Œ*é¡µé¢å‘ˆç°çš„æ•°æ®è¿˜æ˜¯æ—§çš„*\n\n### updated\n\n> é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ã€‚æ­¤æ—¶ï¼Œ`data` å’Œ `view` ä¸Šéƒ½æ˜¯æœ€æ–°çš„æ•°æ®\n\n### beforeDestroy\n\n- ç»„ä»¶é”€æ¯é˜¶æ®µ\n\n> æ­¤æ—¶æ²¡æœ‰çœŸæ­£å¼€å§‹é”€æ¯ï¼Œç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚åŒæ—¶ï¼Œ`data` ã€`methods` ç­‰æ•°æ®æˆ–æ–¹æ³•ï¼Œä¾ç„¶å¯ä»¥è¢«æ­£å¸¸è®¿é—®ï¼›\n\n### destroyed\n\n- ç»„ä»¶é”€æ¯é˜¶æ®µ\n\n> ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯.`data` å’Œ `methods` éƒ½ä¸å¯ç”¨äº†\n\n## 12 Â vue ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\n\n| è¡Œä¸º                                                               | æŒ‡å‘ | ä½œç”¨                                                                                                                                                 |\n| ------------------------------------------------------------------ | ---- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `new Vue()`                                                        | â¡ï¸   | å®ä¾‹åŒ– `Vue` å¯¹è±¡                                                                                                                                    |\n| `Init Events & Lifecycle`                                          | â¡ï¸   | åˆå§‹åŒ–ç»„ä»¶ `methods` å’Œ `ç”Ÿå‘½å‘¨æœŸå‡½æ•°`                                                                                                               |\n| `beforeCreate`                                                     | â¡ï¸   | `data`ï¼Œ`methods` æœªè¢«åˆå§‹åŒ–                                                                                                                         |\n| `Init injections & reactivity`                                     | â¡ï¸   | æ­£åœ¨åˆå§‹åŒ– `data` å’Œ `methods` ä¸­çš„æ•°æ®ä»¥åŠæ–¹æ³•                                                                                                      |\n| `created`                                                          | â¡ï¸   | `data`ï¼Œ`methods` å¯ç”¨ï¼Œä½† `Dom` ç»“æ„è¿˜æœªè¢«æ¸²æŸ“ï¼Œå¸¸å‘èµ· `ajax` è¯·æ±‚                                                                                  |\n| â¬‡ï¸                                                                 | â¡ï¸   | åˆ¤æ–­æ˜¯å¦æœ‰ `el`ï¼Œ`template` å±æ€§                                                                                                                     |\n| â¬‡ï¸                                                                 | â¡ï¸   | ç”¨æ¥ç¼–è¯‘æ¨¡ç‰ˆç»“æ„ï¼Œå½“æ‰€æœ‰æŒ‡ä»¤è§£æå®Œæ¯•ï¼Œåˆ™`æ¨¡æ¿é¡µé¢å°±è¢«æ¸²æŸ“åˆ°å†…å­˜ä¸­äº†`ï¼›å½“æ¨¡æ¿ç¼–è¯‘å®Œæˆï¼Œæ¨¡æ¿é¡µé¢è¿˜æ²¡æœ‰æŒ‚åœ¨åˆ°é¡µé¢ä¸Šï¼Œåªæ˜¯å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç”¨æˆ·çœ‹ä¸åˆ°é¡µé¢ï¼› |\n| `beforeMount`                                                      | â¡ï¸   | æ­¤æ—¶ï¼Œé¡µé¢ä¸Šçœ‹ä¸åˆ° `çœŸå®æ•°æ®`ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢                                                                                        |\n| `Create vm.$el and replace \"el\" with it`                           | â¡ï¸   | æ­£åœ¨æŠŠå†…å­˜ä¸­æ¸²æŸ“å¥½çš„æ¨¡æ¿ç»“æ„æ›¿æ¢åˆ°é¡µé¢ä¸Š                                                                                                             |\n| `mounted`                                                          | â¡ï¸   | æ­¤æ—¶ï¼Œé¡µé¢æ¸²æŸ“å®Œæ¯•                                                                                                                                   |\n| â¬‡ï¸(ç»„ä»¶è¿è¡Œä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°)                                       | â¡ï¸   | ä¼šæ ¹æ® `data` æ•°æ®çš„å˜åŒ–ï¼Œæœ‰é€‰æ‹©è¡Œçš„è§¦å‘ `0`æ¬¡ æˆ– `n`æ¬¡                                                                                              |\n| `beforeUpdate`                                                     | â¡ï¸   | æ•°æ®æ˜¯æ–°çš„ï¼Œä½†é¡µé¢å‘ˆç°çš„æ•°æ®ä»æ˜¯æ—§çš„                                                                                                                 |\n| `updated`                                                          | â¡ï¸   | é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œæ­¤æ—¶ï¼Œæ•°æ®æ˜¯æœ€æ–°çš„ï¼ŒåŒæ—¶é¡µé¢ä¸Šå‘ˆç°çš„æ•°æ®ä¹Ÿæ˜¯æœ€æ–°çš„                                                                               |\n| â¬‡ï¸(é”€æ¯é˜¶æ®µ)                                                       |      |                                                                                                                                                      |\n| `beforeDestroy`                                                    | â¡ï¸   | ç»„ä»¶å³å°†è¢«é”€æ¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰çœŸ æ­£å¼€å§‹é”€æ¯ï¼Œæ­¤æ—¶ç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚`data`ï¼Œ`methods` ä»å¯æ­£å¸¸è®¿é—®                                                      |\n| `Teardown watchers,child components and event listeners`(é”€æ¯è¿‡ç¨‹) | â¡ï¸   |                                                                                                                                                      |\n| `destroyed`                                                        | â¡ï¸   | ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯ï¼Œç»„ä»¶å·²ç»åºŸäº†ï¼Œ`data` å’Œ `methods` éƒ½ä¸å¯ç”¨äº†                                                                                     |\n\n## 13. keep-alive\n\n### æ–°å¢ç”Ÿå‘½å‘¨æœŸ\n\n> è¢«åŒ…å«åœ¨ Â `<keep-alive>`Â  ä¸­åˆ›å»ºçš„ç»„ä»¶ï¼Œä¼šå¤šä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ:Â `activated`Â  ä¸ Â `deactivated`\n\n- actived\n\n> ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨ï¼Œåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼Œä¹‹åæ¯æ¬¡ `keep-alive` æ¿€æ´»æ—¶è¢«è°ƒç”¨ã€‚\n\n- deactivated\n\n> ç»„ä»¶è¢«åœç”¨æ—¶è°ƒç”¨ã€‚\n\n### æ–°å¢å±æ€§\n\n- include\n\n> åŒ…å«çš„ç»„ä»¶ç¼“å­˜ç”Ÿæ•ˆã€‚å¯¹åº” `.vue` æ–‡ä»¶çš„ `name` å±æ€§\n\n- exclude\n\n> æ’é™¤çš„ç»„ä»¶ä¸ç¼“å­˜ï¼Œä¼˜å…ˆçº§å¤§äº `include`ã€‚å¯¹åº” `.vue` æ–‡ä»¶çš„ `name` å±æ€§\n\n## 14. `nextTick`\n\n### èƒŒæ™¯\n\n> åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜ `Vue` æ˜¯å¼‚æ­¥æ‰§è¡Œ `DOM` æ›´æ–°çš„ï¼Œæ‰€ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†æ‰å¯æ­£å¸¸æ‰§è¡ŒæŸäº›é€»è¾‘ã€‚\n\n### åº”ç”¨åœºæ™¯\n\n- åœ¨ `Vue` ç”Ÿå‘½å‘¨æœŸçš„ `created()` é’©å­å‡½æ•°è¿›è¡Œçš„ `DOM` æ“ä½œä¸€å®šè¦æ”¾åœ¨ `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­\n\n> åŸå› : åœ¨ `created()` é’©å­å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ `DOM` å…¶å®å¹¶æœªè¿›è¡Œä»»ä½•æ¸²æŸ“ï¼Œè€Œæ­¤æ—¶è¿›è¡Œ `DOM` æ“ä½œæ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ä¸€å®šè¦å°†æ“ä½œ `Dom` éƒ¨åˆ†çš„ä»£ç æ”¾å…¥ `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ `mounted()` é’©å­å‡½æ•°ï¼Œå› ä¸ºè¯¥é’©å­å‡½æ•°æ‰§è¡Œæ—¶æ‰€æœ‰çš„`DOM` æŒ‚è½½å’Œæ¸²æŸ“éƒ½å·²å®Œæˆï¼Œæ­¤æ—¶åœ¨è¯¥é’©å­å‡½æ•°ä¸­è¿›è¡Œä»»ä½• `DOM` æ“ä½œéƒ½ä¸ä¼šæœ‰é—®é¢˜ ã€‚\n\n- åœ¨æ•°æ®å˜åŒ–åè¦æ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®æ”¹å˜è€Œæ”¹å˜çš„ `DOM` ç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œéƒ½åº”è¯¥æ”¾è¿› `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\n### nextTick æºç æµ…æ\n\n> `Vue.nextTick` ç”¨äºå»¶è¿Ÿæ‰§è¡Œä¸€æ®µä»£ç ï¼Œå®ƒæ¥å— `2` ä¸ªå‚æ•°ï¼ˆ `å›è°ƒå‡½æ•°` å’Œ `æ‰§è¡Œå›è°ƒå‡½æ•°çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ`ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æä¾›å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°†è¿”å› `promise` å¯¹è±¡ã€‚\n\n> ä¸»è¦çš„å®ç°æ–¹å¼ä¸ºåˆ¤æ–­è®¾å¤‡æ‰€æ”¯æŒçš„ä¸‰ç§å±æ€§ï¼Œä¾æ®å„è‡ªæ”¯æŒçš„å±æ€§æ¥è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚å¦‚æœæ”¯æŒ `promise`ï¼Œä¼šä½¿ç”¨ `Promise.then` æ¥åšå»¶è¿Ÿè°ƒç”¨å‡½æ•°ã€‚å¦‚æœè®¾å¤‡ä¸æ”¯æŒ `Promise` å¯¹è±¡ï¼Œå†åˆ¤æ–­æ˜¯å¦æ”¯æŒ `MutationObserver` å¯¹è±¡ï¼Œå¦‚æœæ”¯æŒè¯¥å¯¹è±¡ï¼Œå°±ä½¿ç”¨`MutationObserver` æ¥åšå»¶è¿Ÿï¼Œæœ€åå¦‚æœä¸Šé¢ä¸¤ç§éƒ½ä¸æ”¯æŒçš„è¯ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ `setTimeout` æ¥åšå»¶è¿Ÿæ“ä½œã€‚\n\n## 15. è‡ªå®šä¹‰æŒ‡ä»¤\n\n### ç®€ä»‹\n\n> é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ ( `v-model`Â  å’Œ Â `v-show`)ï¼Œ `Vue`Â  ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚\n\n> æ³¨æ„ï¼Œåœ¨ `Vue2.0` ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š `DOM`Â  å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚\n\n- ä¾‹\n\n> å½“é¡µé¢åŠ è½½æ—¶ï¼Œè¯¥å…ƒç´ å°†è·å¾—ç„¦ç‚¹ (æ³¨æ„ï¼š `autofocus`Â  åœ¨ç§»åŠ¨ç‰ˆ `Safari`Â  ä¸Šä¸å·¥ä½œ)ã€‚äº‹å®ä¸Šï¼Œåªè¦ä½ åœ¨æ‰“å¼€è¿™ä¸ªé¡µé¢åè¿˜æ²¡ç‚¹å‡»è¿‡ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªè¾“å…¥æ¡†å°±åº”å½“è¿˜æ˜¯å¤„äºèšç„¦çŠ¶æ€ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨æŒ‡ä»¤æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š\n\n```javascript\n// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ `v-focus`\nVue.directive(\"focus\", {\n  // å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦\n  inserted: function (el) {\n    // èšç„¦å…ƒç´ \n    el.focus();\n  }\n});\n```\n\n> å¦‚æœæƒ³æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ï¼Œç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª `directives`Â  çš„é€‰é¡¹ï¼š\n\n```javascript\ndirectives: {\n  focus: {\n    // æŒ‡ä»¤çš„å®šä¹‰\n    inserted: function (el) {\n      el.focus()\n    }\n  }\n}\n```\n\n> ç„¶åä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä»»ä½•å…ƒç´ ä¸Šä½¿ç”¨æ–°çš„ Â `v-focus`Â Â  `property`ï¼Œå¦‚ä¸‹\n\n```html\n<input v-focus />\n```\n\n### é’©å­å‡½æ•°\n\n> ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š\n\n- `bind`ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚\n- `inserted`ï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚\n- `update`ï¼šæ‰€åœ¨ç»„ä»¶çš„ `VNode` æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ `VNode` æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚\n- `componentUpdated`ï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ `VNode` åŠå…¶å­ `VNode` å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚\n- `unbind`ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚\n\n> æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é’©å­å‡½æ•°çš„å‚æ•° (å³ elã€bindingã€vnode å’Œ oldVnode)ã€‚\n\n### é’©å­å‡½æ•°å‚æ•°\n\n> æŒ‡ä»¤é’©å­å‡½æ•°ä¼šè¢«ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š\n\n- `el`ï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ `DOM`ã€‚\n- `binding`ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ `property`ï¼š\n  - `name`ï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ `v-` å‰ç¼€ã€‚\n  - `value`ï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š`v-my-directive=\"1 + 1\"` ä¸­ï¼Œç»‘å®šå€¼ä¸º `2`ã€‚\n  - `oldValue`ï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ `update` å’Œ `componentUpdated` é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚\n  - `expression`ï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ `v-my-directive=\"1 + 1\"` ä¸­ï¼Œè¡¨è¾¾å¼ä¸º `\"1 + 1\"`ã€‚\n  - `arg`ï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ `v-my-directive:foo` ä¸­ï¼Œå‚æ•°ä¸º `\"foo\"`ã€‚\n  - `modifiers`ï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š`v-my-directive.foo.bar` ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º `{ foo: true, bar: true }`ã€‚\n- `vnode`ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ [VNode API](https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3) æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚\n- `oldVnode`ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ `update` å’Œ `componentUpdated` é’©å­ä¸­å¯ç”¨ã€‚\n\n> é™¤äº† Â `el`Â  ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ Â [`dataset`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset)Â  æ¥è¿›è¡Œã€‚\n\n- ä¾‹\n\n```html\n<div id=\"hook-arguments-example\" v-demo:foo.a.b=\"message\"></div>\n```\n\n```javascript\nVue.directive(\"demo\", {\n  bind: function (el, binding, vnode) {\n    var s = JSON.stringify;\n    el.innerHTML =\n      \"name: \" +\n      s(binding.name) +\n      \"<br>\" +\n      \"value: \" +\n      s(binding.value) +\n      \"<br>\" +\n      \"expression: \" +\n      s(binding.expression) +\n      \"<br>\" +\n      \"argument: \" +\n      s(binding.arg) +\n      \"<br>\" +\n      \"modifiers: \" +\n      s(binding.modifiers) +\n      \"<br>\" +\n      \"vnode keys: \" +\n      Object.keys(vnode).join(\", \");\n  }\n});\n\nnew Vue({\n  el: \"#hook-arguments-example\",\n  data: {\n    message: \"hello!\"\n  }\n});\n```\n\n### åŠ¨æ€æŒ‡ä»¤å‚æ•°\n\n> æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ `v-mydirective:[argument]=\"value\"` ä¸­ï¼Œ`argument` å‚æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹æ•°æ®è¿›è¡Œæ›´æ–°ï¼è¿™ä½¿å¾—è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åœ¨åº”ç”¨ä¸­è¢«çµæ´»ä½¿ç”¨ã€‚\n\n> ä¾‹å¦‚ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨æ¥é€šè¿‡å›ºå®šå¸ƒå±€å°†å…ƒç´ å›ºå®šåœ¨é¡µé¢ä¸Šã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªé€šè¿‡æŒ‡ä»¤å€¼æ¥æ›´æ–°ç«–ç›´ä½ç½®åƒç´ å€¼çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼š\n\n```html\n<div id=\"baseexample\">\n  <p>Scroll down the page</p>\n  <p v-pin=\"200\">Stick me 200px from the top of the page</p>\n</div>\n```\n\n```javascript\nVue.directive(\"pin\", {\n  bind: function (el, binding, vnode) {\n    el.style.position = \"fixed\";\n    el.style.top = binding.value + \"px\";\n  }\n});\n\nnew Vue({\n  el: \"#baseexample\"\n});\n```\n\n> è¿™ä¼šæŠŠè¯¥å…ƒç´ å›ºå®šåœ¨è·ç¦»é¡µé¢é¡¶éƒ¨ 200 åƒç´ çš„ä½ç½®ã€‚ä½†å¦‚æœåœºæ™¯æ˜¯æˆ‘ä»¬éœ€è¦æŠŠå…ƒç´ å›ºå®šåœ¨å·¦ä¾§è€Œä¸æ˜¯é¡¶éƒ¨åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶ä½¿ç”¨åŠ¨æ€å‚æ•°å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ ¹æ®æ¯ä¸ªç»„ä»¶å®ä¾‹æ¥è¿›è¡Œæ›´æ–°ã€‚\n\n```html\n<div id=\"dynamicexample\">\n  <h3>Scroll down inside this section â†“</h3>\n  <p v-pin:[direction]=\"200\">I am pinned onto the page at 200px to the left.</p>\n</div>\n```\n\n```javascript\nVue.directive(\"pin\", {\n  bind: function (el, binding, vnode) {\n    el.style.position = \"fixed\";\n    var s = binding.arg == \"left\" ? \"left\" : \"top\";\n    el.style[s] = binding.value + \"px\";\n  }\n});\n\nnew Vue({\n  el: \"#dynamicexample\",\n  data: function () {\n    return {\n      direction: \"left\"\n    };\n  }\n});\n```\n\n### å‡½æ•°ç®€å†™\n\n> åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä½ å¯èƒ½æƒ³åœ¨ Â `bind`Â  å’Œ Â `update`Â  æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­ã€‚æ¯”å¦‚è¿™æ ·å†™ï¼š\n\n```javascript\nVue.directive(\"color-swatch\", function (el, binding) {\n  el.style.backgroundColor = binding.value;\n});\n```\n\n### å¯¹è±¡å­—é¢é‡\n\n> å¦‚æœæŒ‡ä»¤éœ€è¦å¤šä¸ªå€¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª `JavaScript` å¯¹è±¡å­—é¢é‡ã€‚è®°ä½ï¼ŒæŒ‡ä»¤å‡½æ•°èƒ½å¤Ÿæ¥å—æ‰€æœ‰åˆæ³•çš„ `JavaScript` è¡¨è¾¾å¼ã€‚\n\n```html\n<div v-demo=\"{ color: 'white', text: 'hello!' }\"></div>\n```\n\n```javascript\nVue.directive(\"demo\", function (el, binding) {\n  console.log(binding.value.color); // => \"white\"\n  console.log(binding.value.text); // => \"hello!\"\n});\n```\n\n## 15. vue 3.0 å°é²œ\n\n[ä¸­æ–‡æ–‡æ¡£](https://www.liulongbin.top:8085/)\n","source":"_posts/å‰ç«¯/Vue2 æ–‡æ¡£.md","raw":"---\ntitle: Vue2 æ–‡æ¡£\ndate: 2020-07-15\ncategories: [å‰ç«¯, vue]\ntags:\n  - æ–‡æ¡£\n---\n\n## 1. çˆ¶å­ç»„ä»¶ä¼ å€¼\n\n- çˆ¶å­ï¼š `props`\n- å­çˆ¶ï¼š `this.$emit('äº‹ä»¶å', å‚æ•°)`\n\n## 2. è·å– dom èŠ‚ç‚¹\n\n> `this.$refs`ï¼Œ å¯ä»¥è·å–ç»„ä»¶çš„å¼•ç”¨ï¼ŒåŒæ—¶å¯ä»¥è·å–ç»„ä»¶çš„ `dataï¼Œmethods` ç­‰\n\n## 3. è·¯ç”±\n\n- åç«¯è·¯ç”±\n\n> å¯¹äºæ™®é€šçš„ç½‘ç«™ï¼Œæ‰€æœ‰çš„è¶…é“¾æ¥éƒ½æ˜¯ `URL` åœ°å€ï¼Œæ‰€æœ‰çš„ `URL` åœ°å€éƒ½å¯¹åº”æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚\n\n- å‰ç«¯è·¯ç”±\n\n> å¯¹äºå•é¡µé¢åº”ç”¨ç¨‹åºï¼ˆ`SPA`ï¼‰ï¼Œä¸»è¦é€šè¿‡ `URL` çš„ `hash(#)` æ¥å®ç°ä¸åŒé¡µé¢ä¹‹é—´çš„åˆ‡æ¢ï¼›åŒæ—¶ï¼Œ`hash` æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œ`http` è¯·æ±‚ä¸­ä¸ä¼šåŒ…å« `hash` ç›¸å…³çš„å†…å®¹\n\n## 4. å‘½åè§†å›¾ router-view\n\n```vue\n<template>\n  <div id=\"app\">\n    <router-view></router-view>\n    <router-view name=\"left\"></router-view>\n    <router-view name=\"main\"></router-view>\n  </div>\n</template>\n\n<script>\nvar header = {\n  template: \"<div>header</div>\"\n};\nvar leftBox = {\n  template: \"<div>left</div>\"\n};\nvar mainBox = {\n  template: \"<div>main</div>\"\n};\n\nvar router = new VueRouter({\n  routes: [\n    {\n      path: \"/\",\n      components: {\n        default: header,\n        left: leftBox,\n        main: mainBox\n      }\n    }\n  ]\n});\n\nvar vm = new Vue({\n  el: \"#app\",\n  router\n});\n</script>\n```\n\n## 5. watch\n\n```vue\n<template>\n  <input type=\"text\" v-model=\"msg\" />\n</template>\n\n<script>\ndata: {\n   msg: ''\n},\nwatch: {\n  msg(newVal, oldVal) {\n    console.log(newVal, oldVal)\n  },\n  \"$route.path\": (newVal, oldVal) => {\n    console.log(newVal, oldVal)\n  }\n}\n</script>\n```\n\n## 6. computed\n\n- åœ¨ `computed` ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ï¼ˆè®¡ç®—å±æ€§ï¼‰ï¼›è®¡ç®—å±æ€§çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚åªä¸è¿‡åœ¨æˆ‘ä»¬è¿™äº›è®¡ç®—å±æ€§çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥æŠŠä»–ä»¬çš„åç§°å½“ä½œå±æ€§æ¥ä½¿ç”¨çš„ï¼Œå¹¶ä¸ä¼šæŠŠè®¡ç®—å±æ€§å½“ä½œæ–¹æ³•æ¥è°ƒç”¨ã€‚\n- è®¡ç®—å±æ€§çš„æ±‚å€¼ç»“æœï¼Œä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ä½¿ç”¨; å¦‚æœ `è®¡ç®—å±æ€§` æ–¹æ³•ä¸­ï¼Œæ‰€ä¾èµ–çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°å¯¹ `è®¡ç®—å±æ€§` è¿›è¡Œæ±‚å€¼\n\n```vue\n<template>\n  <input type=\"text\" v-model=\"firstname\" />\n  <input type=\"text\" v-model=\"lastname\" />\n  <input type=\"text\" v-model=\"fullname\" />\n</template>\n\n<script>\ndata: {\n    firstname: '',\n    lastname: ''\n},\ncomputed: {\n    fullname() {\n        return this.firstname + '-' + this.lastname;\n    }\n}\n</script>\n```\n\n## 7. render\n\n- `createElements` æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨å®ƒï¼Œèƒ½å¤ŸæŠŠæŒ‡å®šçš„ç»„ä»¶æ¨¡æ¿ï¼Œæ¸²æŸ“ä¸º `html` ç»“æ„\n- é€šå¸¸ä¹ æƒ¯æ€§å°† `createElements` å†™æˆ `h`\n\n```vue\n<script>\nvar login = {\n  template: \"<h1>è¿™æ˜¯ç™»é™†ç»„ä»¶</h1>\"\n};\n\nvar vm = new Vue({\n  el: \"#app\",\n  data: {},\n  render: function (createElements) {\n    return createElements(login);\n  }\n});\n</script>\n```\n\n## 8. æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\n\n- `commenJs` å¯¼å…¥å¯¼å‡ºæ¨¡å—\n\n> å¯¼å…¥\n\n```javascript\nvar åç§° = require(\"æ¨¡å—æ ‡è¯†ç¬¦\");\n```\n\n> å¯¼å‡º\n\n```javascript\nmodule.exports = {};\n```\n\n- `import` å¯¼å…¥å¯¼å‡ºæ¨¡å—\n\n> å¯¼å…¥\n\n```javascript\ninport åç§°A from 'æ¨¡å—æ ‡è¯†ç¬¦'\ninport { åç§°B } 'æ ‡è¯†è·¯å¾„'\n```\n\n> å¯¼å‡º\n\n```javascript\nexport default åç§°A\nexport åç§°B\n```\n\n> é‡å‘½å\n\n```javascript\nimport åç§°A as newA from 'æ¨¡å—æ ‡è¯†ç¬¦'\nimport { åç§°B as newB } from 'æ ‡ç¤ºè·¯å¾„'\n```\n\n## 9. vuex\n\n### ä»‹ç»\n\n- `vuex` æ˜¯ `vue.js` åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ˆçŠ¶æ€å¯ä»¥ç†è§£ä¸ºæ•°æ®ï¼‰ï¼Œå®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ï¼Œç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯æ£€æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–\n\n### propsï¼Œdata å’Œ vuex çš„åŒºåˆ«\n\n- `props`: å­˜æ”¾çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®\n- `data`: å­˜æ”¾ç§æœ‰æ•°æ®\n- `vuex`: ç»„ä»¶ä¹‹é—´å…±äº«çš„æ•°æ®\n\n### stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\n\n- `state`ï¼šç±»ä¼¼äº `data`ï¼Œç”¨æ¥å­˜æ•°æ®\n\n> è®¿é—®\n\n```javascript\nthis.$store.state.æ•°æ®a\n\n...mapState\n```\n\n- `mutations`ï¼šç±»ä¼¼äº `methods`ï¼Œå¤„ç†åŒæ­¥æ–¹æ³•\n\n> ä½¿ç”¨\n\n```javascript\nmutations: {\n    \"METHODS\": function(state, value) {\n        state.value = value;\n    }\n}\n```\n\n> è®¿é—®\n\n```javascript\nthis.$store.commit('æ–¹æ³•å', 'å‚æ•°')\n\n...mapMutations\n```\n\n- `actions`ï¼šç±»ä¼¼äº `methods`ï¼Œå¤„ç†å¼‚æ­¥æ–¹æ³•\n\n> ä½¿ç”¨\n\n```javascript\nactions: {\n    async methodsAsync({ commit }, value) {\n        try {\n            const result = await apiMethods()\n            if (result.code === 200) {\n                commit(\"SET_METHODS\", result.data)\n            }\n        } catch(err) {\n            throw new Error(err);\n        }\n    }\n}\n```\n\n> è®¿é—®\n\n```javascript\nthis.$store.dispatch('æ–¹æ³•å', 'å‚æ•°')\n\n...mapActions\n```\n\n- `getters`ï¼šç±»ä¼¼äº `computed` å’Œ `filter`ï¼Œå¤„ç†æ•°æ®\n\n> ä½¿ç”¨\n\n```javascript\ngetters: {\n    newData(state) {\n        return state.arr.filter(item => item.id === 1)\n    }\n}\n```\n\n> è®¿é—®\n\n```javascript\nthis.$store.getters('åç§°')\n\n...mapGetters\n```\n\n## 10. props ä¼ é€’æ•°æ®æœªæ›´æ–°\n\n> è§£å†³æ–¹å¼ï¼šä½¿ç”¨ `watch` ç›‘å¬ `props`\n\n## 11. ç”Ÿå‘½å‘¨æœŸ\n\n### beforeCreate\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> æ­¤æ—¶ï¼Œç»„ä»¶çš„ `data` å’Œ `methods` ä»¥åŠé¡µé¢ `DOM` ç»“æ„éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–\n\n### created\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> æ­¤æ—¶ï¼Œç»„ä»¶çš„ `data` å’Œ `methods` å·²ç»å¯ç”¨äº†ï¼Œä½†æ˜¯é¡µé¢ `DOM` ç»“æ„è¿˜æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼›ç»å¸¸ç”¨æ¥å‘èµ· `ajax` è¯·æ±‚\n> æ³¨æ„ï¼Œåœ¨ `ssr` æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼Œåœ¨æ­¤å¤„å‘èµ· `ajax` è¯·æ±‚ä¼šæœ‰é—®é¢˜ï¼Œæ¨èåœ¨ `mounted` ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ¥å‘èµ· `ajax` è¯·æ±‚ã€‚\n\n### beforeMount\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> æ­¤æ—¶å†…å­˜ä¸­çš„æ¨¡æ¿ç»“æ„è¿˜æ²¡æœ‰*çœŸæ­£æ¸²æŸ“åˆ°é¡µé¢ä¸Š*ï¼›æ­¤æ—¶ï¼Œé¡µé¢ä¸Š*çœ‹ä¸åˆ°çœŸå®çš„æ•°æ®*ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢\n\n### Mounted\n\n- ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> ç»„ä»¶æŒ‚è½½å®Œæ¯•ï¼Œå¯åˆå§‹åŒ–æ’ä»¶\n\n### beforeUpdate\n\n> _æ•°æ®è‚¯å®šæ˜¯æœ€æ–°çš„_ï¼Œç„¶è€Œ*é¡µé¢å‘ˆç°çš„æ•°æ®è¿˜æ˜¯æ—§çš„*\n\n### updated\n\n> é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ã€‚æ­¤æ—¶ï¼Œ`data` å’Œ `view` ä¸Šéƒ½æ˜¯æœ€æ–°çš„æ•°æ®\n\n### beforeDestroy\n\n- ç»„ä»¶é”€æ¯é˜¶æ®µ\n\n> æ­¤æ—¶æ²¡æœ‰çœŸæ­£å¼€å§‹é”€æ¯ï¼Œç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚åŒæ—¶ï¼Œ`data` ã€`methods` ç­‰æ•°æ®æˆ–æ–¹æ³•ï¼Œä¾ç„¶å¯ä»¥è¢«æ­£å¸¸è®¿é—®ï¼›\n\n### destroyed\n\n- ç»„ä»¶é”€æ¯é˜¶æ®µ\n\n> ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯.`data` å’Œ `methods` éƒ½ä¸å¯ç”¨äº†\n\n## 12 Â vue ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\n\n| è¡Œä¸º                                                               | æŒ‡å‘ | ä½œç”¨                                                                                                                                                 |\n| ------------------------------------------------------------------ | ---- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `new Vue()`                                                        | â¡ï¸   | å®ä¾‹åŒ– `Vue` å¯¹è±¡                                                                                                                                    |\n| `Init Events & Lifecycle`                                          | â¡ï¸   | åˆå§‹åŒ–ç»„ä»¶ `methods` å’Œ `ç”Ÿå‘½å‘¨æœŸå‡½æ•°`                                                                                                               |\n| `beforeCreate`                                                     | â¡ï¸   | `data`ï¼Œ`methods` æœªè¢«åˆå§‹åŒ–                                                                                                                         |\n| `Init injections & reactivity`                                     | â¡ï¸   | æ­£åœ¨åˆå§‹åŒ– `data` å’Œ `methods` ä¸­çš„æ•°æ®ä»¥åŠæ–¹æ³•                                                                                                      |\n| `created`                                                          | â¡ï¸   | `data`ï¼Œ`methods` å¯ç”¨ï¼Œä½† `Dom` ç»“æ„è¿˜æœªè¢«æ¸²æŸ“ï¼Œå¸¸å‘èµ· `ajax` è¯·æ±‚                                                                                  |\n| â¬‡ï¸                                                                 | â¡ï¸   | åˆ¤æ–­æ˜¯å¦æœ‰ `el`ï¼Œ`template` å±æ€§                                                                                                                     |\n| â¬‡ï¸                                                                 | â¡ï¸   | ç”¨æ¥ç¼–è¯‘æ¨¡ç‰ˆç»“æ„ï¼Œå½“æ‰€æœ‰æŒ‡ä»¤è§£æå®Œæ¯•ï¼Œåˆ™`æ¨¡æ¿é¡µé¢å°±è¢«æ¸²æŸ“åˆ°å†…å­˜ä¸­äº†`ï¼›å½“æ¨¡æ¿ç¼–è¯‘å®Œæˆï¼Œæ¨¡æ¿é¡µé¢è¿˜æ²¡æœ‰æŒ‚åœ¨åˆ°é¡µé¢ä¸Šï¼Œåªæ˜¯å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç”¨æˆ·çœ‹ä¸åˆ°é¡µé¢ï¼› |\n| `beforeMount`                                                      | â¡ï¸   | æ­¤æ—¶ï¼Œé¡µé¢ä¸Šçœ‹ä¸åˆ° `çœŸå®æ•°æ®`ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢                                                                                        |\n| `Create vm.$el and replace \"el\" with it`                           | â¡ï¸   | æ­£åœ¨æŠŠå†…å­˜ä¸­æ¸²æŸ“å¥½çš„æ¨¡æ¿ç»“æ„æ›¿æ¢åˆ°é¡µé¢ä¸Š                                                                                                             |\n| `mounted`                                                          | â¡ï¸   | æ­¤æ—¶ï¼Œé¡µé¢æ¸²æŸ“å®Œæ¯•                                                                                                                                   |\n| â¬‡ï¸(ç»„ä»¶è¿è¡Œä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°)                                       | â¡ï¸   | ä¼šæ ¹æ® `data` æ•°æ®çš„å˜åŒ–ï¼Œæœ‰é€‰æ‹©è¡Œçš„è§¦å‘ `0`æ¬¡ æˆ– `n`æ¬¡                                                                                              |\n| `beforeUpdate`                                                     | â¡ï¸   | æ•°æ®æ˜¯æ–°çš„ï¼Œä½†é¡µé¢å‘ˆç°çš„æ•°æ®ä»æ˜¯æ—§çš„                                                                                                                 |\n| `updated`                                                          | â¡ï¸   | é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œæ­¤æ—¶ï¼Œæ•°æ®æ˜¯æœ€æ–°çš„ï¼ŒåŒæ—¶é¡µé¢ä¸Šå‘ˆç°çš„æ•°æ®ä¹Ÿæ˜¯æœ€æ–°çš„                                                                               |\n| â¬‡ï¸(é”€æ¯é˜¶æ®µ)                                                       |      |                                                                                                                                                      |\n| `beforeDestroy`                                                    | â¡ï¸   | ç»„ä»¶å³å°†è¢«é”€æ¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰çœŸ æ­£å¼€å§‹é”€æ¯ï¼Œæ­¤æ—¶ç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚`data`ï¼Œ`methods` ä»å¯æ­£å¸¸è®¿é—®                                                      |\n| `Teardown watchers,child components and event listeners`(é”€æ¯è¿‡ç¨‹) | â¡ï¸   |                                                                                                                                                      |\n| `destroyed`                                                        | â¡ï¸   | ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯ï¼Œç»„ä»¶å·²ç»åºŸäº†ï¼Œ`data` å’Œ `methods` éƒ½ä¸å¯ç”¨äº†                                                                                     |\n\n## 13. keep-alive\n\n### æ–°å¢ç”Ÿå‘½å‘¨æœŸ\n\n> è¢«åŒ…å«åœ¨ Â `<keep-alive>`Â  ä¸­åˆ›å»ºçš„ç»„ä»¶ï¼Œä¼šå¤šä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ:Â `activated`Â  ä¸ Â `deactivated`\n\n- actived\n\n> ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨ï¼Œåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼Œä¹‹åæ¯æ¬¡ `keep-alive` æ¿€æ´»æ—¶è¢«è°ƒç”¨ã€‚\n\n- deactivated\n\n> ç»„ä»¶è¢«åœç”¨æ—¶è°ƒç”¨ã€‚\n\n### æ–°å¢å±æ€§\n\n- include\n\n> åŒ…å«çš„ç»„ä»¶ç¼“å­˜ç”Ÿæ•ˆã€‚å¯¹åº” `.vue` æ–‡ä»¶çš„ `name` å±æ€§\n\n- exclude\n\n> æ’é™¤çš„ç»„ä»¶ä¸ç¼“å­˜ï¼Œä¼˜å…ˆçº§å¤§äº `include`ã€‚å¯¹åº” `.vue` æ–‡ä»¶çš„ `name` å±æ€§\n\n## 14. `nextTick`\n\n### èƒŒæ™¯\n\n> åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜ `Vue` æ˜¯å¼‚æ­¥æ‰§è¡Œ `DOM` æ›´æ–°çš„ï¼Œæ‰€ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†æ‰å¯æ­£å¸¸æ‰§è¡ŒæŸäº›é€»è¾‘ã€‚\n\n### åº”ç”¨åœºæ™¯\n\n- åœ¨ `Vue` ç”Ÿå‘½å‘¨æœŸçš„ `created()` é’©å­å‡½æ•°è¿›è¡Œçš„ `DOM` æ“ä½œä¸€å®šè¦æ”¾åœ¨ `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­\n\n> åŸå› : åœ¨ `created()` é’©å­å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ `DOM` å…¶å®å¹¶æœªè¿›è¡Œä»»ä½•æ¸²æŸ“ï¼Œè€Œæ­¤æ—¶è¿›è¡Œ `DOM` æ“ä½œæ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ä¸€å®šè¦å°†æ“ä½œ `Dom` éƒ¨åˆ†çš„ä»£ç æ”¾å…¥ `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ `mounted()` é’©å­å‡½æ•°ï¼Œå› ä¸ºè¯¥é’©å­å‡½æ•°æ‰§è¡Œæ—¶æ‰€æœ‰çš„`DOM` æŒ‚è½½å’Œæ¸²æŸ“éƒ½å·²å®Œæˆï¼Œæ­¤æ—¶åœ¨è¯¥é’©å­å‡½æ•°ä¸­è¿›è¡Œä»»ä½• `DOM` æ“ä½œéƒ½ä¸ä¼šæœ‰é—®é¢˜ ã€‚\n\n- åœ¨æ•°æ®å˜åŒ–åè¦æ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®æ”¹å˜è€Œæ”¹å˜çš„ `DOM` ç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œéƒ½åº”è¯¥æ”¾è¿› `Vue.nextTick()` çš„å›è°ƒå‡½æ•°ä¸­ã€‚\n\n### nextTick æºç æµ…æ\n\n> `Vue.nextTick` ç”¨äºå»¶è¿Ÿæ‰§è¡Œä¸€æ®µä»£ç ï¼Œå®ƒæ¥å— `2` ä¸ªå‚æ•°ï¼ˆ `å›è°ƒå‡½æ•°` å’Œ `æ‰§è¡Œå›è°ƒå‡½æ•°çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ`ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æä¾›å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°†è¿”å› `promise` å¯¹è±¡ã€‚\n\n> ä¸»è¦çš„å®ç°æ–¹å¼ä¸ºåˆ¤æ–­è®¾å¤‡æ‰€æ”¯æŒçš„ä¸‰ç§å±æ€§ï¼Œä¾æ®å„è‡ªæ”¯æŒçš„å±æ€§æ¥è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚å¦‚æœæ”¯æŒ `promise`ï¼Œä¼šä½¿ç”¨ `Promise.then` æ¥åšå»¶è¿Ÿè°ƒç”¨å‡½æ•°ã€‚å¦‚æœè®¾å¤‡ä¸æ”¯æŒ `Promise` å¯¹è±¡ï¼Œå†åˆ¤æ–­æ˜¯å¦æ”¯æŒ `MutationObserver` å¯¹è±¡ï¼Œå¦‚æœæ”¯æŒè¯¥å¯¹è±¡ï¼Œå°±ä½¿ç”¨`MutationObserver` æ¥åšå»¶è¿Ÿï¼Œæœ€åå¦‚æœä¸Šé¢ä¸¤ç§éƒ½ä¸æ”¯æŒçš„è¯ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ `setTimeout` æ¥åšå»¶è¿Ÿæ“ä½œã€‚\n\n## 15. è‡ªå®šä¹‰æŒ‡ä»¤\n\n### ç®€ä»‹\n\n> é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ ( `v-model`Â  å’Œ Â `v-show`)ï¼Œ `Vue`Â  ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚\n\n> æ³¨æ„ï¼Œåœ¨ `Vue2.0` ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š `DOM`Â  å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚\n\n- ä¾‹\n\n> å½“é¡µé¢åŠ è½½æ—¶ï¼Œè¯¥å…ƒç´ å°†è·å¾—ç„¦ç‚¹ (æ³¨æ„ï¼š `autofocus`Â  åœ¨ç§»åŠ¨ç‰ˆ `Safari`Â  ä¸Šä¸å·¥ä½œ)ã€‚äº‹å®ä¸Šï¼Œåªè¦ä½ åœ¨æ‰“å¼€è¿™ä¸ªé¡µé¢åè¿˜æ²¡ç‚¹å‡»è¿‡ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªè¾“å…¥æ¡†å°±åº”å½“è¿˜æ˜¯å¤„äºèšç„¦çŠ¶æ€ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨æŒ‡ä»¤æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š\n\n```javascript\n// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ `v-focus`\nVue.directive(\"focus\", {\n  // å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦\n  inserted: function (el) {\n    // èšç„¦å…ƒç´ \n    el.focus();\n  }\n});\n```\n\n> å¦‚æœæƒ³æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ï¼Œç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª `directives`Â  çš„é€‰é¡¹ï¼š\n\n```javascript\ndirectives: {\n  focus: {\n    // æŒ‡ä»¤çš„å®šä¹‰\n    inserted: function (el) {\n      el.focus()\n    }\n  }\n}\n```\n\n> ç„¶åä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä»»ä½•å…ƒç´ ä¸Šä½¿ç”¨æ–°çš„ Â `v-focus`Â Â  `property`ï¼Œå¦‚ä¸‹\n\n```html\n<input v-focus />\n```\n\n### é’©å­å‡½æ•°\n\n> ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š\n\n- `bind`ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚\n- `inserted`ï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚\n- `update`ï¼šæ‰€åœ¨ç»„ä»¶çš„ `VNode` æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ `VNode` æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚\n- `componentUpdated`ï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ `VNode` åŠå…¶å­ `VNode` å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚\n- `unbind`ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚\n\n> æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é’©å­å‡½æ•°çš„å‚æ•° (å³ elã€bindingã€vnode å’Œ oldVnode)ã€‚\n\n### é’©å­å‡½æ•°å‚æ•°\n\n> æŒ‡ä»¤é’©å­å‡½æ•°ä¼šè¢«ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š\n\n- `el`ï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ `DOM`ã€‚\n- `binding`ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ `property`ï¼š\n  - `name`ï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ `v-` å‰ç¼€ã€‚\n  - `value`ï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š`v-my-directive=\"1 + 1\"` ä¸­ï¼Œç»‘å®šå€¼ä¸º `2`ã€‚\n  - `oldValue`ï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ `update` å’Œ `componentUpdated` é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚\n  - `expression`ï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ `v-my-directive=\"1 + 1\"` ä¸­ï¼Œè¡¨è¾¾å¼ä¸º `\"1 + 1\"`ã€‚\n  - `arg`ï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ `v-my-directive:foo` ä¸­ï¼Œå‚æ•°ä¸º `\"foo\"`ã€‚\n  - `modifiers`ï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š`v-my-directive.foo.bar` ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º `{ foo: true, bar: true }`ã€‚\n- `vnode`ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ [VNode API](https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3) æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚\n- `oldVnode`ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ `update` å’Œ `componentUpdated` é’©å­ä¸­å¯ç”¨ã€‚\n\n> é™¤äº† Â `el`Â  ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ Â [`dataset`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset)Â  æ¥è¿›è¡Œã€‚\n\n- ä¾‹\n\n```html\n<div id=\"hook-arguments-example\" v-demo:foo.a.b=\"message\"></div>\n```\n\n```javascript\nVue.directive(\"demo\", {\n  bind: function (el, binding, vnode) {\n    var s = JSON.stringify;\n    el.innerHTML =\n      \"name: \" +\n      s(binding.name) +\n      \"<br>\" +\n      \"value: \" +\n      s(binding.value) +\n      \"<br>\" +\n      \"expression: \" +\n      s(binding.expression) +\n      \"<br>\" +\n      \"argument: \" +\n      s(binding.arg) +\n      \"<br>\" +\n      \"modifiers: \" +\n      s(binding.modifiers) +\n      \"<br>\" +\n      \"vnode keys: \" +\n      Object.keys(vnode).join(\", \");\n  }\n});\n\nnew Vue({\n  el: \"#hook-arguments-example\",\n  data: {\n    message: \"hello!\"\n  }\n});\n```\n\n### åŠ¨æ€æŒ‡ä»¤å‚æ•°\n\n> æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ `v-mydirective:[argument]=\"value\"` ä¸­ï¼Œ`argument` å‚æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹æ•°æ®è¿›è¡Œæ›´æ–°ï¼è¿™ä½¿å¾—è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åœ¨åº”ç”¨ä¸­è¢«çµæ´»ä½¿ç”¨ã€‚\n\n> ä¾‹å¦‚ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨æ¥é€šè¿‡å›ºå®šå¸ƒå±€å°†å…ƒç´ å›ºå®šåœ¨é¡µé¢ä¸Šã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªé€šè¿‡æŒ‡ä»¤å€¼æ¥æ›´æ–°ç«–ç›´ä½ç½®åƒç´ å€¼çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼š\n\n```html\n<div id=\"baseexample\">\n  <p>Scroll down the page</p>\n  <p v-pin=\"200\">Stick me 200px from the top of the page</p>\n</div>\n```\n\n```javascript\nVue.directive(\"pin\", {\n  bind: function (el, binding, vnode) {\n    el.style.position = \"fixed\";\n    el.style.top = binding.value + \"px\";\n  }\n});\n\nnew Vue({\n  el: \"#baseexample\"\n});\n```\n\n> è¿™ä¼šæŠŠè¯¥å…ƒç´ å›ºå®šåœ¨è·ç¦»é¡µé¢é¡¶éƒ¨ 200 åƒç´ çš„ä½ç½®ã€‚ä½†å¦‚æœåœºæ™¯æ˜¯æˆ‘ä»¬éœ€è¦æŠŠå…ƒç´ å›ºå®šåœ¨å·¦ä¾§è€Œä¸æ˜¯é¡¶éƒ¨åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶ä½¿ç”¨åŠ¨æ€å‚æ•°å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ ¹æ®æ¯ä¸ªç»„ä»¶å®ä¾‹æ¥è¿›è¡Œæ›´æ–°ã€‚\n\n```html\n<div id=\"dynamicexample\">\n  <h3>Scroll down inside this section â†“</h3>\n  <p v-pin:[direction]=\"200\">I am pinned onto the page at 200px to the left.</p>\n</div>\n```\n\n```javascript\nVue.directive(\"pin\", {\n  bind: function (el, binding, vnode) {\n    el.style.position = \"fixed\";\n    var s = binding.arg == \"left\" ? \"left\" : \"top\";\n    el.style[s] = binding.value + \"px\";\n  }\n});\n\nnew Vue({\n  el: \"#dynamicexample\",\n  data: function () {\n    return {\n      direction: \"left\"\n    };\n  }\n});\n```\n\n### å‡½æ•°ç®€å†™\n\n> åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä½ å¯èƒ½æƒ³åœ¨ Â `bind`Â  å’Œ Â `update`Â  æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­ã€‚æ¯”å¦‚è¿™æ ·å†™ï¼š\n\n```javascript\nVue.directive(\"color-swatch\", function (el, binding) {\n  el.style.backgroundColor = binding.value;\n});\n```\n\n### å¯¹è±¡å­—é¢é‡\n\n> å¦‚æœæŒ‡ä»¤éœ€è¦å¤šä¸ªå€¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª `JavaScript` å¯¹è±¡å­—é¢é‡ã€‚è®°ä½ï¼ŒæŒ‡ä»¤å‡½æ•°èƒ½å¤Ÿæ¥å—æ‰€æœ‰åˆæ³•çš„ `JavaScript` è¡¨è¾¾å¼ã€‚\n\n```html\n<div v-demo=\"{ color: 'white', text: 'hello!' }\"></div>\n```\n\n```javascript\nVue.directive(\"demo\", function (el, binding) {\n  console.log(binding.value.color); // => \"white\"\n  console.log(binding.value.text); // => \"hello!\"\n});\n```\n\n## 15. vue 3.0 å°é²œ\n\n[ä¸­æ–‡æ–‡æ¡£](https://www.liulongbin.top:8085/)\n","slug":"å‰ç«¯/Vue2 æ–‡æ¡£","published":1,"updated":"2021-04-07T07:23:23.482Z","_id":"ckn7476al002qyx7y8i352o5l","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-çˆ¶å­ç»„ä»¶ä¼ å€¼\"><a href=\"#1-çˆ¶å­ç»„ä»¶ä¼ å€¼\" class=\"headerlink\" title=\"1. çˆ¶å­ç»„ä»¶ä¼ å€¼\"></a>1. çˆ¶å­ç»„ä»¶ä¼ å€¼</h2><ul>\n<li>çˆ¶å­ï¼š <code>props</code></li>\n<li>å­çˆ¶ï¼š <code>this.$emit(&#39;äº‹ä»¶å&#39;, å‚æ•°)</code></li>\n</ul>\n<h2 id=\"2-è·å–-dom-èŠ‚ç‚¹\"><a href=\"#2-è·å–-dom-èŠ‚ç‚¹\" class=\"headerlink\" title=\"2. è·å– dom èŠ‚ç‚¹\"></a>2. è·å– dom èŠ‚ç‚¹</h2><blockquote>\n<p><code>this.$refs</code>ï¼Œ å¯ä»¥è·å–ç»„ä»¶çš„å¼•ç”¨ï¼ŒåŒæ—¶å¯ä»¥è·å–ç»„ä»¶çš„ <code>dataï¼Œmethods</code> ç­‰</p>\n</blockquote>\n<h2 id=\"3-è·¯ç”±\"><a href=\"#3-è·¯ç”±\" class=\"headerlink\" title=\"3. è·¯ç”±\"></a>3. è·¯ç”±</h2><ul>\n<li>åç«¯è·¯ç”±</li>\n</ul>\n<blockquote>\n<p>å¯¹äºæ™®é€šçš„ç½‘ç«™ï¼Œæ‰€æœ‰çš„è¶…é“¾æ¥éƒ½æ˜¯ <code>URL</code> åœ°å€ï¼Œæ‰€æœ‰çš„ <code>URL</code> åœ°å€éƒ½å¯¹åº”æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</p>\n</blockquote>\n<ul>\n<li>å‰ç«¯è·¯ç”±</li>\n</ul>\n<blockquote>\n<p>å¯¹äºå•é¡µé¢åº”ç”¨ç¨‹åºï¼ˆ<code>SPA</code>ï¼‰ï¼Œä¸»è¦é€šè¿‡ <code>URL</code> çš„ <code>hash(#)</code> æ¥å®ç°ä¸åŒé¡µé¢ä¹‹é—´çš„åˆ‡æ¢ï¼›åŒæ—¶ï¼Œ<code>hash</code> æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œ<code>http</code> è¯·æ±‚ä¸­ä¸ä¼šåŒ…å« <code>hash</code> ç›¸å…³çš„å†…å®¹</p>\n</blockquote>\n<h2 id=\"4-å‘½åè§†å›¾-router-view\"><a href=\"#4-å‘½åè§†å›¾-router-view\" class=\"headerlink\" title=\"4. å‘½åè§†å›¾ router-view\"></a>4. å‘½åè§†å›¾ router-view</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class=\"line\">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class=\"line\">    &lt;router-view name&#x3D;&quot;left&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class=\"line\">    &lt;router-view name&#x3D;&quot;main&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">var header &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;div&gt;header&lt;&#x2F;div&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">var leftBox &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;div&gt;left&lt;&#x2F;div&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">var mainBox &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;div&gt;main&lt;&#x2F;div&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var router &#x3D; new VueRouter(&#123;</span><br><span class=\"line\">  routes: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: &quot;&#x2F;&quot;,</span><br><span class=\"line\">      components: &#123;</span><br><span class=\"line\">        default: header,</span><br><span class=\"line\">        left: leftBox,</span><br><span class=\"line\">        main: mainBox</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">var vm &#x3D; new Vue(&#123;</span><br><span class=\"line\">  el: &quot;#app&quot;,</span><br><span class=\"line\">  router</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-watch\"><a href=\"#5-watch\" class=\"headerlink\" title=\"5. watch\"></a>5. watch</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;msg&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">   msg: &#39;&#39;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">watch: &#123;</span><br><span class=\"line\">  msg(newVal, oldVal) &#123;</span><br><span class=\"line\">    console.log(newVal, oldVal)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;$route.path&quot;: (newVal, oldVal) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(newVal, oldVal)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-computed\"><a href=\"#6-computed\" class=\"headerlink\" title=\"6. computed\"></a>6. computed</h2><ul>\n<li>åœ¨ <code>computed</code> ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ï¼ˆè®¡ç®—å±æ€§ï¼‰ï¼›è®¡ç®—å±æ€§çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚åªä¸è¿‡åœ¨æˆ‘ä»¬è¿™äº›è®¡ç®—å±æ€§çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥æŠŠä»–ä»¬çš„åç§°å½“ä½œå±æ€§æ¥ä½¿ç”¨çš„ï¼Œå¹¶ä¸ä¼šæŠŠè®¡ç®—å±æ€§å½“ä½œæ–¹æ³•æ¥è°ƒç”¨ã€‚</li>\n<li>è®¡ç®—å±æ€§çš„æ±‚å€¼ç»“æœï¼Œä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ä½¿ç”¨; å¦‚æœ <code>è®¡ç®—å±æ€§</code> æ–¹æ³•ä¸­ï¼Œæ‰€ä¾èµ–çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°å¯¹ <code>è®¡ç®—å±æ€§</code> è¿›è¡Œæ±‚å€¼</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;firstname&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;lastname&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;fullname&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    firstname: &#39;&#39;,</span><br><span class=\"line\">    lastname: &#39;&#39;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">computed: &#123;</span><br><span class=\"line\">    fullname() &#123;</span><br><span class=\"line\">        return this.firstname + &#39;-&#39; + this.lastname;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-render\"><a href=\"#7-render\" class=\"headerlink\" title=\"7. render\"></a>7. render</h2><ul>\n<li><code>createElements</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨å®ƒï¼Œèƒ½å¤ŸæŠŠæŒ‡å®šçš„ç»„ä»¶æ¨¡æ¿ï¼Œæ¸²æŸ“ä¸º <code>html</code> ç»“æ„</li>\n<li>é€šå¸¸ä¹ æƒ¯æ€§å°† <code>createElements</code> å†™æˆ <code>h</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">var login &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;h1&gt;è¿™æ˜¯ç™»é™†ç»„ä»¶&lt;&#x2F;h1&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm &#x3D; new Vue(&#123;</span><br><span class=\"line\">  el: &quot;#app&quot;,</span><br><span class=\"line\">  data: &#123;&#125;,</span><br><span class=\"line\">  render: function (createElements) &#123;</span><br><span class=\"line\">    return createElements(login);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\"><a href=\"#8-æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\" class=\"headerlink\" title=\"8. æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\"></a>8. æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º</h2><ul>\n<li><code>commenJs</code> å¯¼å…¥å¯¼å‡ºæ¨¡å—</li>\n</ul>\n<blockquote>\n<p>å¯¼å…¥</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> åç§° = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;æ¨¡å—æ ‡è¯†ç¬¦&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å‡º</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>import</code> å¯¼å…¥å¯¼å‡ºæ¨¡å—</li>\n</ul>\n<blockquote>\n<p>å¯¼å…¥</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inport åç§°A <span class=\"keyword\">from</span> <span class=\"string\">&#x27;æ¨¡å—æ ‡è¯†ç¬¦&#x27;</span></span><br><span class=\"line\">inport &#123; åç§°B &#125; <span class=\"string\">&#x27;æ ‡è¯†è·¯å¾„&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å‡º</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> åç§°A</span><br><span class=\"line\"><span class=\"keyword\">export</span> åç§°B</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é‡å‘½å</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> åç§°A <span class=\"keyword\">as</span> newA <span class=\"keyword\">from</span> <span class=\"string\">&#x27;æ¨¡å—æ ‡è¯†ç¬¦&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; åç§°B <span class=\"keyword\">as</span> newB &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;æ ‡ç¤ºè·¯å¾„&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-vuex\"><a href=\"#9-vuex\" class=\"headerlink\" title=\"9. vuex\"></a>9. vuex</h2><h3 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h3><ul>\n<li><code>vuex</code> æ˜¯ <code>vue.js</code> åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ˆçŠ¶æ€å¯ä»¥ç†è§£ä¸ºæ•°æ®ï¼‰ï¼Œå®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ï¼Œç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯æ£€æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–</li>\n</ul>\n<h3 id=\"propsï¼Œdata-å’Œ-vuex-çš„åŒºåˆ«\"><a href=\"#propsï¼Œdata-å’Œ-vuex-çš„åŒºåˆ«\" class=\"headerlink\" title=\"propsï¼Œdata å’Œ vuex çš„åŒºåˆ«\"></a>propsï¼Œdata å’Œ vuex çš„åŒºåˆ«</h3><ul>\n<li><code>props</code>: å­˜æ”¾çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®</li>\n<li><code>data</code>: å­˜æ”¾ç§æœ‰æ•°æ®</li>\n<li><code>vuex</code>: ç»„ä»¶ä¹‹é—´å…±äº«çš„æ•°æ®</li>\n</ul>\n<h3 id=\"stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\"><a href=\"#stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\" class=\"headerlink\" title=\"stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\"></a>stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules</h3><ul>\n<li><code>state</code>ï¼šç±»ä¼¼äº <code>data</code>ï¼Œç”¨æ¥å­˜æ•°æ®</li>\n</ul>\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.state.æ•°æ®a</span><br><span class=\"line\"></span><br><span class=\"line\">...mapState</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mutations</code>ï¼šç±»ä¼¼äº <code>methods</code>ï¼Œå¤„ç†åŒæ­¥æ–¹æ³•</li>\n</ul>\n<blockquote>\n<p>ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mutations: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;METHODS&quot;</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">state, value</span>) </span>&#123;</span><br><span class=\"line\">        state.value = value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.commit(<span class=\"string\">&#x27;æ–¹æ³•å&#x27;</span>, <span class=\"string\">&#x27;å‚æ•°&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...mapMutations</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>actions</code>ï¼šç±»ä¼¼äº <code>methods</code>ï¼Œå¤„ç†å¼‚æ­¥æ–¹æ³•</li>\n</ul>\n<blockquote>\n<p>ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">actions: &#123;</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">methodsAsync</span>(<span class=\"params\">&#123; commit &#125;, value</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> apiMethods()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">                commit(<span class=\"string\">&quot;SET_METHODS&quot;</span>, result.data)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span>(err) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(err);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.dispatch(<span class=\"string\">&#x27;æ–¹æ³•å&#x27;</span>, <span class=\"string\">&#x27;å‚æ•°&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...mapActions</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>getters</code>ï¼šç±»ä¼¼äº <code>computed</code> å’Œ <code>filter</code>ï¼Œå¤„ç†æ•°æ®</li>\n</ul>\n<blockquote>\n<p>ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getters: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">newData</span>(<span class=\"params\">state</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> state.arr.filter(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.id === <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.getters(<span class=\"string\">&#x27;åç§°&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...mapGetters</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-props-ä¼ é€’æ•°æ®æœªæ›´æ–°\"><a href=\"#10-props-ä¼ é€’æ•°æ®æœªæ›´æ–°\" class=\"headerlink\" title=\"10. props ä¼ é€’æ•°æ®æœªæ›´æ–°\"></a>10. props ä¼ é€’æ•°æ®æœªæ›´æ–°</h2><blockquote>\n<p>è§£å†³æ–¹å¼ï¼šä½¿ç”¨ <code>watch</code> ç›‘å¬ <code>props</code></p>\n</blockquote>\n<h2 id=\"11-ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#11-ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"11. ç”Ÿå‘½å‘¨æœŸ\"></a>11. ç”Ÿå‘½å‘¨æœŸ</h2><h3 id=\"beforeCreate\"><a href=\"#beforeCreate\" class=\"headerlink\" title=\"beforeCreate\"></a>beforeCreate</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶ï¼Œç»„ä»¶çš„ <code>data</code> å’Œ <code>methods</code> ä»¥åŠé¡µé¢ <code>DOM</code> ç»“æ„éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–</p>\n</blockquote>\n<h3 id=\"created\"><a href=\"#created\" class=\"headerlink\" title=\"created\"></a>created</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶ï¼Œç»„ä»¶çš„ <code>data</code> å’Œ <code>methods</code> å·²ç»å¯ç”¨äº†ï¼Œä½†æ˜¯é¡µé¢ <code>DOM</code> ç»“æ„è¿˜æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼›ç»å¸¸ç”¨æ¥å‘èµ· <code>ajax</code> è¯·æ±‚<br>æ³¨æ„ï¼Œåœ¨ <code>ssr</code> æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼Œåœ¨æ­¤å¤„å‘èµ· <code>ajax</code> è¯·æ±‚ä¼šæœ‰é—®é¢˜ï¼Œæ¨èåœ¨ <code>mounted</code> ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ¥å‘èµ· <code>ajax</code> è¯·æ±‚ã€‚</p>\n</blockquote>\n<h3 id=\"beforeMount\"><a href=\"#beforeMount\" class=\"headerlink\" title=\"beforeMount\"></a>beforeMount</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶å†…å­˜ä¸­çš„æ¨¡æ¿ç»“æ„è¿˜æ²¡æœ‰<em>çœŸæ­£æ¸²æŸ“åˆ°é¡µé¢ä¸Š</em>ï¼›æ­¤æ—¶ï¼Œé¡µé¢ä¸Š<em>çœ‹ä¸åˆ°çœŸå®çš„æ•°æ®</em>ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢</p>\n</blockquote>\n<h3 id=\"Mounted\"><a href=\"#Mounted\" class=\"headerlink\" title=\"Mounted\"></a>Mounted</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶æŒ‚è½½å®Œæ¯•ï¼Œå¯åˆå§‹åŒ–æ’ä»¶</p>\n</blockquote>\n<h3 id=\"beforeUpdate\"><a href=\"#beforeUpdate\" class=\"headerlink\" title=\"beforeUpdate\"></a>beforeUpdate</h3><blockquote>\n<p>_æ•°æ®è‚¯å®šæ˜¯æœ€æ–°çš„_ï¼Œç„¶è€Œ<em>é¡µé¢å‘ˆç°çš„æ•°æ®è¿˜æ˜¯æ—§çš„</em></p>\n</blockquote>\n<h3 id=\"updated\"><a href=\"#updated\" class=\"headerlink\" title=\"updated\"></a>updated</h3><blockquote>\n<p>é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ã€‚æ­¤æ—¶ï¼Œ<code>data</code> å’Œ <code>view</code> ä¸Šéƒ½æ˜¯æœ€æ–°çš„æ•°æ®</p>\n</blockquote>\n<h3 id=\"beforeDestroy\"><a href=\"#beforeDestroy\" class=\"headerlink\" title=\"beforeDestroy\"></a>beforeDestroy</h3><ul>\n<li>ç»„ä»¶é”€æ¯é˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶æ²¡æœ‰çœŸæ­£å¼€å§‹é”€æ¯ï¼Œç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚åŒæ—¶ï¼Œ<code>data</code> ã€<code>methods</code> ç­‰æ•°æ®æˆ–æ–¹æ³•ï¼Œä¾ç„¶å¯ä»¥è¢«æ­£å¸¸è®¿é—®ï¼›</p>\n</blockquote>\n<h3 id=\"destroyed\"><a href=\"#destroyed\" class=\"headerlink\" title=\"destroyed\"></a>destroyed</h3><ul>\n<li>ç»„ä»¶é”€æ¯é˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯.<code>data</code> å’Œ <code>methods</code> éƒ½ä¸å¯ç”¨äº†</p>\n</blockquote>\n<h2 id=\"12-vue-ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\"><a href=\"#12-vue-ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\" class=\"headerlink\" title=\"12 Â vue ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\"></a>12 Â vue ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹</h2><table>\n<thead>\n<tr>\n<th>è¡Œä¸º</th>\n<th>æŒ‡å‘</th>\n<th>ä½œç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>new Vue()</code></td>\n<td>â¡ï¸</td>\n<td>å®ä¾‹åŒ– <code>Vue</code> å¯¹è±¡</td>\n</tr>\n<tr>\n<td><code>Init Events &amp; Lifecycle</code></td>\n<td>â¡ï¸</td>\n<td>åˆå§‹åŒ–ç»„ä»¶ <code>methods</code> å’Œ <code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</code></td>\n</tr>\n<tr>\n<td><code>beforeCreate</code></td>\n<td>â¡ï¸</td>\n<td><code>data</code>ï¼Œ<code>methods</code> æœªè¢«åˆå§‹åŒ–</td>\n</tr>\n<tr>\n<td><code>Init injections &amp; reactivity</code></td>\n<td>â¡ï¸</td>\n<td>æ­£åœ¨åˆå§‹åŒ– <code>data</code> å’Œ <code>methods</code> ä¸­çš„æ•°æ®ä»¥åŠæ–¹æ³•</td>\n</tr>\n<tr>\n<td><code>created</code></td>\n<td>â¡ï¸</td>\n<td><code>data</code>ï¼Œ<code>methods</code> å¯ç”¨ï¼Œä½† <code>Dom</code> ç»“æ„è¿˜æœªè¢«æ¸²æŸ“ï¼Œå¸¸å‘èµ· <code>ajax</code> è¯·æ±‚</td>\n</tr>\n<tr>\n<td>â¬‡ï¸</td>\n<td>â¡ï¸</td>\n<td>åˆ¤æ–­æ˜¯å¦æœ‰ <code>el</code>ï¼Œ<code>template</code> å±æ€§</td>\n</tr>\n<tr>\n<td>â¬‡ï¸</td>\n<td>â¡ï¸</td>\n<td>ç”¨æ¥ç¼–è¯‘æ¨¡ç‰ˆç»“æ„ï¼Œå½“æ‰€æœ‰æŒ‡ä»¤è§£æå®Œæ¯•ï¼Œåˆ™<code>æ¨¡æ¿é¡µé¢å°±è¢«æ¸²æŸ“åˆ°å†…å­˜ä¸­äº†</code>ï¼›å½“æ¨¡æ¿ç¼–è¯‘å®Œæˆï¼Œæ¨¡æ¿é¡µé¢è¿˜æ²¡æœ‰æŒ‚åœ¨åˆ°é¡µé¢ä¸Šï¼Œåªæ˜¯å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç”¨æˆ·çœ‹ä¸åˆ°é¡µé¢ï¼›</td>\n</tr>\n<tr>\n<td><code>beforeMount</code></td>\n<td>â¡ï¸</td>\n<td>æ­¤æ—¶ï¼Œé¡µé¢ä¸Šçœ‹ä¸åˆ° <code>çœŸå®æ•°æ®</code>ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢</td>\n</tr>\n<tr>\n<td><code>Create vm.$el and replace &quot;el&quot; with it</code></td>\n<td>â¡ï¸</td>\n<td>æ­£åœ¨æŠŠå†…å­˜ä¸­æ¸²æŸ“å¥½çš„æ¨¡æ¿ç»“æ„æ›¿æ¢åˆ°é¡µé¢ä¸Š</td>\n</tr>\n<tr>\n<td><code>mounted</code></td>\n<td>â¡ï¸</td>\n<td>æ­¤æ—¶ï¼Œé¡µé¢æ¸²æŸ“å®Œæ¯•</td>\n</tr>\n<tr>\n<td>â¬‡ï¸(ç»„ä»¶è¿è¡Œä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°)</td>\n<td>â¡ï¸</td>\n<td>ä¼šæ ¹æ® <code>data</code> æ•°æ®çš„å˜åŒ–ï¼Œæœ‰é€‰æ‹©è¡Œçš„è§¦å‘ <code>0</code>æ¬¡ æˆ– <code>n</code>æ¬¡</td>\n</tr>\n<tr>\n<td><code>beforeUpdate</code></td>\n<td>â¡ï¸</td>\n<td>æ•°æ®æ˜¯æ–°çš„ï¼Œä½†é¡µé¢å‘ˆç°çš„æ•°æ®ä»æ˜¯æ—§çš„</td>\n</tr>\n<tr>\n<td><code>updated</code></td>\n<td>â¡ï¸</td>\n<td>é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œæ­¤æ—¶ï¼Œæ•°æ®æ˜¯æœ€æ–°çš„ï¼ŒåŒæ—¶é¡µé¢ä¸Šå‘ˆç°çš„æ•°æ®ä¹Ÿæ˜¯æœ€æ–°çš„</td>\n</tr>\n<tr>\n<td>â¬‡ï¸(é”€æ¯é˜¶æ®µ)</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td><code>beforeDestroy</code></td>\n<td>â¡ï¸</td>\n<td>ç»„ä»¶å³å°†è¢«é”€æ¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰çœŸ æ­£å¼€å§‹é”€æ¯ï¼Œæ­¤æ—¶ç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚<code>data</code>ï¼Œ<code>methods</code> ä»å¯æ­£å¸¸è®¿é—®</td>\n</tr>\n<tr>\n<td><code>Teardown watchers,child components and event listeners</code>(é”€æ¯è¿‡ç¨‹)</td>\n<td>â¡ï¸</td>\n<td></td>\n</tr>\n<tr>\n<td><code>destroyed</code></td>\n<td>â¡ï¸</td>\n<td>ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯ï¼Œç»„ä»¶å·²ç»åºŸäº†ï¼Œ<code>data</code> å’Œ <code>methods</code> éƒ½ä¸å¯ç”¨äº†</td>\n</tr>\n</tbody></table>\n<h2 id=\"13-keep-alive\"><a href=\"#13-keep-alive\" class=\"headerlink\" title=\"13. keep-alive\"></a>13. keep-alive</h2><h3 id=\"æ–°å¢ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#æ–°å¢ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"æ–°å¢ç”Ÿå‘½å‘¨æœŸ\"></a>æ–°å¢ç”Ÿå‘½å‘¨æœŸ</h3><blockquote>\n<p>è¢«åŒ…å«åœ¨ Â <code>&lt;keep-alive&gt;</code>Â  ä¸­åˆ›å»ºçš„ç»„ä»¶ï¼Œä¼šå¤šä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ:Â <code>activated</code>Â  ä¸ Â <code>deactivated</code></p>\n</blockquote>\n<ul>\n<li>actived</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨ï¼Œåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼Œä¹‹åæ¯æ¬¡ <code>keep-alive</code> æ¿€æ´»æ—¶è¢«è°ƒç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>deactivated</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶è¢«åœç”¨æ—¶è°ƒç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"æ–°å¢å±æ€§\"><a href=\"#æ–°å¢å±æ€§\" class=\"headerlink\" title=\"æ–°å¢å±æ€§\"></a>æ–°å¢å±æ€§</h3><ul>\n<li>include</li>\n</ul>\n<blockquote>\n<p>åŒ…å«çš„ç»„ä»¶ç¼“å­˜ç”Ÿæ•ˆã€‚å¯¹åº” <code>.vue</code> æ–‡ä»¶çš„ <code>name</code> å±æ€§</p>\n</blockquote>\n<ul>\n<li>exclude</li>\n</ul>\n<blockquote>\n<p>æ’é™¤çš„ç»„ä»¶ä¸ç¼“å­˜ï¼Œä¼˜å…ˆçº§å¤§äº <code>include</code>ã€‚å¯¹åº” <code>.vue</code> æ–‡ä»¶çš„ <code>name</code> å±æ€§</p>\n</blockquote>\n<h2 id=\"14-nextTick\"><a href=\"#14-nextTick\" class=\"headerlink\" title=\"14. nextTick\"></a>14. <code>nextTick</code></h2><h3 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h3><blockquote>\n<p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜ <code>Vue</code> æ˜¯å¼‚æ­¥æ‰§è¡Œ <code>DOM</code> æ›´æ–°çš„ï¼Œæ‰€ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†æ‰å¯æ­£å¸¸æ‰§è¡ŒæŸäº›é€»è¾‘ã€‚</p>\n</blockquote>\n<h3 id=\"åº”ç”¨åœºæ™¯\"><a href=\"#åº”ç”¨åœºæ™¯\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯\"></a>åº”ç”¨åœºæ™¯</h3><ul>\n<li>åœ¨ <code>Vue</code> ç”Ÿå‘½å‘¨æœŸçš„ <code>created()</code> é’©å­å‡½æ•°è¿›è¡Œçš„ <code>DOM</code> æ“ä½œä¸€å®šè¦æ”¾åœ¨ <code>Vue.nextTick()</code> çš„å›è°ƒå‡½æ•°ä¸­</li>\n</ul>\n<blockquote>\n<p>åŸå› : åœ¨ <code>created()</code> é’©å­å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ <code>DOM</code> å…¶å®å¹¶æœªè¿›è¡Œä»»ä½•æ¸²æŸ“ï¼Œè€Œæ­¤æ—¶è¿›è¡Œ <code>DOM</code> æ“ä½œæ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ä¸€å®šè¦å°†æ“ä½œ <code>Dom</code> éƒ¨åˆ†çš„ä»£ç æ”¾å…¥ <code>Vue.nextTick()</code> çš„å›è°ƒå‡½æ•°ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ <code>mounted()</code> é’©å­å‡½æ•°ï¼Œå› ä¸ºè¯¥é’©å­å‡½æ•°æ‰§è¡Œæ—¶æ‰€æœ‰çš„<code>DOM</code> æŒ‚è½½å’Œæ¸²æŸ“éƒ½å·²å®Œæˆï¼Œæ­¤æ—¶åœ¨è¯¥é’©å­å‡½æ•°ä¸­è¿›è¡Œä»»ä½• <code>DOM</code> æ“ä½œéƒ½ä¸ä¼šæœ‰é—®é¢˜ ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨æ•°æ®å˜åŒ–åè¦æ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®æ”¹å˜è€Œæ”¹å˜çš„ <code>DOM</code> ç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œéƒ½åº”è¯¥æ”¾è¿› <code>Vue.nextTick()</code> çš„å›è°ƒå‡½æ•°ä¸­ã€‚</li>\n</ul>\n<h3 id=\"nextTick-æºç æµ…æ\"><a href=\"#nextTick-æºç æµ…æ\" class=\"headerlink\" title=\"nextTick æºç æµ…æ\"></a>nextTick æºç æµ…æ</h3><blockquote>\n<p><code>Vue.nextTick</code> ç”¨äºå»¶è¿Ÿæ‰§è¡Œä¸€æ®µä»£ç ï¼Œå®ƒæ¥å— <code>2</code> ä¸ªå‚æ•°ï¼ˆ <code>å›è°ƒå‡½æ•°</code> å’Œ <code>æ‰§è¡Œå›è°ƒå‡½æ•°çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</code>ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æä¾›å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°†è¿”å› <code>promise</code> å¯¹è±¡ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸»è¦çš„å®ç°æ–¹å¼ä¸ºåˆ¤æ–­è®¾å¤‡æ‰€æ”¯æŒçš„ä¸‰ç§å±æ€§ï¼Œä¾æ®å„è‡ªæ”¯æŒçš„å±æ€§æ¥è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚å¦‚æœæ”¯æŒ <code>promise</code>ï¼Œä¼šä½¿ç”¨ <code>Promise.then</code> æ¥åšå»¶è¿Ÿè°ƒç”¨å‡½æ•°ã€‚å¦‚æœè®¾å¤‡ä¸æ”¯æŒ <code>Promise</code> å¯¹è±¡ï¼Œå†åˆ¤æ–­æ˜¯å¦æ”¯æŒ <code>MutationObserver</code> å¯¹è±¡ï¼Œå¦‚æœæ”¯æŒè¯¥å¯¹è±¡ï¼Œå°±ä½¿ç”¨<code>MutationObserver</code> æ¥åšå»¶è¿Ÿï¼Œæœ€åå¦‚æœä¸Šé¢ä¸¤ç§éƒ½ä¸æ”¯æŒçš„è¯ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>setTimeout</code> æ¥åšå»¶è¿Ÿæ“ä½œã€‚</p>\n</blockquote>\n<h2 id=\"15-è‡ªå®šä¹‰æŒ‡ä»¤\"><a href=\"#15-è‡ªå®šä¹‰æŒ‡ä»¤\" class=\"headerlink\" title=\"15. è‡ªå®šä¹‰æŒ‡ä»¤\"></a>15. è‡ªå®šä¹‰æŒ‡ä»¤</h2><h3 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h3><blockquote>\n<p>é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ ( <code>v-model</code>Â  å’Œ Â <code>v-show</code>)ï¼Œ <code>Vue</code>Â  ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼Œåœ¨ <code>Vue2.0</code> ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š <code>DOM</code>Â  å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹</li>\n</ul>\n<blockquote>\n<p>å½“é¡µé¢åŠ è½½æ—¶ï¼Œè¯¥å…ƒç´ å°†è·å¾—ç„¦ç‚¹ (æ³¨æ„ï¼š <code>autofocus</code>Â  åœ¨ç§»åŠ¨ç‰ˆ <code>Safari</code>Â  ä¸Šä¸å·¥ä½œ)ã€‚äº‹å®ä¸Šï¼Œåªè¦ä½ åœ¨æ‰“å¼€è¿™ä¸ªé¡µé¢åè¿˜æ²¡ç‚¹å‡»è¿‡ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªè¾“å…¥æ¡†å°±åº”å½“è¿˜æ˜¯å¤„äºèšç„¦çŠ¶æ€ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨æŒ‡ä»¤æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ `v-focus`</span></span><br><span class=\"line\">Vue.directive(<span class=\"string\">&quot;focus&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"comment\">// å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦</span></span><br><span class=\"line\">  inserted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// èšç„¦å…ƒç´ </span></span><br><span class=\"line\">    el.focus();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæƒ³æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ï¼Œç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª <code>directives</code>Â  çš„é€‰é¡¹ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">directives: &#123;</span><br><span class=\"line\">  focus: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‡ä»¤çš„å®šä¹‰</span></span><br><span class=\"line\">    inserted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</span><br><span class=\"line\">      el.focus()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç„¶åä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä»»ä½•å…ƒç´ ä¸Šä½¿ç”¨æ–°çš„ Â <code>v-focus</code>Â Â  <code>property</code>ï¼Œå¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-focus</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é’©å­å‡½æ•°\"><a href=\"#é’©å­å‡½æ•°\" class=\"headerlink\" title=\"é’©å­å‡½æ•°\"></a>é’©å­å‡½æ•°</h3><blockquote>\n<p>ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š</p>\n</blockquote>\n<ul>\n<li><code>bind</code>ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚</li>\n<li><code>inserted</code>ï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚</li>\n<li><code>update</code>ï¼šæ‰€åœ¨ç»„ä»¶çš„ <code>VNode</code> æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ <code>VNode</code> æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚</li>\n<li><code>componentUpdated</code>ï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ <code>VNode</code> åŠå…¶å­ <code>VNode</code> å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚</li>\n<li><code>unbind</code>ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚</li>\n</ul>\n<blockquote>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é’©å­å‡½æ•°çš„å‚æ•° (å³ elã€bindingã€vnode å’Œ oldVnode)ã€‚</p>\n</blockquote>\n<h3 id=\"é’©å­å‡½æ•°å‚æ•°\"><a href=\"#é’©å­å‡½æ•°å‚æ•°\" class=\"headerlink\" title=\"é’©å­å‡½æ•°å‚æ•°\"></a>é’©å­å‡½æ•°å‚æ•°</h3><blockquote>\n<p>æŒ‡ä»¤é’©å­å‡½æ•°ä¼šè¢«ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š</p>\n</blockquote>\n<ul>\n<li><code>el</code>ï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ <code>DOM</code>ã€‚</li>\n<li><code>binding</code>ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ <code>property</code>ï¼š<ul>\n<li><code>name</code>ï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ <code>v-</code> å‰ç¼€ã€‚</li>\n<li><code>value</code>ï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š<code>v-my-directive=&quot;1 + 1&quot;</code> ä¸­ï¼Œç»‘å®šå€¼ä¸º <code>2</code>ã€‚</li>\n<li><code>oldValue</code>ï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚</li>\n<li><code>expression</code>ï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ <code>v-my-directive=&quot;1 + 1&quot;</code> ä¸­ï¼Œè¡¨è¾¾å¼ä¸º <code>&quot;1 + 1&quot;</code>ã€‚</li>\n<li><code>arg</code>ï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ <code>v-my-directive:foo</code> ä¸­ï¼Œå‚æ•°ä¸º <code>&quot;foo&quot;</code>ã€‚</li>\n<li><code>modifiers</code>ï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š<code>v-my-directive.foo.bar</code> ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º <code>&#123; foo: true, bar: true &#125;</code>ã€‚</li>\n</ul>\n</li>\n<li><code>vnode</code>ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ <a href=\"https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3\">VNode API</a> æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚</li>\n<li><code>oldVnode</code>ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚</li>\n</ul>\n<blockquote>\n<p>é™¤äº† Â <code>el</code>Â  ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset\"><code>dataset</code></a>Â  æ¥è¿›è¡Œã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;hook-arguments-example&quot;</span> <span class=\"attr\">v-demo:foo.a.b</span>=<span class=\"string\">&quot;message&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;demo&quot;</span>, &#123;</span><br><span class=\"line\">  bind: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding, vnode</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = <span class=\"built_in\">JSON</span>.stringify;</span><br><span class=\"line\">    el.innerHTML =</span><br><span class=\"line\">      <span class=\"string\">&quot;name: &quot;</span> +</span><br><span class=\"line\">      s(binding.name) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;value: &quot;</span> +</span><br><span class=\"line\">      s(binding.value) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;expression: &quot;</span> +</span><br><span class=\"line\">      s(binding.expression) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;argument: &quot;</span> +</span><br><span class=\"line\">      s(binding.arg) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;modifiers: &quot;</span> +</span><br><span class=\"line\">      s(binding.modifiers) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;vnode keys: &quot;</span> +</span><br><span class=\"line\">      <span class=\"built_in\">Object</span>.keys(vnode).join(<span class=\"string\">&quot;, &quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">  el: <span class=\"string\">&quot;#hook-arguments-example&quot;</span>,</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    message: <span class=\"string\">&quot;hello!&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŠ¨æ€æŒ‡ä»¤å‚æ•°\"><a href=\"#åŠ¨æ€æŒ‡ä»¤å‚æ•°\" class=\"headerlink\" title=\"åŠ¨æ€æŒ‡ä»¤å‚æ•°\"></a>åŠ¨æ€æŒ‡ä»¤å‚æ•°</h3><blockquote>\n<p>æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>v-mydirective:[argument]=&quot;value&quot;</code> ä¸­ï¼Œ<code>argument</code> å‚æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹æ•°æ®è¿›è¡Œæ›´æ–°ï¼è¿™ä½¿å¾—è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åœ¨åº”ç”¨ä¸­è¢«çµæ´»ä½¿ç”¨ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¾‹å¦‚ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨æ¥é€šè¿‡å›ºå®šå¸ƒå±€å°†å…ƒç´ å›ºå®šåœ¨é¡µé¢ä¸Šã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªé€šè¿‡æŒ‡ä»¤å€¼æ¥æ›´æ–°ç«–ç›´ä½ç½®åƒç´ å€¼çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;baseexample&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Scroll down the page<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">v-pin</span>=<span class=\"string\">&quot;200&quot;</span>&gt;</span>Stick me 200px from the top of the page<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;pin&quot;</span>, &#123;</span><br><span class=\"line\">  bind: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding, vnode</span>) </span>&#123;</span><br><span class=\"line\">    el.style.position = <span class=\"string\">&quot;fixed&quot;</span>;</span><br><span class=\"line\">    el.style.top = binding.value + <span class=\"string\">&quot;px&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">  el: <span class=\"string\">&quot;#baseexample&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¼šæŠŠè¯¥å…ƒç´ å›ºå®šåœ¨è·ç¦»é¡µé¢é¡¶éƒ¨ 200 åƒç´ çš„ä½ç½®ã€‚ä½†å¦‚æœåœºæ™¯æ˜¯æˆ‘ä»¬éœ€è¦æŠŠå…ƒç´ å›ºå®šåœ¨å·¦ä¾§è€Œä¸æ˜¯é¡¶éƒ¨åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶ä½¿ç”¨åŠ¨æ€å‚æ•°å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ ¹æ®æ¯ä¸ªç»„ä»¶å®ä¾‹æ¥è¿›è¡Œæ›´æ–°ã€‚</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dynamicexample&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>Scroll down inside this section â†“<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">v-pin:</span>[<span class=\"attr\">direction</span>]=<span class=\"string\">&quot;200&quot;</span>&gt;</span>I am pinned onto the page at 200px to the left.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;pin&quot;</span>, &#123;</span><br><span class=\"line\">  bind: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding, vnode</span>) </span>&#123;</span><br><span class=\"line\">    el.style.position = <span class=\"string\">&quot;fixed&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = binding.arg == <span class=\"string\">&quot;left&quot;</span> ? <span class=\"string\">&quot;left&quot;</span> : <span class=\"string\">&quot;top&quot;</span>;</span><br><span class=\"line\">    el.style[s] = binding.value + <span class=\"string\">&quot;px&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">  el: <span class=\"string\">&quot;#dynamicexample&quot;</span>,</span><br><span class=\"line\">  data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      direction: <span class=\"string\">&quot;left&quot;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å‡½æ•°ç®€å†™\"><a href=\"#å‡½æ•°ç®€å†™\" class=\"headerlink\" title=\"å‡½æ•°ç®€å†™\"></a>å‡½æ•°ç®€å†™</h3><blockquote>\n<p>åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä½ å¯èƒ½æƒ³åœ¨ Â <code>bind</code>Â  å’Œ Â <code>update</code>Â  æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­ã€‚æ¯”å¦‚è¿™æ ·å†™ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;color-swatch&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding</span>) </span>&#123;</span><br><span class=\"line\">  el.style.backgroundColor = binding.value;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯¹è±¡å­—é¢é‡\"><a href=\"#å¯¹è±¡å­—é¢é‡\" class=\"headerlink\" title=\"å¯¹è±¡å­—é¢é‡\"></a>å¯¹è±¡å­—é¢é‡</h3><blockquote>\n<p>å¦‚æœæŒ‡ä»¤éœ€è¦å¤šä¸ªå€¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>JavaScript</code> å¯¹è±¡å­—é¢é‡ã€‚è®°ä½ï¼ŒæŒ‡ä»¤å‡½æ•°èƒ½å¤Ÿæ¥å—æ‰€æœ‰åˆæ³•çš„ <code>JavaScript</code> è¡¨è¾¾å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-demo</span>=<span class=\"string\">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;demo&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(binding.value.color); <span class=\"comment\">// =&gt; &quot;white&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(binding.value.text); <span class=\"comment\">// =&gt; &quot;hello!&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"15-vue-3-0-å°é²œ\"><a href=\"#15-vue-3-0-å°é²œ\" class=\"headerlink\" title=\"15. vue 3.0 å°é²œ\"></a>15. vue 3.0 å°é²œ</h2><p><a href=\"https://www.liulongbin.top:8085/\">ä¸­æ–‡æ–‡æ¡£</a></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-çˆ¶å­ç»„ä»¶ä¼ å€¼\"><a href=\"#1-çˆ¶å­ç»„ä»¶ä¼ å€¼\" class=\"headerlink\" title=\"1. çˆ¶å­ç»„ä»¶ä¼ å€¼\"></a>1. çˆ¶å­ç»„ä»¶ä¼ å€¼</h2><ul>\n<li>çˆ¶å­ï¼š <code>props</code></li>\n<li>å­çˆ¶ï¼š <code>this.$emit(&#39;äº‹ä»¶å&#39;, å‚æ•°)</code></li>\n</ul>\n<h2 id=\"2-è·å–-dom-èŠ‚ç‚¹\"><a href=\"#2-è·å–-dom-èŠ‚ç‚¹\" class=\"headerlink\" title=\"2. è·å– dom èŠ‚ç‚¹\"></a>2. è·å– dom èŠ‚ç‚¹</h2><blockquote>\n<p><code>this.$refs</code>ï¼Œ å¯ä»¥è·å–ç»„ä»¶çš„å¼•ç”¨ï¼ŒåŒæ—¶å¯ä»¥è·å–ç»„ä»¶çš„ <code>dataï¼Œmethods</code> ç­‰</p>\n</blockquote>\n<h2 id=\"3-è·¯ç”±\"><a href=\"#3-è·¯ç”±\" class=\"headerlink\" title=\"3. è·¯ç”±\"></a>3. è·¯ç”±</h2><ul>\n<li>åç«¯è·¯ç”±</li>\n</ul>\n<blockquote>\n<p>å¯¹äºæ™®é€šçš„ç½‘ç«™ï¼Œæ‰€æœ‰çš„è¶…é“¾æ¥éƒ½æ˜¯ <code>URL</code> åœ°å€ï¼Œæ‰€æœ‰çš„ <code>URL</code> åœ°å€éƒ½å¯¹åº”æœåŠ¡å™¨ä¸Šçš„èµ„æºã€‚</p>\n</blockquote>\n<ul>\n<li>å‰ç«¯è·¯ç”±</li>\n</ul>\n<blockquote>\n<p>å¯¹äºå•é¡µé¢åº”ç”¨ç¨‹åºï¼ˆ<code>SPA</code>ï¼‰ï¼Œä¸»è¦é€šè¿‡ <code>URL</code> çš„ <code>hash(#)</code> æ¥å®ç°ä¸åŒé¡µé¢ä¹‹é—´çš„åˆ‡æ¢ï¼›åŒæ—¶ï¼Œ<code>hash</code> æœ‰ä¸€ä¸ªç‰¹ç‚¹ï¼Œ<code>http</code> è¯·æ±‚ä¸­ä¸ä¼šåŒ…å« <code>hash</code> ç›¸å…³çš„å†…å®¹</p>\n</blockquote>\n<h2 id=\"4-å‘½åè§†å›¾-router-view\"><a href=\"#4-å‘½åè§†å›¾-router-view\" class=\"headerlink\" title=\"4. å‘½åè§†å›¾ router-view\"></a>4. å‘½åè§†å›¾ router-view</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class=\"line\">    &lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br><span class=\"line\">    &lt;router-view name&#x3D;&quot;left&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class=\"line\">    &lt;router-view name&#x3D;&quot;main&quot;&gt;&lt;&#x2F;router-view&gt;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">var header &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;div&gt;header&lt;&#x2F;div&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">var leftBox &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;div&gt;left&lt;&#x2F;div&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">var mainBox &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;div&gt;main&lt;&#x2F;div&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var router &#x3D; new VueRouter(&#123;</span><br><span class=\"line\">  routes: [</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      path: &quot;&#x2F;&quot;,</span><br><span class=\"line\">      components: &#123;</span><br><span class=\"line\">        default: header,</span><br><span class=\"line\">        left: leftBox,</span><br><span class=\"line\">        main: mainBox</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">var vm &#x3D; new Vue(&#123;</span><br><span class=\"line\">  el: &quot;#app&quot;,</span><br><span class=\"line\">  router</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"5-watch\"><a href=\"#5-watch\" class=\"headerlink\" title=\"5. watch\"></a>5. watch</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;msg&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">   msg: &#39;&#39;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">watch: &#123;</span><br><span class=\"line\">  msg(newVal, oldVal) &#123;</span><br><span class=\"line\">    console.log(newVal, oldVal)</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &quot;$route.path&quot;: (newVal, oldVal) &#x3D;&gt; &#123;</span><br><span class=\"line\">    console.log(newVal, oldVal)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-computed\"><a href=\"#6-computed\" class=\"headerlink\" title=\"6. computed\"></a>6. computed</h2><ul>\n<li>åœ¨ <code>computed</code> ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å±æ€§ï¼ˆè®¡ç®—å±æ€§ï¼‰ï¼›è®¡ç®—å±æ€§çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚åªä¸è¿‡åœ¨æˆ‘ä»¬è¿™äº›è®¡ç®—å±æ€§çš„æ—¶å€™ï¼Œæ˜¯ç›´æ¥æŠŠä»–ä»¬çš„åç§°å½“ä½œå±æ€§æ¥ä½¿ç”¨çš„ï¼Œå¹¶ä¸ä¼šæŠŠè®¡ç®—å±æ€§å½“ä½œæ–¹æ³•æ¥è°ƒç”¨ã€‚</li>\n<li>è®¡ç®—å±æ€§çš„æ±‚å€¼ç»“æœï¼Œä¼šè¢«ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ç›´æ¥ä½¿ç”¨; å¦‚æœ <code>è®¡ç®—å±æ€§</code> æ–¹æ³•ä¸­ï¼Œæ‰€ä¾èµ–çš„æ‰€æœ‰æ•°æ®ï¼Œéƒ½æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä¸ä¼šé‡æ–°å¯¹ <code>è®¡ç®—å±æ€§</code> è¿›è¡Œæ±‚å€¼</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;template&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;firstname&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;lastname&quot; &#x2F;&gt;</span><br><span class=\"line\">  &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;fullname&quot; &#x2F;&gt;</span><br><span class=\"line\">&lt;&#x2F;template&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">data: &#123;</span><br><span class=\"line\">    firstname: &#39;&#39;,</span><br><span class=\"line\">    lastname: &#39;&#39;</span><br><span class=\"line\">&#125;,</span><br><span class=\"line\">computed: &#123;</span><br><span class=\"line\">    fullname() &#123;</span><br><span class=\"line\">        return this.firstname + &#39;-&#39; + this.lastname;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-render\"><a href=\"#7-render\" class=\"headerlink\" title=\"7. render\"></a>7. render</h2><ul>\n<li><code>createElements</code> æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨å®ƒï¼Œèƒ½å¤ŸæŠŠæŒ‡å®šçš„ç»„ä»¶æ¨¡æ¿ï¼Œæ¸²æŸ“ä¸º <code>html</code> ç»“æ„</li>\n<li>é€šå¸¸ä¹ æƒ¯æ€§å°† <code>createElements</code> å†™æˆ <code>h</code></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">var login &#x3D; &#123;</span><br><span class=\"line\">  template: &quot;&lt;h1&gt;è¿™æ˜¯ç™»é™†ç»„ä»¶&lt;&#x2F;h1&gt;&quot;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">var vm &#x3D; new Vue(&#123;</span><br><span class=\"line\">  el: &quot;#app&quot;,</span><br><span class=\"line\">  data: &#123;&#125;,</span><br><span class=\"line\">  render: function (createElements) &#123;</span><br><span class=\"line\">    return createElements(login);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\"><a href=\"#8-æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\" class=\"headerlink\" title=\"8. æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º\"></a>8. æ¨¡å—çš„å¯¼å…¥ä¸å¯¼å‡º</h2><ul>\n<li><code>commenJs</code> å¯¼å…¥å¯¼å‡ºæ¨¡å—</li>\n</ul>\n<blockquote>\n<p>å¯¼å…¥</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> åç§° = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;æ¨¡å—æ ‡è¯†ç¬¦&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å‡º</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>import</code> å¯¼å…¥å¯¼å‡ºæ¨¡å—</li>\n</ul>\n<blockquote>\n<p>å¯¼å…¥</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">inport åç§°A <span class=\"keyword\">from</span> <span class=\"string\">&#x27;æ¨¡å—æ ‡è¯†ç¬¦&#x27;</span></span><br><span class=\"line\">inport &#123; åç§°B &#125; <span class=\"string\">&#x27;æ ‡è¯†è·¯å¾„&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å‡º</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> åç§°A</span><br><span class=\"line\"><span class=\"keyword\">export</span> åç§°B</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é‡å‘½å</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> åç§°A <span class=\"keyword\">as</span> newA <span class=\"keyword\">from</span> <span class=\"string\">&#x27;æ¨¡å—æ ‡è¯†ç¬¦&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; åç§°B <span class=\"keyword\">as</span> newB &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;æ ‡ç¤ºè·¯å¾„&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-vuex\"><a href=\"#9-vuex\" class=\"headerlink\" title=\"9. vuex\"></a>9. vuex</h2><h3 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h3><ul>\n<li><code>vuex</code> æ˜¯ <code>vue.js</code> åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼ˆçŠ¶æ€å¯ä»¥ç†è§£ä¸ºæ•°æ®ï¼‰ï¼Œå®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ï¼Œç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯æ£€æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–</li>\n</ul>\n<h3 id=\"propsï¼Œdata-å’Œ-vuex-çš„åŒºåˆ«\"><a href=\"#propsï¼Œdata-å’Œ-vuex-çš„åŒºåˆ«\" class=\"headerlink\" title=\"propsï¼Œdata å’Œ vuex çš„åŒºåˆ«\"></a>propsï¼Œdata å’Œ vuex çš„åŒºåˆ«</h3><ul>\n<li><code>props</code>: å­˜æ”¾çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®</li>\n<li><code>data</code>: å­˜æ”¾ç§æœ‰æ•°æ®</li>\n<li><code>vuex</code>: ç»„ä»¶ä¹‹é—´å…±äº«çš„æ•°æ®</li>\n</ul>\n<h3 id=\"stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\"><a href=\"#stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\" class=\"headerlink\" title=\"stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules\"></a>stateï¼Œmutationsï¼Œactionsï¼Œgettersï¼Œmodules</h3><ul>\n<li><code>state</code>ï¼šç±»ä¼¼äº <code>data</code>ï¼Œç”¨æ¥å­˜æ•°æ®</li>\n</ul>\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.state.æ•°æ®a</span><br><span class=\"line\"></span><br><span class=\"line\">...mapState</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mutations</code>ï¼šç±»ä¼¼äº <code>methods</code>ï¼Œå¤„ç†åŒæ­¥æ–¹æ³•</li>\n</ul>\n<blockquote>\n<p>ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mutations: &#123;</span><br><span class=\"line\">    <span class=\"string\">&quot;METHODS&quot;</span>: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">state, value</span>) </span>&#123;</span><br><span class=\"line\">        state.value = value;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.commit(<span class=\"string\">&#x27;æ–¹æ³•å&#x27;</span>, <span class=\"string\">&#x27;å‚æ•°&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...mapMutations</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>actions</code>ï¼šç±»ä¼¼äº <code>methods</code>ï¼Œå¤„ç†å¼‚æ­¥æ–¹æ³•</li>\n</ul>\n<blockquote>\n<p>ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">actions: &#123;</span><br><span class=\"line\">    <span class=\"keyword\">async</span> <span class=\"function\"><span class=\"title\">methodsAsync</span>(<span class=\"params\">&#123; commit &#125;, value</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">const</span> result = <span class=\"keyword\">await</span> apiMethods()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (result.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">                commit(<span class=\"string\">&quot;SET_METHODS&quot;</span>, result.data)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span>(err) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(err);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.dispatch(<span class=\"string\">&#x27;æ–¹æ³•å&#x27;</span>, <span class=\"string\">&#x27;å‚æ•°&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...mapActions</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>getters</code>ï¼šç±»ä¼¼äº <code>computed</code> å’Œ <code>filter</code>ï¼Œå¤„ç†æ•°æ®</li>\n</ul>\n<blockquote>\n<p>ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">getters: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">newData</span>(<span class=\"params\">state</span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> state.arr.filter(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> item.id === <span class=\"number\">1</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è®¿é—®</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.$store.getters(<span class=\"string\">&#x27;åç§°&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">...mapGetters</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-props-ä¼ é€’æ•°æ®æœªæ›´æ–°\"><a href=\"#10-props-ä¼ é€’æ•°æ®æœªæ›´æ–°\" class=\"headerlink\" title=\"10. props ä¼ é€’æ•°æ®æœªæ›´æ–°\"></a>10. props ä¼ é€’æ•°æ®æœªæ›´æ–°</h2><blockquote>\n<p>è§£å†³æ–¹å¼ï¼šä½¿ç”¨ <code>watch</code> ç›‘å¬ <code>props</code></p>\n</blockquote>\n<h2 id=\"11-ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#11-ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"11. ç”Ÿå‘½å‘¨æœŸ\"></a>11. ç”Ÿå‘½å‘¨æœŸ</h2><h3 id=\"beforeCreate\"><a href=\"#beforeCreate\" class=\"headerlink\" title=\"beforeCreate\"></a>beforeCreate</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶ï¼Œç»„ä»¶çš„ <code>data</code> å’Œ <code>methods</code> ä»¥åŠé¡µé¢ <code>DOM</code> ç»“æ„éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–</p>\n</blockquote>\n<h3 id=\"created\"><a href=\"#created\" class=\"headerlink\" title=\"created\"></a>created</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶ï¼Œç»„ä»¶çš„ <code>data</code> å’Œ <code>methods</code> å·²ç»å¯ç”¨äº†ï¼Œä½†æ˜¯é¡µé¢ <code>DOM</code> ç»“æ„è¿˜æ²¡æœ‰æ¸²æŸ“å‡ºæ¥ï¼›ç»å¸¸ç”¨æ¥å‘èµ· <code>ajax</code> è¯·æ±‚<br>æ³¨æ„ï¼Œåœ¨ <code>ssr</code> æœåŠ¡ç«¯æ¸²æŸ“çš„æ—¶å€™ï¼Œåœ¨æ­¤å¤„å‘èµ· <code>ajax</code> è¯·æ±‚ä¼šæœ‰é—®é¢˜ï¼Œæ¨èåœ¨ <code>mounted</code> ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ¥å‘èµ· <code>ajax</code> è¯·æ±‚ã€‚</p>\n</blockquote>\n<h3 id=\"beforeMount\"><a href=\"#beforeMount\" class=\"headerlink\" title=\"beforeMount\"></a>beforeMount</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶å†…å­˜ä¸­çš„æ¨¡æ¿ç»“æ„è¿˜æ²¡æœ‰<em>çœŸæ­£æ¸²æŸ“åˆ°é¡µé¢ä¸Š</em>ï¼›æ­¤æ—¶ï¼Œé¡µé¢ä¸Š<em>çœ‹ä¸åˆ°çœŸå®çš„æ•°æ®</em>ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢</p>\n</blockquote>\n<h3 id=\"Mounted\"><a href=\"#Mounted\" class=\"headerlink\" title=\"Mounted\"></a>Mounted</h3><ul>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶æŒ‚è½½å®Œæ¯•ï¼Œå¯åˆå§‹åŒ–æ’ä»¶</p>\n</blockquote>\n<h3 id=\"beforeUpdate\"><a href=\"#beforeUpdate\" class=\"headerlink\" title=\"beforeUpdate\"></a>beforeUpdate</h3><blockquote>\n<p>_æ•°æ®è‚¯å®šæ˜¯æœ€æ–°çš„_ï¼Œç„¶è€Œ<em>é¡µé¢å‘ˆç°çš„æ•°æ®è¿˜æ˜¯æ—§çš„</em></p>\n</blockquote>\n<h3 id=\"updated\"><a href=\"#updated\" class=\"headerlink\" title=\"updated\"></a>updated</h3><blockquote>\n<p>é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ã€‚æ­¤æ—¶ï¼Œ<code>data</code> å’Œ <code>view</code> ä¸Šéƒ½æ˜¯æœ€æ–°çš„æ•°æ®</p>\n</blockquote>\n<h3 id=\"beforeDestroy\"><a href=\"#beforeDestroy\" class=\"headerlink\" title=\"beforeDestroy\"></a>beforeDestroy</h3><ul>\n<li>ç»„ä»¶é”€æ¯é˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>æ­¤æ—¶æ²¡æœ‰çœŸæ­£å¼€å§‹é”€æ¯ï¼Œç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚åŒæ—¶ï¼Œ<code>data</code> ã€<code>methods</code> ç­‰æ•°æ®æˆ–æ–¹æ³•ï¼Œä¾ç„¶å¯ä»¥è¢«æ­£å¸¸è®¿é—®ï¼›</p>\n</blockquote>\n<h3 id=\"destroyed\"><a href=\"#destroyed\" class=\"headerlink\" title=\"destroyed\"></a>destroyed</h3><ul>\n<li>ç»„ä»¶é”€æ¯é˜¶æ®µ</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯.<code>data</code> å’Œ <code>methods</code> éƒ½ä¸å¯ç”¨äº†</p>\n</blockquote>\n<h2 id=\"12-vue-ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\"><a href=\"#12-vue-ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\" class=\"headerlink\" title=\"12 Â vue ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹\"></a>12 Â vue ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹</h2><table>\n<thead>\n<tr>\n<th>è¡Œä¸º</th>\n<th>æŒ‡å‘</th>\n<th>ä½œç”¨</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><code>new Vue()</code></td>\n<td>â¡ï¸</td>\n<td>å®ä¾‹åŒ– <code>Vue</code> å¯¹è±¡</td>\n</tr>\n<tr>\n<td><code>Init Events &amp; Lifecycle</code></td>\n<td>â¡ï¸</td>\n<td>åˆå§‹åŒ–ç»„ä»¶ <code>methods</code> å’Œ <code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</code></td>\n</tr>\n<tr>\n<td><code>beforeCreate</code></td>\n<td>â¡ï¸</td>\n<td><code>data</code>ï¼Œ<code>methods</code> æœªè¢«åˆå§‹åŒ–</td>\n</tr>\n<tr>\n<td><code>Init injections &amp; reactivity</code></td>\n<td>â¡ï¸</td>\n<td>æ­£åœ¨åˆå§‹åŒ– <code>data</code> å’Œ <code>methods</code> ä¸­çš„æ•°æ®ä»¥åŠæ–¹æ³•</td>\n</tr>\n<tr>\n<td><code>created</code></td>\n<td>â¡ï¸</td>\n<td><code>data</code>ï¼Œ<code>methods</code> å¯ç”¨ï¼Œä½† <code>Dom</code> ç»“æ„è¿˜æœªè¢«æ¸²æŸ“ï¼Œå¸¸å‘èµ· <code>ajax</code> è¯·æ±‚</td>\n</tr>\n<tr>\n<td>â¬‡ï¸</td>\n<td>â¡ï¸</td>\n<td>åˆ¤æ–­æ˜¯å¦æœ‰ <code>el</code>ï¼Œ<code>template</code> å±æ€§</td>\n</tr>\n<tr>\n<td>â¬‡ï¸</td>\n<td>â¡ï¸</td>\n<td>ç”¨æ¥ç¼–è¯‘æ¨¡ç‰ˆç»“æ„ï¼Œå½“æ‰€æœ‰æŒ‡ä»¤è§£æå®Œæ¯•ï¼Œåˆ™<code>æ¨¡æ¿é¡µé¢å°±è¢«æ¸²æŸ“åˆ°å†…å­˜ä¸­äº†</code>ï¼›å½“æ¨¡æ¿ç¼–è¯‘å®Œæˆï¼Œæ¨¡æ¿é¡µé¢è¿˜æ²¡æœ‰æŒ‚åœ¨åˆ°é¡µé¢ä¸Šï¼Œåªæ˜¯å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç”¨æˆ·çœ‹ä¸åˆ°é¡µé¢ï¼›</td>\n</tr>\n<tr>\n<td><code>beforeMount</code></td>\n<td>â¡ï¸</td>\n<td>æ­¤æ—¶ï¼Œé¡µé¢ä¸Šçœ‹ä¸åˆ° <code>çœŸå®æ•°æ®</code>ï¼Œæ­¤æ—¶ç”¨æˆ·çœ‹åˆ°çš„åªæ˜¯ä¸€ä¸ªæ¨¡æ¿é¡µé¢</td>\n</tr>\n<tr>\n<td><code>Create vm.$el and replace &quot;el&quot; with it</code></td>\n<td>â¡ï¸</td>\n<td>æ­£åœ¨æŠŠå†…å­˜ä¸­æ¸²æŸ“å¥½çš„æ¨¡æ¿ç»“æ„æ›¿æ¢åˆ°é¡µé¢ä¸Š</td>\n</tr>\n<tr>\n<td><code>mounted</code></td>\n<td>â¡ï¸</td>\n<td>æ­¤æ—¶ï¼Œé¡µé¢æ¸²æŸ“å®Œæ¯•</td>\n</tr>\n<tr>\n<td>â¬‡ï¸(ç»„ä»¶è¿è¡Œä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°)</td>\n<td>â¡ï¸</td>\n<td>ä¼šæ ¹æ® <code>data</code> æ•°æ®çš„å˜åŒ–ï¼Œæœ‰é€‰æ‹©è¡Œçš„è§¦å‘ <code>0</code>æ¬¡ æˆ– <code>n</code>æ¬¡</td>\n</tr>\n<tr>\n<td><code>beforeUpdate</code></td>\n<td>â¡ï¸</td>\n<td>æ•°æ®æ˜¯æ–°çš„ï¼Œä½†é¡µé¢å‘ˆç°çš„æ•°æ®ä»æ˜¯æ—§çš„</td>\n</tr>\n<tr>\n<td><code>updated</code></td>\n<td>â¡ï¸</td>\n<td>é¡µé¢å·²ç»å®Œæˆäº†æ›´æ–°ï¼Œæ­¤æ—¶ï¼Œæ•°æ®æ˜¯æœ€æ–°çš„ï¼ŒåŒæ—¶é¡µé¢ä¸Šå‘ˆç°çš„æ•°æ®ä¹Ÿæ˜¯æœ€æ–°çš„</td>\n</tr>\n<tr>\n<td>â¬‡ï¸(é”€æ¯é˜¶æ®µ)</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td><code>beforeDestroy</code></td>\n<td>â¡ï¸</td>\n<td>ç»„ä»¶å³å°†è¢«é”€æ¯ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰çœŸ æ­£å¼€å§‹é”€æ¯ï¼Œæ­¤æ—¶ç»„ä»¶è¿˜æ˜¯æ­£å¸¸å¯ç”¨çš„ã€‚<code>data</code>ï¼Œ<code>methods</code> ä»å¯æ­£å¸¸è®¿é—®</td>\n</tr>\n<tr>\n<td><code>Teardown watchers,child components and event listeners</code>(é”€æ¯è¿‡ç¨‹)</td>\n<td>â¡ï¸</td>\n<td></td>\n</tr>\n<tr>\n<td><code>destroyed</code></td>\n<td>â¡ï¸</td>\n<td>ç»„ä»¶å·²ç»å®Œæˆäº†é”€æ¯ï¼Œç»„ä»¶å·²ç»åºŸäº†ï¼Œ<code>data</code> å’Œ <code>methods</code> éƒ½ä¸å¯ç”¨äº†</td>\n</tr>\n</tbody></table>\n<h2 id=\"13-keep-alive\"><a href=\"#13-keep-alive\" class=\"headerlink\" title=\"13. keep-alive\"></a>13. keep-alive</h2><h3 id=\"æ–°å¢ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#æ–°å¢ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"æ–°å¢ç”Ÿå‘½å‘¨æœŸ\"></a>æ–°å¢ç”Ÿå‘½å‘¨æœŸ</h3><blockquote>\n<p>è¢«åŒ…å«åœ¨ Â <code>&lt;keep-alive&gt;</code>Â  ä¸­åˆ›å»ºçš„ç»„ä»¶ï¼Œä¼šå¤šä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ:Â <code>activated</code>Â  ä¸ Â <code>deactivated</code></p>\n</blockquote>\n<ul>\n<li>actived</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨ï¼Œåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨ï¼Œä¹‹åæ¯æ¬¡ <code>keep-alive</code> æ¿€æ´»æ—¶è¢«è°ƒç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>deactivated</li>\n</ul>\n<blockquote>\n<p>ç»„ä»¶è¢«åœç”¨æ—¶è°ƒç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"æ–°å¢å±æ€§\"><a href=\"#æ–°å¢å±æ€§\" class=\"headerlink\" title=\"æ–°å¢å±æ€§\"></a>æ–°å¢å±æ€§</h3><ul>\n<li>include</li>\n</ul>\n<blockquote>\n<p>åŒ…å«çš„ç»„ä»¶ç¼“å­˜ç”Ÿæ•ˆã€‚å¯¹åº” <code>.vue</code> æ–‡ä»¶çš„ <code>name</code> å±æ€§</p>\n</blockquote>\n<ul>\n<li>exclude</li>\n</ul>\n<blockquote>\n<p>æ’é™¤çš„ç»„ä»¶ä¸ç¼“å­˜ï¼Œä¼˜å…ˆçº§å¤§äº <code>include</code>ã€‚å¯¹åº” <code>.vue</code> æ–‡ä»¶çš„ <code>name</code> å±æ€§</p>\n</blockquote>\n<h2 id=\"14-nextTick\"><a href=\"#14-nextTick\" class=\"headerlink\" title=\"14. nextTick\"></a>14. <code>nextTick</code></h2><h3 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h3><blockquote>\n<p>åœ¨å®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜ <code>Vue</code> æ˜¯å¼‚æ­¥æ‰§è¡Œ <code>DOM</code> æ›´æ–°çš„ï¼Œæ‰€ä»¥åœ¨æŸäº›åœºæ™¯ä¸‹éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†æ‰å¯æ­£å¸¸æ‰§è¡ŒæŸäº›é€»è¾‘ã€‚</p>\n</blockquote>\n<h3 id=\"åº”ç”¨åœºæ™¯\"><a href=\"#åº”ç”¨åœºæ™¯\" class=\"headerlink\" title=\"åº”ç”¨åœºæ™¯\"></a>åº”ç”¨åœºæ™¯</h3><ul>\n<li>åœ¨ <code>Vue</code> ç”Ÿå‘½å‘¨æœŸçš„ <code>created()</code> é’©å­å‡½æ•°è¿›è¡Œçš„ <code>DOM</code> æ“ä½œä¸€å®šè¦æ”¾åœ¨ <code>Vue.nextTick()</code> çš„å›è°ƒå‡½æ•°ä¸­</li>\n</ul>\n<blockquote>\n<p>åŸå› : åœ¨ <code>created()</code> é’©å­å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ <code>DOM</code> å…¶å®å¹¶æœªè¿›è¡Œä»»ä½•æ¸²æŸ“ï¼Œè€Œæ­¤æ—¶è¿›è¡Œ <code>DOM</code> æ“ä½œæ¯«æ— æ„ä¹‰ï¼Œå› æ­¤ä¸€å®šè¦å°†æ“ä½œ <code>Dom</code> éƒ¨åˆ†çš„ä»£ç æ”¾å…¥ <code>Vue.nextTick()</code> çš„å›è°ƒå‡½æ•°ä¸­ã€‚ä¸ä¹‹å¯¹åº”çš„å°±æ˜¯ <code>mounted()</code> é’©å­å‡½æ•°ï¼Œå› ä¸ºè¯¥é’©å­å‡½æ•°æ‰§è¡Œæ—¶æ‰€æœ‰çš„<code>DOM</code> æŒ‚è½½å’Œæ¸²æŸ“éƒ½å·²å®Œæˆï¼Œæ­¤æ—¶åœ¨è¯¥é’©å­å‡½æ•°ä¸­è¿›è¡Œä»»ä½• <code>DOM</code> æ“ä½œéƒ½ä¸ä¼šæœ‰é—®é¢˜ ã€‚</p>\n</blockquote>\n<ul>\n<li>åœ¨æ•°æ®å˜åŒ–åè¦æ‰§è¡Œçš„æŸä¸ªæ“ä½œï¼Œè€Œè¿™ä¸ªæ“ä½œéœ€è¦ä½¿ç”¨éšæ•°æ®æ”¹å˜è€Œæ”¹å˜çš„ <code>DOM</code> ç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªæ“ä½œéƒ½åº”è¯¥æ”¾è¿› <code>Vue.nextTick()</code> çš„å›è°ƒå‡½æ•°ä¸­ã€‚</li>\n</ul>\n<h3 id=\"nextTick-æºç æµ…æ\"><a href=\"#nextTick-æºç æµ…æ\" class=\"headerlink\" title=\"nextTick æºç æµ…æ\"></a>nextTick æºç æµ…æ</h3><blockquote>\n<p><code>Vue.nextTick</code> ç”¨äºå»¶è¿Ÿæ‰§è¡Œä¸€æ®µä»£ç ï¼Œå®ƒæ¥å— <code>2</code> ä¸ªå‚æ•°ï¼ˆ <code>å›è°ƒå‡½æ•°</code> å’Œ <code>æ‰§è¡Œå›è°ƒå‡½æ•°çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</code>ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æä¾›å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆå°†è¿”å› <code>promise</code> å¯¹è±¡ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸»è¦çš„å®ç°æ–¹å¼ä¸ºåˆ¤æ–­è®¾å¤‡æ‰€æ”¯æŒçš„ä¸‰ç§å±æ€§ï¼Œä¾æ®å„è‡ªæ”¯æŒçš„å±æ€§æ¥è¿›è¡Œå¼‚æ­¥æ“ä½œã€‚å¦‚æœæ”¯æŒ <code>promise</code>ï¼Œä¼šä½¿ç”¨ <code>Promise.then</code> æ¥åšå»¶è¿Ÿè°ƒç”¨å‡½æ•°ã€‚å¦‚æœè®¾å¤‡ä¸æ”¯æŒ <code>Promise</code> å¯¹è±¡ï¼Œå†åˆ¤æ–­æ˜¯å¦æ”¯æŒ <code>MutationObserver</code> å¯¹è±¡ï¼Œå¦‚æœæ”¯æŒè¯¥å¯¹è±¡ï¼Œå°±ä½¿ç”¨<code>MutationObserver</code> æ¥åšå»¶è¿Ÿï¼Œæœ€åå¦‚æœä¸Šé¢ä¸¤ç§éƒ½ä¸æ”¯æŒçš„è¯ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>setTimeout</code> æ¥åšå»¶è¿Ÿæ“ä½œã€‚</p>\n</blockquote>\n<h2 id=\"15-è‡ªå®šä¹‰æŒ‡ä»¤\"><a href=\"#15-è‡ªå®šä¹‰æŒ‡ä»¤\" class=\"headerlink\" title=\"15. è‡ªå®šä¹‰æŒ‡ä»¤\"></a>15. è‡ªå®šä¹‰æŒ‡ä»¤</h2><h3 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h3><blockquote>\n<p>é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ ( <code>v-model</code>Â  å’Œ Â <code>v-show</code>)ï¼Œ <code>Vue</code>Â  ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼Œåœ¨ <code>Vue2.0</code> ä¸­ï¼Œä»£ç å¤ç”¨å’ŒæŠ½è±¡çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰çš„æƒ…å†µä¸‹ï¼Œä½ ä»ç„¶éœ€è¦å¯¹æ™®é€š <code>DOM</code>Â  å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹</li>\n</ul>\n<blockquote>\n<p>å½“é¡µé¢åŠ è½½æ—¶ï¼Œè¯¥å…ƒç´ å°†è·å¾—ç„¦ç‚¹ (æ³¨æ„ï¼š <code>autofocus</code>Â  åœ¨ç§»åŠ¨ç‰ˆ <code>Safari</code>Â  ä¸Šä¸å·¥ä½œ)ã€‚äº‹å®ä¸Šï¼Œåªè¦ä½ åœ¨æ‰“å¼€è¿™ä¸ªé¡µé¢åè¿˜æ²¡ç‚¹å‡»è¿‡ä»»ä½•å†…å®¹ï¼Œè¿™ä¸ªè¾“å…¥æ¡†å°±åº”å½“è¿˜æ˜¯å¤„äºèšç„¦çŠ¶æ€ã€‚ç°åœ¨è®©æˆ‘ä»¬ç”¨æŒ‡ä»¤æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ `v-focus`</span></span><br><span class=\"line\">Vue.directive(<span class=\"string\">&quot;focus&quot;</span>, &#123;</span><br><span class=\"line\">  <span class=\"comment\">// å½“è¢«ç»‘å®šçš„å…ƒç´ æ’å…¥åˆ° DOM ä¸­æ—¶â€¦â€¦</span></span><br><span class=\"line\">  inserted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// èšç„¦å…ƒç´ </span></span><br><span class=\"line\">    el.focus();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæƒ³æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ï¼Œç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª <code>directives</code>Â  çš„é€‰é¡¹ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">directives: &#123;</span><br><span class=\"line\">  focus: &#123;</span><br><span class=\"line\">    <span class=\"comment\">// æŒ‡ä»¤çš„å®šä¹‰</span></span><br><span class=\"line\">    inserted: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el</span>) </span>&#123;</span><br><span class=\"line\">      el.focus()</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç„¶åä½ å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä»»ä½•å…ƒç´ ä¸Šä½¿ç”¨æ–°çš„ Â <code>v-focus</code>Â Â  <code>property</code>ï¼Œå¦‚ä¸‹</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">v-focus</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"é’©å­å‡½æ•°\"><a href=\"#é’©å­å‡½æ•°\" class=\"headerlink\" title=\"é’©å­å‡½æ•°\"></a>é’©å­å‡½æ•°</h3><blockquote>\n<p>ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰å¯¹è±¡å¯ä»¥æä¾›å¦‚ä¸‹å‡ ä¸ªé’©å­å‡½æ•° (å‡ä¸ºå¯é€‰)ï¼š</p>\n</blockquote>\n<ul>\n<li><code>bind</code>ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚</li>\n<li><code>inserted</code>ï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚</li>\n<li><code>update</code>ï¼šæ‰€åœ¨ç»„ä»¶çš„ <code>VNode</code> æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ <code>VNode</code> æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–° (è¯¦ç»†çš„é’©å­å‡½æ•°å‚æ•°è§ä¸‹)ã€‚</li>\n<li><code>componentUpdated</code>ï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ <code>VNode</code> åŠå…¶å­ <code>VNode</code> å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚</li>\n<li><code>unbind</code>ï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚</li>\n</ul>\n<blockquote>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹é’©å­å‡½æ•°çš„å‚æ•° (å³ elã€bindingã€vnode å’Œ oldVnode)ã€‚</p>\n</blockquote>\n<h3 id=\"é’©å­å‡½æ•°å‚æ•°\"><a href=\"#é’©å­å‡½æ•°å‚æ•°\" class=\"headerlink\" title=\"é’©å­å‡½æ•°å‚æ•°\"></a>é’©å­å‡½æ•°å‚æ•°</h3><blockquote>\n<p>æŒ‡ä»¤é’©å­å‡½æ•°ä¼šè¢«ä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š</p>\n</blockquote>\n<ul>\n<li><code>el</code>ï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ <code>DOM</code>ã€‚</li>\n<li><code>binding</code>ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ <code>property</code>ï¼š<ul>\n<li><code>name</code>ï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ <code>v-</code> å‰ç¼€ã€‚</li>\n<li><code>value</code>ï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼š<code>v-my-directive=&quot;1 + 1&quot;</code> ä¸­ï¼Œç»‘å®šå€¼ä¸º <code>2</code>ã€‚</li>\n<li><code>oldValue</code>ï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚</li>\n<li><code>expression</code>ï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ <code>v-my-directive=&quot;1 + 1&quot;</code> ä¸­ï¼Œè¡¨è¾¾å¼ä¸º <code>&quot;1 + 1&quot;</code>ã€‚</li>\n<li><code>arg</code>ï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ <code>v-my-directive:foo</code> ä¸­ï¼Œå‚æ•°ä¸º <code>&quot;foo&quot;</code>ã€‚</li>\n<li><code>modifiers</code>ï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š<code>v-my-directive.foo.bar</code> ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º <code>&#123; foo: true, bar: true &#125;</code>ã€‚</li>\n</ul>\n</li>\n<li><code>vnode</code>ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚ç§»æ­¥ <a href=\"https://cn.vuejs.org/v2/api/#VNode-%E6%8E%A5%E5%8F%A3\">VNode API</a> æ¥äº†è§£æ›´å¤šè¯¦æƒ…ã€‚</li>\n<li><code>oldVnode</code>ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚</li>\n</ul>\n<blockquote>\n<p>é™¤äº† Â <code>el</code>Â  ä¹‹å¤–ï¼Œå…¶å®ƒå‚æ•°éƒ½åº”è¯¥æ˜¯åªè¯»çš„ï¼Œåˆ‡å‹¿è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœéœ€è¦åœ¨é’©å­ä¹‹é—´å…±äº«æ•°æ®ï¼Œå»ºè®®é€šè¿‡å…ƒç´ çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/dataset\"><code>dataset</code></a>Â  æ¥è¿›è¡Œã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;hook-arguments-example&quot;</span> <span class=\"attr\">v-demo:foo.a.b</span>=<span class=\"string\">&quot;message&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;demo&quot;</span>, &#123;</span><br><span class=\"line\">  bind: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding, vnode</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = <span class=\"built_in\">JSON</span>.stringify;</span><br><span class=\"line\">    el.innerHTML =</span><br><span class=\"line\">      <span class=\"string\">&quot;name: &quot;</span> +</span><br><span class=\"line\">      s(binding.name) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;value: &quot;</span> +</span><br><span class=\"line\">      s(binding.value) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;expression: &quot;</span> +</span><br><span class=\"line\">      s(binding.expression) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;argument: &quot;</span> +</span><br><span class=\"line\">      s(binding.arg) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;modifiers: &quot;</span> +</span><br><span class=\"line\">      s(binding.modifiers) +</span><br><span class=\"line\">      <span class=\"string\">&quot;&lt;br&gt;&quot;</span> +</span><br><span class=\"line\">      <span class=\"string\">&quot;vnode keys: &quot;</span> +</span><br><span class=\"line\">      <span class=\"built_in\">Object</span>.keys(vnode).join(<span class=\"string\">&quot;, &quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">  el: <span class=\"string\">&quot;#hook-arguments-example&quot;</span>,</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">    message: <span class=\"string\">&quot;hello!&quot;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŠ¨æ€æŒ‡ä»¤å‚æ•°\"><a href=\"#åŠ¨æ€æŒ‡ä»¤å‚æ•°\" class=\"headerlink\" title=\"åŠ¨æ€æŒ‡ä»¤å‚æ•°\"></a>åŠ¨æ€æŒ‡ä»¤å‚æ•°</h3><blockquote>\n<p>æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>v-mydirective:[argument]=&quot;value&quot;</code> ä¸­ï¼Œ<code>argument</code> å‚æ•°å¯ä»¥æ ¹æ®ç»„ä»¶å®ä¾‹æ•°æ®è¿›è¡Œæ›´æ–°ï¼è¿™ä½¿å¾—è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥åœ¨åº”ç”¨ä¸­è¢«çµæ´»ä½¿ç”¨ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¾‹å¦‚ä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œç”¨æ¥é€šè¿‡å›ºå®šå¸ƒå±€å°†å…ƒç´ å›ºå®šåœ¨é¡µé¢ä¸Šã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·åˆ›å»ºä¸€ä¸ªé€šè¿‡æŒ‡ä»¤å€¼æ¥æ›´æ–°ç«–ç›´ä½ç½®åƒç´ å€¼çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;baseexample&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>Scroll down the page<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">v-pin</span>=<span class=\"string\">&quot;200&quot;</span>&gt;</span>Stick me 200px from the top of the page<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;pin&quot;</span>, &#123;</span><br><span class=\"line\">  bind: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding, vnode</span>) </span>&#123;</span><br><span class=\"line\">    el.style.position = <span class=\"string\">&quot;fixed&quot;</span>;</span><br><span class=\"line\">    el.style.top = binding.value + <span class=\"string\">&quot;px&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">  el: <span class=\"string\">&quot;#baseexample&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¼šæŠŠè¯¥å…ƒç´ å›ºå®šåœ¨è·ç¦»é¡µé¢é¡¶éƒ¨ 200 åƒç´ çš„ä½ç½®ã€‚ä½†å¦‚æœåœºæ™¯æ˜¯æˆ‘ä»¬éœ€è¦æŠŠå…ƒç´ å›ºå®šåœ¨å·¦ä¾§è€Œä¸æ˜¯é¡¶éƒ¨åˆè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™æ—¶ä½¿ç”¨åŠ¨æ€å‚æ•°å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°æ ¹æ®æ¯ä¸ªç»„ä»¶å®ä¾‹æ¥è¿›è¡Œæ›´æ–°ã€‚</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;dynamicexample&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">h3</span>&gt;</span>Scroll down inside this section â†“<span class=\"tag\">&lt;/<span class=\"name\">h3</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">v-pin:</span>[<span class=\"attr\">direction</span>]=<span class=\"string\">&quot;200&quot;</span>&gt;</span>I am pinned onto the page at 200px to the left.<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;pin&quot;</span>, &#123;</span><br><span class=\"line\">  bind: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding, vnode</span>) </span>&#123;</span><br><span class=\"line\">    el.style.position = <span class=\"string\">&quot;fixed&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> s = binding.arg == <span class=\"string\">&quot;left&quot;</span> ? <span class=\"string\">&quot;left&quot;</span> : <span class=\"string\">&quot;top&quot;</span>;</span><br><span class=\"line\">    el.style[s] = binding.value + <span class=\"string\">&quot;px&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">  el: <span class=\"string\">&quot;#dynamicexample&quot;</span>,</span><br><span class=\"line\">  data: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      direction: <span class=\"string\">&quot;left&quot;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å‡½æ•°ç®€å†™\"><a href=\"#å‡½æ•°ç®€å†™\" class=\"headerlink\" title=\"å‡½æ•°ç®€å†™\"></a>å‡½æ•°ç®€å†™</h3><blockquote>\n<p>åœ¨å¾ˆå¤šæ—¶å€™ï¼Œä½ å¯èƒ½æƒ³åœ¨ Â <code>bind</code>Â  å’Œ Â <code>update</code>Â  æ—¶è§¦å‘ç›¸åŒè¡Œä¸ºï¼Œè€Œä¸å…³å¿ƒå…¶å®ƒçš„é’©å­ã€‚æ¯”å¦‚è¿™æ ·å†™ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;color-swatch&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding</span>) </span>&#123;</span><br><span class=\"line\">  el.style.backgroundColor = binding.value;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¯¹è±¡å­—é¢é‡\"><a href=\"#å¯¹è±¡å­—é¢é‡\" class=\"headerlink\" title=\"å¯¹è±¡å­—é¢é‡\"></a>å¯¹è±¡å­—é¢é‡</h3><blockquote>\n<p>å¦‚æœæŒ‡ä»¤éœ€è¦å¤šä¸ªå€¼ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>JavaScript</code> å¯¹è±¡å­—é¢é‡ã€‚è®°ä½ï¼ŒæŒ‡ä»¤å‡½æ•°èƒ½å¤Ÿæ¥å—æ‰€æœ‰åˆæ³•çš„ <code>JavaScript</code> è¡¨è¾¾å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">v-demo</span>=<span class=\"string\">&quot;&#123; color: &#x27;white&#x27;, text: &#x27;hello!&#x27; &#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Vue.directive(<span class=\"string\">&quot;demo&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">el, binding</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(binding.value.color); <span class=\"comment\">// =&gt; &quot;white&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(binding.value.text); <span class=\"comment\">// =&gt; &quot;hello!&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"15-vue-3-0-å°é²œ\"><a href=\"#15-vue-3-0-å°é²œ\" class=\"headerlink\" title=\"15. vue 3.0 å°é²œ\"></a>15. vue 3.0 å°é²œ</h2><p><a href=\"https://www.liulongbin.top:8085/\">ä¸­æ–‡æ–‡æ¡£</a></p>\n"},{"title":"ä»å›¾ç‰‡è£å‰ªäº†è§£ js äºŒè¿›åˆ¶å¸¸ç”¨ api","date":"2020-11-19T16:00:00.000Z","_content":"\n## éœ€æ±‚åˆ†æ\n\n### äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1598083455644-f4308101-1403-4566-ae7d-09a0c4fa5ffe.png#align=left&display=inline&height=602&margin=%5Bobject%20Object%5D&name=image.png&originHeight=602&originWidth=889&size=126895&status=done&style=none&width=889)\n\n### æ­¥éª¤\n\n1. è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\n1. è·å–è£å‰ªåæ ‡\n1. è£å‰ªå›¾ç‰‡\n1. è¯»å–è£å‰ªåçš„å›¾ç‰‡é¢„è§ˆå¹¶ä¸Šä¼ \n\næ¥ä¸‹æ¥å…ˆäº†è§£ä¸‹äºŒè¿›åˆ¶ç›¸å…³çš„ `API`Â  ä»¥æ–¹ä¾¿å®ç°æœ¬éœ€æ±‚ã€‚\n\n## FileReader\n\n> `HTML5`å®šä¹‰äº†`FileReader`ä½œä¸ºæ–‡ä»¶`API`çš„é‡è¦æˆå‘˜ç”¨äºè¯»å–æ–‡ä»¶ï¼Œæ ¹æ®`W3C`çš„å®šä¹‰ï¼Œ`FileReader`æ¥å£æä¾›äº†è¯»å–æ–‡ä»¶çš„æ–¹æ³•å’ŒåŒ…å«è¯»å–ç»“æœçš„äº‹ä»¶æ¨¡å‹ã€‚\n\n### åˆ›å»ºå®ä¾‹\n\n```javascript\nconst fileReader = new FileReader();\n```\n\n### å±æ€§\n\n| å±æ€§å                                                                                | æè¿°                                                                                                               |\n| ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |\n| [error](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/error)            | ä¸€ä¸ª[DOMException](https://developer.mozilla.org/zh-CN/docs/Web/API/DOMException)ï¼Œè¡¨ç¤ºåœ¨è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿçš„é”™è¯¯ Â ã€‚  |\n| [readyState](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readyState)Â  | ä¸€ä¸ªæ•°å­—ï¼Œç”¨æ¥è¡¨ç¤º Â [FileReader](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader)Â API çš„ä¸‰ç§å¯èƒ½çŠ¶æ€ã€‚ |\n| [result](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/result)          | æ–‡ä»¶çš„å†…å®¹ã€‚è¯¥å±æ€§ä»…åœ¨è¯»å–æ“ä½œå®Œæˆåæ‰æœ‰æ•ˆï¼Œæ•°æ®çš„æ ¼å¼å–å†³äºä½¿ç”¨å“ªä¸ªæ–¹æ³•æ¥å¯åŠ¨è¯»å–æ“ä½œã€‚                           |\n\n### æ–¹æ³•\n\n| æ–¹æ³•å             | æè¿°                                                  |\n| ------------------ | ----------------------------------------------------- |\n| abort              | ä¸­æ­¢è¯»å–æ“ä½œ                                          |\n| readAsArrayBuffer  | å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â ArrayBufferÂ  å¯¹è±¡è¡¨ç¤º |\n| readAsBinaryString | å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœä¸ºæ–‡ä»¶çš„äºŒè¿›åˆ¶ä¸²          |\n| readAsDataURL      | å¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â data:urlÂ  çš„å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º  |\n| readAsText         | å¼‚æ­¥æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º          |\n\n### äº‹ä»¶\n\n| äº‹ä»¶å      | æè¿°                           |\n| ----------- | ------------------------------ |\n| onabort     | ä¸­æ–­æ—¶è§¦å‘                     |\n| onerror     | å‡ºé”™æ—¶è§¦å‘                     |\n| onload      | æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘         |\n| onloadend   | è¯»å–å®Œæˆè§¦å‘ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰ |\n| onloadstart | è¯»å–å¼€å§‹æ—¶è§¦å‘                 |\n| onprogress  | è¯»å–ä¸­                         |\n\n### ç¤ºä¾‹\n\n```jsx\n/**\n * @description æŠŠä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼è¯»å–å‡ºæ¥\n */\n<input type=\"file\" id=\"upload\" />\n\nconst upload = document.getElementById(\"upload\");\nupload.addEventListener(\"change\", function() {\n\tconst fileReader = new FileReader();\n  fileReader.onload = function() {\n  \tconst reult = fileReader.result;\n    console.log(result):\n  }\n}, false);\n```\n\n## ArrayBuffer / TypedArray / DataView\n\n### ArrayBuffer\n\n#### åŠŸèƒ½\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1597991690421-351d07c1-8366-469f-8912-d094078e5986.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=1746&size=58281&status=done&style=none&width=873)\n\n#### ä»‹ç»\n\n`FileReader`Â  æœ‰ä¸ª `readAsArrayBuffer()`Â  æ–¹æ³•ï¼Œå¦‚æœè¢«è¯»å–çš„æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œé‚£ä¹ˆç”¨æ¬¡æ–¹æ³•è¯»å–å°†æ˜¯æœ€åˆé€‚çš„æ–¹æ¡ˆï¼Œè¯»å–å‡ºæ¥çš„æ•°æ®å°†æ˜¯ä¸€ä¸ª `ArrayBuffer`Â  å¯¹è±¡ã€‚\n\n#### å®šä¹‰\n\n> `ArrayBuffer`Â  å¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚`ArrayBuffer`Â  ä¸èƒ½ç›´æ¥æ“ä½œ,è€Œæ˜¯è¦é€šè¿‡**ç±»å‹æ•°ç»„å¯¹è±¡**æˆ– Â **`DataView`\\*\\***Â  å¯¹è±¡\\*\\*æ¥æ“ä½œ,å®ƒä»¬ä¼šå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¡¨ç¤ºä¸ºç‰¹å®šçš„æ ¼å¼,å¹¶é€šè¿‡è¿™äº›æ ¼å¼æ¥è¯»å†™ç¼“å†²åŒºçš„å†…å®¹.\n\n`ArrayBuffer`ä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ†é…ä¸€æ®µå¯ä»¥å­˜æ”¾æ•°æ®çš„è¿ç»­å†…å­˜åŒºåŸŸã€‚\n\n```javascript\nconst arrayBuffer = new ArrayBuffer(8);\n// ArrayBuffer å¯¹è±¡æœ‰å®ä¾‹å±æ€§ byteLength ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹å ç”¨çš„å†…å­˜å­—èŠ‚é•¿åº¦ï¼ˆå•ä½å­—èŠ‚ï¼‰\nconsole.log(arrayBuffer.byteLength);\n```\n\n#### å±æ€§\n\n| å±æ€§å                                                                                                                                      | æè¿°                                                                                     |\n| ------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |\n| ArrayBuffer.lengthÂ                                                                                                                          | ArrayBufferÂ  æ„é€ å‡½æ•°çš„ lengthÂ  å±æ€§ï¼Œå…¶å€¼ä¸º 1Â ã€‚                                        |\n| [ArrayBuffer.prototype.byteLength](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/byteLength) | åªè¯»å±æ€§ï¼Œè¡¨ç¤º Â ArrayBufferÂ  çš„ byteÂ  çš„å¤§å°ï¼Œåœ¨ ArrayBufferÂ  æ„é€ å®Œæˆæ—¶ç”Ÿæˆï¼Œä¸å¯æ”¹å˜ã€‚ |\n\n> ç”±äºæ— æ³•å¯¹ Â `Arraybuffer`Â  ç›´æ¥è¿›è¡Œæ“ä½œ,æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¶ä»–å¯¹è±¡æ¥æ“ä½œ. æ‰€æœ‰å°±æœ‰äº† Â **`TypedArray`\\*\\***(ç±»å‹æ•°ç»„å¯¹è±¡)**å’Œ Â **`DataView`\\***\\*å¯¹è±¡**ã€‚\n\n### DataView\n\nä¸Šæ–¹ä»£ç ç”Ÿæˆäº†ä¸€æ®µ 8 å­—èŠ‚çš„å†…å­˜åŒºåŸŸã€‚å…¶ä¸­æ¯ä¸ªå­—èŠ‚çš„é»˜è®¤å€¼éƒ½æ˜¯ 0ã€‚\n\nä¸ºäº†è¯»å’Œå†™è¿™æ®µå†…å®¹ï¼Œéœ€è¦ä¸ºå®ƒæŒ‡å®šè§†å›¾ã€‚ `DataView`Â  è§†å›¾çš„åˆ›å»ºï¼Œéœ€è¦æä¾› `ArrayBuffer` å¯¹è±¡å®ä¾‹ä½œä¸ºå‚æ•°ã€‚\n\n`DataView`Â  è§†å›¾æ˜¯ä¸€ä¸ªå¯ä»¥ä»äºŒè¿›åˆ¶ `ArrayBuffer`Â  å¯¹è±¡ä¸­è¯»å†™å¤šç§æ•°å€¼ç±»å‹çš„åº•å±‚æ¥å£ã€‚\n\n- `setInt8()`Â  ä» `DataView`Â  èµ·å§‹ä½ç½®ä»¥ `byte`Â  ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ `byteOffset`Â  å¤„å­˜å‚¨ä¸€ä¸ª `8-bit`Â  æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚\n- `getInt8()`Â  ä» `DataView`Â  èµ·å§‹ä½ç½®ä»¥ `byte` ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ `byteOffset` å¤„è·å–ä¸€ä¸ª `8-bit` æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚\n\n#### è°ƒç”¨\n\n```javascript\nnew DataView(buffer, [, byteOffset [, byteLength]])\n```\n\n#### å‚æ•°\n\n| å‚æ•°å            | æè¿°                                                                                                                                                                                                                                                                                     |\n| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| buffer            | ä¸€ä¸ª å·²ç»å­˜åœ¨çš„[ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)Â  æˆ– Â [SharedArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)Â Â  å¯¹è±¡ï¼ŒDataViewÂ  å¯¹è±¡çš„æ•°æ®æºã€‚ |\n| byteOffsetÂ (å¯é€‰) | æ­¤ Â DataViewÂ  å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨ buffer ä¸­çš„å­—èŠ‚åç§»ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ã€‚                                                                                                                                                                                               |\n| byteLengthÂ (å¯é€‰) | æ­¤ DataView å¯¹è±¡çš„å­—èŠ‚é•¿åº¦ã€‚å¦‚æœæœªæŒ‡å®šï¼Œè¿™ä¸ªè§†å›¾çš„é•¿åº¦å°†åŒ¹é… buffer çš„é•¿åº¦ã€‚                                                                                                                                                                                                             |\n\n#### å¼‚å¸¸\n\n- [RangeError](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RangeError)\n\nå¦‚æœ `byteOffset` æˆ–è€… `byteLength `å‚æ•°çš„å€¼å¯¼è‡´è§†å›¾è¶…å‡ºäº† `buffer` çš„ç»“æŸä½ç½®å°±ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚\n\nä¾‹å¦‚ï¼Œå‡è®¾ `buffer`Â ï¼ˆç¼“å†²å¯¹è±¡ï¼‰æ˜¯ `16` å­—èŠ‚é•¿åº¦ï¼Œ`byteOffset` å‚æ•°ä¸º `8`ï¼Œ`byteLength` å‚æ•°ä¸º Â `10`ï¼Œè¿™ä¸ªé”™è¯¯å°±ä¼šæŠ›å‡ºï¼Œè¿™æ˜¯å› ä¸ºç»“æœè§†å›¾è¯•å›¾è¶…å‡º `buffer` å¯¹è±¡çš„æ€»é•¿åº¦ `2` ä¸ªå­—èŠ‚ã€‚\n\n#### ç¤ºä¾‹\n\n```javascript\nlet arrayBuffer = new ArrayBuffer();\nconsole.log(arrayBuffer.byteLength); // 2\nlet dataView = new DataView(buffer);\ndataView.setInt8(0, 1);\ndataView.setInt8(1, 2);\nconsole.log(dataView.getInt8(0)); // 1\nconsole.log(dataView.getInt8(1)); // 2\nconsole.log(dataView.getInt16(0)); // 258\n```\n\n### TypedArray\n\nå¦ä¸€ç§`TypedArray`è§†å›¾ï¼Œä¸`DataView`è§†å›¾çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ç»„æ„é€ å‡½æ•°ï¼Œä»£è¡¨ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚\n\n`TypedArray`å¯¹è±¡æè¿°äº†ä¸€ä¸ªåº•å±‚çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å­˜åŒºï¼ˆ`binary data buffer`ï¼‰çš„ä¸€ä¸ªç±»æ•°ç»„è§†å›¾ï¼ˆ`view`ï¼‰ã€‚ä½†å®ƒæœ¬èº«ä¸å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œç”šè‡³æ— æ³•è®¿é—®ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæ¥å£ï¼Œå®ƒæœ‰å¾ˆå¤šçš„å®ç°ã€‚\n\n#### å®ç°æ–¹æ³•\n\n| ç±»å‹        | å•ä¸ªå…ƒç´ å€¼çš„èŒƒå›´ | å¤§å°ï¼ˆbytesï¼‰ | æè¿°                  |\n| ----------- | ---------------- | ------------- | --------------------- |\n| Int8Array   | -128 to 127      | 1             | 8 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°  |\n| Uint8Array  | 0 to 255         | 1             | 8 ä½æ— ç¬¦å·æ•´æ•°        |\n| Int16Array  | -32768 to 32767  | 2             | 16 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•° |\n| Uint16Array | 0 to 65535       | 2             | 16 ä½æ— ç¬¦å·æ•´æ•°       |\n\n#### ç¤ºä¾‹\n\n```javascript\nconst arrayBuffer = new ArrayBuffer(8);\nconsole.log(arrayBuffer.byteLength); // 8\nconst int8Array = new Int8Array(arrayBuffer);\nconsole.log(int8Array.length); // 8\nconst int16Array = new Int16Array(arrayBuffer);\nconsole.log(int16Array.length); // 4\n```\n\n## Blob\n\n`Blob`Â  æ˜¯ç”¨æ¥æ”¯æŒæ–‡ä»¶æ“ä½œçš„ã€‚ç®€å•çš„è¯´ï¼šåœ¨ `JS`Â  ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ„é€ å‡½æ•° Â `File`Â  å’Œ Â `Blob`, è€Œ `File`Â  ç»§æ‰¿äº†æ‰€æœ‰ `Blob`Â  çš„å±æ€§ã€‚\n\næ‰€ä»¥åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œ `File`Â  å¯¹è±¡å¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„ `Blob`Â  å¯¹è±¡ã€‚\n\n### åŠŸèƒ½\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1598082428365-89545715-5ef7-45d9-8610-82d830059ebe.png#align=left&display=inline&height=730&margin=%5Bobject%20Object%5D&name=image.png&originHeight=730&originWidth=1728&size=143528&status=done&style=none&width=1728)\n\n### æ„é€ å‡½æ•°\n\n```javascript\n/**\n * @description è¿”å›ä¸€ä¸ªåˆ›å»ºçš„ Blob å¯¹è±¡ï¼Œå…¶å†…å®¹ç”±å‚æ•°ä¸­ç»™å®šçš„æ•°ç»„ä¸²è”ç»„æˆ\n */\nBlob(blobParts[, options])\n```\n\n### å±æ€§\n\n| å±æ€§å                                                                        | æè¿°                                                                                   |\n| ----------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |\n| [Blob.size](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/size)Â  åªè¯» | BlobÂ  å¯¹è±¡ä¸­æ‰€åŒ…å«æ•°æ®çš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰                                                   |\n| [Blob.type](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/type)Â  åªè¯» | ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜è¯¥ Â BlobÂ  å¯¹è±¡æ‰€åŒ…å«æ•°æ®çš„ MIME ç±»å‹ã€‚å¦‚æœç±»å‹æœªçŸ¥ï¼Œåˆ™è¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ |\n\n### æ–¹æ³•\n\n| æ–¹æ³•å                                                                                                   | æè¿°                                                                                                            |\n| -------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |\n| [Blob.slice([start[, end[, contentType]]])](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/slice) | è¿”å›ä¸€ä¸ªæ–°çš„ Â BlobÂ  å¯¹è±¡ï¼ŒåŒ…å«äº†æº Â BlobÂ  å¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ã€‚                                              |\n| [Blob.stream()](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/stream)                            | è¿”å›ä¸€ä¸ªèƒ½è¯»å– blob å†…å®¹çš„ Â [ReadableStream](https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream)ã€‚ |\n\n| [Blob.text()](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/text)\n| è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„ UTF-8 æ ¼å¼çš„ Â [USVString](https://developer.mozilla.org/zh-CN/docs/Web/API/USVString)ã€‚ |\n| [Blob.arrayBuffer()](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/arrayBuffer) | è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„äºŒè¿›åˆ¶æ ¼å¼çš„ Â [ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer)Â  |\n\n## atob å’Œ btoa\n\nä» `IE10+`Â  æµè§ˆå™¨å¼€å§‹ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨å°±åŸç”Ÿæä¾›äº† `Base64`Â  ç¼–è§£ç çš„æ–¹æ³•ã€‚\n\n### Base64 è§£ç \n\n```javascript\nlet decodedData = window.atob(encodedData);\n```\n\n### Base64 ç¼–ç \n\n```javascript\nlet encodedData = window.btoa(stringToEncode);\n```\n\n## Canvas ä¸­çš„ ImageData å¯¹è±¡\n\n`ImageData`Â  å¯¹è±¡ä¸­å­˜å‚¨ç€ `canvas`Â  å¯¹è±¡çœŸå®çš„åƒç´ æ•°æ®ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåªè¯»å±æ€§ï¼š\n\n- `width`Â ï¼šå›¾ç‰‡å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ \n- `height`Â ï¼šå›¾ç‰‡é«˜åº¦ï¼Œå•ä½æ˜¯åƒç´ \n- `data`Â ï¼š `Uint8ClampedArray`Â  ç±»å‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ç€ `RGBA`Â  æ ¼å¼çš„æ•´å‹æ•°æ®ï¼ŒèŒƒå›´åœ¨ `0`Â  è‡³ `255`Â  ä¹‹é—´ï¼ˆåŒ…æ‹¬ `255`ï¼‰ã€‚\n\n### åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡\n\nä½¿ç”¨ `createImageData()` æ–¹æ³•å»åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œç©ºç™½çš„ `ImageData`Â  å¯¹è±¡ã€‚\n\n```javascript\nlet myImageData = ctx.createImageData(width, height);\n```\n\nä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å…·ä½“ç‰¹å®šå°ºå¯¸çš„`ImageData`å¯¹è±¡ã€‚æ‰€æœ‰åƒç´ è¢«é¢„è®¾ä¸ºé€æ˜é»‘ã€‚\n\n### å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\n\nä¸ºäº†è·å¾—ä¸€ä¸ªåŒ…å«ç”»å¸ƒåœºæ™¯åƒç´ æ•°æ®çš„ `ImageData`Â  å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨ `getImageData()`Â  æ–¹æ³•ï¼š\n\n```javascript\nlet myImageData = ctx.getImageData(left, top, width, height);\n```\n\n### åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\n\nä½ å¯ä»¥ç”¨ `putImageData()`Â  æ–¹æ³•å»å¯¹åœºæ™¯è¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥ã€‚\n\n```javascript\nctx.putImageData(myImageData, dx, dy);\n```\n\n### ä½¿ç”¨ toDataURL å°† canvas è½¬æ¢ä¸º data URI æ ¼å¼\n\n- åˆ›å»ºä¸€ä¸ª `<canvas>`Â  å…ƒç´ \n\n```html\n<canvas id=\"canvas\" width=\"5\" height=\"5\"></canvas>\n```\n\n- è·å–ä¸€ä¸ª `data-URL`\n\n```javascript\nlet canvas = document.getElementById(\"canvas\");\nlet dataURL = canvas.toDataURL();\nconsole.log(dataURL);\n// \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNby\n// blAAAADElEQVQImWNgoBMAAABpAAFEI8ARAAAAAElFTkSuQmCC\"\n```\n\nåŸºæœ¬æ‰€éœ€è¦çš„æŠ€æœ¯ç‚¹å·²ç»å…¨éƒ¨åˆ—å‡ºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°å›¾ç‰‡è£å‰ªçš„éœ€æ±‚\n\n## å®ç°å›¾ç‰‡è£å‰ª\n\n### æœ€ç»ˆæ•ˆæœ\n\n![image.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1598084805698-72d41a26-6ec6-4e5f-88d3-2662e3f05326.gif#align=left&display=inline&height=866&margin=%5Bobject%20Object%5D&name=image.gif&originHeight=866&originWidth=2216&size=3680927&status=done&style=none&width=2216)\n\n### ä»£ç \n\n```jsx\nimport React, { useState, useRef } from \"react\";\nimport { Input, Row, Col, Button } from \"antd\";\nimport { ScissorOutlined, PlusCircleOutlined, MinusCircleOutlined, UploadOutlined } from \"@ant-design/icons\";\n\nconst App = () => {\n  const imageRef = useRef(),\n    canvasRef = useRef(),\n    avatarRef = useRef(),\n    [state, setState] = useState({\n      file: null,\n      dataURL: \"\",\n      times: 1,\n      startX: 0,\n      startY: 0,\n      startDrag: false,\n      lastX: 0,\n      lastY: 0,\n      avatarDataUrl: \"\"\n    });\n\n  function drawImage(left = state.lastX, top = state.lastY) {\n    let image = imageRef.current;\n    let canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    let imageWidth = image.width;\n    let imageHeight = image.height;\n    if (imageWidth > imageHeight) {\n      let scale = canvas.width / canvas.height;\n      imageWidth = canvas.width * state.times;\n      imageHeight = imageHeight * scale * state.times;\n    } else {\n      let scale = canvas.height / canvas.width;\n      imageHeight = canvas.height * state.times;\n      imageWidth = imageWidth * scale * state.times;\n    }\n    ctx.drawImage(image, (canvas.width - imageWidth) / 2 + left, (canvas.height - imageHeight) / 2 + top, imageWidth, imageHeight);\n  }\n\n  function handleChange(event) {\n    let file = event.target.files[0];\n    let fileReader = new FileReader();\n    fileReader.onload = event => {\n      setState({\n        ...state,\n        file,\n        dataURL: event.target.result\n      });\n      imageRef.onload = () => drawImage();\n    };\n    fileReader.readAsDataURL(file);\n  }\n\n  function handleMouseDown(event) {\n    setState({\n      ...state,\n      startX: event.clientX,\n      startY: event.clientY,\n      startDrag: true\n    });\n  }\n\n  function handleMouseMove(event) {\n    if (state.startDrag) {\n      drawImage(event.clientX - state.startX + state.lastX, event.clientY - state.startY + state.lastY);\n    }\n  }\n\n  function handleMouseUp(event) {\n    setState({\n      ...state,\n      lastX: event.clientX - state.startX + state.lastX,\n      lastY: event.clientY - state.startY + state.lastY,\n      startDrag: false\n    });\n  }\n\n  function bigger() {\n    setState({\n      ...state,\n      times: state.times + 0.1\n    });\n    drawImage();\n  }\n\n  function smaller() {\n    setState({\n      ...state,\n      times: state.times - 0.1\n    });\n    drawImage();\n  }\n\n  function confirm() {\n    let canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n    const imageData = ctx.getImageData(100, 100, 100, 100);\n    let avatarCanvas = document.createElement(\"canvas\");\n    avatarCanvas.width = 100;\n    avatarCanvas.height = 100;\n    let avatarCtx = avatarCanvas.getContext(\"2d\");\n    avatarCtx.putImageData(imageData, 0, 0);\n    let avatarDataUrl = avatarCanvas.toDataURL();\n    setState({ ...state, avatarDataUrl });\n    avatarRef.current.src = avatarDataUrl;\n  }\n\n  function upload(event) {\n    console.log(state.avatarDataUrl);\n    let bytes = atob(state.avatarDataUrl.split(\",\")[1]);\n    console.log(\"bytes\", bytes);\n    let arrayBuffer = new ArrayBuffer(bytes.length);\n    let uInt8Array = new Uint8Array();\n    for (let i = 0; i < bytes.length; i++) {\n      uInt8Array[i] = bytes.charCodeAt[i];\n    }\n    let blob = new Blob([arrayBuffer], { type: \"image/png\" });\n    let xhr = new XMLHttpRequest();\n    let formData = new FormData();\n    formData.append(\"avatar\", blob);\n    xhr.open(\"POST\", \"/upload\", true);\n    xhr.send(formData);\n  }\n\n  return (\n    <div style={{ padding: \"10px\" }}>\n      <h2>å›¾ç‰‡è£å‰ªï¼Œé¢„è§ˆä»¥åŠä¸Šä¼ </h2>\n      <Input type=\"file\" accept=\"image/*\" onChange={handleChange} style={{ width: \"200px\" }} />\n      <Row>\n        <Col>{state.file && <img ref={imageRef} src={state.dataURL} alt=\"\" style={{ border: \"2px dashed #79D281\", width: \"400px\" }} />}</Col>\n      </Row>\n      <div onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp}>\n        {state.file && (\n          <Row>\n            <Col style={{ position: \"relative\" }}>\n              <canvas ref={canvasRef} width=\"300\" height=\"300\" style={{ border: \"2px dashed #632B21\" }}></canvas>\n              <div\n                style={{\n                  width: 100,\n                  height: 100,\n                  backgroundColor: \"blue\",\n                  opacity: 0.3,\n                  position: \"absolute\",\n                  left: 100,\n                  top: 100\n                }}></div>\n            </Col>\n            <Col>\n              <Button icon={<PlusCircleOutlined />} onClick={bigger}>\n                å˜å¤§\n              </Button>\n              <Button icon={<MinusCircleOutlined />} onClick={smaller}>\n                å˜å°\n              </Button>\n              <Button icon={<ScissorOutlined />} onClick={confirm}>\n                å‰ªåˆ‡\n              </Button>\n            </Col>\n          </Row>\n        )}\n      </div>\n      <div>{state.file && <img ref={avatarRef} alt=\"\" style={{ border: \"2px solid #85D6C7\" }} />}</div>\n      <div>\n        {state.file && (\n          <Button type=\"primary\" icon={<UploadOutlined />} onClick={upload}>\n            ä¸Šä¼ \n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n```\n\n### å®ç°\n\n#### ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\n\nç»™ `input`Â  ç»‘å®šäº‹ä»¶\n\n```jsx\nimport React, { useState, useRef } from \"react\";\n\nconst App = () => {\n  const imgRef = useRef();\n  const canvasRef = useRef();\n  const [file, setFile] = useState();\n  const [dataURL, setDataURL] = useState();\n  const [startX, setStartX] = useState(0);\n  const [startY, setStartY] = useState(0);\n  const [lastX, setLastX] = useState(0);\n  const [lastY, setLastY] = useState(0);\n  const [startDrag, setStartDrag] = useState(false);\n\n  const handleChange = event => {\n    let file = event.target.files[0];\n    let fileReader = new FileReader();\n    fileReader.onload = event => {\n      setFile(file);\n      setDataURL(event.target.result);\n      imageRef.current.onload = () => drawImage();\n    };\n    fileReader.readAsDataURL(file);\n  };\n\n  return (\n    <>\n      <input type=\"file\" onChange={handleChange} />\n\n      <img src=\"xxx\" ref={imgRef} />\n    </>\n  );\n};\n```\n\n`HTML5`Â  æ”¯æŒä» Â `input[type=file]`Â  å…ƒç´ ä¸­ç›´æ¥è·å–æ–‡ä»¶ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ã€‚\n\næ­¤å¤„ç”¨åˆ°äº† `FileReader`Â ï¼Œè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚çº¯æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶éƒ½å¯ä»¥è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯æœ¬åœ°æ–‡ä»¶å¿…é¡»æ˜¯ç»è¿‡ç”¨æˆ·å…è®¸ä¹‹åæ‰èƒ½è¯»å–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è¦åœ¨ `input[type=file]`Â  ä¸­é€‰æ‹©äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ æ‰å¯ä»¥è¯»å–åˆ°å®ƒã€‚\n\né€šè¿‡ `FileReader`Â  æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡æ–‡ä»¶è½¬åŒ–ä¸º `DataURL`Â ï¼Œå°±æ˜¯ä»¥ `data:image/png;base64`Â  å¼€å¤´çš„ä¸€ç§ `URL`Â ï¼Œç„¶åå¯ä»¥ç›´æ¥æ”¾åœ¨ `image.src`Â  é‡Œï¼Œæ­¤æ—¶æœ¬åœ°å›¾ç‰‡å°±ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n#### äºŒã€è·å–è£å‰ªåæ ‡\n\n- `mousedown`\n\nè¿™é‡Œè¦è®°å½•é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡ï¼Œå³ `startX`Â  å’Œ `startY`Â ï¼ŒåŒæ—¶å°†æ ‡è¯†ä½ `startDrag`Â  è®¾ä¸º `true`Â ï¼Œæ ‡è¯†é¼ æ ‡å¼€å§‹ç§»åŠ¨ã€‚\n\n```javascript\nconst handleMouseDown = event => {\n  setStartX(event.clientX);\n  setStartY(event.clientY);\n  setStartDrag(true);\n};\n```\n\n- `mousemove`\n\nåˆ¤æ–­ `startDrag`Â  ä¸º `true`ï¼ˆå³é¼ æ ‡å¼€å§‹ç§»åŠ¨ï¼‰ï¼Œç„¶åè®°å½•å¯¹åº”ç§»åŠ¨çš„è·ç¦»ã€‚\n\n```javascript\nconst handleMouseMove = event => {\n  if (startDrag) {\n    drawImage(event.clientX - startX + lastX, event.clientY - startY + lastY);\n  }\n};\n```\n\n- `mouseup`\n\nè¿™é‡Œè¦è®°å½•ä¸‹æœ€ç»ˆé¼ æ ‡çš„è½ç‚¹åæ ‡ï¼Œå¯¹åº”å°±æ˜¯ `lastX`Â  ä¸ `lastY`ã€‚\n\n```javascript\nconst handleMouseUp = event => {\n  setLastX(event.clientX - startX + lastX);\n  setLastY(event.clientY - startY + lastY);\n  setStartDrag(false);\n};\n```\n\n#### ä¸‰ã€è£å‰ªå›¾ç‰‡\n\nå°†å›¾ç‰‡æ”¾ç½®å…¥ `canvas`Â  æ—¶éœ€è¦è°ƒç”¨ `drawImage`Â :\n\n```javascript\ndrawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n```\n\n```javascript\nconst drawImage = (left = lastX, top = lastY) => {\n  let image = imgRef.current,\n    canvas = canvasRef.current,\n    ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  let imageWidth = image.width,\n    imageHeight = image.height;\n  if (imageWidth > imageHeight) {\n    let scale = canvas.width / canvas.height;\n    imageWidth = canvas.width * times;\n    imageHeight = imageHeight * scale * times;\n  } else {\n    let scale = canvas.height / canvas.width;\n    imageHeight = canvas.height * times;\n    imageWidth = imageWidth * scale * times;\n  }\n  ctx.drawImage(image, (canvas.width - imageWidth) / 2 + left, (canvas.height - imageHeight) / 2 + top, imageWidth, imageHeight);\n};\n```\n\nåŠ å…¥äº† `scale`ï¼Œè¿™ä¸ªå˜é‡æ˜¯ç”¨æ¥å®ç°å›¾ç‰‡æ”¾å¤§ã€ç¼©å°æ•ˆæœçš„ã€‚åŒæ—¶ä¼šåˆ¤æ–­å›¾ç‰‡çš„å®½ã€é«˜çš„å¤§å°å…³ç³»ï¼Œä»è€Œå®ç°å›¾ç‰‡åœ¨ `canvas`Â  ä¸­å¯¹åº”çš„é€‚é…ã€‚\n\n#### å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \n\nè¿™æ—¶æˆ‘ä»¬è¦è·å– `canvas`Â  ä¸­å›¾ç‰‡çš„ä¿¡æ¯ï¼Œç”¨ `toDataURL`Â  å°±å¯ä»¥è½¬æ¢æˆä¸Šé¢ç”¨åˆ°çš„ `DataURL`Â ã€‚\n\n```javascript\nconst confirm = () => {\n  let canvas = canvasRef.current;\n  let ctx = canvas.getContext(\"2d\");\n  const imageData = ctx.getImageData(100, 100, 100, 100);\n  let avatarCanvas = document.createElement(\"canvas\");\n  avatarCanvas.width = 100;\n  avatarCanvas.height = 100;\n  let avatarCtx = avatarCanvas.getContext(\"2d\");\n  avatarCtx.putImageData(imageData, 0, 0);\n  let avatarDataUrl = avatarCanvas.toDataURL();\n  setAvatarDataUrl(avatarDataUrl);\n  avatarRef.current.src = avatarDataUrl;\n};\n```\n\nç„¶åå–å‡ºå…¶ä¸­ `base64`Â  ä¿¡æ¯ï¼Œå†ç”¨ `window.atob`Â  è½¬æ¢æˆç”±äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä½† `window.atob`Â  è½¬æ¢åçš„ç»“æœä»ç„¶æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥ç»™ `Blob`Â  è¿˜æ˜¯ä¼šå‡ºé”™ã€‚æ‰€ä»¥åˆè¦ç”¨ `Uint8Array`Â  è½¬æ¢ä¸€ä¸‹ã€‚\n\nè¿™æ—¶å€™è£å‰ªåçš„æ–‡ä»¶å°±å‚¨å­˜åœ¨ `blob`Â  é‡Œäº†,æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“ä½œæ˜¯æ™®é€šæ–‡ä»¶ä¸€æ ·ï¼ŒåŠ å…¥åˆ° `FormData`Â  é‡Œï¼Œå¹¶ä¸Šä¼ è‡³æœåŠ¡å™¨äº†ã€‚\n\n```javascript\nconst upload = event => {\n  // console.log(\"æ–‡ä»¶url\", this.state.avatarDataUrl);\n  let bytes = atob(avatarDataUrl.split(\",\")[1]);\n  console.log(\"bytes\", bytes);\n  let arrayBuffer = new ArrayBuffer(bytes.length);\n  let uInt8Array = new Uint8Array();\n  for (let i = 0; i < bytes.length; i++) {\n    uInt8Array[i] = bytes.charCodeAt[i];\n  }\n  let blob = new Blob([arrayBuffer], { type: \"image/png\" });\n  let xhr = new XMLHttpRequest();\n  let formData = new FormData();\n  formData.append(\"avatar\", blob);\n  xhr.open(\"POST\", \"/upload\", true);\n  xhr.send(formData);\n};\n```\n","source":"_posts/å‰ç«¯/ä»å›¾ç‰‡è£å‰ªäº†è§£ js äºŒè¿›åˆ¶å¸¸ç”¨ api.md","raw":"---\ntitle: ä»å›¾ç‰‡è£å‰ªäº†è§£ js äºŒè¿›åˆ¶å¸¸ç”¨ api\ndate: 2020-11-20\ncategories: [å‰ç«¯, js]\ntags: \n  - äºŒè¿›åˆ¶\n---\n\n## éœ€æ±‚åˆ†æ\n\n### äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1598083455644-f4308101-1403-4566-ae7d-09a0c4fa5ffe.png#align=left&display=inline&height=602&margin=%5Bobject%20Object%5D&name=image.png&originHeight=602&originWidth=889&size=126895&status=done&style=none&width=889)\n\n### æ­¥éª¤\n\n1. è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\n1. è·å–è£å‰ªåæ ‡\n1. è£å‰ªå›¾ç‰‡\n1. è¯»å–è£å‰ªåçš„å›¾ç‰‡é¢„è§ˆå¹¶ä¸Šä¼ \n\næ¥ä¸‹æ¥å…ˆäº†è§£ä¸‹äºŒè¿›åˆ¶ç›¸å…³çš„ `API`Â  ä»¥æ–¹ä¾¿å®ç°æœ¬éœ€æ±‚ã€‚\n\n## FileReader\n\n> `HTML5`å®šä¹‰äº†`FileReader`ä½œä¸ºæ–‡ä»¶`API`çš„é‡è¦æˆå‘˜ç”¨äºè¯»å–æ–‡ä»¶ï¼Œæ ¹æ®`W3C`çš„å®šä¹‰ï¼Œ`FileReader`æ¥å£æä¾›äº†è¯»å–æ–‡ä»¶çš„æ–¹æ³•å’ŒåŒ…å«è¯»å–ç»“æœçš„äº‹ä»¶æ¨¡å‹ã€‚\n\n### åˆ›å»ºå®ä¾‹\n\n```javascript\nconst fileReader = new FileReader();\n```\n\n### å±æ€§\n\n| å±æ€§å                                                                                | æè¿°                                                                                                               |\n| ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------ |\n| [error](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/error)            | ä¸€ä¸ª[DOMException](https://developer.mozilla.org/zh-CN/docs/Web/API/DOMException)ï¼Œè¡¨ç¤ºåœ¨è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿçš„é”™è¯¯ Â ã€‚  |\n| [readyState](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readyState)Â  | ä¸€ä¸ªæ•°å­—ï¼Œç”¨æ¥è¡¨ç¤º Â [FileReader](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader)Â API çš„ä¸‰ç§å¯èƒ½çŠ¶æ€ã€‚ |\n| [result](https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/result)          | æ–‡ä»¶çš„å†…å®¹ã€‚è¯¥å±æ€§ä»…åœ¨è¯»å–æ“ä½œå®Œæˆåæ‰æœ‰æ•ˆï¼Œæ•°æ®çš„æ ¼å¼å–å†³äºä½¿ç”¨å“ªä¸ªæ–¹æ³•æ¥å¯åŠ¨è¯»å–æ“ä½œã€‚                           |\n\n### æ–¹æ³•\n\n| æ–¹æ³•å             | æè¿°                                                  |\n| ------------------ | ----------------------------------------------------- |\n| abort              | ä¸­æ­¢è¯»å–æ“ä½œ                                          |\n| readAsArrayBuffer  | å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â ArrayBufferÂ  å¯¹è±¡è¡¨ç¤º |\n| readAsBinaryString | å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœä¸ºæ–‡ä»¶çš„äºŒè¿›åˆ¶ä¸²          |\n| readAsDataURL      | å¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â data:urlÂ  çš„å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º  |\n| readAsText         | å¼‚æ­¥æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º          |\n\n### äº‹ä»¶\n\n| äº‹ä»¶å      | æè¿°                           |\n| ----------- | ------------------------------ |\n| onabort     | ä¸­æ–­æ—¶è§¦å‘                     |\n| onerror     | å‡ºé”™æ—¶è§¦å‘                     |\n| onload      | æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘         |\n| onloadend   | è¯»å–å®Œæˆè§¦å‘ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰ |\n| onloadstart | è¯»å–å¼€å§‹æ—¶è§¦å‘                 |\n| onprogress  | è¯»å–ä¸­                         |\n\n### ç¤ºä¾‹\n\n```jsx\n/**\n * @description æŠŠä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼è¯»å–å‡ºæ¥\n */\n<input type=\"file\" id=\"upload\" />\n\nconst upload = document.getElementById(\"upload\");\nupload.addEventListener(\"change\", function() {\n\tconst fileReader = new FileReader();\n  fileReader.onload = function() {\n  \tconst reult = fileReader.result;\n    console.log(result):\n  }\n}, false);\n```\n\n## ArrayBuffer / TypedArray / DataView\n\n### ArrayBuffer\n\n#### åŠŸèƒ½\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1597991690421-351d07c1-8366-469f-8912-d094078e5986.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=1746&size=58281&status=done&style=none&width=873)\n\n#### ä»‹ç»\n\n`FileReader`Â  æœ‰ä¸ª `readAsArrayBuffer()`Â  æ–¹æ³•ï¼Œå¦‚æœè¢«è¯»å–çš„æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œé‚£ä¹ˆç”¨æ¬¡æ–¹æ³•è¯»å–å°†æ˜¯æœ€åˆé€‚çš„æ–¹æ¡ˆï¼Œè¯»å–å‡ºæ¥çš„æ•°æ®å°†æ˜¯ä¸€ä¸ª `ArrayBuffer`Â  å¯¹è±¡ã€‚\n\n#### å®šä¹‰\n\n> `ArrayBuffer`Â  å¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚`ArrayBuffer`Â  ä¸èƒ½ç›´æ¥æ“ä½œ,è€Œæ˜¯è¦é€šè¿‡**ç±»å‹æ•°ç»„å¯¹è±¡**æˆ– Â **`DataView`\\*\\***Â  å¯¹è±¡\\*\\*æ¥æ“ä½œ,å®ƒä»¬ä¼šå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¡¨ç¤ºä¸ºç‰¹å®šçš„æ ¼å¼,å¹¶é€šè¿‡è¿™äº›æ ¼å¼æ¥è¯»å†™ç¼“å†²åŒºçš„å†…å®¹.\n\n`ArrayBuffer`ä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ†é…ä¸€æ®µå¯ä»¥å­˜æ”¾æ•°æ®çš„è¿ç»­å†…å­˜åŒºåŸŸã€‚\n\n```javascript\nconst arrayBuffer = new ArrayBuffer(8);\n// ArrayBuffer å¯¹è±¡æœ‰å®ä¾‹å±æ€§ byteLength ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹å ç”¨çš„å†…å­˜å­—èŠ‚é•¿åº¦ï¼ˆå•ä½å­—èŠ‚ï¼‰\nconsole.log(arrayBuffer.byteLength);\n```\n\n#### å±æ€§\n\n| å±æ€§å                                                                                                                                      | æè¿°                                                                                     |\n| ------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- |\n| ArrayBuffer.lengthÂ                                                                                                                          | ArrayBufferÂ  æ„é€ å‡½æ•°çš„ lengthÂ  å±æ€§ï¼Œå…¶å€¼ä¸º 1Â ã€‚                                        |\n| [ArrayBuffer.prototype.byteLength](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/byteLength) | åªè¯»å±æ€§ï¼Œè¡¨ç¤º Â ArrayBufferÂ  çš„ byteÂ  çš„å¤§å°ï¼Œåœ¨ ArrayBufferÂ  æ„é€ å®Œæˆæ—¶ç”Ÿæˆï¼Œä¸å¯æ”¹å˜ã€‚ |\n\n> ç”±äºæ— æ³•å¯¹ Â `Arraybuffer`Â  ç›´æ¥è¿›è¡Œæ“ä½œ,æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¶ä»–å¯¹è±¡æ¥æ“ä½œ. æ‰€æœ‰å°±æœ‰äº† Â **`TypedArray`\\*\\***(ç±»å‹æ•°ç»„å¯¹è±¡)**å’Œ Â **`DataView`\\***\\*å¯¹è±¡**ã€‚\n\n### DataView\n\nä¸Šæ–¹ä»£ç ç”Ÿæˆäº†ä¸€æ®µ 8 å­—èŠ‚çš„å†…å­˜åŒºåŸŸã€‚å…¶ä¸­æ¯ä¸ªå­—èŠ‚çš„é»˜è®¤å€¼éƒ½æ˜¯ 0ã€‚\n\nä¸ºäº†è¯»å’Œå†™è¿™æ®µå†…å®¹ï¼Œéœ€è¦ä¸ºå®ƒæŒ‡å®šè§†å›¾ã€‚ `DataView`Â  è§†å›¾çš„åˆ›å»ºï¼Œéœ€è¦æä¾› `ArrayBuffer` å¯¹è±¡å®ä¾‹ä½œä¸ºå‚æ•°ã€‚\n\n`DataView`Â  è§†å›¾æ˜¯ä¸€ä¸ªå¯ä»¥ä»äºŒè¿›åˆ¶ `ArrayBuffer`Â  å¯¹è±¡ä¸­è¯»å†™å¤šç§æ•°å€¼ç±»å‹çš„åº•å±‚æ¥å£ã€‚\n\n- `setInt8()`Â  ä» `DataView`Â  èµ·å§‹ä½ç½®ä»¥ `byte`Â  ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ `byteOffset`Â  å¤„å­˜å‚¨ä¸€ä¸ª `8-bit`Â  æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚\n- `getInt8()`Â  ä» `DataView`Â  èµ·å§‹ä½ç½®ä»¥ `byte` ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ `byteOffset` å¤„è·å–ä¸€ä¸ª `8-bit` æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚\n\n#### è°ƒç”¨\n\n```javascript\nnew DataView(buffer, [, byteOffset [, byteLength]])\n```\n\n#### å‚æ•°\n\n| å‚æ•°å            | æè¿°                                                                                                                                                                                                                                                                                     |\n| ----------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| buffer            | ä¸€ä¸ª å·²ç»å­˜åœ¨çš„[ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer)Â  æˆ– Â [SharedArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)Â Â  å¯¹è±¡ï¼ŒDataViewÂ  å¯¹è±¡çš„æ•°æ®æºã€‚ |\n| byteOffsetÂ (å¯é€‰) | æ­¤ Â DataViewÂ  å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨ buffer ä¸­çš„å­—èŠ‚åç§»ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ã€‚                                                                                                                                                                                               |\n| byteLengthÂ (å¯é€‰) | æ­¤ DataView å¯¹è±¡çš„å­—èŠ‚é•¿åº¦ã€‚å¦‚æœæœªæŒ‡å®šï¼Œè¿™ä¸ªè§†å›¾çš„é•¿åº¦å°†åŒ¹é… buffer çš„é•¿åº¦ã€‚                                                                                                                                                                                                             |\n\n#### å¼‚å¸¸\n\n- [RangeError](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RangeError)\n\nå¦‚æœ `byteOffset` æˆ–è€… `byteLength `å‚æ•°çš„å€¼å¯¼è‡´è§†å›¾è¶…å‡ºäº† `buffer` çš„ç»“æŸä½ç½®å°±ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚\n\nä¾‹å¦‚ï¼Œå‡è®¾ `buffer`Â ï¼ˆç¼“å†²å¯¹è±¡ï¼‰æ˜¯ `16` å­—èŠ‚é•¿åº¦ï¼Œ`byteOffset` å‚æ•°ä¸º `8`ï¼Œ`byteLength` å‚æ•°ä¸º Â `10`ï¼Œè¿™ä¸ªé”™è¯¯å°±ä¼šæŠ›å‡ºï¼Œè¿™æ˜¯å› ä¸ºç»“æœè§†å›¾è¯•å›¾è¶…å‡º `buffer` å¯¹è±¡çš„æ€»é•¿åº¦ `2` ä¸ªå­—èŠ‚ã€‚\n\n#### ç¤ºä¾‹\n\n```javascript\nlet arrayBuffer = new ArrayBuffer();\nconsole.log(arrayBuffer.byteLength); // 2\nlet dataView = new DataView(buffer);\ndataView.setInt8(0, 1);\ndataView.setInt8(1, 2);\nconsole.log(dataView.getInt8(0)); // 1\nconsole.log(dataView.getInt8(1)); // 2\nconsole.log(dataView.getInt16(0)); // 258\n```\n\n### TypedArray\n\nå¦ä¸€ç§`TypedArray`è§†å›¾ï¼Œä¸`DataView`è§†å›¾çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ç»„æ„é€ å‡½æ•°ï¼Œä»£è¡¨ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚\n\n`TypedArray`å¯¹è±¡æè¿°äº†ä¸€ä¸ªåº•å±‚çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å­˜åŒºï¼ˆ`binary data buffer`ï¼‰çš„ä¸€ä¸ªç±»æ•°ç»„è§†å›¾ï¼ˆ`view`ï¼‰ã€‚ä½†å®ƒæœ¬èº«ä¸å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œç”šè‡³æ— æ³•è®¿é—®ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæ¥å£ï¼Œå®ƒæœ‰å¾ˆå¤šçš„å®ç°ã€‚\n\n#### å®ç°æ–¹æ³•\n\n| ç±»å‹        | å•ä¸ªå…ƒç´ å€¼çš„èŒƒå›´ | å¤§å°ï¼ˆbytesï¼‰ | æè¿°                  |\n| ----------- | ---------------- | ------------- | --------------------- |\n| Int8Array   | -128 to 127      | 1             | 8 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°  |\n| Uint8Array  | 0 to 255         | 1             | 8 ä½æ— ç¬¦å·æ•´æ•°        |\n| Int16Array  | -32768 to 32767  | 2             | 16 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•° |\n| Uint16Array | 0 to 65535       | 2             | 16 ä½æ— ç¬¦å·æ•´æ•°       |\n\n#### ç¤ºä¾‹\n\n```javascript\nconst arrayBuffer = new ArrayBuffer(8);\nconsole.log(arrayBuffer.byteLength); // 8\nconst int8Array = new Int8Array(arrayBuffer);\nconsole.log(int8Array.length); // 8\nconst int16Array = new Int16Array(arrayBuffer);\nconsole.log(int16Array.length); // 4\n```\n\n## Blob\n\n`Blob`Â  æ˜¯ç”¨æ¥æ”¯æŒæ–‡ä»¶æ“ä½œçš„ã€‚ç®€å•çš„è¯´ï¼šåœ¨ `JS`Â  ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ„é€ å‡½æ•° Â `File`Â  å’Œ Â `Blob`, è€Œ `File`Â  ç»§æ‰¿äº†æ‰€æœ‰ `Blob`Â  çš„å±æ€§ã€‚\n\næ‰€ä»¥åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œ `File`Â  å¯¹è±¡å¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„ `Blob`Â  å¯¹è±¡ã€‚\n\n### åŠŸèƒ½\n\n![image.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1598082428365-89545715-5ef7-45d9-8610-82d830059ebe.png#align=left&display=inline&height=730&margin=%5Bobject%20Object%5D&name=image.png&originHeight=730&originWidth=1728&size=143528&status=done&style=none&width=1728)\n\n### æ„é€ å‡½æ•°\n\n```javascript\n/**\n * @description è¿”å›ä¸€ä¸ªåˆ›å»ºçš„ Blob å¯¹è±¡ï¼Œå…¶å†…å®¹ç”±å‚æ•°ä¸­ç»™å®šçš„æ•°ç»„ä¸²è”ç»„æˆ\n */\nBlob(blobParts[, options])\n```\n\n### å±æ€§\n\n| å±æ€§å                                                                        | æè¿°                                                                                   |\n| ----------------------------------------------------------------------------- | -------------------------------------------------------------------------------------- |\n| [Blob.size](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/size)Â  åªè¯» | BlobÂ  å¯¹è±¡ä¸­æ‰€åŒ…å«æ•°æ®çš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰                                                   |\n| [Blob.type](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/type)Â  åªè¯» | ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜è¯¥ Â BlobÂ  å¯¹è±¡æ‰€åŒ…å«æ•°æ®çš„ MIME ç±»å‹ã€‚å¦‚æœç±»å‹æœªçŸ¥ï¼Œåˆ™è¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚ |\n\n### æ–¹æ³•\n\n| æ–¹æ³•å                                                                                                   | æè¿°                                                                                                            |\n| -------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------- |\n| [Blob.slice([start[, end[, contentType]]])](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/slice) | è¿”å›ä¸€ä¸ªæ–°çš„ Â BlobÂ  å¯¹è±¡ï¼ŒåŒ…å«äº†æº Â BlobÂ  å¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ã€‚                                              |\n| [Blob.stream()](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/stream)                            | è¿”å›ä¸€ä¸ªèƒ½è¯»å– blob å†…å®¹çš„ Â [ReadableStream](https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream)ã€‚ |\n\n| [Blob.text()](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/text)\n| è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„ UTF-8 æ ¼å¼çš„ Â [USVString](https://developer.mozilla.org/zh-CN/docs/Web/API/USVString)ã€‚ |\n| [Blob.arrayBuffer()](https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/arrayBuffer) | è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„äºŒè¿›åˆ¶æ ¼å¼çš„ Â [ArrayBuffer](https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer)Â  |\n\n## atob å’Œ btoa\n\nä» `IE10+`Â  æµè§ˆå™¨å¼€å§‹ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨å°±åŸç”Ÿæä¾›äº† `Base64`Â  ç¼–è§£ç çš„æ–¹æ³•ã€‚\n\n### Base64 è§£ç \n\n```javascript\nlet decodedData = window.atob(encodedData);\n```\n\n### Base64 ç¼–ç \n\n```javascript\nlet encodedData = window.btoa(stringToEncode);\n```\n\n## Canvas ä¸­çš„ ImageData å¯¹è±¡\n\n`ImageData`Â  å¯¹è±¡ä¸­å­˜å‚¨ç€ `canvas`Â  å¯¹è±¡çœŸå®çš„åƒç´ æ•°æ®ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåªè¯»å±æ€§ï¼š\n\n- `width`Â ï¼šå›¾ç‰‡å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ \n- `height`Â ï¼šå›¾ç‰‡é«˜åº¦ï¼Œå•ä½æ˜¯åƒç´ \n- `data`Â ï¼š `Uint8ClampedArray`Â  ç±»å‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ç€ `RGBA`Â  æ ¼å¼çš„æ•´å‹æ•°æ®ï¼ŒèŒƒå›´åœ¨ `0`Â  è‡³ `255`Â  ä¹‹é—´ï¼ˆåŒ…æ‹¬ `255`ï¼‰ã€‚\n\n### åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡\n\nä½¿ç”¨ `createImageData()` æ–¹æ³•å»åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œç©ºç™½çš„ `ImageData`Â  å¯¹è±¡ã€‚\n\n```javascript\nlet myImageData = ctx.createImageData(width, height);\n```\n\nä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å…·ä½“ç‰¹å®šå°ºå¯¸çš„`ImageData`å¯¹è±¡ã€‚æ‰€æœ‰åƒç´ è¢«é¢„è®¾ä¸ºé€æ˜é»‘ã€‚\n\n### å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\n\nä¸ºäº†è·å¾—ä¸€ä¸ªåŒ…å«ç”»å¸ƒåœºæ™¯åƒç´ æ•°æ®çš„ `ImageData`Â  å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨ `getImageData()`Â  æ–¹æ³•ï¼š\n\n```javascript\nlet myImageData = ctx.getImageData(left, top, width, height);\n```\n\n### åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\n\nä½ å¯ä»¥ç”¨ `putImageData()`Â  æ–¹æ³•å»å¯¹åœºæ™¯è¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥ã€‚\n\n```javascript\nctx.putImageData(myImageData, dx, dy);\n```\n\n### ä½¿ç”¨ toDataURL å°† canvas è½¬æ¢ä¸º data URI æ ¼å¼\n\n- åˆ›å»ºä¸€ä¸ª `<canvas>`Â  å…ƒç´ \n\n```html\n<canvas id=\"canvas\" width=\"5\" height=\"5\"></canvas>\n```\n\n- è·å–ä¸€ä¸ª `data-URL`\n\n```javascript\nlet canvas = document.getElementById(\"canvas\");\nlet dataURL = canvas.toDataURL();\nconsole.log(dataURL);\n// \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNby\n// blAAAADElEQVQImWNgoBMAAABpAAFEI8ARAAAAAElFTkSuQmCC\"\n```\n\nåŸºæœ¬æ‰€éœ€è¦çš„æŠ€æœ¯ç‚¹å·²ç»å…¨éƒ¨åˆ—å‡ºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°å›¾ç‰‡è£å‰ªçš„éœ€æ±‚\n\n## å®ç°å›¾ç‰‡è£å‰ª\n\n### æœ€ç»ˆæ•ˆæœ\n\n![image.gif](https://cdn.nlark.com/yuque/0/2020/gif/732231/1598084805698-72d41a26-6ec6-4e5f-88d3-2662e3f05326.gif#align=left&display=inline&height=866&margin=%5Bobject%20Object%5D&name=image.gif&originHeight=866&originWidth=2216&size=3680927&status=done&style=none&width=2216)\n\n### ä»£ç \n\n```jsx\nimport React, { useState, useRef } from \"react\";\nimport { Input, Row, Col, Button } from \"antd\";\nimport { ScissorOutlined, PlusCircleOutlined, MinusCircleOutlined, UploadOutlined } from \"@ant-design/icons\";\n\nconst App = () => {\n  const imageRef = useRef(),\n    canvasRef = useRef(),\n    avatarRef = useRef(),\n    [state, setState] = useState({\n      file: null,\n      dataURL: \"\",\n      times: 1,\n      startX: 0,\n      startY: 0,\n      startDrag: false,\n      lastX: 0,\n      lastY: 0,\n      avatarDataUrl: \"\"\n    });\n\n  function drawImage(left = state.lastX, top = state.lastY) {\n    let image = imageRef.current;\n    let canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    let imageWidth = image.width;\n    let imageHeight = image.height;\n    if (imageWidth > imageHeight) {\n      let scale = canvas.width / canvas.height;\n      imageWidth = canvas.width * state.times;\n      imageHeight = imageHeight * scale * state.times;\n    } else {\n      let scale = canvas.height / canvas.width;\n      imageHeight = canvas.height * state.times;\n      imageWidth = imageWidth * scale * state.times;\n    }\n    ctx.drawImage(image, (canvas.width - imageWidth) / 2 + left, (canvas.height - imageHeight) / 2 + top, imageWidth, imageHeight);\n  }\n\n  function handleChange(event) {\n    let file = event.target.files[0];\n    let fileReader = new FileReader();\n    fileReader.onload = event => {\n      setState({\n        ...state,\n        file,\n        dataURL: event.target.result\n      });\n      imageRef.onload = () => drawImage();\n    };\n    fileReader.readAsDataURL(file);\n  }\n\n  function handleMouseDown(event) {\n    setState({\n      ...state,\n      startX: event.clientX,\n      startY: event.clientY,\n      startDrag: true\n    });\n  }\n\n  function handleMouseMove(event) {\n    if (state.startDrag) {\n      drawImage(event.clientX - state.startX + state.lastX, event.clientY - state.startY + state.lastY);\n    }\n  }\n\n  function handleMouseUp(event) {\n    setState({\n      ...state,\n      lastX: event.clientX - state.startX + state.lastX,\n      lastY: event.clientY - state.startY + state.lastY,\n      startDrag: false\n    });\n  }\n\n  function bigger() {\n    setState({\n      ...state,\n      times: state.times + 0.1\n    });\n    drawImage();\n  }\n\n  function smaller() {\n    setState({\n      ...state,\n      times: state.times - 0.1\n    });\n    drawImage();\n  }\n\n  function confirm() {\n    let canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n    const imageData = ctx.getImageData(100, 100, 100, 100);\n    let avatarCanvas = document.createElement(\"canvas\");\n    avatarCanvas.width = 100;\n    avatarCanvas.height = 100;\n    let avatarCtx = avatarCanvas.getContext(\"2d\");\n    avatarCtx.putImageData(imageData, 0, 0);\n    let avatarDataUrl = avatarCanvas.toDataURL();\n    setState({ ...state, avatarDataUrl });\n    avatarRef.current.src = avatarDataUrl;\n  }\n\n  function upload(event) {\n    console.log(state.avatarDataUrl);\n    let bytes = atob(state.avatarDataUrl.split(\",\")[1]);\n    console.log(\"bytes\", bytes);\n    let arrayBuffer = new ArrayBuffer(bytes.length);\n    let uInt8Array = new Uint8Array();\n    for (let i = 0; i < bytes.length; i++) {\n      uInt8Array[i] = bytes.charCodeAt[i];\n    }\n    let blob = new Blob([arrayBuffer], { type: \"image/png\" });\n    let xhr = new XMLHttpRequest();\n    let formData = new FormData();\n    formData.append(\"avatar\", blob);\n    xhr.open(\"POST\", \"/upload\", true);\n    xhr.send(formData);\n  }\n\n  return (\n    <div style={{ padding: \"10px\" }}>\n      <h2>å›¾ç‰‡è£å‰ªï¼Œé¢„è§ˆä»¥åŠä¸Šä¼ </h2>\n      <Input type=\"file\" accept=\"image/*\" onChange={handleChange} style={{ width: \"200px\" }} />\n      <Row>\n        <Col>{state.file && <img ref={imageRef} src={state.dataURL} alt=\"\" style={{ border: \"2px dashed #79D281\", width: \"400px\" }} />}</Col>\n      </Row>\n      <div onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp}>\n        {state.file && (\n          <Row>\n            <Col style={{ position: \"relative\" }}>\n              <canvas ref={canvasRef} width=\"300\" height=\"300\" style={{ border: \"2px dashed #632B21\" }}></canvas>\n              <div\n                style={{\n                  width: 100,\n                  height: 100,\n                  backgroundColor: \"blue\",\n                  opacity: 0.3,\n                  position: \"absolute\",\n                  left: 100,\n                  top: 100\n                }}></div>\n            </Col>\n            <Col>\n              <Button icon={<PlusCircleOutlined />} onClick={bigger}>\n                å˜å¤§\n              </Button>\n              <Button icon={<MinusCircleOutlined />} onClick={smaller}>\n                å˜å°\n              </Button>\n              <Button icon={<ScissorOutlined />} onClick={confirm}>\n                å‰ªåˆ‡\n              </Button>\n            </Col>\n          </Row>\n        )}\n      </div>\n      <div>{state.file && <img ref={avatarRef} alt=\"\" style={{ border: \"2px solid #85D6C7\" }} />}</div>\n      <div>\n        {state.file && (\n          <Button type=\"primary\" icon={<UploadOutlined />} onClick={upload}>\n            ä¸Šä¼ \n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n```\n\n### å®ç°\n\n#### ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\n\nç»™ `input`Â  ç»‘å®šäº‹ä»¶\n\n```jsx\nimport React, { useState, useRef } from \"react\";\n\nconst App = () => {\n  const imgRef = useRef();\n  const canvasRef = useRef();\n  const [file, setFile] = useState();\n  const [dataURL, setDataURL] = useState();\n  const [startX, setStartX] = useState(0);\n  const [startY, setStartY] = useState(0);\n  const [lastX, setLastX] = useState(0);\n  const [lastY, setLastY] = useState(0);\n  const [startDrag, setStartDrag] = useState(false);\n\n  const handleChange = event => {\n    let file = event.target.files[0];\n    let fileReader = new FileReader();\n    fileReader.onload = event => {\n      setFile(file);\n      setDataURL(event.target.result);\n      imageRef.current.onload = () => drawImage();\n    };\n    fileReader.readAsDataURL(file);\n  };\n\n  return (\n    <>\n      <input type=\"file\" onChange={handleChange} />\n\n      <img src=\"xxx\" ref={imgRef} />\n    </>\n  );\n};\n```\n\n`HTML5`Â  æ”¯æŒä» Â `input[type=file]`Â  å…ƒç´ ä¸­ç›´æ¥è·å–æ–‡ä»¶ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ã€‚\n\næ­¤å¤„ç”¨åˆ°äº† `FileReader`Â ï¼Œè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚çº¯æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶éƒ½å¯ä»¥è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯æœ¬åœ°æ–‡ä»¶å¿…é¡»æ˜¯ç»è¿‡ç”¨æˆ·å…è®¸ä¹‹åæ‰èƒ½è¯»å–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è¦åœ¨ `input[type=file]`Â  ä¸­é€‰æ‹©äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ æ‰å¯ä»¥è¯»å–åˆ°å®ƒã€‚\n\né€šè¿‡ `FileReader`Â  æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡æ–‡ä»¶è½¬åŒ–ä¸º `DataURL`Â ï¼Œå°±æ˜¯ä»¥ `data:image/png;base64`Â  å¼€å¤´çš„ä¸€ç§ `URL`Â ï¼Œç„¶åå¯ä»¥ç›´æ¥æ”¾åœ¨ `image.src`Â  é‡Œï¼Œæ­¤æ—¶æœ¬åœ°å›¾ç‰‡å°±ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n#### äºŒã€è·å–è£å‰ªåæ ‡\n\n- `mousedown`\n\nè¿™é‡Œè¦è®°å½•é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡ï¼Œå³ `startX`Â  å’Œ `startY`Â ï¼ŒåŒæ—¶å°†æ ‡è¯†ä½ `startDrag`Â  è®¾ä¸º `true`Â ï¼Œæ ‡è¯†é¼ æ ‡å¼€å§‹ç§»åŠ¨ã€‚\n\n```javascript\nconst handleMouseDown = event => {\n  setStartX(event.clientX);\n  setStartY(event.clientY);\n  setStartDrag(true);\n};\n```\n\n- `mousemove`\n\nåˆ¤æ–­ `startDrag`Â  ä¸º `true`ï¼ˆå³é¼ æ ‡å¼€å§‹ç§»åŠ¨ï¼‰ï¼Œç„¶åè®°å½•å¯¹åº”ç§»åŠ¨çš„è·ç¦»ã€‚\n\n```javascript\nconst handleMouseMove = event => {\n  if (startDrag) {\n    drawImage(event.clientX - startX + lastX, event.clientY - startY + lastY);\n  }\n};\n```\n\n- `mouseup`\n\nè¿™é‡Œè¦è®°å½•ä¸‹æœ€ç»ˆé¼ æ ‡çš„è½ç‚¹åæ ‡ï¼Œå¯¹åº”å°±æ˜¯ `lastX`Â  ä¸ `lastY`ã€‚\n\n```javascript\nconst handleMouseUp = event => {\n  setLastX(event.clientX - startX + lastX);\n  setLastY(event.clientY - startY + lastY);\n  setStartDrag(false);\n};\n```\n\n#### ä¸‰ã€è£å‰ªå›¾ç‰‡\n\nå°†å›¾ç‰‡æ”¾ç½®å…¥ `canvas`Â  æ—¶éœ€è¦è°ƒç”¨ `drawImage`Â :\n\n```javascript\ndrawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n```\n\n```javascript\nconst drawImage = (left = lastX, top = lastY) => {\n  let image = imgRef.current,\n    canvas = canvasRef.current,\n    ctx = canvas.getContext(\"2d\");\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  let imageWidth = image.width,\n    imageHeight = image.height;\n  if (imageWidth > imageHeight) {\n    let scale = canvas.width / canvas.height;\n    imageWidth = canvas.width * times;\n    imageHeight = imageHeight * scale * times;\n  } else {\n    let scale = canvas.height / canvas.width;\n    imageHeight = canvas.height * times;\n    imageWidth = imageWidth * scale * times;\n  }\n  ctx.drawImage(image, (canvas.width - imageWidth) / 2 + left, (canvas.height - imageHeight) / 2 + top, imageWidth, imageHeight);\n};\n```\n\nåŠ å…¥äº† `scale`ï¼Œè¿™ä¸ªå˜é‡æ˜¯ç”¨æ¥å®ç°å›¾ç‰‡æ”¾å¤§ã€ç¼©å°æ•ˆæœçš„ã€‚åŒæ—¶ä¼šåˆ¤æ–­å›¾ç‰‡çš„å®½ã€é«˜çš„å¤§å°å…³ç³»ï¼Œä»è€Œå®ç°å›¾ç‰‡åœ¨ `canvas`Â  ä¸­å¯¹åº”çš„é€‚é…ã€‚\n\n#### å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \n\nè¿™æ—¶æˆ‘ä»¬è¦è·å– `canvas`Â  ä¸­å›¾ç‰‡çš„ä¿¡æ¯ï¼Œç”¨ `toDataURL`Â  å°±å¯ä»¥è½¬æ¢æˆä¸Šé¢ç”¨åˆ°çš„ `DataURL`Â ã€‚\n\n```javascript\nconst confirm = () => {\n  let canvas = canvasRef.current;\n  let ctx = canvas.getContext(\"2d\");\n  const imageData = ctx.getImageData(100, 100, 100, 100);\n  let avatarCanvas = document.createElement(\"canvas\");\n  avatarCanvas.width = 100;\n  avatarCanvas.height = 100;\n  let avatarCtx = avatarCanvas.getContext(\"2d\");\n  avatarCtx.putImageData(imageData, 0, 0);\n  let avatarDataUrl = avatarCanvas.toDataURL();\n  setAvatarDataUrl(avatarDataUrl);\n  avatarRef.current.src = avatarDataUrl;\n};\n```\n\nç„¶åå–å‡ºå…¶ä¸­ `base64`Â  ä¿¡æ¯ï¼Œå†ç”¨ `window.atob`Â  è½¬æ¢æˆç”±äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä½† `window.atob`Â  è½¬æ¢åçš„ç»“æœä»ç„¶æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥ç»™ `Blob`Â  è¿˜æ˜¯ä¼šå‡ºé”™ã€‚æ‰€ä»¥åˆè¦ç”¨ `Uint8Array`Â  è½¬æ¢ä¸€ä¸‹ã€‚\n\nè¿™æ—¶å€™è£å‰ªåçš„æ–‡ä»¶å°±å‚¨å­˜åœ¨ `blob`Â  é‡Œäº†,æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“ä½œæ˜¯æ™®é€šæ–‡ä»¶ä¸€æ ·ï¼ŒåŠ å…¥åˆ° `FormData`Â  é‡Œï¼Œå¹¶ä¸Šä¼ è‡³æœåŠ¡å™¨äº†ã€‚\n\n```javascript\nconst upload = event => {\n  // console.log(\"æ–‡ä»¶url\", this.state.avatarDataUrl);\n  let bytes = atob(avatarDataUrl.split(\",\")[1]);\n  console.log(\"bytes\", bytes);\n  let arrayBuffer = new ArrayBuffer(bytes.length);\n  let uInt8Array = new Uint8Array();\n  for (let i = 0; i < bytes.length; i++) {\n    uInt8Array[i] = bytes.charCodeAt[i];\n  }\n  let blob = new Blob([arrayBuffer], { type: \"image/png\" });\n  let xhr = new XMLHttpRequest();\n  let formData = new FormData();\n  formData.append(\"avatar\", blob);\n  xhr.open(\"POST\", \"/upload\", true);\n  xhr.send(formData);\n};\n```\n","slug":"å‰ç«¯/ä»å›¾ç‰‡è£å‰ªäº†è§£ js äºŒè¿›åˆ¶å¸¸ç”¨ api","published":1,"updated":"2021-04-07T07:27:29.657Z","_id":"ckn7476am002tyx7ybva35va3","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"éœ€æ±‚åˆ†æ\"><a href=\"#éœ€æ±‚åˆ†æ\" class=\"headerlink\" title=\"éœ€æ±‚åˆ†æ\"></a>éœ€æ±‚åˆ†æ</h2><h3 id=\"äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\"><a href=\"#äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\" class=\"headerlink\" title=\"äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\"></a>äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1598083455644-f4308101-1403-4566-ae7d-09a0c4fa5ffe.png#align=left&display=inline&height=602&margin=%5Bobject%20Object%5D&name=image.png&originHeight=602&originWidth=889&size=126895&status=done&style=none&width=889\" alt=\"image.png\"></p>\n<h3 id=\"æ­¥éª¤\"><a href=\"#æ­¥éª¤\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h3><ol>\n<li>è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶</li>\n<li>è·å–è£å‰ªåæ ‡</li>\n<li>è£å‰ªå›¾ç‰‡</li>\n<li>è¯»å–è£å‰ªåçš„å›¾ç‰‡é¢„è§ˆå¹¶ä¸Šä¼ </li>\n</ol>\n<p>æ¥ä¸‹æ¥å…ˆäº†è§£ä¸‹äºŒè¿›åˆ¶ç›¸å…³çš„ <code>API</code>Â  ä»¥æ–¹ä¾¿å®ç°æœ¬éœ€æ±‚ã€‚</p>\n<h2 id=\"FileReader\"><a href=\"#FileReader\" class=\"headerlink\" title=\"FileReader\"></a>FileReader</h2><blockquote>\n<p><code>HTML5</code>å®šä¹‰äº†<code>FileReader</code>ä½œä¸ºæ–‡ä»¶<code>API</code>çš„é‡è¦æˆå‘˜ç”¨äºè¯»å–æ–‡ä»¶ï¼Œæ ¹æ®<code>W3C</code>çš„å®šä¹‰ï¼Œ<code>FileReader</code>æ¥å£æä¾›äº†è¯»å–æ–‡ä»¶çš„æ–¹æ³•å’ŒåŒ…å«è¯»å–ç»“æœçš„äº‹ä»¶æ¨¡å‹ã€‚</p>\n</blockquote>\n<h3 id=\"åˆ›å»ºå®ä¾‹\"><a href=\"#åˆ›å»ºå®ä¾‹\" class=\"headerlink\" title=\"åˆ›å»ºå®ä¾‹\"></a>åˆ›å»ºå®ä¾‹</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å±æ€§\"><a href=\"#å±æ€§\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h3><table>\n<thead>\n<tr>\n<th>å±æ€§å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/error\">error</a></td>\n<td>ä¸€ä¸ª<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/DOMException\">DOMException</a>ï¼Œè¡¨ç¤ºåœ¨è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿçš„é”™è¯¯ Â ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readyState\">readyState</a></td>\n<td>ä¸€ä¸ªæ•°å­—ï¼Œç”¨æ¥è¡¨ç¤º Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader\">FileReader</a>Â API çš„ä¸‰ç§å¯èƒ½çŠ¶æ€ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/result\">result</a></td>\n<td>æ–‡ä»¶çš„å†…å®¹ã€‚è¯¥å±æ€§ä»…åœ¨è¯»å–æ“ä½œå®Œæˆåæ‰æœ‰æ•ˆï¼Œæ•°æ®çš„æ ¼å¼å–å†³äºä½¿ç”¨å“ªä¸ªæ–¹æ³•æ¥å¯åŠ¨è¯»å–æ“ä½œã€‚</td>\n</tr>\n</tbody></table>\n<h3 id=\"æ–¹æ³•\"><a href=\"#æ–¹æ³•\" class=\"headerlink\" title=\"æ–¹æ³•\"></a>æ–¹æ³•</h3><table>\n<thead>\n<tr>\n<th>æ–¹æ³•å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>abort</td>\n<td>ä¸­æ­¢è¯»å–æ“ä½œ</td>\n</tr>\n<tr>\n<td>readAsArrayBuffer</td>\n<td>å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â ArrayBufferÂ  å¯¹è±¡è¡¨ç¤º</td>\n</tr>\n<tr>\n<td>readAsBinaryString</td>\n<td>å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœä¸ºæ–‡ä»¶çš„äºŒè¿›åˆ¶ä¸²</td>\n</tr>\n<tr>\n<td>readAsDataURL</td>\n<td>å¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â data:urlÂ  çš„å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º</td>\n</tr>\n<tr>\n<td>readAsText</td>\n<td>å¼‚æ­¥æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º</td>\n</tr>\n</tbody></table>\n<h3 id=\"äº‹ä»¶\"><a href=\"#äº‹ä»¶\" class=\"headerlink\" title=\"äº‹ä»¶\"></a>äº‹ä»¶</h3><table>\n<thead>\n<tr>\n<th>äº‹ä»¶å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onabort</td>\n<td>ä¸­æ–­æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onerror</td>\n<td>å‡ºé”™æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onload</td>\n<td>æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onloadend</td>\n<td>è¯»å–å®Œæˆè§¦å‘ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰</td>\n</tr>\n<tr>\n<td>onloadstart</td>\n<td>è¯»å–å¼€å§‹æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onprogress</td>\n<td>è¯»å–ä¸­</td>\n</tr>\n</tbody></table>\n<h3 id=\"ç¤ºä¾‹\"><a href=\"#ç¤ºä¾‹\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description </span>æŠŠä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼è¯»å–å‡ºæ¥</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;file&quot;</span> id=<span class=\"string\">&quot;upload&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> upload = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;upload&quot;</span>);</span><br><span class=\"line\">upload.addEventListener(<span class=\"string\">&quot;change&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">  fileReader.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">const</span> reult = fileReader.result;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(result):</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayBuffer-TypedArray-DataView\"><a href=\"#ArrayBuffer-TypedArray-DataView\" class=\"headerlink\" title=\"ArrayBuffer / TypedArray / DataView\"></a>ArrayBuffer / TypedArray / DataView</h2><h3 id=\"ArrayBuffer\"><a href=\"#ArrayBuffer\" class=\"headerlink\" title=\"ArrayBuffer\"></a>ArrayBuffer</h3><h4 id=\"åŠŸèƒ½\"><a href=\"#åŠŸèƒ½\" class=\"headerlink\" title=\"åŠŸèƒ½\"></a>åŠŸèƒ½</h4><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1597991690421-351d07c1-8366-469f-8912-d094078e5986.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=1746&size=58281&status=done&style=none&width=873\" alt=\"image.png\"></p>\n<h4 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h4><p><code>FileReader</code>Â  æœ‰ä¸ª <code>readAsArrayBuffer()</code>Â  æ–¹æ³•ï¼Œå¦‚æœè¢«è¯»å–çš„æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œé‚£ä¹ˆç”¨æ¬¡æ–¹æ³•è¯»å–å°†æ˜¯æœ€åˆé€‚çš„æ–¹æ¡ˆï¼Œè¯»å–å‡ºæ¥çš„æ•°æ®å°†æ˜¯ä¸€ä¸ª <code>ArrayBuffer</code>Â  å¯¹è±¡ã€‚</p>\n<h4 id=\"å®šä¹‰\"><a href=\"#å®šä¹‰\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h4><blockquote>\n<p><code>ArrayBuffer</code>Â  å¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚<code>ArrayBuffer</code>Â  ä¸èƒ½ç›´æ¥æ“ä½œ,è€Œæ˜¯è¦é€šè¿‡<strong>ç±»å‹æ•°ç»„å¯¹è±¡</strong>æˆ– Â <strong><code>DataView</code>**</strong>Â  å¯¹è±¡**æ¥æ“ä½œ,å®ƒä»¬ä¼šå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¡¨ç¤ºä¸ºç‰¹å®šçš„æ ¼å¼,å¹¶é€šè¿‡è¿™äº›æ ¼å¼æ¥è¯»å†™ç¼“å†²åŒºçš„å†…å®¹.</p>\n</blockquote>\n<p><code>ArrayBuffer</code>ä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ†é…ä¸€æ®µå¯ä»¥å­˜æ”¾æ•°æ®çš„è¿ç»­å†…å­˜åŒºåŸŸã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(<span class=\"number\">8</span>);</span><br><span class=\"line\"><span class=\"comment\">// ArrayBuffer å¯¹è±¡æœ‰å®ä¾‹å±æ€§ byteLength ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹å ç”¨çš„å†…å­˜å­—èŠ‚é•¿åº¦ï¼ˆå•ä½å­—èŠ‚ï¼‰</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arrayBuffer.byteLength);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å±æ€§-1\"><a href=\"#å±æ€§-1\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h4><table>\n<thead>\n<tr>\n<th>å±æ€§å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ArrayBuffer.length</td>\n<td>ArrayBufferÂ  æ„é€ å‡½æ•°çš„ lengthÂ  å±æ€§ï¼Œå…¶å€¼ä¸º 1Â ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/byteLength\">ArrayBuffer.prototype.byteLength</a></td>\n<td>åªè¯»å±æ€§ï¼Œè¡¨ç¤º Â ArrayBufferÂ  çš„ byteÂ  çš„å¤§å°ï¼Œåœ¨ ArrayBufferÂ  æ„é€ å®Œæˆæ—¶ç”Ÿæˆï¼Œä¸å¯æ”¹å˜ã€‚</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>ç”±äºæ— æ³•å¯¹ Â <code>Arraybuffer</code>Â  ç›´æ¥è¿›è¡Œæ“ä½œ,æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¶ä»–å¯¹è±¡æ¥æ“ä½œ. æ‰€æœ‰å°±æœ‰äº† Â <strong><code>TypedArray</code>**</strong>(ç±»å‹æ•°ç»„å¯¹è±¡)<strong>å’Œ Â <strong><code>DataView</code>*</strong>*å¯¹è±¡</strong>ã€‚</p>\n</blockquote>\n<h3 id=\"DataView\"><a href=\"#DataView\" class=\"headerlink\" title=\"DataView\"></a>DataView</h3><p>ä¸Šæ–¹ä»£ç ç”Ÿæˆäº†ä¸€æ®µ 8 å­—èŠ‚çš„å†…å­˜åŒºåŸŸã€‚å…¶ä¸­æ¯ä¸ªå­—èŠ‚çš„é»˜è®¤å€¼éƒ½æ˜¯ 0ã€‚</p>\n<p>ä¸ºäº†è¯»å’Œå†™è¿™æ®µå†…å®¹ï¼Œéœ€è¦ä¸ºå®ƒæŒ‡å®šè§†å›¾ã€‚ <code>DataView</code>Â  è§†å›¾çš„åˆ›å»ºï¼Œéœ€è¦æä¾› <code>ArrayBuffer</code> å¯¹è±¡å®ä¾‹ä½œä¸ºå‚æ•°ã€‚</p>\n<p><code>DataView</code>Â  è§†å›¾æ˜¯ä¸€ä¸ªå¯ä»¥ä»äºŒè¿›åˆ¶ <code>ArrayBuffer</code>Â  å¯¹è±¡ä¸­è¯»å†™å¤šç§æ•°å€¼ç±»å‹çš„åº•å±‚æ¥å£ã€‚</p>\n<ul>\n<li><code>setInt8()</code>Â  ä» <code>DataView</code>Â  èµ·å§‹ä½ç½®ä»¥ <code>byte</code>Â  ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ <code>byteOffset</code>Â  å¤„å­˜å‚¨ä¸€ä¸ª <code>8-bit</code>Â  æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚</li>\n<li><code>getInt8()</code>Â  ä» <code>DataView</code>Â  èµ·å§‹ä½ç½®ä»¥ <code>byte</code> ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ <code>byteOffset</code> å¤„è·å–ä¸€ä¸ª <code>8-bit</code> æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚</li>\n</ul>\n<h4 id=\"è°ƒç”¨\"><a href=\"#è°ƒç”¨\" class=\"headerlink\" title=\"è°ƒç”¨\"></a>è°ƒç”¨</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">DataView</span>(buffer, [, byteOffset [, byteLength]])</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å‚æ•°\"><a href=\"#å‚æ•°\" class=\"headerlink\" title=\"å‚æ•°\"></a>å‚æ•°</h4><table>\n<thead>\n<tr>\n<th>å‚æ•°å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>buffer</td>\n<td>ä¸€ä¸ª å·²ç»å­˜åœ¨çš„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\">ArrayBuffer</a>Â  æˆ– Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer\">SharedArrayBuffer</a>Â Â  å¯¹è±¡ï¼ŒDataViewÂ  å¯¹è±¡çš„æ•°æ®æºã€‚</td>\n</tr>\n<tr>\n<td>byteOffsetÂ (å¯é€‰)</td>\n<td>æ­¤ Â DataViewÂ  å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨ buffer ä¸­çš„å­—èŠ‚åç§»ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ã€‚</td>\n</tr>\n<tr>\n<td>byteLengthÂ (å¯é€‰)</td>\n<td>æ­¤ DataView å¯¹è±¡çš„å­—èŠ‚é•¿åº¦ã€‚å¦‚æœæœªæŒ‡å®šï¼Œè¿™ä¸ªè§†å›¾çš„é•¿åº¦å°†åŒ¹é… buffer çš„é•¿åº¦ã€‚</td>\n</tr>\n</tbody></table>\n<h4 id=\"å¼‚å¸¸\"><a href=\"#å¼‚å¸¸\" class=\"headerlink\" title=\"å¼‚å¸¸\"></a>å¼‚å¸¸</h4><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RangeError\">RangeError</a></li>\n</ul>\n<p>å¦‚æœ <code>byteOffset</code> æˆ–è€… <code>byteLength </code>å‚æ•°çš„å€¼å¯¼è‡´è§†å›¾è¶…å‡ºäº† <code>buffer</code> çš„ç»“æŸä½ç½®å°±ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå‡è®¾ <code>buffer</code>Â ï¼ˆç¼“å†²å¯¹è±¡ï¼‰æ˜¯ <code>16</code> å­—èŠ‚é•¿åº¦ï¼Œ<code>byteOffset</code> å‚æ•°ä¸º <code>8</code>ï¼Œ<code>byteLength</code> å‚æ•°ä¸º Â <code>10</code>ï¼Œè¿™ä¸ªé”™è¯¯å°±ä¼šæŠ›å‡ºï¼Œè¿™æ˜¯å› ä¸ºç»“æœè§†å›¾è¯•å›¾è¶…å‡º <code>buffer</code> å¯¹è±¡çš„æ€»é•¿åº¦ <code>2</code> ä¸ªå­—èŠ‚ã€‚</p>\n<h4 id=\"ç¤ºä¾‹-1\"><a href=\"#ç¤ºä¾‹-1\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arrayBuffer.byteLength); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> dataView = <span class=\"keyword\">new</span> <span class=\"built_in\">DataView</span>(buffer);</span><br><span class=\"line\">dataView.setInt8(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">dataView.setInt8(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataView.getInt8(<span class=\"number\">0</span>)); <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataView.getInt8(<span class=\"number\">1</span>)); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataView.getInt16(<span class=\"number\">0</span>)); <span class=\"comment\">// 258</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"TypedArray\"><a href=\"#TypedArray\" class=\"headerlink\" title=\"TypedArray\"></a>TypedArray</h3><p>å¦ä¸€ç§<code>TypedArray</code>è§†å›¾ï¼Œä¸<code>DataView</code>è§†å›¾çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ç»„æ„é€ å‡½æ•°ï¼Œä»£è¡¨ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚</p>\n<p><code>TypedArray</code>å¯¹è±¡æè¿°äº†ä¸€ä¸ªåº•å±‚çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å­˜åŒºï¼ˆ<code>binary data buffer</code>ï¼‰çš„ä¸€ä¸ªç±»æ•°ç»„è§†å›¾ï¼ˆ<code>view</code>ï¼‰ã€‚ä½†å®ƒæœ¬èº«ä¸å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œç”šè‡³æ— æ³•è®¿é—®ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæ¥å£ï¼Œå®ƒæœ‰å¾ˆå¤šçš„å®ç°ã€‚</p>\n<h4 id=\"å®ç°æ–¹æ³•\"><a href=\"#å®ç°æ–¹æ³•\" class=\"headerlink\" title=\"å®ç°æ–¹æ³•\"></a>å®ç°æ–¹æ³•</h4><table>\n<thead>\n<tr>\n<th>ç±»å‹</th>\n<th>å•ä¸ªå…ƒç´ å€¼çš„èŒƒå›´</th>\n<th>å¤§å°ï¼ˆbytesï¼‰</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Int8Array</td>\n<td>-128 to 127</td>\n<td>1</td>\n<td>8 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°</td>\n</tr>\n<tr>\n<td>Uint8Array</td>\n<td>0 to 255</td>\n<td>1</td>\n<td>8 ä½æ— ç¬¦å·æ•´æ•°</td>\n</tr>\n<tr>\n<td>Int16Array</td>\n<td>-32768 to 32767</td>\n<td>2</td>\n<td>16 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°</td>\n</tr>\n<tr>\n<td>Uint16Array</td>\n<td>0 to 65535</td>\n<td>2</td>\n<td>16 ä½æ— ç¬¦å·æ•´æ•°</td>\n</tr>\n</tbody></table>\n<h4 id=\"ç¤ºä¾‹-2\"><a href=\"#ç¤ºä¾‹-2\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(<span class=\"number\">8</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arrayBuffer.byteLength); <span class=\"comment\">// 8</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> int8Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Int8Array</span>(arrayBuffer);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(int8Array.length); <span class=\"comment\">// 8</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> int16Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Int16Array</span>(arrayBuffer);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(int16Array.length); <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Blob\"><a href=\"#Blob\" class=\"headerlink\" title=\"Blob\"></a>Blob</h2><p><code>Blob</code>Â  æ˜¯ç”¨æ¥æ”¯æŒæ–‡ä»¶æ“ä½œçš„ã€‚ç®€å•çš„è¯´ï¼šåœ¨ <code>JS</code>Â  ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ„é€ å‡½æ•° Â <code>File</code>Â  å’Œ Â <code>Blob</code>, è€Œ <code>File</code>Â  ç»§æ‰¿äº†æ‰€æœ‰ <code>Blob</code>Â  çš„å±æ€§ã€‚</p>\n<p>æ‰€ä»¥åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œ <code>File</code>Â  å¯¹è±¡å¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„ <code>Blob</code>Â  å¯¹è±¡ã€‚</p>\n<h3 id=\"åŠŸèƒ½-1\"><a href=\"#åŠŸèƒ½-1\" class=\"headerlink\" title=\"åŠŸèƒ½\"></a>åŠŸèƒ½</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1598082428365-89545715-5ef7-45d9-8610-82d830059ebe.png#align=left&display=inline&height=730&margin=%5Bobject%20Object%5D&name=image.png&originHeight=730&originWidth=1728&size=143528&status=done&style=none&width=1728\" alt=\"image.png\"></p>\n<h3 id=\"æ„é€ å‡½æ•°\"><a href=\"#æ„é€ å‡½æ•°\" class=\"headerlink\" title=\"æ„é€ å‡½æ•°\"></a>æ„é€ å‡½æ•°</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description </span>è¿”å›ä¸€ä¸ªåˆ›å»ºçš„ Blob å¯¹è±¡ï¼Œå…¶å†…å®¹ç”±å‚æ•°ä¸­ç»™å®šçš„æ•°ç»„ä¸²è”ç»„æˆ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Blob(blobParts[, options])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å±æ€§-2\"><a href=\"#å±æ€§-2\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h3><table>\n<thead>\n<tr>\n<th>å±æ€§å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/size\">Blob.size</a>Â  åªè¯»</td>\n<td>BlobÂ  å¯¹è±¡ä¸­æ‰€åŒ…å«æ•°æ®çš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/type\">Blob.type</a>Â  åªè¯»</td>\n<td>ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜è¯¥ Â BlobÂ  å¯¹è±¡æ‰€åŒ…å«æ•°æ®çš„ MIME ç±»å‹ã€‚å¦‚æœç±»å‹æœªçŸ¥ï¼Œåˆ™è¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</td>\n</tr>\n</tbody></table>\n<h3 id=\"æ–¹æ³•-1\"><a href=\"#æ–¹æ³•-1\" class=\"headerlink\" title=\"æ–¹æ³•\"></a>æ–¹æ³•</h3><table>\n<thead>\n<tr>\n<th>æ–¹æ³•å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>[Blob.slice([start[, end[, contentType]]])](<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/slice\">https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/slice</a>)</td>\n<td>è¿”å›ä¸€ä¸ªæ–°çš„ Â BlobÂ  å¯¹è±¡ï¼ŒåŒ…å«äº†æº Â BlobÂ  å¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/stream\">Blob.stream()</a></td>\n<td>è¿”å›ä¸€ä¸ªèƒ½è¯»å– blob å†…å®¹çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream\">ReadableStream</a>ã€‚</td>\n</tr>\n</tbody></table>\n<p>| <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/text\">Blob.text()</a><br>| è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„ UTF-8 æ ¼å¼çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/USVString\">USVString</a>ã€‚ |<br>| <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/arrayBuffer\">Blob.arrayBuffer()</a> | è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„äºŒè¿›åˆ¶æ ¼å¼çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer\">ArrayBuffer</a>Â  |</p>\n<h2 id=\"atob-å’Œ-btoa\"><a href=\"#atob-å’Œ-btoa\" class=\"headerlink\" title=\"atob å’Œ btoa\"></a>atob å’Œ btoa</h2><p>ä» <code>IE10+</code>Â  æµè§ˆå™¨å¼€å§‹ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨å°±åŸç”Ÿæä¾›äº† <code>Base64</code>Â  ç¼–è§£ç çš„æ–¹æ³•ã€‚</p>\n<h3 id=\"Base64-è§£ç \"><a href=\"#Base64-è§£ç \" class=\"headerlink\" title=\"Base64 è§£ç \"></a>Base64 è§£ç </h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> decodedData = <span class=\"built_in\">window</span>.atob(encodedData);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Base64-ç¼–ç \"><a href=\"#Base64-ç¼–ç \" class=\"headerlink\" title=\"Base64 ç¼–ç \"></a>Base64 ç¼–ç </h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> encodedData = <span class=\"built_in\">window</span>.btoa(stringToEncode);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Canvas-ä¸­çš„-ImageData-å¯¹è±¡\"><a href=\"#Canvas-ä¸­çš„-ImageData-å¯¹è±¡\" class=\"headerlink\" title=\"Canvas ä¸­çš„ ImageData å¯¹è±¡\"></a>Canvas ä¸­çš„ ImageData å¯¹è±¡</h2><p><code>ImageData</code>Â  å¯¹è±¡ä¸­å­˜å‚¨ç€ <code>canvas</code>Â  å¯¹è±¡çœŸå®çš„åƒç´ æ•°æ®ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåªè¯»å±æ€§ï¼š</p>\n<ul>\n<li><code>width</code>Â ï¼šå›¾ç‰‡å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ </li>\n<li><code>height</code>Â ï¼šå›¾ç‰‡é«˜åº¦ï¼Œå•ä½æ˜¯åƒç´ </li>\n<li><code>data</code>Â ï¼š <code>Uint8ClampedArray</code>Â  ç±»å‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ç€ <code>RGBA</code>Â  æ ¼å¼çš„æ•´å‹æ•°æ®ï¼ŒèŒƒå›´åœ¨ <code>0</code>Â  è‡³ <code>255</code>Â  ä¹‹é—´ï¼ˆåŒ…æ‹¬ <code>255</code>ï¼‰ã€‚</li>\n</ul>\n<h3 id=\"åˆ›å»ºä¸€ä¸ª-ImageData-å¯¹è±¡\"><a href=\"#åˆ›å»ºä¸€ä¸ª-ImageData-å¯¹è±¡\" class=\"headerlink\" title=\"åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡\"></a>åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡</h3><p>ä½¿ç”¨ <code>createImageData()</code> æ–¹æ³•å»åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œç©ºç™½çš„ <code>ImageData</code>Â  å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myImageData = ctx.createImageData(width, height);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å…·ä½“ç‰¹å®šå°ºå¯¸çš„<code>ImageData</code>å¯¹è±¡ã€‚æ‰€æœ‰åƒç´ è¢«é¢„è®¾ä¸ºé€æ˜é»‘ã€‚</p>\n<h3 id=\"å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\"><a href=\"#å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\" class=\"headerlink\" title=\"å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\"></a>å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®</h3><p>ä¸ºäº†è·å¾—ä¸€ä¸ªåŒ…å«ç”»å¸ƒåœºæ™¯åƒç´ æ•°æ®çš„ <code>ImageData</code>Â  å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨ <code>getImageData()</code>Â  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myImageData = ctx.getImageData(left, top, width, height);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\"><a href=\"#åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\" class=\"headerlink\" title=\"åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\"></a>åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®</h3><p>ä½ å¯ä»¥ç”¨ <code>putImageData()</code>Â  æ–¹æ³•å»å¯¹åœºæ™¯è¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.putImageData(myImageData, dx, dy);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨-toDataURL-å°†-canvas-è½¬æ¢ä¸º-data-URI-æ ¼å¼\"><a href=\"#ä½¿ç”¨-toDataURL-å°†-canvas-è½¬æ¢ä¸º-data-URI-æ ¼å¼\" class=\"headerlink\" title=\"ä½¿ç”¨ toDataURL å°† canvas è½¬æ¢ä¸º data URI æ ¼å¼\"></a>ä½¿ç”¨ toDataURL å°† canvas è½¬æ¢ä¸º data URI æ ¼å¼</h3><ul>\n<li>åˆ›å»ºä¸€ä¸ª <code>&lt;canvas&gt;</code>Â  å…ƒç´ </li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;canvas&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;5&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è·å–ä¸€ä¸ª <code>data-URL</code></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> dataURL = canvas.toDataURL();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataURL);</span><br><span class=\"line\"><span class=\"comment\">// &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNby</span></span><br><span class=\"line\"><span class=\"comment\">// blAAAADElEQVQImWNgoBMAAABpAAFEI8ARAAAAAElFTkSuQmCC&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>åŸºæœ¬æ‰€éœ€è¦çš„æŠ€æœ¯ç‚¹å·²ç»å…¨éƒ¨åˆ—å‡ºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°å›¾ç‰‡è£å‰ªçš„éœ€æ±‚</p>\n<h2 id=\"å®ç°å›¾ç‰‡è£å‰ª\"><a href=\"#å®ç°å›¾ç‰‡è£å‰ª\" class=\"headerlink\" title=\"å®ç°å›¾ç‰‡è£å‰ª\"></a>å®ç°å›¾ç‰‡è£å‰ª</h2><h3 id=\"æœ€ç»ˆæ•ˆæœ\"><a href=\"#æœ€ç»ˆæ•ˆæœ\" class=\"headerlink\" title=\"æœ€ç»ˆæ•ˆæœ\"></a>æœ€ç»ˆæ•ˆæœ</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1598084805698-72d41a26-6ec6-4e5f-88d3-2662e3f05326.gif#align=left&display=inline&height=866&margin=%5Bobject%20Object%5D&name=image.gif&originHeight=866&originWidth=2216&size=3680927&status=done&style=none&width=2216\" alt=\"image.gif\"></p>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Input, Row, Col, Button &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;antd&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ScissorOutlined, PlusCircleOutlined, MinusCircleOutlined, UploadOutlined &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@ant-design/icons&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> App = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> imageRef = useRef(),</span><br><span class=\"line\">    canvasRef = useRef(),</span><br><span class=\"line\">    avatarRef = useRef(),</span><br><span class=\"line\">    [state, setState] = useState(&#123;</span><br><span class=\"line\">      file: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      dataURL: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      times: <span class=\"number\">1</span>,</span><br><span class=\"line\">      startX: <span class=\"number\">0</span>,</span><br><span class=\"line\">      startY: <span class=\"number\">0</span>,</span><br><span class=\"line\">      startDrag: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      lastX: <span class=\"number\">0</span>,</span><br><span class=\"line\">      lastY: <span class=\"number\">0</span>,</span><br><span class=\"line\">      avatarDataUrl: <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">drawImage</span>(<span class=\"params\">left = state.lastX, top = state.lastY</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> image = imageRef.current;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> canvas = canvasRef.current;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">    ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, canvas.width, canvas.height);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> imageWidth = image.width;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> imageHeight = image.height;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (imageWidth &gt; imageHeight) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> scale = canvas.width / canvas.height;</span><br><span class=\"line\">      imageWidth = canvas.width * state.times;</span><br><span class=\"line\">      imageHeight = imageHeight * scale * state.times;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> scale = canvas.height / canvas.width;</span><br><span class=\"line\">      imageHeight = canvas.height * state.times;</span><br><span class=\"line\">      imageWidth = imageWidth * scale * state.times;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ctx.drawImage(image, (canvas.width - imageWidth) / <span class=\"number\">2</span> + left, (canvas.height - imageHeight) / <span class=\"number\">2</span> + top, imageWidth, imageHeight);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> file = event.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">    fileReader.onload = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setState(&#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        file,</span><br><span class=\"line\">        dataURL: event.target.result</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      imageRef.onload = <span class=\"function\">() =&gt;</span> drawImage();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    fileReader.readAsDataURL(file);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleMouseDown</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      startX: event.clientX,</span><br><span class=\"line\">      startY: event.clientY,</span><br><span class=\"line\">      startDrag: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleMouseMove</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (state.startDrag) &#123;</span><br><span class=\"line\">      drawImage(event.clientX - state.startX + state.lastX, event.clientY - state.startY + state.lastY);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleMouseUp</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      lastX: event.clientX - state.startX + state.lastX,</span><br><span class=\"line\">      lastY: event.clientY - state.startY + state.lastY,</span><br><span class=\"line\">      startDrag: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bigger</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      times: state.times + <span class=\"number\">0.1</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    drawImage();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">smaller</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      times: state.times - <span class=\"number\">0.1</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    drawImage();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">confirm</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> canvas = canvasRef.current;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> imageData = ctx.getImageData(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> avatarCanvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\">    avatarCanvas.width = <span class=\"number\">100</span>;</span><br><span class=\"line\">    avatarCanvas.height = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> avatarCtx = avatarCanvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">    avatarCtx.putImageData(imageData, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> avatarDataUrl = avatarCanvas.toDataURL();</span><br><span class=\"line\">    setState(&#123; ...state, avatarDataUrl &#125;);</span><br><span class=\"line\">    avatarRef.current.src = avatarDataUrl;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(state.avatarDataUrl);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> bytes = atob(state.avatarDataUrl.split(<span class=\"string\">&quot;,&quot;</span>)[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;bytes&quot;</span>, bytes);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(bytes.length);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> uInt8Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class=\"line\">      uInt8Array[i] = bytes.charCodeAt[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> blob = <span class=\"keyword\">new</span> Blob([arrayBuffer], &#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;image/png&quot;</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">    formData.append(<span class=\"string\">&quot;avatar&quot;</span>, blob);</span><br><span class=\"line\">    xhr.open(<span class=\"string\">&quot;POST&quot;</span>, <span class=\"string\">&quot;/upload&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    xhr.send(formData);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div style=&#123;&#123; <span class=\"attr\">padding</span>: <span class=\"string\">&quot;10px&quot;</span> &#125;&#125;&gt;</span><br><span class=\"line\">      &lt;h2&gt;å›¾ç‰‡è£å‰ªï¼Œé¢„è§ˆä»¥åŠä¸Šä¼ &lt;/h2&gt;</span><br><span class=\"line\">      &lt;Input type=<span class=\"string\">&quot;file&quot;</span> accept=<span class=\"string\">&quot;image/*&quot;</span> onChange=&#123;handleChange&#125; style=&#123;&#123; <span class=\"attr\">width</span>: <span class=\"string\">&quot;200px&quot;</span> &#125;&#125; /&gt;</span><br><span class=\"line\">      &lt;Row&gt;</span><br><span class=\"line\">        &lt;Col&gt;&#123;state.file &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;imageRef&#125;</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;state.dataURL&#125;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">border:</span> &quot;<span class=\"attr\">2px</span> <span class=\"attr\">dashed</span> #<span class=\"attr\">79D281</span>&quot;, <span class=\"attr\">width:</span> &quot;<span class=\"attr\">400px</span>&quot; &#125;&#125; /&gt;</span></span>&#125;&lt;/Col&gt;</span><br><span class=\"line\">      &lt;/Row&gt;</span><br><span class=\"line\">      &lt;div onMouseDown=&#123;handleMouseDown&#125; onMouseMove=&#123;handleMouseMove&#125; onMouseUp=&#123;handleMouseUp&#125;&gt;</span><br><span class=\"line\">        &#123;state.file &amp;&amp; (</span><br><span class=\"line\">          &lt;Row&gt;</span><br><span class=\"line\">            &lt;Col style=&#123;&#123; <span class=\"attr\">position</span>: <span class=\"string\">&quot;relative&quot;</span> &#125;&#125;&gt;</span><br><span class=\"line\">              &lt;canvas ref=&#123;canvasRef&#125; width=<span class=\"string\">&quot;300&quot;</span> height=<span class=\"string\">&quot;300&quot;</span> style=&#123;&#123; <span class=\"attr\">border</span>: <span class=\"string\">&quot;2px dashed #632B21&quot;</span> &#125;&#125;&gt;&lt;/canvas&gt;</span><br><span class=\"line\">              &lt;div</span><br><span class=\"line\">                style=&#123;&#123;</span><br><span class=\"line\">                  width: <span class=\"number\">100</span>,</span><br><span class=\"line\">                  height: <span class=\"number\">100</span>,</span><br><span class=\"line\">                  backgroundColor: <span class=\"string\">&quot;blue&quot;</span>,</span><br><span class=\"line\">                  opacity: <span class=\"number\">0.3</span>,</span><br><span class=\"line\">                  position: <span class=\"string\">&quot;absolute&quot;</span>,</span><br><span class=\"line\">                  left: <span class=\"number\">100</span>,</span><br><span class=\"line\">                  top: <span class=\"number\">100</span></span><br><span class=\"line\">                &#125;&#125;&gt;&lt;/div&gt;</span><br><span class=\"line\">            &lt;/Col&gt;</span><br><span class=\"line\">            &lt;Col&gt;</span><br><span class=\"line\">              &lt;Button icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">PlusCircleOutlined</span> /&gt;</span></span>&#125; onClick=&#123;bigger&#125;&gt;</span><br><span class=\"line\">                å˜å¤§</span><br><span class=\"line\">              &lt;/Button&gt;</span><br><span class=\"line\">              &lt;Button icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">MinusCircleOutlined</span> /&gt;</span></span>&#125; onClick=&#123;smaller&#125;&gt;</span><br><span class=\"line\">                å˜å°</span><br><span class=\"line\">              &lt;/Button&gt;</span><br><span class=\"line\">              &lt;Button icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ScissorOutlined</span> /&gt;</span></span>&#125; onClick=&#123;confirm&#125;&gt;</span><br><span class=\"line\">                å‰ªåˆ‡</span><br><span class=\"line\">              &lt;/Button&gt;</span><br><span class=\"line\">            &lt;/Col&gt;</span><br><span class=\"line\">          &lt;/Row&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div&gt;&#123;state.file &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;avatarRef&#125;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">border:</span> &quot;<span class=\"attr\">2px</span> <span class=\"attr\">solid</span> #<span class=\"attr\">85D6C7</span>&quot; &#125;&#125; /&gt;</span></span>&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &#123;state.file &amp;&amp; (</span><br><span class=\"line\">          &lt;Button type=<span class=\"string\">&quot;primary&quot;</span> icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">UploadOutlined</span> /&gt;</span></span>&#125; onClick=&#123;upload&#125;&gt;</span><br><span class=\"line\">            ä¸Šä¼ </span><br><span class=\"line\">          &lt;/Button&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®ç°\"><a href=\"#å®ç°\" class=\"headerlink\" title=\"å®ç°\"></a>å®ç°</h3><h4 id=\"ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\"><a href=\"#ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\" class=\"headerlink\" title=\"ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\"></a>ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶</h4><p>ç»™ <code>input</code>Â  ç»‘å®šäº‹ä»¶</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> App = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> imgRef = useRef();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> canvasRef = useRef();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [file, setFile] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [dataURL, setDataURL] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [startX, setStartX] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [startY, setStartY] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [lastX, setLastX] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [lastY, setLastY] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [startDrag, setStartDrag] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleChange = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> file = event.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">    fileReader.onload = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setFile(file);</span><br><span class=\"line\">      setDataURL(event.target.result);</span><br><span class=\"line\">      imageRef.current.onload = <span class=\"function\">() =&gt;</span> drawImage();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    fileReader.readAsDataURL(file);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;file&quot;</span> onChange=&#123;handleChange&#125; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;img src=<span class=\"string\">&quot;xxx&quot;</span> ref=&#123;imgRef&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p><code>HTML5</code>Â  æ”¯æŒä» Â <code>input[type=file]</code>Â  å…ƒç´ ä¸­ç›´æ¥è·å–æ–‡ä»¶ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ã€‚</p>\n<p>æ­¤å¤„ç”¨åˆ°äº† <code>FileReader</code>Â ï¼Œè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚çº¯æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶éƒ½å¯ä»¥è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯æœ¬åœ°æ–‡ä»¶å¿…é¡»æ˜¯ç»è¿‡ç”¨æˆ·å…è®¸ä¹‹åæ‰èƒ½è¯»å–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è¦åœ¨ <code>input[type=file]</code>Â  ä¸­é€‰æ‹©äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ æ‰å¯ä»¥è¯»å–åˆ°å®ƒã€‚</p>\n<p>é€šè¿‡ <code>FileReader</code>Â  æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡æ–‡ä»¶è½¬åŒ–ä¸º <code>DataURL</code>Â ï¼Œå°±æ˜¯ä»¥ <code>data:image/png;base64</code>Â  å¼€å¤´çš„ä¸€ç§ <code>URL</code>Â ï¼Œç„¶åå¯ä»¥ç›´æ¥æ”¾åœ¨ <code>image.src</code>Â  é‡Œï¼Œæ­¤æ—¶æœ¬åœ°å›¾ç‰‡å°±ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n<h4 id=\"äºŒã€è·å–è£å‰ªåæ ‡\"><a href=\"#äºŒã€è·å–è£å‰ªåæ ‡\" class=\"headerlink\" title=\"äºŒã€è·å–è£å‰ªåæ ‡\"></a>äºŒã€è·å–è£å‰ªåæ ‡</h4><ul>\n<li><code>mousedown</code></li>\n</ul>\n<p>è¿™é‡Œè¦è®°å½•é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡ï¼Œå³ <code>startX</code>Â  å’Œ <code>startY</code>Â ï¼ŒåŒæ—¶å°†æ ‡è¯†ä½ <code>startDrag</code>Â  è®¾ä¸º <code>true</code>Â ï¼Œæ ‡è¯†é¼ æ ‡å¼€å§‹ç§»åŠ¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handleMouseDown = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  setStartX(event.clientX);</span><br><span class=\"line\">  setStartY(event.clientY);</span><br><span class=\"line\">  setStartDrag(<span class=\"literal\">true</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mousemove</code></li>\n</ul>\n<p>åˆ¤æ–­ <code>startDrag</code>Â  ä¸º <code>true</code>ï¼ˆå³é¼ æ ‡å¼€å§‹ç§»åŠ¨ï¼‰ï¼Œç„¶åè®°å½•å¯¹åº”ç§»åŠ¨çš„è·ç¦»ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handleMouseMove = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (startDrag) &#123;</span><br><span class=\"line\">    drawImage(event.clientX - startX + lastX, event.clientY - startY + lastY);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mouseup</code></li>\n</ul>\n<p>è¿™é‡Œè¦è®°å½•ä¸‹æœ€ç»ˆé¼ æ ‡çš„è½ç‚¹åæ ‡ï¼Œå¯¹åº”å°±æ˜¯ <code>lastX</code>Â  ä¸ <code>lastY</code>ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handleMouseUp = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  setLastX(event.clientX - startX + lastX);</span><br><span class=\"line\">  setLastY(event.clientY - startY + lastY);</span><br><span class=\"line\">  setStartDrag(<span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¸‰ã€è£å‰ªå›¾ç‰‡\"><a href=\"#ä¸‰ã€è£å‰ªå›¾ç‰‡\" class=\"headerlink\" title=\"ä¸‰ã€è£å‰ªå›¾ç‰‡\"></a>ä¸‰ã€è£å‰ªå›¾ç‰‡</h4><p>å°†å›¾ç‰‡æ”¾ç½®å…¥ <code>canvas</code>Â  æ—¶éœ€è¦è°ƒç”¨ <code>drawImage</code>Â :</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> drawImage = <span class=\"function\">(<span class=\"params\">left = lastX, top = lastY</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> image = imgRef.current,</span><br><span class=\"line\">    canvas = canvasRef.current,</span><br><span class=\"line\">    ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">  ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, canvas.width, canvas.height);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> imageWidth = image.width,</span><br><span class=\"line\">    imageHeight = image.height;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (imageWidth &gt; imageHeight) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> scale = canvas.width / canvas.height;</span><br><span class=\"line\">    imageWidth = canvas.width * times;</span><br><span class=\"line\">    imageHeight = imageHeight * scale * times;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> scale = canvas.height / canvas.width;</span><br><span class=\"line\">    imageHeight = canvas.height * times;</span><br><span class=\"line\">    imageWidth = imageWidth * scale * times;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ctx.drawImage(image, (canvas.width - imageWidth) / <span class=\"number\">2</span> + left, (canvas.height - imageHeight) / <span class=\"number\">2</span> + top, imageWidth, imageHeight);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>åŠ å…¥äº† <code>scale</code>ï¼Œè¿™ä¸ªå˜é‡æ˜¯ç”¨æ¥å®ç°å›¾ç‰‡æ”¾å¤§ã€ç¼©å°æ•ˆæœçš„ã€‚åŒæ—¶ä¼šåˆ¤æ–­å›¾ç‰‡çš„å®½ã€é«˜çš„å¤§å°å…³ç³»ï¼Œä»è€Œå®ç°å›¾ç‰‡åœ¨ <code>canvas</code>Â  ä¸­å¯¹åº”çš„é€‚é…ã€‚</p>\n<h4 id=\"å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \"><a href=\"#å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \" class=\"headerlink\" title=\"å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \"></a>å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ </h4><p>è¿™æ—¶æˆ‘ä»¬è¦è·å– <code>canvas</code>Â  ä¸­å›¾ç‰‡çš„ä¿¡æ¯ï¼Œç”¨ <code>toDataURL</code>Â  å°±å¯ä»¥è½¬æ¢æˆä¸Šé¢ç”¨åˆ°çš„ <code>DataURL</code>Â ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> confirm = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> canvas = canvasRef.current;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> imageData = ctx.getImageData(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> avatarCanvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\">  avatarCanvas.width = <span class=\"number\">100</span>;</span><br><span class=\"line\">  avatarCanvas.height = <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> avatarCtx = avatarCanvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">  avatarCtx.putImageData(imageData, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> avatarDataUrl = avatarCanvas.toDataURL();</span><br><span class=\"line\">  setAvatarDataUrl(avatarDataUrl);</span><br><span class=\"line\">  avatarRef.current.src = avatarDataUrl;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå–å‡ºå…¶ä¸­ <code>base64</code>Â  ä¿¡æ¯ï¼Œå†ç”¨ <code>window.atob</code>Â  è½¬æ¢æˆç”±äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä½† <code>window.atob</code>Â  è½¬æ¢åçš„ç»“æœä»ç„¶æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥ç»™ <code>Blob</code>Â  è¿˜æ˜¯ä¼šå‡ºé”™ã€‚æ‰€ä»¥åˆè¦ç”¨ <code>Uint8Array</code>Â  è½¬æ¢ä¸€ä¸‹ã€‚</p>\n<p>è¿™æ—¶å€™è£å‰ªåçš„æ–‡ä»¶å°±å‚¨å­˜åœ¨ <code>blob</code>Â  é‡Œäº†,æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“ä½œæ˜¯æ™®é€šæ–‡ä»¶ä¸€æ ·ï¼ŒåŠ å…¥åˆ° <code>FormData</code>Â  é‡Œï¼Œå¹¶ä¸Šä¼ è‡³æœåŠ¡å™¨äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> upload = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;æ–‡ä»¶url&quot;, this.state.avatarDataUrl);</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> bytes = atob(avatarDataUrl.split(<span class=\"string\">&quot;,&quot;</span>)[<span class=\"number\">1</span>]);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;bytes&quot;</span>, bytes);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(bytes.length);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> uInt8Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>();</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class=\"line\">    uInt8Array[i] = bytes.charCodeAt[i];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> blob = <span class=\"keyword\">new</span> Blob([arrayBuffer], &#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;image/png&quot;</span> &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">  <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">  formData.append(<span class=\"string\">&quot;avatar&quot;</span>, blob);</span><br><span class=\"line\">  xhr.open(<span class=\"string\">&quot;POST&quot;</span>, <span class=\"string\">&quot;/upload&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  xhr.send(formData);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"éœ€æ±‚åˆ†æ\"><a href=\"#éœ€æ±‚åˆ†æ\" class=\"headerlink\" title=\"éœ€æ±‚åˆ†æ\"></a>éœ€æ±‚åˆ†æ</h2><h3 id=\"äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\"><a href=\"#äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\" class=\"headerlink\" title=\"äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»\"></a>äºŒè¿›åˆ¶æ¨¡å—ä¹‹é—´çš„å…³ç³»</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1598083455644-f4308101-1403-4566-ae7d-09a0c4fa5ffe.png#align=left&display=inline&height=602&margin=%5Bobject%20Object%5D&name=image.png&originHeight=602&originWidth=889&size=126895&status=done&style=none&width=889\" alt=\"image.png\"></p>\n<h3 id=\"æ­¥éª¤\"><a href=\"#æ­¥éª¤\" class=\"headerlink\" title=\"æ­¥éª¤\"></a>æ­¥éª¤</h3><ol>\n<li>è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶</li>\n<li>è·å–è£å‰ªåæ ‡</li>\n<li>è£å‰ªå›¾ç‰‡</li>\n<li>è¯»å–è£å‰ªåçš„å›¾ç‰‡é¢„è§ˆå¹¶ä¸Šä¼ </li>\n</ol>\n<p>æ¥ä¸‹æ¥å…ˆäº†è§£ä¸‹äºŒè¿›åˆ¶ç›¸å…³çš„ <code>API</code>Â  ä»¥æ–¹ä¾¿å®ç°æœ¬éœ€æ±‚ã€‚</p>\n<h2 id=\"FileReader\"><a href=\"#FileReader\" class=\"headerlink\" title=\"FileReader\"></a>FileReader</h2><blockquote>\n<p><code>HTML5</code>å®šä¹‰äº†<code>FileReader</code>ä½œä¸ºæ–‡ä»¶<code>API</code>çš„é‡è¦æˆå‘˜ç”¨äºè¯»å–æ–‡ä»¶ï¼Œæ ¹æ®<code>W3C</code>çš„å®šä¹‰ï¼Œ<code>FileReader</code>æ¥å£æä¾›äº†è¯»å–æ–‡ä»¶çš„æ–¹æ³•å’ŒåŒ…å«è¯»å–ç»“æœçš„äº‹ä»¶æ¨¡å‹ã€‚</p>\n</blockquote>\n<h3 id=\"åˆ›å»ºå®ä¾‹\"><a href=\"#åˆ›å»ºå®ä¾‹\" class=\"headerlink\" title=\"åˆ›å»ºå®ä¾‹\"></a>åˆ›å»ºå®ä¾‹</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å±æ€§\"><a href=\"#å±æ€§\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h3><table>\n<thead>\n<tr>\n<th>å±æ€§å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/error\">error</a></td>\n<td>ä¸€ä¸ª<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/DOMException\">DOMException</a>ï¼Œè¡¨ç¤ºåœ¨è¯»å–æ–‡ä»¶æ—¶å‘ç”Ÿçš„é”™è¯¯ Â ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readyState\">readyState</a></td>\n<td>ä¸€ä¸ªæ•°å­—ï¼Œç”¨æ¥è¡¨ç¤º Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader\">FileReader</a>Â API çš„ä¸‰ç§å¯èƒ½çŠ¶æ€ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/result\">result</a></td>\n<td>æ–‡ä»¶çš„å†…å®¹ã€‚è¯¥å±æ€§ä»…åœ¨è¯»å–æ“ä½œå®Œæˆåæ‰æœ‰æ•ˆï¼Œæ•°æ®çš„æ ¼å¼å–å†³äºä½¿ç”¨å“ªä¸ªæ–¹æ³•æ¥å¯åŠ¨è¯»å–æ“ä½œã€‚</td>\n</tr>\n</tbody></table>\n<h3 id=\"æ–¹æ³•\"><a href=\"#æ–¹æ³•\" class=\"headerlink\" title=\"æ–¹æ³•\"></a>æ–¹æ³•</h3><table>\n<thead>\n<tr>\n<th>æ–¹æ³•å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>abort</td>\n<td>ä¸­æ­¢è¯»å–æ“ä½œ</td>\n</tr>\n<tr>\n<td>readAsArrayBuffer</td>\n<td>å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â ArrayBufferÂ  å¯¹è±¡è¡¨ç¤º</td>\n</tr>\n<tr>\n<td>readAsBinaryString</td>\n<td>å¼‚æ­¥æŒ‰å­—èŠ‚è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœä¸ºæ–‡ä»¶çš„äºŒè¿›åˆ¶ä¸²</td>\n</tr>\n<tr>\n<td>readAsDataURL</td>\n<td>å¼‚æ­¥è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨ Â data:urlÂ  çš„å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º</td>\n</tr>\n<tr>\n<td>readAsText</td>\n<td>å¼‚æ­¥æŒ‰å­—ç¬¦è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º</td>\n</tr>\n</tbody></table>\n<h3 id=\"äº‹ä»¶\"><a href=\"#äº‹ä»¶\" class=\"headerlink\" title=\"äº‹ä»¶\"></a>äº‹ä»¶</h3><table>\n<thead>\n<tr>\n<th>äº‹ä»¶å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onabort</td>\n<td>ä¸­æ–­æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onerror</td>\n<td>å‡ºé”™æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onload</td>\n<td>æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onloadend</td>\n<td>è¯»å–å®Œæˆè§¦å‘ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰</td>\n</tr>\n<tr>\n<td>onloadstart</td>\n<td>è¯»å–å¼€å§‹æ—¶è§¦å‘</td>\n</tr>\n<tr>\n<td>onprogress</td>\n<td>è¯»å–ä¸­</td>\n</tr>\n</tbody></table>\n<h3 id=\"ç¤ºä¾‹\"><a href=\"#ç¤ºä¾‹\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description </span>æŠŠä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹é€šè¿‡å­—ç¬¦ä¸²çš„æ–¹å¼è¯»å–å‡ºæ¥</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;file&quot;</span> id=<span class=\"string\">&quot;upload&quot;</span> /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> upload = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;upload&quot;</span>);</span><br><span class=\"line\">upload.addEventListener(<span class=\"string\">&quot;change&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">const</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">  fileReader.onload = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">const</span> reult = fileReader.result;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(result):</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;, <span class=\"literal\">false</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ArrayBuffer-TypedArray-DataView\"><a href=\"#ArrayBuffer-TypedArray-DataView\" class=\"headerlink\" title=\"ArrayBuffer / TypedArray / DataView\"></a>ArrayBuffer / TypedArray / DataView</h2><h3 id=\"ArrayBuffer\"><a href=\"#ArrayBuffer\" class=\"headerlink\" title=\"ArrayBuffer\"></a>ArrayBuffer</h3><h4 id=\"åŠŸèƒ½\"><a href=\"#åŠŸèƒ½\" class=\"headerlink\" title=\"åŠŸèƒ½\"></a>åŠŸèƒ½</h4><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1597991690421-351d07c1-8366-469f-8912-d094078e5986.png#align=left&display=inline&height=177&margin=%5Bobject%20Object%5D&name=image.png&originHeight=354&originWidth=1746&size=58281&status=done&style=none&width=873\" alt=\"image.png\"></p>\n<h4 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h4><p><code>FileReader</code>Â  æœ‰ä¸ª <code>readAsArrayBuffer()</code>Â  æ–¹æ³•ï¼Œå¦‚æœè¢«è¯»å–çš„æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œé‚£ä¹ˆç”¨æ¬¡æ–¹æ³•è¯»å–å°†æ˜¯æœ€åˆé€‚çš„æ–¹æ¡ˆï¼Œè¯»å–å‡ºæ¥çš„æ•°æ®å°†æ˜¯ä¸€ä¸ª <code>ArrayBuffer</code>Â  å¯¹è±¡ã€‚</p>\n<h4 id=\"å®šä¹‰\"><a href=\"#å®šä¹‰\" class=\"headerlink\" title=\"å®šä¹‰\"></a>å®šä¹‰</h4><blockquote>\n<p><code>ArrayBuffer</code>Â  å¯¹è±¡ç”¨æ¥è¡¨ç¤ºé€šç”¨çš„ã€å›ºå®šé•¿åº¦çš„åŸå§‹äºŒè¿›åˆ¶æ•°æ®ç¼“å†²åŒºã€‚<code>ArrayBuffer</code>Â  ä¸èƒ½ç›´æ¥æ“ä½œ,è€Œæ˜¯è¦é€šè¿‡<strong>ç±»å‹æ•°ç»„å¯¹è±¡</strong>æˆ– Â <strong><code>DataView</code>**</strong>Â  å¯¹è±¡**æ¥æ“ä½œ,å®ƒä»¬ä¼šå°†ç¼“å†²åŒºä¸­çš„æ•°æ®è¡¨ç¤ºä¸ºç‰¹å®šçš„æ ¼å¼,å¹¶é€šè¿‡è¿™äº›æ ¼å¼æ¥è¯»å†™ç¼“å†²åŒºçš„å†…å®¹.</p>\n</blockquote>\n<p><code>ArrayBuffer</code>ä¹Ÿæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥åˆ†é…ä¸€æ®µå¯ä»¥å­˜æ”¾æ•°æ®çš„è¿ç»­å†…å­˜åŒºåŸŸã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(<span class=\"number\">8</span>);</span><br><span class=\"line\"><span class=\"comment\">// ArrayBuffer å¯¹è±¡æœ‰å®ä¾‹å±æ€§ byteLength ï¼Œè¡¨ç¤ºå½“å‰å®ä¾‹å ç”¨çš„å†…å­˜å­—èŠ‚é•¿åº¦ï¼ˆå•ä½å­—èŠ‚ï¼‰</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arrayBuffer.byteLength);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å±æ€§-1\"><a href=\"#å±æ€§-1\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h4><table>\n<thead>\n<tr>\n<th>å±æ€§å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>ArrayBuffer.length</td>\n<td>ArrayBufferÂ  æ„é€ å‡½æ•°çš„ lengthÂ  å±æ€§ï¼Œå…¶å€¼ä¸º 1Â ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer/byteLength\">ArrayBuffer.prototype.byteLength</a></td>\n<td>åªè¯»å±æ€§ï¼Œè¡¨ç¤º Â ArrayBufferÂ  çš„ byteÂ  çš„å¤§å°ï¼Œåœ¨ ArrayBufferÂ  æ„é€ å®Œæˆæ—¶ç”Ÿæˆï¼Œä¸å¯æ”¹å˜ã€‚</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>ç”±äºæ— æ³•å¯¹ Â <code>Arraybuffer</code>Â  ç›´æ¥è¿›è¡Œæ“ä½œ,æ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©å…¶ä»–å¯¹è±¡æ¥æ“ä½œ. æ‰€æœ‰å°±æœ‰äº† Â <strong><code>TypedArray</code>**</strong>(ç±»å‹æ•°ç»„å¯¹è±¡)<strong>å’Œ Â <strong><code>DataView</code>*</strong>*å¯¹è±¡</strong>ã€‚</p>\n</blockquote>\n<h3 id=\"DataView\"><a href=\"#DataView\" class=\"headerlink\" title=\"DataView\"></a>DataView</h3><p>ä¸Šæ–¹ä»£ç ç”Ÿæˆäº†ä¸€æ®µ 8 å­—èŠ‚çš„å†…å­˜åŒºåŸŸã€‚å…¶ä¸­æ¯ä¸ªå­—èŠ‚çš„é»˜è®¤å€¼éƒ½æ˜¯ 0ã€‚</p>\n<p>ä¸ºäº†è¯»å’Œå†™è¿™æ®µå†…å®¹ï¼Œéœ€è¦ä¸ºå®ƒæŒ‡å®šè§†å›¾ã€‚ <code>DataView</code>Â  è§†å›¾çš„åˆ›å»ºï¼Œéœ€è¦æä¾› <code>ArrayBuffer</code> å¯¹è±¡å®ä¾‹ä½œä¸ºå‚æ•°ã€‚</p>\n<p><code>DataView</code>Â  è§†å›¾æ˜¯ä¸€ä¸ªå¯ä»¥ä»äºŒè¿›åˆ¶ <code>ArrayBuffer</code>Â  å¯¹è±¡ä¸­è¯»å†™å¤šç§æ•°å€¼ç±»å‹çš„åº•å±‚æ¥å£ã€‚</p>\n<ul>\n<li><code>setInt8()</code>Â  ä» <code>DataView</code>Â  èµ·å§‹ä½ç½®ä»¥ <code>byte</code>Â  ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ <code>byteOffset</code>Â  å¤„å­˜å‚¨ä¸€ä¸ª <code>8-bit</code>Â  æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚</li>\n<li><code>getInt8()</code>Â  ä» <code>DataView</code>Â  èµ·å§‹ä½ç½®ä»¥ <code>byte</code> ä¸ºè®¡æ•°çš„æŒ‡å®šåç§»é‡ <code>byteOffset</code> å¤„è·å–ä¸€ä¸ª <code>8-bit</code> æ•°(ä¸€ä¸ªå­—èŠ‚)ã€‚</li>\n</ul>\n<h4 id=\"è°ƒç”¨\"><a href=\"#è°ƒç”¨\" class=\"headerlink\" title=\"è°ƒç”¨\"></a>è°ƒç”¨</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">new</span> <span class=\"built_in\">DataView</span>(buffer, [, byteOffset [, byteLength]])</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"å‚æ•°\"><a href=\"#å‚æ•°\" class=\"headerlink\" title=\"å‚æ•°\"></a>å‚æ•°</h4><table>\n<thead>\n<tr>\n<th>å‚æ•°å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>buffer</td>\n<td>ä¸€ä¸ª å·²ç»å­˜åœ¨çš„<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\">ArrayBuffer</a>Â  æˆ– Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer\">SharedArrayBuffer</a>Â Â  å¯¹è±¡ï¼ŒDataViewÂ  å¯¹è±¡çš„æ•°æ®æºã€‚</td>\n</tr>\n<tr>\n<td>byteOffsetÂ (å¯é€‰)</td>\n<td>æ­¤ Â DataViewÂ  å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨ buffer ä¸­çš„å­—èŠ‚åç§»ã€‚å¦‚æœæœªæŒ‡å®šï¼Œåˆ™é»˜è®¤ä»ç¬¬ä¸€ä¸ªå­—èŠ‚å¼€å§‹ã€‚</td>\n</tr>\n<tr>\n<td>byteLengthÂ (å¯é€‰)</td>\n<td>æ­¤ DataView å¯¹è±¡çš„å­—èŠ‚é•¿åº¦ã€‚å¦‚æœæœªæŒ‡å®šï¼Œè¿™ä¸ªè§†å›¾çš„é•¿åº¦å°†åŒ¹é… buffer çš„é•¿åº¦ã€‚</td>\n</tr>\n</tbody></table>\n<h4 id=\"å¼‚å¸¸\"><a href=\"#å¼‚å¸¸\" class=\"headerlink\" title=\"å¼‚å¸¸\"></a>å¼‚å¸¸</h4><ul>\n<li><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RangeError\">RangeError</a></li>\n</ul>\n<p>å¦‚æœ <code>byteOffset</code> æˆ–è€… <code>byteLength </code>å‚æ•°çš„å€¼å¯¼è‡´è§†å›¾è¶…å‡ºäº† <code>buffer</code> çš„ç»“æŸä½ç½®å°±ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚</p>\n<p>ä¾‹å¦‚ï¼Œå‡è®¾ <code>buffer</code>Â ï¼ˆç¼“å†²å¯¹è±¡ï¼‰æ˜¯ <code>16</code> å­—èŠ‚é•¿åº¦ï¼Œ<code>byteOffset</code> å‚æ•°ä¸º <code>8</code>ï¼Œ<code>byteLength</code> å‚æ•°ä¸º Â <code>10</code>ï¼Œè¿™ä¸ªé”™è¯¯å°±ä¼šæŠ›å‡ºï¼Œè¿™æ˜¯å› ä¸ºç»“æœè§†å›¾è¯•å›¾è¶…å‡º <code>buffer</code> å¯¹è±¡çš„æ€»é•¿åº¦ <code>2</code> ä¸ªå­—èŠ‚ã€‚</p>\n<h4 id=\"ç¤ºä¾‹-1\"><a href=\"#ç¤ºä¾‹-1\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arrayBuffer.byteLength); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> dataView = <span class=\"keyword\">new</span> <span class=\"built_in\">DataView</span>(buffer);</span><br><span class=\"line\">dataView.setInt8(<span class=\"number\">0</span>, <span class=\"number\">1</span>);</span><br><span class=\"line\">dataView.setInt8(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataView.getInt8(<span class=\"number\">0</span>)); <span class=\"comment\">// 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataView.getInt8(<span class=\"number\">1</span>)); <span class=\"comment\">// 2</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataView.getInt16(<span class=\"number\">0</span>)); <span class=\"comment\">// 258</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"TypedArray\"><a href=\"#TypedArray\" class=\"headerlink\" title=\"TypedArray\"></a>TypedArray</h3><p>å¦ä¸€ç§<code>TypedArray</code>è§†å›¾ï¼Œä¸<code>DataView</code>è§†å›¾çš„ä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œæ˜¯ä¸€ç»„æ„é€ å‡½æ•°ï¼Œä»£è¡¨ä¸åŒçš„æ•°æ®æ ¼å¼ã€‚</p>\n<p><code>TypedArray</code>å¯¹è±¡æè¿°äº†ä¸€ä¸ªåº•å±‚çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å­˜åŒºï¼ˆ<code>binary data buffer</code>ï¼‰çš„ä¸€ä¸ªç±»æ•°ç»„è§†å›¾ï¼ˆ<code>view</code>ï¼‰ã€‚ä½†å®ƒæœ¬èº«ä¸å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œç”šè‡³æ— æ³•è®¿é—®ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæ¥å£ï¼Œå®ƒæœ‰å¾ˆå¤šçš„å®ç°ã€‚</p>\n<h4 id=\"å®ç°æ–¹æ³•\"><a href=\"#å®ç°æ–¹æ³•\" class=\"headerlink\" title=\"å®ç°æ–¹æ³•\"></a>å®ç°æ–¹æ³•</h4><table>\n<thead>\n<tr>\n<th>ç±»å‹</th>\n<th>å•ä¸ªå…ƒç´ å€¼çš„èŒƒå›´</th>\n<th>å¤§å°ï¼ˆbytesï¼‰</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Int8Array</td>\n<td>-128 to 127</td>\n<td>1</td>\n<td>8 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°</td>\n</tr>\n<tr>\n<td>Uint8Array</td>\n<td>0 to 255</td>\n<td>1</td>\n<td>8 ä½æ— ç¬¦å·æ•´æ•°</td>\n</tr>\n<tr>\n<td>Int16Array</td>\n<td>-32768 to 32767</td>\n<td>2</td>\n<td>16 ä½äºŒè¿›åˆ¶æœ‰ç¬¦å·æ•´æ•°</td>\n</tr>\n<tr>\n<td>Uint16Array</td>\n<td>0 to 65535</td>\n<td>2</td>\n<td>16 ä½æ— ç¬¦å·æ•´æ•°</td>\n</tr>\n</tbody></table>\n<h4 id=\"ç¤ºä¾‹-2\"><a href=\"#ç¤ºä¾‹-2\" class=\"headerlink\" title=\"ç¤ºä¾‹\"></a>ç¤ºä¾‹</h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(<span class=\"number\">8</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arrayBuffer.byteLength); <span class=\"comment\">// 8</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> int8Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Int8Array</span>(arrayBuffer);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(int8Array.length); <span class=\"comment\">// 8</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> int16Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Int16Array</span>(arrayBuffer);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(int16Array.length); <span class=\"comment\">// 4</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Blob\"><a href=\"#Blob\" class=\"headerlink\" title=\"Blob\"></a>Blob</h2><p><code>Blob</code>Â  æ˜¯ç”¨æ¥æ”¯æŒæ–‡ä»¶æ“ä½œçš„ã€‚ç®€å•çš„è¯´ï¼šåœ¨ <code>JS</code>Â  ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ„é€ å‡½æ•° Â <code>File</code>Â  å’Œ Â <code>Blob</code>, è€Œ <code>File</code>Â  ç»§æ‰¿äº†æ‰€æœ‰ <code>Blob</code>Â  çš„å±æ€§ã€‚</p>\n<p>æ‰€ä»¥åœ¨æˆ‘ä»¬çœ‹æ¥ï¼Œ <code>File</code>Â  å¯¹è±¡å¯ä»¥çœ‹ä½œä¸€ç§ç‰¹æ®Šçš„ <code>Blob</code>Â  å¯¹è±¡ã€‚</p>\n<h3 id=\"åŠŸèƒ½-1\"><a href=\"#åŠŸèƒ½-1\" class=\"headerlink\" title=\"åŠŸèƒ½\"></a>åŠŸèƒ½</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1598082428365-89545715-5ef7-45d9-8610-82d830059ebe.png#align=left&display=inline&height=730&margin=%5Bobject%20Object%5D&name=image.png&originHeight=730&originWidth=1728&size=143528&status=done&style=none&width=1728\" alt=\"image.png\"></p>\n<h3 id=\"æ„é€ å‡½æ•°\"><a href=\"#æ„é€ å‡½æ•°\" class=\"headerlink\" title=\"æ„é€ å‡½æ•°\"></a>æ„é€ å‡½æ•°</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@description </span>è¿”å›ä¸€ä¸ªåˆ›å»ºçš„ Blob å¯¹è±¡ï¼Œå…¶å†…å®¹ç”±å‚æ•°ä¸­ç»™å®šçš„æ•°ç»„ä¸²è”ç»„æˆ</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Blob(blobParts[, options])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å±æ€§-2\"><a href=\"#å±æ€§-2\" class=\"headerlink\" title=\"å±æ€§\"></a>å±æ€§</h3><table>\n<thead>\n<tr>\n<th>å±æ€§å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/size\">Blob.size</a>Â  åªè¯»</td>\n<td>BlobÂ  å¯¹è±¡ä¸­æ‰€åŒ…å«æ•°æ®çš„å¤§å°ï¼ˆå­—èŠ‚ï¼‰</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/type\">Blob.type</a>Â  åªè¯»</td>\n<td>ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜è¯¥ Â BlobÂ  å¯¹è±¡æ‰€åŒ…å«æ•°æ®çš„ MIME ç±»å‹ã€‚å¦‚æœç±»å‹æœªçŸ¥ï¼Œåˆ™è¯¥å€¼ä¸ºç©ºå­—ç¬¦ä¸²ã€‚</td>\n</tr>\n</tbody></table>\n<h3 id=\"æ–¹æ³•-1\"><a href=\"#æ–¹æ³•-1\" class=\"headerlink\" title=\"æ–¹æ³•\"></a>æ–¹æ³•</h3><table>\n<thead>\n<tr>\n<th>æ–¹æ³•å</th>\n<th>æè¿°</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>[Blob.slice([start[, end[, contentType]]])](<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/slice\">https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/slice</a>)</td>\n<td>è¿”å›ä¸€ä¸ªæ–°çš„ Â BlobÂ  å¯¹è±¡ï¼ŒåŒ…å«äº†æº Â BlobÂ  å¯¹è±¡ä¸­æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®ã€‚</td>\n</tr>\n<tr>\n<td><a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/stream\">Blob.stream()</a></td>\n<td>è¿”å›ä¸€ä¸ªèƒ½è¯»å– blob å†…å®¹çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream\">ReadableStream</a>ã€‚</td>\n</tr>\n</tbody></table>\n<p>| <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/text\">Blob.text()</a><br>| è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„ UTF-8 æ ¼å¼çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/USVString\">USVString</a>ã€‚ |<br>| <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/arrayBuffer\">Blob.arrayBuffer()</a> | è¿”å›ä¸€ä¸ª promise ä¸”åŒ…å« blob æ‰€æœ‰å†…å®¹çš„äºŒè¿›åˆ¶æ ¼å¼çš„ Â <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/ArrayBuffer\">ArrayBuffer</a>Â  |</p>\n<h2 id=\"atob-å’Œ-btoa\"><a href=\"#atob-å’Œ-btoa\" class=\"headerlink\" title=\"atob å’Œ btoa\"></a>atob å’Œ btoa</h2><p>ä» <code>IE10+</code>Â  æµè§ˆå™¨å¼€å§‹ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨å°±åŸç”Ÿæä¾›äº† <code>Base64</code>Â  ç¼–è§£ç çš„æ–¹æ³•ã€‚</p>\n<h3 id=\"Base64-è§£ç \"><a href=\"#Base64-è§£ç \" class=\"headerlink\" title=\"Base64 è§£ç \"></a>Base64 è§£ç </h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> decodedData = <span class=\"built_in\">window</span>.atob(encodedData);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Base64-ç¼–ç \"><a href=\"#Base64-ç¼–ç \" class=\"headerlink\" title=\"Base64 ç¼–ç \"></a>Base64 ç¼–ç </h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> encodedData = <span class=\"built_in\">window</span>.btoa(stringToEncode);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Canvas-ä¸­çš„-ImageData-å¯¹è±¡\"><a href=\"#Canvas-ä¸­çš„-ImageData-å¯¹è±¡\" class=\"headerlink\" title=\"Canvas ä¸­çš„ ImageData å¯¹è±¡\"></a>Canvas ä¸­çš„ ImageData å¯¹è±¡</h2><p><code>ImageData</code>Â  å¯¹è±¡ä¸­å­˜å‚¨ç€ <code>canvas</code>Â  å¯¹è±¡çœŸå®çš„åƒç´ æ•°æ®ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å‡ ä¸ªåªè¯»å±æ€§ï¼š</p>\n<ul>\n<li><code>width</code>Â ï¼šå›¾ç‰‡å®½åº¦ï¼Œå•ä½æ˜¯åƒç´ </li>\n<li><code>height</code>Â ï¼šå›¾ç‰‡é«˜åº¦ï¼Œå•ä½æ˜¯åƒç´ </li>\n<li><code>data</code>Â ï¼š <code>Uint8ClampedArray</code>Â  ç±»å‹çš„ä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ç€ <code>RGBA</code>Â  æ ¼å¼çš„æ•´å‹æ•°æ®ï¼ŒèŒƒå›´åœ¨ <code>0</code>Â  è‡³ <code>255</code>Â  ä¹‹é—´ï¼ˆåŒ…æ‹¬ <code>255</code>ï¼‰ã€‚</li>\n</ul>\n<h3 id=\"åˆ›å»ºä¸€ä¸ª-ImageData-å¯¹è±¡\"><a href=\"#åˆ›å»ºä¸€ä¸ª-ImageData-å¯¹è±¡\" class=\"headerlink\" title=\"åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡\"></a>åˆ›å»ºä¸€ä¸ª ImageData å¯¹è±¡</h3><p>ä½¿ç”¨ <code>createImageData()</code> æ–¹æ³•å»åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œç©ºç™½çš„ <code>ImageData</code>Â  å¯¹è±¡ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myImageData = ctx.createImageData(width, height);</span><br></pre></td></tr></table></figure>\n\n<p>ä¸Šé¢ä»£ç åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å…·ä½“ç‰¹å®šå°ºå¯¸çš„<code>ImageData</code>å¯¹è±¡ã€‚æ‰€æœ‰åƒç´ è¢«é¢„è®¾ä¸ºé€æ˜é»‘ã€‚</p>\n<h3 id=\"å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\"><a href=\"#å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\" class=\"headerlink\" title=\"å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®\"></a>å¾—åˆ°åœºæ™¯åƒç´ æ•°æ®</h3><p>ä¸ºäº†è·å¾—ä¸€ä¸ªåŒ…å«ç”»å¸ƒåœºæ™¯åƒç´ æ•°æ®çš„ <code>ImageData</code>Â  å¯¹è±¡ï¼Œä½ å¯ä»¥ç”¨ <code>getImageData()</code>Â  æ–¹æ³•ï¼š</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myImageData = ctx.getImageData(left, top, width, height);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\"><a href=\"#åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\" class=\"headerlink\" title=\"åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®\"></a>åœ¨åœºæ™¯ä¸­å†™å…¥åƒç´ æ•°æ®</h3><p>ä½ å¯ä»¥ç”¨ <code>putImageData()</code>Â  æ–¹æ³•å»å¯¹åœºæ™¯è¿›è¡Œåƒç´ æ•°æ®çš„å†™å…¥ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.putImageData(myImageData, dx, dy);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨-toDataURL-å°†-canvas-è½¬æ¢ä¸º-data-URI-æ ¼å¼\"><a href=\"#ä½¿ç”¨-toDataURL-å°†-canvas-è½¬æ¢ä¸º-data-URI-æ ¼å¼\" class=\"headerlink\" title=\"ä½¿ç”¨ toDataURL å°† canvas è½¬æ¢ä¸º data URI æ ¼å¼\"></a>ä½¿ç”¨ toDataURL å°† canvas è½¬æ¢ä¸º data URI æ ¼å¼</h3><ul>\n<li>åˆ›å»ºä¸€ä¸ª <code>&lt;canvas&gt;</code>Â  å…ƒç´ </li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">canvas</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;canvas&quot;</span> <span class=\"attr\">width</span>=<span class=\"string\">&quot;5&quot;</span> <span class=\"attr\">height</span>=<span class=\"string\">&quot;5&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è·å–ä¸€ä¸ª <code>data-URL</code></li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> canvas = <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> dataURL = canvas.toDataURL();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(dataURL);</span><br><span class=\"line\"><span class=\"comment\">// &quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNby</span></span><br><span class=\"line\"><span class=\"comment\">// blAAAADElEQVQImWNgoBMAAABpAAFEI8ARAAAAAElFTkSuQmCC&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>åŸºæœ¬æ‰€éœ€è¦çš„æŠ€æœ¯ç‚¹å·²ç»å…¨éƒ¨åˆ—å‡ºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°å›¾ç‰‡è£å‰ªçš„éœ€æ±‚</p>\n<h2 id=\"å®ç°å›¾ç‰‡è£å‰ª\"><a href=\"#å®ç°å›¾ç‰‡è£å‰ª\" class=\"headerlink\" title=\"å®ç°å›¾ç‰‡è£å‰ª\"></a>å®ç°å›¾ç‰‡è£å‰ª</h2><h3 id=\"æœ€ç»ˆæ•ˆæœ\"><a href=\"#æœ€ç»ˆæ•ˆæœ\" class=\"headerlink\" title=\"æœ€ç»ˆæ•ˆæœ\"></a>æœ€ç»ˆæ•ˆæœ</h3><p><img src=\"https://cdn.nlark.com/yuque/0/2020/gif/732231/1598084805698-72d41a26-6ec6-4e5f-88d3-2662e3f05326.gif#align=left&display=inline&height=866&margin=%5Bobject%20Object%5D&name=image.gif&originHeight=866&originWidth=2216&size=3680927&status=done&style=none&width=2216\" alt=\"image.gif\"></p>\n<h3 id=\"ä»£ç \"><a href=\"#ä»£ç \" class=\"headerlink\" title=\"ä»£ç \"></a>ä»£ç </h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Input, Row, Col, Button &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;antd&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ScissorOutlined, PlusCircleOutlined, MinusCircleOutlined, UploadOutlined &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@ant-design/icons&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> App = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> imageRef = useRef(),</span><br><span class=\"line\">    canvasRef = useRef(),</span><br><span class=\"line\">    avatarRef = useRef(),</span><br><span class=\"line\">    [state, setState] = useState(&#123;</span><br><span class=\"line\">      file: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      dataURL: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">      times: <span class=\"number\">1</span>,</span><br><span class=\"line\">      startX: <span class=\"number\">0</span>,</span><br><span class=\"line\">      startY: <span class=\"number\">0</span>,</span><br><span class=\"line\">      startDrag: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      lastX: <span class=\"number\">0</span>,</span><br><span class=\"line\">      lastY: <span class=\"number\">0</span>,</span><br><span class=\"line\">      avatarDataUrl: <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">drawImage</span>(<span class=\"params\">left = state.lastX, top = state.lastY</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> image = imageRef.current;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> canvas = canvasRef.current;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">    ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, canvas.width, canvas.height);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> imageWidth = image.width;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> imageHeight = image.height;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (imageWidth &gt; imageHeight) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> scale = canvas.width / canvas.height;</span><br><span class=\"line\">      imageWidth = canvas.width * state.times;</span><br><span class=\"line\">      imageHeight = imageHeight * scale * state.times;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> scale = canvas.height / canvas.width;</span><br><span class=\"line\">      imageHeight = canvas.height * state.times;</span><br><span class=\"line\">      imageWidth = imageWidth * scale * state.times;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ctx.drawImage(image, (canvas.width - imageWidth) / <span class=\"number\">2</span> + left, (canvas.height - imageHeight) / <span class=\"number\">2</span> + top, imageWidth, imageHeight);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleChange</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> file = event.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">    fileReader.onload = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setState(&#123;</span><br><span class=\"line\">        ...state,</span><br><span class=\"line\">        file,</span><br><span class=\"line\">        dataURL: event.target.result</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      imageRef.onload = <span class=\"function\">() =&gt;</span> drawImage();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    fileReader.readAsDataURL(file);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleMouseDown</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      startX: event.clientX,</span><br><span class=\"line\">      startY: event.clientY,</span><br><span class=\"line\">      startDrag: <span class=\"literal\">true</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleMouseMove</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (state.startDrag) &#123;</span><br><span class=\"line\">      drawImage(event.clientX - state.startX + state.lastX, event.clientY - state.startY + state.lastY);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleMouseUp</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      lastX: event.clientX - state.startX + state.lastX,</span><br><span class=\"line\">      lastY: event.clientY - state.startY + state.lastY,</span><br><span class=\"line\">      startDrag: <span class=\"literal\">false</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bigger</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      times: state.times + <span class=\"number\">0.1</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    drawImage();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">smaller</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    setState(&#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      times: state.times - <span class=\"number\">0.1</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    drawImage();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">confirm</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> canvas = canvasRef.current;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> imageData = ctx.getImageData(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> avatarCanvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\">    avatarCanvas.width = <span class=\"number\">100</span>;</span><br><span class=\"line\">    avatarCanvas.height = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> avatarCtx = avatarCanvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">    avatarCtx.putImageData(imageData, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> avatarDataUrl = avatarCanvas.toDataURL();</span><br><span class=\"line\">    setState(&#123; ...state, avatarDataUrl &#125;);</span><br><span class=\"line\">    avatarRef.current.src = avatarDataUrl;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">upload</span>(<span class=\"params\">event</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(state.avatarDataUrl);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> bytes = atob(state.avatarDataUrl.split(<span class=\"string\">&quot;,&quot;</span>)[<span class=\"number\">1</span>]);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;bytes&quot;</span>, bytes);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(bytes.length);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> uInt8Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class=\"line\">      uInt8Array[i] = bytes.charCodeAt[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> blob = <span class=\"keyword\">new</span> Blob([arrayBuffer], &#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;image/png&quot;</span> &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">    <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">    formData.append(<span class=\"string\">&quot;avatar&quot;</span>, blob);</span><br><span class=\"line\">    xhr.open(<span class=\"string\">&quot;POST&quot;</span>, <span class=\"string\">&quot;/upload&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">    xhr.send(formData);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div style=&#123;&#123; <span class=\"attr\">padding</span>: <span class=\"string\">&quot;10px&quot;</span> &#125;&#125;&gt;</span><br><span class=\"line\">      &lt;h2&gt;å›¾ç‰‡è£å‰ªï¼Œé¢„è§ˆä»¥åŠä¸Šä¼ &lt;/h2&gt;</span><br><span class=\"line\">      &lt;Input type=<span class=\"string\">&quot;file&quot;</span> accept=<span class=\"string\">&quot;image/*&quot;</span> onChange=&#123;handleChange&#125; style=&#123;&#123; <span class=\"attr\">width</span>: <span class=\"string\">&quot;200px&quot;</span> &#125;&#125; /&gt;</span><br><span class=\"line\">      &lt;Row&gt;</span><br><span class=\"line\">        &lt;Col&gt;&#123;state.file &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;imageRef&#125;</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;state.dataURL&#125;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">border:</span> &quot;<span class=\"attr\">2px</span> <span class=\"attr\">dashed</span> #<span class=\"attr\">79D281</span>&quot;, <span class=\"attr\">width:</span> &quot;<span class=\"attr\">400px</span>&quot; &#125;&#125; /&gt;</span></span>&#125;&lt;/Col&gt;</span><br><span class=\"line\">      &lt;/Row&gt;</span><br><span class=\"line\">      &lt;div onMouseDown=&#123;handleMouseDown&#125; onMouseMove=&#123;handleMouseMove&#125; onMouseUp=&#123;handleMouseUp&#125;&gt;</span><br><span class=\"line\">        &#123;state.file &amp;&amp; (</span><br><span class=\"line\">          &lt;Row&gt;</span><br><span class=\"line\">            &lt;Col style=&#123;&#123; <span class=\"attr\">position</span>: <span class=\"string\">&quot;relative&quot;</span> &#125;&#125;&gt;</span><br><span class=\"line\">              &lt;canvas ref=&#123;canvasRef&#125; width=<span class=\"string\">&quot;300&quot;</span> height=<span class=\"string\">&quot;300&quot;</span> style=&#123;&#123; <span class=\"attr\">border</span>: <span class=\"string\">&quot;2px dashed #632B21&quot;</span> &#125;&#125;&gt;&lt;/canvas&gt;</span><br><span class=\"line\">              &lt;div</span><br><span class=\"line\">                style=&#123;&#123;</span><br><span class=\"line\">                  width: <span class=\"number\">100</span>,</span><br><span class=\"line\">                  height: <span class=\"number\">100</span>,</span><br><span class=\"line\">                  backgroundColor: <span class=\"string\">&quot;blue&quot;</span>,</span><br><span class=\"line\">                  opacity: <span class=\"number\">0.3</span>,</span><br><span class=\"line\">                  position: <span class=\"string\">&quot;absolute&quot;</span>,</span><br><span class=\"line\">                  left: <span class=\"number\">100</span>,</span><br><span class=\"line\">                  top: <span class=\"number\">100</span></span><br><span class=\"line\">                &#125;&#125;&gt;&lt;/div&gt;</span><br><span class=\"line\">            &lt;/Col&gt;</span><br><span class=\"line\">            &lt;Col&gt;</span><br><span class=\"line\">              &lt;Button icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">PlusCircleOutlined</span> /&gt;</span></span>&#125; onClick=&#123;bigger&#125;&gt;</span><br><span class=\"line\">                å˜å¤§</span><br><span class=\"line\">              &lt;/Button&gt;</span><br><span class=\"line\">              &lt;Button icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">MinusCircleOutlined</span> /&gt;</span></span>&#125; onClick=&#123;smaller&#125;&gt;</span><br><span class=\"line\">                å˜å°</span><br><span class=\"line\">              &lt;/Button&gt;</span><br><span class=\"line\">              &lt;Button icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">ScissorOutlined</span> /&gt;</span></span>&#125; onClick=&#123;confirm&#125;&gt;</span><br><span class=\"line\">                å‰ªåˆ‡</span><br><span class=\"line\">              &lt;/Button&gt;</span><br><span class=\"line\">            &lt;/Col&gt;</span><br><span class=\"line\">          &lt;/Row&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">      &lt;div&gt;&#123;state.file &amp;&amp; <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;avatarRef&#125;</span> <span class=\"attr\">alt</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">border:</span> &quot;<span class=\"attr\">2px</span> <span class=\"attr\">solid</span> #<span class=\"attr\">85D6C7</span>&quot; &#125;&#125; /&gt;</span></span>&#125;&lt;/div&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &#123;state.file &amp;&amp; (</span><br><span class=\"line\">          &lt;Button type=<span class=\"string\">&quot;primary&quot;</span> icon=&#123;<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">UploadOutlined</span> /&gt;</span></span>&#125; onClick=&#123;upload&#125;&gt;</span><br><span class=\"line\">            ä¸Šä¼ </span><br><span class=\"line\">          &lt;/Button&gt;</span><br><span class=\"line\">        )&#125;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å®ç°\"><a href=\"#å®ç°\" class=\"headerlink\" title=\"å®ç°\"></a>å®ç°</h3><h4 id=\"ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\"><a href=\"#ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\" class=\"headerlink\" title=\"ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶\"></a>ä¸€ã€è·å–æ–‡ä»¶å¹¶è¯»å–æ–‡ä»¶</h4><p>ç»™ <code>input</code>Â  ç»‘å®šäº‹ä»¶</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useRef &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> App = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> imgRef = useRef();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> canvasRef = useRef();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [file, setFile] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [dataURL, setDataURL] = useState();</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [startX, setStartX] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [startY, setStartY] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [lastX, setLastX] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [lastY, setLastY] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [startDrag, setStartDrag] = useState(<span class=\"literal\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> handleChange = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> file = event.target.files[<span class=\"number\">0</span>];</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileReader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">    fileReader.onload = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">      setFile(file);</span><br><span class=\"line\">      setDataURL(event.target.result);</span><br><span class=\"line\">      imageRef.current.onload = <span class=\"function\">() =&gt;</span> drawImage();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    fileReader.readAsDataURL(file);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;file&quot;</span> onChange=&#123;handleChange&#125; /&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">      &lt;img src=<span class=\"string\">&quot;xxx&quot;</span> ref=&#123;imgRef&#125; /&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p><code>HTML5</code>Â  æ”¯æŒä» Â <code>input[type=file]</code>Â  å…ƒç´ ä¸­ç›´æ¥è·å–æ–‡ä»¶ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥è¯»å–æ–‡ä»¶å†…å®¹ã€‚</p>\n<p>æ­¤å¤„ç”¨åˆ°äº† <code>FileReader</code>Â ï¼Œè¿™ä¸ªç±»ä¸“é—¨ç”¨æ¥è¯»å–æœ¬åœ°æ–‡ä»¶ã€‚çº¯æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶éƒ½å¯ä»¥è¿›è¡Œè¯»å–ï¼Œä½†æ˜¯æœ¬åœ°æ–‡ä»¶å¿…é¡»æ˜¯ç»è¿‡ç”¨æˆ·å…è®¸ä¹‹åæ‰èƒ½è¯»å–ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·è¦åœ¨ <code>input[type=file]</code>Â  ä¸­é€‰æ‹©äº†è¿™ä¸ªæ–‡ä»¶ï¼Œä½ æ‰å¯ä»¥è¯»å–åˆ°å®ƒã€‚</p>\n<p>é€šè¿‡ <code>FileReader</code>Â  æˆ‘ä»¬å¯ä»¥å°†å›¾ç‰‡æ–‡ä»¶è½¬åŒ–ä¸º <code>DataURL</code>Â ï¼Œå°±æ˜¯ä»¥ <code>data:image/png;base64</code>Â  å¼€å¤´çš„ä¸€ç§ <code>URL</code>Â ï¼Œç„¶åå¯ä»¥ç›´æ¥æ”¾åœ¨ <code>image.src</code>Â  é‡Œï¼Œæ­¤æ—¶æœ¬åœ°å›¾ç‰‡å°±ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n<h4 id=\"äºŒã€è·å–è£å‰ªåæ ‡\"><a href=\"#äºŒã€è·å–è£å‰ªåæ ‡\" class=\"headerlink\" title=\"äºŒã€è·å–è£å‰ªåæ ‡\"></a>äºŒã€è·å–è£å‰ªåæ ‡</h4><ul>\n<li><code>mousedown</code></li>\n</ul>\n<p>è¿™é‡Œè¦è®°å½•é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡ï¼Œå³ <code>startX</code>Â  å’Œ <code>startY</code>Â ï¼ŒåŒæ—¶å°†æ ‡è¯†ä½ <code>startDrag</code>Â  è®¾ä¸º <code>true</code>Â ï¼Œæ ‡è¯†é¼ æ ‡å¼€å§‹ç§»åŠ¨ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handleMouseDown = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  setStartX(event.clientX);</span><br><span class=\"line\">  setStartY(event.clientY);</span><br><span class=\"line\">  setStartDrag(<span class=\"literal\">true</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mousemove</code></li>\n</ul>\n<p>åˆ¤æ–­ <code>startDrag</code>Â  ä¸º <code>true</code>ï¼ˆå³é¼ æ ‡å¼€å§‹ç§»åŠ¨ï¼‰ï¼Œç„¶åè®°å½•å¯¹åº”ç§»åŠ¨çš„è·ç¦»ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handleMouseMove = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (startDrag) &#123;</span><br><span class=\"line\">    drawImage(event.clientX - startX + lastX, event.clientY - startY + lastY);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>mouseup</code></li>\n</ul>\n<p>è¿™é‡Œè¦è®°å½•ä¸‹æœ€ç»ˆé¼ æ ‡çš„è½ç‚¹åæ ‡ï¼Œå¯¹åº”å°±æ˜¯ <code>lastX</code>Â  ä¸ <code>lastY</code>ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handleMouseUp = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  setLastX(event.clientX - startX + lastX);</span><br><span class=\"line\">  setLastY(event.clientY - startY + lastY);</span><br><span class=\"line\">  setStartDrag(<span class=\"literal\">false</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"ä¸‰ã€è£å‰ªå›¾ç‰‡\"><a href=\"#ä¸‰ã€è£å‰ªå›¾ç‰‡\" class=\"headerlink\" title=\"ä¸‰ã€è£å‰ªå›¾ç‰‡\"></a>ä¸‰ã€è£å‰ªå›¾ç‰‡</h4><p>å°†å›¾ç‰‡æ”¾ç½®å…¥ <code>canvas</code>Â  æ—¶éœ€è¦è°ƒç”¨ <code>drawImage</code>Â :</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> drawImage = <span class=\"function\">(<span class=\"params\">left = lastX, top = lastY</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> image = imgRef.current,</span><br><span class=\"line\">    canvas = canvasRef.current,</span><br><span class=\"line\">    ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">  ctx.clearRect(<span class=\"number\">0</span>, <span class=\"number\">0</span>, canvas.width, canvas.height);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> imageWidth = image.width,</span><br><span class=\"line\">    imageHeight = image.height;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (imageWidth &gt; imageHeight) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> scale = canvas.width / canvas.height;</span><br><span class=\"line\">    imageWidth = canvas.width * times;</span><br><span class=\"line\">    imageHeight = imageHeight * scale * times;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> scale = canvas.height / canvas.width;</span><br><span class=\"line\">    imageHeight = canvas.height * times;</span><br><span class=\"line\">    imageWidth = imageWidth * scale * times;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  ctx.drawImage(image, (canvas.width - imageWidth) / <span class=\"number\">2</span> + left, (canvas.height - imageHeight) / <span class=\"number\">2</span> + top, imageWidth, imageHeight);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>åŠ å…¥äº† <code>scale</code>ï¼Œè¿™ä¸ªå˜é‡æ˜¯ç”¨æ¥å®ç°å›¾ç‰‡æ”¾å¤§ã€ç¼©å°æ•ˆæœçš„ã€‚åŒæ—¶ä¼šåˆ¤æ–­å›¾ç‰‡çš„å®½ã€é«˜çš„å¤§å°å…³ç³»ï¼Œä»è€Œå®ç°å›¾ç‰‡åœ¨ <code>canvas</code>Â  ä¸­å¯¹åº”çš„é€‚é…ã€‚</p>\n<h4 id=\"å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \"><a href=\"#å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \" class=\"headerlink\" title=\"å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ \"></a>å››ã€è¯»å–è£å‰ªåçš„å›¾ç‰‡å¹¶ä¸Šä¼ </h4><p>è¿™æ—¶æˆ‘ä»¬è¦è·å– <code>canvas</code>Â  ä¸­å›¾ç‰‡çš„ä¿¡æ¯ï¼Œç”¨ <code>toDataURL</code>Â  å°±å¯ä»¥è½¬æ¢æˆä¸Šé¢ç”¨åˆ°çš„ <code>DataURL</code>Â ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> confirm = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> canvas = canvasRef.current;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ctx = canvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> imageData = ctx.getImageData(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> avatarCanvas = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;canvas&quot;</span>);</span><br><span class=\"line\">  avatarCanvas.width = <span class=\"number\">100</span>;</span><br><span class=\"line\">  avatarCanvas.height = <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> avatarCtx = avatarCanvas.getContext(<span class=\"string\">&quot;2d&quot;</span>);</span><br><span class=\"line\">  avatarCtx.putImageData(imageData, <span class=\"number\">0</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> avatarDataUrl = avatarCanvas.toDataURL();</span><br><span class=\"line\">  setAvatarDataUrl(avatarDataUrl);</span><br><span class=\"line\">  avatarRef.current.src = avatarDataUrl;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<p>ç„¶åå–å‡ºå…¶ä¸­ <code>base64</code>Â  ä¿¡æ¯ï¼Œå†ç”¨ <code>window.atob</code>Â  è½¬æ¢æˆç”±äºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚ä½† <code>window.atob</code>Â  è½¬æ¢åçš„ç»“æœä»ç„¶æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥ç»™ <code>Blob</code>Â  è¿˜æ˜¯ä¼šå‡ºé”™ã€‚æ‰€ä»¥åˆè¦ç”¨ <code>Uint8Array</code>Â  è½¬æ¢ä¸€ä¸‹ã€‚</p>\n<p>è¿™æ—¶å€™è£å‰ªåçš„æ–‡ä»¶å°±å‚¨å­˜åœ¨ <code>blob</code>Â  é‡Œäº†,æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“ä½œæ˜¯æ™®é€šæ–‡ä»¶ä¸€æ ·ï¼ŒåŠ å…¥åˆ° <code>FormData</code>Â  é‡Œï¼Œå¹¶ä¸Šä¼ è‡³æœåŠ¡å™¨äº†ã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> upload = <span class=\"function\"><span class=\"params\">event</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;æ–‡ä»¶url&quot;, this.state.avatarDataUrl);</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> bytes = atob(avatarDataUrl.split(<span class=\"string\">&quot;,&quot;</span>)[<span class=\"number\">1</span>]);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;bytes&quot;</span>, bytes);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> arrayBuffer = <span class=\"keyword\">new</span> <span class=\"built_in\">ArrayBuffer</span>(bytes.length);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> uInt8Array = <span class=\"keyword\">new</span> <span class=\"built_in\">Uint8Array</span>();</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; bytes.length; i++) &#123;</span><br><span class=\"line\">    uInt8Array[i] = bytes.charCodeAt[i];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> blob = <span class=\"keyword\">new</span> Blob([arrayBuffer], &#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;image/png&quot;</span> &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> xhr = <span class=\"keyword\">new</span> XMLHttpRequest();</span><br><span class=\"line\">  <span class=\"keyword\">let</span> formData = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">  formData.append(<span class=\"string\">&quot;avatar&quot;</span>, blob);</span><br><span class=\"line\">  xhr.open(<span class=\"string\">&quot;POST&quot;</span>, <span class=\"string\">&quot;/upload&quot;</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  xhr.send(formData);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n"},{"title":"React16 æ–‡æ¡£","date":"2020-08-14T16:00:00.000Z","_content":"\n## 1. React ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\n\n### è™šæ‹Ÿ DOM\n\n1. DOM çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n> æµè§ˆå™¨ä¸­çš„æ¦‚å¿µï¼Œç”¨`js`å¯¹è±¡æ¥è¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œ `DOM` å¯¹è±¡çš„ APIï¼›\n\n2. ä»€ä¹ˆæ˜¯ React ä¸­çš„ è™šæ‹Ÿ DOMï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„æœ¬è´¨ï¼‰ï¼š\n\n> ç”¨`js`å¯¹è±¡æ¥æ¨¡æ‹Ÿ é¡µé¢ä¸Šçš„`DOMå’ŒDOMåµŒå¥—`\n\n3. ä¸ºä»€ä¹ˆè¦å®ç° è™šæ‹Ÿ DOM ï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„ç›®çš„ï¼‰ï¼š\n\n> ä¸ºäº†å®ç°é¡µé¢ä¸­ï¼Œ`DOM`å…ƒç´ çš„é«˜æ•ˆæ›´æ–°\n\n4. DOM å’Œ è™šæ‹Ÿ DOM çš„åŒºåˆ«ï¼š\n\n- `DOM`ï¼šæµè§ˆå™¨ä¸­ï¼Œæä¾›çš„æ¦‚å¿µï¼›ç”¨`js`å¯¹è±¡ï¼Œè¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œå…ƒç´ çš„ `API`ï¼›\n- `è™šæ‹ŸDOM`ï¼šæ˜¯æ¡†æ¶ä¸­çš„æ¦‚å¿µï¼›æ˜¯å¼€å‘æ¡†æ¶çš„äººå‘˜ï¼Œæ‰‹åŠ¨ç”¨`js`å¯¹è±¡æ¥æ¨¡æ‹Ÿ`DOM`å…ƒç´ å’ŒåµŒå¥—å…³ç³»ï¼›\n\n5. DOM æ ‘çš„æ¦‚å¿µï¼š\n\n> ä¸€ä¸ªç½‘é¡µçš„å‘ˆç°è¿‡ç¨‹ï¼š\n>\n> 1. æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨è·å–é¡µé¢çš„ `html` ä»£ç ï¼›\n> 2. æµè§ˆå™¨è¦å…ˆåœ¨å†…å­˜ä¸­ï¼Œè§£æ `DOM` ç»“æ„ï¼Œå¹¶åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œæ¸²æŸ“å‡ºä¸€æ£µ `DOM` æ ‘ï¼›\n> 3. æµè§ˆå™¨æŠŠ `DOM` æ ‘ï¼Œå‘ˆç°åˆ°é¡µé¢ä¸Šï¼›\n\n### Diff ç®—æ³•\n\n1. tree diffï¼š\n\n> æ–°æ—§ä¸¤æ£µ `DOM` æ ‘ï¼Œé€å±‚å¯¹æ¯”çš„è¿‡ç¨‹ï¼Œå°±æ˜¯`tree diff`ï¼›\n> å½“æ•´æ£µ`DOM`é€å±‚å¯¹æ¯”å®Œæ¯•ï¼Œåˆ™æ‰€æœ‰éœ€è¦è¢«æŒ‰éœ€æ›´æ–°çš„å…ƒç´ ï¼Œå¿…ç„¶èƒ½å¤Ÿè¢«æ‰¾åˆ°ï¼›\n\n2. component diffï¼š\n\n> åœ¨è¿›è¡Œ `tree diff` çš„æ—¶å€™ï¼Œæ¯ä¸€å±‚ä¸­ï¼Œç»„ä»¶çº§åˆ«çš„å¯¹æ¯”ï¼Œå«åš `component diff`ï¼›\n> å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™**æš‚æ—¶**è®¤ä¸ºæ­¤ç»„ä»¶ä¸è®¸è¦è¢«æ›´æ–°ï¼›\n> å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦ç§»é™¤æ—§ç»„ä»¶ï¼Œåˆ›å»ºæ–°ç»„ä»¶ï¼Œå¹¶è¿½åŠ åˆ°é¡µé¢ä¸Šï¼›\n\n3. element diffï¼š\n\n> åœ¨è¿›è¡Œç»„ä»¶å¯¹æ¯”çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™éœ€è¦è¿›è¡Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œè¿™å«åš`element diff`ï¼›\n\n## 2. React ä¸­åˆ›å»ºç»„ä»¶\n\n### ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\n\n> 1ã€åœ¨ç»„ä»¶ä¸­ï¼Œå¿…é¡»è¦å‘å¤–`return`ä¸€ä¸ªåˆæ³•çš„`jsx`åˆ›å»ºçš„`è™šæ‹ŸDOM`å…ƒç´ ï¼›\n> 2ã€å¦‚æœè¦æ¥æ”¶å¤–ç•Œä¼ é€’çš„æ•°æ®ï¼Œéœ€è¦åœ¨`æ„é€ å‡½æ•°`çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨`props`æ¥æ¥æ”¶ï¼›\n> 3ã€æ— è®ºæ˜¯`vue`è¿˜æ˜¯`react`ï¼Œç»„ä»¶ä¸­çš„`props`æ°¸è¿œéƒ½æ˜¯åªè¯»`read-only`çš„ï¼Œä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼›\n> 4ã€ç»„ä»¶çš„åç§°`é¦–å­—æ¯`å¿…é¡»æ˜¯`å¤§å†™`çš„\n> 5ã€çœç•¥ `.jsx` æ–‡ä»¶å\n\n> æ‰“å¼€ `webpack.config.js`ï¼Œå¹¶åœ¨å¯¼å‡ºçš„é…ç½®å¯¹è±¡ä¸­ï¼Œæ–°å¢ä»¥ä¸‹å‡ ä¸ªèŠ‚ç‚¹ï¼š\n\n```javascript\nresolve: {\n  extensions: [\".js\", \".jsx\", \".json\"];\n}\n```\n\n> å¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶ä¸­ `return` ä¸€ä¸ª `null`ï¼Œåˆ™è¡¨ç¤ºæ­¤ç»„ä»¶æ˜¯ç©ºçš„ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ¸²æŸ“\n\n```jsx\nfunction Hello(props) {\n  return (\n    <div>\n      è¿™æ˜¯Helloç»„ä»¶ -- {props.name} -- {props.age} -- {props.gender}\n    </div>\n  );\n}\n\nconst user = {\n  name: \"å¤§é»„\",\n  age: 3,\n  gender: \"é›„æ€§\"\n};\n\nReactDOM.render(\n  <div>\n    <Hello {...user} />\n  </div>,\n  document.getElementById(\"#app\")\n);\n```\n\n### ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\n\n> `public`: æ‰€æœ‰æˆå‘˜éƒ½å¯è®¿é—®\n> `private`: åªæœ‰å½“å‰ç±»å¯è®¿é—®\n> `protected`: åªæœ‰å½“å‰ç±»å’Œå…¶å­ç±»å¯è®¿é—®ï¼Œå¤–éƒ¨æˆå‘˜æ— æ³•è®¿é—®\n\n> `es6`ä¸­çš„`classå…³é”®å­—`ï¼Œæ˜¯å®ç°`é¢å‘å¯¹è±¡ç¼–ç¨‹`çš„æ–°å½¢å¼ï¼Œä¹Ÿå«åš`è¯­æ³•ç³–`\n\n- constructor æ„é€ å™¨ä¸­çš„ super å‡½æ•°\n\n> åœ¨å­ç±»ä¸­ï¼Œ `this` åªèƒ½æ”¾åˆ° `super` ä¹‹åä½¿ç”¨\n> å­ç±»ä¸­çš„ `super`ï¼Œå…¶å®å°±æ˜¯çˆ¶ç±»ä¸­ï¼Œ`contructor`æ„é€ å™¨çš„ä¸€ä¸ªå¼•ç”¨\n\n- æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„\n\n> `render`å‡½æ•°çš„ä½œç”¨ï¼šæ¸²æŸ“å½“å‰ç»„ä»¶æ‰€å¯¹åº”çš„`è™šæ‹ŸDOM` å…ƒç´ \n\n```jsx\nimport React from \"react\";\nclass ç»„ä»¶åç§° extends React.Component {\n  render() {\n    return <div>è¿™æ˜¯ class åˆ›å»ºçš„ç»„ä»¶</div>;\n  }\n}\n```\n\n- this.props å’Œ this.state\n\n> 1. `this.props` æ¥æ”¶å¤–ç•Œä¼ é€’çš„å‚æ•°ï¼Œ`this.state` è®¾ç½®ç§æœ‰æ•°æ®\n> 2. åœ¨ `class` å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨ `this.props` è®¿é—®ä¼ é€’è¿‡æ¥çš„æ•°æ®\n> 3. `props` æ˜¯åªè¯»çš„\n\n```jsx\nclass Movie extends React.Component {\n  constructor() {\n    super();\n    // è¿™é‡Œçš„ this.state = {}ï¼Œå°±ç›¸å½“äº Vueä¸­çš„data() { return {} }\n    this.state = {\n      msg: \"è¿™æ˜¯Movieç»„ä»¶çš„ç§æœ‰æ•°æ®\"\n    };\n  }\n  render() {\n    {\n      /* æ³¨æ„ï¼šåœ¨ class ç»„ä»¶å†…å®¹ï¼Œthis è¡¨ç¤ºå½“å‰ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ */\n    }\n    return <div>è¿™æ˜¯Movieç»„ä»¶ -- {this.props.name}</div>;\n  }\n}\nconst user = {\n  name: \"å¤§é»„\",\n  age: 3,\n  gender: \"é›„æ€§\"\n};\n\nReactDOM.render(\n  <div>\n    <Movie {...user} />\n    <h3>{this.state.msg}</h3>\n  </div>,\n  document.getElementById(\"#app\")\n);\n```\n\n### ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\n\n> ä½¿ç”¨ `class` å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„ `ç§æœ‰æ•°æ®(this.state)` å’Œ `ç”Ÿå‘½å‘¨æœŸ`\n> ä½¿ç”¨ `function` åˆ›å»ºçš„ç»„ä»¶ï¼Œåªæœ‰ `props`ï¼Œæ²¡æœ‰è‡ªå·±çš„ `ç§æœ‰æ•°æ®` å’Œ `ç”Ÿå‘½å‘¨æœŸ`\n> æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ä¹‹é—´çš„ `æœ¬è´¨åŒºåˆ«`ï¼šæœ‰æ—  `state` å±æ€§å’Œ `ç”Ÿå‘½å‘¨æœŸå‡½æ•°`\n\n## 3. React ä¸­ style å¤„ç†æ–¹å¼\n\n### å†…è”\n\n```jsx\nstyle = {{ color: red }}\n```\n\n### css\n\n> 1ã€å¦‚æœç›´æ¥å¯¼å…¥ `css` æ ·å¼è¡¨ï¼Œé»˜è®¤åˆ™æ˜¯åœ¨å…¨å±€ä¸Šï¼Œæ•´ä¸ªé¡¹ç›®éƒ½ä¼šç”Ÿæ•ˆ\n> 2ã€css æ¨¡å—åŒ–ï¼Œåªé’ˆå¯¹ `class` é€‰æ‹©å™¨ å’Œ `id` é€‰æ‹©å™¨ç”Ÿæ•ˆ\n> å¼•ç”¨ï¼š`import style from './style.css'`\n\n## 4. React ä¸­äº‹ä»¶ç»‘å®š\n\n1. äº‹ä»¶çš„åç§°éƒ½æ˜¯ `React` æ‰€æä¾›çš„ï¼Œå› æ­¤åç§°çš„é¦–å­—æ¯å¿…é¡»å¤§å†™`onClick`ï¼Œ`onMouseOver`\n2. ä¸ºäº‹ä»¶æä¾›çš„å¤„ç†å‡½æ•°ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š\n\n```javascript\nonClick = { function };\n```\n\n3. ç”¨çš„æœ€å¤šçš„äº‹ä»¶ç»‘å®šå½¢å¼ä¸ºï¼š\n\n```jsx\n<button onClick={() => this.show(\"ä¼ å‚\")}>æŒ‰é’®</button>;\n\n// äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œéœ€è¦å®šä¹‰ä¸º ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç„¶åèµ‹å€¼ç»™ å‡½æ•°åç§°\nshow = arg1 => {\n  console.log(\"showæ–¹æ³•\" + arg1);\n};\n```\n\n4. åœ¨ `React` ä¸­ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ `state` ä¸­çš„æ•°æ®ï¼Œæ¨èä½¿ç”¨ `this.setState({ })`\n\n> 1ã€åœ¨`setState`ä¸­ï¼Œåªä¼šæŠŠå¯¹åº”çš„ `state`çŠ¶æ€æ›´æ–°ï¼Œè€Œä¸ä¼šè¦†ç›–å…¶å®ƒçš„ `state`çŠ¶æ€ã€‚\n> 2ã€`this.setState` æ–¹æ³•çš„æ‰§è¡Œæ—¶ `å¼‚æ­¥çš„`ã€‚\n> 3ã€å¦‚æœåœ¨è°ƒç”¨å®Œ `this.setState`ä¹‹åï¼Œåˆæƒ³ç«‹å³æ‹¿åˆ°æœ€æ–°çš„`state`çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨ `this.setState({}, callback)`ï¼Œç¬¬äºŒä¸ªå‚æ•°ã€å›è°ƒå‡½æ•°ã€‘ä¸­è·å–ã€‚\n\n## 5. å•å‘æ•°æ®æµ(çŠ¶æ€å˜åŒ– => è‡ªåŠ¨æ›´æ–°é¡µé¢)\n\n> 1ã€`React` ä¸­ï¼Œé»˜è®¤æ˜¯ `å•å‘æ•°æ®æµ`ï¼Œåªèƒ½æŠŠ `state` ä¸Šçš„æ•°æ®ç»‘å®šåˆ°é¡µé¢ï¼Œæ— æ³•æŠŠé¡µé¢ä¸­æ•°æ®çš„å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥å› `state`ï¼›å¦‚æœéœ€è¦æŠŠé¡µé¢ä¸Šæ•°æ®çš„å˜åŒ–ï¼Œä¿å­˜åˆ° `state`ï¼Œéœ€è¦æ‰‹åŠ¨ç›‘å¬`onChange` äº‹ä»¶ï¼Œæ‹¿åˆ°æœ€æ–°çš„æ•°æ®ï¼Œæ‰‹åŠ¨è°ƒç”¨ `this.setState({ })` æ›´æ”¹ã€‚\n> 2ã€å½“ä¸ºæ–‡æœ¬æ¡†ç»‘å®š `value` å€¼ä»¥åï¼Œè¦ä¹ˆåŒæ—¶ç»™æ ‡ç­¾æä¾›ä¸€ä¸ª `readOnly` å±æ€§ï¼Œè¦ä¹ˆæä¾›ä¸€ä¸ª `onChange` äº‹ä»¶å¤„ç†å‡½æ•°ã€‚\n\n```jsx\n// æ–¹æ¡ˆä¸€ï¼šé€šè¿‡äº‹ä»¶å‚æ•° e æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨\n<input type=\"text\" value={this.state.msg} onChange={e => this.textChanged(e)} />;\n\ntextChanged = e => {\n  console.log(e.target.value);\n};\n\n// æ–¹æ¡ˆäºŒï¼šé€šè¿‡ref æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨  this.refs.å¼•ç”¨åç§°\n<input type=\"text\" value={this.state.msg} onChange={() => this.textChanged()} ref=\"txt\" />;\n\ntextChanged = () => {\n  console.log(this.refs.txt.value);\n};\n```\n\n## 6. ç”Ÿå‘½å‘¨æœŸ\n\n- ç”Ÿå‘½å‘¨æœŸä»‹ç»\n\n> æ¯ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œä»åˆ›å»ºã€åˆ°è¿è¡Œã€ç›´åˆ°é”€æ¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å°±å«åšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\n\n- React çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†\n\n1. ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> åªæ‰§è¡Œä¸€æ¬¡\n\n> 1. `componentWillMount` => `æŒ‚è½½ä¹‹å‰`\n> 2. `render` => `æ­£åœ¨æ¸²æŸ“ï¼Œè™šæ‹ŸDOMåˆ›å»ºåˆ°äº†å†…å­˜ä¸­ï¼Œè¿˜æœªæŒ‚è½½åˆ°é¡µé¢ä¸Š`\n> 3. `componentDidMount` => `æŒ‚è½½ç»“æŸï¼Œéœ€è¦æ“ä½œDOMèŠ‚ç‚¹çš„åˆå§‹åŒ–æ“ä½œæ”¾åœ¨è¿™é‡Œ`\n\n2. ç»„ä»¶è¿è¡Œé˜¶æ®µï¼š\n\n> æ ¹æ® `props` å±æ€§æˆ–è€… `state` çŠ¶æ€çš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„æ‰§è¡Œ `0` åˆ° `å¤šæ¬¡`\n\n> 1. `props` æ”¹å˜ä¹‹å\n> 2. `componentWillReceiveProps` => å½“ä¸€ä¸ªæŒ‚è½½çš„ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ `props` çš„æ—¶å€™è¢«è°ƒç”¨\n> 3. `state` æ”¹å˜ä¹‹å\n> 4. `shouldComponentUpdateï¼ˆnextprops, nextStateï¼‰` => å½“ç»„ä»¶åšå‡ºæ˜¯å¦è¦æ›´æ–° `DOM` çš„å†³å®šçš„æ—¶å€™è¢«è°ƒç”¨ï¼Œåœ¨æ”¹å˜çŠ¶æ€çš„æ—¶å€™å¯ä»¥é€‰æ‹©é€šè¿‡( `return true` )æˆ–è€…ä¸é€šè¿‡( `return false`)\n> 5. `componentWillUpdate` => åœ¨æ›´æ–°å‘ç”Ÿä¹‹å‰è¢«è°ƒç”¨\n> 6. `render` => æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢æ˜¯æ—§çš„\n>\n> 7.`componentDidUpdate` => æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢å·²ç»å˜æˆäº†æœ€æ–°çš„\n\n3. ç»„ä»¶é”€æ¯é˜¶æ®µ\n\n> åªæ‰§è¡Œä¸€æ¬¡\n\n> `componentWillUnmount` => ç»„ä»¶ç§»é™¤æˆ–è€…é”€æ¯çš„æ—¶å€™è¢«è°ƒç”¨\n\n## 7. éªŒè¯æ•°æ®ç±»å‹\n\n```javascript\nimport { ProtoTypes } from \"prop-types\";\n\n// å®šä¹‰ç»„ä»¶éœ€è¦ä¼ å…¥çš„å‚æ•°\nMyCompo.protoTypes = {\n  a: ProtoTypes.string.isRequired,\n  b: ProtoTypes.string.isRequired,\n  c: ProtoTypes.number.isRequired\n};\n```\n\n## 8. flux\n\n### ç®€ä»‹\n\n> ä¼ ç»Ÿçš„ `MVC` å’Œ `MVVM` æ¶æ„è®¾è®¡æ¨¡å¼æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šå½“é¡¹ç›®è¶Šæ¥è¶Šå¤§ã€é€»è¾‘è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæ•°æ®æµåŠ¨å°±è¶Šæ˜¾å¾—æ··ä¹±ã€‚\n\n> `Flux` æ˜¯è‡´åŠ›äºè§£å†³æ•°æ®æœ‰åºä¼ è¾“é—®é¢˜çš„æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œæ¥è‡ª `Facebook`ã€‚`Flux` ä¸­æœ€å¤§çš„å“²å­¦ï¼šæ•°æ®æ˜¯ `å•å‘æµåŠ¨` çš„ã€‚\n\n> [å®˜æ–¹æ‰‹å†Œ](https://github.com/facebook/flux/tree/master/examples/flux-concepts)\n\n> `Flux` ä¸­æœ€é‡è¦çš„å››ä¸ªæ¦‚å¿µï¼š`Dispatcher`ã€`Store`ã€`View`ã€`Action`ã€‚\n\n![flux.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703835856-e1263bac-124a-40da-ae3c-b45a4c8081ae.png#align=left&display=inline&height=393&margin=%5Bobject%20Object%5D&name=flux.png&originHeight=393&originWidth=1300&size=26132&status=done&style=none&width=1300)\n\n### åŸºæœ¬æ¦‚å¿µ\n\n1. æ¦‚è¿°\n   - `flux` æ˜¯ä¸€ä¸ªç®¡ç† `App` ä¸­æ•°æ®æµåŠ¨çš„æ¨¡å¼ã€‚\n   - æœ€å…³é”®çš„æ¦‚å¿µï¼š`æ•°æ®çš„æµåŠ¨æ˜¯å•å‘çš„`ã€‚\n2. Dispatcher è°ƒåº¦è€…\n   - `Dispatcher` æ¥å— `action`ï¼Œå¹¶ä¸”è¦æŠŠè¿™äº› `action` åˆ†æ´¾ç»™å·²ç»æ³¨å†Œåˆ° `Dispatcher` çš„ `store` ä¸Š\n   - æ‰€æœ‰çš„ `store` éƒ½å°†æ¥æ”¶æ‰€æœ‰çš„ `action`\n   - åœ¨æ¯ä¸ª `App` ä¸­ï¼Œåº”è¯¥ç¡®ä¿åªæœ‰ä¸€ä¸ª `Dispatcher` çš„å®ä¾‹\n3. store ä»“åº“\n   - `store` æ˜¯åœ¨ `App` ä¸­æŒæœ‰æ•°æ®çš„ä»“åº“\n   - æ‰€æœ‰çš„ `store` è¦åœ¨ `App` çš„ `Dispatcher` ä¸Šæ³¨å†Œï¼Œç¡®ä¿å®ƒä»¬å¯ä»¥æ¥æ”¶ `action`\n   - `store` ä¸­çš„æ•°æ®åªèƒ½è¢« `action` æ”¹å˜ã€‚\n   - `store` ä¸­ä¸èƒ½å¤Ÿæœ‰å…¬å…±çš„ `setter`ï¼Œåªèƒ½æœ‰ `getter`\n   - `store` å†³å®šäº†å®ƒä»¬æ„¿æ„å“åº”å“ªäº› `actions`\n   - æ— è®ºä½•æ—¶ï¼Œ`store` ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ª `change` äº‹ä»¶\n   - åŒä¸€ä¸ª `App` ä¸­å¯èƒ½æœ‰å¾ˆå¤š `store`\n4. Action è¡Œä¸º\n   - `Action` å®šä¹‰äº† `App` å†…éƒ¨çš„ `API`\n   - å®ƒä»¬æ•è·æ‰€æœ‰å¯èƒ½æ”¹å˜ `App` çš„é€”å¾„å’Œæ–¹æ³•\n   - å®ƒä»¬æ˜¯ç®€å•çš„`å¯¹è±¡`ï¼Œå¹¶ä¸”è¦æœ‰ `typeå±æ€§` å’Œ `å…¶ä»–çš„ä¸€äº›æ•°æ®å±æ€§`\n   - `Action` åº”è¯¥æœ‰ä¸€ä¸ªå…·æœ‰è¯­ä¹‰çš„ã€ç›´è§‚çš„è¡¨ç¤ºå®ƒæ˜¯åšä»€ä¹ˆçš„åå­—\n   - æ‰€æœ‰çš„`store`éƒ½å°†æ¥æ”¶åŒä¸€ä¸ª`action`ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ª `action`ï¼Œ`store` ä¼šçŸ¥é“å®ƒä»¬è¦æ¸…é™¤ã€æ›´æ–°å“ªäº›æ•°æ®\n5. Views è§†å›¾\n   - `store` ä¸­çš„æ•°æ®è¢«å±•ç¤ºåœ¨äº†`view`ä¸Š\n   - `View` å±‚å¯ä»¥ä½¿ç”¨ä»»ä½•æ¡†æ¶\n   - å½“ä¸€ä¸ªè§†å›¾æƒ³è¦è·å– `store` ä¸­çš„æ•°æ®ï¼Œå®ƒå¿…é¡» `subscribe è®¢é˜…` ä¸€ä¸‹è¯¥ `store` çš„`change` äº‹ä»¶\n   - å½“ `store` è§¦å‘äº† `change` äº‹ä»¶ï¼Œæ­¤æ—¶ `view` å°±èƒ½å¾—åˆ°æ–°çš„æ•°æ®å¹¶ä¸”é‡æ–°æ¸²æŸ“\n   - å¦‚æœä¸€ä¸ªç»„ä»¶è¦ä½¿ç”¨ `store`ï¼Œä½†æ˜¯æ²¡æœ‰è®¢é˜…è¿™ä¸ª `store`ï¼Œæ­¤æ—¶å°±ä¼šå‡ºé”™\n   - `Action` æœ€å¸¸è§çš„äº§ç”ŸåŸå› æ˜¯ï¼šåœ¨ `App` ä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†ï¼Œå› ä¸ºç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œè€Œè¢«æ­¤`view` `dispatch`å‡ºæ¥äº†\n\n### redux\n\n- ç®€ä»‹\n  - [å®˜ç½‘](https://redux.js.org/)\n  - Redux å°±æ˜¯ Flux æ€æƒ³åœ¨ React ä¸­çš„å®ç°\n  - Redux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çŠ¶æ€çš„ Js app å®¹å™¨\n  - [`é€šè¿‡ä¾‹å­æ¥å­¦ä¹ redux`](https://github.com/reactjs/redux/tree/master/examples)\n- Redux åˆ›å»ºçš„æ­¥éª¤\n  - è®¾ç½®ä¸€ä¸ª `reducer`ï¼›\n  - åˆ›å»ºä¸€ä¸ª`store`ï¼Œ`Redux.createStore(reducer)`\n  - åˆ›å»º `render` å‡½æ•°\n  - æ³¨å†Œ `render`ï¼Œ`store.subscribe(render)`\n  - ç›‘å¬ï¼Œæ­¤æ—¶è¦è®°å¾— `store.dispatch(action)`ï¼Œä¸æ˜¯ç›´æ¥ä¿®æ”¹`store`\n\n### React-Redux\n\n- ç®€ä»‹\n  - å°† `react` å’Œ `redux` åˆå¹¶èµ·æ¥ï¼Œå¯ä»¥è®©ä»»ä½•ç»„ä»¶åœ¨ä»»ä½•åœ°æ–¹çœ‹è§ `store`\n  - [å®˜æ–¹æ–‡æ¡£](https://github.com/reactjs/react-redux/tree/master/docs)\n  - `React-Redux` ç»™æˆ‘ä»¬æä¾›äº†ï¼š`Providerç»„ä»¶`ï¼Œ`connectå‡½æ•°`\n- Provider ç»„ä»¶\n\n> 1ã€ä½¿ç”¨ `react-redux` æä¾›çš„ `Provider` ç»„ä»¶ä¼ é€’ `store` ä¸Šä¸‹æ–‡ä¹‹åï¼Œ`åŒ…è£¹åœ¨å…¶ä¸­çš„æ‰€æœ‰ç»„ä»¶` å…¨éƒ½å¯ä»¥è¯†åˆ«è¿™ä¸ªä¸Šä¸‹æ–‡\n\n> 2ã€åœ¨ `Provider` ç»„ä»¶å†…éƒ¨çš„è‡ªå®šä¹‰ç»„ä»¶å¯ä»¥ä½¿ç”¨ `connect()` å‡½æ•°ï¼Œä½†æ˜¯åœ¨å…¶å¤–éƒ¨çš„ä¸å¯ä½¿ç”¨\n\n- connect å‡½æ•°\n\n> 1ã€å°† `Reactç»„ä»¶` å’Œ `Redux` çš„ `store` è¿›è¡Œè¿æ¥\n> 2ã€`connect` æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ `API` èƒ½å¤Ÿé€‚åº”ç»å¤§å¤šæ•°å·¥ä½œ\n> 3ã€å®ƒæ²¡æœ‰æ›´æ”¹ä½ ä¼ è¿›æ¥çš„ç±»ï¼Œåè€Œä¼šè¿”å›ä¸€ä¸ªå·²ç»è¿æ¥å¥½çš„æ–°ç±»\n> 4ã€æä¾›äº†ä¸¤ä¸ªå‚æ•°ï¼š`mapStateToProps`, `mapDispatchToProps`\n\n- mapStateToProps\n\n> 1ã€å¦‚æœä¼ å…¥`mapStateToProps`ï¼Œæ­¤æ—¶è¿™ä¸ªç»„ä»¶å°†è®¢é˜… `Redux` ä¸­ `store` çš„æ›´æ–°ä¿¡æ¯ï¼›\n> 2ã€è¿™æ„å‘³ç€æ— è®ºä»»ä½•æ—¶å€™ `store` è¢«æ›´æ”¹äº†ï¼Œ`mapStateToProps` å‡½æ•°éƒ½å°†ä¼šè¢«è°ƒç”¨ï¼Œ`mapStateToProps` çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ª `Object`ï¼›\n> 3ã€è¿™ä¸ª `Object` å°†ä¸ç»„ä»¶çš„ `props` èåˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè¿”å›çš„ `Object` ä¸­çš„ `key` å°†è‡ªåŠ¨æˆä¸ºç»„ä»¶çš„ `props` ä¸­çš„æˆå‘˜\n> 4ã€å¦‚æœä¸æƒ³è®¢é˜… `store` çš„æ›´æ–°ï¼Œæ­¤æ—¶å¯ä»¥ä¸ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œé‡‡ç”¨ `null` å ä½\n\n- mapDispatchToProps\n\n> å¦‚æœå‘ `connect` å‡½æ•°ä¸­ä¼ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ª `å‡½æ•°`ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°†è·å¾—`dispatch` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥é€šè¿‡ `emit action`ï¼Œé—´æ¥çš„å¯¼è‡´ `state` çš„æ”¹å˜\n> å¯ä»¥ä½¿ç”¨ `bindActionCreators()` æ–¹æ³•è½»æ¾çš„å°† `Action creator`(è¿”å› `action` çš„å‡½æ•°)æ¥å£å’Œ `dispatch` è¿›è¡Œç»‘å®š\n\n- ä¹¦å†™è§„åˆ™\n\n> index.js\n\n```jsx\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport App from \"./containers/App\";\nimport reducer from \"./reducers\";\n\nconst store = createStore(reducer);\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n```\n\n> App.js\n\n```jsx\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"./actions\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super();\n    console.log(props);\n    // props: { r: 0, g: 0, b: 0, actions: è®¸å¤šæ–¹æ³• }\n  }\n  render() {\n    return <div>è¿™æ˜¯Appç»„ä»¶</div>;\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    r: state.r,\n    g: state.g,\n    b: state.b\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    actions: bindActionCreators(actions, dispatch)\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n```\n\n> reducer.js\n\n```jsx\nexport default (state, action) => {\n  if (state == undefined) {\n    state = { r: 0, g: 0, b: 0 };\n  }\n  if (action.type == \"ADD\") {\n    return {\n      ...state,\n      r: state.r + 1\n    };\n  }\n  return state;\n};\n```\n\n> actions.js\n\n```jsx\nexport const ADD = () => { \"type\": \"ADD\" }\n```\n\n### ç»„ä»¶å†…éƒ¨çš„ state å’Œå…¨å±€çš„ state\n\n> ç»„ä»¶çš„æ•°æ®ä¸‰å…„å¼Ÿï¼š`state`, `props`, `context` ä¸ç®¡æ˜¯è°å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå¼•å‘ `render()` æ‰§è¡Œï¼Œè§†å›¾ä¼šè¢«é‡ç»˜ã€‚ä½†æ˜¯ï¼Œæ„é€ å‡½æ•°ä¸ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥ä¸ç®¡åŸºäºä»€ä¹ˆç†ç”±ï¼Œéƒ½ä¸éœ€è¦å°†å…¨å±€çš„çŠ¶æ€ï¼Œç”¨è‡ªå·±ç»„ä»¶çš„ `state` æ¥æ”¶ï¼Œè€Œä»…éœ€è¦ç”¨`connect`è¿æ¥ä¸€ä¸‹å…¨å±€`store`ï¼Œç„¶åä½¿ç”¨`this.props.**`å³å¯ã€‚\n\n### reducer æ¨¡å—åŒ–\n\n```javascript\nimport { combineReducers } from \"redux\";\nimport todoReducers from \"./todoReducer.js\"; // æ ‡å‡†reducer\n\nexport default combineReducers({\n  todoReducers\n});\n```\n\n### redux-logger\n\n> æ‰“å° redux log\n\n```javascript\nimport { createStore, applyMiddleware } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport reducer from \"./reducers/index.js\";\nlet store = createStore(reducer, applyMiddleware(createLogger()));\n```\n\n### redux-thunk\n\n> è§£å†³å¼‚æ­¥é—®é¢˜\n\n> `redux-thunk`å¸®åŠ©æˆ‘ä»¬åœ¨æ‰€æœ‰çš„ç»„ä»¶çš„ `props` ä¸­æ·»åŠ äº†ä¸€ä¸ª `dispatch` æ–¹æ³•ã€‚\n\n> å½“ç„¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸€å®šè¦è¢« `connect` å‡½æ•°è¿›è¡Œå¤„ç†\n\n> æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ `thunk`ï¼Œåˆ™ `connect` å‡½æ•°ä¸èƒ½ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— æ³•è·å– `this.props.dispatch()`\n\n```javascript\n// å…¥å£æ–‡ä»¶\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nlet store = createStore(reducer, applyMiddleware(thunk))\n\n/** ç»„ä»¶ä¸­ */\n/** ç¬¬ä¸€ç§å†™æ³•ï¼Œå¹¶æ²¡æœ‰å°†actionsè¿›è¡ŒæŠ½ç¦» */\n$.get('/shu.txt', data => {\n    var number = Number(data);\n    this.props.dispatch({\n        \"type\": \"ADD\",\n        number\n    })\n})\n/** ç¬¬äºŒç§å†™æ³•:å¸¸ç”¨ */\n// å¯æšä¸¾\nimport * as actions from './actions/actions.js'\n\nclass ** extends React.Component {\n    ...\n    add() {\n        this.props.dispatch(actions.add())\n        this.props.dispatch(actions.minus())\n    }\n    ...\n}\n/** ç°åœ¨ï¼Œä¸€èˆ¬ä¸ä¼šå†å†™ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œå°±æ˜¯è¯´çœç•¥æ‰mapDispatchToProps */\nexport default connect(\n (state) => {\n    return {\n        state: state\n    }\n })(**)\n// actions.js\n/* ç°åœ¨ï¼Œå¼‚æ­¥çš„Action Creatorä¸è¦ç›´æ¥è¿”å› Actionï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæºå¸¦ dispatch çš„å‡½æ•°ï¼›è¿™ä¸ªå‡½æ•°ç›¸å½“äºâ€œå»¶é•¿â€äº†dispatchçš„æŒç»­æ—¶é—´ã€‚*/\nexport const add = () => (dispatch, getState) => {\n    console.log(getState()) // getStateå¯ä»¥è·å–å…¨å±€æ•°æ®\n    $.get('/shu.txt', data => {\n        var number = Number(data);\n        dispatch({\"type\": \"MINUS\", number})\n    })\n}\nexport const minus = () => { \"type\": \"MINUS\" }\n// reducer.js\nexport default (state = 0, action) => {\n    switch(action.type) {\n        case \"ADD\":\n            return state + action.number\n        case \"MINUS\":\n            return state - 1\n    }\n    return state;\n}\n```\n\n## 9. react-router4.x\n\n### ä»‹ç»\n\n- [å®˜ç½‘](https://reacttraining.com/react-router)\n- å®‰è£…ï¼š`npm install react-router-dom`\n\n### demo\n\n> `exact`è¡¨ç¤ºä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœè·¯å¾„ä¸º `path=\"/\"` çš„ `Route` ä¸è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨å‘ä¸‹åŒ¹é…è·¯ç”±ï¼Œå³éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥\n\n```jsx\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nfunction Index() {\n  return <h2>Home</h2>;\n}\n\nfunction About() {\n  return <h2>About</h2>;\n}\n\nfunction Users() {\n  return <h2>Users</h2>;\n}\n\nfunction AppRouter() {\n  return (\n    <Router>\n      <div>\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/\">Home</Link>\n            </li>\n            <li>\n              <Link to=\"/about/\">About</Link>\n            </li>\n            <li>\n              <Link to=\"/users/\">Users</Link>\n            </li>\n          </ul>\n        </nav>\n\n        <Route path=\"/\" exact component={Index} />\n        <Route path=\"/about/\" component={About} />\n        <Route path=\"/users/\" component={Users} />\n      </div>\n    </Router>\n  );\n}\nexport default AppRouter;\n```\n\n### åŠ¨æ€è·¯ç”±\n\n```jsx\n// App.js å®šä¹‰åŠ¨æ€è·¯ç”±\n<Route path=\"/content/:aid\"></Route>\n// news.js è·³è½¬\n<Link to={`/content/${value.aid}`}></Link>\n// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°\nclass Content extends Component {\n    /* ... */\n      componentDidMount() {\n          const { match } = this.props\n          // è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°\n          console.log(match.params.aid)\n      }\n    /* ... */\n}\n```\n\n### get ä¼ å€¼\n\n```jsx\n// App.js å®šä¹‰åŠ¨æ€è·¯ç”±\n<Route path=\"/content\"></Route>\n// news.js è·³è½¬\n<Link to={`/content?aid=${value.aid}`}></Link>\n// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°\nclass Content extends Component {\n    ...\n      componentDidMount() {\n          const { location } = this.props\n          // è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°\n          console.log(location.search)\n      }\n    ...\n}\n```\n\n### js æ§åˆ¶è·³è½¬\n\n1. å¼•å…¥ `Redirect` ç»„ä»¶\n2. å®šä¹‰ä¸€ä¸ª `flag`\n\n```javascript\nthis.state = {\n  loginFlag: false\n};\n```\n\n3. åœ¨ `Render` ä¸­åˆ¤æ–­ `flag`ï¼Œä»è€Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œè·³è½¬\n\n```jsx\nif (this.state.loginFlag) {\n  return <Redirect to={{ pathname: \"/\" }} />;\n}\n```\n\n4. æ‰§è¡Œ `js` è·³è½¬ï¼Œé€šè¿‡ `js` æ”¹å˜ `loginFlag` çš„çŠ¶æ€ï¼Œæ”¹å˜ä»¥åï¼Œå°±å¯ä»¥ä»æ–°çš„ `render` ä¸­é€šè¿‡ `Redirect` è‡ªå·±è¿›è¡Œè·³è½¬\n\n### æ¨¡å—åŒ–è·¯ç”±\n\n> router.js\n\n```jsx\nimport Home from \"./components/Home/\";\nimport About from \"./components/About/\";\nimport User from \"./components/User/\";\nimport UserList from \"./User/UserList\";\nimport UserInfo from \"./User/UserInfo\";\n\nlet router = [\n  {\n    path: \"/\",\n    component: Home,\n    exact: true\n  },\n  {\n    path: \"/about\",\n    component: About\n  },\n  {\n    path: \"/User\",\n    component: User,\n    routes: [\n      // åµŒå¥—è·¯ç”±è®¾ç½®\n      {\n        path: \"/user/\",\n        component: UserList\n      },\n      {\n        path: \"/user/info\",\n        component: UserInfo\n      }\n    ]\n  }\n];\nexport default router;\n```\n\n> App.js å…¥å£æ–‡ä»¶\n\n```jsx\nimport React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport router from \"./router.js\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n        <div>\n          {router.map((route, key) => {\n            if (route.exact) {\n              return (\n                <Route\n                  exact\n                  key={key}\n                  path={route.path}\n                  render={props => (\n                    // å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±\n                    <route.component {...props} routes={route.routes} />\n                  )}\n                />\n              );\n            } else {\n              return (\n                <Route\n                  key={key}\n                  path={route.path}\n                  render={props => (\n                    // å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±\n                    <route.component {...props} routes={route.routes} />\n                  )}\n                />\n              );\n            }\n          })}\n        </div>\n      </Router>\n    );\n  }\n}\n```\n\n> User.js\n\n```jsx\nimport React, { Component } from \"react\";\nimport { Route, Link } from \"react-router-dom\";\n\nclass User extends Component {\n  componentWillMount() {\n    console.log(this.props.routes);\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"contenr\">\n          <div className=\"left\">\n            <Link />\n          </div>\n          <div className=\"right\">\n            {this.props.routes.map((route, key) => {\n              return <Route exact key={key} path={route.path} component={route.component} />;\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default User;\n```\n\n### å¸¸ç”¨è·¯ç”±ç»„ä»¶\n\n- _BrowserRouter_ï¼šä½¿ç”¨ `HTML5` å†å²è®°å½• `API` (`pushState`ï¼Œ`replaceState` å’Œ`popstate` äº‹ä»¶)çš„ `<Router>` æ¥ä¿æŒ `UI` ä¸ `URL` çš„åŒæ­¥\n- _HashRouter_ï¼šä½¿ç”¨ `URL` çš„å“ˆå¸Œéƒ¨åˆ†(å³ `window.location.hash` )çš„<è·¯ç”±å™¨>å¯ä»¥ä¿æŒæ‚¨çš„ `UI` ä¸ `URL` åŒæ­¥ã€‚æ³¨æ„ï¼šå“ˆå¸Œå†å²è®°å½•ä¸æ”¯æŒ `location.key` æˆ– `location.state`ã€‚ åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾ç¼“å’Œè¡Œä¸ºï¼Œä½†æ˜¯æœ‰ä¸€äº›è¾¹ç¼˜æ¡ˆä¾‹æˆ‘ä»¬æ— æ³•è§£å†³ã€‚ ä»»ä½•éœ€è¦æ­¤è¡Œä¸ºçš„ä»£ç æˆ–æ’ä»¶å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ ç”±äºæ­¤æŠ€æœ¯ä»…ç”¨äºæ”¯æŒæ—§ç‰ˆæµè§ˆå™¨ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®æ‚¨å°†æœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨`<BrowserHistory>`\n- _Link_ï¼šæ¸²æŸ“æˆ `a` æ ‡ç­¾\n- _NavLink_ï¼šä¸€ç§ç‰¹æ®Šç‰ˆæœ¬çš„ `<Link>`ï¼Œå½“ä¸å½“å‰ `URL` åŒ¹é…æ—¶ï¼Œå°†å‘æ¸²æŸ“å…ƒç´ æ·»åŠ æ ·å¼å±æ€§ã€‚\n- _Redirect_ï¼šé‡å®šå‘\n- _Route_ï¼šåœ¨ä½ç½®ä¸è·¯çº¿çš„è·¯å¾„åŒ¹é…æ—¶å‘ˆç°ä¸€äº› `UI`ã€‚\n- _Switch_ï¼šåªæ¸²æŸ“å‘½ä¸­çš„ç¬¬ä¸€ä¸ª `<Route>` æˆ– `<Redirect>` ã€‚\n\n```jsx\n// Switchçš„ç”¨æ³•\nimport { Switch, Route } from \"react-router\";\n<Switch>\n  <Route exact path=\"/\" component={Home} />\n  <Route path=\"/about\" component={About} />\n  <Route path=\"/:user\" component={User} />\n  <Route component={NoMatch} />\n</Switch>;\n```\n\n## 10. context\n\n- ä»‹ç»\n\n> åœ¨ä¸€ä¸ªå…¸å‹çš„ `React` åº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯é€šè¿‡ `props` å±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶åŠå­ï¼‰è¿›è¡Œä¼ é€’çš„ï¼Œä½†è¿™ç§åšæ³•å¯¹äºæŸäº›ç±»å‹çš„å±æ€§è€Œè¨€æ˜¯æå…¶ç¹ççš„ï¼ˆä¾‹å¦‚ï¼šåœ°åŒºåå¥½ï¼Œ`UI` ä¸»é¢˜ï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚`Context` æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ `props`ã€‚\n\n- ç¹ççš„ `props` æ–¹å¼\n\n```jsx\nclass App extends React.Component {\n  render() {\n    return <Toolbar theme=\"dark\" />;\n  }\n}\nfunction Toolbar(props) {\n  return (\n    <div>\n      <ThemeButton theme={props.theme} />\n    </div>\n  );\n}\nclass ThemeButton extends React.Component {\n  render() {\n    <Button theme={this.props.theme}>æŒ‰é’®</Button>;\n  }\n}\n```\n\n- ä½¿ç”¨ `context`\n\n```jsx\n// Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚\n// ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œlightâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚\nconst ThemeContext = React.createContext(\"light\");\n\nclass App extends React.Component {\n  render() {\n    // ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚\n    // æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚\n    // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† â€œdarkâ€ ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚\n    return (\n      <ThemeContext.Provider value=\"dark\">\n        <Toolbar />\n      </ThemeContext.Provider>\n    );\n  }\n}\nfunction ToolBar() {\n  return (\n    <div>\n      <ThemeButton />\n    </div>\n  );\n}\nclass ThemeButton extends React.Component {\n  // æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚\n  // React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚\n  // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdarkâ€ã€‚\n  static contextType = ThemeContext;\n  render() {\n    return <Button theme={this.context}>æŒ‰é’®</Button>;\n  }\n}\n```\n\n## 11. react-hooks\n\n> `Hook` æ˜¯ `React 16.8` çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ `class` çš„æƒ…å†µä¸‹ä½¿ç”¨ `state` ä»¥åŠå…¶ä»–çš„ `React` ç‰¹æ€§ã€‚\n\n### 11.1 State Hook\n\n> `useState` å°±æ˜¯ä¸€ä¸ª `Hook`ï¼Œç±»ä¼¼ `class` ç»„ä»¶çš„ `this.setState`ï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ `state` å’Œæ—§çš„ `state` è¿›è¡Œåˆå¹¶ã€‚`useState` ä¼šè¿”å›ä¸€å¯¹å€¼ï¼š_å½“å‰çŠ¶æ€_ å’Œä¸€ä¸ªè®©ä½  _æ›´æ–°å®ƒçš„å‡½æ•°_ï¼Œä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚\n\n- è®¡æ•°å™¨\n\n```jsx\nimport React, { useState } from \"react\";\n\nfunction Example() {\n  // å£°æ˜ä¸€ä¸ªå« â€œcountâ€ çš„ state å˜é‡ã€‚\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  );\n}\n\n// ç­‰ä»·çš„ class ç¤ºä¾‹\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>Click me</button>\n      </div>\n    );\n  }\n}\n```\n\n- å£°æ˜å¤šä¸ª `state` å˜é‡\n\n```jsx\nfunction ExampleWithManyStates() {\n  // å£°æ˜å¤šä¸ª state å˜é‡ï¼\n  const [age, setAge] = useState(42);\n  const [fruit, setFruit] = useState(\"banana\");\n  const [todos, setTodos] = useState([{ text: \"Learn Hooks\" }]);\n  // ...\n}\n```\n\n- ä»€ä¹ˆæ˜¯ `Hook`\n\n> `Hook` æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ `React state` åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚`Hook` ä¸èƒ½åœ¨ `class` ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ `class` ä¹Ÿèƒ½ä½¿ç”¨ `React`ã€‚\n\n- æƒ°æ€§ state\n\n```jsx\nconst [state, setState] = useState(() => {\n  const initialState = someExpensiveComputation(props);\n  return initialState;\n});\n```\n\n### 11.2 Effect Hook\n\n> `Effect Hook` å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ\n\n#### (1) æ— éœ€æ¸…é™¤çš„ `Effect`\n\n> æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³åœ¨ `React` æ›´æ–° `DOM` ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ `DOM`ï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚\n\n- ä½¿ç”¨ `class` çš„ç¤ºä¾‹\n\n```jsx\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n  componentDidUpdate() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>Click me</button>\n      </div>\n    );\n  }\n}\n```\n\n- ä½¿ç”¨ `Hook` çš„ç¤ºä¾‹\n\n```jsx\nimport React, { useState, useEffect } from \"react\";\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    document.title = `You clicked ${count} times`;\n  });\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  );\n}\n```\n\n> `useEffect` åšäº†ä»€ä¹ˆï¼Ÿ é€šè¿‡ä½¿ç”¨è¿™ä¸ª `Hook`ï¼Œä½ å¯ä»¥å‘Šè¯‰ `React` ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œã€‚`React` ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œ`effect`â€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ `DOM` æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚åœ¨è¿™ä¸ª `effect` ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† `document` çš„ `title` å±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œæ•°æ®è·å–æˆ–è°ƒç”¨å…¶ä»–å‘½ä»¤å¼çš„ APIã€‚\n\n> ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ `useEffect`ï¼Ÿ å°† `useEffect` æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ `effect` ä¸­ç›´æ¥è®¿é—® `count` `state` å˜é‡ï¼ˆæˆ–å…¶ä»– `props`ï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ `API` æ¥è¯»å–å®ƒ â€”â€” å®ƒå·²ç»ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚`Hook` ä½¿ç”¨äº† `JavaScript` çš„é—­åŒ…æœºåˆ¶ï¼Œè€Œä¸ç”¨åœ¨ `JavaScript` å·²ç»æä¾›äº†è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿˜å¼•å…¥ç‰¹å®šçš„ React APIã€‚\n\n> `useEffect` ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼Ÿ æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ï¼ˆæˆ‘ä»¬ç¨åä¼šè°ˆåˆ°å¦‚ä½•æ§åˆ¶å®ƒã€‚ï¼‰ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“æ¥å— `effect` å‘ç”Ÿåœ¨â€œæ¸²æŸ“ä¹‹åâ€è¿™ç§æ¦‚å¿µï¼Œä¸ç”¨å†å»è€ƒè™‘â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚`React` ä¿è¯äº†æ¯æ¬¡è¿è¡Œ `effect` çš„åŒæ—¶ï¼Œ`DOM` éƒ½å·²ç»æ›´æ–°å®Œæ¯•ã€‚\n\n{% note warning, ä¸ `componentDidMount` æˆ– `componentDidUpdate` ä¸åŒï¼Œä½¿ç”¨ `useEffect` è°ƒåº¦çš„ `effect` ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`effect` ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ `useLayoutEffect Hook` ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ `API` ä¸ `useEffect` ç›¸åŒã€‚ %}\n\n#### (2) éœ€è¦æ¸…é™¤çš„ `Effect`\n\n> ä¹‹å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ä¸éœ€è¦æ¸…é™¤çš„å‰¯ä½œç”¨ï¼Œè¿˜æœ‰ä¸€äº›å‰¯ä½œç”¨æ˜¯éœ€è¦æ¸…é™¤çš„ã€‚ä¾‹å¦‚è®¢é˜…å¤–éƒ¨æ•°æ®æºã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸…é™¤å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼ç°åœ¨è®©æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹å¦‚ä½•ç”¨ `Class` å’Œ `Hook` æ¥å®ç°ã€‚\n\n- ä½¿ç”¨ `class` çš„ç¤ºä¾‹\n\n```jsx\nclass FriendStatus extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOnline: null };\n    this.handleStatusChange = this.handleStatusChange.bind(this);\n  }\n\n  componentDidMount() {\n    ChatAPI.subscribeToFriendStatus(this.props.friend.id, this.handleStatusChange);\n  }\n  componentWillUnmount() {\n    ChatAPI.unsubscribeFromFriendStatus(this.props.friend.id, this.handleStatusChange);\n  }\n  handleStatusChange(status) {\n    this.setState({\n      isOnline: status.isOnline\n    });\n  }\n\n  render() {\n    if (this.state.isOnline === null) {\n      return \"Loading...\";\n    }\n    return this.state.isOnline ? \"Online\" : \"Offline\";\n  }\n}\n```\n\n- ä½¿ç”¨ `Hook` çš„ç¤ºä¾‹\n\n{% note warning, çœ¼å°–çš„è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªç¤ºä¾‹è¿˜éœ€è¦ç¼–å†™ componentDidUpdate æ–¹æ³•æ‰èƒ½ä¿è¯å®Œå…¨æ­£ç¡®ã€‚æˆ‘ä»¬å…ˆæš‚æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œæœ¬ç« èŠ‚ä¸­åç»­éƒ¨åˆ†ä¼šä»‹ç»å®ƒã€‚ %}\n\n```jsx\nimport React, { useState, useEffect } from \"react\";\n\nfunction FriendStatus(props) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  useEffect(() => {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    // Specify how to clean up after this effect:\n    return function cleanup() {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n\n  if (isOnline === null) {\n    return \"Loading...\";\n  }\n  return isOnline ? \"Online\" : \"Offline\";\n}\n```\n\n> ä¸ºä»€ä¹ˆè¦åœ¨ `effect` ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Ÿ è¿™æ˜¯ `effect` å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª `effect` éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚å®ƒä»¬éƒ½å±äº `effect` çš„ä¸€éƒ¨åˆ†ã€‚\n\n> `React` ä½•æ—¶æ¸…é™¤ `effect`ï¼Ÿ `React` ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚æ­£å¦‚ä¹‹å‰å­¦åˆ°çš„ï¼Œ`effect` åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `React` ä¼šåœ¨æ‰§è¡Œå½“å‰ `effect` ä¹‹å‰å¯¹ä¸Šä¸€ä¸ª `effect` è¿›è¡Œæ¸…é™¤ã€‚æˆ‘ä»¬ç¨åå°†è®¨è®ºä¸ºä»€ä¹ˆè¿™å°†åŠ©äºé¿å… `bug` ä»¥åŠå¦‚ä½•åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶è·³è¿‡æ­¤è¡Œä¸ºã€‚\n\n{% note warning, å¹¶ä¸æ˜¯å¿…é¡»ä¸º `effect` ä¸­è¿”å›çš„å‡½æ•°å‘½åã€‚è¿™é‡Œæˆ‘ä»¬å°†å…¶å‘½åä¸º `cleanup` æ˜¯ä¸ºäº†è¡¨æ˜æ­¤å‡½æ•°çš„ç›®çš„ï¼Œä½†å…¶å®ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°æˆ–è€…ç»™èµ·ä¸€ä¸ªåˆ«çš„åå­—ã€‚ %}\n\n### 11.3 Hook è§„åˆ™\n\n#### (1) åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ `Hook`\n\n> ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ `Hook`ï¼Œ ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ `React` å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ `Hook` åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© `React` èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ `useState` å’Œ `useEffect` è°ƒç”¨ä¹‹é—´ä¿æŒ `hook` çŠ¶æ€çš„æ­£ç¡®ã€‚\n\n#### (2) åªåœ¨ `React` å‡½æ•°ä¸­è°ƒç”¨ `Hook`\n\n> ä¸è¦åœ¨æ™®é€šçš„ `JavaScript` å‡½æ•°ä¸­è°ƒç”¨ `Hook`ã€‚ä½ å¯ä»¥ï¼š\n\n- âœ… åœ¨ `React` çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ `Hook`\n- âœ… åœ¨è‡ªå®šä¹‰ `Hook` ä¸­è°ƒç”¨å…¶ä»– `Hook`\n\n### 11.4 è‡ªå®šä¹‰ Hook\n\n> é€šè¿‡è‡ªå®šä¹‰ `Hook`ï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚\n\n#### (1) æå–è‡ªå®šä¹‰ `Hook`\n\n> å½“æˆ‘ä»¬æƒ³åœ¨ä¸¤ä¸ªå‡½æ•°ä¹‹é—´å…±äº«é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæå–åˆ°ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸­ã€‚è€Œç»„ä»¶å’Œ `Hook` éƒ½æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹ŸåŒæ ·é€‚ç”¨è¿™ç§æ–¹å¼ã€‚\n\n> è‡ªå®šä¹‰ `Hook` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œ`use`â€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ `Hook`ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ `useFriendStatus` æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„ `Hook`:\n\n```jsx\nimport { useState, useEffect } from \"react\";\n\nfunction useFriendStatus(friendID) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  useEffect(() => {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n\n    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);\n    return () => {\n      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);\n    };\n  });\n\n  return isOnline;\n}\n```\n\n#### (2) ä½¿ç”¨è‡ªå®šä¹‰ `Hook`\n\n```jsx\nfunction FriendStatus(props) {\n  const isOnline = useFriendStatus(props.friend.id);\n\n  if (isOnline === null) {\n    return \"Loading...\";\n  }\n  return isOnline ? \"Online\" : \"Offline\";\n}\n\nfunction FriendListItem(props) {\n  const isOnline = useFriendStatus(props.friend.id);\n\n  return <li style={{ color: isOnline ? \"green\" : \"black\" }}>{props.friend.name}</li>;\n}\n```\n\n### 11.5 Hook API ç´¢å¼•\n\n> å‚è§ [Hook API](https://react.docschina.org/docs/hooks-reference.html)\n\n#### 11.5.1 åŸºç¡€ Hook\n\n##### useState\n\n> [ç‚¹å‡»è·³è½¬](#linkUseState)\n\n##### useEffect\n\n> [ç‚¹å‡»è·³è½¬](#linkUseEffect)\n\n##### useContext\n\n> è®¢é˜… `context` çš„å˜åŒ–ï¼Œæ„Ÿè§‰å°±æ˜¯å¯¹äºè·å– `context` çš„å€¼æ¢äº†ä¸€ç§å†™æ³•è€Œå·²ã€‚ç›¸å¯¹äºä¹‹å‰çš„å†™æ³•ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ  `context` æ›´åŠ ç®€å•ã€‚\n\n```jsx\nconst context = React.createContext({})\nconst { Provider, Consumer  } = context;\n\n// hooksçš„å†™æ³•\nclass App extends React.Component {\n    return (\n        <Provider value={{ name: 'li' }}>\n            <Hello/>\n        </Provider>\n    </div>\n}\nfunction Hello () {\n    const value = useContext(context);\n    return <h1>value: {value.name}</h1>\n}\n\n// åŸæœ¬çš„å†™æ³•\nfunction Hello (props) {\n    function render ({name}) {\n      return <h1>value: {value.name}</h1>\n    }\n    return (\n      <Consumer>\n        {render}\n      </Consumer>\n    )\n}\n```\n\n#### 11.5.2 é¢å¤–çš„ Hook\n\n##### useReducer\n\n> ç±»ä¼¼äº `redux` é‚£æ ·çš„çŠ¶æ€æ›´æ–°æ–¹æ¡ˆã€‚ä½¿ç”¨åœºæ™¯ï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯ `redux` çš„åº”ç”¨åœºæ™¯ï¼‰ï¼Œç®¡ç†çš„çŠ¶æ€å€¼æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”é”®å€¼è¾ƒå¤šã€‚`state` æ¯ä¸ª `key` ä¿®æ”¹çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å•ç‹¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ç®¡ç†ã€‚\n\n```jsx\nconst initialState = { count: 0 };\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"increment\":\n      return { count: state.count + 1 };\n    case \"decrement\":\n      return { count: state.count - 1 };\n    default:\n      throw new Error();\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return (\n    <>\n      Count: {state.count}\n      <button onClick={() => dispatch({ type: \"increment\" })}>+</button>\n      <button onClick={() => dispatch({ type: \"decrement\" })}>-</button>\n    </>\n  );\n}\n```\n\n##### useCallback\n\n> ä»…åœ¨æŒ‡å®šçš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå‡½æ•°ä½“å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚\n\n```jsx\nconst memoizedCallback = useCallback(() => {\n  doSomething(a, b);\n}, [a, b]);\n```\n\n> è¿™æ ·ä½¿ç”¨çš„å¥½å¤„ï¼šä¸ä¼šåœ¨æ¯æ¬¡ç»„ä»¶ `render` çš„æ—¶å€™ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼ŒèŠ‚çœå¼€é”€ã€‚ä¾‹å¦‚\n\n```jsx\nfunction f() {\n  const cacheCallback = useCallback(() => {\n    doSomething(a, b);\n  }, [a, b]);\n  // å’Œä¸‹é¢è¿™æ ·çš„å½¢å¼ç›¸æ¯”, æ¯æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ª doSometing å‡½æ•°\n  function doSometing(a, b) {}\n}\n```\n\n> å¯ä»¥ä¿æŒå‡½æ•°çš„å¼•ç”¨ä¿æŒä¸å˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ç±»ç»„ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡ `this.method` çš„æ–¹å¼ç»‘å®šçš„ï¼Œè¿™æ ·åšçš„æ–¹å¼æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯¹æ–¹æ³•çš„å¼•ç”¨ä¸€ç›´ä¿æŒä¸å˜ã€‚ é‚£ä¹ˆåœ¨å‡½æ•°ç»„ä»¶å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ `useCallback` æ¥å®ç°ã€‚\n\n> å¯ä»¥å®ç°åœ¨å­ç»„ä»¶æŠŠè¯¥å›è°ƒä½œä¸ºä¾èµ–å¤„ç†ã€‚\n\n```jsx\nfunction Parent({ a, b }) {\n  const cacheCallback = useCallback(() => {\n    doSometing(a, b);\n  }, [a, b]);\n  return <Child handler={cacheCallback} />;\n}\n\nfunction Child({ handler }) {\n  useEffect(() => {\n    handler();\n  }, [handler]);\n}\n```\n\n##### useMemo\n\n> ç±»ä¼¼äº `vue` çš„ `computed`ï¼Œåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–çš„æ—¶å€™é‡æ–°è®¡ç®—ç¼“å­˜å€¼ã€‚å…¶å®è‡ªå·±å®ç°èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå’Œ `vue` çš„è®¡ç®—å±æ€§ä¸åŒçš„æ˜¯ï¼Œ`vue` çš„è®¡ç®—å±æ€§æ˜¯è‡ªåŠ¨æ”¶é›†ä¾èµ–çš„ï¼Œè€Œä½¿ç”¨ `useMeno` éœ€è¦æ‰‹åŠ¨åœ¨æ•°ç»„ç§ä¼ å…¥ä¾èµ–é¡¹ã€‚\n\n```jsx\nconst memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);\n```\n\n> `useCallback(fn, deps)` ç›¸å½“äº `useMemo(() => fn, deps)`\n\n##### useRef\n\n> æ•…åæ€ä¹‰ï¼Œè¯¥ `hook` ä¸»è¦æ˜¯ç”¨æ¥è·å–ç»„ä»¶å®ä¾‹æˆ–è€…æˆ–è€… `dom` èŠ‚ç‚¹ã€‚ ä½†æ˜¯å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹ï¼Œæ˜¯å¯ä»¥è¿”å›ä¸€ä¸ªåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå¼•ç”¨ä¸å˜çš„å¯¹è±¡ã€‚\n\n```jsx\nfunction f() {\n  const elRef = uesRef(null);\n  return <div ref={elRef}></div>;\n}\n```\n\n> ç”¨æ¥å­˜å‚¨æ•°æ®çš„è¯ï¼Œè€ƒè™‘ä¸‹é¢çš„åœºæ™¯ã€‚\n\n```jsx\nlet handler = () => {}; // äº‹ä»¶å¤„ç†å‡½æ•°\n// ä¸ä½¿ç”¨ useRef, å¯ä»¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨æ•°æ®\nfunction f() {\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handler);\n  }, []);\n\n  const moveScroll = useCallback(() => {\n    window.removeEventListener(\"scorll\", handler);\n  }, []);\n\n  return (\n    <div onClick={moveScroll} ref={elRef}>\n      ç§»é™¤scrollç›‘å¬\n    </div>\n  );\n}\n\n// ä½¿ç”¨useRefçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ å†…èšã€‚ä½†æ˜¯å‰ææ˜¯å¿…é¡»è¦ç†è§£useRefè¿™ä¸ªhooksã€‚\nfunction f() {\n  const handler = useRef(null);\n  handler.current = () => {}; // äº‹ä»¶å¤„ç†\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handler.current);\n  }, []);\n\n  const moveScroll = useCallback(() => {\n    window.removeEventListener(\"scorll\", handler.current);\n  }, []);\n\n  return (\n    <div onClick={moveScroll} ref={elRef}>\n      ç§»é™¤scrollç›‘å¬\n    </div>\n  );\n}\n```\n\n##### useImperativeHandle\n\n> `useImperativeHandle` å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ `ref` æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚\n\n```jsx\nconst Fancy = React.forwardRef((props, ref) => {\n  return (\n    <div>\n      <input type=\"text\" ref={ref} />\n    </div>\n  );\n});\n\nfunction Hello() {\n  const ref = useRef(null);\n\n  useEffect(() => {\n    console.log(\"current\", ref); // { current: Input }\n  }, []);\n\n  return <Fancy ref={ref} />;\n}\n```\n\n##### useLayoutEffect\n\n> å‡½æ•°ç­¾åå’Œ `useEffect` æ˜¯ä¸€æ ·çš„ï¼Œ å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– `DOM` å¸ƒå±€å¹¶ `åŒæ­¥` è§¦å‘é‡æ¸²æŸ“ã€‚\n\n##### useDebugValue\n\n> ç”¨æ¥ç»™ `hooks` æ·»åŠ ä¸Šæ‰“å°ä¿¡æ¯ã€‚\n","source":"_posts/å‰ç«¯/React16 æ–‡æ¡£.md","raw":"---\ntitle: React16 æ–‡æ¡£\ndate: 2020-08-15\ncategories: [å‰ç«¯, react]\ntags:\n  - æ–‡æ¡£\n---\n\n## 1. React ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\n\n### è™šæ‹Ÿ DOM\n\n1. DOM çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n> æµè§ˆå™¨ä¸­çš„æ¦‚å¿µï¼Œç”¨`js`å¯¹è±¡æ¥è¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œ `DOM` å¯¹è±¡çš„ APIï¼›\n\n2. ä»€ä¹ˆæ˜¯ React ä¸­çš„ è™šæ‹Ÿ DOMï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„æœ¬è´¨ï¼‰ï¼š\n\n> ç”¨`js`å¯¹è±¡æ¥æ¨¡æ‹Ÿ é¡µé¢ä¸Šçš„`DOMå’ŒDOMåµŒå¥—`\n\n3. ä¸ºä»€ä¹ˆè¦å®ç° è™šæ‹Ÿ DOM ï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„ç›®çš„ï¼‰ï¼š\n\n> ä¸ºäº†å®ç°é¡µé¢ä¸­ï¼Œ`DOM`å…ƒç´ çš„é«˜æ•ˆæ›´æ–°\n\n4. DOM å’Œ è™šæ‹Ÿ DOM çš„åŒºåˆ«ï¼š\n\n- `DOM`ï¼šæµè§ˆå™¨ä¸­ï¼Œæä¾›çš„æ¦‚å¿µï¼›ç”¨`js`å¯¹è±¡ï¼Œè¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œå…ƒç´ çš„ `API`ï¼›\n- `è™šæ‹ŸDOM`ï¼šæ˜¯æ¡†æ¶ä¸­çš„æ¦‚å¿µï¼›æ˜¯å¼€å‘æ¡†æ¶çš„äººå‘˜ï¼Œæ‰‹åŠ¨ç”¨`js`å¯¹è±¡æ¥æ¨¡æ‹Ÿ`DOM`å…ƒç´ å’ŒåµŒå¥—å…³ç³»ï¼›\n\n5. DOM æ ‘çš„æ¦‚å¿µï¼š\n\n> ä¸€ä¸ªç½‘é¡µçš„å‘ˆç°è¿‡ç¨‹ï¼š\n>\n> 1. æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨è·å–é¡µé¢çš„ `html` ä»£ç ï¼›\n> 2. æµè§ˆå™¨è¦å…ˆåœ¨å†…å­˜ä¸­ï¼Œè§£æ `DOM` ç»“æ„ï¼Œå¹¶åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œæ¸²æŸ“å‡ºä¸€æ£µ `DOM` æ ‘ï¼›\n> 3. æµè§ˆå™¨æŠŠ `DOM` æ ‘ï¼Œå‘ˆç°åˆ°é¡µé¢ä¸Šï¼›\n\n### Diff ç®—æ³•\n\n1. tree diffï¼š\n\n> æ–°æ—§ä¸¤æ£µ `DOM` æ ‘ï¼Œé€å±‚å¯¹æ¯”çš„è¿‡ç¨‹ï¼Œå°±æ˜¯`tree diff`ï¼›\n> å½“æ•´æ£µ`DOM`é€å±‚å¯¹æ¯”å®Œæ¯•ï¼Œåˆ™æ‰€æœ‰éœ€è¦è¢«æŒ‰éœ€æ›´æ–°çš„å…ƒç´ ï¼Œå¿…ç„¶èƒ½å¤Ÿè¢«æ‰¾åˆ°ï¼›\n\n2. component diffï¼š\n\n> åœ¨è¿›è¡Œ `tree diff` çš„æ—¶å€™ï¼Œæ¯ä¸€å±‚ä¸­ï¼Œç»„ä»¶çº§åˆ«çš„å¯¹æ¯”ï¼Œå«åš `component diff`ï¼›\n> å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™**æš‚æ—¶**è®¤ä¸ºæ­¤ç»„ä»¶ä¸è®¸è¦è¢«æ›´æ–°ï¼›\n> å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦ç§»é™¤æ—§ç»„ä»¶ï¼Œåˆ›å»ºæ–°ç»„ä»¶ï¼Œå¹¶è¿½åŠ åˆ°é¡µé¢ä¸Šï¼›\n\n3. element diffï¼š\n\n> åœ¨è¿›è¡Œç»„ä»¶å¯¹æ¯”çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™éœ€è¦è¿›è¡Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œè¿™å«åš`element diff`ï¼›\n\n## 2. React ä¸­åˆ›å»ºç»„ä»¶\n\n### ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\n\n> 1ã€åœ¨ç»„ä»¶ä¸­ï¼Œå¿…é¡»è¦å‘å¤–`return`ä¸€ä¸ªåˆæ³•çš„`jsx`åˆ›å»ºçš„`è™šæ‹ŸDOM`å…ƒç´ ï¼›\n> 2ã€å¦‚æœè¦æ¥æ”¶å¤–ç•Œä¼ é€’çš„æ•°æ®ï¼Œéœ€è¦åœ¨`æ„é€ å‡½æ•°`çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨`props`æ¥æ¥æ”¶ï¼›\n> 3ã€æ— è®ºæ˜¯`vue`è¿˜æ˜¯`react`ï¼Œç»„ä»¶ä¸­çš„`props`æ°¸è¿œéƒ½æ˜¯åªè¯»`read-only`çš„ï¼Œä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼›\n> 4ã€ç»„ä»¶çš„åç§°`é¦–å­—æ¯`å¿…é¡»æ˜¯`å¤§å†™`çš„\n> 5ã€çœç•¥ `.jsx` æ–‡ä»¶å\n\n> æ‰“å¼€ `webpack.config.js`ï¼Œå¹¶åœ¨å¯¼å‡ºçš„é…ç½®å¯¹è±¡ä¸­ï¼Œæ–°å¢ä»¥ä¸‹å‡ ä¸ªèŠ‚ç‚¹ï¼š\n\n```javascript\nresolve: {\n  extensions: [\".js\", \".jsx\", \".json\"];\n}\n```\n\n> å¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶ä¸­ `return` ä¸€ä¸ª `null`ï¼Œåˆ™è¡¨ç¤ºæ­¤ç»„ä»¶æ˜¯ç©ºçš„ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ¸²æŸ“\n\n```jsx\nfunction Hello(props) {\n  return (\n    <div>\n      è¿™æ˜¯Helloç»„ä»¶ -- {props.name} -- {props.age} -- {props.gender}\n    </div>\n  );\n}\n\nconst user = {\n  name: \"å¤§é»„\",\n  age: 3,\n  gender: \"é›„æ€§\"\n};\n\nReactDOM.render(\n  <div>\n    <Hello {...user} />\n  </div>,\n  document.getElementById(\"#app\")\n);\n```\n\n### ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\n\n> `public`: æ‰€æœ‰æˆå‘˜éƒ½å¯è®¿é—®\n> `private`: åªæœ‰å½“å‰ç±»å¯è®¿é—®\n> `protected`: åªæœ‰å½“å‰ç±»å’Œå…¶å­ç±»å¯è®¿é—®ï¼Œå¤–éƒ¨æˆå‘˜æ— æ³•è®¿é—®\n\n> `es6`ä¸­çš„`classå…³é”®å­—`ï¼Œæ˜¯å®ç°`é¢å‘å¯¹è±¡ç¼–ç¨‹`çš„æ–°å½¢å¼ï¼Œä¹Ÿå«åš`è¯­æ³•ç³–`\n\n- constructor æ„é€ å™¨ä¸­çš„ super å‡½æ•°\n\n> åœ¨å­ç±»ä¸­ï¼Œ `this` åªèƒ½æ”¾åˆ° `super` ä¹‹åä½¿ç”¨\n> å­ç±»ä¸­çš„ `super`ï¼Œå…¶å®å°±æ˜¯çˆ¶ç±»ä¸­ï¼Œ`contructor`æ„é€ å™¨çš„ä¸€ä¸ªå¼•ç”¨\n\n- æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„\n\n> `render`å‡½æ•°çš„ä½œç”¨ï¼šæ¸²æŸ“å½“å‰ç»„ä»¶æ‰€å¯¹åº”çš„`è™šæ‹ŸDOM` å…ƒç´ \n\n```jsx\nimport React from \"react\";\nclass ç»„ä»¶åç§° extends React.Component {\n  render() {\n    return <div>è¿™æ˜¯ class åˆ›å»ºçš„ç»„ä»¶</div>;\n  }\n}\n```\n\n- this.props å’Œ this.state\n\n> 1. `this.props` æ¥æ”¶å¤–ç•Œä¼ é€’çš„å‚æ•°ï¼Œ`this.state` è®¾ç½®ç§æœ‰æ•°æ®\n> 2. åœ¨ `class` å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨ `this.props` è®¿é—®ä¼ é€’è¿‡æ¥çš„æ•°æ®\n> 3. `props` æ˜¯åªè¯»çš„\n\n```jsx\nclass Movie extends React.Component {\n  constructor() {\n    super();\n    // è¿™é‡Œçš„ this.state = {}ï¼Œå°±ç›¸å½“äº Vueä¸­çš„data() { return {} }\n    this.state = {\n      msg: \"è¿™æ˜¯Movieç»„ä»¶çš„ç§æœ‰æ•°æ®\"\n    };\n  }\n  render() {\n    {\n      /* æ³¨æ„ï¼šåœ¨ class ç»„ä»¶å†…å®¹ï¼Œthis è¡¨ç¤ºå½“å‰ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ */\n    }\n    return <div>è¿™æ˜¯Movieç»„ä»¶ -- {this.props.name}</div>;\n  }\n}\nconst user = {\n  name: \"å¤§é»„\",\n  age: 3,\n  gender: \"é›„æ€§\"\n};\n\nReactDOM.render(\n  <div>\n    <Movie {...user} />\n    <h3>{this.state.msg}</h3>\n  </div>,\n  document.getElementById(\"#app\")\n);\n```\n\n### ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\n\n> ä½¿ç”¨ `class` å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„ `ç§æœ‰æ•°æ®(this.state)` å’Œ `ç”Ÿå‘½å‘¨æœŸ`\n> ä½¿ç”¨ `function` åˆ›å»ºçš„ç»„ä»¶ï¼Œåªæœ‰ `props`ï¼Œæ²¡æœ‰è‡ªå·±çš„ `ç§æœ‰æ•°æ®` å’Œ `ç”Ÿå‘½å‘¨æœŸ`\n> æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ä¹‹é—´çš„ `æœ¬è´¨åŒºåˆ«`ï¼šæœ‰æ—  `state` å±æ€§å’Œ `ç”Ÿå‘½å‘¨æœŸå‡½æ•°`\n\n## 3. React ä¸­ style å¤„ç†æ–¹å¼\n\n### å†…è”\n\n```jsx\nstyle = {{ color: red }}\n```\n\n### css\n\n> 1ã€å¦‚æœç›´æ¥å¯¼å…¥ `css` æ ·å¼è¡¨ï¼Œé»˜è®¤åˆ™æ˜¯åœ¨å…¨å±€ä¸Šï¼Œæ•´ä¸ªé¡¹ç›®éƒ½ä¼šç”Ÿæ•ˆ\n> 2ã€css æ¨¡å—åŒ–ï¼Œåªé’ˆå¯¹ `class` é€‰æ‹©å™¨ å’Œ `id` é€‰æ‹©å™¨ç”Ÿæ•ˆ\n> å¼•ç”¨ï¼š`import style from './style.css'`\n\n## 4. React ä¸­äº‹ä»¶ç»‘å®š\n\n1. äº‹ä»¶çš„åç§°éƒ½æ˜¯ `React` æ‰€æä¾›çš„ï¼Œå› æ­¤åç§°çš„é¦–å­—æ¯å¿…é¡»å¤§å†™`onClick`ï¼Œ`onMouseOver`\n2. ä¸ºäº‹ä»¶æä¾›çš„å¤„ç†å‡½æ•°ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š\n\n```javascript\nonClick = { function };\n```\n\n3. ç”¨çš„æœ€å¤šçš„äº‹ä»¶ç»‘å®šå½¢å¼ä¸ºï¼š\n\n```jsx\n<button onClick={() => this.show(\"ä¼ å‚\")}>æŒ‰é’®</button>;\n\n// äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œéœ€è¦å®šä¹‰ä¸º ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç„¶åèµ‹å€¼ç»™ å‡½æ•°åç§°\nshow = arg1 => {\n  console.log(\"showæ–¹æ³•\" + arg1);\n};\n```\n\n4. åœ¨ `React` ä¸­ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ `state` ä¸­çš„æ•°æ®ï¼Œæ¨èä½¿ç”¨ `this.setState({ })`\n\n> 1ã€åœ¨`setState`ä¸­ï¼Œåªä¼šæŠŠå¯¹åº”çš„ `state`çŠ¶æ€æ›´æ–°ï¼Œè€Œä¸ä¼šè¦†ç›–å…¶å®ƒçš„ `state`çŠ¶æ€ã€‚\n> 2ã€`this.setState` æ–¹æ³•çš„æ‰§è¡Œæ—¶ `å¼‚æ­¥çš„`ã€‚\n> 3ã€å¦‚æœåœ¨è°ƒç”¨å®Œ `this.setState`ä¹‹åï¼Œåˆæƒ³ç«‹å³æ‹¿åˆ°æœ€æ–°çš„`state`çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨ `this.setState({}, callback)`ï¼Œç¬¬äºŒä¸ªå‚æ•°ã€å›è°ƒå‡½æ•°ã€‘ä¸­è·å–ã€‚\n\n## 5. å•å‘æ•°æ®æµ(çŠ¶æ€å˜åŒ– => è‡ªåŠ¨æ›´æ–°é¡µé¢)\n\n> 1ã€`React` ä¸­ï¼Œé»˜è®¤æ˜¯ `å•å‘æ•°æ®æµ`ï¼Œåªèƒ½æŠŠ `state` ä¸Šçš„æ•°æ®ç»‘å®šåˆ°é¡µé¢ï¼Œæ— æ³•æŠŠé¡µé¢ä¸­æ•°æ®çš„å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥å› `state`ï¼›å¦‚æœéœ€è¦æŠŠé¡µé¢ä¸Šæ•°æ®çš„å˜åŒ–ï¼Œä¿å­˜åˆ° `state`ï¼Œéœ€è¦æ‰‹åŠ¨ç›‘å¬`onChange` äº‹ä»¶ï¼Œæ‹¿åˆ°æœ€æ–°çš„æ•°æ®ï¼Œæ‰‹åŠ¨è°ƒç”¨ `this.setState({ })` æ›´æ”¹ã€‚\n> 2ã€å½“ä¸ºæ–‡æœ¬æ¡†ç»‘å®š `value` å€¼ä»¥åï¼Œè¦ä¹ˆåŒæ—¶ç»™æ ‡ç­¾æä¾›ä¸€ä¸ª `readOnly` å±æ€§ï¼Œè¦ä¹ˆæä¾›ä¸€ä¸ª `onChange` äº‹ä»¶å¤„ç†å‡½æ•°ã€‚\n\n```jsx\n// æ–¹æ¡ˆä¸€ï¼šé€šè¿‡äº‹ä»¶å‚æ•° e æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨\n<input type=\"text\" value={this.state.msg} onChange={e => this.textChanged(e)} />;\n\ntextChanged = e => {\n  console.log(e.target.value);\n};\n\n// æ–¹æ¡ˆäºŒï¼šé€šè¿‡ref æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨  this.refs.å¼•ç”¨åç§°\n<input type=\"text\" value={this.state.msg} onChange={() => this.textChanged()} ref=\"txt\" />;\n\ntextChanged = () => {\n  console.log(this.refs.txt.value);\n};\n```\n\n## 6. ç”Ÿå‘½å‘¨æœŸ\n\n- ç”Ÿå‘½å‘¨æœŸä»‹ç»\n\n> æ¯ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œä»åˆ›å»ºã€åˆ°è¿è¡Œã€ç›´åˆ°é”€æ¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å°±å«åšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\n\n- React çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†\n\n1. ç»„ä»¶åˆ›å»ºé˜¶æ®µ\n\n> åªæ‰§è¡Œä¸€æ¬¡\n\n> 1. `componentWillMount` => `æŒ‚è½½ä¹‹å‰`\n> 2. `render` => `æ­£åœ¨æ¸²æŸ“ï¼Œè™šæ‹ŸDOMåˆ›å»ºåˆ°äº†å†…å­˜ä¸­ï¼Œè¿˜æœªæŒ‚è½½åˆ°é¡µé¢ä¸Š`\n> 3. `componentDidMount` => `æŒ‚è½½ç»“æŸï¼Œéœ€è¦æ“ä½œDOMèŠ‚ç‚¹çš„åˆå§‹åŒ–æ“ä½œæ”¾åœ¨è¿™é‡Œ`\n\n2. ç»„ä»¶è¿è¡Œé˜¶æ®µï¼š\n\n> æ ¹æ® `props` å±æ€§æˆ–è€… `state` çŠ¶æ€çš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„æ‰§è¡Œ `0` åˆ° `å¤šæ¬¡`\n\n> 1. `props` æ”¹å˜ä¹‹å\n> 2. `componentWillReceiveProps` => å½“ä¸€ä¸ªæŒ‚è½½çš„ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ `props` çš„æ—¶å€™è¢«è°ƒç”¨\n> 3. `state` æ”¹å˜ä¹‹å\n> 4. `shouldComponentUpdateï¼ˆnextprops, nextStateï¼‰` => å½“ç»„ä»¶åšå‡ºæ˜¯å¦è¦æ›´æ–° `DOM` çš„å†³å®šçš„æ—¶å€™è¢«è°ƒç”¨ï¼Œåœ¨æ”¹å˜çŠ¶æ€çš„æ—¶å€™å¯ä»¥é€‰æ‹©é€šè¿‡( `return true` )æˆ–è€…ä¸é€šè¿‡( `return false`)\n> 5. `componentWillUpdate` => åœ¨æ›´æ–°å‘ç”Ÿä¹‹å‰è¢«è°ƒç”¨\n> 6. `render` => æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢æ˜¯æ—§çš„\n>\n> 7.`componentDidUpdate` => æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢å·²ç»å˜æˆäº†æœ€æ–°çš„\n\n3. ç»„ä»¶é”€æ¯é˜¶æ®µ\n\n> åªæ‰§è¡Œä¸€æ¬¡\n\n> `componentWillUnmount` => ç»„ä»¶ç§»é™¤æˆ–è€…é”€æ¯çš„æ—¶å€™è¢«è°ƒç”¨\n\n## 7. éªŒè¯æ•°æ®ç±»å‹\n\n```javascript\nimport { ProtoTypes } from \"prop-types\";\n\n// å®šä¹‰ç»„ä»¶éœ€è¦ä¼ å…¥çš„å‚æ•°\nMyCompo.protoTypes = {\n  a: ProtoTypes.string.isRequired,\n  b: ProtoTypes.string.isRequired,\n  c: ProtoTypes.number.isRequired\n};\n```\n\n## 8. flux\n\n### ç®€ä»‹\n\n> ä¼ ç»Ÿçš„ `MVC` å’Œ `MVVM` æ¶æ„è®¾è®¡æ¨¡å¼æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šå½“é¡¹ç›®è¶Šæ¥è¶Šå¤§ã€é€»è¾‘è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæ•°æ®æµåŠ¨å°±è¶Šæ˜¾å¾—æ··ä¹±ã€‚\n\n> `Flux` æ˜¯è‡´åŠ›äºè§£å†³æ•°æ®æœ‰åºä¼ è¾“é—®é¢˜çš„æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œæ¥è‡ª `Facebook`ã€‚`Flux` ä¸­æœ€å¤§çš„å“²å­¦ï¼šæ•°æ®æ˜¯ `å•å‘æµåŠ¨` çš„ã€‚\n\n> [å®˜æ–¹æ‰‹å†Œ](https://github.com/facebook/flux/tree/master/examples/flux-concepts)\n\n> `Flux` ä¸­æœ€é‡è¦çš„å››ä¸ªæ¦‚å¿µï¼š`Dispatcher`ã€`Store`ã€`View`ã€`Action`ã€‚\n\n![flux.png](https://cdn.nlark.com/yuque/0/2020/png/732231/1608703835856-e1263bac-124a-40da-ae3c-b45a4c8081ae.png#align=left&display=inline&height=393&margin=%5Bobject%20Object%5D&name=flux.png&originHeight=393&originWidth=1300&size=26132&status=done&style=none&width=1300)\n\n### åŸºæœ¬æ¦‚å¿µ\n\n1. æ¦‚è¿°\n   - `flux` æ˜¯ä¸€ä¸ªç®¡ç† `App` ä¸­æ•°æ®æµåŠ¨çš„æ¨¡å¼ã€‚\n   - æœ€å…³é”®çš„æ¦‚å¿µï¼š`æ•°æ®çš„æµåŠ¨æ˜¯å•å‘çš„`ã€‚\n2. Dispatcher è°ƒåº¦è€…\n   - `Dispatcher` æ¥å— `action`ï¼Œå¹¶ä¸”è¦æŠŠè¿™äº› `action` åˆ†æ´¾ç»™å·²ç»æ³¨å†Œåˆ° `Dispatcher` çš„ `store` ä¸Š\n   - æ‰€æœ‰çš„ `store` éƒ½å°†æ¥æ”¶æ‰€æœ‰çš„ `action`\n   - åœ¨æ¯ä¸ª `App` ä¸­ï¼Œåº”è¯¥ç¡®ä¿åªæœ‰ä¸€ä¸ª `Dispatcher` çš„å®ä¾‹\n3. store ä»“åº“\n   - `store` æ˜¯åœ¨ `App` ä¸­æŒæœ‰æ•°æ®çš„ä»“åº“\n   - æ‰€æœ‰çš„ `store` è¦åœ¨ `App` çš„ `Dispatcher` ä¸Šæ³¨å†Œï¼Œç¡®ä¿å®ƒä»¬å¯ä»¥æ¥æ”¶ `action`\n   - `store` ä¸­çš„æ•°æ®åªèƒ½è¢« `action` æ”¹å˜ã€‚\n   - `store` ä¸­ä¸èƒ½å¤Ÿæœ‰å…¬å…±çš„ `setter`ï¼Œåªèƒ½æœ‰ `getter`\n   - `store` å†³å®šäº†å®ƒä»¬æ„¿æ„å“åº”å“ªäº› `actions`\n   - æ— è®ºä½•æ—¶ï¼Œ`store` ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ª `change` äº‹ä»¶\n   - åŒä¸€ä¸ª `App` ä¸­å¯èƒ½æœ‰å¾ˆå¤š `store`\n4. Action è¡Œä¸º\n   - `Action` å®šä¹‰äº† `App` å†…éƒ¨çš„ `API`\n   - å®ƒä»¬æ•è·æ‰€æœ‰å¯èƒ½æ”¹å˜ `App` çš„é€”å¾„å’Œæ–¹æ³•\n   - å®ƒä»¬æ˜¯ç®€å•çš„`å¯¹è±¡`ï¼Œå¹¶ä¸”è¦æœ‰ `typeå±æ€§` å’Œ `å…¶ä»–çš„ä¸€äº›æ•°æ®å±æ€§`\n   - `Action` åº”è¯¥æœ‰ä¸€ä¸ªå…·æœ‰è¯­ä¹‰çš„ã€ç›´è§‚çš„è¡¨ç¤ºå®ƒæ˜¯åšä»€ä¹ˆçš„åå­—\n   - æ‰€æœ‰çš„`store`éƒ½å°†æ¥æ”¶åŒä¸€ä¸ª`action`ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ª `action`ï¼Œ`store` ä¼šçŸ¥é“å®ƒä»¬è¦æ¸…é™¤ã€æ›´æ–°å“ªäº›æ•°æ®\n5. Views è§†å›¾\n   - `store` ä¸­çš„æ•°æ®è¢«å±•ç¤ºåœ¨äº†`view`ä¸Š\n   - `View` å±‚å¯ä»¥ä½¿ç”¨ä»»ä½•æ¡†æ¶\n   - å½“ä¸€ä¸ªè§†å›¾æƒ³è¦è·å– `store` ä¸­çš„æ•°æ®ï¼Œå®ƒå¿…é¡» `subscribe è®¢é˜…` ä¸€ä¸‹è¯¥ `store` çš„`change` äº‹ä»¶\n   - å½“ `store` è§¦å‘äº† `change` äº‹ä»¶ï¼Œæ­¤æ—¶ `view` å°±èƒ½å¾—åˆ°æ–°çš„æ•°æ®å¹¶ä¸”é‡æ–°æ¸²æŸ“\n   - å¦‚æœä¸€ä¸ªç»„ä»¶è¦ä½¿ç”¨ `store`ï¼Œä½†æ˜¯æ²¡æœ‰è®¢é˜…è¿™ä¸ª `store`ï¼Œæ­¤æ—¶å°±ä¼šå‡ºé”™\n   - `Action` æœ€å¸¸è§çš„äº§ç”ŸåŸå› æ˜¯ï¼šåœ¨ `App` ä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†ï¼Œå› ä¸ºç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œè€Œè¢«æ­¤`view` `dispatch`å‡ºæ¥äº†\n\n### redux\n\n- ç®€ä»‹\n  - [å®˜ç½‘](https://redux.js.org/)\n  - Redux å°±æ˜¯ Flux æ€æƒ³åœ¨ React ä¸­çš„å®ç°\n  - Redux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çŠ¶æ€çš„ Js app å®¹å™¨\n  - [`é€šè¿‡ä¾‹å­æ¥å­¦ä¹ redux`](https://github.com/reactjs/redux/tree/master/examples)\n- Redux åˆ›å»ºçš„æ­¥éª¤\n  - è®¾ç½®ä¸€ä¸ª `reducer`ï¼›\n  - åˆ›å»ºä¸€ä¸ª`store`ï¼Œ`Redux.createStore(reducer)`\n  - åˆ›å»º `render` å‡½æ•°\n  - æ³¨å†Œ `render`ï¼Œ`store.subscribe(render)`\n  - ç›‘å¬ï¼Œæ­¤æ—¶è¦è®°å¾— `store.dispatch(action)`ï¼Œä¸æ˜¯ç›´æ¥ä¿®æ”¹`store`\n\n### React-Redux\n\n- ç®€ä»‹\n  - å°† `react` å’Œ `redux` åˆå¹¶èµ·æ¥ï¼Œå¯ä»¥è®©ä»»ä½•ç»„ä»¶åœ¨ä»»ä½•åœ°æ–¹çœ‹è§ `store`\n  - [å®˜æ–¹æ–‡æ¡£](https://github.com/reactjs/react-redux/tree/master/docs)\n  - `React-Redux` ç»™æˆ‘ä»¬æä¾›äº†ï¼š`Providerç»„ä»¶`ï¼Œ`connectå‡½æ•°`\n- Provider ç»„ä»¶\n\n> 1ã€ä½¿ç”¨ `react-redux` æä¾›çš„ `Provider` ç»„ä»¶ä¼ é€’ `store` ä¸Šä¸‹æ–‡ä¹‹åï¼Œ`åŒ…è£¹åœ¨å…¶ä¸­çš„æ‰€æœ‰ç»„ä»¶` å…¨éƒ½å¯ä»¥è¯†åˆ«è¿™ä¸ªä¸Šä¸‹æ–‡\n\n> 2ã€åœ¨ `Provider` ç»„ä»¶å†…éƒ¨çš„è‡ªå®šä¹‰ç»„ä»¶å¯ä»¥ä½¿ç”¨ `connect()` å‡½æ•°ï¼Œä½†æ˜¯åœ¨å…¶å¤–éƒ¨çš„ä¸å¯ä½¿ç”¨\n\n- connect å‡½æ•°\n\n> 1ã€å°† `Reactç»„ä»¶` å’Œ `Redux` çš„ `store` è¿›è¡Œè¿æ¥\n> 2ã€`connect` æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ `API` èƒ½å¤Ÿé€‚åº”ç»å¤§å¤šæ•°å·¥ä½œ\n> 3ã€å®ƒæ²¡æœ‰æ›´æ”¹ä½ ä¼ è¿›æ¥çš„ç±»ï¼Œåè€Œä¼šè¿”å›ä¸€ä¸ªå·²ç»è¿æ¥å¥½çš„æ–°ç±»\n> 4ã€æä¾›äº†ä¸¤ä¸ªå‚æ•°ï¼š`mapStateToProps`, `mapDispatchToProps`\n\n- mapStateToProps\n\n> 1ã€å¦‚æœä¼ å…¥`mapStateToProps`ï¼Œæ­¤æ—¶è¿™ä¸ªç»„ä»¶å°†è®¢é˜… `Redux` ä¸­ `store` çš„æ›´æ–°ä¿¡æ¯ï¼›\n> 2ã€è¿™æ„å‘³ç€æ— è®ºä»»ä½•æ—¶å€™ `store` è¢«æ›´æ”¹äº†ï¼Œ`mapStateToProps` å‡½æ•°éƒ½å°†ä¼šè¢«è°ƒç”¨ï¼Œ`mapStateToProps` çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ª `Object`ï¼›\n> 3ã€è¿™ä¸ª `Object` å°†ä¸ç»„ä»¶çš„ `props` èåˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè¿”å›çš„ `Object` ä¸­çš„ `key` å°†è‡ªåŠ¨æˆä¸ºç»„ä»¶çš„ `props` ä¸­çš„æˆå‘˜\n> 4ã€å¦‚æœä¸æƒ³è®¢é˜… `store` çš„æ›´æ–°ï¼Œæ­¤æ—¶å¯ä»¥ä¸ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œé‡‡ç”¨ `null` å ä½\n\n- mapDispatchToProps\n\n> å¦‚æœå‘ `connect` å‡½æ•°ä¸­ä¼ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ª `å‡½æ•°`ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°†è·å¾—`dispatch` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥é€šè¿‡ `emit action`ï¼Œé—´æ¥çš„å¯¼è‡´ `state` çš„æ”¹å˜\n> å¯ä»¥ä½¿ç”¨ `bindActionCreators()` æ–¹æ³•è½»æ¾çš„å°† `Action creator`(è¿”å› `action` çš„å‡½æ•°)æ¥å£å’Œ `dispatch` è¿›è¡Œç»‘å®š\n\n- ä¹¦å†™è§„åˆ™\n\n> index.js\n\n```jsx\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport App from \"./containers/App\";\nimport reducer from \"./reducers\";\n\nconst store = createStore(reducer);\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n```\n\n> App.js\n\n```jsx\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"./actions\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super();\n    console.log(props);\n    // props: { r: 0, g: 0, b: 0, actions: è®¸å¤šæ–¹æ³• }\n  }\n  render() {\n    return <div>è¿™æ˜¯Appç»„ä»¶</div>;\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    r: state.r,\n    g: state.g,\n    b: state.b\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    actions: bindActionCreators(actions, dispatch)\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n```\n\n> reducer.js\n\n```jsx\nexport default (state, action) => {\n  if (state == undefined) {\n    state = { r: 0, g: 0, b: 0 };\n  }\n  if (action.type == \"ADD\") {\n    return {\n      ...state,\n      r: state.r + 1\n    };\n  }\n  return state;\n};\n```\n\n> actions.js\n\n```jsx\nexport const ADD = () => { \"type\": \"ADD\" }\n```\n\n### ç»„ä»¶å†…éƒ¨çš„ state å’Œå…¨å±€çš„ state\n\n> ç»„ä»¶çš„æ•°æ®ä¸‰å…„å¼Ÿï¼š`state`, `props`, `context` ä¸ç®¡æ˜¯è°å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå¼•å‘ `render()` æ‰§è¡Œï¼Œè§†å›¾ä¼šè¢«é‡ç»˜ã€‚ä½†æ˜¯ï¼Œæ„é€ å‡½æ•°ä¸ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥ä¸ç®¡åŸºäºä»€ä¹ˆç†ç”±ï¼Œéƒ½ä¸éœ€è¦å°†å…¨å±€çš„çŠ¶æ€ï¼Œç”¨è‡ªå·±ç»„ä»¶çš„ `state` æ¥æ”¶ï¼Œè€Œä»…éœ€è¦ç”¨`connect`è¿æ¥ä¸€ä¸‹å…¨å±€`store`ï¼Œç„¶åä½¿ç”¨`this.props.**`å³å¯ã€‚\n\n### reducer æ¨¡å—åŒ–\n\n```javascript\nimport { combineReducers } from \"redux\";\nimport todoReducers from \"./todoReducer.js\"; // æ ‡å‡†reducer\n\nexport default combineReducers({\n  todoReducers\n});\n```\n\n### redux-logger\n\n> æ‰“å° redux log\n\n```javascript\nimport { createStore, applyMiddleware } from \"redux\";\nimport { createLogger } from \"redux-logger\";\nimport reducer from \"./reducers/index.js\";\nlet store = createStore(reducer, applyMiddleware(createLogger()));\n```\n\n### redux-thunk\n\n> è§£å†³å¼‚æ­¥é—®é¢˜\n\n> `redux-thunk`å¸®åŠ©æˆ‘ä»¬åœ¨æ‰€æœ‰çš„ç»„ä»¶çš„ `props` ä¸­æ·»åŠ äº†ä¸€ä¸ª `dispatch` æ–¹æ³•ã€‚\n\n> å½“ç„¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸€å®šè¦è¢« `connect` å‡½æ•°è¿›è¡Œå¤„ç†\n\n> æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ `thunk`ï¼Œåˆ™ `connect` å‡½æ•°ä¸èƒ½ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— æ³•è·å– `this.props.dispatch()`\n\n```javascript\n// å…¥å£æ–‡ä»¶\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nlet store = createStore(reducer, applyMiddleware(thunk))\n\n/** ç»„ä»¶ä¸­ */\n/** ç¬¬ä¸€ç§å†™æ³•ï¼Œå¹¶æ²¡æœ‰å°†actionsè¿›è¡ŒæŠ½ç¦» */\n$.get('/shu.txt', data => {\n    var number = Number(data);\n    this.props.dispatch({\n        \"type\": \"ADD\",\n        number\n    })\n})\n/** ç¬¬äºŒç§å†™æ³•:å¸¸ç”¨ */\n// å¯æšä¸¾\nimport * as actions from './actions/actions.js'\n\nclass ** extends React.Component {\n    ...\n    add() {\n        this.props.dispatch(actions.add())\n        this.props.dispatch(actions.minus())\n    }\n    ...\n}\n/** ç°åœ¨ï¼Œä¸€èˆ¬ä¸ä¼šå†å†™ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œå°±æ˜¯è¯´çœç•¥æ‰mapDispatchToProps */\nexport default connect(\n (state) => {\n    return {\n        state: state\n    }\n })(**)\n// actions.js\n/* ç°åœ¨ï¼Œå¼‚æ­¥çš„Action Creatorä¸è¦ç›´æ¥è¿”å› Actionï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæºå¸¦ dispatch çš„å‡½æ•°ï¼›è¿™ä¸ªå‡½æ•°ç›¸å½“äºâ€œå»¶é•¿â€äº†dispatchçš„æŒç»­æ—¶é—´ã€‚*/\nexport const add = () => (dispatch, getState) => {\n    console.log(getState()) // getStateå¯ä»¥è·å–å…¨å±€æ•°æ®\n    $.get('/shu.txt', data => {\n        var number = Number(data);\n        dispatch({\"type\": \"MINUS\", number})\n    })\n}\nexport const minus = () => { \"type\": \"MINUS\" }\n// reducer.js\nexport default (state = 0, action) => {\n    switch(action.type) {\n        case \"ADD\":\n            return state + action.number\n        case \"MINUS\":\n            return state - 1\n    }\n    return state;\n}\n```\n\n## 9. react-router4.x\n\n### ä»‹ç»\n\n- [å®˜ç½‘](https://reacttraining.com/react-router)\n- å®‰è£…ï¼š`npm install react-router-dom`\n\n### demo\n\n> `exact`è¡¨ç¤ºä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœè·¯å¾„ä¸º `path=\"/\"` çš„ `Route` ä¸è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨å‘ä¸‹åŒ¹é…è·¯ç”±ï¼Œå³éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥\n\n```jsx\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nfunction Index() {\n  return <h2>Home</h2>;\n}\n\nfunction About() {\n  return <h2>About</h2>;\n}\n\nfunction Users() {\n  return <h2>Users</h2>;\n}\n\nfunction AppRouter() {\n  return (\n    <Router>\n      <div>\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/\">Home</Link>\n            </li>\n            <li>\n              <Link to=\"/about/\">About</Link>\n            </li>\n            <li>\n              <Link to=\"/users/\">Users</Link>\n            </li>\n          </ul>\n        </nav>\n\n        <Route path=\"/\" exact component={Index} />\n        <Route path=\"/about/\" component={About} />\n        <Route path=\"/users/\" component={Users} />\n      </div>\n    </Router>\n  );\n}\nexport default AppRouter;\n```\n\n### åŠ¨æ€è·¯ç”±\n\n```jsx\n// App.js å®šä¹‰åŠ¨æ€è·¯ç”±\n<Route path=\"/content/:aid\"></Route>\n// news.js è·³è½¬\n<Link to={`/content/${value.aid}`}></Link>\n// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°\nclass Content extends Component {\n    /* ... */\n      componentDidMount() {\n          const { match } = this.props\n          // è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°\n          console.log(match.params.aid)\n      }\n    /* ... */\n}\n```\n\n### get ä¼ å€¼\n\n```jsx\n// App.js å®šä¹‰åŠ¨æ€è·¯ç”±\n<Route path=\"/content\"></Route>\n// news.js è·³è½¬\n<Link to={`/content?aid=${value.aid}`}></Link>\n// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°\nclass Content extends Component {\n    ...\n      componentDidMount() {\n          const { location } = this.props\n          // è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°\n          console.log(location.search)\n      }\n    ...\n}\n```\n\n### js æ§åˆ¶è·³è½¬\n\n1. å¼•å…¥ `Redirect` ç»„ä»¶\n2. å®šä¹‰ä¸€ä¸ª `flag`\n\n```javascript\nthis.state = {\n  loginFlag: false\n};\n```\n\n3. åœ¨ `Render` ä¸­åˆ¤æ–­ `flag`ï¼Œä»è€Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œè·³è½¬\n\n```jsx\nif (this.state.loginFlag) {\n  return <Redirect to={{ pathname: \"/\" }} />;\n}\n```\n\n4. æ‰§è¡Œ `js` è·³è½¬ï¼Œé€šè¿‡ `js` æ”¹å˜ `loginFlag` çš„çŠ¶æ€ï¼Œæ”¹å˜ä»¥åï¼Œå°±å¯ä»¥ä»æ–°çš„ `render` ä¸­é€šè¿‡ `Redirect` è‡ªå·±è¿›è¡Œè·³è½¬\n\n### æ¨¡å—åŒ–è·¯ç”±\n\n> router.js\n\n```jsx\nimport Home from \"./components/Home/\";\nimport About from \"./components/About/\";\nimport User from \"./components/User/\";\nimport UserList from \"./User/UserList\";\nimport UserInfo from \"./User/UserInfo\";\n\nlet router = [\n  {\n    path: \"/\",\n    component: Home,\n    exact: true\n  },\n  {\n    path: \"/about\",\n    component: About\n  },\n  {\n    path: \"/User\",\n    component: User,\n    routes: [\n      // åµŒå¥—è·¯ç”±è®¾ç½®\n      {\n        path: \"/user/\",\n        component: UserList\n      },\n      {\n        path: \"/user/info\",\n        component: UserInfo\n      }\n    ]\n  }\n];\nexport default router;\n```\n\n> App.js å…¥å£æ–‡ä»¶\n\n```jsx\nimport React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport router from \"./router.js\";\n\nclass App extends Component {\n  render() {\n    return (\n      <Router>\n        <div>\n          {router.map((route, key) => {\n            if (route.exact) {\n              return (\n                <Route\n                  exact\n                  key={key}\n                  path={route.path}\n                  render={props => (\n                    // å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±\n                    <route.component {...props} routes={route.routes} />\n                  )}\n                />\n              );\n            } else {\n              return (\n                <Route\n                  key={key}\n                  path={route.path}\n                  render={props => (\n                    // å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±\n                    <route.component {...props} routes={route.routes} />\n                  )}\n                />\n              );\n            }\n          })}\n        </div>\n      </Router>\n    );\n  }\n}\n```\n\n> User.js\n\n```jsx\nimport React, { Component } from \"react\";\nimport { Route, Link } from \"react-router-dom\";\n\nclass User extends Component {\n  componentWillMount() {\n    console.log(this.props.routes);\n  }\n  render() {\n    return (\n      <div>\n        <div className=\"contenr\">\n          <div className=\"left\">\n            <Link />\n          </div>\n          <div className=\"right\">\n            {this.props.routes.map((route, key) => {\n              return <Route exact key={key} path={route.path} component={route.component} />;\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default User;\n```\n\n### å¸¸ç”¨è·¯ç”±ç»„ä»¶\n\n- _BrowserRouter_ï¼šä½¿ç”¨ `HTML5` å†å²è®°å½• `API` (`pushState`ï¼Œ`replaceState` å’Œ`popstate` äº‹ä»¶)çš„ `<Router>` æ¥ä¿æŒ `UI` ä¸ `URL` çš„åŒæ­¥\n- _HashRouter_ï¼šä½¿ç”¨ `URL` çš„å“ˆå¸Œéƒ¨åˆ†(å³ `window.location.hash` )çš„<è·¯ç”±å™¨>å¯ä»¥ä¿æŒæ‚¨çš„ `UI` ä¸ `URL` åŒæ­¥ã€‚æ³¨æ„ï¼šå“ˆå¸Œå†å²è®°å½•ä¸æ”¯æŒ `location.key` æˆ– `location.state`ã€‚ åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾ç¼“å’Œè¡Œä¸ºï¼Œä½†æ˜¯æœ‰ä¸€äº›è¾¹ç¼˜æ¡ˆä¾‹æˆ‘ä»¬æ— æ³•è§£å†³ã€‚ ä»»ä½•éœ€è¦æ­¤è¡Œä¸ºçš„ä»£ç æˆ–æ’ä»¶å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ ç”±äºæ­¤æŠ€æœ¯ä»…ç”¨äºæ”¯æŒæ—§ç‰ˆæµè§ˆå™¨ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®æ‚¨å°†æœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨`<BrowserHistory>`\n- _Link_ï¼šæ¸²æŸ“æˆ `a` æ ‡ç­¾\n- _NavLink_ï¼šä¸€ç§ç‰¹æ®Šç‰ˆæœ¬çš„ `<Link>`ï¼Œå½“ä¸å½“å‰ `URL` åŒ¹é…æ—¶ï¼Œå°†å‘æ¸²æŸ“å…ƒç´ æ·»åŠ æ ·å¼å±æ€§ã€‚\n- _Redirect_ï¼šé‡å®šå‘\n- _Route_ï¼šåœ¨ä½ç½®ä¸è·¯çº¿çš„è·¯å¾„åŒ¹é…æ—¶å‘ˆç°ä¸€äº› `UI`ã€‚\n- _Switch_ï¼šåªæ¸²æŸ“å‘½ä¸­çš„ç¬¬ä¸€ä¸ª `<Route>` æˆ– `<Redirect>` ã€‚\n\n```jsx\n// Switchçš„ç”¨æ³•\nimport { Switch, Route } from \"react-router\";\n<Switch>\n  <Route exact path=\"/\" component={Home} />\n  <Route path=\"/about\" component={About} />\n  <Route path=\"/:user\" component={User} />\n  <Route component={NoMatch} />\n</Switch>;\n```\n\n## 10. context\n\n- ä»‹ç»\n\n> åœ¨ä¸€ä¸ªå…¸å‹çš„ `React` åº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯é€šè¿‡ `props` å±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶åŠå­ï¼‰è¿›è¡Œä¼ é€’çš„ï¼Œä½†è¿™ç§åšæ³•å¯¹äºæŸäº›ç±»å‹çš„å±æ€§è€Œè¨€æ˜¯æå…¶ç¹ççš„ï¼ˆä¾‹å¦‚ï¼šåœ°åŒºåå¥½ï¼Œ`UI` ä¸»é¢˜ï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚`Context` æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ `props`ã€‚\n\n- ç¹ççš„ `props` æ–¹å¼\n\n```jsx\nclass App extends React.Component {\n  render() {\n    return <Toolbar theme=\"dark\" />;\n  }\n}\nfunction Toolbar(props) {\n  return (\n    <div>\n      <ThemeButton theme={props.theme} />\n    </div>\n  );\n}\nclass ThemeButton extends React.Component {\n  render() {\n    <Button theme={this.props.theme}>æŒ‰é’®</Button>;\n  }\n}\n```\n\n- ä½¿ç”¨ `context`\n\n```jsx\n// Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚\n// ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œlightâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚\nconst ThemeContext = React.createContext(\"light\");\n\nclass App extends React.Component {\n  render() {\n    // ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚\n    // æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚\n    // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† â€œdarkâ€ ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚\n    return (\n      <ThemeContext.Provider value=\"dark\">\n        <Toolbar />\n      </ThemeContext.Provider>\n    );\n  }\n}\nfunction ToolBar() {\n  return (\n    <div>\n      <ThemeButton />\n    </div>\n  );\n}\nclass ThemeButton extends React.Component {\n  // æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚\n  // React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚\n  // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdarkâ€ã€‚\n  static contextType = ThemeContext;\n  render() {\n    return <Button theme={this.context}>æŒ‰é’®</Button>;\n  }\n}\n```\n\n## 11. react-hooks\n\n> `Hook` æ˜¯ `React 16.8` çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ `class` çš„æƒ…å†µä¸‹ä½¿ç”¨ `state` ä»¥åŠå…¶ä»–çš„ `React` ç‰¹æ€§ã€‚\n\n### 11.1 State Hook\n\n> `useState` å°±æ˜¯ä¸€ä¸ª `Hook`ï¼Œç±»ä¼¼ `class` ç»„ä»¶çš„ `this.setState`ï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ `state` å’Œæ—§çš„ `state` è¿›è¡Œåˆå¹¶ã€‚`useState` ä¼šè¿”å›ä¸€å¯¹å€¼ï¼š_å½“å‰çŠ¶æ€_ å’Œä¸€ä¸ªè®©ä½  _æ›´æ–°å®ƒçš„å‡½æ•°_ï¼Œä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚\n\n- è®¡æ•°å™¨\n\n```jsx\nimport React, { useState } from \"react\";\n\nfunction Example() {\n  // å£°æ˜ä¸€ä¸ªå« â€œcountâ€ çš„ state å˜é‡ã€‚\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  );\n}\n\n// ç­‰ä»·çš„ class ç¤ºä¾‹\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>Click me</button>\n      </div>\n    );\n  }\n}\n```\n\n- å£°æ˜å¤šä¸ª `state` å˜é‡\n\n```jsx\nfunction ExampleWithManyStates() {\n  // å£°æ˜å¤šä¸ª state å˜é‡ï¼\n  const [age, setAge] = useState(42);\n  const [fruit, setFruit] = useState(\"banana\");\n  const [todos, setTodos] = useState([{ text: \"Learn Hooks\" }]);\n  // ...\n}\n```\n\n- ä»€ä¹ˆæ˜¯ `Hook`\n\n> `Hook` æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ `React state` åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚`Hook` ä¸èƒ½åœ¨ `class` ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ `class` ä¹Ÿèƒ½ä½¿ç”¨ `React`ã€‚\n\n- æƒ°æ€§ state\n\n```jsx\nconst [state, setState] = useState(() => {\n  const initialState = someExpensiveComputation(props);\n  return initialState;\n});\n```\n\n### 11.2 Effect Hook\n\n> `Effect Hook` å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ\n\n#### (1) æ— éœ€æ¸…é™¤çš„ `Effect`\n\n> æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³åœ¨ `React` æ›´æ–° `DOM` ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ `DOM`ï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚\n\n- ä½¿ç”¨ `class` çš„ç¤ºä¾‹\n\n```jsx\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  componentDidMount() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n  componentDidUpdate() {\n    document.title = `You clicked ${this.state.count} times`;\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>Click me</button>\n      </div>\n    );\n  }\n}\n```\n\n- ä½¿ç”¨ `Hook` çš„ç¤ºä¾‹\n\n```jsx\nimport React, { useState, useEffect } from \"react\";\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  useEffect(() => {\n    document.title = `You clicked ${count} times`;\n  });\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  );\n}\n```\n\n> `useEffect` åšäº†ä»€ä¹ˆï¼Ÿ é€šè¿‡ä½¿ç”¨è¿™ä¸ª `Hook`ï¼Œä½ å¯ä»¥å‘Šè¯‰ `React` ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œã€‚`React` ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œ`effect`â€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ `DOM` æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚åœ¨è¿™ä¸ª `effect` ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† `document` çš„ `title` å±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œæ•°æ®è·å–æˆ–è°ƒç”¨å…¶ä»–å‘½ä»¤å¼çš„ APIã€‚\n\n> ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ `useEffect`ï¼Ÿ å°† `useEffect` æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ `effect` ä¸­ç›´æ¥è®¿é—® `count` `state` å˜é‡ï¼ˆæˆ–å…¶ä»– `props`ï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ `API` æ¥è¯»å–å®ƒ â€”â€” å®ƒå·²ç»ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚`Hook` ä½¿ç”¨äº† `JavaScript` çš„é—­åŒ…æœºåˆ¶ï¼Œè€Œä¸ç”¨åœ¨ `JavaScript` å·²ç»æä¾›äº†è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿˜å¼•å…¥ç‰¹å®šçš„ React APIã€‚\n\n> `useEffect` ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼Ÿ æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ï¼ˆæˆ‘ä»¬ç¨åä¼šè°ˆåˆ°å¦‚ä½•æ§åˆ¶å®ƒã€‚ï¼‰ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“æ¥å— `effect` å‘ç”Ÿåœ¨â€œæ¸²æŸ“ä¹‹åâ€è¿™ç§æ¦‚å¿µï¼Œä¸ç”¨å†å»è€ƒè™‘â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚`React` ä¿è¯äº†æ¯æ¬¡è¿è¡Œ `effect` çš„åŒæ—¶ï¼Œ`DOM` éƒ½å·²ç»æ›´æ–°å®Œæ¯•ã€‚\n\n{% note warning, ä¸ `componentDidMount` æˆ– `componentDidUpdate` ä¸åŒï¼Œä½¿ç”¨ `useEffect` è°ƒåº¦çš„ `effect` ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ`effect` ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ `useLayoutEffect Hook` ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ `API` ä¸ `useEffect` ç›¸åŒã€‚ %}\n\n#### (2) éœ€è¦æ¸…é™¤çš„ `Effect`\n\n> ä¹‹å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ä¸éœ€è¦æ¸…é™¤çš„å‰¯ä½œç”¨ï¼Œè¿˜æœ‰ä¸€äº›å‰¯ä½œç”¨æ˜¯éœ€è¦æ¸…é™¤çš„ã€‚ä¾‹å¦‚è®¢é˜…å¤–éƒ¨æ•°æ®æºã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸…é™¤å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼ç°åœ¨è®©æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹å¦‚ä½•ç”¨ `Class` å’Œ `Hook` æ¥å®ç°ã€‚\n\n- ä½¿ç”¨ `class` çš„ç¤ºä¾‹\n\n```jsx\nclass FriendStatus extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOnline: null };\n    this.handleStatusChange = this.handleStatusChange.bind(this);\n  }\n\n  componentDidMount() {\n    ChatAPI.subscribeToFriendStatus(this.props.friend.id, this.handleStatusChange);\n  }\n  componentWillUnmount() {\n    ChatAPI.unsubscribeFromFriendStatus(this.props.friend.id, this.handleStatusChange);\n  }\n  handleStatusChange(status) {\n    this.setState({\n      isOnline: status.isOnline\n    });\n  }\n\n  render() {\n    if (this.state.isOnline === null) {\n      return \"Loading...\";\n    }\n    return this.state.isOnline ? \"Online\" : \"Offline\";\n  }\n}\n```\n\n- ä½¿ç”¨ `Hook` çš„ç¤ºä¾‹\n\n{% note warning, çœ¼å°–çš„è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªç¤ºä¾‹è¿˜éœ€è¦ç¼–å†™ componentDidUpdate æ–¹æ³•æ‰èƒ½ä¿è¯å®Œå…¨æ­£ç¡®ã€‚æˆ‘ä»¬å…ˆæš‚æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œæœ¬ç« èŠ‚ä¸­åç»­éƒ¨åˆ†ä¼šä»‹ç»å®ƒã€‚ %}\n\n```jsx\nimport React, { useState, useEffect } from \"react\";\n\nfunction FriendStatus(props) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  useEffect(() => {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    // Specify how to clean up after this effect:\n    return function cleanup() {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n\n  if (isOnline === null) {\n    return \"Loading...\";\n  }\n  return isOnline ? \"Online\" : \"Offline\";\n}\n```\n\n> ä¸ºä»€ä¹ˆè¦åœ¨ `effect` ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Ÿ è¿™æ˜¯ `effect` å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª `effect` éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚å®ƒä»¬éƒ½å±äº `effect` çš„ä¸€éƒ¨åˆ†ã€‚\n\n> `React` ä½•æ—¶æ¸…é™¤ `effect`ï¼Ÿ `React` ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚æ­£å¦‚ä¹‹å‰å­¦åˆ°çš„ï¼Œ`effect` åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `React` ä¼šåœ¨æ‰§è¡Œå½“å‰ `effect` ä¹‹å‰å¯¹ä¸Šä¸€ä¸ª `effect` è¿›è¡Œæ¸…é™¤ã€‚æˆ‘ä»¬ç¨åå°†è®¨è®ºä¸ºä»€ä¹ˆè¿™å°†åŠ©äºé¿å… `bug` ä»¥åŠå¦‚ä½•åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶è·³è¿‡æ­¤è¡Œä¸ºã€‚\n\n{% note warning, å¹¶ä¸æ˜¯å¿…é¡»ä¸º `effect` ä¸­è¿”å›çš„å‡½æ•°å‘½åã€‚è¿™é‡Œæˆ‘ä»¬å°†å…¶å‘½åä¸º `cleanup` æ˜¯ä¸ºäº†è¡¨æ˜æ­¤å‡½æ•°çš„ç›®çš„ï¼Œä½†å…¶å®ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°æˆ–è€…ç»™èµ·ä¸€ä¸ªåˆ«çš„åå­—ã€‚ %}\n\n### 11.3 Hook è§„åˆ™\n\n#### (1) åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ `Hook`\n\n> ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ `Hook`ï¼Œ ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ `React` å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ `Hook` åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© `React` èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ `useState` å’Œ `useEffect` è°ƒç”¨ä¹‹é—´ä¿æŒ `hook` çŠ¶æ€çš„æ­£ç¡®ã€‚\n\n#### (2) åªåœ¨ `React` å‡½æ•°ä¸­è°ƒç”¨ `Hook`\n\n> ä¸è¦åœ¨æ™®é€šçš„ `JavaScript` å‡½æ•°ä¸­è°ƒç”¨ `Hook`ã€‚ä½ å¯ä»¥ï¼š\n\n- âœ… åœ¨ `React` çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ `Hook`\n- âœ… åœ¨è‡ªå®šä¹‰ `Hook` ä¸­è°ƒç”¨å…¶ä»– `Hook`\n\n### 11.4 è‡ªå®šä¹‰ Hook\n\n> é€šè¿‡è‡ªå®šä¹‰ `Hook`ï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚\n\n#### (1) æå–è‡ªå®šä¹‰ `Hook`\n\n> å½“æˆ‘ä»¬æƒ³åœ¨ä¸¤ä¸ªå‡½æ•°ä¹‹é—´å…±äº«é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæå–åˆ°ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸­ã€‚è€Œç»„ä»¶å’Œ `Hook` éƒ½æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹ŸåŒæ ·é€‚ç”¨è¿™ç§æ–¹å¼ã€‚\n\n> è‡ªå®šä¹‰ `Hook` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œ`use`â€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ `Hook`ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ `useFriendStatus` æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„ `Hook`:\n\n```jsx\nimport { useState, useEffect } from \"react\";\n\nfunction useFriendStatus(friendID) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  useEffect(() => {\n    function handleStatusChange(status) {\n      setIsOnline(status.isOnline);\n    }\n\n    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);\n    return () => {\n      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);\n    };\n  });\n\n  return isOnline;\n}\n```\n\n#### (2) ä½¿ç”¨è‡ªå®šä¹‰ `Hook`\n\n```jsx\nfunction FriendStatus(props) {\n  const isOnline = useFriendStatus(props.friend.id);\n\n  if (isOnline === null) {\n    return \"Loading...\";\n  }\n  return isOnline ? \"Online\" : \"Offline\";\n}\n\nfunction FriendListItem(props) {\n  const isOnline = useFriendStatus(props.friend.id);\n\n  return <li style={{ color: isOnline ? \"green\" : \"black\" }}>{props.friend.name}</li>;\n}\n```\n\n### 11.5 Hook API ç´¢å¼•\n\n> å‚è§ [Hook API](https://react.docschina.org/docs/hooks-reference.html)\n\n#### 11.5.1 åŸºç¡€ Hook\n\n##### useState\n\n> [ç‚¹å‡»è·³è½¬](#linkUseState)\n\n##### useEffect\n\n> [ç‚¹å‡»è·³è½¬](#linkUseEffect)\n\n##### useContext\n\n> è®¢é˜… `context` çš„å˜åŒ–ï¼Œæ„Ÿè§‰å°±æ˜¯å¯¹äºè·å– `context` çš„å€¼æ¢äº†ä¸€ç§å†™æ³•è€Œå·²ã€‚ç›¸å¯¹äºä¹‹å‰çš„å†™æ³•ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ  `context` æ›´åŠ ç®€å•ã€‚\n\n```jsx\nconst context = React.createContext({})\nconst { Provider, Consumer  } = context;\n\n// hooksçš„å†™æ³•\nclass App extends React.Component {\n    return (\n        <Provider value={{ name: 'li' }}>\n            <Hello/>\n        </Provider>\n    </div>\n}\nfunction Hello () {\n    const value = useContext(context);\n    return <h1>value: {value.name}</h1>\n}\n\n// åŸæœ¬çš„å†™æ³•\nfunction Hello (props) {\n    function render ({name}) {\n      return <h1>value: {value.name}</h1>\n    }\n    return (\n      <Consumer>\n        {render}\n      </Consumer>\n    )\n}\n```\n\n#### 11.5.2 é¢å¤–çš„ Hook\n\n##### useReducer\n\n> ç±»ä¼¼äº `redux` é‚£æ ·çš„çŠ¶æ€æ›´æ–°æ–¹æ¡ˆã€‚ä½¿ç”¨åœºæ™¯ï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯ `redux` çš„åº”ç”¨åœºæ™¯ï¼‰ï¼Œç®¡ç†çš„çŠ¶æ€å€¼æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”é”®å€¼è¾ƒå¤šã€‚`state` æ¯ä¸ª `key` ä¿®æ”¹çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å•ç‹¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ç®¡ç†ã€‚\n\n```jsx\nconst initialState = { count: 0 };\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"increment\":\n      return { count: state.count + 1 };\n    case \"decrement\":\n      return { count: state.count - 1 };\n    default:\n      throw new Error();\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  return (\n    <>\n      Count: {state.count}\n      <button onClick={() => dispatch({ type: \"increment\" })}>+</button>\n      <button onClick={() => dispatch({ type: \"decrement\" })}>-</button>\n    </>\n  );\n}\n```\n\n##### useCallback\n\n> ä»…åœ¨æŒ‡å®šçš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå‡½æ•°ä½“å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚\n\n```jsx\nconst memoizedCallback = useCallback(() => {\n  doSomething(a, b);\n}, [a, b]);\n```\n\n> è¿™æ ·ä½¿ç”¨çš„å¥½å¤„ï¼šä¸ä¼šåœ¨æ¯æ¬¡ç»„ä»¶ `render` çš„æ—¶å€™ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼ŒèŠ‚çœå¼€é”€ã€‚ä¾‹å¦‚\n\n```jsx\nfunction f() {\n  const cacheCallback = useCallback(() => {\n    doSomething(a, b);\n  }, [a, b]);\n  // å’Œä¸‹é¢è¿™æ ·çš„å½¢å¼ç›¸æ¯”, æ¯æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ª doSometing å‡½æ•°\n  function doSometing(a, b) {}\n}\n```\n\n> å¯ä»¥ä¿æŒå‡½æ•°çš„å¼•ç”¨ä¿æŒä¸å˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ç±»ç»„ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡ `this.method` çš„æ–¹å¼ç»‘å®šçš„ï¼Œè¿™æ ·åšçš„æ–¹å¼æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯¹æ–¹æ³•çš„å¼•ç”¨ä¸€ç›´ä¿æŒä¸å˜ã€‚ é‚£ä¹ˆåœ¨å‡½æ•°ç»„ä»¶å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ `useCallback` æ¥å®ç°ã€‚\n\n> å¯ä»¥å®ç°åœ¨å­ç»„ä»¶æŠŠè¯¥å›è°ƒä½œä¸ºä¾èµ–å¤„ç†ã€‚\n\n```jsx\nfunction Parent({ a, b }) {\n  const cacheCallback = useCallback(() => {\n    doSometing(a, b);\n  }, [a, b]);\n  return <Child handler={cacheCallback} />;\n}\n\nfunction Child({ handler }) {\n  useEffect(() => {\n    handler();\n  }, [handler]);\n}\n```\n\n##### useMemo\n\n> ç±»ä¼¼äº `vue` çš„ `computed`ï¼Œåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–çš„æ—¶å€™é‡æ–°è®¡ç®—ç¼“å­˜å€¼ã€‚å…¶å®è‡ªå·±å®ç°èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå’Œ `vue` çš„è®¡ç®—å±æ€§ä¸åŒçš„æ˜¯ï¼Œ`vue` çš„è®¡ç®—å±æ€§æ˜¯è‡ªåŠ¨æ”¶é›†ä¾èµ–çš„ï¼Œè€Œä½¿ç”¨ `useMeno` éœ€è¦æ‰‹åŠ¨åœ¨æ•°ç»„ç§ä¼ å…¥ä¾èµ–é¡¹ã€‚\n\n```jsx\nconst memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);\n```\n\n> `useCallback(fn, deps)` ç›¸å½“äº `useMemo(() => fn, deps)`\n\n##### useRef\n\n> æ•…åæ€ä¹‰ï¼Œè¯¥ `hook` ä¸»è¦æ˜¯ç”¨æ¥è·å–ç»„ä»¶å®ä¾‹æˆ–è€…æˆ–è€… `dom` èŠ‚ç‚¹ã€‚ ä½†æ˜¯å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹ï¼Œæ˜¯å¯ä»¥è¿”å›ä¸€ä¸ªåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå¼•ç”¨ä¸å˜çš„å¯¹è±¡ã€‚\n\n```jsx\nfunction f() {\n  const elRef = uesRef(null);\n  return <div ref={elRef}></div>;\n}\n```\n\n> ç”¨æ¥å­˜å‚¨æ•°æ®çš„è¯ï¼Œè€ƒè™‘ä¸‹é¢çš„åœºæ™¯ã€‚\n\n```jsx\nlet handler = () => {}; // äº‹ä»¶å¤„ç†å‡½æ•°\n// ä¸ä½¿ç”¨ useRef, å¯ä»¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨æ•°æ®\nfunction f() {\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handler);\n  }, []);\n\n  const moveScroll = useCallback(() => {\n    window.removeEventListener(\"scorll\", handler);\n  }, []);\n\n  return (\n    <div onClick={moveScroll} ref={elRef}>\n      ç§»é™¤scrollç›‘å¬\n    </div>\n  );\n}\n\n// ä½¿ç”¨useRefçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ å†…èšã€‚ä½†æ˜¯å‰ææ˜¯å¿…é¡»è¦ç†è§£useRefè¿™ä¸ªhooksã€‚\nfunction f() {\n  const handler = useRef(null);\n  handler.current = () => {}; // äº‹ä»¶å¤„ç†\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handler.current);\n  }, []);\n\n  const moveScroll = useCallback(() => {\n    window.removeEventListener(\"scorll\", handler.current);\n  }, []);\n\n  return (\n    <div onClick={moveScroll} ref={elRef}>\n      ç§»é™¤scrollç›‘å¬\n    </div>\n  );\n}\n```\n\n##### useImperativeHandle\n\n> `useImperativeHandle` å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ `ref` æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚\n\n```jsx\nconst Fancy = React.forwardRef((props, ref) => {\n  return (\n    <div>\n      <input type=\"text\" ref={ref} />\n    </div>\n  );\n});\n\nfunction Hello() {\n  const ref = useRef(null);\n\n  useEffect(() => {\n    console.log(\"current\", ref); // { current: Input }\n  }, []);\n\n  return <Fancy ref={ref} />;\n}\n```\n\n##### useLayoutEffect\n\n> å‡½æ•°ç­¾åå’Œ `useEffect` æ˜¯ä¸€æ ·çš„ï¼Œ å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– `DOM` å¸ƒå±€å¹¶ `åŒæ­¥` è§¦å‘é‡æ¸²æŸ“ã€‚\n\n##### useDebugValue\n\n> ç”¨æ¥ç»™ `hooks` æ·»åŠ ä¸Šæ‰“å°ä¿¡æ¯ã€‚\n","slug":"å‰ç«¯/React16 æ–‡æ¡£","published":1,"updated":"2021-04-07T07:29:46.117Z","_id":"ckn7476au0037yx7y3aac6bor","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-React-ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\"><a href=\"#1-React-ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\" class=\"headerlink\" title=\"1. React ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\"></a>1. React ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id=\"è™šæ‹Ÿ-DOM\"><a href=\"#è™šæ‹Ÿ-DOM\" class=\"headerlink\" title=\"è™šæ‹Ÿ DOM\"></a>è™šæ‹Ÿ DOM</h3><ol>\n<li>DOM çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n</ol>\n<blockquote>\n<p>æµè§ˆå™¨ä¸­çš„æ¦‚å¿µï¼Œç”¨<code>js</code>å¯¹è±¡æ¥è¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œ <code>DOM</code> å¯¹è±¡çš„ APIï¼›</p>\n</blockquote>\n<ol start=\"2\">\n<li>ä»€ä¹ˆæ˜¯ React ä¸­çš„ è™šæ‹Ÿ DOMï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„æœ¬è´¨ï¼‰ï¼š</li>\n</ol>\n<blockquote>\n<p>ç”¨<code>js</code>å¯¹è±¡æ¥æ¨¡æ‹Ÿ é¡µé¢ä¸Šçš„<code>DOMå’ŒDOMåµŒå¥—</code></p>\n</blockquote>\n<ol start=\"3\">\n<li>ä¸ºä»€ä¹ˆè¦å®ç° è™šæ‹Ÿ DOM ï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„ç›®çš„ï¼‰ï¼š</li>\n</ol>\n<blockquote>\n<p>ä¸ºäº†å®ç°é¡µé¢ä¸­ï¼Œ<code>DOM</code>å…ƒç´ çš„é«˜æ•ˆæ›´æ–°</p>\n</blockquote>\n<ol start=\"4\">\n<li>DOM å’Œ è™šæ‹Ÿ DOM çš„åŒºåˆ«ï¼š</li>\n</ol>\n<ul>\n<li><code>DOM</code>ï¼šæµè§ˆå™¨ä¸­ï¼Œæä¾›çš„æ¦‚å¿µï¼›ç”¨<code>js</code>å¯¹è±¡ï¼Œè¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œå…ƒç´ çš„ <code>API</code>ï¼›</li>\n<li><code>è™šæ‹ŸDOM</code>ï¼šæ˜¯æ¡†æ¶ä¸­çš„æ¦‚å¿µï¼›æ˜¯å¼€å‘æ¡†æ¶çš„äººå‘˜ï¼Œæ‰‹åŠ¨ç”¨<code>js</code>å¯¹è±¡æ¥æ¨¡æ‹Ÿ<code>DOM</code>å…ƒç´ å’ŒåµŒå¥—å…³ç³»ï¼›</li>\n</ul>\n<ol start=\"5\">\n<li>DOM æ ‘çš„æ¦‚å¿µï¼š</li>\n</ol>\n<blockquote>\n<p>ä¸€ä¸ªç½‘é¡µçš„å‘ˆç°è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨è·å–é¡µé¢çš„ <code>html</code> ä»£ç ï¼›</li>\n<li>æµè§ˆå™¨è¦å…ˆåœ¨å†…å­˜ä¸­ï¼Œè§£æ <code>DOM</code> ç»“æ„ï¼Œå¹¶åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œæ¸²æŸ“å‡ºä¸€æ£µ <code>DOM</code> æ ‘ï¼›</li>\n<li>æµè§ˆå™¨æŠŠ <code>DOM</code> æ ‘ï¼Œå‘ˆç°åˆ°é¡µé¢ä¸Šï¼›</li>\n</ol>\n</blockquote>\n<h3 id=\"Diff-ç®—æ³•\"><a href=\"#Diff-ç®—æ³•\" class=\"headerlink\" title=\"Diff ç®—æ³•\"></a>Diff ç®—æ³•</h3><ol>\n<li>tree diffï¼š</li>\n</ol>\n<blockquote>\n<p>æ–°æ—§ä¸¤æ£µ <code>DOM</code> æ ‘ï¼Œé€å±‚å¯¹æ¯”çš„è¿‡ç¨‹ï¼Œå°±æ˜¯<code>tree diff</code>ï¼›<br>å½“æ•´æ£µ<code>DOM</code>é€å±‚å¯¹æ¯”å®Œæ¯•ï¼Œåˆ™æ‰€æœ‰éœ€è¦è¢«æŒ‰éœ€æ›´æ–°çš„å…ƒç´ ï¼Œå¿…ç„¶èƒ½å¤Ÿè¢«æ‰¾åˆ°ï¼›</p>\n</blockquote>\n<ol start=\"2\">\n<li>component diffï¼š</li>\n</ol>\n<blockquote>\n<p>åœ¨è¿›è¡Œ <code>tree diff</code> çš„æ—¶å€™ï¼Œæ¯ä¸€å±‚ä¸­ï¼Œç»„ä»¶çº§åˆ«çš„å¯¹æ¯”ï¼Œå«åš <code>component diff</code>ï¼›<br>å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™<strong>æš‚æ—¶</strong>è®¤ä¸ºæ­¤ç»„ä»¶ä¸è®¸è¦è¢«æ›´æ–°ï¼›<br>å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦ç§»é™¤æ—§ç»„ä»¶ï¼Œåˆ›å»ºæ–°ç»„ä»¶ï¼Œå¹¶è¿½åŠ åˆ°é¡µé¢ä¸Šï¼›</p>\n</blockquote>\n<ol start=\"3\">\n<li>element diffï¼š</li>\n</ol>\n<blockquote>\n<p>åœ¨è¿›è¡Œç»„ä»¶å¯¹æ¯”çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™éœ€è¦è¿›è¡Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œè¿™å«åš<code>element diff</code>ï¼›</p>\n</blockquote>\n<h2 id=\"2-React-ä¸­åˆ›å»ºç»„ä»¶\"><a href=\"#2-React-ä¸­åˆ›å»ºç»„ä»¶\" class=\"headerlink\" title=\"2. React ä¸­åˆ›å»ºç»„ä»¶\"></a>2. React ä¸­åˆ›å»ºç»„ä»¶</h2><h3 id=\"ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\"><a href=\"#ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\" class=\"headerlink\" title=\"ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\"></a>ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶</h3><blockquote>\n<p>1ã€åœ¨ç»„ä»¶ä¸­ï¼Œå¿…é¡»è¦å‘å¤–<code>return</code>ä¸€ä¸ªåˆæ³•çš„<code>jsx</code>åˆ›å»ºçš„<code>è™šæ‹ŸDOM</code>å…ƒç´ ï¼›<br>2ã€å¦‚æœè¦æ¥æ”¶å¤–ç•Œä¼ é€’çš„æ•°æ®ï¼Œéœ€è¦åœ¨<code>æ„é€ å‡½æ•°</code>çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨<code>props</code>æ¥æ¥æ”¶ï¼›<br>3ã€æ— è®ºæ˜¯<code>vue</code>è¿˜æ˜¯<code>react</code>ï¼Œç»„ä»¶ä¸­çš„<code>props</code>æ°¸è¿œéƒ½æ˜¯åªè¯»<code>read-only</code>çš„ï¼Œä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼›<br>4ã€ç»„ä»¶çš„åç§°<code>é¦–å­—æ¯</code>å¿…é¡»æ˜¯<code>å¤§å†™</code>çš„<br>5ã€çœç•¥ <code>.jsx</code> æ–‡ä»¶å</p>\n</blockquote>\n<blockquote>\n<p>æ‰“å¼€ <code>webpack.config.js</code>ï¼Œå¹¶åœ¨å¯¼å‡ºçš„é…ç½®å¯¹è±¡ä¸­ï¼Œæ–°å¢ä»¥ä¸‹å‡ ä¸ªèŠ‚ç‚¹ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resolve: &#123;</span><br><span class=\"line\">  extensions: [<span class=\"string\">&quot;.js&quot;</span>, <span class=\"string\">&quot;.jsx&quot;</span>, <span class=\"string\">&quot;.json&quot;</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶ä¸­ <code>return</code> ä¸€ä¸ª <code>null</code>ï¼Œåˆ™è¡¨ç¤ºæ­¤ç»„ä»¶æ˜¯ç©ºçš„ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ¸²æŸ“</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      è¿™æ˜¯Helloç»„ä»¶ -- &#123;props.name&#125; -- &#123;props.age&#125; -- &#123;props.gender&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;å¤§é»„&quot;</span>,</span><br><span class=\"line\">  age: <span class=\"number\">3</span>,</span><br><span class=\"line\">  gender: <span class=\"string\">&quot;é›„æ€§&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;Hello &#123;...user&#125; /&gt;</span><br><span class=\"line\">  &lt;/div&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;#app&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨-class-å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\"><a href=\"#ä½¿ç”¨-class-å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\" class=\"headerlink\" title=\"ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\"></a>ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶</h3><blockquote>\n<p><code>public</code>: æ‰€æœ‰æˆå‘˜éƒ½å¯è®¿é—®<br><code>private</code>: åªæœ‰å½“å‰ç±»å¯è®¿é—®<br><code>protected</code>: åªæœ‰å½“å‰ç±»å’Œå…¶å­ç±»å¯è®¿é—®ï¼Œå¤–éƒ¨æˆå‘˜æ— æ³•è®¿é—®</p>\n</blockquote>\n<blockquote>\n<p><code>es6</code>ä¸­çš„<code>classå…³é”®å­—</code>ï¼Œæ˜¯å®ç°<code>é¢å‘å¯¹è±¡ç¼–ç¨‹</code>çš„æ–°å½¢å¼ï¼Œä¹Ÿå«åš<code>è¯­æ³•ç³–</code></p>\n</blockquote>\n<ul>\n<li>constructor æ„é€ å™¨ä¸­çš„ super å‡½æ•°</li>\n</ul>\n<blockquote>\n<p>åœ¨å­ç±»ä¸­ï¼Œ <code>this</code> åªèƒ½æ”¾åˆ° <code>super</code> ä¹‹åä½¿ç”¨<br>å­ç±»ä¸­çš„ <code>super</code>ï¼Œå…¶å®å°±æ˜¯çˆ¶ç±»ä¸­ï¼Œ<code>contructor</code>æ„é€ å™¨çš„ä¸€ä¸ªå¼•ç”¨</p>\n</blockquote>\n<ul>\n<li>æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„</li>\n</ul>\n<blockquote>\n<p><code>render</code>å‡½æ•°çš„ä½œç”¨ï¼šæ¸²æŸ“å½“å‰ç»„ä»¶æ‰€å¯¹åº”çš„<code>è™šæ‹ŸDOM</code> å…ƒç´ </p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> ç»„ä»¶åç§° <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>è¿™æ˜¯ class åˆ›å»ºçš„ç»„ä»¶<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>this.props å’Œ this.state</li>\n</ul>\n<blockquote>\n<ol>\n<li><code>this.props</code> æ¥æ”¶å¤–ç•Œä¼ é€’çš„å‚æ•°ï¼Œ<code>this.state</code> è®¾ç½®ç§æœ‰æ•°æ®</li>\n<li>åœ¨ <code>class</code> å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨ <code>this.props</code> è®¿é—®ä¼ é€’è¿‡æ¥çš„æ•°æ®</li>\n<li><code>props</code> æ˜¯åªè¯»çš„</li>\n</ol>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>();</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçš„ this.state = &#123;&#125;ï¼Œå°±ç›¸å½“äº Vueä¸­çš„data() &#123; return &#123;&#125; &#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      msg: <span class=\"string\">&quot;è¿™æ˜¯Movieç»„ä»¶çš„ç§æœ‰æ•°æ®&quot;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* æ³¨æ„ï¼šåœ¨ class ç»„ä»¶å†…å®¹ï¼Œthis è¡¨ç¤ºå½“å‰ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>è¿™æ˜¯Movieç»„ä»¶ -- &#123;this.props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;å¤§é»„&quot;</span>,</span><br><span class=\"line\">  age: <span class=\"number\">3</span>,</span><br><span class=\"line\">  gender: <span class=\"string\">&quot;é›„æ€§&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;Movie &#123;...user&#125; /&gt;</span><br><span class=\"line\">    &lt;h3&gt;&#123;<span class=\"built_in\">this</span>.state.msg&#125;&lt;/h3&gt;</span><br><span class=\"line\">  &lt;/div&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;#app&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\"><a href=\"#ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\" class=\"headerlink\" title=\"ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\"></a>ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”</h3><blockquote>\n<p>ä½¿ç”¨ <code>class</code> å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„ <code>ç§æœ‰æ•°æ®(this.state)</code> å’Œ <code>ç”Ÿå‘½å‘¨æœŸ</code><br>ä½¿ç”¨ <code>function</code> åˆ›å»ºçš„ç»„ä»¶ï¼Œåªæœ‰ <code>props</code>ï¼Œæ²¡æœ‰è‡ªå·±çš„ <code>ç§æœ‰æ•°æ®</code> å’Œ <code>ç”Ÿå‘½å‘¨æœŸ</code><br>æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ä¹‹é—´çš„ <code>æœ¬è´¨åŒºåˆ«</code>ï¼šæœ‰æ—  <code>state</code> å±æ€§å’Œ <code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</code></p>\n</blockquote>\n<h2 id=\"3-React-ä¸­-style-å¤„ç†æ–¹å¼\"><a href=\"#3-React-ä¸­-style-å¤„ç†æ–¹å¼\" class=\"headerlink\" title=\"3. React ä¸­ style å¤„ç†æ–¹å¼\"></a>3. React ä¸­ style å¤„ç†æ–¹å¼</h2><h3 id=\"å†…è”\"><a href=\"#å†…è”\" class=\"headerlink\" title=\"å†…è”\"></a>å†…è”</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">style = &#123;&#123; <span class=\"attr\">color</span>: red &#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h3><blockquote>\n<p>1ã€å¦‚æœç›´æ¥å¯¼å…¥ <code>css</code> æ ·å¼è¡¨ï¼Œé»˜è®¤åˆ™æ˜¯åœ¨å…¨å±€ä¸Šï¼Œæ•´ä¸ªé¡¹ç›®éƒ½ä¼šç”Ÿæ•ˆ<br>2ã€css æ¨¡å—åŒ–ï¼Œåªé’ˆå¯¹ <code>class</code> é€‰æ‹©å™¨ å’Œ <code>id</code> é€‰æ‹©å™¨ç”Ÿæ•ˆ<br>å¼•ç”¨ï¼š<code>import style from &#39;./style.css&#39;</code></p>\n</blockquote>\n<h2 id=\"4-React-ä¸­äº‹ä»¶ç»‘å®š\"><a href=\"#4-React-ä¸­äº‹ä»¶ç»‘å®š\" class=\"headerlink\" title=\"4. React ä¸­äº‹ä»¶ç»‘å®š\"></a>4. React ä¸­äº‹ä»¶ç»‘å®š</h2><ol>\n<li>äº‹ä»¶çš„åç§°éƒ½æ˜¯ <code>React</code> æ‰€æä¾›çš„ï¼Œå› æ­¤åç§°çš„é¦–å­—æ¯å¿…é¡»å¤§å†™<code>onClick</code>ï¼Œ<code>onMouseOver</code></li>\n<li>ä¸ºäº‹ä»¶æä¾›çš„å¤„ç†å‡½æ•°ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onClick = &#123; <span class=\"function\"><span class=\"keyword\">function</span> &#125;</span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>ç”¨çš„æœ€å¤šçš„äº‹ä»¶ç»‘å®šå½¢å¼ä¸ºï¼š</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.show(<span class=\"string\">&quot;ä¼ å‚&quot;</span>)&#125;&gt;æŒ‰é’®&lt;/button&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œéœ€è¦å®šä¹‰ä¸º ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç„¶åèµ‹å€¼ç»™ å‡½æ•°åç§°</span></span><br><span class=\"line\">show = <span class=\"function\"><span class=\"params\">arg1</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;showæ–¹æ³•&quot;</span> + arg1);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>åœ¨ <code>React</code> ä¸­ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ <code>state</code> ä¸­çš„æ•°æ®ï¼Œæ¨èä½¿ç”¨ <code>this.setState(&#123; &#125;)</code></li>\n</ol>\n<blockquote>\n<p>1ã€åœ¨<code>setState</code>ä¸­ï¼Œåªä¼šæŠŠå¯¹åº”çš„ <code>state</code>çŠ¶æ€æ›´æ–°ï¼Œè€Œä¸ä¼šè¦†ç›–å…¶å®ƒçš„ <code>state</code>çŠ¶æ€ã€‚<br>2ã€<code>this.setState</code> æ–¹æ³•çš„æ‰§è¡Œæ—¶ <code>å¼‚æ­¥çš„</code>ã€‚<br>3ã€å¦‚æœåœ¨è°ƒç”¨å®Œ <code>this.setState</code>ä¹‹åï¼Œåˆæƒ³ç«‹å³æ‹¿åˆ°æœ€æ–°çš„<code>state</code>çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨ <code>this.setState(&#123;&#125;, callback)</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°ã€å›è°ƒå‡½æ•°ã€‘ä¸­è·å–ã€‚</p>\n</blockquote>\n<h2 id=\"5-å•å‘æ•°æ®æµ-çŠ¶æ€å˜åŒ–-gt-è‡ªåŠ¨æ›´æ–°é¡µé¢\"><a href=\"#5-å•å‘æ•°æ®æµ-çŠ¶æ€å˜åŒ–-gt-è‡ªåŠ¨æ›´æ–°é¡µé¢\" class=\"headerlink\" title=\"5. å•å‘æ•°æ®æµ(çŠ¶æ€å˜åŒ– =&gt; è‡ªåŠ¨æ›´æ–°é¡µé¢)\"></a>5. å•å‘æ•°æ®æµ(çŠ¶æ€å˜åŒ– =&gt; è‡ªåŠ¨æ›´æ–°é¡µé¢)</h2><blockquote>\n<p>1ã€<code>React</code> ä¸­ï¼Œé»˜è®¤æ˜¯ <code>å•å‘æ•°æ®æµ</code>ï¼Œåªèƒ½æŠŠ <code>state</code> ä¸Šçš„æ•°æ®ç»‘å®šåˆ°é¡µé¢ï¼Œæ— æ³•æŠŠé¡µé¢ä¸­æ•°æ®çš„å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥å› <code>state</code>ï¼›å¦‚æœéœ€è¦æŠŠé¡µé¢ä¸Šæ•°æ®çš„å˜åŒ–ï¼Œä¿å­˜åˆ° <code>state</code>ï¼Œéœ€è¦æ‰‹åŠ¨ç›‘å¬<code>onChange</code> äº‹ä»¶ï¼Œæ‹¿åˆ°æœ€æ–°çš„æ•°æ®ï¼Œæ‰‹åŠ¨è°ƒç”¨ <code>this.setState(&#123; &#125;)</code> æ›´æ”¹ã€‚<br>2ã€å½“ä¸ºæ–‡æœ¬æ¡†ç»‘å®š <code>value</code> å€¼ä»¥åï¼Œè¦ä¹ˆåŒæ—¶ç»™æ ‡ç­¾æä¾›ä¸€ä¸ª <code>readOnly</code> å±æ€§ï¼Œè¦ä¹ˆæä¾›ä¸€ä¸ª <code>onChange</code> äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹æ¡ˆä¸€ï¼šé€šè¿‡äº‹ä»¶å‚æ•° e æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨</span></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;<span class=\"built_in\">this</span>.state.msg&#125; onChange=&#123;<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> <span class=\"built_in\">this</span>.textChanged(e)&#125; /&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">textChanged = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e.target.value);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ¡ˆäºŒï¼šé€šè¿‡ref æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨  this.refs.å¼•ç”¨åç§°</span></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;<span class=\"built_in\">this</span>.state.msg&#125; onChange=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.textChanged()&#125; ref=<span class=\"string\">&quot;txt&quot;</span> /&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">textChanged = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.refs.txt.value);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#6-ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"6. ç”Ÿå‘½å‘¨æœŸ\"></a>6. ç”Ÿå‘½å‘¨æœŸ</h2><ul>\n<li>ç”Ÿå‘½å‘¨æœŸä»‹ç»</li>\n</ul>\n<blockquote>\n<p>æ¯ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œä»åˆ›å»ºã€åˆ°è¿è¡Œã€ç›´åˆ°é”€æ¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å°±å«åšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</p>\n</blockquote>\n<ul>\n<li>React çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</li>\n</ul>\n<ol>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ol>\n<blockquote>\n<p>åªæ‰§è¡Œä¸€æ¬¡</p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>componentWillMount</code> =&gt; <code>æŒ‚è½½ä¹‹å‰</code></li>\n<li><code>render</code> =&gt; <code>æ­£åœ¨æ¸²æŸ“ï¼Œè™šæ‹ŸDOMåˆ›å»ºåˆ°äº†å†…å­˜ä¸­ï¼Œè¿˜æœªæŒ‚è½½åˆ°é¡µé¢ä¸Š</code></li>\n<li><code>componentDidMount</code> =&gt; <code>æŒ‚è½½ç»“æŸï¼Œéœ€è¦æ“ä½œDOMèŠ‚ç‚¹çš„åˆå§‹åŒ–æ“ä½œæ”¾åœ¨è¿™é‡Œ</code></li>\n</ol>\n</blockquote>\n<ol start=\"2\">\n<li>ç»„ä»¶è¿è¡Œé˜¶æ®µï¼š</li>\n</ol>\n<blockquote>\n<p>æ ¹æ® <code>props</code> å±æ€§æˆ–è€… <code>state</code> çŠ¶æ€çš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„æ‰§è¡Œ <code>0</code> åˆ° <code>å¤šæ¬¡</code></p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>props</code> æ”¹å˜ä¹‹å</li>\n<li><code>componentWillReceiveProps</code> =&gt; å½“ä¸€ä¸ªæŒ‚è½½çš„ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ <code>props</code> çš„æ—¶å€™è¢«è°ƒç”¨</li>\n<li><code>state</code> æ”¹å˜ä¹‹å</li>\n<li><code>shouldComponentUpdateï¼ˆnextprops, nextStateï¼‰</code> =&gt; å½“ç»„ä»¶åšå‡ºæ˜¯å¦è¦æ›´æ–° <code>DOM</code> çš„å†³å®šçš„æ—¶å€™è¢«è°ƒç”¨ï¼Œåœ¨æ”¹å˜çŠ¶æ€çš„æ—¶å€™å¯ä»¥é€‰æ‹©é€šè¿‡( <code>return true</code> )æˆ–è€…ä¸é€šè¿‡( <code>return false</code>)</li>\n<li><code>componentWillUpdate</code> =&gt; åœ¨æ›´æ–°å‘ç”Ÿä¹‹å‰è¢«è°ƒç”¨</li>\n<li><code>render</code> =&gt; æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢æ˜¯æ—§çš„</li>\n</ol>\n<p>7.<code>componentDidUpdate</code> =&gt; æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢å·²ç»å˜æˆäº†æœ€æ–°çš„</p>\n</blockquote>\n<ol start=\"3\">\n<li>ç»„ä»¶é”€æ¯é˜¶æ®µ</li>\n</ol>\n<blockquote>\n<p>åªæ‰§è¡Œä¸€æ¬¡</p>\n</blockquote>\n<blockquote>\n<p><code>componentWillUnmount</code> =&gt; ç»„ä»¶ç§»é™¤æˆ–è€…é”€æ¯çš„æ—¶å€™è¢«è°ƒç”¨</p>\n</blockquote>\n<h2 id=\"7-éªŒè¯æ•°æ®ç±»å‹\"><a href=\"#7-éªŒè¯æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"7. éªŒè¯æ•°æ®ç±»å‹\"></a>7. éªŒè¯æ•°æ®ç±»å‹</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ProtoTypes &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;prop-types&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®šä¹‰ç»„ä»¶éœ€è¦ä¼ å…¥çš„å‚æ•°</span></span><br><span class=\"line\">MyCompo.protoTypes = &#123;</span><br><span class=\"line\">  a: ProtoTypes.string.isRequired,</span><br><span class=\"line\">  b: ProtoTypes.string.isRequired,</span><br><span class=\"line\">  c: ProtoTypes.number.isRequired</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-flux\"><a href=\"#8-flux\" class=\"headerlink\" title=\"8. flux\"></a>8. flux</h2><h3 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h3><blockquote>\n<p>ä¼ ç»Ÿçš„ <code>MVC</code> å’Œ <code>MVVM</code> æ¶æ„è®¾è®¡æ¨¡å¼æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šå½“é¡¹ç›®è¶Šæ¥è¶Šå¤§ã€é€»è¾‘è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæ•°æ®æµåŠ¨å°±è¶Šæ˜¾å¾—æ··ä¹±ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>Flux</code> æ˜¯è‡´åŠ›äºè§£å†³æ•°æ®æœ‰åºä¼ è¾“é—®é¢˜çš„æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œæ¥è‡ª <code>Facebook</code>ã€‚<code>Flux</code> ä¸­æœ€å¤§çš„å“²å­¦ï¼šæ•°æ®æ˜¯ <code>å•å‘æµåŠ¨</code> çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://github.com/facebook/flux/tree/master/examples/flux-concepts\">å®˜æ–¹æ‰‹å†Œ</a></p>\n</blockquote>\n<blockquote>\n<p><code>Flux</code> ä¸­æœ€é‡è¦çš„å››ä¸ªæ¦‚å¿µï¼š<code>Dispatcher</code>ã€<code>Store</code>ã€<code>View</code>ã€<code>Action</code>ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703835856-e1263bac-124a-40da-ae3c-b45a4c8081ae.png#align=left&display=inline&height=393&margin=%5Bobject%20Object%5D&name=flux.png&originHeight=393&originWidth=1300&size=26132&status=done&style=none&width=1300\" alt=\"flux.png\"></p>\n<h3 id=\"åŸºæœ¬æ¦‚å¿µ\"><a href=\"#åŸºæœ¬æ¦‚å¿µ\" class=\"headerlink\" title=\"åŸºæœ¬æ¦‚å¿µ\"></a>åŸºæœ¬æ¦‚å¿µ</h3><ol>\n<li>æ¦‚è¿°<ul>\n<li><code>flux</code> æ˜¯ä¸€ä¸ªç®¡ç† <code>App</code> ä¸­æ•°æ®æµåŠ¨çš„æ¨¡å¼ã€‚</li>\n<li>æœ€å…³é”®çš„æ¦‚å¿µï¼š<code>æ•°æ®çš„æµåŠ¨æ˜¯å•å‘çš„</code>ã€‚</li>\n</ul>\n</li>\n<li>Dispatcher è°ƒåº¦è€…<ul>\n<li><code>Dispatcher</code> æ¥å— <code>action</code>ï¼Œå¹¶ä¸”è¦æŠŠè¿™äº› <code>action</code> åˆ†æ´¾ç»™å·²ç»æ³¨å†Œåˆ° <code>Dispatcher</code> çš„ <code>store</code> ä¸Š</li>\n<li>æ‰€æœ‰çš„ <code>store</code> éƒ½å°†æ¥æ”¶æ‰€æœ‰çš„ <code>action</code></li>\n<li>åœ¨æ¯ä¸ª <code>App</code> ä¸­ï¼Œåº”è¯¥ç¡®ä¿åªæœ‰ä¸€ä¸ª <code>Dispatcher</code> çš„å®ä¾‹</li>\n</ul>\n</li>\n<li>store ä»“åº“<ul>\n<li><code>store</code> æ˜¯åœ¨ <code>App</code> ä¸­æŒæœ‰æ•°æ®çš„ä»“åº“</li>\n<li>æ‰€æœ‰çš„ <code>store</code> è¦åœ¨ <code>App</code> çš„ <code>Dispatcher</code> ä¸Šæ³¨å†Œï¼Œç¡®ä¿å®ƒä»¬å¯ä»¥æ¥æ”¶ <code>action</code></li>\n<li><code>store</code> ä¸­çš„æ•°æ®åªèƒ½è¢« <code>action</code> æ”¹å˜ã€‚</li>\n<li><code>store</code> ä¸­ä¸èƒ½å¤Ÿæœ‰å…¬å…±çš„ <code>setter</code>ï¼Œåªèƒ½æœ‰ <code>getter</code></li>\n<li><code>store</code> å†³å®šäº†å®ƒä»¬æ„¿æ„å“åº”å“ªäº› <code>actions</code></li>\n<li>æ— è®ºä½•æ—¶ï¼Œ<code>store</code> ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ª <code>change</code> äº‹ä»¶</li>\n<li>åŒä¸€ä¸ª <code>App</code> ä¸­å¯èƒ½æœ‰å¾ˆå¤š <code>store</code></li>\n</ul>\n</li>\n<li>Action è¡Œä¸º<ul>\n<li><code>Action</code> å®šä¹‰äº† <code>App</code> å†…éƒ¨çš„ <code>API</code></li>\n<li>å®ƒä»¬æ•è·æ‰€æœ‰å¯èƒ½æ”¹å˜ <code>App</code> çš„é€”å¾„å’Œæ–¹æ³•</li>\n<li>å®ƒä»¬æ˜¯ç®€å•çš„<code>å¯¹è±¡</code>ï¼Œå¹¶ä¸”è¦æœ‰ <code>typeå±æ€§</code> å’Œ <code>å…¶ä»–çš„ä¸€äº›æ•°æ®å±æ€§</code></li>\n<li><code>Action</code> åº”è¯¥æœ‰ä¸€ä¸ªå…·æœ‰è¯­ä¹‰çš„ã€ç›´è§‚çš„è¡¨ç¤ºå®ƒæ˜¯åšä»€ä¹ˆçš„åå­—</li>\n<li>æ‰€æœ‰çš„<code>store</code>éƒ½å°†æ¥æ”¶åŒä¸€ä¸ª<code>action</code>ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ª <code>action</code>ï¼Œ<code>store</code> ä¼šçŸ¥é“å®ƒä»¬è¦æ¸…é™¤ã€æ›´æ–°å“ªäº›æ•°æ®</li>\n</ul>\n</li>\n<li>Views è§†å›¾<ul>\n<li><code>store</code> ä¸­çš„æ•°æ®è¢«å±•ç¤ºåœ¨äº†<code>view</code>ä¸Š</li>\n<li><code>View</code> å±‚å¯ä»¥ä½¿ç”¨ä»»ä½•æ¡†æ¶</li>\n<li>å½“ä¸€ä¸ªè§†å›¾æƒ³è¦è·å– <code>store</code> ä¸­çš„æ•°æ®ï¼Œå®ƒå¿…é¡» <code>subscribe è®¢é˜…</code> ä¸€ä¸‹è¯¥ <code>store</code> çš„<code>change</code> äº‹ä»¶</li>\n<li>å½“ <code>store</code> è§¦å‘äº† <code>change</code> äº‹ä»¶ï¼Œæ­¤æ—¶ <code>view</code> å°±èƒ½å¾—åˆ°æ–°çš„æ•°æ®å¹¶ä¸”é‡æ–°æ¸²æŸ“</li>\n<li>å¦‚æœä¸€ä¸ªç»„ä»¶è¦ä½¿ç”¨ <code>store</code>ï¼Œä½†æ˜¯æ²¡æœ‰è®¢é˜…è¿™ä¸ª <code>store</code>ï¼Œæ­¤æ—¶å°±ä¼šå‡ºé”™</li>\n<li><code>Action</code> æœ€å¸¸è§çš„äº§ç”ŸåŸå› æ˜¯ï¼šåœ¨ <code>App</code> ä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†ï¼Œå› ä¸ºç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œè€Œè¢«æ­¤<code>view</code> <code>dispatch</code>å‡ºæ¥äº†</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"redux\"><a href=\"#redux\" class=\"headerlink\" title=\"redux\"></a>redux</h3><ul>\n<li>ç®€ä»‹<ul>\n<li><a href=\"https://redux.js.org/\">å®˜ç½‘</a></li>\n<li>Redux å°±æ˜¯ Flux æ€æƒ³åœ¨ React ä¸­çš„å®ç°</li>\n<li>Redux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çŠ¶æ€çš„ Js app å®¹å™¨</li>\n<li><a href=\"https://github.com/reactjs/redux/tree/master/examples\"><code>é€šè¿‡ä¾‹å­æ¥å­¦ä¹ redux</code></a></li>\n</ul>\n</li>\n<li>Redux åˆ›å»ºçš„æ­¥éª¤<ul>\n<li>è®¾ç½®ä¸€ä¸ª <code>reducer</code>ï¼›</li>\n<li>åˆ›å»ºä¸€ä¸ª<code>store</code>ï¼Œ<code>Redux.createStore(reducer)</code></li>\n<li>åˆ›å»º <code>render</code> å‡½æ•°</li>\n<li>æ³¨å†Œ <code>render</code>ï¼Œ<code>store.subscribe(render)</code></li>\n<li>ç›‘å¬ï¼Œæ­¤æ—¶è¦è®°å¾— <code>store.dispatch(action)</code>ï¼Œä¸æ˜¯ç›´æ¥ä¿®æ”¹<code>store</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"React-Redux\"><a href=\"#React-Redux\" class=\"headerlink\" title=\"React-Redux\"></a>React-Redux</h3><ul>\n<li>ç®€ä»‹<ul>\n<li>å°† <code>react</code> å’Œ <code>redux</code> åˆå¹¶èµ·æ¥ï¼Œå¯ä»¥è®©ä»»ä½•ç»„ä»¶åœ¨ä»»ä½•åœ°æ–¹çœ‹è§ <code>store</code></li>\n<li><a href=\"https://github.com/reactjs/react-redux/tree/master/docs\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li><code>React-Redux</code> ç»™æˆ‘ä»¬æä¾›äº†ï¼š<code>Providerç»„ä»¶</code>ï¼Œ<code>connectå‡½æ•°</code></li>\n</ul>\n</li>\n<li>Provider ç»„ä»¶</li>\n</ul>\n<blockquote>\n<p>1ã€ä½¿ç”¨ <code>react-redux</code> æä¾›çš„ <code>Provider</code> ç»„ä»¶ä¼ é€’ <code>store</code> ä¸Šä¸‹æ–‡ä¹‹åï¼Œ<code>åŒ…è£¹åœ¨å…¶ä¸­çš„æ‰€æœ‰ç»„ä»¶</code> å…¨éƒ½å¯ä»¥è¯†åˆ«è¿™ä¸ªä¸Šä¸‹æ–‡</p>\n</blockquote>\n<blockquote>\n<p>2ã€åœ¨ <code>Provider</code> ç»„ä»¶å†…éƒ¨çš„è‡ªå®šä¹‰ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>connect()</code> å‡½æ•°ï¼Œä½†æ˜¯åœ¨å…¶å¤–éƒ¨çš„ä¸å¯ä½¿ç”¨</p>\n</blockquote>\n<ul>\n<li>connect å‡½æ•°</li>\n</ul>\n<blockquote>\n<p>1ã€å°† <code>Reactç»„ä»¶</code> å’Œ <code>Redux</code> çš„ <code>store</code> è¿›è¡Œè¿æ¥<br>2ã€<code>connect</code> æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ <code>API</code> èƒ½å¤Ÿé€‚åº”ç»å¤§å¤šæ•°å·¥ä½œ<br>3ã€å®ƒæ²¡æœ‰æ›´æ”¹ä½ ä¼ è¿›æ¥çš„ç±»ï¼Œåè€Œä¼šè¿”å›ä¸€ä¸ªå·²ç»è¿æ¥å¥½çš„æ–°ç±»<br>4ã€æä¾›äº†ä¸¤ä¸ªå‚æ•°ï¼š<code>mapStateToProps</code>, <code>mapDispatchToProps</code></p>\n</blockquote>\n<ul>\n<li>mapStateToProps</li>\n</ul>\n<blockquote>\n<p>1ã€å¦‚æœä¼ å…¥<code>mapStateToProps</code>ï¼Œæ­¤æ—¶è¿™ä¸ªç»„ä»¶å°†è®¢é˜… <code>Redux</code> ä¸­ <code>store</code> çš„æ›´æ–°ä¿¡æ¯ï¼›<br>2ã€è¿™æ„å‘³ç€æ— è®ºä»»ä½•æ—¶å€™ <code>store</code> è¢«æ›´æ”¹äº†ï¼Œ<code>mapStateToProps</code> å‡½æ•°éƒ½å°†ä¼šè¢«è°ƒç”¨ï¼Œ<code>mapStateToProps</code> çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ª <code>Object</code>ï¼›<br>3ã€è¿™ä¸ª <code>Object</code> å°†ä¸ç»„ä»¶çš„ <code>props</code> èåˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè¿”å›çš„ <code>Object</code> ä¸­çš„ <code>key</code> å°†è‡ªåŠ¨æˆä¸ºç»„ä»¶çš„ <code>props</code> ä¸­çš„æˆå‘˜<br>4ã€å¦‚æœä¸æƒ³è®¢é˜… <code>store</code> çš„æ›´æ–°ï¼Œæ­¤æ—¶å¯ä»¥ä¸ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œé‡‡ç”¨ <code>null</code> å ä½</p>\n</blockquote>\n<ul>\n<li>mapDispatchToProps</li>\n</ul>\n<blockquote>\n<p>å¦‚æœå‘ <code>connect</code> å‡½æ•°ä¸­ä¼ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ª <code>å‡½æ•°</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°†è·å¾—<code>dispatch</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥é€šè¿‡ <code>emit action</code>ï¼Œé—´æ¥çš„å¯¼è‡´ <code>state</code> çš„æ”¹å˜<br>å¯ä»¥ä½¿ç”¨ <code>bindActionCreators()</code> æ–¹æ³•è½»æ¾çš„å°† <code>Action creator</code>(è¿”å› <code>action</code> çš„å‡½æ•°)æ¥å£å’Œ <code>dispatch</code> è¿›è¡Œç»‘å®š</p>\n</blockquote>\n<ul>\n<li>ä¹¦å†™è§„åˆ™</li>\n</ul>\n<blockquote>\n<p>index.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; render &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./containers/App&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(reducer);</span><br><span class=\"line\">render(</span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>App.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> actions <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actions&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(props);</span><br><span class=\"line\">    <span class=\"comment\">// props: &#123; r: 0, g: 0, b: 0, actions: è®¸å¤šæ–¹æ³• &#125;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>è¿™æ˜¯Appç»„ä»¶<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    r: state.r,</span><br><span class=\"line\">    g: state.g,</span><br><span class=\"line\">    b: state.b</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    actions: bindActionCreators(actions, dispatch)</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapDispatchToProps)(App);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>reducer.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (state, action) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (state == <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    state = &#123; <span class=\"attr\">r</span>: <span class=\"number\">0</span>, <span class=\"attr\">g</span>: <span class=\"number\">0</span>, <span class=\"attr\">b</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (action.type == <span class=\"string\">&quot;ADD&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      r: state.r + <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>actions.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD = <span class=\"function\">() =&gt;</span> &#123; <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;ADD&quot;</span> &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç»„ä»¶å†…éƒ¨çš„-state-å’Œå…¨å±€çš„-state\"><a href=\"#ç»„ä»¶å†…éƒ¨çš„-state-å’Œå…¨å±€çš„-state\" class=\"headerlink\" title=\"ç»„ä»¶å†…éƒ¨çš„ state å’Œå…¨å±€çš„ state\"></a>ç»„ä»¶å†…éƒ¨çš„ state å’Œå…¨å±€çš„ state</h3><blockquote>\n<p>ç»„ä»¶çš„æ•°æ®ä¸‰å…„å¼Ÿï¼š<code>state</code>, <code>props</code>, <code>context</code> ä¸ç®¡æ˜¯è°å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå¼•å‘ <code>render()</code> æ‰§è¡Œï¼Œè§†å›¾ä¼šè¢«é‡ç»˜ã€‚ä½†æ˜¯ï¼Œæ„é€ å‡½æ•°ä¸ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥ä¸ç®¡åŸºäºä»€ä¹ˆç†ç”±ï¼Œéƒ½ä¸éœ€è¦å°†å…¨å±€çš„çŠ¶æ€ï¼Œç”¨è‡ªå·±ç»„ä»¶çš„ <code>state</code> æ¥æ”¶ï¼Œè€Œä»…éœ€è¦ç”¨<code>connect</code>è¿æ¥ä¸€ä¸‹å…¨å±€<code>store</code>ï¼Œç„¶åä½¿ç”¨<code>this.props.**</code>å³å¯ã€‚</p>\n</blockquote>\n<h3 id=\"reducer-æ¨¡å—åŒ–\"><a href=\"#reducer-æ¨¡å—åŒ–\" class=\"headerlink\" title=\"reducer æ¨¡å—åŒ–\"></a>reducer æ¨¡å—åŒ–</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> todoReducers <span class=\"keyword\">from</span> <span class=\"string\">&quot;./todoReducer.js&quot;</span>; <span class=\"comment\">// æ ‡å‡†reducer</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> combineReducers(&#123;</span><br><span class=\"line\">  todoReducers</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"redux-logger\"><a href=\"#redux-logger\" class=\"headerlink\" title=\"redux-logger\"></a>redux-logger</h3><blockquote>\n<p>æ‰“å° redux log</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createLogger &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux-logger&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers/index.js&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(reducer, applyMiddleware(createLogger()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"redux-thunk\"><a href=\"#redux-thunk\" class=\"headerlink\" title=\"redux-thunk\"></a>redux-thunk</h3><blockquote>\n<p>è§£å†³å¼‚æ­¥é—®é¢˜</p>\n</blockquote>\n<blockquote>\n<p><code>redux-thunk</code>å¸®åŠ©æˆ‘ä»¬åœ¨æ‰€æœ‰çš„ç»„ä»¶çš„ <code>props</code> ä¸­æ·»åŠ äº†ä¸€ä¸ª <code>dispatch</code> æ–¹æ³•ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å½“ç„¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸€å®šè¦è¢« <code>connect</code> å‡½æ•°è¿›è¡Œå¤„ç†</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ <code>thunk</code>ï¼Œåˆ™ <code>connect</code> å‡½æ•°ä¸èƒ½ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— æ³•è·å– <code>this.props.dispatch()</code></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å…¥å£æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;redux&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">&#x27;redux-thunk&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(reducer, applyMiddleware(thunk))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** ç»„ä»¶ä¸­ */</span></span><br><span class=\"line\"><span class=\"comment\">/** ç¬¬ä¸€ç§å†™æ³•ï¼Œå¹¶æ²¡æœ‰å°†actionsè¿›è¡ŒæŠ½ç¦» */</span></span><br><span class=\"line\">$.get(<span class=\"string\">&#x27;/shu.txt&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> number = <span class=\"built_in\">Number</span>(data);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.props.dispatch(&#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;ADD&quot;</span>,</span><br><span class=\"line\">        number</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">/** ç¬¬äºŒç§å†™æ³•:å¸¸ç”¨ */</span></span><br><span class=\"line\"><span class=\"comment\">// å¯æšä¸¾</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> actions <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./actions/actions.js&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> ** <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.props.dispatch(actions.add())</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.props.dispatch(actions.minus())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/** ç°åœ¨ï¼Œä¸€èˆ¬ä¸ä¼šå†å†™ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œå°±æ˜¯è¯´çœç•¥æ‰mapDispatchToProps */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(</span><br><span class=\"line\"> (state) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        state: state</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;)(**)</span><br><span class=\"line\"><span class=\"comment\">// actions.js</span></span><br><span class=\"line\"><span class=\"comment\">/* ç°åœ¨ï¼Œå¼‚æ­¥çš„Action Creatorä¸è¦ç›´æ¥è¿”å› Actionï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæºå¸¦ dispatch çš„å‡½æ•°ï¼›è¿™ä¸ªå‡½æ•°ç›¸å½“äºâ€œå»¶é•¿â€äº†dispatchçš„æŒç»­æ—¶é—´ã€‚*/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> add = <span class=\"function\">() =&gt;</span> <span class=\"function\">(<span class=\"params\">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(getState()) <span class=\"comment\">// getStateå¯ä»¥è·å–å…¨å±€æ•°æ®</span></span><br><span class=\"line\">    $.get(<span class=\"string\">&#x27;/shu.txt&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> number = <span class=\"built_in\">Number</span>(data);</span><br><span class=\"line\">        dispatch(&#123;<span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;MINUS&quot;</span>, number&#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> minus = <span class=\"function\">() =&gt;</span> &#123; <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;MINUS&quot;</span> &#125;</span><br><span class=\"line\"><span class=\"comment\">// reducer.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (state = <span class=\"number\">0</span>, action) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&quot;ADD&quot;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state + action.number</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&quot;MINUS&quot;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state - <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-react-router4-x\"><a href=\"#9-react-router4-x\" class=\"headerlink\" title=\"9. react-router4.x\"></a>9. react-router4.x</h2><h3 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h3><ul>\n<li><a href=\"https://reacttraining.com/react-router\">å®˜ç½‘</a></li>\n<li>å®‰è£…ï¼š<code>npm install react-router-dom</code></li>\n</ul>\n<h3 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h3><blockquote>\n<p><code>exact</code>è¡¨ç¤ºä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœè·¯å¾„ä¸º <code>path=&quot;/&quot;</code> çš„ <code>Route</code> ä¸è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨å‘ä¸‹åŒ¹é…è·¯ç”±ï¼Œå³éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter <span class=\"keyword\">as</span> Router, Route, Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Index</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Home<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">About</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>About<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Users</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Users<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRouter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Router&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;nav&gt;</span><br><span class=\"line\">          &lt;ul&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/about/&quot;</span>&gt;About&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/users/&quot;</span>&gt;Users&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/ul&gt;</span><br><span class=\"line\">        &lt;/nav&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/&quot;</span> exact component=&#123;Index&#125; /&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/about/&quot;</span> component=&#123;About&#125; /&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/users/&quot;</span> component=&#123;Users&#125; /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Router&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> AppRouter;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŠ¨æ€è·¯ç”±\"><a href=\"#åŠ¨æ€è·¯ç”±\" class=\"headerlink\" title=\"åŠ¨æ€è·¯ç”±\"></a>åŠ¨æ€è·¯ç”±</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js å®šä¹‰åŠ¨æ€è·¯ç”±</span></span><br><span class=\"line\">&lt;Route path=<span class=\"string\">&quot;/content/:aid&quot;</span>&gt;&lt;/Route&gt;</span><br><span class=\"line\"><span class=\"comment\">// news.js è·³è½¬</span></span><br><span class=\"line\">&lt;Link to=&#123;<span class=\"string\">`/content/<span class=\"subst\">$&#123;value.aid&#125;</span>`</span>&#125;&gt;&lt;/Link&gt;</span><br><span class=\"line\"><span class=\"comment\">// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Content</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> &#123; match &#125; = <span class=\"built_in\">this</span>.props</span><br><span class=\"line\">          <span class=\"comment\">// è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(match.params.aid)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"get-ä¼ å€¼\"><a href=\"#get-ä¼ å€¼\" class=\"headerlink\" title=\"get ä¼ å€¼\"></a>get ä¼ å€¼</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js å®šä¹‰åŠ¨æ€è·¯ç”±</span></span><br><span class=\"line\">&lt;Route path=<span class=\"string\">&quot;/content&quot;</span>&gt;&lt;/Route&gt;</span><br><span class=\"line\"><span class=\"comment\">// news.js è·³è½¬</span></span><br><span class=\"line\">&lt;Link to=&#123;<span class=\"string\">`/content?aid=<span class=\"subst\">$&#123;value.aid&#125;</span>`</span>&#125;&gt;&lt;/Link&gt;</span><br><span class=\"line\"><span class=\"comment\">// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Content</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> &#123; location &#125; = <span class=\"built_in\">this</span>.props</span><br><span class=\"line\">          <span class=\"comment\">// è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(location.search)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"js-æ§åˆ¶è·³è½¬\"><a href=\"#js-æ§åˆ¶è·³è½¬\" class=\"headerlink\" title=\"js æ§åˆ¶è·³è½¬\"></a>js æ§åˆ¶è·³è½¬</h3><ol>\n<li>å¼•å…¥ <code>Redirect</code> ç»„ä»¶</li>\n<li>å®šä¹‰ä¸€ä¸ª <code>flag</code></li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">  loginFlag: <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>åœ¨ <code>Render</code> ä¸­åˆ¤æ–­ <code>flag</code>ï¼Œä»è€Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œè·³è½¬</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.state.loginFlag) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Redirect</span> <span class=\"attr\">to</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">pathname:</span> &quot;/&quot; &#125;&#125; /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>æ‰§è¡Œ <code>js</code> è·³è½¬ï¼Œé€šè¿‡ <code>js</code> æ”¹å˜ <code>loginFlag</code> çš„çŠ¶æ€ï¼Œæ”¹å˜ä»¥åï¼Œå°±å¯ä»¥ä»æ–°çš„ <code>render</code> ä¸­é€šè¿‡ <code>Redirect</code> è‡ªå·±è¿›è¡Œè·³è½¬</li>\n</ol>\n<h3 id=\"æ¨¡å—åŒ–è·¯ç”±\"><a href=\"#æ¨¡å—åŒ–è·¯ç”±\" class=\"headerlink\" title=\"æ¨¡å—åŒ–è·¯ç”±\"></a>æ¨¡å—åŒ–è·¯ç”±</h3><blockquote>\n<p>router.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/Home/&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> About <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/About/&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> User <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/User/&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserList <span class=\"keyword\">from</span> <span class=\"string\">&quot;./User/UserList&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserInfo <span class=\"keyword\">from</span> <span class=\"string\">&quot;./User/UserInfo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> router = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    path: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">    component: Home,</span><br><span class=\"line\">    exact: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    path: <span class=\"string\">&quot;/about&quot;</span>,</span><br><span class=\"line\">    component: About</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    path: <span class=\"string\">&quot;/User&quot;</span>,</span><br><span class=\"line\">    component: User,</span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">      <span class=\"comment\">// åµŒå¥—è·¯ç”±è®¾ç½®</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        path: <span class=\"string\">&quot;/user/&quot;</span>,</span><br><span class=\"line\">        component: UserList</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        path: <span class=\"string\">&quot;/user/info&quot;</span>,</span><br><span class=\"line\">        component: UserInfo</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>App.js å…¥å£æ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter <span class=\"keyword\">as</span> Router, Route, Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&quot;./router.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;Router&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &#123;router.map(<span class=\"function\">(<span class=\"params\">route, key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (route.exact) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> (</span><br><span class=\"line\">                &lt;Route</span><br><span class=\"line\">                  exact</span><br><span class=\"line\">                  key=&#123;key&#125;</span><br><span class=\"line\">                  path=&#123;route.path&#125;</span><br><span class=\"line\">                  render=&#123;<span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">                    <span class=\"comment\">// å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±</span></span><br><span class=\"line\">                    &lt;route.component &#123;...props&#125; routes=&#123;route.routes&#125; /&gt;</span><br><span class=\"line\">                  )&#125;</span><br><span class=\"line\">                /&gt;</span><br><span class=\"line\">              );</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> (</span><br><span class=\"line\">                &lt;Route</span><br><span class=\"line\">                  key=&#123;key&#125;</span><br><span class=\"line\">                  path=&#123;route.path&#125;</span><br><span class=\"line\">                  render=&#123;<span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">                    <span class=\"comment\">// å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±</span></span><br><span class=\"line\">                    &lt;route.component &#123;...props&#125; routes=&#123;route.routes&#125; /&gt;</span><br><span class=\"line\">                  )&#125;</span><br><span class=\"line\">                /&gt;</span><br><span class=\"line\">              );</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;)&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/Router&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>User.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Route, Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentWillMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.props.routes);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;contenr&quot;</span>&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;left&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;right&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"built_in\">this</span>.props.routes.map(<span class=\"function\">(<span class=\"params\">route, key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">exact</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;key&#125;</span> <span class=\"attr\">path</span>=<span class=\"string\">&#123;route.path&#125;</span> <span class=\"attr\">component</span>=<span class=\"string\">&#123;route.component&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">            &#125;)&#125;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> User;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¸¸ç”¨è·¯ç”±ç»„ä»¶\"><a href=\"#å¸¸ç”¨è·¯ç”±ç»„ä»¶\" class=\"headerlink\" title=\"å¸¸ç”¨è·¯ç”±ç»„ä»¶\"></a>å¸¸ç”¨è·¯ç”±ç»„ä»¶</h3><ul>\n<li>_BrowserRouter_ï¼šä½¿ç”¨ <code>HTML5</code> å†å²è®°å½• <code>API</code> (<code>pushState</code>ï¼Œ<code>replaceState</code> å’Œ<code>popstate</code> äº‹ä»¶)çš„ <code>&lt;Router&gt;</code> æ¥ä¿æŒ <code>UI</code> ä¸ <code>URL</code> çš„åŒæ­¥</li>\n<li>_HashRouter_ï¼šä½¿ç”¨ <code>URL</code> çš„å“ˆå¸Œéƒ¨åˆ†(å³ <code>window.location.hash</code> )çš„&lt;è·¯ç”±å™¨&gt;å¯ä»¥ä¿æŒæ‚¨çš„ <code>UI</code> ä¸ <code>URL</code> åŒæ­¥ã€‚æ³¨æ„ï¼šå“ˆå¸Œå†å²è®°å½•ä¸æ”¯æŒ <code>location.key</code> æˆ– <code>location.state</code>ã€‚ åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾ç¼“å’Œè¡Œä¸ºï¼Œä½†æ˜¯æœ‰ä¸€äº›è¾¹ç¼˜æ¡ˆä¾‹æˆ‘ä»¬æ— æ³•è§£å†³ã€‚ ä»»ä½•éœ€è¦æ­¤è¡Œä¸ºçš„ä»£ç æˆ–æ’ä»¶å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ ç”±äºæ­¤æŠ€æœ¯ä»…ç”¨äºæ”¯æŒæ—§ç‰ˆæµè§ˆå™¨ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®æ‚¨å°†æœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨<code>&lt;BrowserHistory&gt;</code></li>\n<li>_Link_ï¼šæ¸²æŸ“æˆ <code>a</code> æ ‡ç­¾</li>\n<li>_NavLink_ï¼šä¸€ç§ç‰¹æ®Šç‰ˆæœ¬çš„ <code>&lt;Link&gt;</code>ï¼Œå½“ä¸å½“å‰ <code>URL</code> åŒ¹é…æ—¶ï¼Œå°†å‘æ¸²æŸ“å…ƒç´ æ·»åŠ æ ·å¼å±æ€§ã€‚</li>\n<li>_Redirect_ï¼šé‡å®šå‘</li>\n<li>_Route_ï¼šåœ¨ä½ç½®ä¸è·¯çº¿çš„è·¯å¾„åŒ¹é…æ—¶å‘ˆç°ä¸€äº› <code>UI</code>ã€‚</li>\n<li>_Switch_ï¼šåªæ¸²æŸ“å‘½ä¸­çš„ç¬¬ä¸€ä¸ª <code>&lt;Route&gt;</code> æˆ– <code>&lt;Redirect&gt;</code> ã€‚</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Switchçš„ç”¨æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Switch, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router&quot;</span>;</span><br><span class=\"line\">&lt;Switch&gt;</span><br><span class=\"line\">  &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span> component=&#123;Home&#125; /&gt;</span><br><span class=\"line\">  &lt;Route path=<span class=\"string\">&quot;/about&quot;</span> component=&#123;About&#125; /&gt;</span><br><span class=\"line\">  &lt;Route path=<span class=\"string\">&quot;/:user&quot;</span> component=&#123;User&#125; /&gt;</span><br><span class=\"line\">  &lt;Route component=&#123;NoMatch&#125; /&gt;</span><br><span class=\"line\">&lt;/Switch&gt;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-context\"><a href=\"#10-context\" class=\"headerlink\" title=\"10. context\"></a>10. context</h2><ul>\n<li>ä»‹ç»</li>\n</ul>\n<blockquote>\n<p>åœ¨ä¸€ä¸ªå…¸å‹çš„ <code>React</code> åº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯é€šè¿‡ <code>props</code> å±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶åŠå­ï¼‰è¿›è¡Œä¼ é€’çš„ï¼Œä½†è¿™ç§åšæ³•å¯¹äºæŸäº›ç±»å‹çš„å±æ€§è€Œè¨€æ˜¯æå…¶ç¹ççš„ï¼ˆä¾‹å¦‚ï¼šåœ°åŒºåå¥½ï¼Œ<code>UI</code> ä¸»é¢˜ï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚<code>Context</code> æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ <code>props</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¹ççš„ <code>props</code> æ–¹å¼</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Toolbar</span> <span class=\"attr\">theme</span>=<span class=\"string\">&quot;dark&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Toolbar</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ThemeButton theme=&#123;props.theme&#125; /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThemeButton</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    &lt;Button theme=&#123;<span class=\"built_in\">this</span>.props.theme&#125;&gt;æŒ‰é’®&lt;/Button&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>context</code></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œlightâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ThemeContext = React.createContext(<span class=\"string\">&quot;light&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚</span></span><br><span class=\"line\">    <span class=\"comment\">// æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚</span></span><br><span class=\"line\">    <span class=\"comment\">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† â€œdarkâ€ ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;ThemeContext.Provider value=<span class=\"string\">&quot;dark&quot;</span>&gt;</span><br><span class=\"line\">        &lt;Toolbar /&gt;</span><br><span class=\"line\">      &lt;/ThemeContext.Provider&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ToolBar</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ThemeButton /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThemeButton</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚</span></span><br><span class=\"line\">  <span class=\"comment\">// React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚</span></span><br><span class=\"line\">  <span class=\"comment\">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdarkâ€ã€‚</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> contextType = ThemeContext;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">theme</span>=<span class=\"string\">&#123;this.context&#125;</span>&gt;</span>æŒ‰é’®<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-react-hooks\"><a href=\"#11-react-hooks\" class=\"headerlink\" title=\"11. react-hooks\"></a>11. react-hooks</h2><blockquote>\n<p><code>Hook</code> æ˜¯ <code>React 16.8</code> çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ <code>class</code> çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>state</code> ä»¥åŠå…¶ä»–çš„ <code>React</code> ç‰¹æ€§ã€‚</p>\n</blockquote>\n<h3 id=\"11-1-State-Hook\"><a href=\"#11-1-State-Hook\" class=\"headerlink\" title=\"11.1 State Hook\"></a>11.1 State Hook</h3><blockquote>\n<p><code>useState</code> å°±æ˜¯ä¸€ä¸ª <code>Hook</code>ï¼Œç±»ä¼¼ <code>class</code> ç»„ä»¶çš„ <code>this.setState</code>ï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ <code>state</code> å’Œæ—§çš„ <code>state</code> è¿›è¡Œåˆå¹¶ã€‚<code>useState</code> ä¼šè¿”å›ä¸€å¯¹å€¼ï¼š<em>å½“å‰çŠ¶æ€</em> å’Œä¸€ä¸ªè®©ä½  _æ›´æ–°å®ƒçš„å‡½æ•°_ï¼Œä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>\n</blockquote>\n<ul>\n<li>è®¡æ•°å™¨</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å£°æ˜ä¸€ä¸ªå« â€œcountâ€ çš„ state å˜é‡ã€‚</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç­‰ä»·çš„ class ç¤ºä¾‹</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      count: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;p&gt;You clicked &#123;<span class=\"built_in\">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class=\"line\">        &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.setState(&#123; <span class=\"attr\">count</span>: <span class=\"built_in\">this</span>.state.count + <span class=\"number\">1</span> &#125;)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å£°æ˜å¤šä¸ª <code>state</code> å˜é‡</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ExampleWithManyStates</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å£°æ˜å¤šä¸ª state å˜é‡ï¼</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [age, setAge] = useState(<span class=\"number\">42</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fruit, setFruit] = useState(<span class=\"string\">&quot;banana&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [todos, setTodos] = useState([&#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;Learn Hooks&quot;</span> &#125;]);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä»€ä¹ˆæ˜¯ <code>Hook</code></li>\n</ul>\n<blockquote>\n<p><code>Hook</code> æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ <code>React state</code> åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚<code>Hook</code> ä¸èƒ½åœ¨ <code>class</code> ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ <code>class</code> ä¹Ÿèƒ½ä½¿ç”¨ <code>React</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>æƒ°æ€§ state</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [state, setState] = useState(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> initialState = someExpensiveComputation(props);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> initialState;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-2-Effect-Hook\"><a href=\"#11-2-Effect-Hook\" class=\"headerlink\" title=\"11.2 Effect Hook\"></a>11.2 Effect Hook</h3><blockquote>\n<p><code>Effect Hook</code> å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</p>\n</blockquote>\n<h4 id=\"1-æ— éœ€æ¸…é™¤çš„-Effect\"><a href=\"#1-æ— éœ€æ¸…é™¤çš„-Effect\" class=\"headerlink\" title=\"(1) æ— éœ€æ¸…é™¤çš„ Effect\"></a>(1) æ— éœ€æ¸…é™¤çš„ <code>Effect</code></h4><blockquote>\n<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³åœ¨ <code>React</code> æ›´æ–° <code>DOM</code> ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ <code>DOM</code>ï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨ <code>class</code> çš„ç¤ºä¾‹</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      count: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.state.count&#125;</span> times`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.state.count&#125;</span> times`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;p&gt;You clicked &#123;<span class=\"built_in\">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class=\"line\">        &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.setState(&#123; <span class=\"attr\">count</span>: <span class=\"built_in\">this</span>.state.count + <span class=\"number\">1</span> &#125;)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>Hook</code> çš„ç¤ºä¾‹</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;count&#125;</span> times`</span>;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>useEffect</code> åšäº†ä»€ä¹ˆï¼Ÿ é€šè¿‡ä½¿ç”¨è¿™ä¸ª <code>Hook</code>ï¼Œä½ å¯ä»¥å‘Šè¯‰ <code>React</code> ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œã€‚<code>React</code> ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œ<code>effect</code>â€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ <code>DOM</code> æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚åœ¨è¿™ä¸ª <code>effect</code> ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† <code>document</code> çš„ <code>title</code> å±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œæ•°æ®è·å–æˆ–è°ƒç”¨å…¶ä»–å‘½ä»¤å¼çš„ APIã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ <code>useEffect</code>ï¼Ÿ å°† <code>useEffect</code> æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ <code>effect</code> ä¸­ç›´æ¥è®¿é—® <code>count</code> <code>state</code> å˜é‡ï¼ˆæˆ–å…¶ä»– <code>props</code>ï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ <code>API</code> æ¥è¯»å–å®ƒ â€”â€” å®ƒå·²ç»ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚<code>Hook</code> ä½¿ç”¨äº† <code>JavaScript</code> çš„é—­åŒ…æœºåˆ¶ï¼Œè€Œä¸ç”¨åœ¨ <code>JavaScript</code> å·²ç»æä¾›äº†è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿˜å¼•å…¥ç‰¹å®šçš„ React APIã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>useEffect</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼Ÿ æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ï¼ˆæˆ‘ä»¬ç¨åä¼šè°ˆåˆ°å¦‚ä½•æ§åˆ¶å®ƒã€‚ï¼‰ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“æ¥å— <code>effect</code> å‘ç”Ÿåœ¨â€œæ¸²æŸ“ä¹‹åâ€è¿™ç§æ¦‚å¿µï¼Œä¸ç”¨å†å»è€ƒè™‘â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚<code>React</code> ä¿è¯äº†æ¯æ¬¡è¿è¡Œ <code>effect</code> çš„åŒæ—¶ï¼Œ<code>DOM</code> éƒ½å·²ç»æ›´æ–°å®Œæ¯•ã€‚</p>\n</blockquote>\n<div class=\"tag-plugin note\"><div class=\"title\"><strong>warning,</strong></div><div class=\"body\"><p>ä¸ <code>componentDidMount</code> æˆ– <code>componentDidUpdate</code> ä¸åŒï¼Œä½¿ç”¨ <code>useEffect</code> è°ƒåº¦çš„ <code>effect</code> ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>effect</code> ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ <code>useLayoutEffect Hook</code> ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ <code>API</code> ä¸ <code>useEffect</code> ç›¸åŒã€‚</p></div></div>\n\n<h4 id=\"2-éœ€è¦æ¸…é™¤çš„-Effect\"><a href=\"#2-éœ€è¦æ¸…é™¤çš„-Effect\" class=\"headerlink\" title=\"(2) éœ€è¦æ¸…é™¤çš„ Effect\"></a>(2) éœ€è¦æ¸…é™¤çš„ <code>Effect</code></h4><blockquote>\n<p>ä¹‹å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ä¸éœ€è¦æ¸…é™¤çš„å‰¯ä½œç”¨ï¼Œè¿˜æœ‰ä¸€äº›å‰¯ä½œç”¨æ˜¯éœ€è¦æ¸…é™¤çš„ã€‚ä¾‹å¦‚è®¢é˜…å¤–éƒ¨æ•°æ®æºã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸…é™¤å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼ç°åœ¨è®©æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹å¦‚ä½•ç”¨ <code>Class</code> å’Œ <code>Hook</code> æ¥å®ç°ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨ <code>class</code> çš„ç¤ºä¾‹</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FriendStatus</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123; <span class=\"attr\">isOnline</span>: <span class=\"literal\">null</span> &#125;;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleStatusChange = <span class=\"built_in\">this</span>.handleStatusChange.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(<span class=\"built_in\">this</span>.props.friend.id, <span class=\"built_in\">this</span>.handleStatusChange);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentWillUnmount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    ChatAPI.unsubscribeFromFriendStatus(<span class=\"built_in\">this</span>.props.friend.id, <span class=\"built_in\">this</span>.handleStatusChange);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleStatusChange</span>(<span class=\"params\">status</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      isOnline: status.isOnline</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.state.isOnline === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;Loading...&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.state.isOnline ? <span class=\"string\">&quot;Online&quot;</span> : <span class=\"string\">&quot;Offline&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>Hook</code> çš„ç¤ºä¾‹</li>\n</ul>\n<div class=\"tag-plugin note\"><div class=\"title\"><strong>warning,</strong></div><div class=\"body\"><p>çœ¼å°–çš„è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªç¤ºä¾‹è¿˜éœ€è¦ç¼–å†™ componentDidUpdate æ–¹æ³•æ‰èƒ½ä¿è¯å®Œå…¨æ­£ç¡®ã€‚æˆ‘ä»¬å…ˆæš‚æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œæœ¬ç« èŠ‚ä¸­åç»­éƒ¨åˆ†ä¼šä»‹ç»å®ƒã€‚</p></div></div>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FriendStatus</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isOnline, setIsOnline] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleStatusChange</span>(<span class=\"params\">status</span>) </span>&#123;</span><br><span class=\"line\">      setIsOnline(status.isOnline);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class=\"line\">    <span class=\"comment\">// Specify how to clean up after this effect:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cleanup</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isOnline === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Loading...&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isOnline ? <span class=\"string\">&quot;Online&quot;</span> : <span class=\"string\">&quot;Offline&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºä»€ä¹ˆè¦åœ¨ <code>effect</code> ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Ÿ è¿™æ˜¯ <code>effect</code> å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª <code>effect</code> éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚å®ƒä»¬éƒ½å±äº <code>effect</code> çš„ä¸€éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>React</code> ä½•æ—¶æ¸…é™¤ <code>effect</code>ï¼Ÿ <code>React</code> ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚æ­£å¦‚ä¹‹å‰å­¦åˆ°çš„ï¼Œ<code>effect</code> åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>React</code> ä¼šåœ¨æ‰§è¡Œå½“å‰ <code>effect</code> ä¹‹å‰å¯¹ä¸Šä¸€ä¸ª <code>effect</code> è¿›è¡Œæ¸…é™¤ã€‚æˆ‘ä»¬ç¨åå°†è®¨è®ºä¸ºä»€ä¹ˆè¿™å°†åŠ©äºé¿å… <code>bug</code> ä»¥åŠå¦‚ä½•åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶è·³è¿‡æ­¤è¡Œä¸ºã€‚</p>\n</blockquote>\n<div class=\"tag-plugin note\"><div class=\"title\"><strong>warning,</strong></div><div class=\"body\"><p>å¹¶ä¸æ˜¯å¿…é¡»ä¸º <code>effect</code> ä¸­è¿”å›çš„å‡½æ•°å‘½åã€‚è¿™é‡Œæˆ‘ä»¬å°†å…¶å‘½åä¸º <code>cleanup</code> æ˜¯ä¸ºäº†è¡¨æ˜æ­¤å‡½æ•°çš„ç›®çš„ï¼Œä½†å…¶å®ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°æˆ–è€…ç»™èµ·ä¸€ä¸ªåˆ«çš„åå­—ã€‚</p></div></div>\n\n<h3 id=\"11-3-Hook-è§„åˆ™\"><a href=\"#11-3-Hook-è§„åˆ™\" class=\"headerlink\" title=\"11.3 Hook è§„åˆ™\"></a>11.3 Hook è§„åˆ™</h3><h4 id=\"1-åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook\"><a href=\"#1-åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook\" class=\"headerlink\" title=\"(1) åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook\"></a>(1) åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ <code>Hook</code></h4><blockquote>\n<p>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ <code>Hook</code>ï¼Œ ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ <code>React</code> å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ <code>Hook</code> åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© <code>React</code> èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ <code>useState</code> å’Œ <code>useEffect</code> è°ƒç”¨ä¹‹é—´ä¿æŒ <code>hook</code> çŠ¶æ€çš„æ­£ç¡®ã€‚</p>\n</blockquote>\n<h4 id=\"2-åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook\"><a href=\"#2-åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook\" class=\"headerlink\" title=\"(2) åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook\"></a>(2) åªåœ¨ <code>React</code> å‡½æ•°ä¸­è°ƒç”¨ <code>Hook</code></h4><blockquote>\n<p>ä¸è¦åœ¨æ™®é€šçš„ <code>JavaScript</code> å‡½æ•°ä¸­è°ƒç”¨ <code>Hook</code>ã€‚ä½ å¯ä»¥ï¼š</p>\n</blockquote>\n<ul>\n<li>âœ… åœ¨ <code>React</code> çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ <code>Hook</code></li>\n<li>âœ… åœ¨è‡ªå®šä¹‰ <code>Hook</code> ä¸­è°ƒç”¨å…¶ä»– <code>Hook</code></li>\n</ul>\n<h3 id=\"11-4-è‡ªå®šä¹‰-Hook\"><a href=\"#11-4-è‡ªå®šä¹‰-Hook\" class=\"headerlink\" title=\"11.4 è‡ªå®šä¹‰ Hook\"></a>11.4 è‡ªå®šä¹‰ Hook</h3><blockquote>\n<p>é€šè¿‡è‡ªå®šä¹‰ <code>Hook</code>ï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚</p>\n</blockquote>\n<h4 id=\"1-æå–è‡ªå®šä¹‰-Hook\"><a href=\"#1-æå–è‡ªå®šä¹‰-Hook\" class=\"headerlink\" title=\"(1) æå–è‡ªå®šä¹‰ Hook\"></a>(1) æå–è‡ªå®šä¹‰ <code>Hook</code></h4><blockquote>\n<p>å½“æˆ‘ä»¬æƒ³åœ¨ä¸¤ä¸ªå‡½æ•°ä¹‹é—´å…±äº«é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæå–åˆ°ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸­ã€‚è€Œç»„ä»¶å’Œ <code>Hook</code> éƒ½æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹ŸåŒæ ·é€‚ç”¨è¿™ç§æ–¹å¼ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è‡ªå®šä¹‰ <code>Hook</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œ<code>use</code>â€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ <code>Hook</code>ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>useFriendStatus</code> æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>Hook</code>:</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useFriendStatus</span>(<span class=\"params\">friendID</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isOnline, setIsOnline] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleStatusChange</span>(<span class=\"params\">status</span>) </span>&#123;</span><br><span class=\"line\">      setIsOnline(status.isOnline);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> isOnline;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-ä½¿ç”¨è‡ªå®šä¹‰-Hook\"><a href=\"#2-ä½¿ç”¨è‡ªå®šä¹‰-Hook\" class=\"headerlink\" title=\"(2) ä½¿ç”¨è‡ªå®šä¹‰ Hook\"></a>(2) ä½¿ç”¨è‡ªå®šä¹‰ <code>Hook</code></h4><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FriendStatus</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isOnline === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Loading...&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isOnline ? <span class=\"string\">&quot;Online&quot;</span> : <span class=\"string\">&quot;Offline&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FriendListItem</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">color:</span> <span class=\"attr\">isOnline</span> ? &quot;<span class=\"attr\">green</span>&quot; <span class=\"attr\">:</span> &quot;<span class=\"attr\">black</span>&quot; &#125;&#125;&gt;</span>&#123;props.friend.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-5-Hook-API-ç´¢å¼•\"><a href=\"#11-5-Hook-API-ç´¢å¼•\" class=\"headerlink\" title=\"11.5 Hook API ç´¢å¼•\"></a>11.5 Hook API ç´¢å¼•</h3><blockquote>\n<p>å‚è§ <a href=\"https://react.docschina.org/docs/hooks-reference.html\">Hook API</a></p>\n</blockquote>\n<h4 id=\"11-5-1-åŸºç¡€-Hook\"><a href=\"#11-5-1-åŸºç¡€-Hook\" class=\"headerlink\" title=\"11.5.1 åŸºç¡€ Hook\"></a>11.5.1 åŸºç¡€ Hook</h4><h5 id=\"useState\"><a href=\"#useState\" class=\"headerlink\" title=\"useState\"></a>useState</h5><blockquote>\n<p><a href=\"#linkUseState\">ç‚¹å‡»è·³è½¬</a></p>\n</blockquote>\n<h5 id=\"useEffect\"><a href=\"#useEffect\" class=\"headerlink\" title=\"useEffect\"></a>useEffect</h5><blockquote>\n<p><a href=\"#linkUseEffect\">ç‚¹å‡»è·³è½¬</a></p>\n</blockquote>\n<h5 id=\"useContext\"><a href=\"#useContext\" class=\"headerlink\" title=\"useContext\"></a>useContext</h5><blockquote>\n<p>è®¢é˜… <code>context</code> çš„å˜åŒ–ï¼Œæ„Ÿè§‰å°±æ˜¯å¯¹äºè·å– <code>context</code> çš„å€¼æ¢äº†ä¸€ç§å†™æ³•è€Œå·²ã€‚ç›¸å¯¹äºä¹‹å‰çš„å†™æ³•ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ  <code>context</code> æ›´åŠ ç®€å•ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> context = React.createContext(&#123;&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Provider, Consumer  &#125; = context;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// hooksçš„å†™æ³•</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;Provider value=&#123;&#123; <span class=\"attr\">name</span>: <span class=\"string\">&#x27;li&#x27;</span> &#125;&#125;&gt;</span><br><span class=\"line\">            &lt;Hello/&gt;</span><br><span class=\"line\">        &lt;/Provider&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = useContext(context);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>value: &#123;value.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŸæœ¬çš„å†™æ³•</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span> (<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">&#123;name&#125;</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>value: &#123;value.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;Consumer&gt;</span><br><span class=\"line\">        &#123;render&#125;</span><br><span class=\"line\">      &lt;/Consumer&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-5-2-é¢å¤–çš„-Hook\"><a href=\"#11-5-2-é¢å¤–çš„-Hook\" class=\"headerlink\" title=\"11.5.2 é¢å¤–çš„ Hook\"></a>11.5.2 é¢å¤–çš„ Hook</h4><h5 id=\"useReducer\"><a href=\"#useReducer\" class=\"headerlink\" title=\"useReducer\"></a>useReducer</h5><blockquote>\n<p>ç±»ä¼¼äº <code>redux</code> é‚£æ ·çš„çŠ¶æ€æ›´æ–°æ–¹æ¡ˆã€‚ä½¿ç”¨åœºæ™¯ï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯ <code>redux</code> çš„åº”ç”¨åœºæ™¯ï¼‰ï¼Œç®¡ç†çš„çŠ¶æ€å€¼æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”é”®å€¼è¾ƒå¤šã€‚<code>state</code> æ¯ä¸ª <code>key</code> ä¿®æ”¹çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å•ç‹¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ç®¡ç†ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123; <span class=\"attr\">count</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;increment&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">count</span>: state.count + <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;decrement&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">count</span>: state.count - <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Counter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initialState);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      Count: &#123;state.count&#125;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;increment&quot;</span> &#125;)&#125;&gt;+&lt;/button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;decrement&quot;</span> &#125;)&#125;&gt;-&lt;/button&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useCallback\"><a href=\"#useCallback\" class=\"headerlink\" title=\"useCallback\"></a>useCallback</h5><blockquote>\n<p>ä»…åœ¨æŒ‡å®šçš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå‡½æ•°ä½“å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> memoizedCallback = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  doSomething(a, b);</span><br><span class=\"line\">&#125;, [a, b]);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™æ ·ä½¿ç”¨çš„å¥½å¤„ï¼šä¸ä¼šåœ¨æ¯æ¬¡ç»„ä»¶ <code>render</code> çš„æ—¶å€™ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼ŒèŠ‚çœå¼€é”€ã€‚ä¾‹å¦‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cacheCallback = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    doSomething(a, b);</span><br><span class=\"line\">  &#125;, [a, b]);</span><br><span class=\"line\">  <span class=\"comment\">// å’Œä¸‹é¢è¿™æ ·çš„å½¢å¼ç›¸æ¯”, æ¯æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ª doSometing å‡½æ•°</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doSometing</span>(<span class=\"params\">a, b</span>) </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥ä¿æŒå‡½æ•°çš„å¼•ç”¨ä¿æŒä¸å˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ç±»ç»„ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡ <code>this.method</code> çš„æ–¹å¼ç»‘å®šçš„ï¼Œè¿™æ ·åšçš„æ–¹å¼æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯¹æ–¹æ³•çš„å¼•ç”¨ä¸€ç›´ä¿æŒä¸å˜ã€‚ é‚£ä¹ˆåœ¨å‡½æ•°ç»„ä»¶å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>useCallback</code> æ¥å®ç°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯ä»¥å®ç°åœ¨å­ç»„ä»¶æŠŠè¯¥å›è°ƒä½œä¸ºä¾èµ–å¤„ç†ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\">&#123; a, b &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cacheCallback = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    doSometing(a, b);</span><br><span class=\"line\">  &#125;, [a, b]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Child</span> <span class=\"attr\">handler</span>=<span class=\"string\">&#123;cacheCallback&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">&#123; handler &#125;</span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handler();</span><br><span class=\"line\">  &#125;, [handler]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useMemo\"><a href=\"#useMemo\" class=\"headerlink\" title=\"useMemo\"></a>useMemo</h5><blockquote>\n<p>ç±»ä¼¼äº <code>vue</code> çš„ <code>computed</code>ï¼Œåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–çš„æ—¶å€™é‡æ–°è®¡ç®—ç¼“å­˜å€¼ã€‚å…¶å®è‡ªå·±å®ç°èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå’Œ <code>vue</code> çš„è®¡ç®—å±æ€§ä¸åŒçš„æ˜¯ï¼Œ<code>vue</code> çš„è®¡ç®—å±æ€§æ˜¯è‡ªåŠ¨æ”¶é›†ä¾èµ–çš„ï¼Œè€Œä½¿ç”¨ <code>useMeno</code> éœ€è¦æ‰‹åŠ¨åœ¨æ•°ç»„ç§ä¼ å…¥ä¾èµ–é¡¹ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> memoizedValue = useMemo(<span class=\"function\">() =&gt;</span> computeExpensiveValue(a, b), [a, b]);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code></p>\n</blockquote>\n<h5 id=\"useRef\"><a href=\"#useRef\" class=\"headerlink\" title=\"useRef\"></a>useRef</h5><blockquote>\n<p>æ•…åæ€ä¹‰ï¼Œè¯¥ <code>hook</code> ä¸»è¦æ˜¯ç”¨æ¥è·å–ç»„ä»¶å®ä¾‹æˆ–è€…æˆ–è€… <code>dom</code> èŠ‚ç‚¹ã€‚ ä½†æ˜¯å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹ï¼Œæ˜¯å¯ä»¥è¿”å›ä¸€ä¸ªåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå¼•ç”¨ä¸å˜çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> elRef = uesRef(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;elRef&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”¨æ¥å­˜å‚¨æ•°æ®çš„è¯ï¼Œè€ƒè™‘ä¸‹é¢çš„åœºæ™¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> handler = <span class=\"function\">() =&gt;</span> &#123;&#125;; <span class=\"comment\">// äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸ä½¿ç”¨ useRef, å¯ä»¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨æ•°æ®</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, handler);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> moveScroll = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">&quot;scorll&quot;</span>, handler);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div onClick=&#123;moveScroll&#125; ref=&#123;elRef&#125;&gt;</span><br><span class=\"line\">      ç§»é™¤scrollç›‘å¬</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨useRefçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ å†…èšã€‚ä½†æ˜¯å‰ææ˜¯å¿…é¡»è¦ç†è§£useRefè¿™ä¸ªhooksã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handler = useRef(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  handler.current = <span class=\"function\">() =&gt;</span> &#123;&#125;; <span class=\"comment\">// äº‹ä»¶å¤„ç†</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, handler.current);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> moveScroll = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">&quot;scorll&quot;</span>, handler.current);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div onClick=&#123;moveScroll&#125; ref=&#123;elRef&#125;&gt;</span><br><span class=\"line\">      ç§»é™¤scrollç›‘å¬</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useImperativeHandle\"><a href=\"#useImperativeHandle\" class=\"headerlink\" title=\"useImperativeHandle\"></a>useImperativeHandle</h5><blockquote>\n<p><code>useImperativeHandle</code> å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ <code>ref</code> æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Fancy = React.forwardRef(<span class=\"function\">(<span class=\"params\">props, ref</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;text&quot;</span> ref=&#123;ref&#125; /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ref = useRef(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;current&quot;</span>, ref); <span class=\"comment\">// &#123; current: Input &#125;</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Fancy</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useLayoutEffect\"><a href=\"#useLayoutEffect\" class=\"headerlink\" title=\"useLayoutEffect\"></a>useLayoutEffect</h5><blockquote>\n<p>å‡½æ•°ç­¾åå’Œ <code>useEffect</code> æ˜¯ä¸€æ ·çš„ï¼Œ å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– <code>DOM</code> å¸ƒå±€å¹¶ <code>åŒæ­¥</code> è§¦å‘é‡æ¸²æŸ“ã€‚</p>\n</blockquote>\n<h5 id=\"useDebugValue\"><a href=\"#useDebugValue\" class=\"headerlink\" title=\"useDebugValue\"></a>useDebugValue</h5><blockquote>\n<p>ç”¨æ¥ç»™ <code>hooks</code> æ·»åŠ ä¸Šæ‰“å°ä¿¡æ¯ã€‚</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-React-ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\"><a href=\"#1-React-ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\" class=\"headerlink\" title=\"1. React ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ\"></a>1. React ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ</h2><h3 id=\"è™šæ‹Ÿ-DOM\"><a href=\"#è™šæ‹Ÿ-DOM\" class=\"headerlink\" title=\"è™šæ‹Ÿ DOM\"></a>è™šæ‹Ÿ DOM</h3><ol>\n<li>DOM çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</li>\n</ol>\n<blockquote>\n<p>æµè§ˆå™¨ä¸­çš„æ¦‚å¿µï¼Œç”¨<code>js</code>å¯¹è±¡æ¥è¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œ <code>DOM</code> å¯¹è±¡çš„ APIï¼›</p>\n</blockquote>\n<ol start=\"2\">\n<li>ä»€ä¹ˆæ˜¯ React ä¸­çš„ è™šæ‹Ÿ DOMï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„æœ¬è´¨ï¼‰ï¼š</li>\n</ol>\n<blockquote>\n<p>ç”¨<code>js</code>å¯¹è±¡æ¥æ¨¡æ‹Ÿ é¡µé¢ä¸Šçš„<code>DOMå’ŒDOMåµŒå¥—</code></p>\n</blockquote>\n<ol start=\"3\">\n<li>ä¸ºä»€ä¹ˆè¦å®ç° è™šæ‹Ÿ DOM ï¼Ÿï¼ˆ è™šæ‹Ÿ DOM çš„ç›®çš„ï¼‰ï¼š</li>\n</ol>\n<blockquote>\n<p>ä¸ºäº†å®ç°é¡µé¢ä¸­ï¼Œ<code>DOM</code>å…ƒç´ çš„é«˜æ•ˆæ›´æ–°</p>\n</blockquote>\n<ol start=\"4\">\n<li>DOM å’Œ è™šæ‹Ÿ DOM çš„åŒºåˆ«ï¼š</li>\n</ol>\n<ul>\n<li><code>DOM</code>ï¼šæµè§ˆå™¨ä¸­ï¼Œæä¾›çš„æ¦‚å¿µï¼›ç”¨<code>js</code>å¯¹è±¡ï¼Œè¡¨ç¤ºé¡µé¢ä¸Šçš„å…ƒç´ ï¼Œå¹¶æä¾›äº†æ“ä½œå…ƒç´ çš„ <code>API</code>ï¼›</li>\n<li><code>è™šæ‹ŸDOM</code>ï¼šæ˜¯æ¡†æ¶ä¸­çš„æ¦‚å¿µï¼›æ˜¯å¼€å‘æ¡†æ¶çš„äººå‘˜ï¼Œæ‰‹åŠ¨ç”¨<code>js</code>å¯¹è±¡æ¥æ¨¡æ‹Ÿ<code>DOM</code>å…ƒç´ å’ŒåµŒå¥—å…³ç³»ï¼›</li>\n</ul>\n<ol start=\"5\">\n<li>DOM æ ‘çš„æ¦‚å¿µï¼š</li>\n</ol>\n<blockquote>\n<p>ä¸€ä¸ªç½‘é¡µçš„å‘ˆç°è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>æµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨è·å–é¡µé¢çš„ <code>html</code> ä»£ç ï¼›</li>\n<li>æµè§ˆå™¨è¦å…ˆåœ¨å†…å­˜ä¸­ï¼Œè§£æ <code>DOM</code> ç»“æ„ï¼Œå¹¶åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼Œæ¸²æŸ“å‡ºä¸€æ£µ <code>DOM</code> æ ‘ï¼›</li>\n<li>æµè§ˆå™¨æŠŠ <code>DOM</code> æ ‘ï¼Œå‘ˆç°åˆ°é¡µé¢ä¸Šï¼›</li>\n</ol>\n</blockquote>\n<h3 id=\"Diff-ç®—æ³•\"><a href=\"#Diff-ç®—æ³•\" class=\"headerlink\" title=\"Diff ç®—æ³•\"></a>Diff ç®—æ³•</h3><ol>\n<li>tree diffï¼š</li>\n</ol>\n<blockquote>\n<p>æ–°æ—§ä¸¤æ£µ <code>DOM</code> æ ‘ï¼Œé€å±‚å¯¹æ¯”çš„è¿‡ç¨‹ï¼Œå°±æ˜¯<code>tree diff</code>ï¼›<br>å½“æ•´æ£µ<code>DOM</code>é€å±‚å¯¹æ¯”å®Œæ¯•ï¼Œåˆ™æ‰€æœ‰éœ€è¦è¢«æŒ‰éœ€æ›´æ–°çš„å…ƒç´ ï¼Œå¿…ç„¶èƒ½å¤Ÿè¢«æ‰¾åˆ°ï¼›</p>\n</blockquote>\n<ol start=\"2\">\n<li>component diffï¼š</li>\n</ol>\n<blockquote>\n<p>åœ¨è¿›è¡Œ <code>tree diff</code> çš„æ—¶å€™ï¼Œæ¯ä¸€å±‚ä¸­ï¼Œç»„ä»¶çº§åˆ«çš„å¯¹æ¯”ï¼Œå«åš <code>component diff</code>ï¼›<br>å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™<strong>æš‚æ—¶</strong>è®¤ä¸ºæ­¤ç»„ä»¶ä¸è®¸è¦è¢«æ›´æ–°ï¼›<br>å¦‚æœå¯¹æ¯”å‰åï¼Œç»„ä»¶çš„ç±»å‹ä¸åŒï¼Œåˆ™éœ€è¦ç§»é™¤æ—§ç»„ä»¶ï¼Œåˆ›å»ºæ–°ç»„ä»¶ï¼Œå¹¶è¿½åŠ åˆ°é¡µé¢ä¸Šï¼›</p>\n</blockquote>\n<ol start=\"3\">\n<li>element diffï¼š</li>\n</ol>\n<blockquote>\n<p>åœ¨è¿›è¡Œç»„ä»¶å¯¹æ¯”çš„æ—¶å€™ï¼Œå¦‚æœä¸¤ä¸ªç»„ä»¶çš„ç±»å‹ç›¸åŒï¼Œåˆ™éœ€è¦è¿›è¡Œå…ƒç´ çº§åˆ«çš„å¯¹æ¯”ï¼Œè¿™å«åš<code>element diff</code>ï¼›</p>\n</blockquote>\n<h2 id=\"2-React-ä¸­åˆ›å»ºç»„ä»¶\"><a href=\"#2-React-ä¸­åˆ›å»ºç»„ä»¶\" class=\"headerlink\" title=\"2. React ä¸­åˆ›å»ºç»„ä»¶\"></a>2. React ä¸­åˆ›å»ºç»„ä»¶</h2><h3 id=\"ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\"><a href=\"#ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\" class=\"headerlink\" title=\"ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶\"></a>ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç»„ä»¶</h3><blockquote>\n<p>1ã€åœ¨ç»„ä»¶ä¸­ï¼Œå¿…é¡»è¦å‘å¤–<code>return</code>ä¸€ä¸ªåˆæ³•çš„<code>jsx</code>åˆ›å»ºçš„<code>è™šæ‹ŸDOM</code>å…ƒç´ ï¼›<br>2ã€å¦‚æœè¦æ¥æ”¶å¤–ç•Œä¼ é€’çš„æ•°æ®ï¼Œéœ€è¦åœ¨<code>æ„é€ å‡½æ•°</code>çš„å‚æ•°åˆ—è¡¨ä¸­ä½¿ç”¨<code>props</code>æ¥æ¥æ”¶ï¼›<br>3ã€æ— è®ºæ˜¯<code>vue</code>è¿˜æ˜¯<code>react</code>ï¼Œç»„ä»¶ä¸­çš„<code>props</code>æ°¸è¿œéƒ½æ˜¯åªè¯»<code>read-only</code>çš„ï¼Œä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼›<br>4ã€ç»„ä»¶çš„åç§°<code>é¦–å­—æ¯</code>å¿…é¡»æ˜¯<code>å¤§å†™</code>çš„<br>5ã€çœç•¥ <code>.jsx</code> æ–‡ä»¶å</p>\n</blockquote>\n<blockquote>\n<p>æ‰“å¼€ <code>webpack.config.js</code>ï¼Œå¹¶åœ¨å¯¼å‡ºçš„é…ç½®å¯¹è±¡ä¸­ï¼Œæ–°å¢ä»¥ä¸‹å‡ ä¸ªèŠ‚ç‚¹ï¼š</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resolve: &#123;</span><br><span class=\"line\">  extensions: [<span class=\"string\">&quot;.js&quot;</span>, <span class=\"string\">&quot;.jsx&quot;</span>, <span class=\"string\">&quot;.json&quot;</span>];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœåœ¨ä¸€ä¸ªç»„ä»¶ä¸­ <code>return</code> ä¸€ä¸ª <code>null</code>ï¼Œåˆ™è¡¨ç¤ºæ­¤ç»„ä»¶æ˜¯ç©ºçš„ï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ¸²æŸ“</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      è¿™æ˜¯Helloç»„ä»¶ -- &#123;props.name&#125; -- &#123;props.age&#125; -- &#123;props.gender&#125;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;å¤§é»„&quot;</span>,</span><br><span class=\"line\">  age: <span class=\"number\">3</span>,</span><br><span class=\"line\">  gender: <span class=\"string\">&quot;é›„æ€§&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;Hello &#123;...user&#125; /&gt;</span><br><span class=\"line\">  &lt;/div&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;#app&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä½¿ç”¨-class-å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\"><a href=\"#ä½¿ç”¨-class-å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\" class=\"headerlink\" title=\"ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶\"></a>ä½¿ç”¨ class å…³é”®å­—æ¥åˆ›å»ºç»„ä»¶</h3><blockquote>\n<p><code>public</code>: æ‰€æœ‰æˆå‘˜éƒ½å¯è®¿é—®<br><code>private</code>: åªæœ‰å½“å‰ç±»å¯è®¿é—®<br><code>protected</code>: åªæœ‰å½“å‰ç±»å’Œå…¶å­ç±»å¯è®¿é—®ï¼Œå¤–éƒ¨æˆå‘˜æ— æ³•è®¿é—®</p>\n</blockquote>\n<blockquote>\n<p><code>es6</code>ä¸­çš„<code>classå…³é”®å­—</code>ï¼Œæ˜¯å®ç°<code>é¢å‘å¯¹è±¡ç¼–ç¨‹</code>çš„æ–°å½¢å¼ï¼Œä¹Ÿå«åš<code>è¯­æ³•ç³–</code></p>\n</blockquote>\n<ul>\n<li>constructor æ„é€ å™¨ä¸­çš„ super å‡½æ•°</li>\n</ul>\n<blockquote>\n<p>åœ¨å­ç±»ä¸­ï¼Œ <code>this</code> åªèƒ½æ”¾åˆ° <code>super</code> ä¹‹åä½¿ç”¨<br>å­ç±»ä¸­çš„ <code>super</code>ï¼Œå…¶å®å°±æ˜¯çˆ¶ç±»ä¸­ï¼Œ<code>contructor</code>æ„é€ å™¨çš„ä¸€ä¸ªå¼•ç”¨</p>\n</blockquote>\n<ul>\n<li>æœ€åŸºæœ¬çš„ç»„ä»¶ç»“æ„</li>\n</ul>\n<blockquote>\n<p><code>render</code>å‡½æ•°çš„ä½œç”¨ï¼šæ¸²æŸ“å½“å‰ç»„ä»¶æ‰€å¯¹åº”çš„<code>è™šæ‹ŸDOM</code> å…ƒç´ </p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> ç»„ä»¶åç§° <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>è¿™æ˜¯ class åˆ›å»ºçš„ç»„ä»¶<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>this.props å’Œ this.state</li>\n</ul>\n<blockquote>\n<ol>\n<li><code>this.props</code> æ¥æ”¶å¤–ç•Œä¼ é€’çš„å‚æ•°ï¼Œ<code>this.state</code> è®¾ç½®ç§æœ‰æ•°æ®</li>\n<li>åœ¨ <code>class</code> å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ä¸­ï¼Œç›´æ¥ä½¿ç”¨ <code>this.props</code> è®¿é—®ä¼ é€’è¿‡æ¥çš„æ•°æ®</li>\n<li><code>props</code> æ˜¯åªè¯»çš„</li>\n</ol>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Movie</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>();</span><br><span class=\"line\">    <span class=\"comment\">// è¿™é‡Œçš„ this.state = &#123;&#125;ï¼Œå°±ç›¸å½“äº Vueä¸­çš„data() &#123; return &#123;&#125; &#125;</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      msg: <span class=\"string\">&quot;è¿™æ˜¯Movieç»„ä»¶çš„ç§æœ‰æ•°æ®&quot;</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* æ³¨æ„ï¼šåœ¨ class ç»„ä»¶å†…å®¹ï¼Œthis è¡¨ç¤ºå½“å‰ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ */</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>è¿™æ˜¯Movieç»„ä»¶ -- &#123;this.props.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> user = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;å¤§é»„&quot;</span>,</span><br><span class=\"line\">  age: <span class=\"number\">3</span>,</span><br><span class=\"line\">  gender: <span class=\"string\">&quot;é›„æ€§&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">ReactDOM.render(</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &lt;Movie &#123;...user&#125; /&gt;</span><br><span class=\"line\">    &lt;h3&gt;&#123;<span class=\"built_in\">this</span>.state.msg&#125;&lt;/h3&gt;</span><br><span class=\"line\">  &lt;/div&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;#app&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\"><a href=\"#ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\" class=\"headerlink\" title=\"ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”\"></a>ä¸¤ç§åˆ›å»ºç»„ä»¶çš„æ–¹å¼çš„å¯¹æ¯”</h3><blockquote>\n<p>ä½¿ç”¨ <code>class</code> å…³é”®å­—åˆ›å»ºçš„ç»„ä»¶ï¼Œæœ‰è‡ªå·±çš„ <code>ç§æœ‰æ•°æ®(this.state)</code> å’Œ <code>ç”Ÿå‘½å‘¨æœŸ</code><br>ä½¿ç”¨ <code>function</code> åˆ›å»ºçš„ç»„ä»¶ï¼Œåªæœ‰ <code>props</code>ï¼Œæ²¡æœ‰è‡ªå·±çš„ <code>ç§æœ‰æ•°æ®</code> å’Œ <code>ç”Ÿå‘½å‘¨æœŸ</code><br>æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶ä¹‹é—´çš„ <code>æœ¬è´¨åŒºåˆ«</code>ï¼šæœ‰æ—  <code>state</code> å±æ€§å’Œ <code>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</code></p>\n</blockquote>\n<h2 id=\"3-React-ä¸­-style-å¤„ç†æ–¹å¼\"><a href=\"#3-React-ä¸­-style-å¤„ç†æ–¹å¼\" class=\"headerlink\" title=\"3. React ä¸­ style å¤„ç†æ–¹å¼\"></a>3. React ä¸­ style å¤„ç†æ–¹å¼</h2><h3 id=\"å†…è”\"><a href=\"#å†…è”\" class=\"headerlink\" title=\"å†…è”\"></a>å†…è”</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">style = &#123;&#123; <span class=\"attr\">color</span>: red &#125;&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"css\"><a href=\"#css\" class=\"headerlink\" title=\"css\"></a>css</h3><blockquote>\n<p>1ã€å¦‚æœç›´æ¥å¯¼å…¥ <code>css</code> æ ·å¼è¡¨ï¼Œé»˜è®¤åˆ™æ˜¯åœ¨å…¨å±€ä¸Šï¼Œæ•´ä¸ªé¡¹ç›®éƒ½ä¼šç”Ÿæ•ˆ<br>2ã€css æ¨¡å—åŒ–ï¼Œåªé’ˆå¯¹ <code>class</code> é€‰æ‹©å™¨ å’Œ <code>id</code> é€‰æ‹©å™¨ç”Ÿæ•ˆ<br>å¼•ç”¨ï¼š<code>import style from &#39;./style.css&#39;</code></p>\n</blockquote>\n<h2 id=\"4-React-ä¸­äº‹ä»¶ç»‘å®š\"><a href=\"#4-React-ä¸­äº‹ä»¶ç»‘å®š\" class=\"headerlink\" title=\"4. React ä¸­äº‹ä»¶ç»‘å®š\"></a>4. React ä¸­äº‹ä»¶ç»‘å®š</h2><ol>\n<li>äº‹ä»¶çš„åç§°éƒ½æ˜¯ <code>React</code> æ‰€æä¾›çš„ï¼Œå› æ­¤åç§°çš„é¦–å­—æ¯å¿…é¡»å¤§å†™<code>onClick</code>ï¼Œ<code>onMouseOver</code></li>\n<li>ä¸ºäº‹ä»¶æä¾›çš„å¤„ç†å‡½æ•°ï¼Œå¿…é¡»æ˜¯ä»¥ä¸‹æ ¼å¼ï¼š</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">onClick = &#123; <span class=\"function\"><span class=\"keyword\">function</span> &#125;</span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>ç”¨çš„æœ€å¤šçš„äº‹ä»¶ç»‘å®šå½¢å¼ä¸ºï¼š</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.show(<span class=\"string\">&quot;ä¼ å‚&quot;</span>)&#125;&gt;æŒ‰é’®&lt;/button&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// äº‹ä»¶çš„å¤„ç†å‡½æ•°ï¼Œéœ€è¦å®šä¹‰ä¸º ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç„¶åèµ‹å€¼ç»™ å‡½æ•°åç§°</span></span><br><span class=\"line\">show = <span class=\"function\"><span class=\"params\">arg1</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;showæ–¹æ³•&quot;</span> + arg1);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>åœ¨ <code>React</code> ä¸­ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ <code>state</code> ä¸­çš„æ•°æ®ï¼Œæ¨èä½¿ç”¨ <code>this.setState(&#123; &#125;)</code></li>\n</ol>\n<blockquote>\n<p>1ã€åœ¨<code>setState</code>ä¸­ï¼Œåªä¼šæŠŠå¯¹åº”çš„ <code>state</code>çŠ¶æ€æ›´æ–°ï¼Œè€Œä¸ä¼šè¦†ç›–å…¶å®ƒçš„ <code>state</code>çŠ¶æ€ã€‚<br>2ã€<code>this.setState</code> æ–¹æ³•çš„æ‰§è¡Œæ—¶ <code>å¼‚æ­¥çš„</code>ã€‚<br>3ã€å¦‚æœåœ¨è°ƒç”¨å®Œ <code>this.setState</code>ä¹‹åï¼Œåˆæƒ³ç«‹å³æ‹¿åˆ°æœ€æ–°çš„<code>state</code>çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨ <code>this.setState(&#123;&#125;, callback)</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°ã€å›è°ƒå‡½æ•°ã€‘ä¸­è·å–ã€‚</p>\n</blockquote>\n<h2 id=\"5-å•å‘æ•°æ®æµ-çŠ¶æ€å˜åŒ–-gt-è‡ªåŠ¨æ›´æ–°é¡µé¢\"><a href=\"#5-å•å‘æ•°æ®æµ-çŠ¶æ€å˜åŒ–-gt-è‡ªåŠ¨æ›´æ–°é¡µé¢\" class=\"headerlink\" title=\"5. å•å‘æ•°æ®æµ(çŠ¶æ€å˜åŒ– =&gt; è‡ªåŠ¨æ›´æ–°é¡µé¢)\"></a>5. å•å‘æ•°æ®æµ(çŠ¶æ€å˜åŒ– =&gt; è‡ªåŠ¨æ›´æ–°é¡µé¢)</h2><blockquote>\n<p>1ã€<code>React</code> ä¸­ï¼Œé»˜è®¤æ˜¯ <code>å•å‘æ•°æ®æµ</code>ï¼Œåªèƒ½æŠŠ <code>state</code> ä¸Šçš„æ•°æ®ç»‘å®šåˆ°é¡µé¢ï¼Œæ— æ³•æŠŠé¡µé¢ä¸­æ•°æ®çš„å˜åŒ–ï¼Œè‡ªåŠ¨åŒæ­¥å› <code>state</code>ï¼›å¦‚æœéœ€è¦æŠŠé¡µé¢ä¸Šæ•°æ®çš„å˜åŒ–ï¼Œä¿å­˜åˆ° <code>state</code>ï¼Œéœ€è¦æ‰‹åŠ¨ç›‘å¬<code>onChange</code> äº‹ä»¶ï¼Œæ‹¿åˆ°æœ€æ–°çš„æ•°æ®ï¼Œæ‰‹åŠ¨è°ƒç”¨ <code>this.setState(&#123; &#125;)</code> æ›´æ”¹ã€‚<br>2ã€å½“ä¸ºæ–‡æœ¬æ¡†ç»‘å®š <code>value</code> å€¼ä»¥åï¼Œè¦ä¹ˆåŒæ—¶ç»™æ ‡ç­¾æä¾›ä¸€ä¸ª <code>readOnly</code> å±æ€§ï¼Œè¦ä¹ˆæä¾›ä¸€ä¸ª <code>onChange</code> äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ–¹æ¡ˆä¸€ï¼šé€šè¿‡äº‹ä»¶å‚æ•° e æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨</span></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;<span class=\"built_in\">this</span>.state.msg&#125; onChange=&#123;<span class=\"function\"><span class=\"params\">e</span> =&gt;</span> <span class=\"built_in\">this</span>.textChanged(e)&#125; /&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">textChanged = <span class=\"function\"><span class=\"params\">e</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(e.target.value);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹æ¡ˆäºŒï¼šé€šè¿‡ref æ¥è·å–DOMå…ƒç´ çš„å¼•ç”¨  this.refs.å¼•ç”¨åç§°</span></span><br><span class=\"line\">&lt;input type=<span class=\"string\">&quot;text&quot;</span> value=&#123;<span class=\"built_in\">this</span>.state.msg&#125; onChange=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.textChanged()&#125; ref=<span class=\"string\">&quot;txt&quot;</span> /&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">textChanged = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.refs.txt.value);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#6-ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"6. ç”Ÿå‘½å‘¨æœŸ\"></a>6. ç”Ÿå‘½å‘¨æœŸ</h2><ul>\n<li>ç”Ÿå‘½å‘¨æœŸä»‹ç»</li>\n</ul>\n<blockquote>\n<p>æ¯ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œä»åˆ›å»ºã€åˆ°è¿è¡Œã€ç›´åˆ°é”€æ¯ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¼šè§¦å‘ä¸€ç³»åˆ—äº‹ä»¶ï¼Œè¿™äº›äº‹ä»¶å°±å«åšç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</p>\n</blockquote>\n<ul>\n<li>React çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†</li>\n</ul>\n<ol>\n<li>ç»„ä»¶åˆ›å»ºé˜¶æ®µ</li>\n</ol>\n<blockquote>\n<p>åªæ‰§è¡Œä¸€æ¬¡</p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>componentWillMount</code> =&gt; <code>æŒ‚è½½ä¹‹å‰</code></li>\n<li><code>render</code> =&gt; <code>æ­£åœ¨æ¸²æŸ“ï¼Œè™šæ‹ŸDOMåˆ›å»ºåˆ°äº†å†…å­˜ä¸­ï¼Œè¿˜æœªæŒ‚è½½åˆ°é¡µé¢ä¸Š</code></li>\n<li><code>componentDidMount</code> =&gt; <code>æŒ‚è½½ç»“æŸï¼Œéœ€è¦æ“ä½œDOMèŠ‚ç‚¹çš„åˆå§‹åŒ–æ“ä½œæ”¾åœ¨è¿™é‡Œ</code></li>\n</ol>\n</blockquote>\n<ol start=\"2\">\n<li>ç»„ä»¶è¿è¡Œé˜¶æ®µï¼š</li>\n</ol>\n<blockquote>\n<p>æ ¹æ® <code>props</code> å±æ€§æˆ–è€… <code>state</code> çŠ¶æ€çš„æ”¹å˜ï¼Œæœ‰é€‰æ‹©æ€§çš„æ‰§è¡Œ <code>0</code> åˆ° <code>å¤šæ¬¡</code></p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>props</code> æ”¹å˜ä¹‹å</li>\n<li><code>componentWillReceiveProps</code> =&gt; å½“ä¸€ä¸ªæŒ‚è½½çš„ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ <code>props</code> çš„æ—¶å€™è¢«è°ƒç”¨</li>\n<li><code>state</code> æ”¹å˜ä¹‹å</li>\n<li><code>shouldComponentUpdateï¼ˆnextprops, nextStateï¼‰</code> =&gt; å½“ç»„ä»¶åšå‡ºæ˜¯å¦è¦æ›´æ–° <code>DOM</code> çš„å†³å®šçš„æ—¶å€™è¢«è°ƒç”¨ï¼Œåœ¨æ”¹å˜çŠ¶æ€çš„æ—¶å€™å¯ä»¥é€‰æ‹©é€šè¿‡( <code>return true</code> )æˆ–è€…ä¸é€šè¿‡( <code>return false</code>)</li>\n<li><code>componentWillUpdate</code> =&gt; åœ¨æ›´æ–°å‘ç”Ÿä¹‹å‰è¢«è°ƒç”¨</li>\n<li><code>render</code> =&gt; æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢æ˜¯æ—§çš„</li>\n</ol>\n<p>7.<code>componentDidUpdate</code> =&gt; æ•°æ®æ˜¯æ–°çš„ï¼Œé¡µé¢å·²ç»å˜æˆäº†æœ€æ–°çš„</p>\n</blockquote>\n<ol start=\"3\">\n<li>ç»„ä»¶é”€æ¯é˜¶æ®µ</li>\n</ol>\n<blockquote>\n<p>åªæ‰§è¡Œä¸€æ¬¡</p>\n</blockquote>\n<blockquote>\n<p><code>componentWillUnmount</code> =&gt; ç»„ä»¶ç§»é™¤æˆ–è€…é”€æ¯çš„æ—¶å€™è¢«è°ƒç”¨</p>\n</blockquote>\n<h2 id=\"7-éªŒè¯æ•°æ®ç±»å‹\"><a href=\"#7-éªŒè¯æ•°æ®ç±»å‹\" class=\"headerlink\" title=\"7. éªŒè¯æ•°æ®ç±»å‹\"></a>7. éªŒè¯æ•°æ®ç±»å‹</h2><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ProtoTypes &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;prop-types&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å®šä¹‰ç»„ä»¶éœ€è¦ä¼ å…¥çš„å‚æ•°</span></span><br><span class=\"line\">MyCompo.protoTypes = &#123;</span><br><span class=\"line\">  a: ProtoTypes.string.isRequired,</span><br><span class=\"line\">  b: ProtoTypes.string.isRequired,</span><br><span class=\"line\">  c: ProtoTypes.number.isRequired</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-flux\"><a href=\"#8-flux\" class=\"headerlink\" title=\"8. flux\"></a>8. flux</h2><h3 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h3><blockquote>\n<p>ä¼ ç»Ÿçš„ <code>MVC</code> å’Œ <code>MVVM</code> æ¶æ„è®¾è®¡æ¨¡å¼æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼šå½“é¡¹ç›®è¶Šæ¥è¶Šå¤§ã€é€»è¾‘è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæ•°æ®æµåŠ¨å°±è¶Šæ˜¾å¾—æ··ä¹±ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>Flux</code> æ˜¯è‡´åŠ›äºè§£å†³æ•°æ®æœ‰åºä¼ è¾“é—®é¢˜çš„æ¶æ„è®¾è®¡æ¨¡å¼ï¼Œæ¥è‡ª <code>Facebook</code>ã€‚<code>Flux</code> ä¸­æœ€å¤§çš„å“²å­¦ï¼šæ•°æ®æ˜¯ <code>å•å‘æµåŠ¨</code> çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://github.com/facebook/flux/tree/master/examples/flux-concepts\">å®˜æ–¹æ‰‹å†Œ</a></p>\n</blockquote>\n<blockquote>\n<p><code>Flux</code> ä¸­æœ€é‡è¦çš„å››ä¸ªæ¦‚å¿µï¼š<code>Dispatcher</code>ã€<code>Store</code>ã€<code>View</code>ã€<code>Action</code>ã€‚</p>\n</blockquote>\n<p><img src=\"https://cdn.nlark.com/yuque/0/2020/png/732231/1608703835856-e1263bac-124a-40da-ae3c-b45a4c8081ae.png#align=left&display=inline&height=393&margin=%5Bobject%20Object%5D&name=flux.png&originHeight=393&originWidth=1300&size=26132&status=done&style=none&width=1300\" alt=\"flux.png\"></p>\n<h3 id=\"åŸºæœ¬æ¦‚å¿µ\"><a href=\"#åŸºæœ¬æ¦‚å¿µ\" class=\"headerlink\" title=\"åŸºæœ¬æ¦‚å¿µ\"></a>åŸºæœ¬æ¦‚å¿µ</h3><ol>\n<li>æ¦‚è¿°<ul>\n<li><code>flux</code> æ˜¯ä¸€ä¸ªç®¡ç† <code>App</code> ä¸­æ•°æ®æµåŠ¨çš„æ¨¡å¼ã€‚</li>\n<li>æœ€å…³é”®çš„æ¦‚å¿µï¼š<code>æ•°æ®çš„æµåŠ¨æ˜¯å•å‘çš„</code>ã€‚</li>\n</ul>\n</li>\n<li>Dispatcher è°ƒåº¦è€…<ul>\n<li><code>Dispatcher</code> æ¥å— <code>action</code>ï¼Œå¹¶ä¸”è¦æŠŠè¿™äº› <code>action</code> åˆ†æ´¾ç»™å·²ç»æ³¨å†Œåˆ° <code>Dispatcher</code> çš„ <code>store</code> ä¸Š</li>\n<li>æ‰€æœ‰çš„ <code>store</code> éƒ½å°†æ¥æ”¶æ‰€æœ‰çš„ <code>action</code></li>\n<li>åœ¨æ¯ä¸ª <code>App</code> ä¸­ï¼Œåº”è¯¥ç¡®ä¿åªæœ‰ä¸€ä¸ª <code>Dispatcher</code> çš„å®ä¾‹</li>\n</ul>\n</li>\n<li>store ä»“åº“<ul>\n<li><code>store</code> æ˜¯åœ¨ <code>App</code> ä¸­æŒæœ‰æ•°æ®çš„ä»“åº“</li>\n<li>æ‰€æœ‰çš„ <code>store</code> è¦åœ¨ <code>App</code> çš„ <code>Dispatcher</code> ä¸Šæ³¨å†Œï¼Œç¡®ä¿å®ƒä»¬å¯ä»¥æ¥æ”¶ <code>action</code></li>\n<li><code>store</code> ä¸­çš„æ•°æ®åªèƒ½è¢« <code>action</code> æ”¹å˜ã€‚</li>\n<li><code>store</code> ä¸­ä¸èƒ½å¤Ÿæœ‰å…¬å…±çš„ <code>setter</code>ï¼Œåªèƒ½æœ‰ <code>getter</code></li>\n<li><code>store</code> å†³å®šäº†å®ƒä»¬æ„¿æ„å“åº”å“ªäº› <code>actions</code></li>\n<li>æ— è®ºä½•æ—¶ï¼Œ<code>store</code> ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¼šè§¦å‘ä¸€ä¸ª <code>change</code> äº‹ä»¶</li>\n<li>åŒä¸€ä¸ª <code>App</code> ä¸­å¯èƒ½æœ‰å¾ˆå¤š <code>store</code></li>\n</ul>\n</li>\n<li>Action è¡Œä¸º<ul>\n<li><code>Action</code> å®šä¹‰äº† <code>App</code> å†…éƒ¨çš„ <code>API</code></li>\n<li>å®ƒä»¬æ•è·æ‰€æœ‰å¯èƒ½æ”¹å˜ <code>App</code> çš„é€”å¾„å’Œæ–¹æ³•</li>\n<li>å®ƒä»¬æ˜¯ç®€å•çš„<code>å¯¹è±¡</code>ï¼Œå¹¶ä¸”è¦æœ‰ <code>typeå±æ€§</code> å’Œ <code>å…¶ä»–çš„ä¸€äº›æ•°æ®å±æ€§</code></li>\n<li><code>Action</code> åº”è¯¥æœ‰ä¸€ä¸ªå…·æœ‰è¯­ä¹‰çš„ã€ç›´è§‚çš„è¡¨ç¤ºå®ƒæ˜¯åšä»€ä¹ˆçš„åå­—</li>\n<li>æ‰€æœ‰çš„<code>store</code>éƒ½å°†æ¥æ”¶åŒä¸€ä¸ª<code>action</code>ï¼Œå¹¶ä¸”é€šè¿‡è¿™ä¸ª <code>action</code>ï¼Œ<code>store</code> ä¼šçŸ¥é“å®ƒä»¬è¦æ¸…é™¤ã€æ›´æ–°å“ªäº›æ•°æ®</li>\n</ul>\n</li>\n<li>Views è§†å›¾<ul>\n<li><code>store</code> ä¸­çš„æ•°æ®è¢«å±•ç¤ºåœ¨äº†<code>view</code>ä¸Š</li>\n<li><code>View</code> å±‚å¯ä»¥ä½¿ç”¨ä»»ä½•æ¡†æ¶</li>\n<li>å½“ä¸€ä¸ªè§†å›¾æƒ³è¦è·å– <code>store</code> ä¸­çš„æ•°æ®ï¼Œå®ƒå¿…é¡» <code>subscribe è®¢é˜…</code> ä¸€ä¸‹è¯¥ <code>store</code> çš„<code>change</code> äº‹ä»¶</li>\n<li>å½“ <code>store</code> è§¦å‘äº† <code>change</code> äº‹ä»¶ï¼Œæ­¤æ—¶ <code>view</code> å°±èƒ½å¾—åˆ°æ–°çš„æ•°æ®å¹¶ä¸”é‡æ–°æ¸²æŸ“</li>\n<li>å¦‚æœä¸€ä¸ªç»„ä»¶è¦ä½¿ç”¨ <code>store</code>ï¼Œä½†æ˜¯æ²¡æœ‰è®¢é˜…è¿™ä¸ª <code>store</code>ï¼Œæ­¤æ—¶å°±ä¼šå‡ºé”™</li>\n<li><code>Action</code> æœ€å¸¸è§çš„äº§ç”ŸåŸå› æ˜¯ï¼šåœ¨ <code>App</code> ä¸­çš„æŸä¸€ä¸ªéƒ¨åˆ†ï¼Œå› ä¸ºç”¨æˆ·çš„äº¤äº’è¡Œä¸ºï¼Œè€Œè¢«æ­¤<code>view</code> <code>dispatch</code>å‡ºæ¥äº†</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"redux\"><a href=\"#redux\" class=\"headerlink\" title=\"redux\"></a>redux</h3><ul>\n<li>ç®€ä»‹<ul>\n<li><a href=\"https://redux.js.org/\">å®˜ç½‘</a></li>\n<li>Redux å°±æ˜¯ Flux æ€æƒ³åœ¨ React ä¸­çš„å®ç°</li>\n<li>Redux æ˜¯ä¸€ä¸ªå¯é¢„æµ‹çŠ¶æ€çš„ Js app å®¹å™¨</li>\n<li><a href=\"https://github.com/reactjs/redux/tree/master/examples\"><code>é€šè¿‡ä¾‹å­æ¥å­¦ä¹ redux</code></a></li>\n</ul>\n</li>\n<li>Redux åˆ›å»ºçš„æ­¥éª¤<ul>\n<li>è®¾ç½®ä¸€ä¸ª <code>reducer</code>ï¼›</li>\n<li>åˆ›å»ºä¸€ä¸ª<code>store</code>ï¼Œ<code>Redux.createStore(reducer)</code></li>\n<li>åˆ›å»º <code>render</code> å‡½æ•°</li>\n<li>æ³¨å†Œ <code>render</code>ï¼Œ<code>store.subscribe(render)</code></li>\n<li>ç›‘å¬ï¼Œæ­¤æ—¶è¦è®°å¾— <code>store.dispatch(action)</code>ï¼Œä¸æ˜¯ç›´æ¥ä¿®æ”¹<code>store</code></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"React-Redux\"><a href=\"#React-Redux\" class=\"headerlink\" title=\"React-Redux\"></a>React-Redux</h3><ul>\n<li>ç®€ä»‹<ul>\n<li>å°† <code>react</code> å’Œ <code>redux</code> åˆå¹¶èµ·æ¥ï¼Œå¯ä»¥è®©ä»»ä½•ç»„ä»¶åœ¨ä»»ä½•åœ°æ–¹çœ‹è§ <code>store</code></li>\n<li><a href=\"https://github.com/reactjs/react-redux/tree/master/docs\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li><code>React-Redux</code> ç»™æˆ‘ä»¬æä¾›äº†ï¼š<code>Providerç»„ä»¶</code>ï¼Œ<code>connectå‡½æ•°</code></li>\n</ul>\n</li>\n<li>Provider ç»„ä»¶</li>\n</ul>\n<blockquote>\n<p>1ã€ä½¿ç”¨ <code>react-redux</code> æä¾›çš„ <code>Provider</code> ç»„ä»¶ä¼ é€’ <code>store</code> ä¸Šä¸‹æ–‡ä¹‹åï¼Œ<code>åŒ…è£¹åœ¨å…¶ä¸­çš„æ‰€æœ‰ç»„ä»¶</code> å…¨éƒ½å¯ä»¥è¯†åˆ«è¿™ä¸ªä¸Šä¸‹æ–‡</p>\n</blockquote>\n<blockquote>\n<p>2ã€åœ¨ <code>Provider</code> ç»„ä»¶å†…éƒ¨çš„è‡ªå®šä¹‰ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>connect()</code> å‡½æ•°ï¼Œä½†æ˜¯åœ¨å…¶å¤–éƒ¨çš„ä¸å¯ä½¿ç”¨</p>\n</blockquote>\n<ul>\n<li>connect å‡½æ•°</li>\n</ul>\n<blockquote>\n<p>1ã€å°† <code>Reactç»„ä»¶</code> å’Œ <code>Redux</code> çš„ <code>store</code> è¿›è¡Œè¿æ¥<br>2ã€<code>connect</code> æä¾›äº†ä¸€ä¸ªå¾ˆæ–¹ä¾¿çš„ <code>API</code> èƒ½å¤Ÿé€‚åº”ç»å¤§å¤šæ•°å·¥ä½œ<br>3ã€å®ƒæ²¡æœ‰æ›´æ”¹ä½ ä¼ è¿›æ¥çš„ç±»ï¼Œåè€Œä¼šè¿”å›ä¸€ä¸ªå·²ç»è¿æ¥å¥½çš„æ–°ç±»<br>4ã€æä¾›äº†ä¸¤ä¸ªå‚æ•°ï¼š<code>mapStateToProps</code>, <code>mapDispatchToProps</code></p>\n</blockquote>\n<ul>\n<li>mapStateToProps</li>\n</ul>\n<blockquote>\n<p>1ã€å¦‚æœä¼ å…¥<code>mapStateToProps</code>ï¼Œæ­¤æ—¶è¿™ä¸ªç»„ä»¶å°†è®¢é˜… <code>Redux</code> ä¸­ <code>store</code> çš„æ›´æ–°ä¿¡æ¯ï¼›<br>2ã€è¿™æ„å‘³ç€æ— è®ºä»»ä½•æ—¶å€™ <code>store</code> è¢«æ›´æ”¹äº†ï¼Œ<code>mapStateToProps</code> å‡½æ•°éƒ½å°†ä¼šè¢«è°ƒç”¨ï¼Œ<code>mapStateToProps</code> çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ª <code>Object</code>ï¼›<br>3ã€è¿™ä¸ª <code>Object</code> å°†ä¸ç»„ä»¶çš„ <code>props</code> èåˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªè¿”å›çš„ <code>Object</code> ä¸­çš„ <code>key</code> å°†è‡ªåŠ¨æˆä¸ºç»„ä»¶çš„ <code>props</code> ä¸­çš„æˆå‘˜<br>4ã€å¦‚æœä¸æƒ³è®¢é˜… <code>store</code> çš„æ›´æ–°ï¼Œæ­¤æ—¶å¯ä»¥ä¸ä¼ é€’è¿™ä¸ªå‚æ•°ï¼Œé‡‡ç”¨ <code>null</code> å ä½</p>\n</blockquote>\n<ul>\n<li>mapDispatchToProps</li>\n</ul>\n<blockquote>\n<p>å¦‚æœå‘ <code>connect</code> å‡½æ•°ä¸­ä¼ å…¥äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ª <code>å‡½æ•°</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°†è·å¾—<code>dispatch</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä»¥é€šè¿‡ <code>emit action</code>ï¼Œé—´æ¥çš„å¯¼è‡´ <code>state</code> çš„æ”¹å˜<br>å¯ä»¥ä½¿ç”¨ <code>bindActionCreators()</code> æ–¹æ³•è½»æ¾çš„å°† <code>Action creator</code>(è¿”å› <code>action</code> çš„å‡½æ•°)æ¥å£å’Œ <code>dispatch</code> è¿›è¡Œç»‘å®š</p>\n</blockquote>\n<ul>\n<li>ä¹¦å†™è§„åˆ™</li>\n</ul>\n<blockquote>\n<p>index.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; render &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./containers/App&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> store = createStore(reducer);</span><br><span class=\"line\">render(</span><br><span class=\"line\">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;/Provider&gt;,</span><br><span class=\"line\">  <span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;root&quot;</span>)</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>App.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; connect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> actions <span class=\"keyword\">from</span> <span class=\"string\">&quot;./actions&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>();</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(props);</span><br><span class=\"line\">    <span class=\"comment\">// props: &#123; r: 0, g: 0, b: 0, actions: è®¸å¤šæ–¹æ³• &#125;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>è¿™æ˜¯Appç»„ä»¶<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> mapStateToProps = <span class=\"function\"><span class=\"params\">state</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    r: state.r,</span><br><span class=\"line\">    g: state.g,</span><br><span class=\"line\">    b: state.b</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">const</span> mapDispatchToProps = <span class=\"function\"><span class=\"params\">dispatch</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    actions: bindActionCreators(actions, dispatch)</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(mapStateToProps, mapDispatchToProps)(App);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>reducer.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (state, action) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (state == <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">    state = &#123; <span class=\"attr\">r</span>: <span class=\"number\">0</span>, <span class=\"attr\">g</span>: <span class=\"number\">0</span>, <span class=\"attr\">b</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (action.type == <span class=\"string\">&quot;ADD&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      ...state,</span><br><span class=\"line\">      r: state.r + <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>actions.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> ADD = <span class=\"function\">() =&gt;</span> &#123; <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;ADD&quot;</span> &#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"ç»„ä»¶å†…éƒ¨çš„-state-å’Œå…¨å±€çš„-state\"><a href=\"#ç»„ä»¶å†…éƒ¨çš„-state-å’Œå…¨å±€çš„-state\" class=\"headerlink\" title=\"ç»„ä»¶å†…éƒ¨çš„ state å’Œå…¨å±€çš„ state\"></a>ç»„ä»¶å†…éƒ¨çš„ state å’Œå…¨å±€çš„ state</h3><blockquote>\n<p>ç»„ä»¶çš„æ•°æ®ä¸‰å…„å¼Ÿï¼š<code>state</code>, <code>props</code>, <code>context</code> ä¸ç®¡æ˜¯è°å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå¼•å‘ <code>render()</code> æ‰§è¡Œï¼Œè§†å›¾ä¼šè¢«é‡ç»˜ã€‚ä½†æ˜¯ï¼Œæ„é€ å‡½æ•°ä¸ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚æ‰€ä»¥ä¸ç®¡åŸºäºä»€ä¹ˆç†ç”±ï¼Œéƒ½ä¸éœ€è¦å°†å…¨å±€çš„çŠ¶æ€ï¼Œç”¨è‡ªå·±ç»„ä»¶çš„ <code>state</code> æ¥æ”¶ï¼Œè€Œä»…éœ€è¦ç”¨<code>connect</code>è¿æ¥ä¸€ä¸‹å…¨å±€<code>store</code>ï¼Œç„¶åä½¿ç”¨<code>this.props.**</code>å³å¯ã€‚</p>\n</blockquote>\n<h3 id=\"reducer-æ¨¡å—åŒ–\"><a href=\"#reducer-æ¨¡å—åŒ–\" class=\"headerlink\" title=\"reducer æ¨¡å—åŒ–\"></a>reducer æ¨¡å—åŒ–</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; combineReducers &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> todoReducers <span class=\"keyword\">from</span> <span class=\"string\">&quot;./todoReducer.js&quot;</span>; <span class=\"comment\">// æ ‡å‡†reducer</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> combineReducers(&#123;</span><br><span class=\"line\">  todoReducers</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"redux-logger\"><a href=\"#redux-logger\" class=\"headerlink\" title=\"redux-logger\"></a>redux-logger</h3><blockquote>\n<p>æ‰“å° redux log</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createLogger &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;redux-logger&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> reducer <span class=\"keyword\">from</span> <span class=\"string\">&quot;./reducers/index.js&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(reducer, applyMiddleware(createLogger()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"redux-thunk\"><a href=\"#redux-thunk\" class=\"headerlink\" title=\"redux-thunk\"></a>redux-thunk</h3><blockquote>\n<p>è§£å†³å¼‚æ­¥é—®é¢˜</p>\n</blockquote>\n<blockquote>\n<p><code>redux-thunk</code>å¸®åŠ©æˆ‘ä»¬åœ¨æ‰€æœ‰çš„ç»„ä»¶çš„ <code>props</code> ä¸­æ·»åŠ äº†ä¸€ä¸ª <code>dispatch</code> æ–¹æ³•ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å½“ç„¶ï¼Œè¿™ä¸ªç»„ä»¶ä¸€å®šè¦è¢« <code>connect</code> å‡½æ•°è¿›è¡Œå¤„ç†</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨ <code>thunk</code>ï¼Œåˆ™ <code>connect</code> å‡½æ•°ä¸èƒ½ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— æ³•è·å– <code>this.props.dispatch()</code></p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å…¥å£æ–‡ä»¶</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createStore, applyMiddleware &#125; <span class=\"keyword\">from</span> <span class=\"string\">&#x27;redux&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> thunk <span class=\"keyword\">from</span> <span class=\"string\">&#x27;redux-thunk&#x27;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> store = createStore(reducer, applyMiddleware(thunk))</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** ç»„ä»¶ä¸­ */</span></span><br><span class=\"line\"><span class=\"comment\">/** ç¬¬ä¸€ç§å†™æ³•ï¼Œå¹¶æ²¡æœ‰å°†actionsè¿›è¡ŒæŠ½ç¦» */</span></span><br><span class=\"line\">$.get(<span class=\"string\">&#x27;/shu.txt&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> number = <span class=\"built_in\">Number</span>(data);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.props.dispatch(&#123;</span><br><span class=\"line\">        <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;ADD&quot;</span>,</span><br><span class=\"line\">        number</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\"><span class=\"comment\">/** ç¬¬äºŒç§å†™æ³•:å¸¸ç”¨ */</span></span><br><span class=\"line\"><span class=\"comment\">// å¯æšä¸¾</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> actions <span class=\"keyword\">from</span> <span class=\"string\">&#x27;./actions/actions.js&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> ** <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">add</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.props.dispatch(actions.add())</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.props.dispatch(actions.minus())</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/** ç°åœ¨ï¼Œä¸€èˆ¬ä¸ä¼šå†å†™ç¬¬äºŒä¸ªå‚æ•°äº†ï¼Œå°±æ˜¯è¯´çœç•¥æ‰mapDispatchToProps */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> connect(</span><br><span class=\"line\"> (state) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        state: state</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"> &#125;)(**)</span><br><span class=\"line\"><span class=\"comment\">// actions.js</span></span><br><span class=\"line\"><span class=\"comment\">/* ç°åœ¨ï¼Œå¼‚æ­¥çš„Action Creatorä¸è¦ç›´æ¥è¿”å› Actionï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæºå¸¦ dispatch çš„å‡½æ•°ï¼›è¿™ä¸ªå‡½æ•°ç›¸å½“äºâ€œå»¶é•¿â€äº†dispatchçš„æŒç»­æ—¶é—´ã€‚*/</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> add = <span class=\"function\">() =&gt;</span> <span class=\"function\">(<span class=\"params\">dispatch, getState</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(getState()) <span class=\"comment\">// getStateå¯ä»¥è·å–å…¨å±€æ•°æ®</span></span><br><span class=\"line\">    $.get(<span class=\"string\">&#x27;/shu.txt&#x27;</span>, <span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">var</span> number = <span class=\"built_in\">Number</span>(data);</span><br><span class=\"line\">        dispatch(&#123;<span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;MINUS&quot;</span>, number&#125;)</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> minus = <span class=\"function\">() =&gt;</span> &#123; <span class=\"string\">&quot;type&quot;</span>: <span class=\"string\">&quot;MINUS&quot;</span> &#125;</span><br><span class=\"line\"><span class=\"comment\">// reducer.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> (state = <span class=\"number\">0</span>, action) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span>(action.type) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&quot;ADD&quot;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state + action.number</span><br><span class=\"line\">        <span class=\"keyword\">case</span> <span class=\"string\">&quot;MINUS&quot;</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> state - <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> state;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-react-router4-x\"><a href=\"#9-react-router4-x\" class=\"headerlink\" title=\"9. react-router4.x\"></a>9. react-router4.x</h2><h3 id=\"ä»‹ç»\"><a href=\"#ä»‹ç»\" class=\"headerlink\" title=\"ä»‹ç»\"></a>ä»‹ç»</h3><ul>\n<li><a href=\"https://reacttraining.com/react-router\">å®˜ç½‘</a></li>\n<li>å®‰è£…ï¼š<code>npm install react-router-dom</code></li>\n</ul>\n<h3 id=\"demo\"><a href=\"#demo\" class=\"headerlink\" title=\"demo\"></a>demo</h3><blockquote>\n<p><code>exact</code>è¡¨ç¤ºä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœè·¯å¾„ä¸º <code>path=&quot;/&quot;</code> çš„ <code>Route</code> ä¸è®¾ç½®è¯¥å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨å‘ä¸‹åŒ¹é…è·¯ç”±ï¼Œå³éƒ½ä¼šæ˜¾ç¤ºå‡ºæ¥</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter <span class=\"keyword\">as</span> Router, Route, Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Index</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Home<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">About</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>About<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Users</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h2</span>&gt;</span>Users<span class=\"tag\">&lt;/<span class=\"name\">h2</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AppRouter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Router&gt;</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;nav&gt;</span><br><span class=\"line\">          &lt;ul&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/&quot;</span>&gt;Home&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/about/&quot;</span>&gt;About&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">            &lt;li&gt;</span><br><span class=\"line\">              &lt;Link to=<span class=\"string\">&quot;/users/&quot;</span>&gt;Users&lt;/Link&gt;</span><br><span class=\"line\">            &lt;/li&gt;</span><br><span class=\"line\">          &lt;/ul&gt;</span><br><span class=\"line\">        &lt;/nav&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/&quot;</span> exact component=&#123;Index&#125; /&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/about/&quot;</span> component=&#123;About&#125; /&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">&quot;/users/&quot;</span> component=&#123;Users&#125; /&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    &lt;/Router&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> AppRouter;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"åŠ¨æ€è·¯ç”±\"><a href=\"#åŠ¨æ€è·¯ç”±\" class=\"headerlink\" title=\"åŠ¨æ€è·¯ç”±\"></a>åŠ¨æ€è·¯ç”±</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js å®šä¹‰åŠ¨æ€è·¯ç”±</span></span><br><span class=\"line\">&lt;Route path=<span class=\"string\">&quot;/content/:aid&quot;</span>&gt;&lt;/Route&gt;</span><br><span class=\"line\"><span class=\"comment\">// news.js è·³è½¬</span></span><br><span class=\"line\">&lt;Link to=&#123;<span class=\"string\">`/content/<span class=\"subst\">$&#123;value.aid&#125;</span>`</span>&#125;&gt;&lt;/Link&gt;</span><br><span class=\"line\"><span class=\"comment\">// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Content</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> &#123; match &#125; = <span class=\"built_in\">this</span>.props</span><br><span class=\"line\">          <span class=\"comment\">// è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(match.params.aid)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"get-ä¼ å€¼\"><a href=\"#get-ä¼ å€¼\" class=\"headerlink\" title=\"get ä¼ å€¼\"></a>get ä¼ å€¼</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.js å®šä¹‰åŠ¨æ€è·¯ç”±</span></span><br><span class=\"line\">&lt;Route path=<span class=\"string\">&quot;/content&quot;</span>&gt;&lt;/Route&gt;</span><br><span class=\"line\"><span class=\"comment\">// news.js è·³è½¬</span></span><br><span class=\"line\">&lt;Link to=&#123;<span class=\"string\">`/content?aid=<span class=\"subst\">$&#123;value.aid&#125;</span>`</span>&#125;&gt;&lt;/Link&gt;</span><br><span class=\"line\"><span class=\"comment\">// Content.js è·³åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­è·å–åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Content</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">      <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">const</span> &#123; location &#125; = <span class=\"built_in\">this</span>.props</span><br><span class=\"line\">          <span class=\"comment\">// è·å–åˆ°ä¼ é€’çš„åŠ¨æ€è·¯ç”±å‚æ•°</span></span><br><span class=\"line\">          <span class=\"built_in\">console</span>.log(location.search)</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"js-æ§åˆ¶è·³è½¬\"><a href=\"#js-æ§åˆ¶è·³è½¬\" class=\"headerlink\" title=\"js æ§åˆ¶è·³è½¬\"></a>js æ§åˆ¶è·³è½¬</h3><ol>\n<li>å¼•å…¥ <code>Redirect</code> ç»„ä»¶</li>\n<li>å®šä¹‰ä¸€ä¸ª <code>flag</code></li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">  loginFlag: <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>åœ¨ <code>Render</code> ä¸­åˆ¤æ–­ <code>flag</code>ï¼Œä»è€Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œè·³è½¬</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.state.loginFlag) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Redirect</span> <span class=\"attr\">to</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">pathname:</span> &quot;/&quot; &#125;&#125; /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>æ‰§è¡Œ <code>js</code> è·³è½¬ï¼Œé€šè¿‡ <code>js</code> æ”¹å˜ <code>loginFlag</code> çš„çŠ¶æ€ï¼Œæ”¹å˜ä»¥åï¼Œå°±å¯ä»¥ä»æ–°çš„ <code>render</code> ä¸­é€šè¿‡ <code>Redirect</code> è‡ªå·±è¿›è¡Œè·³è½¬</li>\n</ol>\n<h3 id=\"æ¨¡å—åŒ–è·¯ç”±\"><a href=\"#æ¨¡å—åŒ–è·¯ç”±\" class=\"headerlink\" title=\"æ¨¡å—åŒ–è·¯ç”±\"></a>æ¨¡å—åŒ–è·¯ç”±</h3><blockquote>\n<p>router.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Home <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/Home/&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> About <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/About/&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> User <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/User/&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserList <span class=\"keyword\">from</span> <span class=\"string\">&quot;./User/UserList&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> UserInfo <span class=\"keyword\">from</span> <span class=\"string\">&quot;./User/UserInfo&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> router = [</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    path: <span class=\"string\">&quot;/&quot;</span>,</span><br><span class=\"line\">    component: Home,</span><br><span class=\"line\">    exact: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    path: <span class=\"string\">&quot;/about&quot;</span>,</span><br><span class=\"line\">    component: About</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    path: <span class=\"string\">&quot;/User&quot;</span>,</span><br><span class=\"line\">    component: User,</span><br><span class=\"line\">    routes: [</span><br><span class=\"line\">      <span class=\"comment\">// åµŒå¥—è·¯ç”±è®¾ç½®</span></span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        path: <span class=\"string\">&quot;/user/&quot;</span>,</span><br><span class=\"line\">        component: UserList</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        path: <span class=\"string\">&quot;/user/info&quot;</span>,</span><br><span class=\"line\">        component: UserInfo</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">];</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> router;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>App.js å…¥å£æ–‡ä»¶</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; BrowserRouter <span class=\"keyword\">as</span> Router, Route, Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> router <span class=\"keyword\">from</span> <span class=\"string\">&quot;./router.js&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;Router&gt;</span><br><span class=\"line\">        &lt;div&gt;</span><br><span class=\"line\">          &#123;router.map(<span class=\"function\">(<span class=\"params\">route, key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (route.exact) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> (</span><br><span class=\"line\">                &lt;Route</span><br><span class=\"line\">                  exact</span><br><span class=\"line\">                  key=&#123;key&#125;</span><br><span class=\"line\">                  path=&#123;route.path&#125;</span><br><span class=\"line\">                  render=&#123;<span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">                    <span class=\"comment\">// å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±</span></span><br><span class=\"line\">                    &lt;route.component &#123;...props&#125; routes=&#123;route.routes&#125; /&gt;</span><br><span class=\"line\">                  )&#125;</span><br><span class=\"line\">                /&gt;</span><br><span class=\"line\">              );</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> (</span><br><span class=\"line\">                &lt;Route</span><br><span class=\"line\">                  key=&#123;key&#125;</span><br><span class=\"line\">                  path=&#123;route.path&#125;</span><br><span class=\"line\">                  render=&#123;<span class=\"function\"><span class=\"params\">props</span> =&gt;</span> (</span><br><span class=\"line\">                    <span class=\"comment\">// å‘å­ç»„ä»¶ä¼ é€’å­è·¯ç”±</span></span><br><span class=\"line\">                    &lt;route.component &#123;...props&#125; routes=&#123;route.routes&#125; /&gt;</span><br><span class=\"line\">                  )&#125;</span><br><span class=\"line\">                /&gt;</span><br><span class=\"line\">              );</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;)&#125;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/Router&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>User.js</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Route, Link &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router-dom&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">User</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentWillMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.props.routes);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;div className=<span class=\"string\">&quot;contenr&quot;</span>&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;left&quot;</span>&gt;</span><br><span class=\"line\">            &lt;Link /&gt;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">          &lt;div className=<span class=\"string\">&quot;right&quot;</span>&gt;</span><br><span class=\"line\">            &#123;<span class=\"built_in\">this</span>.props.routes.map(<span class=\"function\">(<span class=\"params\">route, key</span>) =&gt;</span> &#123;</span><br><span class=\"line\">              <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Route</span> <span class=\"attr\">exact</span> <span class=\"attr\">key</span>=<span class=\"string\">&#123;key&#125;</span> <span class=\"attr\">path</span>=<span class=\"string\">&#123;route.path&#125;</span> <span class=\"attr\">component</span>=<span class=\"string\">&#123;route.component&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">            &#125;)&#125;</span><br><span class=\"line\">          &lt;/div&gt;</span><br><span class=\"line\">        &lt;/div&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> User;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"å¸¸ç”¨è·¯ç”±ç»„ä»¶\"><a href=\"#å¸¸ç”¨è·¯ç”±ç»„ä»¶\" class=\"headerlink\" title=\"å¸¸ç”¨è·¯ç”±ç»„ä»¶\"></a>å¸¸ç”¨è·¯ç”±ç»„ä»¶</h3><ul>\n<li>_BrowserRouter_ï¼šä½¿ç”¨ <code>HTML5</code> å†å²è®°å½• <code>API</code> (<code>pushState</code>ï¼Œ<code>replaceState</code> å’Œ<code>popstate</code> äº‹ä»¶)çš„ <code>&lt;Router&gt;</code> æ¥ä¿æŒ <code>UI</code> ä¸ <code>URL</code> çš„åŒæ­¥</li>\n<li>_HashRouter_ï¼šä½¿ç”¨ <code>URL</code> çš„å“ˆå¸Œéƒ¨åˆ†(å³ <code>window.location.hash</code> )çš„&lt;è·¯ç”±å™¨&gt;å¯ä»¥ä¿æŒæ‚¨çš„ <code>UI</code> ä¸ <code>URL</code> åŒæ­¥ã€‚æ³¨æ„ï¼šå“ˆå¸Œå†å²è®°å½•ä¸æ”¯æŒ <code>location.key</code> æˆ– <code>location.state</code>ã€‚ åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬è¯•å›¾ç¼“å’Œè¡Œä¸ºï¼Œä½†æ˜¯æœ‰ä¸€äº›è¾¹ç¼˜æ¡ˆä¾‹æˆ‘ä»¬æ— æ³•è§£å†³ã€‚ ä»»ä½•éœ€è¦æ­¤è¡Œä¸ºçš„ä»£ç æˆ–æ’ä»¶å°†æ— æ³•æ­£å¸¸å·¥ä½œã€‚ ç”±äºæ­¤æŠ€æœ¯ä»…ç”¨äºæ”¯æŒæ—§ç‰ˆæµè§ˆå™¨ï¼Œå› æ­¤æˆ‘ä»¬å»ºè®®æ‚¨å°†æœåŠ¡å™¨é…ç½®ä¸ºä½¿ç”¨<code>&lt;BrowserHistory&gt;</code></li>\n<li>_Link_ï¼šæ¸²æŸ“æˆ <code>a</code> æ ‡ç­¾</li>\n<li>_NavLink_ï¼šä¸€ç§ç‰¹æ®Šç‰ˆæœ¬çš„ <code>&lt;Link&gt;</code>ï¼Œå½“ä¸å½“å‰ <code>URL</code> åŒ¹é…æ—¶ï¼Œå°†å‘æ¸²æŸ“å…ƒç´ æ·»åŠ æ ·å¼å±æ€§ã€‚</li>\n<li>_Redirect_ï¼šé‡å®šå‘</li>\n<li>_Route_ï¼šåœ¨ä½ç½®ä¸è·¯çº¿çš„è·¯å¾„åŒ¹é…æ—¶å‘ˆç°ä¸€äº› <code>UI</code>ã€‚</li>\n<li>_Switch_ï¼šåªæ¸²æŸ“å‘½ä¸­çš„ç¬¬ä¸€ä¸ª <code>&lt;Route&gt;</code> æˆ– <code>&lt;Redirect&gt;</code> ã€‚</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Switchçš„ç”¨æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Switch, Route &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-router&quot;</span>;</span><br><span class=\"line\">&lt;Switch&gt;</span><br><span class=\"line\">  &lt;Route exact path=<span class=\"string\">&quot;/&quot;</span> component=&#123;Home&#125; /&gt;</span><br><span class=\"line\">  &lt;Route path=<span class=\"string\">&quot;/about&quot;</span> component=&#123;About&#125; /&gt;</span><br><span class=\"line\">  &lt;Route path=<span class=\"string\">&quot;/:user&quot;</span> component=&#123;User&#125; /&gt;</span><br><span class=\"line\">  &lt;Route component=&#123;NoMatch&#125; /&gt;</span><br><span class=\"line\">&lt;/Switch&gt;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-context\"><a href=\"#10-context\" class=\"headerlink\" title=\"10. context\"></a>10. context</h2><ul>\n<li>ä»‹ç»</li>\n</ul>\n<blockquote>\n<p>åœ¨ä¸€ä¸ªå…¸å‹çš„ <code>React</code> åº”ç”¨ä¸­ï¼Œæ•°æ®æ˜¯é€šè¿‡ <code>props</code> å±æ€§è‡ªä¸Šè€Œä¸‹ï¼ˆç”±çˆ¶åŠå­ï¼‰è¿›è¡Œä¼ é€’çš„ï¼Œä½†è¿™ç§åšæ³•å¯¹äºæŸäº›ç±»å‹çš„å±æ€§è€Œè¨€æ˜¯æå…¶ç¹ççš„ï¼ˆä¾‹å¦‚ï¼šåœ°åŒºåå¥½ï¼Œ<code>UI</code> ä¸»é¢˜ï¼‰ï¼Œè¿™äº›å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦çš„ã€‚<code>Context</code> æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œä¸å¿…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ <code>props</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¹ççš„ <code>props</code> æ–¹å¼</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Toolbar</span> <span class=\"attr\">theme</span>=<span class=\"string\">&quot;dark&quot;</span> /&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Toolbar</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ThemeButton theme=&#123;props.theme&#125; /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThemeButton</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    &lt;Button theme=&#123;<span class=\"built_in\">this</span>.props.theme&#125;&gt;æŒ‰é’®&lt;/Button&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>context</code></li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œlightâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ThemeContext = React.createContext(<span class=\"string\">&quot;light&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚</span></span><br><span class=\"line\">    <span class=\"comment\">// æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚</span></span><br><span class=\"line\">    <span class=\"comment\">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† â€œdarkâ€ ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;ThemeContext.Provider value=<span class=\"string\">&quot;dark&quot;</span>&gt;</span><br><span class=\"line\">        &lt;Toolbar /&gt;</span><br><span class=\"line\">      &lt;/ThemeContext.Provider&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ToolBar</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;ThemeButton /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ThemeButton</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚</span></span><br><span class=\"line\">  <span class=\"comment\">// React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚</span></span><br><span class=\"line\">  <span class=\"comment\">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdarkâ€ã€‚</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> contextType = ThemeContext;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Button</span> <span class=\"attr\">theme</span>=<span class=\"string\">&#123;this.context&#125;</span>&gt;</span>æŒ‰é’®<span class=\"tag\">&lt;/<span class=\"name\">Button</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-react-hooks\"><a href=\"#11-react-hooks\" class=\"headerlink\" title=\"11. react-hooks\"></a>11. react-hooks</h2><blockquote>\n<p><code>Hook</code> æ˜¯ <code>React 16.8</code> çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ <code>class</code> çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>state</code> ä»¥åŠå…¶ä»–çš„ <code>React</code> ç‰¹æ€§ã€‚</p>\n</blockquote>\n<h3 id=\"11-1-State-Hook\"><a href=\"#11-1-State-Hook\" class=\"headerlink\" title=\"11.1 State Hook\"></a>11.1 State Hook</h3><blockquote>\n<p><code>useState</code> å°±æ˜¯ä¸€ä¸ª <code>Hook</code>ï¼Œç±»ä¼¼ <code>class</code> ç»„ä»¶çš„ <code>this.setState</code>ï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ <code>state</code> å’Œæ—§çš„ <code>state</code> è¿›è¡Œåˆå¹¶ã€‚<code>useState</code> ä¼šè¿”å›ä¸€å¯¹å€¼ï¼š<em>å½“å‰çŠ¶æ€</em> å’Œä¸€ä¸ªè®©ä½  _æ›´æ–°å®ƒçš„å‡½æ•°_ï¼Œä½ å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>\n</blockquote>\n<ul>\n<li>è®¡æ•°å™¨</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å£°æ˜ä¸€ä¸ªå« â€œcountâ€ çš„ state å˜é‡ã€‚</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç­‰ä»·çš„ class ç¤ºä¾‹</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      count: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;p&gt;You clicked &#123;<span class=\"built_in\">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class=\"line\">        &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.setState(&#123; <span class=\"attr\">count</span>: <span class=\"built_in\">this</span>.state.count + <span class=\"number\">1</span> &#125;)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å£°æ˜å¤šä¸ª <code>state</code> å˜é‡</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ExampleWithManyStates</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// å£°æ˜å¤šä¸ª state å˜é‡ï¼</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> [age, setAge] = useState(<span class=\"number\">42</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [fruit, setFruit] = useState(<span class=\"string\">&quot;banana&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [todos, setTodos] = useState([&#123; <span class=\"attr\">text</span>: <span class=\"string\">&quot;Learn Hooks&quot;</span> &#125;]);</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä»€ä¹ˆæ˜¯ <code>Hook</code></li>\n</ul>\n<blockquote>\n<p><code>Hook</code> æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ <code>React state</code> åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚<code>Hook</code> ä¸èƒ½åœ¨ <code>class</code> ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ <code>class</code> ä¹Ÿèƒ½ä½¿ç”¨ <code>React</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>æƒ°æ€§ state</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> [state, setState] = useState(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> initialState = someExpensiveComputation(props);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> initialState;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-2-Effect-Hook\"><a href=\"#11-2-Effect-Hook\" class=\"headerlink\" title=\"11.2 Effect Hook\"></a>11.2 Effect Hook</h3><blockquote>\n<p><code>Effect Hook</code> å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ</p>\n</blockquote>\n<h4 id=\"1-æ— éœ€æ¸…é™¤çš„-Effect\"><a href=\"#1-æ— éœ€æ¸…é™¤çš„-Effect\" class=\"headerlink\" title=\"(1) æ— éœ€æ¸…é™¤çš„ Effect\"></a>(1) æ— éœ€æ¸…é™¤çš„ <code>Effect</code></h4><blockquote>\n<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åªæƒ³åœ¨ <code>React</code> æ›´æ–° <code>DOM</code> ä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ <code>DOM</code>ï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºæˆ‘ä»¬åœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨ <code>class</code> çš„ç¤ºä¾‹</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Example</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123;</span><br><span class=\"line\">      count: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.state.count&#125;</span> times`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidUpdate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.state.count&#125;</span> times`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div&gt;</span><br><span class=\"line\">        &lt;p&gt;You clicked &#123;<span class=\"built_in\">this</span>.state.count&#125; times&lt;/p&gt;</span><br><span class=\"line\">        &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">this</span>.setState(&#123; <span class=\"attr\">count</span>: <span class=\"built_in\">this</span>.state.count + <span class=\"number\">1</span> &#125;)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">      &lt;/div&gt;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>Hook</code> çš„ç¤ºä¾‹</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Example</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [count, setCount] = useState(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.title = <span class=\"string\">`You clicked <span class=\"subst\">$&#123;count&#125;</span> times`</span>;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> setCount(count + <span class=\"number\">1</span>)&#125;&gt;Click me&lt;/button&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>useEffect</code> åšäº†ä»€ä¹ˆï¼Ÿ é€šè¿‡ä½¿ç”¨è¿™ä¸ª <code>Hook</code>ï¼Œä½ å¯ä»¥å‘Šè¯‰ <code>React</code> ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œã€‚<code>React</code> ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œ<code>effect</code>â€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ <code>DOM</code> æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚åœ¨è¿™ä¸ª <code>effect</code> ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† <code>document</code> çš„ <code>title</code> å±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œæ•°æ®è·å–æˆ–è°ƒç”¨å…¶ä»–å‘½ä»¤å¼çš„ APIã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ <code>useEffect</code>ï¼Ÿ å°† <code>useEffect</code> æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ <code>effect</code> ä¸­ç›´æ¥è®¿é—® <code>count</code> <code>state</code> å˜é‡ï¼ˆæˆ–å…¶ä»– <code>props</code>ï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ <code>API</code> æ¥è¯»å–å®ƒ â€”â€” å®ƒå·²ç»ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚<code>Hook</code> ä½¿ç”¨äº† <code>JavaScript</code> çš„é—­åŒ…æœºåˆ¶ï¼Œè€Œä¸ç”¨åœ¨ <code>JavaScript</code> å·²ç»æä¾›äº†è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿˜å¼•å…¥ç‰¹å®šçš„ React APIã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>useEffect</code> ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼Ÿ æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ï¼ˆæˆ‘ä»¬ç¨åä¼šè°ˆåˆ°å¦‚ä½•æ§åˆ¶å®ƒã€‚ï¼‰ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“æ¥å— <code>effect</code> å‘ç”Ÿåœ¨â€œæ¸²æŸ“ä¹‹åâ€è¿™ç§æ¦‚å¿µï¼Œä¸ç”¨å†å»è€ƒè™‘â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚<code>React</code> ä¿è¯äº†æ¯æ¬¡è¿è¡Œ <code>effect</code> çš„åŒæ—¶ï¼Œ<code>DOM</code> éƒ½å·²ç»æ›´æ–°å®Œæ¯•ã€‚</p>\n</blockquote>\n<div class=\"tag-plugin note\"><div class=\"title\"><strong>warning,</strong></div><div class=\"body\"><p>ä¸ <code>componentDidMount</code> æˆ– <code>componentDidUpdate</code> ä¸åŒï¼Œä½¿ç”¨ <code>useEffect</code> è°ƒåº¦çš„ <code>effect</code> ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>effect</code> ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ <code>useLayoutEffect Hook</code> ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ <code>API</code> ä¸ <code>useEffect</code> ç›¸åŒã€‚</p></div></div>\n\n<h4 id=\"2-éœ€è¦æ¸…é™¤çš„-Effect\"><a href=\"#2-éœ€è¦æ¸…é™¤çš„-Effect\" class=\"headerlink\" title=\"(2) éœ€è¦æ¸…é™¤çš„ Effect\"></a>(2) éœ€è¦æ¸…é™¤çš„ <code>Effect</code></h4><blockquote>\n<p>ä¹‹å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•ä½¿ç”¨ä¸éœ€è¦æ¸…é™¤çš„å‰¯ä½œç”¨ï¼Œè¿˜æœ‰ä¸€äº›å‰¯ä½œç”¨æ˜¯éœ€è¦æ¸…é™¤çš„ã€‚ä¾‹å¦‚è®¢é˜…å¤–éƒ¨æ•°æ®æºã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæ¸…é™¤å·¥ä½œæ˜¯éå¸¸é‡è¦çš„ï¼Œå¯ä»¥é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼ç°åœ¨è®©æˆ‘ä»¬æ¥æ¯”è¾ƒä¸€ä¸‹å¦‚ä½•ç”¨ <code>Class</code> å’Œ <code>Hook</code> æ¥å®ç°ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨ <code>class</code> çš„ç¤ºä¾‹</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FriendStatus</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">props</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(props);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.state = &#123; <span class=\"attr\">isOnline</span>: <span class=\"literal\">null</span> &#125;;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.handleStatusChange = <span class=\"built_in\">this</span>.handleStatusChange.bind(<span class=\"built_in\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentDidMount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(<span class=\"built_in\">this</span>.props.friend.id, <span class=\"built_in\">this</span>.handleStatusChange);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">componentWillUnmount</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    ChatAPI.unsubscribeFromFriendStatus(<span class=\"built_in\">this</span>.props.friend.id, <span class=\"built_in\">this</span>.handleStatusChange);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">handleStatusChange</span>(<span class=\"params\">status</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.setState(&#123;</span><br><span class=\"line\">      isOnline: status.isOnline</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.state.isOnline === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;Loading...&quot;</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.state.isOnline ? <span class=\"string\">&quot;Online&quot;</span> : <span class=\"string\">&quot;Offline&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>Hook</code> çš„ç¤ºä¾‹</li>\n</ul>\n<div class=\"tag-plugin note\"><div class=\"title\"><strong>warning,</strong></div><div class=\"body\"><p>çœ¼å°–çš„è¯»è€…å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªç¤ºä¾‹è¿˜éœ€è¦ç¼–å†™ componentDidUpdate æ–¹æ³•æ‰èƒ½ä¿è¯å®Œå…¨æ­£ç¡®ã€‚æˆ‘ä»¬å…ˆæš‚æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œæœ¬ç« èŠ‚ä¸­åç»­éƒ¨åˆ†ä¼šä»‹ç»å®ƒã€‚</p></div></div>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> React, &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FriendStatus</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isOnline, setIsOnline] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleStatusChange</span>(<span class=\"params\">status</span>) </span>&#123;</span><br><span class=\"line\">      setIsOnline(status.isOnline);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class=\"line\">    <span class=\"comment\">// Specify how to clean up after this effect:</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">cleanup</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isOnline === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Loading...&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isOnline ? <span class=\"string\">&quot;Online&quot;</span> : <span class=\"string\">&quot;Offline&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºä»€ä¹ˆè¦åœ¨ <code>effect</code> ä¸­è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Ÿ è¿™æ˜¯ <code>effect</code> å¯é€‰çš„æ¸…é™¤æœºåˆ¶ã€‚æ¯ä¸ª <code>effect</code> éƒ½å¯ä»¥è¿”å›ä¸€ä¸ªæ¸…é™¤å‡½æ•°ã€‚å¦‚æ­¤å¯ä»¥å°†æ·»åŠ å’Œç§»é™¤è®¢é˜…çš„é€»è¾‘æ”¾åœ¨ä¸€èµ·ã€‚å®ƒä»¬éƒ½å±äº <code>effect</code> çš„ä¸€éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>React</code> ä½•æ—¶æ¸…é™¤ <code>effect</code>ï¼Ÿ <code>React</code> ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œã€‚æ­£å¦‚ä¹‹å‰å­¦åˆ°çš„ï¼Œ<code>effect</code> åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <code>React</code> ä¼šåœ¨æ‰§è¡Œå½“å‰ <code>effect</code> ä¹‹å‰å¯¹ä¸Šä¸€ä¸ª <code>effect</code> è¿›è¡Œæ¸…é™¤ã€‚æˆ‘ä»¬ç¨åå°†è®¨è®ºä¸ºä»€ä¹ˆè¿™å°†åŠ©äºé¿å… <code>bug</code> ä»¥åŠå¦‚ä½•åœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶è·³è¿‡æ­¤è¡Œä¸ºã€‚</p>\n</blockquote>\n<div class=\"tag-plugin note\"><div class=\"title\"><strong>warning,</strong></div><div class=\"body\"><p>å¹¶ä¸æ˜¯å¿…é¡»ä¸º <code>effect</code> ä¸­è¿”å›çš„å‡½æ•°å‘½åã€‚è¿™é‡Œæˆ‘ä»¬å°†å…¶å‘½åä¸º <code>cleanup</code> æ˜¯ä¸ºäº†è¡¨æ˜æ­¤å‡½æ•°çš„ç›®çš„ï¼Œä½†å…¶å®ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°æˆ–è€…ç»™èµ·ä¸€ä¸ªåˆ«çš„åå­—ã€‚</p></div></div>\n\n<h3 id=\"11-3-Hook-è§„åˆ™\"><a href=\"#11-3-Hook-è§„åˆ™\" class=\"headerlink\" title=\"11.3 Hook è§„åˆ™\"></a>11.3 Hook è§„åˆ™</h3><h4 id=\"1-åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook\"><a href=\"#1-åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook\" class=\"headerlink\" title=\"(1) åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook\"></a>(1) åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ <code>Hook</code></h4><blockquote>\n<p>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ <code>Hook</code>ï¼Œ ç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ <code>React</code> å‡½æ•°çš„æœ€é¡¶å±‚è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ <code>Hook</code> åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© <code>React</code> èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ <code>useState</code> å’Œ <code>useEffect</code> è°ƒç”¨ä¹‹é—´ä¿æŒ <code>hook</code> çŠ¶æ€çš„æ­£ç¡®ã€‚</p>\n</blockquote>\n<h4 id=\"2-åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook\"><a href=\"#2-åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook\" class=\"headerlink\" title=\"(2) åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook\"></a>(2) åªåœ¨ <code>React</code> å‡½æ•°ä¸­è°ƒç”¨ <code>Hook</code></h4><blockquote>\n<p>ä¸è¦åœ¨æ™®é€šçš„ <code>JavaScript</code> å‡½æ•°ä¸­è°ƒç”¨ <code>Hook</code>ã€‚ä½ å¯ä»¥ï¼š</p>\n</blockquote>\n<ul>\n<li>âœ… åœ¨ <code>React</code> çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ <code>Hook</code></li>\n<li>âœ… åœ¨è‡ªå®šä¹‰ <code>Hook</code> ä¸­è°ƒç”¨å…¶ä»– <code>Hook</code></li>\n</ul>\n<h3 id=\"11-4-è‡ªå®šä¹‰-Hook\"><a href=\"#11-4-è‡ªå®šä¹‰-Hook\" class=\"headerlink\" title=\"11.4 è‡ªå®šä¹‰ Hook\"></a>11.4 è‡ªå®šä¹‰ Hook</h3><blockquote>\n<p>é€šè¿‡è‡ªå®šä¹‰ <code>Hook</code>ï¼Œå¯ä»¥å°†ç»„ä»¶é€»è¾‘æå–åˆ°å¯é‡ç”¨çš„å‡½æ•°ä¸­ã€‚</p>\n</blockquote>\n<h4 id=\"1-æå–è‡ªå®šä¹‰-Hook\"><a href=\"#1-æå–è‡ªå®šä¹‰-Hook\" class=\"headerlink\" title=\"(1) æå–è‡ªå®šä¹‰ Hook\"></a>(1) æå–è‡ªå®šä¹‰ <code>Hook</code></h4><blockquote>\n<p>å½“æˆ‘ä»¬æƒ³åœ¨ä¸¤ä¸ªå‡½æ•°ä¹‹é—´å…±äº«é€»è¾‘æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæå–åˆ°ç¬¬ä¸‰ä¸ªå‡½æ•°ä¸­ã€‚è€Œç»„ä»¶å’Œ <code>Hook</code> éƒ½æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹ŸåŒæ ·é€‚ç”¨è¿™ç§æ–¹å¼ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è‡ªå®šä¹‰ <code>Hook</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œ<code>use</code>â€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ <code>Hook</code>ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>useFriendStatus</code> æ˜¯æˆ‘ä»¬ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„ <code>Hook</code>:</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; useState, useEffect &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">useFriendStatus</span>(<span class=\"params\">friendID</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [isOnline, setIsOnline] = useState(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handleStatusChange</span>(<span class=\"params\">status</span>) </span>&#123;</span><br><span class=\"line\">      setIsOnline(status.isOnline);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> isOnline;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-ä½¿ç”¨è‡ªå®šä¹‰-Hook\"><a href=\"#2-ä½¿ç”¨è‡ªå®šä¹‰-Hook\" class=\"headerlink\" title=\"(2) ä½¿ç”¨è‡ªå®šä¹‰ Hook\"></a>(2) ä½¿ç”¨è‡ªå®šä¹‰ <code>Hook</code></h4><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FriendStatus</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isOnline === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Loading...&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isOnline ? <span class=\"string\">&quot;Online&quot;</span> : <span class=\"string\">&quot;Offline&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">FriendListItem</span>(<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> isOnline = useFriendStatus(props.friend.id);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">li</span> <span class=\"attr\">style</span>=<span class=\"string\">&#123;&#123;</span> <span class=\"attr\">color:</span> <span class=\"attr\">isOnline</span> ? &quot;<span class=\"attr\">green</span>&quot; <span class=\"attr\">:</span> &quot;<span class=\"attr\">black</span>&quot; &#125;&#125;&gt;</span>&#123;props.friend.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-5-Hook-API-ç´¢å¼•\"><a href=\"#11-5-Hook-API-ç´¢å¼•\" class=\"headerlink\" title=\"11.5 Hook API ç´¢å¼•\"></a>11.5 Hook API ç´¢å¼•</h3><blockquote>\n<p>å‚è§ <a href=\"https://react.docschina.org/docs/hooks-reference.html\">Hook API</a></p>\n</blockquote>\n<h4 id=\"11-5-1-åŸºç¡€-Hook\"><a href=\"#11-5-1-åŸºç¡€-Hook\" class=\"headerlink\" title=\"11.5.1 åŸºç¡€ Hook\"></a>11.5.1 åŸºç¡€ Hook</h4><h5 id=\"useState\"><a href=\"#useState\" class=\"headerlink\" title=\"useState\"></a>useState</h5><blockquote>\n<p><a href=\"#linkUseState\">ç‚¹å‡»è·³è½¬</a></p>\n</blockquote>\n<h5 id=\"useEffect\"><a href=\"#useEffect\" class=\"headerlink\" title=\"useEffect\"></a>useEffect</h5><blockquote>\n<p><a href=\"#linkUseEffect\">ç‚¹å‡»è·³è½¬</a></p>\n</blockquote>\n<h5 id=\"useContext\"><a href=\"#useContext\" class=\"headerlink\" title=\"useContext\"></a>useContext</h5><blockquote>\n<p>è®¢é˜… <code>context</code> çš„å˜åŒ–ï¼Œæ„Ÿè§‰å°±æ˜¯å¯¹äºè·å– <code>context</code> çš„å€¼æ¢äº†ä¸€ç§å†™æ³•è€Œå·²ã€‚ç›¸å¯¹äºä¹‹å‰çš„å†™æ³•ï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­æ·»åŠ  <code>context</code> æ›´åŠ ç®€å•ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> context = React.createContext(&#123;&#125;)</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; Provider, Consumer  &#125; = context;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// hooksçš„å†™æ³•</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">App</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">        &lt;Provider value=&#123;&#123; <span class=\"attr\">name</span>: <span class=\"string\">&#x27;li&#x27;</span> &#125;&#125;&gt;</span><br><span class=\"line\">            &lt;Hello/&gt;</span><br><span class=\"line\">        &lt;/Provider&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> value = useContext(context);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>value: &#123;value.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// åŸæœ¬çš„å†™æ³•</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span> (<span class=\"params\">props</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">render</span> (<span class=\"params\">&#123;name&#125;</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>value: &#123;value.name&#125;<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;Consumer&gt;</span><br><span class=\"line\">        &#123;render&#125;</span><br><span class=\"line\">      &lt;/Consumer&gt;</span><br><span class=\"line\">    )</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-5-2-é¢å¤–çš„-Hook\"><a href=\"#11-5-2-é¢å¤–çš„-Hook\" class=\"headerlink\" title=\"11.5.2 é¢å¤–çš„ Hook\"></a>11.5.2 é¢å¤–çš„ Hook</h4><h5 id=\"useReducer\"><a href=\"#useReducer\" class=\"headerlink\" title=\"useReducer\"></a>useReducer</h5><blockquote>\n<p>ç±»ä¼¼äº <code>redux</code> é‚£æ ·çš„çŠ¶æ€æ›´æ–°æ–¹æ¡ˆã€‚ä½¿ç”¨åœºæ™¯ï¼ˆåŸºæœ¬ä¸Šå°±æ˜¯ <code>redux</code> çš„åº”ç”¨åœºæ™¯ï¼‰ï¼Œç®¡ç†çš„çŠ¶æ€å€¼æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”é”®å€¼è¾ƒå¤šã€‚<code>state</code> æ¯ä¸ª <code>key</code> ä¿®æ”¹çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å•ç‹¬æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ç®¡ç†ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> initialState = &#123; <span class=\"attr\">count</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">reducer</span>(<span class=\"params\">state, action</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action.type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;increment&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">count</span>: state.count + <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;decrement&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">count</span>: state.count - <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Counter</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> [state, dispatch] = useReducer(reducer, initialState);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;&gt;</span><br><span class=\"line\">      Count: &#123;state.count&#125;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;increment&quot;</span> &#125;)&#125;&gt;+&lt;/button&gt;</span><br><span class=\"line\">      &lt;button onClick=&#123;<span class=\"function\">() =&gt;</span> dispatch(&#123; <span class=\"attr\">type</span>: <span class=\"string\">&quot;decrement&quot;</span> &#125;)&#125;&gt;-&lt;/button&gt;</span><br><span class=\"line\">    &lt;/&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useCallback\"><a href=\"#useCallback\" class=\"headerlink\" title=\"useCallback\"></a>useCallback</h5><blockquote>\n<p>ä»…åœ¨æŒ‡å®šçš„ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å¼•ç”¨ï¼Œå‡½æ•°ä½“å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> memoizedCallback = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  doSomething(a, b);</span><br><span class=\"line\">&#125;, [a, b]);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™æ ·ä½¿ç”¨çš„å¥½å¤„ï¼šä¸ä¼šåœ¨æ¯æ¬¡ç»„ä»¶ <code>render</code> çš„æ—¶å€™ï¼Œé‡æ–°ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼ŒèŠ‚çœå¼€é”€ã€‚ä¾‹å¦‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cacheCallback = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    doSomething(a, b);</span><br><span class=\"line\">  &#125;, [a, b]);</span><br><span class=\"line\">  <span class=\"comment\">// å’Œä¸‹é¢è¿™æ ·çš„å½¢å¼ç›¸æ¯”, æ¯æ¬¡ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ª doSometing å‡½æ•°</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doSometing</span>(<span class=\"params\">a, b</span>) </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥ä¿æŒå‡½æ•°çš„å¼•ç”¨ä¿æŒä¸å˜ã€‚æˆ‘ä»¬éƒ½çŸ¥é“åœ¨ç±»ç»„ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡ <code>this.method</code> çš„æ–¹å¼ç»‘å®šçš„ï¼Œè¿™æ ·åšçš„æ–¹å¼æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå¯¹æ–¹æ³•çš„å¼•ç”¨ä¸€ç›´ä¿æŒä¸å˜ã€‚ é‚£ä¹ˆåœ¨å‡½æ•°ç»„ä»¶å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ <code>useCallback</code> æ¥å®ç°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯ä»¥å®ç°åœ¨å­ç»„ä»¶æŠŠè¯¥å›è°ƒä½œä¸ºä¾èµ–å¤„ç†ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Parent</span>(<span class=\"params\">&#123; a, b &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> cacheCallback = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    doSometing(a, b);</span><br><span class=\"line\">  &#125;, [a, b]);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Child</span> <span class=\"attr\">handler</span>=<span class=\"string\">&#123;cacheCallback&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Child</span>(<span class=\"params\">&#123; handler &#125;</span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    handler();</span><br><span class=\"line\">  &#125;, [handler]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useMemo\"><a href=\"#useMemo\" class=\"headerlink\" title=\"useMemo\"></a>useMemo</h5><blockquote>\n<p>ç±»ä¼¼äº <code>vue</code> çš„ <code>computed</code>ï¼Œåœ¨ä¾èµ–å‘ç”Ÿå˜åŒ–çš„æ—¶å€™é‡æ–°è®¡ç®—ç¼“å­˜å€¼ã€‚å…¶å®è‡ªå·±å®ç°èµ·æ¥ä¹Ÿå¾ˆå®¹æ˜“ï¼Œå’Œ <code>vue</code> çš„è®¡ç®—å±æ€§ä¸åŒçš„æ˜¯ï¼Œ<code>vue</code> çš„è®¡ç®—å±æ€§æ˜¯è‡ªåŠ¨æ”¶é›†ä¾èµ–çš„ï¼Œè€Œä½¿ç”¨ <code>useMeno</code> éœ€è¦æ‰‹åŠ¨åœ¨æ•°ç»„ç§ä¼ å…¥ä¾èµ–é¡¹ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> memoizedValue = useMemo(<span class=\"function\">() =&gt;</span> computeExpensiveValue(a, b), [a, b]);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code></p>\n</blockquote>\n<h5 id=\"useRef\"><a href=\"#useRef\" class=\"headerlink\" title=\"useRef\"></a>useRef</h5><blockquote>\n<p>æ•…åæ€ä¹‰ï¼Œè¯¥ <code>hook</code> ä¸»è¦æ˜¯ç”¨æ¥è·å–ç»„ä»¶å®ä¾‹æˆ–è€…æˆ–è€… <code>dom</code> èŠ‚ç‚¹ã€‚ ä½†æ˜¯å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹ï¼Œæ˜¯å¯ä»¥è¿”å›ä¸€ä¸ªåœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå¼•ç”¨ä¸å˜çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> elRef = uesRef(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;elRef&#125;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”¨æ¥å­˜å‚¨æ•°æ®çš„è¯ï¼Œè€ƒè™‘ä¸‹é¢çš„åœºæ™¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> handler = <span class=\"function\">() =&gt;</span> &#123;&#125;; <span class=\"comment\">// äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸ä½¿ç”¨ useRef, å¯ä»¥ä½¿ç”¨å‡½æ•°å¤–éƒ¨çš„ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨æ•°æ®</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, handler);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> moveScroll = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">&quot;scorll&quot;</span>, handler);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div onClick=&#123;moveScroll&#125; ref=&#123;elRef&#125;&gt;</span><br><span class=\"line\">      ç§»é™¤scrollç›‘å¬</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨useRefçš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ å†…èšã€‚ä½†æ˜¯å‰ææ˜¯å¿…é¡»è¦ç†è§£useRefè¿™ä¸ªhooksã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> handler = useRef(<span class=\"literal\">null</span>);</span><br><span class=\"line\">  handler.current = <span class=\"function\">() =&gt;</span> &#123;&#125;; <span class=\"comment\">// äº‹ä»¶å¤„ç†</span></span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">&quot;scroll&quot;</span>, handler.current);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> moveScroll = useCallback(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">&quot;scorll&quot;</span>, handler.current);</span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div onClick=&#123;moveScroll&#125; ref=&#123;elRef&#125;&gt;</span><br><span class=\"line\">      ç§»é™¤scrollç›‘å¬</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useImperativeHandle\"><a href=\"#useImperativeHandle\" class=\"headerlink\" title=\"useImperativeHandle\"></a>useImperativeHandle</h5><blockquote>\n<p><code>useImperativeHandle</code> å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ <code>ref</code> æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> Fancy = React.forwardRef(<span class=\"function\">(<span class=\"params\">props, ref</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;div&gt;</span><br><span class=\"line\">      &lt;input type=<span class=\"string\">&quot;text&quot;</span> ref=&#123;ref&#125; /&gt;</span><br><span class=\"line\">    &lt;/div&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Hello</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ref = useRef(<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  useEffect(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;current&quot;</span>, ref); <span class=\"comment\">// &#123; current: Input &#125;</span></span><br><span class=\"line\">  &#125;, []);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">Fancy</span> <span class=\"attr\">ref</span>=<span class=\"string\">&#123;ref&#125;</span> /&gt;</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"useLayoutEffect\"><a href=\"#useLayoutEffect\" class=\"headerlink\" title=\"useLayoutEffect\"></a>useLayoutEffect</h5><blockquote>\n<p>å‡½æ•°ç­¾åå’Œ <code>useEffect</code> æ˜¯ä¸€æ ·çš„ï¼Œ å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– <code>DOM</code> å¸ƒå±€å¹¶ <code>åŒæ­¥</code> è§¦å‘é‡æ¸²æŸ“ã€‚</p>\n</blockquote>\n<h5 id=\"useDebugValue\"><a href=\"#useDebugValue\" class=\"headerlink\" title=\"useDebugValue\"></a>useDebugValue</h5><blockquote>\n<p>ç”¨æ¥ç»™ <code>hooks</code> æ·»åŠ ä¸Šæ‰“å°ä¿¡æ¯ã€‚</p>\n</blockquote>\n"},{"title":"å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•","date":"2020-02-16T16:00:00.000Z","_content":"\n## 1. å•å…ƒæµ‹è¯•\n\nå¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ï¼Œåœ¨å‰ç«¯ä¸€èˆ¬ä¸ºä¸€ä¸ªæ¨¡å—ã€‚\n\n### 1.1 å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\n\n1. æµ‹è¯•è¦†ç›–ç‡é«˜\n2. ä¸šåŠ¡è€¦åˆåº¦é«˜\n3. ä»£ç é‡å¤§\n4. è¿‡äºç‹¬ç«‹\n\n### 1.2 æ€»ç»“\n\nåœ¨æŸäº›åœºæ™¯ä¸‹é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•ï¼ŒæŸäº›åœºæ™¯ä¸‹ä¸é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•\n\n## 2. é›†æˆæµ‹è¯•\n\nåˆå«ç»„è£…æµ‹è¯•æˆ–è”åˆæµ‹è¯•ï¼Œåœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†æ‰€æœ‰æ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ï¼ˆå¦‚æ ¹æ®ç»“æ„å›¾ï¼‰ç»„è£…æˆä¸ºå­ç³»ç»Ÿæˆ–ç³»ç»Ÿï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚\n\n## 3. jest ä¸­çš„åŒ¹é…å™¨\n\n[jest åŒ¹é…å™¨å®˜ç½‘](https://jestjs.io/docs/en/expect)\n\nä¿®æ”¹ `jest`Â  é»˜è®¤é…ç½®å‘½ä»¤ `npx jest --init`\n\n### 3.1 å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\n\n`jest --watchAll` ä¸€æ—¦æŸä¸ªæµ‹è¯•ç”¨ä¾‹å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹éƒ½å°†ä¼šé‡æ–°æ‰§è¡Œ\n\n`jest --watch`Â  é»˜è®¤è¿›å…¥ `o`Â  æ¨¡å¼ï¼Œå³åªå¯¹å‘ç”Ÿå˜åŒ–çš„æµ‹è¯•ç”¨ä¾‹é‡æ–°æ‰§è¡Œ\n\n### 3.2 å¸¸ç”¨åŒ¹é…å™¨\n\n### 3.2.1 toBe()\n\n```jsx\ntest(\"æµ‹è¯•toBeçš„åŒ¹é…å™¨\", () => {\n  const a = { name: \"å¼ ä¸‰\" };\n  expect(a).toBe({ name: \"å¼ ä¸‰\" });\n});\n// âŒ å› ä¸ºå¼•ç”¨ç±»å‹ä½¿ç”¨toBeä¸æ˜¯å…¨ç­‰æ•ˆæœ\n```\n\n`toBe` åŒ¹é…å™¨ç±»ä¼¼äº `===`ã€‚\n\n---\n\n### 3.2.2 toEqual()\n\n```jsx\ntest(\"æµ‹è¯•toEqualçš„åŒ¹é…å™¨\", () => {\n  const a = { name: \"å¼ ä¸‰\" };\n  expect(a).toBe({ name: \"å¼ ä¸‰\" });\n});\n// âœ… å› ä¸ºtoEqualåªæ˜¯å¯¹ç»“æœçš„åŒ¹é…ï¼Œè€Œä¸æ˜¯å…¨ç­‰æ•ˆæœ\n```\n\n`toEqual` åŒ¹é…å™¨åªæ˜¯å¯¹ç»“æœç›¸ç­‰ä¸å¦è¿›è¡ŒåŒ¹é…\n\n---\n\n### 3.2.3 toBeNull()\n\n```jsx\ntest(\"æµ‹è¯•toBeNullçš„åŒ¹é…å™¨\", () => {\n  const a = null;\n  expect(a).toBeNull();\n});\n// âœ…\n```\n\n`toBeNull` æ˜¯å¯¹ `null` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.4 toBeUndefined()\n\n```jsx\ntest(\"æµ‹è¯•toBeUndefinedçš„åŒ¹é…å™¨\", () => {\n  const a = undefined;\n  expect(a).toBeUndefined();\n});\n// âœ…\n```\n\n`toBeUndefined` æ˜¯å¯¹ `undefined` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.5 toBeDefined()\n\n```jsx\ntest(\"æµ‹è¯•toBeDefinedçš„åŒ¹é…å™¨\", () => {\n  const a = 1;\n  expect(a).toBeDefined();\n});\n// âœ…\n```\n\n`toBeDefined` æ˜¯å¯¹å·²ç»å®šä¹‰çš„å€¼çš„åŒ¹é…ï¼Œè‹¥ä¸º `undefined` åˆ™ä¸é€šè¿‡\n\n---\n\n### 3.2.6 toBeTruthy()\n\n```jsx\ntest(\"æµ‹è¯•toBeTruthyçš„åŒ¹é…å™¨\", () => {\n  const a = 0;\n  expect(a).toBeTruthy();\n});\n// 0 => âŒï¼Œå› ä¸º toBeTruthy æ˜¯å¯¹ true å€¼çš„åŒ¹é…\n// 1 => âœ…\n```\n\n`toBeTruthy` æ˜¯å¯¹ `true` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.7 toBeFalsy()\n\n```jsx\ntest(\"æµ‹è¯•toBeFalsyçš„åŒ¹é…å™¨\", () => {\n  const a = 1;\n  expect(a).toBeFalsy();\n});\n// 1 => âŒ\n// 0 => âœ…\n```\n\n`toBeFalsy` æ˜¯å¯¹ `false` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.8 toBeGreaterThan()\n\n```jsx\ntest(\"æµ‹è¯•toBeGreaterThanåŒ¹é…å™¨\", () => {\n  const count = 10;\n  expect(a).toBeGreaterThan(9);\n});\n// âœ…\n```\n\n`toBeGreaterThan` ç›¸å½“äº `>`\n\n---\n\n### 3.2.9 toBeLessThan()\n\n```jsx\ntest(\"æµ‹è¯•toBeLessThanåŒ¹é…å™¨\", () => {\n  const count = 8;\n  expect(a).toBeLessThan(9);\n});\n// âœ…\n```\n\n`toBeLessThan` ç›¸å½“äº `<`\n\n---\n\n### 3.2.10 toBeGreaterThanOrEqual()\n\n```jsx\ntest(\"æµ‹è¯•toBeGreaterThanOrEqualåŒ¹é…å™¨\", () => {\n  const count = 10;\n  expect(a).toBeGreaterThanOrEqual(10);\n});\n// âœ…\n```\n\n`toBeGreaterThanOrEqual` ç›¸å½“äº `>=`\n\n---\n\n### 3.2.11 toBeLessThanOrEqual()\n\n```jsx\ntest(\"æµ‹è¯•toBeLessThanOrEqualåŒ¹é…å™¨\", () => {\n  const count = 10;\n  expect(a).toBeLessThanOrEqual(10);\n});\n// âœ…\n```\n\n`toBeLessThanOrEqual` ç›¸å½“äº `<=`\n\n---\n\n### 3.2.12 toBeCloseTo()\n\n```jsx\ntest(\"æµ‹è¯•toBeCloseToåŒ¹é…å™¨\", () => {\n  const one = 0.1;\n  const two = 0.2;\n  expect(one + two).toEqual(0.3);\n});\n// âŒ å› ä¸ºæµ®ç‚¹ç²¾åº¦ä¸åŒ\n\ntest(\"æµ‹è¯•toBeCloseToåŒ¹é…å™¨\", () => {\n  const one = 0.1;\n  const two = 0.2;\n  expect(one + two).toBeCloseTo(0.3);\n});\n// âœ…\n```\n\n`toBeCloseTo` ä¸ºäº†è§£å†³æµ®ç‚¹ç²¾åº¦ä¸åŒå¯¼è‡´çš„æ— æ³•åŒ¹é…çš„é—®é¢˜\n\n---\n\n### 3.2.13 toMatch()\n\n```jsx\ntest(\"æµ‹è¯•toMatchåŒ¹é…å™¨\", () => {\n  const str = \"å¼ ä¸‰ã€æå››ã€ç‹äº”\";\n  expect(str).toMatch(\"æå››\");\n});\n// âœ…\n\ntest(\"æµ‹è¯•toMatchåŒ¹é…å™¨\", () => {\n  const str = \"å¼ ä¸‰ã€æå››ã€ç‹äº”\";\n  expect(str).toMatch(/æå››/);\n});\n// âœ…\n```\n\n`toMatch` ä¸ºå­—ç¬¦ä¸²åŒ…å«åŒ¹é…å™¨ï¼Œç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­åŒ…å«çš„å†…å®¹ï¼Œä¹Ÿå¯ä¼ æ­£åˆ™è¡¨è¾¾å¼\n\n---\n\n### 3.2.14 toContain()\n\n```jsx\ntest(\"æµ‹è¯•toContainåŒ¹é…å™¨\", () => {\n  const arr = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"];\n  expect(arr).toContain(\"å¼ ä¸‰\");\n});\n// âœ…\n\ntest(\"æµ‹è¯•toContainåŒ¹é…å™¨\", () => {\n  const arr = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"];\n  const data = new Set(arr);\n  expect(data).toContain(\"å¼ ä¸‰\");\n});\n```\n\n`toContain` ä¸ºæ•°æ®åŒ…å«åŒ¹å™¨ï¼Œç”¨æ¥åŒ¹é…æ•°ç»„ä¸­åŒ…å«çš„é¡¹ã€‚åŒæ—¶å¯å®Œå…¨å…¼å®¹ `Set` æµ‹è¯•\n\n---\n\n### 3.2.15 toHaveLength()\n\n```jsx\n/// functions.js\nexport default {\n  getIntArray(num) {\n    if (!Number.isInteger(num)) {\n      throw Error('\"getIntArray\"åªæ¥å—æ•´æ•°ç±»å‹çš„å‚æ•°');\n    }\n    let result = [];\n    for (let i = 0, len = num; i < len; i++) {\n      result.push(i);\n    }\n    return result;\n  }\n};\n\n/// functions.test.js\nimport { getIntArray } from \"../src/functions\";\ntest(\"getIntArray(3)è¿”å›çš„æ•°ç»„é•¿åº¦åº”è¯¥ä¸º3\", () => {\n  expect(getIntArray(3)).toHaveLength(3);\n});\n```\n\n`toHaveLength`å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥æµ‹è¯•å­—ç¬¦ä¸²å’Œæ•°ç»„ç±»å‹çš„é•¿åº¦æ˜¯å¦æ»¡è¶³é¢„æœŸã€‚\n\n### 3.2.16 toThrow()\n\n```jsx\nconst throwNewErrorFunc = () => {\n  throw new Error(\"this is a new error\");\n};\n\ntest(\"æµ‹è¯•toThrowåŒ¹é…å™¨\", () => {\n  expect(throwNewErrorFunc).toThrow();\n});\n```\n\n`toThrow` æ˜¯ä¸“é—¨å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†çš„åŒ¹é…å™¨ï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸ªæ–¹æ³•ä¼šä¸ä¼šæŠ›å‡ºå¼‚å¸¸\n\n```jsx\nconst throwNewErrorFunc = () => {\n  throw new Error(\"this is a new error\");\n};\n\ntest(\"æµ‹è¯•toThrowåŒ¹é…å™¨\", () => {\n  expect(throwNewErrorFunc).toThrow(\"this is a new error\");\n});\n```\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¿™ä¸ªåŒ¹é…å™¨ä¸­åŠ ä¸€äº›å­—ç¬¦ä¸²ï¼Œæ„æ€å°±æ˜¯æŠ›å‡ºçš„å¼‚å¸¸å¿…é¡»å’Œå­—ç¬¦ä¸²ç›¸å¯¹åº”ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸åŒ¹é…ï¼Œä¹Ÿæ²¡åŠæ³•é€šè¿‡å¼‚å¸¸æµ‹è¯•ã€‚\n\n---\n\n### 3.2.17 not()\n\n```jsx\nconst throwNewErrorFunc = () => {\n  throw new Error(\"this is a new error\");\n};\n\ntest(\"æµ‹è¯•notåŒ¹é…å™¨\", () => {\n  expect(throwNewErrorFunc).not.toThrow();\n});\n```\n\n`not` åŒ¹é…å™¨æ˜¯ `jest` ä¸­æ¯”è¾ƒç‰¹æ®Šçš„åŒ¹é…å™¨ï¼Œæ„æ€å°±æ˜¯ â€œç›¸åâ€ æˆ–è€…è¯´ â€œå–åâ€ .æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå°±å¯ä»¥ä½¿ç”¨`not` åŒ¹é…å™¨ã€‚\n\n---\n\n### 3.3 å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\n\n### 3.3.1 å›è°ƒå‡½æ•°å¼\n\n```jsx\n/// fetchData.js\nimport axios from \"axios\";\nexport const fetchData = fn => {\n  axios.get(\"http://a.jspang.com/jestTest.json\").then(res => {\n    fn(res.data);\n  });\n};\n\n/// fetchData.test.js\nimport { fetchData } from \"./fetchData.js\";\ntest(\"fetchDataæµ‹è¯•\", done => {\n  fetchData(data => {\n    expect(data).toEqual({ success: true });\n    done();\n  });\n});\n```\n\nå¿…é¡»åŠ å…¥ä¸€ä¸ª `done` æ–¹æ³•ï¼Œä¿è¯æˆ‘ä»¬çš„å›è°ƒå·²ç»å®Œæˆäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¡¨ç¤ºæµ‹è¯•å®Œæˆ\n\n---\n\n### 3.3.2 ç›´æ¥è¿”å› Promise\n\n```jsx\n/// fetchTwoData.js\nimport axios from \"axios\";\nexport const fetchTwoData = () => axios.get(\"http://a.jspang.com/jestTest.json\";\n\n/// fetchTwoData.test.js\nimport { fetchTwoData } from \"./fetchTwoData.js\";\ntest(\"fetchTwoDataçš„æµ‹è¯•ç”¨ä¾‹\", () => {\n return fetchTwoData().then(res => {\n  expect(res.data).toEqual({ success: true });\n });\n});\n```\n\næ³¨æ„è¦ `return`\n\n### 3.3.3 ä¸å­˜åœ¨çš„æ¥å£\n\n```jsx\n/// fetchData.js\nexport const fetchData = () => {\n  return axios.get(\"http://a.jspang.com/jestTest_error.json\"); // æ­¤åœ°å€å¹¶ä¸å­˜åœ¨\n};\n\n/// fetchData.test.js\n// æ–¹å¼1\ntest(\"fetchDataæµ‹è¯•\", () => {\n  expect.assertions(1); // æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect\n  return fetchData().catch(err => {\n    expect(err.toString().indexOf(\"404\") > -1).toBe(true);\n  });\n});\n\n// æ–¹å¼2\ntest(\"fetchDataæµ‹è¯•\", async () => {\n  return await fetchData().rejects.toThrow();\n});\n\n// æ–¹å¼3\ntest(\"fetchDataæµ‹è¯•\", async () => {\n  expect().assertions(1); // æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect\n  try {\n    await fetchData();\n  } catch (err) {\n    expect(err.toString().indexOf(\"404\") > -1).toBe(true);\n  }\n});\n```\n\nå› ä¸ºæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨äº† `catch` æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰ä¼šèµ°è¿™ä¸ªæ–¹æ³•ï¼Œè€Œç°åœ¨æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œå°±ä¸ä¼šèµ°è¿™ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œ`jest` å°±é»˜è®¤è¿™ä¸ªç”¨ä¾‹é€šè¿‡äº†æµ‹è¯•ã€‚å› æ­¤å¿…é¡»è¦æ‰§è¡Œæ–­è¨€ï¼Œå³å¿…é¡»è®©å…¶æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚\n\n### 3.3.4 async/await\n\n```jsx\n/// fetchData.js\nexport const fetchData = () => {\n return axios.get(\"http://a.jspang.com/jestTest.json\"); // æ­¤åœ°å€å¹¶ä¸å­˜åœ¨};\n\n/// fetchData.test.js\n// æ–¹å¼1\ntest(\"fetchDataæµ‹è¯•\", async () => {\n await expect(fetchData()).resolves.toMatchObject({\n  data: {\n   success: true\n  }\n });\n});\n\n// æ–¹å¼2\ntest(\"fetchDataæµ‹è¯•\", async () => {\n const response = await fetchData();\n expect(response.data).toEqual({ success: true });\n});\n```\n\nè¿™æ—¶å€™æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨ `async....await...` çš„å½¢å¼ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº† `resolves` ç”¨äºæŠŠç°æœ‰å¯¹è±¡è½¬æ¢æˆ `Promise` å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ `jest` ä¸­çš„ `toMatchObject` è¿›è¡ŒåŒ¹é…å¯¹è±¡ä¸­çš„å±æ€§ã€‚\n\n## 4. jest ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\n\n### 4.1 beforeAll()\n\n`beforeAll()`é’©å­å‡½æ•°çš„æ„æ€æ˜¯åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰è¿›è¡Œæ‰§è¡Œã€‚\n\n### 4.2 afterAll()\n\n`afterAll()`é’©å­å‡½æ•°æ˜¯åœ¨å®Œæˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰æ‰§è¡Œçš„å‡½æ•°ã€‚\n\n### 4.3 beforeEach()\n\n`beforeEach()`é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚\n\n### 4.4 afterEach()\n\n`afterEach()`é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯æ¬¡æµ‹è¯•ç”¨ä¾‹å®Œæˆæµ‹è¯•ä¹‹åæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚\n\n## 5. jest æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\n\n```jsx\n/// eat.js\nexport default class Eat {\n  setName(number) {\n    this.name = number === 1 ? \"æ°´é¥º\" : \"ç«é”…\";\n  }\n  setDesc() {\n    this.desc = this.user + \"æè¿°\";\n  }\n  setMoney() {\n    this.money = this.name === \"æ°´é¥º\" ? 80 : 300;\n  }\n}\n\n/// eat.test.js\nimport Eat from \"./eat\";\nconst eat = new Eat();\nbeforeAll(() => {\n  console.log(\"å¼€å§‹åƒé¥­\");\n});\nafterAll(() => {\n  console.log(\"åƒå®Œé¥­äº†\");\n});\ndescribe(\"æ°´é¥ºç›¸å…³å†…å®¹\", () => {\n  test(\"æµ‹è¯•æ°´é¥ºæè¿°\", () => {\n    eat.setName(1);\n    eat.setDesc();\n    expect(eat.desc).toEqual(\"æ°´é¥ºæè¿°\");\n  });\n  test(\"æµ‹è¯•æ°´é¥ºä»·æ ¼\", () => {\n    eat.setName(1);\n    eat.setMoney();\n    expect(eat.money).toEqual(80);\n  });\n});\ndescribe(\"ç«é”…ç›¸å…³å†…å®¹\", () => {\n  test(\"æµ‹è¯•ç«é”…æè¿°\", () => {\n    eat.setName(2);\n    eat.setDesc();\n    expect(eat.desc).toEqual(\"ç«é”…æè¿°\");\n  });\n  test(\"æµ‹è¯•ç«é”…ä»·æ ¼\", () => {\n    eat.setName(2);\n    eat.setMoney();\n    expect(eat.money).toEqual(300);\n  });\n});\n```\n\n## 6. é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\n\n### 6.1 é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\n\nå³çˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°åœ¨å­ä½œç”¨åŸŸä¸‹ä¹Ÿç”Ÿæ•ˆ\n\n### 6.2 é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\n\nåŒä½œç”¨åŸŸä¸‹å°†éƒ½ä¼šæ‰§è¡Œ\n\n### 6.3 å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\n\nä¼˜å…ˆçˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°ï¼Œå…¶æ¬¡æ‰§è¡Œå­ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°\n\n### 6.4 åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\n\nå¦‚æœå°†å¯¹åº”é€»è¾‘å†™åˆ°äº†éé’©å­å‡½æ•°çš„ä½ç½®ï¼Œé‚£ä¹ˆå°†ä¼šä¼˜å…ˆæ‰§è¡Œï¼Œç„¶åæ‰ä¼šæ‰§è¡Œé’©å­å‡½æ•°\n\n### 6.5 å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\n\nå½“ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­çš„æµ‹è¯•ç”¨ä¾‹å˜å¾—è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œå‡å¦‚æ­¤æ—¶æˆ‘ä»¬ç›¸å¯¹å…¶ä¸­æŸä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ `test.only`\n\n```jsx\ntest.only(\"æµ‹è¯•ç”¨ä¾‹\", () => {\n  expect(1 + 1).toBe(2);\n});\n```\n\n## 7. Jest ä¸­çš„ Mock\n\n### 7.1 ä½œç”¨\n\n### 7.1.1 æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ `this` å’Œè°ƒç”¨é¡ºåº\n\n### 7.1.2 å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\n\n### 7.1.3 æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\n\n### 7.2 åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback();\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  expect(func).toBeCalled(); // æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨\n});\n```\n\n`jest.fn()`Â  å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ•è·å‡½æ•°çš„è°ƒç”¨\n\n### 7.3 jest.fn().mock.calls åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.calls.length).toBe(2); // æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨2æ¬¡\n  expect(func.mock.calls[0]).toEqual([\"å¼ ä¸‰\"]); // æµ‹è¯•ç”¨ä¾‹ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ \"å¼ ä¸‰\"\n});\n```\n\næ­¤å¤„æ‰“å° `func.mock`Â  å°†ä¼šæ‰“å°ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç›¸åº”çš„ç”¨ä¾‹æµ‹è¯•\n\n### 7.4 jest.fn().mockReturnValue() åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  // func.mockReturnValue(\"Common\")\n  // æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›å€¼éƒ½æ˜¯ \"Common\"\n  func.mockReturnValueOnce(\"A\"); // ç¬¬ä¸€æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› \"A\"\n  func.mockReturnValueOnce(\"B\"); // ç¬¬äºŒæ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› \"B\"\n  func.mockReturnValueOnce(\"C\"); // ç¬¬ä¸‰æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› \"C\"\n  runCallback(func);\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.results[0].value).toBe(\"A\");\n  expect(func.mock.results[1].value).toBe(\"B\");\n  expect(func.mock.results[2].value).toBe(\"C\");\n});\n```\n\n`func.mockReturnValue()`Â  å°†å¯¹æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›çš„å€¼ç”Ÿæ•ˆ\n\n`func.mockReturnValueOnce()`Â  æ‰§è¡Œåˆ°ç¬¬å‡ æ¬¡å°±å¯¹ç¬¬å‡ ä¸ªå‡½æ•°çš„æ¨¡æ‹Ÿè¿”å›å€¼ç”Ÿæ•ˆ\n\næ”¯æŒé“¾å¼è°ƒç”¨\n\n### 7.5 jest.fn().mock.invocationCallOrder åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.invocationCallOrder).toEqual([1, 2, 3]);\n});\n```\n\n### 7.6 jest.fn().mock.instances åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ this æŒ‡å‘\n\n```jsx\n// demo.js\nexport const createObject = (ClassItem) => {\n  new ClassItem();\n}\n\n// demo.test.js\nimport { createObject } from \"./demo\";\ntest(\"æµ‹è¯• createObject\", () => {\n  const func = jest.fn();\n  createObject(func);\n  expect(func.mock.instances).toEqual([mockConstructor{}]); // æ­¤å¤„çš„ this å°±æ˜¯ mockConstructor\n});\n```\n\n### 7.7 jest.fn().mockImplementation() åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  // func.mockImplementation(() => \"hello\"); ç­‰ä»·äº jest.fn(() => \"hello\")\n  // func.mockImplementation(() => this); ç­‰ä»·äº jest.fn().mockReturnThis()\n  func.mockImplementationOnce(() => \"dell\");\n  func.mockImplementationOnce(() => \"lee\");\n  runCallback(func);\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.results[0].value).toBe(\"dell\");\n  expect(func.mock.results[1].value).toBe(\"lee\");\n});\n```\n\n`mockImplementation`Â  æ¯” `mockReturnValue`Â  æ›´å¥å£®ï¼Œå› ä¸ºå†…éƒ¨å¯ä»¥å†™ä¸€äº›é¢å¤–çš„é€»è¾‘\n\n### 7.8 toBeCalledWith() æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\n\n```jsx\n// demo.js\nexport const runCallback = (callback) => {\n  callback(\"ABC\");\n}\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  expect(func.mock.results[0]).toEqual([\"ABC\");\n  expect(func).toBeCalledWith(\"ABC\");\n});\n```\n\n### 7.9 æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\n\nå¯¹äºå‰ç«¯æ¥è¯´ä¸€èˆ¬å¼‚æ­¥æ¥å£æ˜¯æµ‹è¯•æ˜¯å¦å‘é€äº†ï¼Œè€Œä¸æµ‹è¯•åç«¯æ¥å£è¿”å›çš„å†…å®¹ï¼Œæ˜¯å±äºåç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å†…å®¹\n\n### 7.9.1 é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\n\n```jsx\n// demo.js\nexport const getData = () => {\n  return axios.get(\"/api\").then(res => res.data);\n};\n\n// demo.test.js\nimport axios from \"axios\";\nimport { getData } from \"./demo\";\njest.mock(\"axios\"); // å¯¹ axios è¿›è¡Œæ¨¡æ‹Ÿï¼Œè¿™æ ·å°±ä¸ä¼šè¯·æ±‚çœŸæ­£æ•°æ®\ntest(\"æµ‹è¯• getData\", async () => {\n  axios.get.mockResolvedValue({ data: \"hello\" }); // ä½¿ç”¨ axios è¯·æ±‚çš„æ—¶å€™æ¨¡æ‹ŸæˆåŠŸçš„è¿”å›å€¼å°±æ˜¯ hello\n  await getData().then(data => {\n    expect(data).toBe(\"hello\");\n  });\n});\n```\n\n`mockResolvedValue` æ¨¡æ‹Ÿä¸é™æ¬¡æ•°\n\n`mockResolvedValueOnce` æ¨¡æ‹Ÿä¸€æ¬¡ï¼Œæ¨¡æ‹Ÿä¸¤æ¬¡å°±ä¼šæŠ¥é”™ï¼Œéœ€å†æ¬¡è°ƒç”¨\n\n### 7.9.2 é€šè¿‡æ¨¡æ‹Ÿ Promise æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\n\n```jsx\n// demo.js\nexport const fetchData = () => {\n  return axios.get(\"/\").then(res => res.data);\n};\n\n// __mocks__/demo.js\nexport const fetchData = () => {\n  return new Promise((resolve, reject) => {\n    resolve(\"function() { return '123' }\");\n  });\n};\n\n// demo.test.js\njest.mock(\"./demo\");\nimport { fetchData } from \"./demo\";\ntest(\"æµ‹è¯•fetchData\", () => {\n  return fetchData().then(data => {\n    expect(eval(data)).toEqual(\"123\");\n  });\n});\n\n/// å®ç°æ–¹å¼3\n// ä¿®æ”¹jest.config.js å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨__mocks__ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢\n// ç­‰åŒäº jest.mock(\"è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶\"){  automock: true; }\n```\n\n### 7.9.3 é€šè¿‡ä¿®æ”¹ jest.config.js æ¥è‡ªåŠ¨è¯†åˆ«**mocks**ä¸‹çš„æ–‡ä»¶\n\nä¿®æ”¹ `jest.config.js` å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨ `__mocks__` ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢\n\nç­‰åŒäº> `jest.mock(\"è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶\")`\n\n### 7.9.4 ä½¿ç”¨ jest.unmock() å¯å–æ¶ˆ mock æ¨¡æ‹Ÿ\n\n### 7.9.5 è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ mock æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\n\n```jsx\n// demo.js\nexport const fetchData = () => {\n  return axios.get(\"/\").then(res => res.data);\n};\nexport const getNumber = () => 123;\n\n// __mocks__/demo.js\nexport const fetchData = () => {\n  return new Promise((resolve, reject) => {\n    resolve(\"function() { return '123' }\");\n  });\n};\n\n// demo.test.js\njest.mock(\"./demo\");\nimport { fetchData } from \"./demo\";\nconst { getNumber } = jest.requireActual(\"./demo\"); // å¼•å…¥çœŸå®æ–‡ä»¶\ntest(\"æµ‹è¯• fetchData\", () => {\n  return fetchData().then(data => {\n    expect(eval(data)).toEqual(\"123\");\n  });\n});\n\ntest(\"æµ‹è¯• getNumber\", () => {\n  expect(getNumber()).toEqual(123);\n});\n```\n\n## 8. snapshot å¿«ç…§æµ‹è¯•\n\nå¸¸ç”¨äºæµ‹è¯•é…ç½®æ–‡ä»¶\n\n### 8.1 toMatchSnapshot()\n\n```jsx\n// demo.js\nexport const generateConfig = () => {\n  return {\n    server: \"http://localhost\",\n    port: 8080,\n    domain: \"localhost\"\n  };\n};\n\n// demo.test.js\nimport { generateConfig } from \"./demo\";\ntest(\"æµ‹è¯• generateConfig\", () => {\n  expect(generateConfig()).toMatchSnapshot(); // å°†ä¼šåœ¨é¡¹ç›®é‡Œç”Ÿæˆå¿«ç…§æ–‡ä»¶\n});\n```\n\nå¦‚æœè¦ç¡®è®¤æ›´æ–°å¿«ç…§ï¼Œéœ€è¦åœ¨æ§åˆ¶å°é€‰æ‹©ã€‚ `u`Â  ä»£è¡¨å¯¹æ‰€æœ‰å¿«ç…§è¿›è¡Œæ›´æ–°ï¼Œ `i`Â  ä»£è¡¨å¯¹å•ä¸ªç¡®è®¤çš„å¿«ç…§è¿›è¡Œæ›´æ–°\n\n### 8.2 æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\n\n```jsx\n// demo.js\nexport const generateConfig = () => {\n  return {\n    server: \"http://localhost\",\n    port: 8080,\n    domain: \"localhost\",\n    time: new Date(),\n    // å¯å˜å˜é‡\n    random: Math.random()\n    // å¯å˜å˜é‡\n  };\n};\n\n// demo.test.js\nimport { generateConfig } from \"./demo\";\ntest(\"æµ‹è¯• generateConfig\", () => {\n  expect(generateConfig()).toMatchSnapshot({\n    time: expect.any(Date),\n    random: expect.any(Number)\n  });\n});\n```\n\n### 8.3 è¡Œå†…çš„ snapshot\n\n`npm install prettier --save`\n\nå¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­\n\n```jsx\n// demo.js\nexport const generateConfig = () => {\n  return {\n    server: \"http://localhost\",\n    port: 8080,\n    domain: \"localhost\",\n    time: new Date(),\n    // å¯å˜å˜é‡\n    random: Math.random()\n    // å¯å˜å˜é‡\n  };\n};\n\n// demo.test.js\nimport { generateConfig } from \"./demo\";\ntest(\"æµ‹è¯• generateConfig\", () => {\n  // toMatchInlineSnapshot å¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­\n  expect(generateConfig()).toMatchInlineSnapshot({\n    time: expect.any(Date),\n    random: expect.any(Number)\n  });\n});\n```\n\n---\n\n## 9. Test Driven Development(TDD) æµ‹è¯•é©±åŠ¨å¼€å‘\n\n### 9.1 TDD å¼€å‘æµç¨‹\n\n1. ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ˆçŸ¥é“åŠŸèƒ½ï¼Œå…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼‰\n2. è¿è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç”¨ä¾‹æ— æ³•é€šè¿‡æµ‹è¯•\n3. ç¼–å†™ä»£ç ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹é€šè¿‡æµ‹è¯•\n4. ä¼˜åŒ–ä»£ç ï¼Œ å®Œæˆå¼€å‘\n5. æ–°å¢åŠŸèƒ½ï¼Œé‡å¤æ‰§è¡Œ 1-4\n\n### 9.2 TDD çš„ä¼˜åŠ¿\n\n1. é•¿æœŸå‡å°‘é¡¹ç›®çš„å›å½’ bugï¼ˆå‡å°‘ä¿®æ”¹ä»£ç äº§ç”Ÿçš„ bugï¼‰\n2. ä»£ç è´¨é‡æ›´å¥½ï¼ˆç»„ç»‡ï¼Œå¯ç»´æŠ¤æ€§å¥½ï¼‰\n3. æµ‹è¯•è¦†ç›–ç‡é«˜ï¼ˆå› ä¸ºæ˜¯å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æµ‹è¯•è¦†ç›–ç‡è¿‡é«˜ä¼šå½±å“å¾ˆå¤§ç²¾åŠ›ï¼‰\n4. é”™è¯¯æµ‹è¯•ä»£ç ä¸å®¹æ˜“å‡ºç°\n\n### 9.3 TDD çš„é€‚ç”¨åœºæ™¯\n\n1. ä¸é€‚ç”¨äºå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä½¿ç”¨ï¼ˆå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä¼šå¤§é‡çš„ä¸ä¸šåŠ¡ä»£ç äº§ç”Ÿè€¦åˆï¼ŒåŠ å¤§å·¥ä½œé‡ï¼‰\n2. é€‚ç”¨äºä¸€äº›åº“çš„å¼€å‘ï¼ˆå¼€å‘åº“æ—¶ä»£ç è€¦åˆåº¦è¾ƒä½ï¼Œé€šå¸¸åªå¤„ç†å‡½æ•°ç­‰ç›¸å…³åŠŸèƒ½ï¼‰\n\n---\n\n## 10. Behavior Driven Development(BDD) è¡Œä¸ºé©±åŠ¨å¼€å‘\n\n### 10.1 BDD å¼€å‘æµç¨‹\n\n1. å…ˆç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œä¸å…³å¿ƒæµ‹è¯•\n2. æ€è€ƒå¹¶æè¿°ç”¨æˆ·è¡Œä¸º\n3. æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ¨¡æ‹Ÿæµ‹è¯•\n\n### 10.2 vue example\n\n```jsx\n/// testUtils.js\nexport const findTestWrapper = (wrapper, tag) => {\n  return wrapper.find(`[data-test=\"${tag}\"]`);\n};\n```\n\n```jsx\n/// __tests__/integration/TodoList.test.js\nimport { mount } from \"@vue/test-utils\";\nimport { findTestWrapper } from \"../../../../utils/testUtils\";\nimport TodoList from \"../../TodoList\";\n// import store from \"../../../../store\"\nit(`    \n æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•    \n 1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹    \n 2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®  \n 3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹`, () => {\n  const wrapper = mount(TodoList);\n  // const wrapper = mount(TodoList, { store })\n  // å¦‚æœä½¿ç”¨ vuexï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨\n  const inputElem = findTestWrapper(wrapper, \"header-input\").at(0);\n  const content = \"Dell lee\";\n  inputElem.setValue(content);\n  inputElem.trigger(\"change\");\n  inputElem.trigger(\"keyup.enter\");\n  const listItems = findTestWrapper(wrapper, \"list-item\").at(0);\n  expect(listItems.length).toBe(1);\n  expect(listItems.at(0).text()).toContain(content);\n});\n```\n\n### 10.3 react example\n\n```jsx\n/// testUtils.js\nexport const findTestWrapper = (wrapper, tag) => {\n  return wrapper.find(`[data-test=\"${tag}\"]`);\n};\n```\n\n```jsx\n/// __tests__/integration/TodoList.test.js\nimport React from \"react\";\n// import { Provider } from \"react-redux\";\nimport Enzyme, { mount } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport TodoList from \"../../TodoList\";\n// import store from \"../../../../store/createStore\";\nEnzyme.configure({ adapter: new Adapter() });\n\nit(`\n    æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•\n    1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹\n    2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®\n   3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹\n`, () => {\n  const wrapper = mount(<TodoList />);\n  /** \n  const wrapper = mount(\n   <Provider store={store}>\n    <TodoList /></Provider>\n   </Provider>\n  )  \n  // å¦‚æœä½¿ç”¨ reduxï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨\n */\n  const inputElem = findTestWrapper(wrapper, \"header-input\");\n  const content = \"Dell lee\";\n  inputElem.simulate(\"change\", { target: { value: content } });\n  inputElem.simulate(\"keyUp\", { keyCode: 13 });\n  const listItems = findTestWrapper(wrapper, \"list-item\");\n  expect(listItems.length).toBe(1);\n  expect(listItems.text()).toContain(content);\n});\n```\n\n---\n\n## 11. TDD å’Œ BDD çš„å¯¹æ¯”\n\n1. `TDD` å…ˆå†™æµ‹è¯•åå†™ä»£ç ; `BDD` å…ˆå†™ä»£ç åå†™æµ‹è¯•\n2. `TDD` åˆ›å»ºçš„æ˜¯ `unit` å•å…ƒæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆå•å…ƒæµ‹è¯•ï¼Œå±äºç™½ç›’æµ‹è¯•(çŸ¥é“å®ç°æµ‹è¯•ä»£ç ); `BDD` åˆ›å»ºçš„æ˜¯ `integration` é›†æˆæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆé›†æˆæµ‹è¯•ï¼Œå±äºé»‘ç›’æµ‹è¯•(ä¸çŸ¥é“å®ç°æµ‹è¯•ä»£ç )\n3. `TDD` æµ‹è¯•é‡ç‚¹åœ¨ä»£ç ; `BDD` æµ‹è¯•é‡ç‚¹åœ¨ `UI`Â ( `DOM`)\n4. `TDD` å®‰å…¨æ„Ÿä½(æ— æ³•ä¿è¯å„ä¸ªç»„ä»¶æ‹¼æ’åˆ°ä¸€èµ·æ˜¯å¦ä¸ä¼šæœ‰é—®é¢˜); `BDD` å®‰å…¨æ„Ÿé«˜\n5. `TDD` é€Ÿåº¦å¿«; `BDD` é€Ÿåº¦æ…¢\n\n---\n\n## 12. TDD ä¸ BDD æ··ç”¨\n\n### 12.1 å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\n\n### 12.2 å¯¹ vuex çš„ store è¿›è¡Œæµ‹è¯•\n\n```jsx\n/// __tests__/unit/store.test.js\nimport store from \"../../../../store\";\nit(\"å½“ store æ¥å— changeInputValue çš„ commit æ—¶, inputValue å‘ç”Ÿå˜åŒ–\", () => {\n  const value = \"123\";\n  store.commit(\"changeInputValue\", value);\n  expect(store.state.inputValue).toBe(value);\n});\n```\n\n### 12.3 å¯¹ redux çš„ store è¿›è¡Œæµ‹è¯•\n\n```jsx\n/// __tests__/unit/store.test.js\nimport store from \"../../../../store/createStore\";\nimport { changeInputValue } from \"../../../../store/actions\";\nit(\"å½“ store æ¥å— changeInputValue çš„ dispatch æ—¶, inputValue å‘ç”Ÿå˜åŒ–\", () => {\n  const value = \"123\";\n  /**   \n  const changeInputValue = (payload) => ({ \n   type: CHANGE_IMPUT_VALUE, payload \n  })   \n */\n  store.dispatch(changeInputValue(value));\n  expect(store.getState().inputValue).toBe(value);\n});\n```\n\n---\n\n## 13. å¼‚æ­¥æµ‹è¯•\n\næ³¨æ„ï¼šå¼‚æ­¥æµ‹è¯•å¦‚æœç”¨åˆ°äº†å¼‚æ­¥å‡½æ•°ï¼Œåˆ™éœ€è¦è°ƒç”¨ `done`Â  å‡½æ•°\n\n### 13.1 vue çš„å¼‚æ­¥æµ‹è¯•\n\n```javascript\n/// __mocks__/axios.js\nconst undoList = {  success: true,  data: [\n { status: \"div\", value: \"dell\" },\n { status: \"div\", value: \"lee\" }\n]};\nexport default {\n get(url) {\n  if (url === \"/getUndoList.json\") {\n   return new Promise((resolve, reject) => {\n    if (this.success === true) {\n     resolve(undoList);\n    } else {\n     reject(new Error());\n    }\n   });\n  }\n }};\n\n/// __tests__/integration/TodoList.test.js\nimport { mount } from \"@vue/test-utils\";\nimport { findTestWrapper } from \"../../../../utils/testUtils\";\nimport TodoList from \"../../TodoList\";\nimport store from \"../../../../store\";\n\nbeforeEach(() => {\n axios.success = true;\n jest.useFakeTimers(); // å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“});\nit(`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`, done => {\n  const wrapper = mount(TodoList, { store });\n  wrapper.vm.$nickTick(() => {\n   const listItems = findTestWrapper(wrapper, \"list-item\");\n   expect(listItems.length).toBe(2);\n   done();\n  });\n });\nit(`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`, done => {\n const wrapper = mount(TodoList, { store });\n expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n jest.runAllTimers();\n wrapper.vm.$nickTick(() => {\n  const listItems = findTestWrapper(wrapper, \"list-item\");\n  expect(listItems.length).toBe(2);\n  done();\n });\n});\n\nit(`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰`, done => {\n axios.success = false;\n const wrapper = mount(TodoList, { store });\n expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n jest.runAllTimers();\n wrapper.vm.$nickTick(() => {\n  const listItems = findTestWrapper(wrapper, \"list-item\");\n  expect(listItems.length).toBe(0);\n  done();\n });\n});\n```\n\n### 13.2 react çš„å¼‚æ­¥æµ‹è¯•\n\n```jsx\n/// __mocks__/axios.js\nconst undoList = {\n  success: true,\n  data: [\n    { status: \"div\", value: \"dell\" },\n    { status: \"div\", value: \"lee\" }\n  ]\n};\n\nexport default {\n  get(url) {\n    if (url === \"/getUndoList.json\") {\n      return new Promise((resolve, reject) => {\n        if (this.success === true) {\n          resolve(undoList);\n        } else {\n          reject(new Error());\n        }\n      });\n    }\n  }\n};\n\n/// __tests__/integration/TodoList.test.js\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport Enzyme, { mount } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport TodoList from \"../../TodoList\";\nimport store from \"../../../../store/createStore\";\nEnzyme.configure({ adapter: new Adapter() });\n\nbeforeEach(() => {\n  axios.success = true;\n  jest.useFakeTimers(); // å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“\n});\n\nit(`\n    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•\n    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®\n`, done => {\n  const wrapper = mount(\n    <Provider store={store}>\n      <TodoList />\n    </Provider>\n  );\n  process.nickTick(() => {\n    wrapper.update();\n    const listItems = findTestWrapper(wrapper, \"list-item\");\n    expect(listItems.length).toBe(2);\n    done();\n  });\n});\n\nit(`\n    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s\n    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®\n`, done => {\n  const wrapper = mount(\n    <Provider store={store}>\n      <TodoList />\n    </Provider>\n  );\n  expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n  jest.runAllTimers();\n  process.nickTick(() => {\n    wrapper.update(); // æ›´æ–° wrapper é˜²æ­¢å–ä¸Šä¸€æ¬¡çš„ wrapper\n    const listItems = findTestWrapper(wrapper, \"list-item\");\n    expect(listItems.length).toBe(2);\n    done();\n  });\n});\n\nit(`\n  1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥\n  2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰\n`, done => {\n  axios.success = false;\n  const wrapper = mount(\n    <Provider store={store}>\n      <TodoList />\n    </Provider>\n  );\n  expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n  jest.runAllTimers();\n  process.nickTick(() => {\n    wrapper.update();\n    const listItems = findTestWrapper(wrapper, \"list-item\");\n    expect(listItems.length).toBe(0);\n    done();\n  });\n});\n```\n\n---\n\n## 14. vue é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\n\n### 14.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\n\n```jsx\n// HelloWorld.test.js\nimport Vue from \"vue\";\nimport HelloWorld from \"@/components/HelloWorld\";\ndescribe(\"HelloWorld.vue\", () => {\n  it(\"renders props.msg when passed\", () => {\n    const root = document.createElement(\"div\");\n    root.className = \"root\";\n    document.body.appendChild(root);\n    new Vue({\n      render: h =>\n        h(HelloWorld, {\n          props: {\n            msg: \"dell lee\"\n          }\n        })\n    }).$mount(\".root\");\n    expect(document.getElementByClassName(\"hello\").length).toBe(1);\n  });\n});\n```\n\nç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•\n\n### 14.2 ä½¿ç”¨ @vue/test-utils å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\n\n- [å®˜æ–¹æ–‡æ¡£](https://vue-test-utils.vuejs.org/zh/)\n\n### 14.2.1 for example\n\n```jsx\n// HelloWorld.test.js\nimport { shallowMount } from \"@vue/test-utils\";\nimport HelloWorld from \"@/components/HelloWorld\";\ndescribe(\"HelloWorld.vue\", () => {\n  it(\"renders props.msg when passed\", () => {\n    const msg = \"dell lee\";\n    const wrapper = shallowMount(HelloWorld, {\n      propsData: { msg }\n    });\n    expect(wrapper.text()).toMatch(msg);\n  });\n});\n```\n\n### 14.2.2 å¿«ç…§æµ‹è¯•\n\nä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬\n\nå¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ `dom` ç»“æ„çš„å˜åŒ–\n\n```jsx\n// HelloWorld.test.js\nimport { shallowMount } from \"@vue/test-utils\";\nimport HelloWorld from \"@/components/HelloWorld\";\ndescribe(\"HelloWorld.vue ç»„ä»¶æ¸²æŸ“æ­£å¸¸\", () => {\n  it(\"renders props.msg when passed\", () => {\n    const msg = \"dell lee\";\n    const wrapper = shallowMount(HelloWorld, {\n      propsData: { msg }\n    });\n    expect(wrapper).toMatchSnapshot();\n  });\n});\n```\n\n---\n\n## 15. react é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\n\n### 15.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•\n\n```jsx\n// App.test.js\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nit(\"render App\", () => {\n  const div = document.createElement(\"div\");\n  ReactDOM.render(<App />, div);\n  const container = div.getElementsByClassName(\"App\");\n  expect(container.length).toBe(1);\n});\n```\n\nç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•\n\n### 15.2 enzyme çš„é…ç½®å’Œä½¿ç”¨\n\n- [å®˜æ–¹æ–‡æ¡£](https://enzymejs.github.io/enzyme/)\n- [github](https://github.com/enzymejs/enzyme)\n- [jest-enzyme](https://github.com/enzymejs/enzyme-matchers/tree/master/packages/jest-enzyme)\n\n### 15.2.1 for example\n\n```jsx\n// App.test.js\nimport React from \"react\";\nimport Enzyme, { shallow } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport App from \"App\";\nEnzyme.configure({ adapter: new Adapter() });\nit(\"render App\", () => {\n  const wrapper = shallow(<App />);\n  expect(wrapper.find('[data-test=\"App\"]').length).toBe(2);\n});\n```\n\nä½¿ç”¨è‡ªå®šä¹‰ `props` å¯ä»¥é™ä½ä»£ç è€¦åˆåº¦\n\n`shallow` é€‚åˆå•å…ƒæµ‹è¯•ï¼Œå±äºæµ…æ¸²æŸ“ï¼› `mount` é€‚åˆé›†æˆæµ‹è¯•ï¼Œä¼šå°†å½“å‰ç»„ä»¶åŒ…æ‹¬å…¶å­ç»„ä»¶ä¸€èµ·æ¸²æŸ“\n\nå•å…ƒæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ `api` `.state()` ï¼›é›†æˆæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ `api` `.prop()`\n\n### 15.2.2 å¿«ç…§æµ‹è¯•\n\nä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬\n\nå¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ `dom` ç»“æ„çš„å˜åŒ–\n\n```jsx\n// App.test.js\nimport React from \"react\";\nimport Enzyme, { shallow } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport App from \"App\";\nEnzyme.configure({ adapter: new Adapter() });\nit(\"render App\", () => {\n  const wrapper = shallow(<App />);\n  expect(wrapper).toMatchSnapshot();\n});\n```\n\n---\n\n## 16. å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\n\n- æ›´å¥½çš„ä»£ç ç»„ç»‡ï¼Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å¼º\n- æ›´å°‘çš„ `Bug` å‡ºç°æ¦‚ç‡ï¼Œå°¤å…¶æ˜¯å›å½’æµ‹è¯•ä¸­çš„ `Bug`\n- ä¿®æ”¹å·¥ç¨‹è´¨é‡å·®çš„é¡¹ç›®ï¼Œæ›´åŠ å®‰å…¨\n- é¡¹ç›®å…·å¤‡æ½œåœ¨çš„æ–‡æ¡£ç‰¹æ€§\n- æ‰©å±•å‰ç«¯çš„çŸ¥è¯†é¢\n\n## 17 æ€»ç»“é‡è¦çš„ç‚¹\n\n1. `BDD` å’Œ `TDD`\n2. é›†æˆæµ‹è¯• å’Œ å•å…ƒæµ‹è¯•\n3. æµ‹è¯•å’Œä¸šåŠ¡çš„è§£è€¦\n4. ä»£ç æµ‹è¯•è¦†ç›–ç‡å¹¶ä¸ä»£è¡¨ä¸€å®šé è°±\n5. åŠŸèƒ½æ€§æµ‹è¯• å’Œ `UI`æµ‹è¯•\n6. æµ‹è¯•è¶Šç‹¬ç«‹ï¼Œéšè—çš„é—®é¢˜å°±è¶Šå¤š\n","source":"_posts/å‰ç«¯/å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•.md","raw":"---\ntitle: å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•\ndate: 2020-02-17\ncategories: [å‰ç«¯, js]\ntags: \n  - è‡ªåŠ¨åŒ–æµ‹è¯•\n---\n\n## 1. å•å…ƒæµ‹è¯•\n\nå¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ï¼Œåœ¨å‰ç«¯ä¸€èˆ¬ä¸ºä¸€ä¸ªæ¨¡å—ã€‚\n\n### 1.1 å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\n\n1. æµ‹è¯•è¦†ç›–ç‡é«˜\n2. ä¸šåŠ¡è€¦åˆåº¦é«˜\n3. ä»£ç é‡å¤§\n4. è¿‡äºç‹¬ç«‹\n\n### 1.2 æ€»ç»“\n\nåœ¨æŸäº›åœºæ™¯ä¸‹é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•ï¼ŒæŸäº›åœºæ™¯ä¸‹ä¸é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•\n\n## 2. é›†æˆæµ‹è¯•\n\nåˆå«ç»„è£…æµ‹è¯•æˆ–è”åˆæµ‹è¯•ï¼Œåœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†æ‰€æœ‰æ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ï¼ˆå¦‚æ ¹æ®ç»“æ„å›¾ï¼‰ç»„è£…æˆä¸ºå­ç³»ç»Ÿæˆ–ç³»ç»Ÿï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚\n\n## 3. jest ä¸­çš„åŒ¹é…å™¨\n\n[jest åŒ¹é…å™¨å®˜ç½‘](https://jestjs.io/docs/en/expect)\n\nä¿®æ”¹ `jest`Â  é»˜è®¤é…ç½®å‘½ä»¤ `npx jest --init`\n\n### 3.1 å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\n\n`jest --watchAll` ä¸€æ—¦æŸä¸ªæµ‹è¯•ç”¨ä¾‹å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹éƒ½å°†ä¼šé‡æ–°æ‰§è¡Œ\n\n`jest --watch`Â  é»˜è®¤è¿›å…¥ `o`Â  æ¨¡å¼ï¼Œå³åªå¯¹å‘ç”Ÿå˜åŒ–çš„æµ‹è¯•ç”¨ä¾‹é‡æ–°æ‰§è¡Œ\n\n### 3.2 å¸¸ç”¨åŒ¹é…å™¨\n\n### 3.2.1 toBe()\n\n```jsx\ntest(\"æµ‹è¯•toBeçš„åŒ¹é…å™¨\", () => {\n  const a = { name: \"å¼ ä¸‰\" };\n  expect(a).toBe({ name: \"å¼ ä¸‰\" });\n});\n// âŒ å› ä¸ºå¼•ç”¨ç±»å‹ä½¿ç”¨toBeä¸æ˜¯å…¨ç­‰æ•ˆæœ\n```\n\n`toBe` åŒ¹é…å™¨ç±»ä¼¼äº `===`ã€‚\n\n---\n\n### 3.2.2 toEqual()\n\n```jsx\ntest(\"æµ‹è¯•toEqualçš„åŒ¹é…å™¨\", () => {\n  const a = { name: \"å¼ ä¸‰\" };\n  expect(a).toBe({ name: \"å¼ ä¸‰\" });\n});\n// âœ… å› ä¸ºtoEqualåªæ˜¯å¯¹ç»“æœçš„åŒ¹é…ï¼Œè€Œä¸æ˜¯å…¨ç­‰æ•ˆæœ\n```\n\n`toEqual` åŒ¹é…å™¨åªæ˜¯å¯¹ç»“æœç›¸ç­‰ä¸å¦è¿›è¡ŒåŒ¹é…\n\n---\n\n### 3.2.3 toBeNull()\n\n```jsx\ntest(\"æµ‹è¯•toBeNullçš„åŒ¹é…å™¨\", () => {\n  const a = null;\n  expect(a).toBeNull();\n});\n// âœ…\n```\n\n`toBeNull` æ˜¯å¯¹ `null` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.4 toBeUndefined()\n\n```jsx\ntest(\"æµ‹è¯•toBeUndefinedçš„åŒ¹é…å™¨\", () => {\n  const a = undefined;\n  expect(a).toBeUndefined();\n});\n// âœ…\n```\n\n`toBeUndefined` æ˜¯å¯¹ `undefined` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.5 toBeDefined()\n\n```jsx\ntest(\"æµ‹è¯•toBeDefinedçš„åŒ¹é…å™¨\", () => {\n  const a = 1;\n  expect(a).toBeDefined();\n});\n// âœ…\n```\n\n`toBeDefined` æ˜¯å¯¹å·²ç»å®šä¹‰çš„å€¼çš„åŒ¹é…ï¼Œè‹¥ä¸º `undefined` åˆ™ä¸é€šè¿‡\n\n---\n\n### 3.2.6 toBeTruthy()\n\n```jsx\ntest(\"æµ‹è¯•toBeTruthyçš„åŒ¹é…å™¨\", () => {\n  const a = 0;\n  expect(a).toBeTruthy();\n});\n// 0 => âŒï¼Œå› ä¸º toBeTruthy æ˜¯å¯¹ true å€¼çš„åŒ¹é…\n// 1 => âœ…\n```\n\n`toBeTruthy` æ˜¯å¯¹ `true` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.7 toBeFalsy()\n\n```jsx\ntest(\"æµ‹è¯•toBeFalsyçš„åŒ¹é…å™¨\", () => {\n  const a = 1;\n  expect(a).toBeFalsy();\n});\n// 1 => âŒ\n// 0 => âœ…\n```\n\n`toBeFalsy` æ˜¯å¯¹ `false` å€¼çš„åŒ¹é…\n\n---\n\n### 3.2.8 toBeGreaterThan()\n\n```jsx\ntest(\"æµ‹è¯•toBeGreaterThanåŒ¹é…å™¨\", () => {\n  const count = 10;\n  expect(a).toBeGreaterThan(9);\n});\n// âœ…\n```\n\n`toBeGreaterThan` ç›¸å½“äº `>`\n\n---\n\n### 3.2.9 toBeLessThan()\n\n```jsx\ntest(\"æµ‹è¯•toBeLessThanåŒ¹é…å™¨\", () => {\n  const count = 8;\n  expect(a).toBeLessThan(9);\n});\n// âœ…\n```\n\n`toBeLessThan` ç›¸å½“äº `<`\n\n---\n\n### 3.2.10 toBeGreaterThanOrEqual()\n\n```jsx\ntest(\"æµ‹è¯•toBeGreaterThanOrEqualåŒ¹é…å™¨\", () => {\n  const count = 10;\n  expect(a).toBeGreaterThanOrEqual(10);\n});\n// âœ…\n```\n\n`toBeGreaterThanOrEqual` ç›¸å½“äº `>=`\n\n---\n\n### 3.2.11 toBeLessThanOrEqual()\n\n```jsx\ntest(\"æµ‹è¯•toBeLessThanOrEqualåŒ¹é…å™¨\", () => {\n  const count = 10;\n  expect(a).toBeLessThanOrEqual(10);\n});\n// âœ…\n```\n\n`toBeLessThanOrEqual` ç›¸å½“äº `<=`\n\n---\n\n### 3.2.12 toBeCloseTo()\n\n```jsx\ntest(\"æµ‹è¯•toBeCloseToåŒ¹é…å™¨\", () => {\n  const one = 0.1;\n  const two = 0.2;\n  expect(one + two).toEqual(0.3);\n});\n// âŒ å› ä¸ºæµ®ç‚¹ç²¾åº¦ä¸åŒ\n\ntest(\"æµ‹è¯•toBeCloseToåŒ¹é…å™¨\", () => {\n  const one = 0.1;\n  const two = 0.2;\n  expect(one + two).toBeCloseTo(0.3);\n});\n// âœ…\n```\n\n`toBeCloseTo` ä¸ºäº†è§£å†³æµ®ç‚¹ç²¾åº¦ä¸åŒå¯¼è‡´çš„æ— æ³•åŒ¹é…çš„é—®é¢˜\n\n---\n\n### 3.2.13 toMatch()\n\n```jsx\ntest(\"æµ‹è¯•toMatchåŒ¹é…å™¨\", () => {\n  const str = \"å¼ ä¸‰ã€æå››ã€ç‹äº”\";\n  expect(str).toMatch(\"æå››\");\n});\n// âœ…\n\ntest(\"æµ‹è¯•toMatchåŒ¹é…å™¨\", () => {\n  const str = \"å¼ ä¸‰ã€æå››ã€ç‹äº”\";\n  expect(str).toMatch(/æå››/);\n});\n// âœ…\n```\n\n`toMatch` ä¸ºå­—ç¬¦ä¸²åŒ…å«åŒ¹é…å™¨ï¼Œç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­åŒ…å«çš„å†…å®¹ï¼Œä¹Ÿå¯ä¼ æ­£åˆ™è¡¨è¾¾å¼\n\n---\n\n### 3.2.14 toContain()\n\n```jsx\ntest(\"æµ‹è¯•toContainåŒ¹é…å™¨\", () => {\n  const arr = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"];\n  expect(arr).toContain(\"å¼ ä¸‰\");\n});\n// âœ…\n\ntest(\"æµ‹è¯•toContainåŒ¹é…å™¨\", () => {\n  const arr = [\"å¼ ä¸‰\", \"æå››\", \"ç‹äº”\"];\n  const data = new Set(arr);\n  expect(data).toContain(\"å¼ ä¸‰\");\n});\n```\n\n`toContain` ä¸ºæ•°æ®åŒ…å«åŒ¹å™¨ï¼Œç”¨æ¥åŒ¹é…æ•°ç»„ä¸­åŒ…å«çš„é¡¹ã€‚åŒæ—¶å¯å®Œå…¨å…¼å®¹ `Set` æµ‹è¯•\n\n---\n\n### 3.2.15 toHaveLength()\n\n```jsx\n/// functions.js\nexport default {\n  getIntArray(num) {\n    if (!Number.isInteger(num)) {\n      throw Error('\"getIntArray\"åªæ¥å—æ•´æ•°ç±»å‹çš„å‚æ•°');\n    }\n    let result = [];\n    for (let i = 0, len = num; i < len; i++) {\n      result.push(i);\n    }\n    return result;\n  }\n};\n\n/// functions.test.js\nimport { getIntArray } from \"../src/functions\";\ntest(\"getIntArray(3)è¿”å›çš„æ•°ç»„é•¿åº¦åº”è¯¥ä¸º3\", () => {\n  expect(getIntArray(3)).toHaveLength(3);\n});\n```\n\n`toHaveLength`å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥æµ‹è¯•å­—ç¬¦ä¸²å’Œæ•°ç»„ç±»å‹çš„é•¿åº¦æ˜¯å¦æ»¡è¶³é¢„æœŸã€‚\n\n### 3.2.16 toThrow()\n\n```jsx\nconst throwNewErrorFunc = () => {\n  throw new Error(\"this is a new error\");\n};\n\ntest(\"æµ‹è¯•toThrowåŒ¹é…å™¨\", () => {\n  expect(throwNewErrorFunc).toThrow();\n});\n```\n\n`toThrow` æ˜¯ä¸“é—¨å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†çš„åŒ¹é…å™¨ï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸ªæ–¹æ³•ä¼šä¸ä¼šæŠ›å‡ºå¼‚å¸¸\n\n```jsx\nconst throwNewErrorFunc = () => {\n  throw new Error(\"this is a new error\");\n};\n\ntest(\"æµ‹è¯•toThrowåŒ¹é…å™¨\", () => {\n  expect(throwNewErrorFunc).toThrow(\"this is a new error\");\n});\n```\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¿™ä¸ªåŒ¹é…å™¨ä¸­åŠ ä¸€äº›å­—ç¬¦ä¸²ï¼Œæ„æ€å°±æ˜¯æŠ›å‡ºçš„å¼‚å¸¸å¿…é¡»å’Œå­—ç¬¦ä¸²ç›¸å¯¹åº”ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸åŒ¹é…ï¼Œä¹Ÿæ²¡åŠæ³•é€šè¿‡å¼‚å¸¸æµ‹è¯•ã€‚\n\n---\n\n### 3.2.17 not()\n\n```jsx\nconst throwNewErrorFunc = () => {\n  throw new Error(\"this is a new error\");\n};\n\ntest(\"æµ‹è¯•notåŒ¹é…å™¨\", () => {\n  expect(throwNewErrorFunc).not.toThrow();\n});\n```\n\n`not` åŒ¹é…å™¨æ˜¯ `jest` ä¸­æ¯”è¾ƒç‰¹æ®Šçš„åŒ¹é…å™¨ï¼Œæ„æ€å°±æ˜¯ â€œç›¸åâ€ æˆ–è€…è¯´ â€œå–åâ€ .æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå°±å¯ä»¥ä½¿ç”¨`not` åŒ¹é…å™¨ã€‚\n\n---\n\n### 3.3 å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\n\n### 3.3.1 å›è°ƒå‡½æ•°å¼\n\n```jsx\n/// fetchData.js\nimport axios from \"axios\";\nexport const fetchData = fn => {\n  axios.get(\"http://a.jspang.com/jestTest.json\").then(res => {\n    fn(res.data);\n  });\n};\n\n/// fetchData.test.js\nimport { fetchData } from \"./fetchData.js\";\ntest(\"fetchDataæµ‹è¯•\", done => {\n  fetchData(data => {\n    expect(data).toEqual({ success: true });\n    done();\n  });\n});\n```\n\nå¿…é¡»åŠ å…¥ä¸€ä¸ª `done` æ–¹æ³•ï¼Œä¿è¯æˆ‘ä»¬çš„å›è°ƒå·²ç»å®Œæˆäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¡¨ç¤ºæµ‹è¯•å®Œæˆ\n\n---\n\n### 3.3.2 ç›´æ¥è¿”å› Promise\n\n```jsx\n/// fetchTwoData.js\nimport axios from \"axios\";\nexport const fetchTwoData = () => axios.get(\"http://a.jspang.com/jestTest.json\";\n\n/// fetchTwoData.test.js\nimport { fetchTwoData } from \"./fetchTwoData.js\";\ntest(\"fetchTwoDataçš„æµ‹è¯•ç”¨ä¾‹\", () => {\n return fetchTwoData().then(res => {\n  expect(res.data).toEqual({ success: true });\n });\n});\n```\n\næ³¨æ„è¦ `return`\n\n### 3.3.3 ä¸å­˜åœ¨çš„æ¥å£\n\n```jsx\n/// fetchData.js\nexport const fetchData = () => {\n  return axios.get(\"http://a.jspang.com/jestTest_error.json\"); // æ­¤åœ°å€å¹¶ä¸å­˜åœ¨\n};\n\n/// fetchData.test.js\n// æ–¹å¼1\ntest(\"fetchDataæµ‹è¯•\", () => {\n  expect.assertions(1); // æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect\n  return fetchData().catch(err => {\n    expect(err.toString().indexOf(\"404\") > -1).toBe(true);\n  });\n});\n\n// æ–¹å¼2\ntest(\"fetchDataæµ‹è¯•\", async () => {\n  return await fetchData().rejects.toThrow();\n});\n\n// æ–¹å¼3\ntest(\"fetchDataæµ‹è¯•\", async () => {\n  expect().assertions(1); // æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect\n  try {\n    await fetchData();\n  } catch (err) {\n    expect(err.toString().indexOf(\"404\") > -1).toBe(true);\n  }\n});\n```\n\nå› ä¸ºæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨äº† `catch` æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰ä¼šèµ°è¿™ä¸ªæ–¹æ³•ï¼Œè€Œç°åœ¨æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œå°±ä¸ä¼šèµ°è¿™ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œ`jest` å°±é»˜è®¤è¿™ä¸ªç”¨ä¾‹é€šè¿‡äº†æµ‹è¯•ã€‚å› æ­¤å¿…é¡»è¦æ‰§è¡Œæ–­è¨€ï¼Œå³å¿…é¡»è®©å…¶æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚\n\n### 3.3.4 async/await\n\n```jsx\n/// fetchData.js\nexport const fetchData = () => {\n return axios.get(\"http://a.jspang.com/jestTest.json\"); // æ­¤åœ°å€å¹¶ä¸å­˜åœ¨};\n\n/// fetchData.test.js\n// æ–¹å¼1\ntest(\"fetchDataæµ‹è¯•\", async () => {\n await expect(fetchData()).resolves.toMatchObject({\n  data: {\n   success: true\n  }\n });\n});\n\n// æ–¹å¼2\ntest(\"fetchDataæµ‹è¯•\", async () => {\n const response = await fetchData();\n expect(response.data).toEqual({ success: true });\n});\n```\n\nè¿™æ—¶å€™æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨ `async....await...` çš„å½¢å¼ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº† `resolves` ç”¨äºæŠŠç°æœ‰å¯¹è±¡è½¬æ¢æˆ `Promise` å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ `jest` ä¸­çš„ `toMatchObject` è¿›è¡ŒåŒ¹é…å¯¹è±¡ä¸­çš„å±æ€§ã€‚\n\n## 4. jest ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\n\n### 4.1 beforeAll()\n\n`beforeAll()`é’©å­å‡½æ•°çš„æ„æ€æ˜¯åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰è¿›è¡Œæ‰§è¡Œã€‚\n\n### 4.2 afterAll()\n\n`afterAll()`é’©å­å‡½æ•°æ˜¯åœ¨å®Œæˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰æ‰§è¡Œçš„å‡½æ•°ã€‚\n\n### 4.3 beforeEach()\n\n`beforeEach()`é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚\n\n### 4.4 afterEach()\n\n`afterEach()`é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯æ¬¡æµ‹è¯•ç”¨ä¾‹å®Œæˆæµ‹è¯•ä¹‹åæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚\n\n## 5. jest æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\n\n```jsx\n/// eat.js\nexport default class Eat {\n  setName(number) {\n    this.name = number === 1 ? \"æ°´é¥º\" : \"ç«é”…\";\n  }\n  setDesc() {\n    this.desc = this.user + \"æè¿°\";\n  }\n  setMoney() {\n    this.money = this.name === \"æ°´é¥º\" ? 80 : 300;\n  }\n}\n\n/// eat.test.js\nimport Eat from \"./eat\";\nconst eat = new Eat();\nbeforeAll(() => {\n  console.log(\"å¼€å§‹åƒé¥­\");\n});\nafterAll(() => {\n  console.log(\"åƒå®Œé¥­äº†\");\n});\ndescribe(\"æ°´é¥ºç›¸å…³å†…å®¹\", () => {\n  test(\"æµ‹è¯•æ°´é¥ºæè¿°\", () => {\n    eat.setName(1);\n    eat.setDesc();\n    expect(eat.desc).toEqual(\"æ°´é¥ºæè¿°\");\n  });\n  test(\"æµ‹è¯•æ°´é¥ºä»·æ ¼\", () => {\n    eat.setName(1);\n    eat.setMoney();\n    expect(eat.money).toEqual(80);\n  });\n});\ndescribe(\"ç«é”…ç›¸å…³å†…å®¹\", () => {\n  test(\"æµ‹è¯•ç«é”…æè¿°\", () => {\n    eat.setName(2);\n    eat.setDesc();\n    expect(eat.desc).toEqual(\"ç«é”…æè¿°\");\n  });\n  test(\"æµ‹è¯•ç«é”…ä»·æ ¼\", () => {\n    eat.setName(2);\n    eat.setMoney();\n    expect(eat.money).toEqual(300);\n  });\n});\n```\n\n## 6. é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\n\n### 6.1 é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\n\nå³çˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°åœ¨å­ä½œç”¨åŸŸä¸‹ä¹Ÿç”Ÿæ•ˆ\n\n### 6.2 é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\n\nåŒä½œç”¨åŸŸä¸‹å°†éƒ½ä¼šæ‰§è¡Œ\n\n### 6.3 å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\n\nä¼˜å…ˆçˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°ï¼Œå…¶æ¬¡æ‰§è¡Œå­ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°\n\n### 6.4 åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\n\nå¦‚æœå°†å¯¹åº”é€»è¾‘å†™åˆ°äº†éé’©å­å‡½æ•°çš„ä½ç½®ï¼Œé‚£ä¹ˆå°†ä¼šä¼˜å…ˆæ‰§è¡Œï¼Œç„¶åæ‰ä¼šæ‰§è¡Œé’©å­å‡½æ•°\n\n### 6.5 å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\n\nå½“ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­çš„æµ‹è¯•ç”¨ä¾‹å˜å¾—è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œå‡å¦‚æ­¤æ—¶æˆ‘ä»¬ç›¸å¯¹å…¶ä¸­æŸä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ `test.only`\n\n```jsx\ntest.only(\"æµ‹è¯•ç”¨ä¾‹\", () => {\n  expect(1 + 1).toBe(2);\n});\n```\n\n## 7. Jest ä¸­çš„ Mock\n\n### 7.1 ä½œç”¨\n\n### 7.1.1 æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ `this` å’Œè°ƒç”¨é¡ºåº\n\n### 7.1.2 å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\n\n### 7.1.3 æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\n\n### 7.2 åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback();\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  expect(func).toBeCalled(); // æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨\n});\n```\n\n`jest.fn()`Â  å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ•è·å‡½æ•°çš„è°ƒç”¨\n\n### 7.3 jest.fn().mock.calls åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.calls.length).toBe(2); // æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨2æ¬¡\n  expect(func.mock.calls[0]).toEqual([\"å¼ ä¸‰\"]); // æµ‹è¯•ç”¨ä¾‹ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ \"å¼ ä¸‰\"\n});\n```\n\næ­¤å¤„æ‰“å° `func.mock`Â  å°†ä¼šæ‰“å°ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç›¸åº”çš„ç”¨ä¾‹æµ‹è¯•\n\n### 7.4 jest.fn().mockReturnValue() åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  // func.mockReturnValue(\"Common\")\n  // æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›å€¼éƒ½æ˜¯ \"Common\"\n  func.mockReturnValueOnce(\"A\"); // ç¬¬ä¸€æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› \"A\"\n  func.mockReturnValueOnce(\"B\"); // ç¬¬äºŒæ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› \"B\"\n  func.mockReturnValueOnce(\"C\"); // ç¬¬ä¸‰æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› \"C\"\n  runCallback(func);\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.results[0].value).toBe(\"A\");\n  expect(func.mock.results[1].value).toBe(\"B\");\n  expect(func.mock.results[2].value).toBe(\"C\");\n});\n```\n\n`func.mockReturnValue()`Â  å°†å¯¹æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›çš„å€¼ç”Ÿæ•ˆ\n\n`func.mockReturnValueOnce()`Â  æ‰§è¡Œåˆ°ç¬¬å‡ æ¬¡å°±å¯¹ç¬¬å‡ ä¸ªå‡½æ•°çš„æ¨¡æ‹Ÿè¿”å›å€¼ç”Ÿæ•ˆ\n\næ”¯æŒé“¾å¼è°ƒç”¨\n\n### 7.5 jest.fn().mock.invocationCallOrder åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.invocationCallOrder).toEqual([1, 2, 3]);\n});\n```\n\n### 7.6 jest.fn().mock.instances åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ this æŒ‡å‘\n\n```jsx\n// demo.js\nexport const createObject = (ClassItem) => {\n  new ClassItem();\n}\n\n// demo.test.js\nimport { createObject } from \"./demo\";\ntest(\"æµ‹è¯• createObject\", () => {\n  const func = jest.fn();\n  createObject(func);\n  expect(func.mock.instances).toEqual([mockConstructor{}]); // æ­¤å¤„çš„ this å°±æ˜¯ mockConstructor\n});\n```\n\n### 7.7 jest.fn().mockImplementation() åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\n\n```jsx\n// demo.js\nexport const runCallback = callback => {\n  callback(\"å¼ ä¸‰\");\n};\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  // func.mockImplementation(() => \"hello\"); ç­‰ä»·äº jest.fn(() => \"hello\")\n  // func.mockImplementation(() => this); ç­‰ä»·äº jest.fn().mockReturnThis()\n  func.mockImplementationOnce(() => \"dell\");\n  func.mockImplementationOnce(() => \"lee\");\n  runCallback(func);\n  runCallback(func);\n  runCallback(func);\n  expect(func.mock.results[0].value).toBe(\"dell\");\n  expect(func.mock.results[1].value).toBe(\"lee\");\n});\n```\n\n`mockImplementation`Â  æ¯” `mockReturnValue`Â  æ›´å¥å£®ï¼Œå› ä¸ºå†…éƒ¨å¯ä»¥å†™ä¸€äº›é¢å¤–çš„é€»è¾‘\n\n### 7.8 toBeCalledWith() æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\n\n```jsx\n// demo.js\nexport const runCallback = (callback) => {\n  callback(\"ABC\");\n}\n\n// demo.test.js\nimport { runCallback } from \"./demo\";\ntest(\"æµ‹è¯• runCallback\", () => {\n  const func = jest.fn();\n  runCallback(func);\n  expect(func.mock.results[0]).toEqual([\"ABC\");\n  expect(func).toBeCalledWith(\"ABC\");\n});\n```\n\n### 7.9 æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\n\nå¯¹äºå‰ç«¯æ¥è¯´ä¸€èˆ¬å¼‚æ­¥æ¥å£æ˜¯æµ‹è¯•æ˜¯å¦å‘é€äº†ï¼Œè€Œä¸æµ‹è¯•åç«¯æ¥å£è¿”å›çš„å†…å®¹ï¼Œæ˜¯å±äºåç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å†…å®¹\n\n### 7.9.1 é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\n\n```jsx\n// demo.js\nexport const getData = () => {\n  return axios.get(\"/api\").then(res => res.data);\n};\n\n// demo.test.js\nimport axios from \"axios\";\nimport { getData } from \"./demo\";\njest.mock(\"axios\"); // å¯¹ axios è¿›è¡Œæ¨¡æ‹Ÿï¼Œè¿™æ ·å°±ä¸ä¼šè¯·æ±‚çœŸæ­£æ•°æ®\ntest(\"æµ‹è¯• getData\", async () => {\n  axios.get.mockResolvedValue({ data: \"hello\" }); // ä½¿ç”¨ axios è¯·æ±‚çš„æ—¶å€™æ¨¡æ‹ŸæˆåŠŸçš„è¿”å›å€¼å°±æ˜¯ hello\n  await getData().then(data => {\n    expect(data).toBe(\"hello\");\n  });\n});\n```\n\n`mockResolvedValue` æ¨¡æ‹Ÿä¸é™æ¬¡æ•°\n\n`mockResolvedValueOnce` æ¨¡æ‹Ÿä¸€æ¬¡ï¼Œæ¨¡æ‹Ÿä¸¤æ¬¡å°±ä¼šæŠ¥é”™ï¼Œéœ€å†æ¬¡è°ƒç”¨\n\n### 7.9.2 é€šè¿‡æ¨¡æ‹Ÿ Promise æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\n\n```jsx\n// demo.js\nexport const fetchData = () => {\n  return axios.get(\"/\").then(res => res.data);\n};\n\n// __mocks__/demo.js\nexport const fetchData = () => {\n  return new Promise((resolve, reject) => {\n    resolve(\"function() { return '123' }\");\n  });\n};\n\n// demo.test.js\njest.mock(\"./demo\");\nimport { fetchData } from \"./demo\";\ntest(\"æµ‹è¯•fetchData\", () => {\n  return fetchData().then(data => {\n    expect(eval(data)).toEqual(\"123\");\n  });\n});\n\n/// å®ç°æ–¹å¼3\n// ä¿®æ”¹jest.config.js å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨__mocks__ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢\n// ç­‰åŒäº jest.mock(\"è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶\"){  automock: true; }\n```\n\n### 7.9.3 é€šè¿‡ä¿®æ”¹ jest.config.js æ¥è‡ªåŠ¨è¯†åˆ«**mocks**ä¸‹çš„æ–‡ä»¶\n\nä¿®æ”¹ `jest.config.js` å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨ `__mocks__` ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢\n\nç­‰åŒäº> `jest.mock(\"è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶\")`\n\n### 7.9.4 ä½¿ç”¨ jest.unmock() å¯å–æ¶ˆ mock æ¨¡æ‹Ÿ\n\n### 7.9.5 è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ mock æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\n\n```jsx\n// demo.js\nexport const fetchData = () => {\n  return axios.get(\"/\").then(res => res.data);\n};\nexport const getNumber = () => 123;\n\n// __mocks__/demo.js\nexport const fetchData = () => {\n  return new Promise((resolve, reject) => {\n    resolve(\"function() { return '123' }\");\n  });\n};\n\n// demo.test.js\njest.mock(\"./demo\");\nimport { fetchData } from \"./demo\";\nconst { getNumber } = jest.requireActual(\"./demo\"); // å¼•å…¥çœŸå®æ–‡ä»¶\ntest(\"æµ‹è¯• fetchData\", () => {\n  return fetchData().then(data => {\n    expect(eval(data)).toEqual(\"123\");\n  });\n});\n\ntest(\"æµ‹è¯• getNumber\", () => {\n  expect(getNumber()).toEqual(123);\n});\n```\n\n## 8. snapshot å¿«ç…§æµ‹è¯•\n\nå¸¸ç”¨äºæµ‹è¯•é…ç½®æ–‡ä»¶\n\n### 8.1 toMatchSnapshot()\n\n```jsx\n// demo.js\nexport const generateConfig = () => {\n  return {\n    server: \"http://localhost\",\n    port: 8080,\n    domain: \"localhost\"\n  };\n};\n\n// demo.test.js\nimport { generateConfig } from \"./demo\";\ntest(\"æµ‹è¯• generateConfig\", () => {\n  expect(generateConfig()).toMatchSnapshot(); // å°†ä¼šåœ¨é¡¹ç›®é‡Œç”Ÿæˆå¿«ç…§æ–‡ä»¶\n});\n```\n\nå¦‚æœè¦ç¡®è®¤æ›´æ–°å¿«ç…§ï¼Œéœ€è¦åœ¨æ§åˆ¶å°é€‰æ‹©ã€‚ `u`Â  ä»£è¡¨å¯¹æ‰€æœ‰å¿«ç…§è¿›è¡Œæ›´æ–°ï¼Œ `i`Â  ä»£è¡¨å¯¹å•ä¸ªç¡®è®¤çš„å¿«ç…§è¿›è¡Œæ›´æ–°\n\n### 8.2 æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\n\n```jsx\n// demo.js\nexport const generateConfig = () => {\n  return {\n    server: \"http://localhost\",\n    port: 8080,\n    domain: \"localhost\",\n    time: new Date(),\n    // å¯å˜å˜é‡\n    random: Math.random()\n    // å¯å˜å˜é‡\n  };\n};\n\n// demo.test.js\nimport { generateConfig } from \"./demo\";\ntest(\"æµ‹è¯• generateConfig\", () => {\n  expect(generateConfig()).toMatchSnapshot({\n    time: expect.any(Date),\n    random: expect.any(Number)\n  });\n});\n```\n\n### 8.3 è¡Œå†…çš„ snapshot\n\n`npm install prettier --save`\n\nå¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­\n\n```jsx\n// demo.js\nexport const generateConfig = () => {\n  return {\n    server: \"http://localhost\",\n    port: 8080,\n    domain: \"localhost\",\n    time: new Date(),\n    // å¯å˜å˜é‡\n    random: Math.random()\n    // å¯å˜å˜é‡\n  };\n};\n\n// demo.test.js\nimport { generateConfig } from \"./demo\";\ntest(\"æµ‹è¯• generateConfig\", () => {\n  // toMatchInlineSnapshot å¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­\n  expect(generateConfig()).toMatchInlineSnapshot({\n    time: expect.any(Date),\n    random: expect.any(Number)\n  });\n});\n```\n\n---\n\n## 9. Test Driven Development(TDD) æµ‹è¯•é©±åŠ¨å¼€å‘\n\n### 9.1 TDD å¼€å‘æµç¨‹\n\n1. ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ˆçŸ¥é“åŠŸèƒ½ï¼Œå…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼‰\n2. è¿è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç”¨ä¾‹æ— æ³•é€šè¿‡æµ‹è¯•\n3. ç¼–å†™ä»£ç ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹é€šè¿‡æµ‹è¯•\n4. ä¼˜åŒ–ä»£ç ï¼Œ å®Œæˆå¼€å‘\n5. æ–°å¢åŠŸèƒ½ï¼Œé‡å¤æ‰§è¡Œ 1-4\n\n### 9.2 TDD çš„ä¼˜åŠ¿\n\n1. é•¿æœŸå‡å°‘é¡¹ç›®çš„å›å½’ bugï¼ˆå‡å°‘ä¿®æ”¹ä»£ç äº§ç”Ÿçš„ bugï¼‰\n2. ä»£ç è´¨é‡æ›´å¥½ï¼ˆç»„ç»‡ï¼Œå¯ç»´æŠ¤æ€§å¥½ï¼‰\n3. æµ‹è¯•è¦†ç›–ç‡é«˜ï¼ˆå› ä¸ºæ˜¯å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æµ‹è¯•è¦†ç›–ç‡è¿‡é«˜ä¼šå½±å“å¾ˆå¤§ç²¾åŠ›ï¼‰\n4. é”™è¯¯æµ‹è¯•ä»£ç ä¸å®¹æ˜“å‡ºç°\n\n### 9.3 TDD çš„é€‚ç”¨åœºæ™¯\n\n1. ä¸é€‚ç”¨äºå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä½¿ç”¨ï¼ˆå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä¼šå¤§é‡çš„ä¸ä¸šåŠ¡ä»£ç äº§ç”Ÿè€¦åˆï¼ŒåŠ å¤§å·¥ä½œé‡ï¼‰\n2. é€‚ç”¨äºä¸€äº›åº“çš„å¼€å‘ï¼ˆå¼€å‘åº“æ—¶ä»£ç è€¦åˆåº¦è¾ƒä½ï¼Œé€šå¸¸åªå¤„ç†å‡½æ•°ç­‰ç›¸å…³åŠŸèƒ½ï¼‰\n\n---\n\n## 10. Behavior Driven Development(BDD) è¡Œä¸ºé©±åŠ¨å¼€å‘\n\n### 10.1 BDD å¼€å‘æµç¨‹\n\n1. å…ˆç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œä¸å…³å¿ƒæµ‹è¯•\n2. æ€è€ƒå¹¶æè¿°ç”¨æˆ·è¡Œä¸º\n3. æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ¨¡æ‹Ÿæµ‹è¯•\n\n### 10.2 vue example\n\n```jsx\n/// testUtils.js\nexport const findTestWrapper = (wrapper, tag) => {\n  return wrapper.find(`[data-test=\"${tag}\"]`);\n};\n```\n\n```jsx\n/// __tests__/integration/TodoList.test.js\nimport { mount } from \"@vue/test-utils\";\nimport { findTestWrapper } from \"../../../../utils/testUtils\";\nimport TodoList from \"../../TodoList\";\n// import store from \"../../../../store\"\nit(`    \n æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•    \n 1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹    \n 2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®  \n 3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹`, () => {\n  const wrapper = mount(TodoList);\n  // const wrapper = mount(TodoList, { store })\n  // å¦‚æœä½¿ç”¨ vuexï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨\n  const inputElem = findTestWrapper(wrapper, \"header-input\").at(0);\n  const content = \"Dell lee\";\n  inputElem.setValue(content);\n  inputElem.trigger(\"change\");\n  inputElem.trigger(\"keyup.enter\");\n  const listItems = findTestWrapper(wrapper, \"list-item\").at(0);\n  expect(listItems.length).toBe(1);\n  expect(listItems.at(0).text()).toContain(content);\n});\n```\n\n### 10.3 react example\n\n```jsx\n/// testUtils.js\nexport const findTestWrapper = (wrapper, tag) => {\n  return wrapper.find(`[data-test=\"${tag}\"]`);\n};\n```\n\n```jsx\n/// __tests__/integration/TodoList.test.js\nimport React from \"react\";\n// import { Provider } from \"react-redux\";\nimport Enzyme, { mount } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport TodoList from \"../../TodoList\";\n// import store from \"../../../../store/createStore\";\nEnzyme.configure({ adapter: new Adapter() });\n\nit(`\n    æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•\n    1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹\n    2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®\n   3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹\n`, () => {\n  const wrapper = mount(<TodoList />);\n  /** \n  const wrapper = mount(\n   <Provider store={store}>\n    <TodoList /></Provider>\n   </Provider>\n  )  \n  // å¦‚æœä½¿ç”¨ reduxï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨\n */\n  const inputElem = findTestWrapper(wrapper, \"header-input\");\n  const content = \"Dell lee\";\n  inputElem.simulate(\"change\", { target: { value: content } });\n  inputElem.simulate(\"keyUp\", { keyCode: 13 });\n  const listItems = findTestWrapper(wrapper, \"list-item\");\n  expect(listItems.length).toBe(1);\n  expect(listItems.text()).toContain(content);\n});\n```\n\n---\n\n## 11. TDD å’Œ BDD çš„å¯¹æ¯”\n\n1. `TDD` å…ˆå†™æµ‹è¯•åå†™ä»£ç ; `BDD` å…ˆå†™ä»£ç åå†™æµ‹è¯•\n2. `TDD` åˆ›å»ºçš„æ˜¯ `unit` å•å…ƒæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆå•å…ƒæµ‹è¯•ï¼Œå±äºç™½ç›’æµ‹è¯•(çŸ¥é“å®ç°æµ‹è¯•ä»£ç ); `BDD` åˆ›å»ºçš„æ˜¯ `integration` é›†æˆæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆé›†æˆæµ‹è¯•ï¼Œå±äºé»‘ç›’æµ‹è¯•(ä¸çŸ¥é“å®ç°æµ‹è¯•ä»£ç )\n3. `TDD` æµ‹è¯•é‡ç‚¹åœ¨ä»£ç ; `BDD` æµ‹è¯•é‡ç‚¹åœ¨ `UI`Â ( `DOM`)\n4. `TDD` å®‰å…¨æ„Ÿä½(æ— æ³•ä¿è¯å„ä¸ªç»„ä»¶æ‹¼æ’åˆ°ä¸€èµ·æ˜¯å¦ä¸ä¼šæœ‰é—®é¢˜); `BDD` å®‰å…¨æ„Ÿé«˜\n5. `TDD` é€Ÿåº¦å¿«; `BDD` é€Ÿåº¦æ…¢\n\n---\n\n## 12. TDD ä¸ BDD æ··ç”¨\n\n### 12.1 å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\n\n### 12.2 å¯¹ vuex çš„ store è¿›è¡Œæµ‹è¯•\n\n```jsx\n/// __tests__/unit/store.test.js\nimport store from \"../../../../store\";\nit(\"å½“ store æ¥å— changeInputValue çš„ commit æ—¶, inputValue å‘ç”Ÿå˜åŒ–\", () => {\n  const value = \"123\";\n  store.commit(\"changeInputValue\", value);\n  expect(store.state.inputValue).toBe(value);\n});\n```\n\n### 12.3 å¯¹ redux çš„ store è¿›è¡Œæµ‹è¯•\n\n```jsx\n/// __tests__/unit/store.test.js\nimport store from \"../../../../store/createStore\";\nimport { changeInputValue } from \"../../../../store/actions\";\nit(\"å½“ store æ¥å— changeInputValue çš„ dispatch æ—¶, inputValue å‘ç”Ÿå˜åŒ–\", () => {\n  const value = \"123\";\n  /**   \n  const changeInputValue = (payload) => ({ \n   type: CHANGE_IMPUT_VALUE, payload \n  })   \n */\n  store.dispatch(changeInputValue(value));\n  expect(store.getState().inputValue).toBe(value);\n});\n```\n\n---\n\n## 13. å¼‚æ­¥æµ‹è¯•\n\næ³¨æ„ï¼šå¼‚æ­¥æµ‹è¯•å¦‚æœç”¨åˆ°äº†å¼‚æ­¥å‡½æ•°ï¼Œåˆ™éœ€è¦è°ƒç”¨ `done`Â  å‡½æ•°\n\n### 13.1 vue çš„å¼‚æ­¥æµ‹è¯•\n\n```javascript\n/// __mocks__/axios.js\nconst undoList = {  success: true,  data: [\n { status: \"div\", value: \"dell\" },\n { status: \"div\", value: \"lee\" }\n]};\nexport default {\n get(url) {\n  if (url === \"/getUndoList.json\") {\n   return new Promise((resolve, reject) => {\n    if (this.success === true) {\n     resolve(undoList);\n    } else {\n     reject(new Error());\n    }\n   });\n  }\n }};\n\n/// __tests__/integration/TodoList.test.js\nimport { mount } from \"@vue/test-utils\";\nimport { findTestWrapper } from \"../../../../utils/testUtils\";\nimport TodoList from \"../../TodoList\";\nimport store from \"../../../../store\";\n\nbeforeEach(() => {\n axios.success = true;\n jest.useFakeTimers(); // å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“});\nit(`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`, done => {\n  const wrapper = mount(TodoList, { store });\n  wrapper.vm.$nickTick(() => {\n   const listItems = findTestWrapper(wrapper, \"list-item\");\n   expect(listItems.length).toBe(2);\n   done();\n  });\n });\nit(`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`, done => {\n const wrapper = mount(TodoList, { store });\n expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n jest.runAllTimers();\n wrapper.vm.$nickTick(() => {\n  const listItems = findTestWrapper(wrapper, \"list-item\");\n  expect(listItems.length).toBe(2);\n  done();\n });\n});\n\nit(`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰`, done => {\n axios.success = false;\n const wrapper = mount(TodoList, { store });\n expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n jest.runAllTimers();\n wrapper.vm.$nickTick(() => {\n  const listItems = findTestWrapper(wrapper, \"list-item\");\n  expect(listItems.length).toBe(0);\n  done();\n });\n});\n```\n\n### 13.2 react çš„å¼‚æ­¥æµ‹è¯•\n\n```jsx\n/// __mocks__/axios.js\nconst undoList = {\n  success: true,\n  data: [\n    { status: \"div\", value: \"dell\" },\n    { status: \"div\", value: \"lee\" }\n  ]\n};\n\nexport default {\n  get(url) {\n    if (url === \"/getUndoList.json\") {\n      return new Promise((resolve, reject) => {\n        if (this.success === true) {\n          resolve(undoList);\n        } else {\n          reject(new Error());\n        }\n      });\n    }\n  }\n};\n\n/// __tests__/integration/TodoList.test.js\nimport React from \"react\";\nimport { Provider } from \"react-redux\";\nimport Enzyme, { mount } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport TodoList from \"../../TodoList\";\nimport store from \"../../../../store/createStore\";\nEnzyme.configure({ adapter: new Adapter() });\n\nbeforeEach(() => {\n  axios.success = true;\n  jest.useFakeTimers(); // å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“\n});\n\nit(`\n    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•\n    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®\n`, done => {\n  const wrapper = mount(\n    <Provider store={store}>\n      <TodoList />\n    </Provider>\n  );\n  process.nickTick(() => {\n    wrapper.update();\n    const listItems = findTestWrapper(wrapper, \"list-item\");\n    expect(listItems.length).toBe(2);\n    done();\n  });\n});\n\nit(`\n    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s\n    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®\n`, done => {\n  const wrapper = mount(\n    <Provider store={store}>\n      <TodoList />\n    </Provider>\n  );\n  expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n  jest.runAllTimers();\n  process.nickTick(() => {\n    wrapper.update(); // æ›´æ–° wrapper é˜²æ­¢å–ä¸Šä¸€æ¬¡çš„ wrapper\n    const listItems = findTestWrapper(wrapper, \"list-item\");\n    expect(listItems.length).toBe(2);\n    done();\n  });\n});\n\nit(`\n  1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥\n  2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰\n`, done => {\n  axios.success = false;\n  const wrapper = mount(\n    <Provider store={store}>\n      <TodoList />\n    </Provider>\n  );\n  expect(setTimeout).toHaveBeenCalledTimes(1); // è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨\n  jest.runAllTimers();\n  process.nickTick(() => {\n    wrapper.update();\n    const listItems = findTestWrapper(wrapper, \"list-item\");\n    expect(listItems.length).toBe(0);\n    done();\n  });\n});\n```\n\n---\n\n## 14. vue é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\n\n### 14.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\n\n```jsx\n// HelloWorld.test.js\nimport Vue from \"vue\";\nimport HelloWorld from \"@/components/HelloWorld\";\ndescribe(\"HelloWorld.vue\", () => {\n  it(\"renders props.msg when passed\", () => {\n    const root = document.createElement(\"div\");\n    root.className = \"root\";\n    document.body.appendChild(root);\n    new Vue({\n      render: h =>\n        h(HelloWorld, {\n          props: {\n            msg: \"dell lee\"\n          }\n        })\n    }).$mount(\".root\");\n    expect(document.getElementByClassName(\"hello\").length).toBe(1);\n  });\n});\n```\n\nç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•\n\n### 14.2 ä½¿ç”¨ @vue/test-utils å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\n\n- [å®˜æ–¹æ–‡æ¡£](https://vue-test-utils.vuejs.org/zh/)\n\n### 14.2.1 for example\n\n```jsx\n// HelloWorld.test.js\nimport { shallowMount } from \"@vue/test-utils\";\nimport HelloWorld from \"@/components/HelloWorld\";\ndescribe(\"HelloWorld.vue\", () => {\n  it(\"renders props.msg when passed\", () => {\n    const msg = \"dell lee\";\n    const wrapper = shallowMount(HelloWorld, {\n      propsData: { msg }\n    });\n    expect(wrapper.text()).toMatch(msg);\n  });\n});\n```\n\n### 14.2.2 å¿«ç…§æµ‹è¯•\n\nä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬\n\nå¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ `dom` ç»“æ„çš„å˜åŒ–\n\n```jsx\n// HelloWorld.test.js\nimport { shallowMount } from \"@vue/test-utils\";\nimport HelloWorld from \"@/components/HelloWorld\";\ndescribe(\"HelloWorld.vue ç»„ä»¶æ¸²æŸ“æ­£å¸¸\", () => {\n  it(\"renders props.msg when passed\", () => {\n    const msg = \"dell lee\";\n    const wrapper = shallowMount(HelloWorld, {\n      propsData: { msg }\n    });\n    expect(wrapper).toMatchSnapshot();\n  });\n});\n```\n\n---\n\n## 15. react é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\n\n### 15.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•\n\n```jsx\n// App.test.js\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nit(\"render App\", () => {\n  const div = document.createElement(\"div\");\n  ReactDOM.render(<App />, div);\n  const container = div.getElementsByClassName(\"App\");\n  expect(container.length).toBe(1);\n});\n```\n\nç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•\n\n### 15.2 enzyme çš„é…ç½®å’Œä½¿ç”¨\n\n- [å®˜æ–¹æ–‡æ¡£](https://enzymejs.github.io/enzyme/)\n- [github](https://github.com/enzymejs/enzyme)\n- [jest-enzyme](https://github.com/enzymejs/enzyme-matchers/tree/master/packages/jest-enzyme)\n\n### 15.2.1 for example\n\n```jsx\n// App.test.js\nimport React from \"react\";\nimport Enzyme, { shallow } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport App from \"App\";\nEnzyme.configure({ adapter: new Adapter() });\nit(\"render App\", () => {\n  const wrapper = shallow(<App />);\n  expect(wrapper.find('[data-test=\"App\"]').length).toBe(2);\n});\n```\n\nä½¿ç”¨è‡ªå®šä¹‰ `props` å¯ä»¥é™ä½ä»£ç è€¦åˆåº¦\n\n`shallow` é€‚åˆå•å…ƒæµ‹è¯•ï¼Œå±äºæµ…æ¸²æŸ“ï¼› `mount` é€‚åˆé›†æˆæµ‹è¯•ï¼Œä¼šå°†å½“å‰ç»„ä»¶åŒ…æ‹¬å…¶å­ç»„ä»¶ä¸€èµ·æ¸²æŸ“\n\nå•å…ƒæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ `api` `.state()` ï¼›é›†æˆæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ `api` `.prop()`\n\n### 15.2.2 å¿«ç…§æµ‹è¯•\n\nä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬\n\nå¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ `dom` ç»“æ„çš„å˜åŒ–\n\n```jsx\n// App.test.js\nimport React from \"react\";\nimport Enzyme, { shallow } from \"enzyme\";\nimport Adapter from \"enzyme-adapter-react-16\";\nimport App from \"App\";\nEnzyme.configure({ adapter: new Adapter() });\nit(\"render App\", () => {\n  const wrapper = shallow(<App />);\n  expect(wrapper).toMatchSnapshot();\n});\n```\n\n---\n\n## 16. å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\n\n- æ›´å¥½çš„ä»£ç ç»„ç»‡ï¼Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å¼º\n- æ›´å°‘çš„ `Bug` å‡ºç°æ¦‚ç‡ï¼Œå°¤å…¶æ˜¯å›å½’æµ‹è¯•ä¸­çš„ `Bug`\n- ä¿®æ”¹å·¥ç¨‹è´¨é‡å·®çš„é¡¹ç›®ï¼Œæ›´åŠ å®‰å…¨\n- é¡¹ç›®å…·å¤‡æ½œåœ¨çš„æ–‡æ¡£ç‰¹æ€§\n- æ‰©å±•å‰ç«¯çš„çŸ¥è¯†é¢\n\n## 17 æ€»ç»“é‡è¦çš„ç‚¹\n\n1. `BDD` å’Œ `TDD`\n2. é›†æˆæµ‹è¯• å’Œ å•å…ƒæµ‹è¯•\n3. æµ‹è¯•å’Œä¸šåŠ¡çš„è§£è€¦\n4. ä»£ç æµ‹è¯•è¦†ç›–ç‡å¹¶ä¸ä»£è¡¨ä¸€å®šé è°±\n5. åŠŸèƒ½æ€§æµ‹è¯• å’Œ `UI`æµ‹è¯•\n6. æµ‹è¯•è¶Šç‹¬ç«‹ï¼Œéšè—çš„é—®é¢˜å°±è¶Šå¤š\n","slug":"å‰ç«¯/å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•","published":1,"updated":"2021-04-07T07:39:19.368Z","_id":"ckn7476aw003byx7y6rl88saa","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-å•å…ƒæµ‹è¯•\"><a href=\"#1-å•å…ƒæµ‹è¯•\" class=\"headerlink\" title=\"1. å•å…ƒæµ‹è¯•\"></a>1. å•å…ƒæµ‹è¯•</h2><p>å¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ï¼Œåœ¨å‰ç«¯ä¸€èˆ¬ä¸ºä¸€ä¸ªæ¨¡å—ã€‚</p>\n<h3 id=\"1-1-å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\"><a href=\"#1-1-å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"1.1 å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\"></a>1.1 å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹</h3><ol>\n<li>æµ‹è¯•è¦†ç›–ç‡é«˜</li>\n<li>ä¸šåŠ¡è€¦åˆåº¦é«˜</li>\n<li>ä»£ç é‡å¤§</li>\n<li>è¿‡äºç‹¬ç«‹</li>\n</ol>\n<h3 id=\"1-2-æ€»ç»“\"><a href=\"#1-2-æ€»ç»“\" class=\"headerlink\" title=\"1.2 æ€»ç»“\"></a>1.2 æ€»ç»“</h3><p>åœ¨æŸäº›åœºæ™¯ä¸‹é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•ï¼ŒæŸäº›åœºæ™¯ä¸‹ä¸é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•</p>\n<h2 id=\"2-é›†æˆæµ‹è¯•\"><a href=\"#2-é›†æˆæµ‹è¯•\" class=\"headerlink\" title=\"2. é›†æˆæµ‹è¯•\"></a>2. é›†æˆæµ‹è¯•</h2><p>åˆå«ç»„è£…æµ‹è¯•æˆ–è”åˆæµ‹è¯•ï¼Œåœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†æ‰€æœ‰æ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ï¼ˆå¦‚æ ¹æ®ç»“æ„å›¾ï¼‰ç»„è£…æˆä¸ºå­ç³»ç»Ÿæˆ–ç³»ç»Ÿï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚</p>\n<h2 id=\"3-jest-ä¸­çš„åŒ¹é…å™¨\"><a href=\"#3-jest-ä¸­çš„åŒ¹é…å™¨\" class=\"headerlink\" title=\"3. jest ä¸­çš„åŒ¹é…å™¨\"></a>3. jest ä¸­çš„åŒ¹é…å™¨</h2><p><a href=\"https://jestjs.io/docs/en/expect\">jest åŒ¹é…å™¨å®˜ç½‘</a></p>\n<p>ä¿®æ”¹ <code>jest</code>Â  é»˜è®¤é…ç½®å‘½ä»¤ <code>npx jest --init</code></p>\n<h3 id=\"3-1-å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\"><a href=\"#3-1-å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\" class=\"headerlink\" title=\"3.1 å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\"></a>3.1 å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜</h3><p><code>jest --watchAll</code> ä¸€æ—¦æŸä¸ªæµ‹è¯•ç”¨ä¾‹å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹éƒ½å°†ä¼šé‡æ–°æ‰§è¡Œ</p>\n<p><code>jest --watch</code>Â  é»˜è®¤è¿›å…¥ <code>o</code>Â  æ¨¡å¼ï¼Œå³åªå¯¹å‘ç”Ÿå˜åŒ–çš„æµ‹è¯•ç”¨ä¾‹é‡æ–°æ‰§è¡Œ</p>\n<h3 id=\"3-2-å¸¸ç”¨åŒ¹é…å™¨\"><a href=\"#3-2-å¸¸ç”¨åŒ¹é…å™¨\" class=\"headerlink\" title=\"3.2 å¸¸ç”¨åŒ¹é…å™¨\"></a>3.2 å¸¸ç”¨åŒ¹é…å™¨</h3><h3 id=\"3-2-1-toBe\"><a href=\"#3-2-1-toBe\" class=\"headerlink\" title=\"3.2.1 toBe()\"></a>3.2.1 toBe()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;;</span><br><span class=\"line\">  expect(a).toBe(&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âŒ å› ä¸ºå¼•ç”¨ç±»å‹ä½¿ç”¨toBeä¸æ˜¯å…¨ç­‰æ•ˆæœ</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBe</code> åŒ¹é…å™¨ç±»ä¼¼äº <code>===</code>ã€‚</p>\n<hr>\n<h3 id=\"3-2-2-toEqual\"><a href=\"#3-2-2-toEqual\" class=\"headerlink\" title=\"3.2.2 toEqual()\"></a>3.2.2 toEqual()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toEqualçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;;</span><br><span class=\"line\">  expect(a).toBe(&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ… å› ä¸ºtoEqualåªæ˜¯å¯¹ç»“æœçš„åŒ¹é…ï¼Œè€Œä¸æ˜¯å…¨ç­‰æ•ˆæœ</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toEqual</code> åŒ¹é…å™¨åªæ˜¯å¯¹ç»“æœç›¸ç­‰ä¸å¦è¿›è¡ŒåŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-3-toBeNull\"><a href=\"#3-2-3-toBeNull\" class=\"headerlink\" title=\"3.2.3 toBeNull()\"></a>3.2.3 toBeNull()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeNullçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  expect(a).toBeNull();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeNull</code> æ˜¯å¯¹ <code>null</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-4-toBeUndefined\"><a href=\"#3-2-4-toBeUndefined\" class=\"headerlink\" title=\"3.2.4 toBeUndefined()\"></a>3.2.4 toBeUndefined()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeUndefinedçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  expect(a).toBeUndefined();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeUndefined</code> æ˜¯å¯¹ <code>undefined</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-5-toBeDefined\"><a href=\"#3-2-5-toBeDefined\" class=\"headerlink\" title=\"3.2.5 toBeDefined()\"></a>3.2.5 toBeDefined()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeDefinedçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  expect(a).toBeDefined();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeDefined</code> æ˜¯å¯¹å·²ç»å®šä¹‰çš„å€¼çš„åŒ¹é…ï¼Œè‹¥ä¸º <code>undefined</code> åˆ™ä¸é€šè¿‡</p>\n<hr>\n<h3 id=\"3-2-6-toBeTruthy\"><a href=\"#3-2-6-toBeTruthy\" class=\"headerlink\" title=\"3.2.6 toBeTruthy()\"></a>3.2.6 toBeTruthy()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeTruthyçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\">  expect(a).toBeTruthy();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 0 =&gt; âŒï¼Œå› ä¸º toBeTruthy æ˜¯å¯¹ true å€¼çš„åŒ¹é…</span></span><br><span class=\"line\"><span class=\"comment\">// 1 =&gt; âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeTruthy</code> æ˜¯å¯¹ <code>true</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-7-toBeFalsy\"><a href=\"#3-2-7-toBeFalsy\" class=\"headerlink\" title=\"3.2.7 toBeFalsy()\"></a>3.2.7 toBeFalsy()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeFalsyçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  expect(a).toBeFalsy();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 1 =&gt; âŒ</span></span><br><span class=\"line\"><span class=\"comment\">// 0 =&gt; âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeFalsy</code> æ˜¯å¯¹ <code>false</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-8-toBeGreaterThan\"><a href=\"#3-2-8-toBeGreaterThan\" class=\"headerlink\" title=\"3.2.8 toBeGreaterThan()\"></a>3.2.8 toBeGreaterThan()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeGreaterThanåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">10</span>;</span><br><span class=\"line\">  expect(a).toBeGreaterThan(<span class=\"number\">9</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeGreaterThan</code> ç›¸å½“äº <code>&gt;</code></p>\n<hr>\n<h3 id=\"3-2-9-toBeLessThan\"><a href=\"#3-2-9-toBeLessThan\" class=\"headerlink\" title=\"3.2.9 toBeLessThan()\"></a>3.2.9 toBeLessThan()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeLessThanåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">8</span>;</span><br><span class=\"line\">  expect(a).toBeLessThan(<span class=\"number\">9</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeLessThan</code> ç›¸å½“äº <code>&lt;</code></p>\n<hr>\n<h3 id=\"3-2-10-toBeGreaterThanOrEqual\"><a href=\"#3-2-10-toBeGreaterThanOrEqual\" class=\"headerlink\" title=\"3.2.10 toBeGreaterThanOrEqual()\"></a>3.2.10 toBeGreaterThanOrEqual()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeGreaterThanOrEqualåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">10</span>;</span><br><span class=\"line\">  expect(a).toBeGreaterThanOrEqual(<span class=\"number\">10</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeGreaterThanOrEqual</code> ç›¸å½“äº <code>&gt;=</code></p>\n<hr>\n<h3 id=\"3-2-11-toBeLessThanOrEqual\"><a href=\"#3-2-11-toBeLessThanOrEqual\" class=\"headerlink\" title=\"3.2.11 toBeLessThanOrEqual()\"></a>3.2.11 toBeLessThanOrEqual()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeLessThanOrEqualåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">10</span>;</span><br><span class=\"line\">  expect(a).toBeLessThanOrEqual(<span class=\"number\">10</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeLessThanOrEqual</code> ç›¸å½“äº <code>&lt;=</code></p>\n<hr>\n<h3 id=\"3-2-12-toBeCloseTo\"><a href=\"#3-2-12-toBeCloseTo\" class=\"headerlink\" title=\"3.2.12 toBeCloseTo()\"></a>3.2.12 toBeCloseTo()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeCloseToåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> one = <span class=\"number\">0.1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> two = <span class=\"number\">0.2</span>;</span><br><span class=\"line\">  expect(one + two).toEqual(<span class=\"number\">0.3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âŒ å› ä¸ºæµ®ç‚¹ç²¾åº¦ä¸åŒ</span></span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeCloseToåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> one = <span class=\"number\">0.1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> two = <span class=\"number\">0.2</span>;</span><br><span class=\"line\">  expect(one + two).toBeCloseTo(<span class=\"number\">0.3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeCloseTo</code> ä¸ºäº†è§£å†³æµ®ç‚¹ç²¾åº¦ä¸åŒå¯¼è‡´çš„æ— æ³•åŒ¹é…çš„é—®é¢˜</p>\n<hr>\n<h3 id=\"3-2-13-toMatch\"><a href=\"#3-2-13-toMatch\" class=\"headerlink\" title=\"3.2.13 toMatch()\"></a>3.2.13 toMatch()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toMatchåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> str = <span class=\"string\">&quot;å¼ ä¸‰ã€æå››ã€ç‹äº”&quot;</span>;</span><br><span class=\"line\">  expect(str).toMatch(<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toMatchåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> str = <span class=\"string\">&quot;å¼ ä¸‰ã€æå››ã€ç‹äº”&quot;</span>;</span><br><span class=\"line\">  expect(str).toMatch(<span class=\"regexp\">/æå››/</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toMatch</code> ä¸ºå­—ç¬¦ä¸²åŒ…å«åŒ¹é…å™¨ï¼Œç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­åŒ…å«çš„å†…å®¹ï¼Œä¹Ÿå¯ä¼ æ­£åˆ™è¡¨è¾¾å¼</p>\n<hr>\n<h3 id=\"3-2-14-toContain\"><a href=\"#3-2-14-toContain\" class=\"headerlink\" title=\"3.2.14 toContain()\"></a>3.2.14 toContain()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toContainåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> arr = [<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>, <span class=\"string\">&quot;æå››&quot;</span>, <span class=\"string\">&quot;ç‹äº”&quot;</span>];</span><br><span class=\"line\">  expect(arr).toContain(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toContainåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> arr = [<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>, <span class=\"string\">&quot;æå››&quot;</span>, <span class=\"string\">&quot;ç‹äº”&quot;</span>];</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(arr);</span><br><span class=\"line\">  expect(data).toContain(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>toContain</code> ä¸ºæ•°æ®åŒ…å«åŒ¹å™¨ï¼Œç”¨æ¥åŒ¹é…æ•°ç»„ä¸­åŒ…å«çš„é¡¹ã€‚åŒæ—¶å¯å®Œå…¨å…¼å®¹ <code>Set</code> æµ‹è¯•</p>\n<hr>\n<h3 id=\"3-2-15-toHaveLength\"><a href=\"#3-2-15-toHaveLength\" class=\"headerlink\" title=\"3.2.15 toHaveLength()\"></a>3.2.15 toHaveLength()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// functions.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">getIntArray</span>(<span class=\"params\">num</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">Number</span>.isInteger(num)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;&quot;getIntArray&quot;åªæ¥å—æ•´æ•°ç±»å‹çš„å‚æ•°&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, len = num; i &lt; len; i++) &#123;</span><br><span class=\"line\">      result.push(i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// functions.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getIntArray &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../src/functions&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;getIntArray(3)è¿”å›çš„æ•°ç»„é•¿åº¦åº”è¯¥ä¸º3&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(getIntArray(<span class=\"number\">3</span>)).toHaveLength(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>toHaveLength</code>å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥æµ‹è¯•å­—ç¬¦ä¸²å’Œæ•°ç»„ç±»å‹çš„é•¿åº¦æ˜¯å¦æ»¡è¶³é¢„æœŸã€‚</p>\n<h3 id=\"3-2-16-toThrow\"><a href=\"#3-2-16-toThrow\" class=\"headerlink\" title=\"3.2.16 toThrow()\"></a>3.2.16 toThrow()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> throwNewErrorFunc = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toThrowåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(throwNewErrorFunc).toThrow();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>toThrow</code> æ˜¯ä¸“é—¨å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†çš„åŒ¹é…å™¨ï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸ªæ–¹æ³•ä¼šä¸ä¼šæŠ›å‡ºå¼‚å¸¸</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> throwNewErrorFunc = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toThrowåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(throwNewErrorFunc).toThrow(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¿™ä¸ªåŒ¹é…å™¨ä¸­åŠ ä¸€äº›å­—ç¬¦ä¸²ï¼Œæ„æ€å°±æ˜¯æŠ›å‡ºçš„å¼‚å¸¸å¿…é¡»å’Œå­—ç¬¦ä¸²ç›¸å¯¹åº”ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸åŒ¹é…ï¼Œä¹Ÿæ²¡åŠæ³•é€šè¿‡å¼‚å¸¸æµ‹è¯•ã€‚</p>\n<hr>\n<h3 id=\"3-2-17-not\"><a href=\"#3-2-17-not\" class=\"headerlink\" title=\"3.2.17 not()\"></a>3.2.17 not()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> throwNewErrorFunc = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•notåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(throwNewErrorFunc).not.toThrow();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>not</code> åŒ¹é…å™¨æ˜¯ <code>jest</code> ä¸­æ¯”è¾ƒç‰¹æ®Šçš„åŒ¹é…å™¨ï¼Œæ„æ€å°±æ˜¯ â€œç›¸åâ€ æˆ–è€…è¯´ â€œå–åâ€ .æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>not</code> åŒ¹é…å™¨ã€‚</p>\n<hr>\n<h3 id=\"3-3-å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\"><a href=\"#3-3-å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\" class=\"headerlink\" title=\"3.3 å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\"></a>3.3 å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•</h3><h3 id=\"3-3-1-å›è°ƒå‡½æ•°å¼\"><a href=\"#3-3-1-å›è°ƒå‡½æ•°å¼\" class=\"headerlink\" title=\"3.3.1 å›è°ƒå‡½æ•°å¼\"></a>3.3.1 å›è°ƒå‡½æ•°å¼</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchData.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> &#123;</span><br><span class=\"line\">  axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest.json&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    fn(res.data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchData.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./fetchData.js&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetchData(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(data).toEqual(&#123; <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å¿…é¡»åŠ å…¥ä¸€ä¸ª <code>done</code> æ–¹æ³•ï¼Œä¿è¯æˆ‘ä»¬çš„å›è°ƒå·²ç»å®Œæˆäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¡¨ç¤ºæµ‹è¯•å®Œæˆ</p>\n<hr>\n<h3 id=\"3-3-2-ç›´æ¥è¿”å›-Promise\"><a href=\"#3-3-2-ç›´æ¥è¿”å›-Promise\" class=\"headerlink\" title=\"3.3.2 ç›´æ¥è¿”å› Promise\"></a>3.3.2 ç›´æ¥è¿”å› Promise</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchTwoData.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchTwoData = <span class=\"function\">() =&gt;</span> axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest.json&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchTwoData.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchTwoData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./fetchTwoData.js&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchTwoDataçš„æµ‹è¯•ç”¨ä¾‹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> fetchTwoData().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  expect(res.data).toEqual(&#123; <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„è¦ <code>return</code></p>\n<h3 id=\"3-3-3-ä¸å­˜åœ¨çš„æ¥å£\"><a href=\"#3-3-3-ä¸å­˜åœ¨çš„æ¥å£\" class=\"headerlink\" title=\"3.3.3 ä¸å­˜åœ¨çš„æ¥å£\"></a>3.3.3 ä¸å­˜åœ¨çš„æ¥å£</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchData.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest_error.json&quot;</span>); <span class=\"comment\">// æ­¤åœ°å€å¹¶ä¸å­˜åœ¨</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchData.test.js</span></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼1</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect.assertions(<span class=\"number\">1</span>); <span class=\"comment\">// æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetchData().catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(err.toString().indexOf(<span class=\"string\">&quot;404&quot;</span>) &gt; -<span class=\"number\">1</span>).toBe(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼2</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> fetchData().rejects.toThrow();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼3</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  expect().assertions(<span class=\"number\">1</span>); <span class=\"comment\">// æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect</span></span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> fetchData();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    expect(err.toString().indexOf(<span class=\"string\">&quot;404&quot;</span>) &gt; -<span class=\"number\">1</span>).toBe(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å› ä¸ºæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨äº† <code>catch</code> æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰ä¼šèµ°è¿™ä¸ªæ–¹æ³•ï¼Œè€Œç°åœ¨æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œå°±ä¸ä¼šèµ°è¿™ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œ<code>jest</code> å°±é»˜è®¤è¿™ä¸ªç”¨ä¾‹é€šè¿‡äº†æµ‹è¯•ã€‚å› æ­¤å¿…é¡»è¦æ‰§è¡Œæ–­è¨€ï¼Œå³å¿…é¡»è®©å…¶æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚</p>\n<h3 id=\"3-3-4-async-await\"><a href=\"#3-3-4-async-await\" class=\"headerlink\" title=\"3.3.4 async/await\"></a>3.3.4 async/await</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchData.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest.json&quot;</span>); <span class=\"comment\">// æ­¤åœ°å€å¹¶ä¸å­˜åœ¨&#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchData.test.js</span></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼1</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\"> <span class=\"keyword\">await</span> expect(fetchData()).resolves.toMatchObject(&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">   success: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼2</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetchData();</span><br><span class=\"line\"> expect(response.data).toEqual(&#123; <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶å€™æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨ <code>async....await...</code> çš„å½¢å¼ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº† <code>resolves</code> ç”¨äºæŠŠç°æœ‰å¯¹è±¡è½¬æ¢æˆ <code>Promise</code> å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ <code>jest</code> ä¸­çš„ <code>toMatchObject</code> è¿›è¡ŒåŒ¹é…å¯¹è±¡ä¸­çš„å±æ€§ã€‚</p>\n<h2 id=\"4-jest-ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\"><a href=\"#4-jest-ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\" class=\"headerlink\" title=\"4. jest ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\"></a>4. jest ä¸­çš„å››ä¸ªé’©å­å‡½æ•°</h2><h3 id=\"4-1-beforeAll\"><a href=\"#4-1-beforeAll\" class=\"headerlink\" title=\"4.1 beforeAll()\"></a>4.1 beforeAll()</h3><p><code>beforeAll()</code>é’©å­å‡½æ•°çš„æ„æ€æ˜¯åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰è¿›è¡Œæ‰§è¡Œã€‚</p>\n<h3 id=\"4-2-afterAll\"><a href=\"#4-2-afterAll\" class=\"headerlink\" title=\"4.2 afterAll()\"></a>4.2 afterAll()</h3><p><code>afterAll()</code>é’©å­å‡½æ•°æ˜¯åœ¨å®Œæˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰æ‰§è¡Œçš„å‡½æ•°ã€‚</p>\n<h3 id=\"4-3-beforeEach\"><a href=\"#4-3-beforeEach\" class=\"headerlink\" title=\"4.3 beforeEach()\"></a>4.3 beforeEach()</h3><p><code>beforeEach()</code>é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚</p>\n<h3 id=\"4-4-afterEach\"><a href=\"#4-4-afterEach\" class=\"headerlink\" title=\"4.4 afterEach()\"></a>4.4 afterEach()</h3><p><code>afterEach()</code>é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯æ¬¡æµ‹è¯•ç”¨ä¾‹å®Œæˆæµ‹è¯•ä¹‹åæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚</p>\n<h2 id=\"5-jest-æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\"><a href=\"#5-jest-æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\" class=\"headerlink\" title=\"5. jest æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\"></a>5. jest æµ‹è¯•ç”¨ä¾‹åˆ†ç»„</h2><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// eat.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Eat</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setName</span>(<span class=\"params\">number</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = number === <span class=\"number\">1</span> ? <span class=\"string\">&quot;æ°´é¥º&quot;</span> : <span class=\"string\">&quot;ç«é”…&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setDesc</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.desc = <span class=\"built_in\">this</span>.user + <span class=\"string\">&quot;æè¿°&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setMoney</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.money = <span class=\"built_in\">this</span>.name === <span class=\"string\">&quot;æ°´é¥º&quot;</span> ? <span class=\"number\">80</span> : <span class=\"number\">300</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// eat.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Eat <span class=\"keyword\">from</span> <span class=\"string\">&quot;./eat&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> eat = <span class=\"keyword\">new</span> Eat();</span><br><span class=\"line\">beforeAll(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;å¼€å§‹åƒé¥­&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">afterAll(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;åƒå®Œé¥­äº†&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">describe(<span class=\"string\">&quot;æ°´é¥ºç›¸å…³å†…å®¹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•æ°´é¥ºæè¿°&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">1</span>);</span><br><span class=\"line\">    eat.setDesc();</span><br><span class=\"line\">    expect(eat.desc).toEqual(<span class=\"string\">&quot;æ°´é¥ºæè¿°&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•æ°´é¥ºä»·æ ¼&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">1</span>);</span><br><span class=\"line\">    eat.setMoney();</span><br><span class=\"line\">    expect(eat.money).toEqual(<span class=\"number\">80</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">describe(<span class=\"string\">&quot;ç«é”…ç›¸å…³å†…å®¹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•ç«é”…æè¿°&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">2</span>);</span><br><span class=\"line\">    eat.setDesc();</span><br><span class=\"line\">    expect(eat.desc).toEqual(<span class=\"string\">&quot;ç«é”…æè¿°&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•ç«é”…ä»·æ ¼&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">2</span>);</span><br><span class=\"line\">    eat.setMoney();</span><br><span class=\"line\">    expect(eat.money).toEqual(<span class=\"number\">300</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\"><a href=\"#6-é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"6. é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\"></a>6. é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ</h2><h3 id=\"6-1-é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\"><a href=\"#6-1-é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\" class=\"headerlink\" title=\"6.1 é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\"></a>6.1 é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿</h3><p>å³çˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°åœ¨å­ä½œç”¨åŸŸä¸‹ä¹Ÿç”Ÿæ•ˆ</p>\n<h3 id=\"6-2-é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\"><a href=\"#6-2-é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\" class=\"headerlink\" title=\"6.2 é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\"></a>6.2 é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨</h3><p>åŒä½œç”¨åŸŸä¸‹å°†éƒ½ä¼šæ‰§è¡Œ</p>\n<h3 id=\"6-3-å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\"><a href=\"#6-3-å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\" class=\"headerlink\" title=\"6.3 å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\"></a>6.3 å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°</h3><p>ä¼˜å…ˆçˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°ï¼Œå…¶æ¬¡æ‰§è¡Œå­ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°</p>\n<h3 id=\"6-4-åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\"><a href=\"#6-4-åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\" class=\"headerlink\" title=\"6.4 åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\"></a>6.4 åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°</h3><p>å¦‚æœå°†å¯¹åº”é€»è¾‘å†™åˆ°äº†éé’©å­å‡½æ•°çš„ä½ç½®ï¼Œé‚£ä¹ˆå°†ä¼šä¼˜å…ˆæ‰§è¡Œï¼Œç„¶åæ‰ä¼šæ‰§è¡Œé’©å­å‡½æ•°</p>\n<h3 id=\"6-5-å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\"><a href=\"#6-5-å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\" class=\"headerlink\" title=\"6.5 å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\"></a>6.5 å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•</h3><p>å½“ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­çš„æµ‹è¯•ç”¨ä¾‹å˜å¾—è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œå‡å¦‚æ­¤æ—¶æˆ‘ä»¬ç›¸å¯¹å…¶ä¸­æŸä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>test.only</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test.only(<span class=\"string\">&quot;æµ‹è¯•ç”¨ä¾‹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(<span class=\"number\">1</span> + <span class=\"number\">1</span>).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-Jest-ä¸­çš„-Mock\"><a href=\"#7-Jest-ä¸­çš„-Mock\" class=\"headerlink\" title=\"7. Jest ä¸­çš„ Mock\"></a>7. Jest ä¸­çš„ Mock</h2><h3 id=\"7-1-ä½œç”¨\"><a href=\"#7-1-ä½œç”¨\" class=\"headerlink\" title=\"7.1 ä½œç”¨\"></a>7.1 ä½œç”¨</h3><h3 id=\"7-1-1-æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ-this-å’Œè°ƒç”¨é¡ºåº\"><a href=\"#7-1-1-æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ-this-å’Œè°ƒç”¨é¡ºåº\" class=\"headerlink\" title=\"7.1.1 æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ this å’Œè°ƒç”¨é¡ºåº\"></a>7.1.1 æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ <code>this</code> å’Œè°ƒç”¨é¡ºåº</h3><h3 id=\"7-1-2-å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\"><a href=\"#7-1-2-å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\" class=\"headerlink\" title=\"7.1.2 å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\"></a>7.1.2 å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ</h3><h3 id=\"7-1-3-æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\"><a href=\"#7-1-3-æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\" class=\"headerlink\" title=\"7.1.3 æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\"></a>7.1.3 æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°</h3><h3 id=\"7-2-åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\"><a href=\"#7-2-åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\" class=\"headerlink\" title=\"7.2 åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\"></a>7.2 åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func).toBeCalled(); <span class=\"comment\">// æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>jest.fn()</code>Â  å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ•è·å‡½æ•°çš„è°ƒç”¨</p>\n<h3 id=\"7-3-jest-fn-mock-calls-åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\"><a href=\"#7-3-jest-fn-mock-calls-åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\" class=\"headerlink\" title=\"7.3 jest.fn().mock.calls åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\"></a>7.3 jest.fn().mock.calls åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.calls.length).toBe(<span class=\"number\">2</span>); <span class=\"comment\">// æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨2æ¬¡</span></span><br><span class=\"line\">  expect(func.mock.calls[<span class=\"number\">0</span>]).toEqual([<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>]); <span class=\"comment\">// æµ‹è¯•ç”¨ä¾‹ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &quot;å¼ ä¸‰&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æ­¤å¤„æ‰“å° <code>func.mock</code>Â  å°†ä¼šæ‰“å°ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç›¸åº”çš„ç”¨ä¾‹æµ‹è¯•</p>\n<h3 id=\"7-4-jest-fn-mockReturnValue-åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\"><a href=\"#7-4-jest-fn-mockReturnValue-åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\" class=\"headerlink\" title=\"7.4 jest.fn().mockReturnValue() åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\"></a>7.4 jest.fn().mockReturnValue() åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  <span class=\"comment\">// func.mockReturnValue(&quot;Common&quot;)</span></span><br><span class=\"line\">  <span class=\"comment\">// æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›å€¼éƒ½æ˜¯ &quot;Common&quot;</span></span><br><span class=\"line\">  func.mockReturnValueOnce(<span class=\"string\">&quot;A&quot;</span>); <span class=\"comment\">// ç¬¬ä¸€æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› &quot;A&quot;</span></span><br><span class=\"line\">  func.mockReturnValueOnce(<span class=\"string\">&quot;B&quot;</span>); <span class=\"comment\">// ç¬¬äºŒæ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› &quot;B&quot;</span></span><br><span class=\"line\">  func.mockReturnValueOnce(<span class=\"string\">&quot;C&quot;</span>); <span class=\"comment\">// ç¬¬ä¸‰æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› &quot;C&quot;</span></span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">0</span>].value).toBe(<span class=\"string\">&quot;A&quot;</span>);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">1</span>].value).toBe(<span class=\"string\">&quot;B&quot;</span>);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">2</span>].value).toBe(<span class=\"string\">&quot;C&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>func.mockReturnValue()</code>Â  å°†å¯¹æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›çš„å€¼ç”Ÿæ•ˆ</p>\n<p><code>func.mockReturnValueOnce()</code>Â  æ‰§è¡Œåˆ°ç¬¬å‡ æ¬¡å°±å¯¹ç¬¬å‡ ä¸ªå‡½æ•°çš„æ¨¡æ‹Ÿè¿”å›å€¼ç”Ÿæ•ˆ</p>\n<p>æ”¯æŒé“¾å¼è°ƒç”¨</p>\n<h3 id=\"7-5-jest-fn-mock-invocationCallOrder-åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\"><a href=\"#7-5-jest-fn-mock-invocationCallOrder-åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\" class=\"headerlink\" title=\"7.5 jest.fn().mock.invocationCallOrder åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\"></a>7.5 jest.fn().mock.invocationCallOrder åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.invocationCallOrder).toEqual([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-6-jest-fn-mock-instances-åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ-this-æŒ‡å‘\"><a href=\"#7-6-jest-fn-mock-instances-åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ-this-æŒ‡å‘\" class=\"headerlink\" title=\"7.6 jest.fn().mock.instances åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ this æŒ‡å‘\"></a>7.6 jest.fn().mock.instances åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ this æŒ‡å‘</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createObject = <span class=\"function\">(<span class=\"params\">ClassItem</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> ClassItem();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createObject &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• createObject&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  createObject(func);</span><br><span class=\"line\">  expect(func.mock.instances).toEqual([mockConstructor&#123;&#125;]); <span class=\"comment\">// æ­¤å¤„çš„ this å°±æ˜¯ mockConstructor</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-7-jest-fn-mockImplementation-åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\"><a href=\"#7-7-jest-fn-mockImplementation-åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\" class=\"headerlink\" title=\"7.7 jest.fn().mockImplementation() åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\"></a>7.7 jest.fn().mockImplementation() åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  <span class=\"comment\">// func.mockImplementation(() =&gt; &quot;hello&quot;); ç­‰ä»·äº jest.fn(() =&gt; &quot;hello&quot;)</span></span><br><span class=\"line\">  <span class=\"comment\">// func.mockImplementation(() =&gt; this); ç­‰ä»·äº jest.fn().mockReturnThis()</span></span><br><span class=\"line\">  func.mockImplementationOnce(<span class=\"function\">() =&gt;</span> <span class=\"string\">&quot;dell&quot;</span>);</span><br><span class=\"line\">  func.mockImplementationOnce(<span class=\"function\">() =&gt;</span> <span class=\"string\">&quot;lee&quot;</span>);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">0</span>].value).toBe(<span class=\"string\">&quot;dell&quot;</span>);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">1</span>].value).toBe(<span class=\"string\">&quot;lee&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>mockImplementation</code>Â  æ¯” <code>mockReturnValue</code>Â  æ›´å¥å£®ï¼Œå› ä¸ºå†…éƒ¨å¯ä»¥å†™ä¸€äº›é¢å¤–çš„é€»è¾‘</p>\n<h3 id=\"7-8-toBeCalledWith-æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\"><a href=\"#7-8-toBeCalledWith-æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\" class=\"headerlink\" title=\"7.8 toBeCalledWith() æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\"></a>7.8 toBeCalledWith() æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\">(<span class=\"params\">callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;ABC&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">0</span>]).toEqual([<span class=\"string\">&quot;ABC&quot;</span>);</span><br><span class=\"line\">  expect(func).toBeCalledWith(<span class=\"string\">&quot;ABC&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-9-æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\"><a href=\"#7-9-æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\" class=\"headerlink\" title=\"7.9 æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\"></a>7.9 æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚</h3><p>å¯¹äºå‰ç«¯æ¥è¯´ä¸€èˆ¬å¼‚æ­¥æ¥å£æ˜¯æµ‹è¯•æ˜¯å¦å‘é€äº†ï¼Œè€Œä¸æµ‹è¯•åç«¯æ¥å£è¿”å›çš„å†…å®¹ï¼Œæ˜¯å±äºåç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å†…å®¹</p>\n<h3 id=\"7-9-1-é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\"><a href=\"#7-9-1-é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"7.9.1 é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\"></a>7.9.1 é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;/api&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.data);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">jest.mock(<span class=\"string\">&quot;axios&quot;</span>); <span class=\"comment\">// å¯¹ axios è¿›è¡Œæ¨¡æ‹Ÿï¼Œè¿™æ ·å°±ä¸ä¼šè¯·æ±‚çœŸæ­£æ•°æ®</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• getData&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  axios.get.mockResolvedValue(&#123; <span class=\"attr\">data</span>: <span class=\"string\">&quot;hello&quot;</span> &#125;); <span class=\"comment\">// ä½¿ç”¨ axios è¯·æ±‚çš„æ—¶å€™æ¨¡æ‹ŸæˆåŠŸçš„è¿”å›å€¼å°±æ˜¯ hello</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> getData().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(data).toBe(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>mockResolvedValue</code> æ¨¡æ‹Ÿä¸é™æ¬¡æ•°</p>\n<p><code>mockResolvedValueOnce</code> æ¨¡æ‹Ÿä¸€æ¬¡ï¼Œæ¨¡æ‹Ÿä¸¤æ¬¡å°±ä¼šæŠ¥é”™ï¼Œéœ€å†æ¬¡è°ƒç”¨</p>\n<h3 id=\"7-9-2-é€šè¿‡æ¨¡æ‹Ÿ-Promise-æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\"><a href=\"#7-9-2-é€šè¿‡æ¨¡æ‹Ÿ-Promise-æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\" class=\"headerlink\" title=\"7.9.2 é€šè¿‡æ¨¡æ‹Ÿ Promise æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\"></a>7.9.2 é€šè¿‡æ¨¡æ‹Ÿ Promise æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;/&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.data);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// __mocks__/demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">&quot;function() &#123; return &#x27;123&#x27; &#125;&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\">jest.mock(<span class=\"string\">&quot;./demo&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•fetchData&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetchData().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(<span class=\"built_in\">eval</span>(data)).toEqual(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// å®ç°æ–¹å¼3</span></span><br><span class=\"line\"><span class=\"comment\">// ä¿®æ”¹jest.config.js å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨__mocks__ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢</span></span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäº jest.mock(&quot;è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶&quot;)&#123;  automock: true; &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-9-3-é€šè¿‡ä¿®æ”¹-jest-config-js-æ¥è‡ªåŠ¨è¯†åˆ«mocksä¸‹çš„æ–‡ä»¶\"><a href=\"#7-9-3-é€šè¿‡ä¿®æ”¹-jest-config-js-æ¥è‡ªåŠ¨è¯†åˆ«mocksä¸‹çš„æ–‡ä»¶\" class=\"headerlink\" title=\"7.9.3 é€šè¿‡ä¿®æ”¹ jest.config.js æ¥è‡ªåŠ¨è¯†åˆ«mocksä¸‹çš„æ–‡ä»¶\"></a>7.9.3 é€šè¿‡ä¿®æ”¹ jest.config.js æ¥è‡ªåŠ¨è¯†åˆ«<strong>mocks</strong>ä¸‹çš„æ–‡ä»¶</h3><p>ä¿®æ”¹ <code>jest.config.js</code> å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨ <code>__mocks__</code> ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢</p>\n<p>ç­‰åŒäº&gt; <code>jest.mock(&quot;è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶&quot;)</code></p>\n<h3 id=\"7-9-4-ä½¿ç”¨-jest-unmock-å¯å–æ¶ˆ-mock-æ¨¡æ‹Ÿ\"><a href=\"#7-9-4-ä½¿ç”¨-jest-unmock-å¯å–æ¶ˆ-mock-æ¨¡æ‹Ÿ\" class=\"headerlink\" title=\"7.9.4 ä½¿ç”¨ jest.unmock() å¯å–æ¶ˆ mock æ¨¡æ‹Ÿ\"></a>7.9.4 ä½¿ç”¨ jest.unmock() å¯å–æ¶ˆ mock æ¨¡æ‹Ÿ</h3><h3 id=\"7-9-5-è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦-mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦-mock-æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\"><a href=\"#7-9-5-è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦-mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦-mock-æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\" class=\"headerlink\" title=\"7.9.5 è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ mock æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\"></a>7.9.5 è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ mock æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;/&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.data);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getNumber = <span class=\"function\">() =&gt;</span> <span class=\"number\">123</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// __mocks__/demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">&quot;function() &#123; return &#x27;123&#x27; &#125;&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\">jest.mock(<span class=\"string\">&quot;./demo&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; getNumber &#125; = jest.requireActual(<span class=\"string\">&quot;./demo&quot;</span>); <span class=\"comment\">// å¼•å…¥çœŸå®æ–‡ä»¶</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• fetchData&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetchData().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(<span class=\"built_in\">eval</span>(data)).toEqual(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• getNumber&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(getNumber()).toEqual(<span class=\"number\">123</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-snapshot-å¿«ç…§æµ‹è¯•\"><a href=\"#8-snapshot-å¿«ç…§æµ‹è¯•\" class=\"headerlink\" title=\"8. snapshot å¿«ç…§æµ‹è¯•\"></a>8. snapshot å¿«ç…§æµ‹è¯•</h2><p>å¸¸ç”¨äºæµ‹è¯•é…ç½®æ–‡ä»¶</p>\n<h3 id=\"8-1-toMatchSnapshot\"><a href=\"#8-1-toMatchSnapshot\" class=\"headerlink\" title=\"8.1 toMatchSnapshot()\"></a>8.1 toMatchSnapshot()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> generateConfig = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    server: <span class=\"string\">&quot;http://localhost&quot;</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    domain: <span class=\"string\">&quot;localhost&quot;</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; generateConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• generateConfig&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(generateConfig()).toMatchSnapshot(); <span class=\"comment\">// å°†ä¼šåœ¨é¡¹ç›®é‡Œç”Ÿæˆå¿«ç…§æ–‡ä»¶</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœè¦ç¡®è®¤æ›´æ–°å¿«ç…§ï¼Œéœ€è¦åœ¨æ§åˆ¶å°é€‰æ‹©ã€‚ <code>u</code>Â  ä»£è¡¨å¯¹æ‰€æœ‰å¿«ç…§è¿›è¡Œæ›´æ–°ï¼Œ <code>i</code>Â  ä»£è¡¨å¯¹å•ä¸ªç¡®è®¤çš„å¿«ç…§è¿›è¡Œæ›´æ–°</p>\n<h3 id=\"8-2-æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\"><a href=\"#8-2-æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\" class=\"headerlink\" title=\"8.2 æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\"></a>8.2 æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> generateConfig = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    server: <span class=\"string\">&quot;http://localhost&quot;</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    domain: <span class=\"string\">&quot;localhost&quot;</span>,</span><br><span class=\"line\">    time: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">    random: <span class=\"built_in\">Math</span>.random()</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; generateConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• generateConfig&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(generateConfig()).toMatchSnapshot(&#123;</span><br><span class=\"line\">    time: expect.any(<span class=\"built_in\">Date</span>),</span><br><span class=\"line\">    random: expect.any(<span class=\"built_in\">Number</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-3-è¡Œå†…çš„-snapshot\"><a href=\"#8-3-è¡Œå†…çš„-snapshot\" class=\"headerlink\" title=\"8.3 è¡Œå†…çš„ snapshot\"></a>8.3 è¡Œå†…çš„ snapshot</h3><p><code>npm install prettier --save</code></p>\n<p>å¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> generateConfig = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    server: <span class=\"string\">&quot;http://localhost&quot;</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    domain: <span class=\"string\">&quot;localhost&quot;</span>,</span><br><span class=\"line\">    time: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">    random: <span class=\"built_in\">Math</span>.random()</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; generateConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• generateConfig&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// toMatchInlineSnapshot å¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­</span></span><br><span class=\"line\">  expect(generateConfig()).toMatchInlineSnapshot(&#123;</span><br><span class=\"line\">    time: expect.any(<span class=\"built_in\">Date</span>),</span><br><span class=\"line\">    random: expect.any(<span class=\"built_in\">Number</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"9-Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘\"><a href=\"#9-Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘\" class=\"headerlink\" title=\"9. Test Driven Development(TDD) æµ‹è¯•é©±åŠ¨å¼€å‘\"></a>9. Test Driven Development(TDD) æµ‹è¯•é©±åŠ¨å¼€å‘</h2><h3 id=\"9-1-TDD-å¼€å‘æµç¨‹\"><a href=\"#9-1-TDD-å¼€å‘æµç¨‹\" class=\"headerlink\" title=\"9.1 TDD å¼€å‘æµç¨‹\"></a>9.1 TDD å¼€å‘æµç¨‹</h3><ol>\n<li>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ˆçŸ¥é“åŠŸèƒ½ï¼Œå…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼‰</li>\n<li>è¿è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç”¨ä¾‹æ— æ³•é€šè¿‡æµ‹è¯•</li>\n<li>ç¼–å†™ä»£ç ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹é€šè¿‡æµ‹è¯•</li>\n<li>ä¼˜åŒ–ä»£ç ï¼Œ å®Œæˆå¼€å‘</li>\n<li>æ–°å¢åŠŸèƒ½ï¼Œé‡å¤æ‰§è¡Œ 1-4</li>\n</ol>\n<h3 id=\"9-2-TDD-çš„ä¼˜åŠ¿\"><a href=\"#9-2-TDD-çš„ä¼˜åŠ¿\" class=\"headerlink\" title=\"9.2 TDD çš„ä¼˜åŠ¿\"></a>9.2 TDD çš„ä¼˜åŠ¿</h3><ol>\n<li>é•¿æœŸå‡å°‘é¡¹ç›®çš„å›å½’ bugï¼ˆå‡å°‘ä¿®æ”¹ä»£ç äº§ç”Ÿçš„ bugï¼‰</li>\n<li>ä»£ç è´¨é‡æ›´å¥½ï¼ˆç»„ç»‡ï¼Œå¯ç»´æŠ¤æ€§å¥½ï¼‰</li>\n<li>æµ‹è¯•è¦†ç›–ç‡é«˜ï¼ˆå› ä¸ºæ˜¯å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æµ‹è¯•è¦†ç›–ç‡è¿‡é«˜ä¼šå½±å“å¾ˆå¤§ç²¾åŠ›ï¼‰</li>\n<li>é”™è¯¯æµ‹è¯•ä»£ç ä¸å®¹æ˜“å‡ºç°</li>\n</ol>\n<h3 id=\"9-3-TDD-çš„é€‚ç”¨åœºæ™¯\"><a href=\"#9-3-TDD-çš„é€‚ç”¨åœºæ™¯\" class=\"headerlink\" title=\"9.3 TDD çš„é€‚ç”¨åœºæ™¯\"></a>9.3 TDD çš„é€‚ç”¨åœºæ™¯</h3><ol>\n<li>ä¸é€‚ç”¨äºå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä½¿ç”¨ï¼ˆå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä¼šå¤§é‡çš„ä¸ä¸šåŠ¡ä»£ç äº§ç”Ÿè€¦åˆï¼ŒåŠ å¤§å·¥ä½œé‡ï¼‰</li>\n<li>é€‚ç”¨äºä¸€äº›åº“çš„å¼€å‘ï¼ˆå¼€å‘åº“æ—¶ä»£ç è€¦åˆåº¦è¾ƒä½ï¼Œé€šå¸¸åªå¤„ç†å‡½æ•°ç­‰ç›¸å…³åŠŸèƒ½ï¼‰</li>\n</ol>\n<hr>\n<h2 id=\"10-Behavior-Driven-Development-BDD-è¡Œä¸ºé©±åŠ¨å¼€å‘\"><a href=\"#10-Behavior-Driven-Development-BDD-è¡Œä¸ºé©±åŠ¨å¼€å‘\" class=\"headerlink\" title=\"10. Behavior Driven Development(BDD) è¡Œä¸ºé©±åŠ¨å¼€å‘\"></a>10. Behavior Driven Development(BDD) è¡Œä¸ºé©±åŠ¨å¼€å‘</h2><h3 id=\"10-1-BDD-å¼€å‘æµç¨‹\"><a href=\"#10-1-BDD-å¼€å‘æµç¨‹\" class=\"headerlink\" title=\"10.1 BDD å¼€å‘æµç¨‹\"></a>10.1 BDD å¼€å‘æµç¨‹</h3><ol>\n<li>å…ˆç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œä¸å…³å¿ƒæµ‹è¯•</li>\n<li>æ€è€ƒå¹¶æè¿°ç”¨æˆ·è¡Œä¸º</li>\n<li>æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ¨¡æ‹Ÿæµ‹è¯•</li>\n</ol>\n<h3 id=\"10-2-vue-example\"><a href=\"#10-2-vue-example\" class=\"headerlink\" title=\"10.2 vue example\"></a>10.2 vue example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// testUtils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> findTestWrapper = <span class=\"function\">(<span class=\"params\">wrapper, tag</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> wrapper.find(<span class=\"string\">`[data-test=&quot;<span class=\"subst\">$&#123;tag&#125;</span>&quot;]`</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; findTestWrapper &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../utils/testUtils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import store from &quot;../../../../store&quot;</span></span><br><span class=\"line\">it(<span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\"> æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•    </span></span><br><span class=\"line\"><span class=\"string\"> 1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹    </span></span><br><span class=\"line\"><span class=\"string\"> 2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®  </span></span><br><span class=\"line\"><span class=\"string\"> 3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹`</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(TodoList);</span><br><span class=\"line\">  <span class=\"comment\">// const wrapper = mount(TodoList, &#123; store &#125;)</span></span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœä½¿ç”¨ vuexï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> inputElem = findTestWrapper(wrapper, <span class=\"string\">&quot;header-input&quot;</span>).at(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content = <span class=\"string\">&quot;Dell lee&quot;</span>;</span><br><span class=\"line\">  inputElem.setValue(content);</span><br><span class=\"line\">  inputElem.trigger(<span class=\"string\">&quot;change&quot;</span>);</span><br><span class=\"line\">  inputElem.trigger(<span class=\"string\">&quot;keyup.enter&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>).at(<span class=\"number\">0</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">  expect(listItems.at(<span class=\"number\">0</span>).text()).toContain(content);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-3-react-example\"><a href=\"#10-3-react-example\" class=\"headerlink\" title=\"10.3 react example\"></a>10.3 react example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// testUtils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> findTestWrapper = <span class=\"function\">(<span class=\"params\">wrapper, tag</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> wrapper.find(<span class=\"string\">`[data-test=&quot;<span class=\"subst\">$&#123;tag&#125;</span>&quot;]`</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import &#123; Provider &#125; from &quot;react-redux&quot;;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import store from &quot;../../../../store/createStore&quot;;</span></span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•</span></span><br><span class=\"line\"><span class=\"string\">    1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹</span></span><br><span class=\"line\"><span class=\"string\">    2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®</span></span><br><span class=\"line\"><span class=\"string\">   3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoList</span> /&gt;</span></span>);</span><br><span class=\"line\">  <span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">  const wrapper = mount(</span></span><br><span class=\"line\"><span class=\"comment\">   &lt;Provider store=&#123;store&#125;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;TodoList /&gt;&lt;/Provider&gt;</span></span><br><span class=\"line\"><span class=\"comment\">   &lt;/Provider&gt;</span></span><br><span class=\"line\"><span class=\"comment\">  )  </span></span><br><span class=\"line\"><span class=\"comment\">  // å¦‚æœä½¿ç”¨ reduxï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> inputElem = findTestWrapper(wrapper, <span class=\"string\">&quot;header-input&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content = <span class=\"string\">&quot;Dell lee&quot;</span>;</span><br><span class=\"line\">  inputElem.simulate(<span class=\"string\">&quot;change&quot;</span>, &#123; <span class=\"attr\">target</span>: &#123; <span class=\"attr\">value</span>: content &#125; &#125;);</span><br><span class=\"line\">  inputElem.simulate(<span class=\"string\">&quot;keyUp&quot;</span>, &#123; <span class=\"attr\">keyCode</span>: <span class=\"number\">13</span> &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">  expect(listItems.text()).toContain(content);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"11-TDD-å’Œ-BDD-çš„å¯¹æ¯”\"><a href=\"#11-TDD-å’Œ-BDD-çš„å¯¹æ¯”\" class=\"headerlink\" title=\"11. TDD å’Œ BDD çš„å¯¹æ¯”\"></a>11. TDD å’Œ BDD çš„å¯¹æ¯”</h2><ol>\n<li><code>TDD</code> å…ˆå†™æµ‹è¯•åå†™ä»£ç ; <code>BDD</code> å…ˆå†™ä»£ç åå†™æµ‹è¯•</li>\n<li><code>TDD</code> åˆ›å»ºçš„æ˜¯ <code>unit</code> å•å…ƒæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆå•å…ƒæµ‹è¯•ï¼Œå±äºç™½ç›’æµ‹è¯•(çŸ¥é“å®ç°æµ‹è¯•ä»£ç ); <code>BDD</code> åˆ›å»ºçš„æ˜¯ <code>integration</code> é›†æˆæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆé›†æˆæµ‹è¯•ï¼Œå±äºé»‘ç›’æµ‹è¯•(ä¸çŸ¥é“å®ç°æµ‹è¯•ä»£ç )</li>\n<li><code>TDD</code> æµ‹è¯•é‡ç‚¹åœ¨ä»£ç ; <code>BDD</code> æµ‹è¯•é‡ç‚¹åœ¨ <code>UI</code>Â ( <code>DOM</code>)</li>\n<li><code>TDD</code> å®‰å…¨æ„Ÿä½(æ— æ³•ä¿è¯å„ä¸ªç»„ä»¶æ‹¼æ’åˆ°ä¸€èµ·æ˜¯å¦ä¸ä¼šæœ‰é—®é¢˜); <code>BDD</code> å®‰å…¨æ„Ÿé«˜</li>\n<li><code>TDD</code> é€Ÿåº¦å¿«; <code>BDD</code> é€Ÿåº¦æ…¢</li>\n</ol>\n<hr>\n<h2 id=\"12-TDD-ä¸-BDD-æ··ç”¨\"><a href=\"#12-TDD-ä¸-BDD-æ··ç”¨\" class=\"headerlink\" title=\"12. TDD ä¸ BDD æ··ç”¨\"></a>12. TDD ä¸ BDD æ··ç”¨</h2><h3 id=\"12-1-å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\"><a href=\"#12-1-å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\" class=\"headerlink\" title=\"12.1 å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\"></a>12.1 å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•</h3><h3 id=\"12-2-å¯¹-vuex-çš„-store-è¿›è¡Œæµ‹è¯•\"><a href=\"#12-2-å¯¹-vuex-çš„-store-è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"12.2 å¯¹ vuex çš„ store è¿›è¡Œæµ‹è¯•\"></a>12.2 å¯¹ vuex çš„ store è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/unit/store.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store&quot;</span>;</span><br><span class=\"line\">it(<span class=\"string\">&quot;å½“ store æ¥å— changeInputValue çš„ commit æ—¶, inputValue å‘ç”Ÿå˜åŒ–&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> value = <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">  store.commit(<span class=\"string\">&quot;changeInputValue&quot;</span>, value);</span><br><span class=\"line\">  expect(store.state.inputValue).toBe(value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-3-å¯¹-redux-çš„-store-è¿›è¡Œæµ‹è¯•\"><a href=\"#12-3-å¯¹-redux-çš„-store-è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"12.3 å¯¹ redux çš„ store è¿›è¡Œæµ‹è¯•\"></a>12.3 å¯¹ redux çš„ store è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/unit/store.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store/createStore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; changeInputValue &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store/actions&quot;</span>;</span><br><span class=\"line\">it(<span class=\"string\">&quot;å½“ store æ¥å— changeInputValue çš„ dispatch æ—¶, inputValue å‘ç”Ÿå˜åŒ–&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> value = <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">  <span class=\"comment\">/**   </span></span><br><span class=\"line\"><span class=\"comment\">  const changeInputValue = (payload) =&gt; (&#123; </span></span><br><span class=\"line\"><span class=\"comment\">   type: CHANGE_IMPUT_VALUE, payload </span></span><br><span class=\"line\"><span class=\"comment\">  &#125;)   </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">  store.dispatch(changeInputValue(value));</span><br><span class=\"line\">  expect(store.getState().inputValue).toBe(value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"13-å¼‚æ­¥æµ‹è¯•\"><a href=\"#13-å¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"13. å¼‚æ­¥æµ‹è¯•\"></a>13. å¼‚æ­¥æµ‹è¯•</h2><p>æ³¨æ„ï¼šå¼‚æ­¥æµ‹è¯•å¦‚æœç”¨åˆ°äº†å¼‚æ­¥å‡½æ•°ï¼Œåˆ™éœ€è¦è°ƒç”¨ <code>done</code>Â  å‡½æ•°</p>\n<h3 id=\"13-1-vue-çš„å¼‚æ­¥æµ‹è¯•\"><a href=\"#13-1-vue-çš„å¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"13.1 vue çš„å¼‚æ­¥æµ‹è¯•\"></a>13.1 vue çš„å¼‚æ­¥æµ‹è¯•</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __mocks__/axios.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> undoList = &#123;  <span class=\"attr\">success</span>: <span class=\"literal\">true</span>,  <span class=\"attr\">data</span>: [</span><br><span class=\"line\"> &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;dell&quot;</span> &#125;,</span><br><span class=\"line\"> &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;lee&quot;</span> &#125;</span><br><span class=\"line\">]&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\"> <span class=\"function\"><span class=\"title\">get</span>(<span class=\"params\">url</span>)</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (url === <span class=\"string\">&quot;/getUndoList.json&quot;</span>) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.success === <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">     resolve(undoList);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; findTestWrapper &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../utils/testUtils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">beforeEach(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"> axios.success = <span class=\"literal\">true</span>;</span><br><span class=\"line\"> jest.useFakeTimers(); <span class=\"comment\">// å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“&#125;);</span></span><br><span class=\"line\">it(<span class=\"string\">`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(TodoList, &#123; store &#125;);</span><br><span class=\"line\">  wrapper.vm.$nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">   expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">   done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">it(<span class=\"string\">`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> wrapper = mount(TodoList, &#123; store &#125;);</span><br><span class=\"line\"> expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\"> jest.runAllTimers();</span><br><span class=\"line\"> wrapper.vm.$nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">  done();</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\"> axios.success = <span class=\"literal\">false</span>;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> wrapper = mount(TodoList, &#123; store &#125;);</span><br><span class=\"line\"> expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\"> jest.runAllTimers();</span><br><span class=\"line\"> wrapper.vm.$nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">0</span>);</span><br><span class=\"line\">  done();</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-2-react-çš„å¼‚æ­¥æµ‹è¯•\"><a href=\"#13-2-react-çš„å¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"13.2 react çš„å¼‚æ­¥æµ‹è¯•\"></a>13.2 react çš„å¼‚æ­¥æµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __mocks__/axios.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> undoList = &#123;</span><br><span class=\"line\">  success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  data: [</span><br><span class=\"line\">    &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;dell&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;lee&quot;</span> &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">get</span>(<span class=\"params\">url</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (url === <span class=\"string\">&quot;/getUndoList.json&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.success === <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">          resolve(undoList);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store/createStore&quot;</span>;</span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">beforeEach(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  axios.success = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  jest.useFakeTimers(); <span class=\"comment\">// å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"string\">    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;TodoList /&gt;</span><br><span class=\"line\">    &lt;/Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">  process.nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    wrapper.update();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">    expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s</span></span><br><span class=\"line\"><span class=\"string\">    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;TodoList /&gt;</span><br><span class=\"line\">    &lt;/Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">  expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\">  jest.runAllTimers();</span><br><span class=\"line\">  process.nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    wrapper.update(); <span class=\"comment\">// æ›´æ–° wrapper é˜²æ­¢å–ä¸Šä¸€æ¬¡çš„ wrapper</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">    expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥</span></span><br><span class=\"line\"><span class=\"string\">  2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  axios.success = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;TodoList /&gt;</span><br><span class=\"line\">    &lt;/Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">  expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\">  jest.runAllTimers();</span><br><span class=\"line\">  process.nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    wrapper.update();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">    expect(listItems.length).toBe(<span class=\"number\">0</span>);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"14-vue-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"><a href=\"#14-vue-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\" class=\"headerlink\" title=\"14. vue é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"></a>14. vue é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•</h2><h3 id=\"14-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\"><a href=\"#14-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"14.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\"></a>14.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HelloWorld <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/components/HelloWorld&quot;</span>;</span><br><span class=\"line\">describe(<span class=\"string\">&quot;HelloWorld.vue&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  it(<span class=\"string\">&quot;renders props.msg when passed&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> root = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;div&quot;</span>);</span><br><span class=\"line\">    root.className = <span class=\"string\">&quot;root&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.appendChild(root);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">      render: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span></span><br><span class=\"line\">        h(HelloWorld, &#123;</span><br><span class=\"line\">          props: &#123;</span><br><span class=\"line\">            msg: <span class=\"string\">&quot;dell lee&quot;</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;).$mount(<span class=\"string\">&quot;.root&quot;</span>);</span><br><span class=\"line\">    expect(<span class=\"built_in\">document</span>.getElementByClassName(<span class=\"string\">&quot;hello&quot;</span>).length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•</p>\n<h3 id=\"14-2-ä½¿ç”¨-vue-test-utils-å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\"><a href=\"#14-2-ä½¿ç”¨-vue-test-utils-å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"14.2 ä½¿ç”¨ @vue/test-utils å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\"></a>14.2 ä½¿ç”¨ @vue/test-utils å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•</h3><ul>\n<li><a href=\"https://vue-test-utils.vuejs.org/zh/\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h3 id=\"14-2-1-for-example\"><a href=\"#14-2-1-for-example\" class=\"headerlink\" title=\"14.2.1 for example\"></a>14.2.1 for example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; shallowMount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HelloWorld <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/components/HelloWorld&quot;</span>;</span><br><span class=\"line\">describe(<span class=\"string\">&quot;HelloWorld.vue&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  it(<span class=\"string\">&quot;renders props.msg when passed&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> msg = <span class=\"string\">&quot;dell lee&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> wrapper = shallowMount(HelloWorld, &#123;</span><br><span class=\"line\">      propsData: &#123; msg &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    expect(wrapper.text()).toMatch(msg);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-2-2-å¿«ç…§æµ‹è¯•\"><a href=\"#14-2-2-å¿«ç…§æµ‹è¯•\" class=\"headerlink\" title=\"14.2.2 å¿«ç…§æµ‹è¯•\"></a>14.2.2 å¿«ç…§æµ‹è¯•</h3><p>ä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬</p>\n<p>å¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ <code>dom</code> ç»“æ„çš„å˜åŒ–</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; shallowMount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HelloWorld <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/components/HelloWorld&quot;</span>;</span><br><span class=\"line\">describe(<span class=\"string\">&quot;HelloWorld.vue ç»„ä»¶æ¸²æŸ“æ­£å¸¸&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  it(<span class=\"string\">&quot;renders props.msg when passed&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> msg = <span class=\"string\">&quot;dell lee&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> wrapper = shallowMount(HelloWorld, &#123;</span><br><span class=\"line\">      propsData: &#123; msg &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    expect(wrapper).toMatchSnapshot();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"15-react-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"><a href=\"#15-react-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\" class=\"headerlink\" title=\"15. react é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"></a>15. react é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•</h2><h3 id=\"15-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-react-ç»„ä»¶è¿›è¡Œæµ‹è¯•\"><a href=\"#15-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-react-ç»„ä»¶è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"15.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•\"></a>15.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">&quot;render App&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> div = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;div&quot;</span>);</span><br><span class=\"line\">  ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, div);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> container = div.getElementsByClassName(<span class=\"string\">&quot;App&quot;</span>);</span><br><span class=\"line\">  expect(container.length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•</p>\n<h3 id=\"15-2-enzyme-çš„é…ç½®å’Œä½¿ç”¨\"><a href=\"#15-2-enzyme-çš„é…ç½®å’Œä½¿ç”¨\" class=\"headerlink\" title=\"15.2 enzyme çš„é…ç½®å’Œä½¿ç”¨\"></a>15.2 enzyme çš„é…ç½®å’Œä½¿ç”¨</h3><ul>\n<li><a href=\"https://enzymejs.github.io/enzyme/\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li><a href=\"https://github.com/enzymejs/enzyme\">github</a></li>\n<li><a href=\"https://github.com/enzymejs/enzyme-matchers/tree/master/packages/jest-enzyme\">jest-enzyme</a></li>\n</ul>\n<h3 id=\"15-2-1-for-example\"><a href=\"#15-2-1-for-example\" class=\"headerlink\" title=\"15.2.1 for example\"></a>15.2.1 for example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; shallow &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;App&quot;</span>;</span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\">it(<span class=\"string\">&quot;render App&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = shallow(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>);</span><br><span class=\"line\">  expect(wrapper.find(<span class=\"string\">&#x27;[data-test=&quot;App&quot;]&#x27;</span>).length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä½¿ç”¨è‡ªå®šä¹‰ <code>props</code> å¯ä»¥é™ä½ä»£ç è€¦åˆåº¦</p>\n<p><code>shallow</code> é€‚åˆå•å…ƒæµ‹è¯•ï¼Œå±äºæµ…æ¸²æŸ“ï¼› <code>mount</code> é€‚åˆé›†æˆæµ‹è¯•ï¼Œä¼šå°†å½“å‰ç»„ä»¶åŒ…æ‹¬å…¶å­ç»„ä»¶ä¸€èµ·æ¸²æŸ“</p>\n<p>å•å…ƒæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ <code>api</code> <code>.state()</code> ï¼›é›†æˆæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ <code>api</code> <code>.prop()</code></p>\n<h3 id=\"15-2-2-å¿«ç…§æµ‹è¯•\"><a href=\"#15-2-2-å¿«ç…§æµ‹è¯•\" class=\"headerlink\" title=\"15.2.2 å¿«ç…§æµ‹è¯•\"></a>15.2.2 å¿«ç…§æµ‹è¯•</h3><p>ä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬</p>\n<p>å¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ <code>dom</code> ç»“æ„çš„å˜åŒ–</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; shallow &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;App&quot;</span>;</span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\">it(<span class=\"string\">&quot;render App&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = shallow(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>);</span><br><span class=\"line\">  expect(wrapper).toMatchSnapshot();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"16-å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\"><a href=\"#16-å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\" class=\"headerlink\" title=\"16. å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\"></a>16. å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿</h2><ul>\n<li>æ›´å¥½çš„ä»£ç ç»„ç»‡ï¼Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å¼º</li>\n<li>æ›´å°‘çš„ <code>Bug</code> å‡ºç°æ¦‚ç‡ï¼Œå°¤å…¶æ˜¯å›å½’æµ‹è¯•ä¸­çš„ <code>Bug</code></li>\n<li>ä¿®æ”¹å·¥ç¨‹è´¨é‡å·®çš„é¡¹ç›®ï¼Œæ›´åŠ å®‰å…¨</li>\n<li>é¡¹ç›®å…·å¤‡æ½œåœ¨çš„æ–‡æ¡£ç‰¹æ€§</li>\n<li>æ‰©å±•å‰ç«¯çš„çŸ¥è¯†é¢</li>\n</ul>\n<h2 id=\"17-æ€»ç»“é‡è¦çš„ç‚¹\"><a href=\"#17-æ€»ç»“é‡è¦çš„ç‚¹\" class=\"headerlink\" title=\"17 æ€»ç»“é‡è¦çš„ç‚¹\"></a>17 æ€»ç»“é‡è¦çš„ç‚¹</h2><ol>\n<li><code>BDD</code> å’Œ <code>TDD</code></li>\n<li>é›†æˆæµ‹è¯• å’Œ å•å…ƒæµ‹è¯•</li>\n<li>æµ‹è¯•å’Œä¸šåŠ¡çš„è§£è€¦</li>\n<li>ä»£ç æµ‹è¯•è¦†ç›–ç‡å¹¶ä¸ä»£è¡¨ä¸€å®šé è°±</li>\n<li>åŠŸèƒ½æ€§æµ‹è¯• å’Œ <code>UI</code>æµ‹è¯•</li>\n<li>æµ‹è¯•è¶Šç‹¬ç«‹ï¼Œéšè—çš„é—®é¢˜å°±è¶Šå¤š</li>\n</ol>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-å•å…ƒæµ‹è¯•\"><a href=\"#1-å•å…ƒæµ‹è¯•\" class=\"headerlink\" title=\"1. å•å…ƒæµ‹è¯•\"></a>1. å•å…ƒæµ‹è¯•</h2><p>å¯¹è½¯ä»¶ä¸­çš„æœ€å°å¯æµ‹è¯•å•å…ƒè¿›è¡Œæ£€æŸ¥å’ŒéªŒè¯ï¼Œåœ¨å‰ç«¯ä¸€èˆ¬ä¸ºä¸€ä¸ªæ¨¡å—ã€‚</p>\n<h3 id=\"1-1-å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\"><a href=\"#1-1-å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\" class=\"headerlink\" title=\"1.1 å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹\"></a>1.1 å•å…ƒæµ‹è¯•çš„ä¼˜ç¼ºç‚¹</h3><ol>\n<li>æµ‹è¯•è¦†ç›–ç‡é«˜</li>\n<li>ä¸šåŠ¡è€¦åˆåº¦é«˜</li>\n<li>ä»£ç é‡å¤§</li>\n<li>è¿‡äºç‹¬ç«‹</li>\n</ol>\n<h3 id=\"1-2-æ€»ç»“\"><a href=\"#1-2-æ€»ç»“\" class=\"headerlink\" title=\"1.2 æ€»ç»“\"></a>1.2 æ€»ç»“</h3><p>åœ¨æŸäº›åœºæ™¯ä¸‹é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•ï¼ŒæŸäº›åœºæ™¯ä¸‹ä¸é€‚åˆé€‚ç”¨å•å…ƒæµ‹è¯•</p>\n<h2 id=\"2-é›†æˆæµ‹è¯•\"><a href=\"#2-é›†æˆæµ‹è¯•\" class=\"headerlink\" title=\"2. é›†æˆæµ‹è¯•\"></a>2. é›†æˆæµ‹è¯•</h2><p>åˆå«ç»„è£…æµ‹è¯•æˆ–è”åˆæµ‹è¯•ï¼Œåœ¨å•å…ƒæµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå°†æ‰€æœ‰æ¨¡å—æŒ‰ç…§è®¾è®¡è¦æ±‚ï¼ˆå¦‚æ ¹æ®ç»“æ„å›¾ï¼‰ç»„è£…æˆä¸ºå­ç³»ç»Ÿæˆ–ç³»ç»Ÿï¼Œè¿›è¡Œé›†æˆæµ‹è¯•ã€‚</p>\n<h2 id=\"3-jest-ä¸­çš„åŒ¹é…å™¨\"><a href=\"#3-jest-ä¸­çš„åŒ¹é…å™¨\" class=\"headerlink\" title=\"3. jest ä¸­çš„åŒ¹é…å™¨\"></a>3. jest ä¸­çš„åŒ¹é…å™¨</h2><p><a href=\"https://jestjs.io/docs/en/expect\">jest åŒ¹é…å™¨å®˜ç½‘</a></p>\n<p>ä¿®æ”¹ <code>jest</code>Â  é»˜è®¤é…ç½®å‘½ä»¤ <code>npx jest --init</code></p>\n<h3 id=\"3-1-å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\"><a href=\"#3-1-å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\" class=\"headerlink\" title=\"3.1 å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜\"></a>3.1 å®æ—¶ç›‘å¬æµ‹è¯•ç”¨ä¾‹çš„æ”¹å˜</h3><p><code>jest --watchAll</code> ä¸€æ—¦æŸä¸ªæµ‹è¯•ç”¨ä¾‹å‘ç”Ÿå˜åŒ–ï¼Œæ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹éƒ½å°†ä¼šé‡æ–°æ‰§è¡Œ</p>\n<p><code>jest --watch</code>Â  é»˜è®¤è¿›å…¥ <code>o</code>Â  æ¨¡å¼ï¼Œå³åªå¯¹å‘ç”Ÿå˜åŒ–çš„æµ‹è¯•ç”¨ä¾‹é‡æ–°æ‰§è¡Œ</p>\n<h3 id=\"3-2-å¸¸ç”¨åŒ¹é…å™¨\"><a href=\"#3-2-å¸¸ç”¨åŒ¹é…å™¨\" class=\"headerlink\" title=\"3.2 å¸¸ç”¨åŒ¹é…å™¨\"></a>3.2 å¸¸ç”¨åŒ¹é…å™¨</h3><h3 id=\"3-2-1-toBe\"><a href=\"#3-2-1-toBe\" class=\"headerlink\" title=\"3.2.1 toBe()\"></a>3.2.1 toBe()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;;</span><br><span class=\"line\">  expect(a).toBe(&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âŒ å› ä¸ºå¼•ç”¨ç±»å‹ä½¿ç”¨toBeä¸æ˜¯å…¨ç­‰æ•ˆæœ</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBe</code> åŒ¹é…å™¨ç±»ä¼¼äº <code>===</code>ã€‚</p>\n<hr>\n<h3 id=\"3-2-2-toEqual\"><a href=\"#3-2-2-toEqual\" class=\"headerlink\" title=\"3.2.2 toEqual()\"></a>3.2.2 toEqual()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toEqualçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;;</span><br><span class=\"line\">  expect(a).toBe(&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;å¼ ä¸‰&quot;</span> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ… å› ä¸ºtoEqualåªæ˜¯å¯¹ç»“æœçš„åŒ¹é…ï¼Œè€Œä¸æ˜¯å…¨ç­‰æ•ˆæœ</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toEqual</code> åŒ¹é…å™¨åªæ˜¯å¯¹ç»“æœç›¸ç­‰ä¸å¦è¿›è¡ŒåŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-3-toBeNull\"><a href=\"#3-2-3-toBeNull\" class=\"headerlink\" title=\"3.2.3 toBeNull()\"></a>3.2.3 toBeNull()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeNullçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  expect(a).toBeNull();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeNull</code> æ˜¯å¯¹ <code>null</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-4-toBeUndefined\"><a href=\"#3-2-4-toBeUndefined\" class=\"headerlink\" title=\"3.2.4 toBeUndefined()\"></a>3.2.4 toBeUndefined()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeUndefinedçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  expect(a).toBeUndefined();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeUndefined</code> æ˜¯å¯¹ <code>undefined</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-5-toBeDefined\"><a href=\"#3-2-5-toBeDefined\" class=\"headerlink\" title=\"3.2.5 toBeDefined()\"></a>3.2.5 toBeDefined()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeDefinedçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  expect(a).toBeDefined();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeDefined</code> æ˜¯å¯¹å·²ç»å®šä¹‰çš„å€¼çš„åŒ¹é…ï¼Œè‹¥ä¸º <code>undefined</code> åˆ™ä¸é€šè¿‡</p>\n<hr>\n<h3 id=\"3-2-6-toBeTruthy\"><a href=\"#3-2-6-toBeTruthy\" class=\"headerlink\" title=\"3.2.6 toBeTruthy()\"></a>3.2.6 toBeTruthy()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeTruthyçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">0</span>;</span><br><span class=\"line\">  expect(a).toBeTruthy();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 0 =&gt; âŒï¼Œå› ä¸º toBeTruthy æ˜¯å¯¹ true å€¼çš„åŒ¹é…</span></span><br><span class=\"line\"><span class=\"comment\">// 1 =&gt; âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeTruthy</code> æ˜¯å¯¹ <code>true</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-7-toBeFalsy\"><a href=\"#3-2-7-toBeFalsy\" class=\"headerlink\" title=\"3.2.7 toBeFalsy()\"></a>3.2.7 toBeFalsy()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeFalsyçš„åŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\">  expect(a).toBeFalsy();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// 1 =&gt; âŒ</span></span><br><span class=\"line\"><span class=\"comment\">// 0 =&gt; âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeFalsy</code> æ˜¯å¯¹ <code>false</code> å€¼çš„åŒ¹é…</p>\n<hr>\n<h3 id=\"3-2-8-toBeGreaterThan\"><a href=\"#3-2-8-toBeGreaterThan\" class=\"headerlink\" title=\"3.2.8 toBeGreaterThan()\"></a>3.2.8 toBeGreaterThan()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeGreaterThanåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">10</span>;</span><br><span class=\"line\">  expect(a).toBeGreaterThan(<span class=\"number\">9</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeGreaterThan</code> ç›¸å½“äº <code>&gt;</code></p>\n<hr>\n<h3 id=\"3-2-9-toBeLessThan\"><a href=\"#3-2-9-toBeLessThan\" class=\"headerlink\" title=\"3.2.9 toBeLessThan()\"></a>3.2.9 toBeLessThan()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeLessThanåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">8</span>;</span><br><span class=\"line\">  expect(a).toBeLessThan(<span class=\"number\">9</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeLessThan</code> ç›¸å½“äº <code>&lt;</code></p>\n<hr>\n<h3 id=\"3-2-10-toBeGreaterThanOrEqual\"><a href=\"#3-2-10-toBeGreaterThanOrEqual\" class=\"headerlink\" title=\"3.2.10 toBeGreaterThanOrEqual()\"></a>3.2.10 toBeGreaterThanOrEqual()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeGreaterThanOrEqualåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">10</span>;</span><br><span class=\"line\">  expect(a).toBeGreaterThanOrEqual(<span class=\"number\">10</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeGreaterThanOrEqual</code> ç›¸å½“äº <code>&gt;=</code></p>\n<hr>\n<h3 id=\"3-2-11-toBeLessThanOrEqual\"><a href=\"#3-2-11-toBeLessThanOrEqual\" class=\"headerlink\" title=\"3.2.11 toBeLessThanOrEqual()\"></a>3.2.11 toBeLessThanOrEqual()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeLessThanOrEqualåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> count = <span class=\"number\">10</span>;</span><br><span class=\"line\">  expect(a).toBeLessThanOrEqual(<span class=\"number\">10</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeLessThanOrEqual</code> ç›¸å½“äº <code>&lt;=</code></p>\n<hr>\n<h3 id=\"3-2-12-toBeCloseTo\"><a href=\"#3-2-12-toBeCloseTo\" class=\"headerlink\" title=\"3.2.12 toBeCloseTo()\"></a>3.2.12 toBeCloseTo()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeCloseToåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> one = <span class=\"number\">0.1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> two = <span class=\"number\">0.2</span>;</span><br><span class=\"line\">  expect(one + two).toEqual(<span class=\"number\">0.3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âŒ å› ä¸ºæµ®ç‚¹ç²¾åº¦ä¸åŒ</span></span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toBeCloseToåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> one = <span class=\"number\">0.1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> two = <span class=\"number\">0.2</span>;</span><br><span class=\"line\">  expect(one + two).toBeCloseTo(<span class=\"number\">0.3</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toBeCloseTo</code> ä¸ºäº†è§£å†³æµ®ç‚¹ç²¾åº¦ä¸åŒå¯¼è‡´çš„æ— æ³•åŒ¹é…çš„é—®é¢˜</p>\n<hr>\n<h3 id=\"3-2-13-toMatch\"><a href=\"#3-2-13-toMatch\" class=\"headerlink\" title=\"3.2.13 toMatch()\"></a>3.2.13 toMatch()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toMatchåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> str = <span class=\"string\">&quot;å¼ ä¸‰ã€æå››ã€ç‹äº”&quot;</span>;</span><br><span class=\"line\">  expect(str).toMatch(<span class=\"string\">&quot;æå››&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toMatchåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> str = <span class=\"string\">&quot;å¼ ä¸‰ã€æå››ã€ç‹äº”&quot;</span>;</span><br><span class=\"line\">  expect(str).toMatch(<span class=\"regexp\">/æå››/</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br></pre></td></tr></table></figure>\n\n<p><code>toMatch</code> ä¸ºå­—ç¬¦ä¸²åŒ…å«åŒ¹é…å™¨ï¼Œç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²ä¸­åŒ…å«çš„å†…å®¹ï¼Œä¹Ÿå¯ä¼ æ­£åˆ™è¡¨è¾¾å¼</p>\n<hr>\n<h3 id=\"3-2-14-toContain\"><a href=\"#3-2-14-toContain\" class=\"headerlink\" title=\"3.2.14 toContain()\"></a>3.2.14 toContain()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toContainåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> arr = [<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>, <span class=\"string\">&quot;æå››&quot;</span>, <span class=\"string\">&quot;ç‹äº”&quot;</span>];</span><br><span class=\"line\">  expect(arr).toContain(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// âœ…</span></span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toContainåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> arr = [<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>, <span class=\"string\">&quot;æå››&quot;</span>, <span class=\"string\">&quot;ç‹äº”&quot;</span>];</span><br><span class=\"line\">  <span class=\"keyword\">const</span> data = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>(arr);</span><br><span class=\"line\">  expect(data).toContain(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>toContain</code> ä¸ºæ•°æ®åŒ…å«åŒ¹å™¨ï¼Œç”¨æ¥åŒ¹é…æ•°ç»„ä¸­åŒ…å«çš„é¡¹ã€‚åŒæ—¶å¯å®Œå…¨å…¼å®¹ <code>Set</code> æµ‹è¯•</p>\n<hr>\n<h3 id=\"3-2-15-toHaveLength\"><a href=\"#3-2-15-toHaveLength\" class=\"headerlink\" title=\"3.2.15 toHaveLength()\"></a>3.2.15 toHaveLength()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// functions.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">getIntArray</span>(<span class=\"params\">num</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"built_in\">Number</span>.isInteger(num)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&#x27;&quot;getIntArray&quot;åªæ¥å—æ•´æ•°ç±»å‹çš„å‚æ•°&#x27;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> result = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>, len = num; i &lt; len; i++) &#123;</span><br><span class=\"line\">      result.push(i);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// functions.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getIntArray &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../src/functions&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;getIntArray(3)è¿”å›çš„æ•°ç»„é•¿åº¦åº”è¯¥ä¸º3&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(getIntArray(<span class=\"number\">3</span>)).toHaveLength(<span class=\"number\">3</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>toHaveLength</code>å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”¨æ¥æµ‹è¯•å­—ç¬¦ä¸²å’Œæ•°ç»„ç±»å‹çš„é•¿åº¦æ˜¯å¦æ»¡è¶³é¢„æœŸã€‚</p>\n<h3 id=\"3-2-16-toThrow\"><a href=\"#3-2-16-toThrow\" class=\"headerlink\" title=\"3.2.16 toThrow()\"></a>3.2.16 toThrow()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> throwNewErrorFunc = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toThrowåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(throwNewErrorFunc).toThrow();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>toThrow</code> æ˜¯ä¸“é—¨å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†çš„åŒ¹é…å™¨ï¼Œå¯ä»¥æ£€æµ‹ä¸€ä¸ªæ–¹æ³•ä¼šä¸ä¼šæŠ›å‡ºå¼‚å¸¸</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> throwNewErrorFunc = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•toThrowåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(throwNewErrorFunc).toThrow(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¿™ä¸ªåŒ¹é…å™¨ä¸­åŠ ä¸€äº›å­—ç¬¦ä¸²ï¼Œæ„æ€å°±æ˜¯æŠ›å‡ºçš„å¼‚å¸¸å¿…é¡»å’Œå­—ç¬¦ä¸²ç›¸å¯¹åº”ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸åŒ¹é…ï¼Œä¹Ÿæ²¡åŠæ³•é€šè¿‡å¼‚å¸¸æµ‹è¯•ã€‚</p>\n<hr>\n<h3 id=\"3-2-17-not\"><a href=\"#3-2-17-not\" class=\"headerlink\" title=\"3.2.17 not()\"></a>3.2.17 not()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> throwNewErrorFunc = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;this is a new error&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•notåŒ¹é…å™¨&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(throwNewErrorFunc).not.toThrow();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>not</code> åŒ¹é…å™¨æ˜¯ <code>jest</code> ä¸­æ¯”è¾ƒç‰¹æ®Šçš„åŒ¹é…å™¨ï¼Œæ„æ€å°±æ˜¯ â€œç›¸åâ€ æˆ–è€…è¯´ â€œå–åâ€ .æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>not</code> åŒ¹é…å™¨ã€‚</p>\n<hr>\n<h3 id=\"3-3-å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\"><a href=\"#3-3-å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\" class=\"headerlink\" title=\"3.3 å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•\"></a>3.3 å¼‚æ­¥ä»£ç æµ‹è¯•æ–¹æ³•</h3><h3 id=\"3-3-1-å›è°ƒå‡½æ•°å¼\"><a href=\"#3-3-1-å›è°ƒå‡½æ•°å¼\" class=\"headerlink\" title=\"3.3.1 å›è°ƒå‡½æ•°å¼\"></a>3.3.1 å›è°ƒå‡½æ•°å¼</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchData.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\"><span class=\"params\">fn</span> =&gt;</span> &#123;</span><br><span class=\"line\">  axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest.json&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">    fn(res.data);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchData.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./fetchData.js&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  fetchData(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(data).toEqual(&#123; <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å¿…é¡»åŠ å…¥ä¸€ä¸ª <code>done</code> æ–¹æ³•ï¼Œä¿è¯æˆ‘ä»¬çš„å›è°ƒå·²ç»å®Œæˆäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¡¨ç¤ºæµ‹è¯•å®Œæˆ</p>\n<hr>\n<h3 id=\"3-3-2-ç›´æ¥è¿”å›-Promise\"><a href=\"#3-3-2-ç›´æ¥è¿”å›-Promise\" class=\"headerlink\" title=\"3.3.2 ç›´æ¥è¿”å› Promise\"></a>3.3.2 ç›´æ¥è¿”å› Promise</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchTwoData.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchTwoData = <span class=\"function\">() =&gt;</span> axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest.json&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchTwoData.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchTwoData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./fetchTwoData.js&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchTwoDataçš„æµ‹è¯•ç”¨ä¾‹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> fetchTwoData().then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  expect(res.data).toEqual(&#123; <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æ³¨æ„è¦ <code>return</code></p>\n<h3 id=\"3-3-3-ä¸å­˜åœ¨çš„æ¥å£\"><a href=\"#3-3-3-ä¸å­˜åœ¨çš„æ¥å£\" class=\"headerlink\" title=\"3.3.3 ä¸å­˜åœ¨çš„æ¥å£\"></a>3.3.3 ä¸å­˜åœ¨çš„æ¥å£</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchData.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest_error.json&quot;</span>); <span class=\"comment\">// æ­¤åœ°å€å¹¶ä¸å­˜åœ¨</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchData.test.js</span></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼1</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect.assertions(<span class=\"number\">1</span>); <span class=\"comment\">// æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetchData().catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(err.toString().indexOf(<span class=\"string\">&quot;404&quot;</span>) &gt; -<span class=\"number\">1</span>).toBe(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼2</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">await</span> fetchData().rejects.toThrow();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼3</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  expect().assertions(<span class=\"number\">1</span>); <span class=\"comment\">// æ–­è¨€ï¼Œå¿…é¡»æ‰§è¡Œä¸€æ¬¡ expect</span></span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">await</span> fetchData();</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">    expect(err.toString().indexOf(<span class=\"string\">&quot;404&quot;</span>) &gt; -<span class=\"number\">1</span>).toBe(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å› ä¸ºæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨äº† <code>catch</code> æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰ä¼šèµ°è¿™ä¸ªæ–¹æ³•ï¼Œè€Œç°åœ¨æ²¡æœ‰å‡ºç°å¼‚å¸¸ï¼Œå°±ä¸ä¼šèµ°è¿™ä¸ªæµ‹è¯•æ–¹æ³•ï¼Œ<code>jest</code> å°±é»˜è®¤è¿™ä¸ªç”¨ä¾‹é€šè¿‡äº†æµ‹è¯•ã€‚å› æ­¤å¿…é¡»è¦æ‰§è¡Œæ–­è¨€ï¼Œå³å¿…é¡»è®©å…¶æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚</p>\n<h3 id=\"3-3-4-async-await\"><a href=\"#3-3-4-async-await\" class=\"headerlink\" title=\"3.3.4 async/await\"></a>3.3.4 async/await</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// fetchData.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;http://a.jspang.com/jestTest.json&quot;</span>); <span class=\"comment\">// æ­¤åœ°å€å¹¶ä¸å­˜åœ¨&#125;;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// fetchData.test.js</span></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼1</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\"> <span class=\"keyword\">await</span> expect(fetchData()).resolves.toMatchObject(&#123;</span><br><span class=\"line\">  data: &#123;</span><br><span class=\"line\">   success: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ–¹å¼2</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;fetchDataæµ‹è¯•&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> response = <span class=\"keyword\">await</span> fetchData();</span><br><span class=\"line\"> expect(response.data).toEqual(&#123; <span class=\"attr\">success</span>: <span class=\"literal\">true</span> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>è¿™æ—¶å€™æˆ‘ä»¬çš„ä»£ç ä½¿ç”¨ <code>async....await...</code> çš„å½¢å¼ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº† <code>resolves</code> ç”¨äºæŠŠç°æœ‰å¯¹è±¡è½¬æ¢æˆ <code>Promise</code> å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ <code>jest</code> ä¸­çš„ <code>toMatchObject</code> è¿›è¡ŒåŒ¹é…å¯¹è±¡ä¸­çš„å±æ€§ã€‚</p>\n<h2 id=\"4-jest-ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\"><a href=\"#4-jest-ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\" class=\"headerlink\" title=\"4. jest ä¸­çš„å››ä¸ªé’©å­å‡½æ•°\"></a>4. jest ä¸­çš„å››ä¸ªé’©å­å‡½æ•°</h2><h3 id=\"4-1-beforeAll\"><a href=\"#4-1-beforeAll\" class=\"headerlink\" title=\"4.1 beforeAll()\"></a>4.1 beforeAll()</h3><p><code>beforeAll()</code>é’©å­å‡½æ•°çš„æ„æ€æ˜¯åœ¨æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹å‰è¿›è¡Œæ‰§è¡Œã€‚</p>\n<h3 id=\"4-2-afterAll\"><a href=\"#4-2-afterAll\" class=\"headerlink\" title=\"4.2 afterAll()\"></a>4.2 afterAll()</h3><p><code>afterAll()</code>é’©å­å‡½æ•°æ˜¯åœ¨å®Œæˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¹‹åæ‰æ‰§è¡Œçš„å‡½æ•°ã€‚</p>\n<h3 id=\"4-3-beforeEach\"><a href=\"#4-3-beforeEach\" class=\"headerlink\" title=\"4.3 beforeEach()\"></a>4.3 beforeEach()</h3><p><code>beforeEach()</code>é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰éƒ½ä¼šæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚</p>\n<h3 id=\"4-4-afterEach\"><a href=\"#4-4-afterEach\" class=\"headerlink\" title=\"4.4 afterEach()\"></a>4.4 afterEach()</h3><p><code>afterEach()</code>é’©å­å‡½æ•°ï¼Œæ˜¯åœ¨æ¯æ¬¡æµ‹è¯•ç”¨ä¾‹å®Œæˆæµ‹è¯•ä¹‹åæ‰§è¡Œä¸€æ¬¡çš„é’©å­å‡½æ•°ã€‚</p>\n<h2 id=\"5-jest-æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\"><a href=\"#5-jest-æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\" class=\"headerlink\" title=\"5. jest æµ‹è¯•ç”¨ä¾‹åˆ†ç»„\"></a>5. jest æµ‹è¯•ç”¨ä¾‹åˆ†ç»„</h2><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// eat.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Eat</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setName</span>(<span class=\"params\">number</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = number === <span class=\"number\">1</span> ? <span class=\"string\">&quot;æ°´é¥º&quot;</span> : <span class=\"string\">&quot;ç«é”…&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setDesc</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.desc = <span class=\"built_in\">this</span>.user + <span class=\"string\">&quot;æè¿°&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setMoney</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.money = <span class=\"built_in\">this</span>.name === <span class=\"string\">&quot;æ°´é¥º&quot;</span> ? <span class=\"number\">80</span> : <span class=\"number\">300</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// eat.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Eat <span class=\"keyword\">from</span> <span class=\"string\">&quot;./eat&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> eat = <span class=\"keyword\">new</span> Eat();</span><br><span class=\"line\">beforeAll(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;å¼€å§‹åƒé¥­&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">afterAll(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;åƒå®Œé¥­äº†&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">describe(<span class=\"string\">&quot;æ°´é¥ºç›¸å…³å†…å®¹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•æ°´é¥ºæè¿°&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">1</span>);</span><br><span class=\"line\">    eat.setDesc();</span><br><span class=\"line\">    expect(eat.desc).toEqual(<span class=\"string\">&quot;æ°´é¥ºæè¿°&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•æ°´é¥ºä»·æ ¼&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">1</span>);</span><br><span class=\"line\">    eat.setMoney();</span><br><span class=\"line\">    expect(eat.money).toEqual(<span class=\"number\">80</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">describe(<span class=\"string\">&quot;ç«é”…ç›¸å…³å†…å®¹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•ç«é”…æè¿°&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">2</span>);</span><br><span class=\"line\">    eat.setDesc();</span><br><span class=\"line\">    expect(eat.desc).toEqual(<span class=\"string\">&quot;ç«é”…æè¿°&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  test(<span class=\"string\">&quot;æµ‹è¯•ç«é”…ä»·æ ¼&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    eat.setName(<span class=\"number\">2</span>);</span><br><span class=\"line\">    eat.setMoney();</span><br><span class=\"line\">    expect(eat.money).toEqual(<span class=\"number\">300</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"6-é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\"><a href=\"#6-é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"6. é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ\"></a>6. é’©å­å‡½æ•°çš„ä½œç”¨åŸŸ</h2><h3 id=\"6-1-é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\"><a href=\"#6-1-é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\" class=\"headerlink\" title=\"6.1 é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿\"></a>6.1 é’©å­å‡½æ•°åœ¨çˆ¶çº§åˆ†ç»„å¯ä½œç”¨åŸŸå­é›†ï¼Œç±»ä¼¼ç»§æ‰¿</h3><p>å³çˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°åœ¨å­ä½œç”¨åŸŸä¸‹ä¹Ÿç”Ÿæ•ˆ</p>\n<h3 id=\"6-2-é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\"><a href=\"#6-2-é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\" class=\"headerlink\" title=\"6.2 é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨\"></a>6.2 é’©å­å‡½æ•°åŒçº§åˆ†ç»„ä½œç”¨åŸŸäº’ä¸å¹²æ‰°ï¼Œå„èµ·ä½œç”¨</h3><p>åŒä½œç”¨åŸŸä¸‹å°†éƒ½ä¼šæ‰§è¡Œ</p>\n<h3 id=\"6-3-å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\"><a href=\"#6-3-å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\" class=\"headerlink\" title=\"6.3 å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°\"></a>6.3 å…ˆæ‰§è¡Œå¤–éƒ¨çš„é’©å­å‡½æ•°ï¼Œå†æ‰§è¡Œå†…éƒ¨çš„é’©å­å‡½æ•°</h3><p>ä¼˜å…ˆçˆ¶çº§ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°ï¼Œå…¶æ¬¡æ‰§è¡Œå­ä½œç”¨åŸŸä¸‹çš„é’©å­å‡½æ•°</p>\n<h3 id=\"6-4-åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\"><a href=\"#6-4-åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\" class=\"headerlink\" title=\"6.4 åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°\"></a>6.4 åœ¨è¿›è¡Œæµ‹è¯•å‡†å¤‡çš„æ—¶å€™ï¼Œå°†å¯¹åº”é€»è¾‘å†™åˆ°é’©å­å‡½æ•°</h3><p>å¦‚æœå°†å¯¹åº”é€»è¾‘å†™åˆ°äº†éé’©å­å‡½æ•°çš„ä½ç½®ï¼Œé‚£ä¹ˆå°†ä¼šä¼˜å…ˆæ‰§è¡Œï¼Œç„¶åæ‰ä¼šæ‰§è¡Œé’©å­å‡½æ•°</p>\n<h3 id=\"6-5-å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\"><a href=\"#6-5-å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\" class=\"headerlink\" title=\"6.5 å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•\"></a>6.5 å¯¹å•ä¸ªæµ‹è¯•ç”¨ä¾‹çš„è°ƒè¯•</h3><p>å½“ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ä¸­çš„æµ‹è¯•ç”¨ä¾‹å˜å¾—è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œå‡å¦‚æ­¤æ—¶æˆ‘ä»¬ç›¸å¯¹å…¶ä¸­æŸä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹è¿›è¡Œè°ƒè¯•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨ <code>test.only</code></p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">test.only(<span class=\"string\">&quot;æµ‹è¯•ç”¨ä¾‹&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(<span class=\"number\">1</span> + <span class=\"number\">1</span>).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-Jest-ä¸­çš„-Mock\"><a href=\"#7-Jest-ä¸­çš„-Mock\" class=\"headerlink\" title=\"7. Jest ä¸­çš„ Mock\"></a>7. Jest ä¸­çš„ Mock</h2><h3 id=\"7-1-ä½œç”¨\"><a href=\"#7-1-ä½œç”¨\" class=\"headerlink\" title=\"7.1 ä½œç”¨\"></a>7.1 ä½œç”¨</h3><h3 id=\"7-1-1-æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ-this-å’Œè°ƒç”¨é¡ºåº\"><a href=\"#7-1-1-æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ-this-å’Œè°ƒç”¨é¡ºåº\" class=\"headerlink\" title=\"7.1.1 æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ this å’Œè°ƒç”¨é¡ºåº\"></a>7.1.1 æ•è·å‡½æ•°çš„è°ƒç”¨å’Œè¿”å›ç»“æœï¼Œä»¥åŠ <code>this</code> å’Œè°ƒç”¨é¡ºåº</h3><h3 id=\"7-1-2-å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\"><a href=\"#7-1-2-å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\" class=\"headerlink\" title=\"7.1.2 å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ\"></a>7.1.2 å®ƒå¯ä»¥è®©æˆ‘ä»¬è‡ªç”±çš„è®¾ç½®è¿”å›ç»“æœ</h3><h3 id=\"7-1-3-æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\"><a href=\"#7-1-3-æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\" class=\"headerlink\" title=\"7.1.3 æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°\"></a>7.1.3 æ”¹å˜å†…éƒ¨å‡½æ•°çš„å®ç°</h3><h3 id=\"7-2-åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\"><a href=\"#7-2-åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\" class=\"headerlink\" title=\"7.2 åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨\"></a>7.2 åˆ¤å®šå‡½æ•°æ˜¯å¦è¢«è°ƒç”¨</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func).toBeCalled(); <span class=\"comment\">// æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>jest.fn()</code>Â  å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ•è·å‡½æ•°çš„è°ƒç”¨</p>\n<h3 id=\"7-3-jest-fn-mock-calls-åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\"><a href=\"#7-3-jest-fn-mock-calls-åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\" class=\"headerlink\" title=\"7.3 jest.fn().mock.calls åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°\"></a>7.3 jest.fn().mock.calls åˆ¤å®šå‡½æ•°è¢«è°ƒç”¨äº†å‡ æ¬¡å’Œä¼ é€’çš„å‚æ•°</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.calls.length).toBe(<span class=\"number\">2</span>); <span class=\"comment\">// æµ‹è¯•ç”¨ä¾‹è¢«è°ƒç”¨2æ¬¡</span></span><br><span class=\"line\">  expect(func.mock.calls[<span class=\"number\">0</span>]).toEqual([<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>]); <span class=\"comment\">// æµ‹è¯•ç”¨ä¾‹ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ &quot;å¼ ä¸‰&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>æ­¤å¤„æ‰“å° <code>func.mock</code>Â  å°†ä¼šæ‰“å°ä¸€äº›å¸¸ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è¿›è¡Œç›¸åº”çš„ç”¨ä¾‹æµ‹è¯•</p>\n<h3 id=\"7-4-jest-fn-mockReturnValue-åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\"><a href=\"#7-4-jest-fn-mockReturnValue-åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\" class=\"headerlink\" title=\"7.4 jest.fn().mockReturnValue() åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ\"></a>7.4 jest.fn().mockReturnValue() åˆ¤å®šå‡½æ•°æ‰§è¡Œäº†å‡ æ¬¡å’Œè¿”å›ç»“æœ</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  <span class=\"comment\">// func.mockReturnValue(&quot;Common&quot;)</span></span><br><span class=\"line\">  <span class=\"comment\">// æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›å€¼éƒ½æ˜¯ &quot;Common&quot;</span></span><br><span class=\"line\">  func.mockReturnValueOnce(<span class=\"string\">&quot;A&quot;</span>); <span class=\"comment\">// ç¬¬ä¸€æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› &quot;A&quot;</span></span><br><span class=\"line\">  func.mockReturnValueOnce(<span class=\"string\">&quot;B&quot;</span>); <span class=\"comment\">// ç¬¬äºŒæ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› &quot;B&quot;</span></span><br><span class=\"line\">  func.mockReturnValueOnce(<span class=\"string\">&quot;C&quot;</span>); <span class=\"comment\">// ç¬¬ä¸‰æ¬¡æ¨¡æ‹Ÿè¿”å›å€¼è¿”å› &quot;C&quot;</span></span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">0</span>].value).toBe(<span class=\"string\">&quot;A&quot;</span>);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">1</span>].value).toBe(<span class=\"string\">&quot;B&quot;</span>);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">2</span>].value).toBe(<span class=\"string\">&quot;C&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>func.mockReturnValue()</code>Â  å°†å¯¹æ‰€æœ‰æ¨¡æ‹Ÿè¿”å›çš„å€¼ç”Ÿæ•ˆ</p>\n<p><code>func.mockReturnValueOnce()</code>Â  æ‰§è¡Œåˆ°ç¬¬å‡ æ¬¡å°±å¯¹ç¬¬å‡ ä¸ªå‡½æ•°çš„æ¨¡æ‹Ÿè¿”å›å€¼ç”Ÿæ•ˆ</p>\n<p>æ”¯æŒé“¾å¼è°ƒç”¨</p>\n<h3 id=\"7-5-jest-fn-mock-invocationCallOrder-åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\"><a href=\"#7-5-jest-fn-mock-invocationCallOrder-åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\" class=\"headerlink\" title=\"7.5 jest.fn().mock.invocationCallOrder åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº\"></a>7.5 jest.fn().mock.invocationCallOrder åˆ¤å®šå‡½æ•°æ‰§è¡Œé¡ºåº</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.invocationCallOrder).toEqual([<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>]);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-6-jest-fn-mock-instances-åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ-this-æŒ‡å‘\"><a href=\"#7-6-jest-fn-mock-instances-åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ-this-æŒ‡å‘\" class=\"headerlink\" title=\"7.6 jest.fn().mock.instances åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ this æŒ‡å‘\"></a>7.6 jest.fn().mock.instances åˆ¤å®šå‡½æ•°è°ƒç”¨äº†å‡ æ¬¡ä»¥åŠ this æŒ‡å‘</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> createObject = <span class=\"function\">(<span class=\"params\">ClassItem</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> ClassItem();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; createObject &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• createObject&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  createObject(func);</span><br><span class=\"line\">  expect(func.mock.instances).toEqual([mockConstructor&#123;&#125;]); <span class=\"comment\">// æ­¤å¤„çš„ this å°±æ˜¯ mockConstructor</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-7-jest-fn-mockImplementation-åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\"><a href=\"#7-7-jest-fn-mockImplementation-åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\" class=\"headerlink\" title=\"7.7 jest.fn().mockImplementation() åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†\"></a>7.7 jest.fn().mockImplementation() åˆ¤å®šå‡½æ•°è¿”å›ç»“æœå’Œå…¶ä»–é€»è¾‘å¤„ç†</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\"><span class=\"params\">callback</span> =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  <span class=\"comment\">// func.mockImplementation(() =&gt; &quot;hello&quot;); ç­‰ä»·äº jest.fn(() =&gt; &quot;hello&quot;)</span></span><br><span class=\"line\">  <span class=\"comment\">// func.mockImplementation(() =&gt; this); ç­‰ä»·äº jest.fn().mockReturnThis()</span></span><br><span class=\"line\">  func.mockImplementationOnce(<span class=\"function\">() =&gt;</span> <span class=\"string\">&quot;dell&quot;</span>);</span><br><span class=\"line\">  func.mockImplementationOnce(<span class=\"function\">() =&gt;</span> <span class=\"string\">&quot;lee&quot;</span>);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">0</span>].value).toBe(<span class=\"string\">&quot;dell&quot;</span>);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">1</span>].value).toBe(<span class=\"string\">&quot;lee&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>mockImplementation</code>Â  æ¯” <code>mockReturnValue</code>Â  æ›´å¥å£®ï¼Œå› ä¸ºå†…éƒ¨å¯ä»¥å†™ä¸€äº›é¢å¤–çš„é€»è¾‘</p>\n<h3 id=\"7-8-toBeCalledWith-æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\"><a href=\"#7-8-toBeCalledWith-æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\" class=\"headerlink\" title=\"7.8 toBeCalledWith() æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°\"></a>7.8 toBeCalledWith() æ¥åˆ¤å®šæ¯æ¬¡å‡½æ•°è°ƒç”¨æ—¶çš„å‚æ•°</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> runCallback = <span class=\"function\">(<span class=\"params\">callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  callback(<span class=\"string\">&quot;ABC&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; runCallback &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• runCallback&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> func = jest.fn();</span><br><span class=\"line\">  runCallback(func);</span><br><span class=\"line\">  expect(func.mock.results[<span class=\"number\">0</span>]).toEqual([<span class=\"string\">&quot;ABC&quot;</span>);</span><br><span class=\"line\">  expect(func).toBeCalledWith(<span class=\"string\">&quot;ABC&quot;</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-9-æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\"><a href=\"#7-9-æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\" class=\"headerlink\" title=\"7.9 æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚\"></a>7.9 æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚</h3><p>å¯¹äºå‰ç«¯æ¥è¯´ä¸€èˆ¬å¼‚æ­¥æ¥å£æ˜¯æµ‹è¯•æ˜¯å¦å‘é€äº†ï¼Œè€Œä¸æµ‹è¯•åç«¯æ¥å£è¿”å›çš„å†…å®¹ï¼Œæ˜¯å±äºåç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„å†…å®¹</p>\n<h3 id=\"7-9-1-é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\"><a href=\"#7-9-1-é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"7.9.1 é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•\"></a>7.9.1 é€šè¿‡æ¨¡æ‹Ÿåº“çš„æ–¹å¼æ¥æ¨¡æ‹Ÿå¼‚æ­¥æµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;/api&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.data);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">&quot;axios&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; getData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">jest.mock(<span class=\"string\">&quot;axios&quot;</span>); <span class=\"comment\">// å¯¹ axios è¿›è¡Œæ¨¡æ‹Ÿï¼Œè¿™æ ·å°±ä¸ä¼šè¯·æ±‚çœŸæ­£æ•°æ®</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• getData&quot;</span>, <span class=\"keyword\">async</span> () =&gt; &#123;</span><br><span class=\"line\">  axios.get.mockResolvedValue(&#123; <span class=\"attr\">data</span>: <span class=\"string\">&quot;hello&quot;</span> &#125;); <span class=\"comment\">// ä½¿ç”¨ axios è¯·æ±‚çš„æ—¶å€™æ¨¡æ‹ŸæˆåŠŸçš„è¿”å›å€¼å°±æ˜¯ hello</span></span><br><span class=\"line\">  <span class=\"keyword\">await</span> getData().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(data).toBe(<span class=\"string\">&quot;hello&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p><code>mockResolvedValue</code> æ¨¡æ‹Ÿä¸é™æ¬¡æ•°</p>\n<p><code>mockResolvedValueOnce</code> æ¨¡æ‹Ÿä¸€æ¬¡ï¼Œæ¨¡æ‹Ÿä¸¤æ¬¡å°±ä¼šæŠ¥é”™ï¼Œéœ€å†æ¬¡è°ƒç”¨</p>\n<h3 id=\"7-9-2-é€šè¿‡æ¨¡æ‹Ÿ-Promise-æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\"><a href=\"#7-9-2-é€šè¿‡æ¨¡æ‹Ÿ-Promise-æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\" class=\"headerlink\" title=\"7.9.2 é€šè¿‡æ¨¡æ‹Ÿ Promise æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥\"></a>7.9.2 é€šè¿‡æ¨¡æ‹Ÿ Promise æ–¹å¼æ¨¡æ‹Ÿå¼‚æ­¥</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;/&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.data);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// __mocks__/demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">&quot;function() &#123; return &#x27;123&#x27; &#125;&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\">jest.mock(<span class=\"string\">&quot;./demo&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯•fetchData&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetchData().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(<span class=\"built_in\">eval</span>(data)).toEqual(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// å®ç°æ–¹å¼3</span></span><br><span class=\"line\"><span class=\"comment\">// ä¿®æ”¹jest.config.js å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨__mocks__ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢</span></span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäº jest.mock(&quot;è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶&quot;)&#123;  automock: true; &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-9-3-é€šè¿‡ä¿®æ”¹-jest-config-js-æ¥è‡ªåŠ¨è¯†åˆ«mocksä¸‹çš„æ–‡ä»¶\"><a href=\"#7-9-3-é€šè¿‡ä¿®æ”¹-jest-config-js-æ¥è‡ªåŠ¨è¯†åˆ«mocksä¸‹çš„æ–‡ä»¶\" class=\"headerlink\" title=\"7.9.3 é€šè¿‡ä¿®æ”¹ jest.config.js æ¥è‡ªåŠ¨è¯†åˆ«mocksä¸‹çš„æ–‡ä»¶\"></a>7.9.3 é€šè¿‡ä¿®æ”¹ jest.config.js æ¥è‡ªåŠ¨è¯†åˆ«<strong>mocks</strong>ä¸‹çš„æ–‡ä»¶</h3><p>ä¿®æ”¹ <code>jest.config.js</code> å¯ä»¥è‡ªåŠ¨æŸ¥æ‰¾é¡¹ç›®å†…éƒ¨ <code>__mocks__</code> ä¸‹ä¸è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„æ–‡ä»¶åšæ›¿æ¢</p>\n<p>ç­‰åŒäº&gt; <code>jest.mock(&quot;è¦æµ‹è¯•æ–‡ä»¶åå­—ç›¸åŒçš„__mocks__ä¸‹çš„æ–‡ä»¶&quot;)</code></p>\n<h3 id=\"7-9-4-ä½¿ç”¨-jest-unmock-å¯å–æ¶ˆ-mock-æ¨¡æ‹Ÿ\"><a href=\"#7-9-4-ä½¿ç”¨-jest-unmock-å¯å–æ¶ˆ-mock-æ¨¡æ‹Ÿ\" class=\"headerlink\" title=\"7.9.4 ä½¿ç”¨ jest.unmock() å¯å–æ¶ˆ mock æ¨¡æ‹Ÿ\"></a>7.9.4 ä½¿ç”¨ jest.unmock() å¯å–æ¶ˆ mock æ¨¡æ‹Ÿ</h3><h3 id=\"7-9-5-è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦-mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦-mock-æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\"><a href=\"#7-9-5-è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦-mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦-mock-æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\" class=\"headerlink\" title=\"7.9.5 è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ mock æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜\"></a>7.9.5 è§£å†³æµ‹è¯•æ–‡ä»¶ä¸­éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ mockï¼Œéƒ¨åˆ†åŠŸèƒ½éœ€è¦ mock æ¨¡æ‹Ÿå¼‚æ­¥çš„é—®é¢˜</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> axios.get(<span class=\"string\">&quot;/&quot;</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> res.data);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> getNumber = <span class=\"function\">() =&gt;</span> <span class=\"number\">123</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// __mocks__/demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> fetchData = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    resolve(<span class=\"string\">&quot;function() &#123; return &#x27;123&#x27; &#125;&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\">jest.mock(<span class=\"string\">&quot;./demo&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; fetchData &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; getNumber &#125; = jest.requireActual(<span class=\"string\">&quot;./demo&quot;</span>); <span class=\"comment\">// å¼•å…¥çœŸå®æ–‡ä»¶</span></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• fetchData&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fetchData().then(<span class=\"function\"><span class=\"params\">data</span> =&gt;</span> &#123;</span><br><span class=\"line\">    expect(<span class=\"built_in\">eval</span>(data)).toEqual(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• getNumber&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(getNumber()).toEqual(<span class=\"number\">123</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-snapshot-å¿«ç…§æµ‹è¯•\"><a href=\"#8-snapshot-å¿«ç…§æµ‹è¯•\" class=\"headerlink\" title=\"8. snapshot å¿«ç…§æµ‹è¯•\"></a>8. snapshot å¿«ç…§æµ‹è¯•</h2><p>å¸¸ç”¨äºæµ‹è¯•é…ç½®æ–‡ä»¶</p>\n<h3 id=\"8-1-toMatchSnapshot\"><a href=\"#8-1-toMatchSnapshot\" class=\"headerlink\" title=\"8.1 toMatchSnapshot()\"></a>8.1 toMatchSnapshot()</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> generateConfig = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    server: <span class=\"string\">&quot;http://localhost&quot;</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    domain: <span class=\"string\">&quot;localhost&quot;</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; generateConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• generateConfig&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(generateConfig()).toMatchSnapshot(); <span class=\"comment\">// å°†ä¼šåœ¨é¡¹ç›®é‡Œç”Ÿæˆå¿«ç…§æ–‡ä»¶</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>å¦‚æœè¦ç¡®è®¤æ›´æ–°å¿«ç…§ï¼Œéœ€è¦åœ¨æ§åˆ¶å°é€‰æ‹©ã€‚ <code>u</code>Â  ä»£è¡¨å¯¹æ‰€æœ‰å¿«ç…§è¿›è¡Œæ›´æ–°ï¼Œ <code>i</code>Â  ä»£è¡¨å¯¹å•ä¸ªç¡®è®¤çš„å¿«ç…§è¿›è¡Œæ›´æ–°</p>\n<h3 id=\"8-2-æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\"><a href=\"#8-2-æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\" class=\"headerlink\" title=\"8.2 æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹\"></a>8.2 æµ‹è¯•éƒ¨åˆ†å¯å˜å˜é‡çš„å†…å®¹</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> generateConfig = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    server: <span class=\"string\">&quot;http://localhost&quot;</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    domain: <span class=\"string\">&quot;localhost&quot;</span>,</span><br><span class=\"line\">    time: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">    random: <span class=\"built_in\">Math</span>.random()</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; generateConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• generateConfig&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  expect(generateConfig()).toMatchSnapshot(&#123;</span><br><span class=\"line\">    time: expect.any(<span class=\"built_in\">Date</span>),</span><br><span class=\"line\">    random: expect.any(<span class=\"built_in\">Number</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-3-è¡Œå†…çš„-snapshot\"><a href=\"#8-3-è¡Œå†…çš„-snapshot\" class=\"headerlink\" title=\"8.3 è¡Œå†…çš„ snapshot\"></a>8.3 è¡Œå†…çš„ snapshot</h3><p><code>npm install prettier --save</code></p>\n<p>å¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// demo.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> generateConfig = <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    server: <span class=\"string\">&quot;http://localhost&quot;</span>,</span><br><span class=\"line\">    port: <span class=\"number\">8080</span>,</span><br><span class=\"line\">    domain: <span class=\"string\">&quot;localhost&quot;</span>,</span><br><span class=\"line\">    time: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">    random: <span class=\"built_in\">Math</span>.random()</span><br><span class=\"line\">    <span class=\"comment\">// å¯å˜å˜é‡</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// demo.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; generateConfig &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./demo&quot;</span>;</span><br><span class=\"line\">test(<span class=\"string\">&quot;æµ‹è¯• generateConfig&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// toMatchInlineSnapshot å¯ä»¥å¿«ç…§æ”¾åˆ°è¡Œå†…çš„æµ‹è¯•ç”¨ä¾‹ä¸­</span></span><br><span class=\"line\">  expect(generateConfig()).toMatchInlineSnapshot(&#123;</span><br><span class=\"line\">    time: expect.any(<span class=\"built_in\">Date</span>),</span><br><span class=\"line\">    random: expect.any(<span class=\"built_in\">Number</span>)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"9-Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘\"><a href=\"#9-Test-Driven-Development-TDD-æµ‹è¯•é©±åŠ¨å¼€å‘\" class=\"headerlink\" title=\"9. Test Driven Development(TDD) æµ‹è¯•é©±åŠ¨å¼€å‘\"></a>9. Test Driven Development(TDD) æµ‹è¯•é©±åŠ¨å¼€å‘</h2><h3 id=\"9-1-TDD-å¼€å‘æµç¨‹\"><a href=\"#9-1-TDD-å¼€å‘æµç¨‹\" class=\"headerlink\" title=\"9.1 TDD å¼€å‘æµç¨‹\"></a>9.1 TDD å¼€å‘æµç¨‹</h3><ol>\n<li>ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼ˆçŸ¥é“åŠŸèƒ½ï¼Œå…ˆå†™æµ‹è¯•ç”¨ä¾‹ï¼‰</li>\n<li>è¿è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç”¨ä¾‹æ— æ³•é€šè¿‡æµ‹è¯•</li>\n<li>ç¼–å†™ä»£ç ï¼Œä½¿æµ‹è¯•ç”¨ä¾‹é€šè¿‡æµ‹è¯•</li>\n<li>ä¼˜åŒ–ä»£ç ï¼Œ å®Œæˆå¼€å‘</li>\n<li>æ–°å¢åŠŸèƒ½ï¼Œé‡å¤æ‰§è¡Œ 1-4</li>\n</ol>\n<h3 id=\"9-2-TDD-çš„ä¼˜åŠ¿\"><a href=\"#9-2-TDD-çš„ä¼˜åŠ¿\" class=\"headerlink\" title=\"9.2 TDD çš„ä¼˜åŠ¿\"></a>9.2 TDD çš„ä¼˜åŠ¿</h3><ol>\n<li>é•¿æœŸå‡å°‘é¡¹ç›®çš„å›å½’ bugï¼ˆå‡å°‘ä¿®æ”¹ä»£ç äº§ç”Ÿçš„ bugï¼‰</li>\n<li>ä»£ç è´¨é‡æ›´å¥½ï¼ˆç»„ç»‡ï¼Œå¯ç»´æŠ¤æ€§å¥½ï¼‰</li>\n<li>æµ‹è¯•è¦†ç›–ç‡é«˜ï¼ˆå› ä¸ºæ˜¯å…ˆç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œä½†æµ‹è¯•è¦†ç›–ç‡è¿‡é«˜ä¼šå½±å“å¾ˆå¤§ç²¾åŠ›ï¼‰</li>\n<li>é”™è¯¯æµ‹è¯•ä»£ç ä¸å®¹æ˜“å‡ºç°</li>\n</ol>\n<h3 id=\"9-3-TDD-çš„é€‚ç”¨åœºæ™¯\"><a href=\"#9-3-TDD-çš„é€‚ç”¨åœºæ™¯\" class=\"headerlink\" title=\"9.3 TDD çš„é€‚ç”¨åœºæ™¯\"></a>9.3 TDD çš„é€‚ç”¨åœºæ™¯</h3><ol>\n<li>ä¸é€‚ç”¨äºå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä½¿ç”¨ï¼ˆå¼€å‘ä¸šåŠ¡ä»£ç æ—¶ä¼šå¤§é‡çš„ä¸ä¸šåŠ¡ä»£ç äº§ç”Ÿè€¦åˆï¼ŒåŠ å¤§å·¥ä½œé‡ï¼‰</li>\n<li>é€‚ç”¨äºä¸€äº›åº“çš„å¼€å‘ï¼ˆå¼€å‘åº“æ—¶ä»£ç è€¦åˆåº¦è¾ƒä½ï¼Œé€šå¸¸åªå¤„ç†å‡½æ•°ç­‰ç›¸å…³åŠŸèƒ½ï¼‰</li>\n</ol>\n<hr>\n<h2 id=\"10-Behavior-Driven-Development-BDD-è¡Œä¸ºé©±åŠ¨å¼€å‘\"><a href=\"#10-Behavior-Driven-Development-BDD-è¡Œä¸ºé©±åŠ¨å¼€å‘\" class=\"headerlink\" title=\"10. Behavior Driven Development(BDD) è¡Œä¸ºé©±åŠ¨å¼€å‘\"></a>10. Behavior Driven Development(BDD) è¡Œä¸ºé©±åŠ¨å¼€å‘</h2><h3 id=\"10-1-BDD-å¼€å‘æµç¨‹\"><a href=\"#10-1-BDD-å¼€å‘æµç¨‹\" class=\"headerlink\" title=\"10.1 BDD å¼€å‘æµç¨‹\"></a>10.1 BDD å¼€å‘æµç¨‹</h3><ol>\n<li>å…ˆç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œä¸å…³å¿ƒæµ‹è¯•</li>\n<li>æ€è€ƒå¹¶æè¿°ç”¨æˆ·è¡Œä¸º</li>\n<li>æ ¹æ®ç”¨æˆ·è¡Œä¸ºæ¨¡æ‹Ÿæµ‹è¯•</li>\n</ol>\n<h3 id=\"10-2-vue-example\"><a href=\"#10-2-vue-example\" class=\"headerlink\" title=\"10.2 vue example\"></a>10.2 vue example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// testUtils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> findTestWrapper = <span class=\"function\">(<span class=\"params\">wrapper, tag</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> wrapper.find(<span class=\"string\">`[data-test=&quot;<span class=\"subst\">$&#123;tag&#125;</span>&quot;]`</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; findTestWrapper &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../utils/testUtils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import store from &quot;../../../../store&quot;</span></span><br><span class=\"line\">it(<span class=\"string\">`    </span></span><br><span class=\"line\"><span class=\"string\"> æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•    </span></span><br><span class=\"line\"><span class=\"string\"> 1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹    </span></span><br><span class=\"line\"><span class=\"string\"> 2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®  </span></span><br><span class=\"line\"><span class=\"string\"> 3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹`</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(TodoList);</span><br><span class=\"line\">  <span class=\"comment\">// const wrapper = mount(TodoList, &#123; store &#125;)</span></span><br><span class=\"line\">  <span class=\"comment\">// å¦‚æœä½¿ç”¨ vuexï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> inputElem = findTestWrapper(wrapper, <span class=\"string\">&quot;header-input&quot;</span>).at(<span class=\"number\">0</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content = <span class=\"string\">&quot;Dell lee&quot;</span>;</span><br><span class=\"line\">  inputElem.setValue(content);</span><br><span class=\"line\">  inputElem.trigger(<span class=\"string\">&quot;change&quot;</span>);</span><br><span class=\"line\">  inputElem.trigger(<span class=\"string\">&quot;keyup.enter&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>).at(<span class=\"number\">0</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">  expect(listItems.at(<span class=\"number\">0</span>).text()).toContain(content);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-3-react-example\"><a href=\"#10-3-react-example\" class=\"headerlink\" title=\"10.3 react example\"></a>10.3 react example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// testUtils.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> findTestWrapper = <span class=\"function\">(<span class=\"params\">wrapper, tag</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> wrapper.find(<span class=\"string\">`[data-test=&quot;<span class=\"subst\">$&#123;tag&#125;</span>&quot;]`</span>);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import &#123; Provider &#125; from &quot;react-redux&quot;;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">// import store from &quot;../../../../store/createStore&quot;;</span></span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    æ–°å¢å†…å®¹é€»è¾‘çš„é›†æˆæµ‹è¯•</span></span><br><span class=\"line\"><span class=\"string\">    1. ç”¨æˆ·ä¼šåœ¨headerè¾“å…¥æ¡†è¾“å…¥å†…å®¹</span></span><br><span class=\"line\"><span class=\"string\">    2. ç”¨æˆ·ä¼šç‚¹å‡»å›è½¦æŒ‰é’®</span></span><br><span class=\"line\"><span class=\"string\">   3. åˆ—è¡¨é¡¹åº”è¯¥å¢åŠ ç”¨æˆ·è¾“å…¥å†…å®¹çš„åˆ—è¡¨é¡¹</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TodoList</span> /&gt;</span></span>);</span><br><span class=\"line\">  <span class=\"comment\">/** </span></span><br><span class=\"line\"><span class=\"comment\">  const wrapper = mount(</span></span><br><span class=\"line\"><span class=\"comment\">   &lt;Provider store=&#123;store&#125;&gt;</span></span><br><span class=\"line\"><span class=\"comment\">    &lt;TodoList /&gt;&lt;/Provider&gt;</span></span><br><span class=\"line\"><span class=\"comment\">   &lt;/Provider&gt;</span></span><br><span class=\"line\"><span class=\"comment\">  )  </span></span><br><span class=\"line\"><span class=\"comment\">  // å¦‚æœä½¿ç”¨ reduxï¼Œä¹Ÿå‡ ä¹æ— æ”¹åŠ¨</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> inputElem = findTestWrapper(wrapper, <span class=\"string\">&quot;header-input&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content = <span class=\"string\">&quot;Dell lee&quot;</span>;</span><br><span class=\"line\">  inputElem.simulate(<span class=\"string\">&quot;change&quot;</span>, &#123; <span class=\"attr\">target</span>: &#123; <span class=\"attr\">value</span>: content &#125; &#125;);</span><br><span class=\"line\">  inputElem.simulate(<span class=\"string\">&quot;keyUp&quot;</span>, &#123; <span class=\"attr\">keyCode</span>: <span class=\"number\">13</span> &#125;);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">  expect(listItems.text()).toContain(content);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"11-TDD-å’Œ-BDD-çš„å¯¹æ¯”\"><a href=\"#11-TDD-å’Œ-BDD-çš„å¯¹æ¯”\" class=\"headerlink\" title=\"11. TDD å’Œ BDD çš„å¯¹æ¯”\"></a>11. TDD å’Œ BDD çš„å¯¹æ¯”</h2><ol>\n<li><code>TDD</code> å…ˆå†™æµ‹è¯•åå†™ä»£ç ; <code>BDD</code> å…ˆå†™ä»£ç åå†™æµ‹è¯•</li>\n<li><code>TDD</code> åˆ›å»ºçš„æ˜¯ <code>unit</code> å•å…ƒæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆå•å…ƒæµ‹è¯•ï¼Œå±äºç™½ç›’æµ‹è¯•(çŸ¥é“å®ç°æµ‹è¯•ä»£ç ); <code>BDD</code> åˆ›å»ºçš„æ˜¯ <code>integration</code> é›†æˆæµ‹è¯•æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»“åˆé›†æˆæµ‹è¯•ï¼Œå±äºé»‘ç›’æµ‹è¯•(ä¸çŸ¥é“å®ç°æµ‹è¯•ä»£ç )</li>\n<li><code>TDD</code> æµ‹è¯•é‡ç‚¹åœ¨ä»£ç ; <code>BDD</code> æµ‹è¯•é‡ç‚¹åœ¨ <code>UI</code>Â ( <code>DOM</code>)</li>\n<li><code>TDD</code> å®‰å…¨æ„Ÿä½(æ— æ³•ä¿è¯å„ä¸ªç»„ä»¶æ‹¼æ’åˆ°ä¸€èµ·æ˜¯å¦ä¸ä¼šæœ‰é—®é¢˜); <code>BDD</code> å®‰å…¨æ„Ÿé«˜</li>\n<li><code>TDD</code> é€Ÿåº¦å¿«; <code>BDD</code> é€Ÿåº¦æ…¢</li>\n</ol>\n<hr>\n<h2 id=\"12-TDD-ä¸-BDD-æ··ç”¨\"><a href=\"#12-TDD-ä¸-BDD-æ··ç”¨\" class=\"headerlink\" title=\"12. TDD ä¸ BDD æ··ç”¨\"></a>12. TDD ä¸ BDD æ··ç”¨</h2><h3 id=\"12-1-å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\"><a href=\"#12-1-å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\" class=\"headerlink\" title=\"12.1 å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•\"></a>12.1 å¯¹ä¸€äº›å·¥å…·å‡½æ•°çš„æµ‹è¯•</h3><h3 id=\"12-2-å¯¹-vuex-çš„-store-è¿›è¡Œæµ‹è¯•\"><a href=\"#12-2-å¯¹-vuex-çš„-store-è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"12.2 å¯¹ vuex çš„ store è¿›è¡Œæµ‹è¯•\"></a>12.2 å¯¹ vuex çš„ store è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/unit/store.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store&quot;</span>;</span><br><span class=\"line\">it(<span class=\"string\">&quot;å½“ store æ¥å— changeInputValue çš„ commit æ—¶, inputValue å‘ç”Ÿå˜åŒ–&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> value = <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">  store.commit(<span class=\"string\">&quot;changeInputValue&quot;</span>, value);</span><br><span class=\"line\">  expect(store.state.inputValue).toBe(value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-3-å¯¹-redux-çš„-store-è¿›è¡Œæµ‹è¯•\"><a href=\"#12-3-å¯¹-redux-çš„-store-è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"12.3 å¯¹ redux çš„ store è¿›è¡Œæµ‹è¯•\"></a>12.3 å¯¹ redux çš„ store è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __tests__/unit/store.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store/createStore&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; changeInputValue &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store/actions&quot;</span>;</span><br><span class=\"line\">it(<span class=\"string\">&quot;å½“ store æ¥å— changeInputValue çš„ dispatch æ—¶, inputValue å‘ç”Ÿå˜åŒ–&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> value = <span class=\"string\">&quot;123&quot;</span>;</span><br><span class=\"line\">  <span class=\"comment\">/**   </span></span><br><span class=\"line\"><span class=\"comment\">  const changeInputValue = (payload) =&gt; (&#123; </span></span><br><span class=\"line\"><span class=\"comment\">   type: CHANGE_IMPUT_VALUE, payload </span></span><br><span class=\"line\"><span class=\"comment\">  &#125;)   </span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">  store.dispatch(changeInputValue(value));</span><br><span class=\"line\">  expect(store.getState().inputValue).toBe(value);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"13-å¼‚æ­¥æµ‹è¯•\"><a href=\"#13-å¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"13. å¼‚æ­¥æµ‹è¯•\"></a>13. å¼‚æ­¥æµ‹è¯•</h2><p>æ³¨æ„ï¼šå¼‚æ­¥æµ‹è¯•å¦‚æœç”¨åˆ°äº†å¼‚æ­¥å‡½æ•°ï¼Œåˆ™éœ€è¦è°ƒç”¨ <code>done</code>Â  å‡½æ•°</p>\n<h3 id=\"13-1-vue-çš„å¼‚æ­¥æµ‹è¯•\"><a href=\"#13-1-vue-çš„å¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"13.1 vue çš„å¼‚æ­¥æµ‹è¯•\"></a>13.1 vue çš„å¼‚æ­¥æµ‹è¯•</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __mocks__/axios.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> undoList = &#123;  <span class=\"attr\">success</span>: <span class=\"literal\">true</span>,  <span class=\"attr\">data</span>: [</span><br><span class=\"line\"> &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;dell&quot;</span> &#125;,</span><br><span class=\"line\"> &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;lee&quot;</span> &#125;</span><br><span class=\"line\">]&#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\"> <span class=\"function\"><span class=\"title\">get</span>(<span class=\"params\">url</span>)</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (url === <span class=\"string\">&quot;/getUndoList.json&quot;</span>) &#123;</span><br><span class=\"line\">   <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.success === <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">     resolve(undoList);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">     reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> &#125;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; findTestWrapper &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../utils/testUtils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">beforeEach(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\"> axios.success = <span class=\"literal\">true</span>;</span><br><span class=\"line\"> jest.useFakeTimers(); <span class=\"comment\">// å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“&#125;);</span></span><br><span class=\"line\">it(<span class=\"string\">`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(TodoList, &#123; store &#125;);</span><br><span class=\"line\">  wrapper.vm.$nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">   expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">   done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">it(<span class=\"string\">`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> wrapper = mount(TodoList, &#123; store &#125;);</span><br><span class=\"line\"> expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\"> jest.runAllTimers();</span><br><span class=\"line\"> wrapper.vm.$nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">  done();</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥; 2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\"> axios.success = <span class=\"literal\">false</span>;</span><br><span class=\"line\"> <span class=\"keyword\">const</span> wrapper = mount(TodoList, &#123; store &#125;);</span><br><span class=\"line\"> expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\"> jest.runAllTimers();</span><br><span class=\"line\"> wrapper.vm.$nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">  expect(listItems.length).toBe(<span class=\"number\">0</span>);</span><br><span class=\"line\">  done();</span><br><span class=\"line\"> &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-2-react-çš„å¼‚æ­¥æµ‹è¯•\"><a href=\"#13-2-react-çš„å¼‚æ­¥æµ‹è¯•\" class=\"headerlink\" title=\"13.2 react çš„å¼‚æ­¥æµ‹è¯•\"></a>13.2 react çš„å¼‚æ­¥æµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// __mocks__/axios.js</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> undoList = &#123;</span><br><span class=\"line\">  success: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  data: [</span><br><span class=\"line\">    &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;dell&quot;</span> &#125;,</span><br><span class=\"line\">    &#123; <span class=\"attr\">status</span>: <span class=\"string\">&quot;div&quot;</span>, <span class=\"attr\">value</span>: <span class=\"string\">&quot;lee&quot;</span> &#125;</span><br><span class=\"line\">  ]</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">get</span>(<span class=\"params\">url</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (url === <span class=\"string\">&quot;/getUndoList.json&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.success === <span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">          resolve(undoList);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          reject(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/// __tests__/integration/TodoList.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Provider &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-redux&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; mount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> TodoList <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../TodoList&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> store <span class=\"keyword\">from</span> <span class=\"string\">&quot;../../../../store/createStore&quot;</span>;</span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">beforeEach(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  axios.success = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  jest.useFakeTimers(); <span class=\"comment\">// å†™åœ¨é’©å­å‡½æ•°ä¸­çš„æ„ä¹‰æ˜¯ä¸ºäº†æ¸…é™¤ç»Ÿè®¡æ¬¡æ•°ï¼Œé‡æ–°å¼€å§‹ï¼Œé˜²æ­¢ä¸Šä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹å¯¹ä¸‹ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹äº§ç”Ÿå½±å“</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æµ‹è¯•</span></span><br><span class=\"line\"><span class=\"string\">    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;TodoList /&gt;</span><br><span class=\"line\">    &lt;/Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">  process.nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    wrapper.update();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">    expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">    1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œç­‰å¾…5s</span></span><br><span class=\"line\"><span class=\"string\">    2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºè¿œç¨‹è¿”å›çš„æ•°æ®</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;TodoList /&gt;</span><br><span class=\"line\">    &lt;/Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">  expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\">  jest.runAllTimers();</span><br><span class=\"line\">  process.nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    wrapper.update(); <span class=\"comment\">// æ›´æ–° wrapper é˜²æ­¢å–ä¸Šä¸€æ¬¡çš„ wrapper</span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">    expect(listItems.length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">`</span></span><br><span class=\"line\"><span class=\"string\">  1. ç”¨æˆ·è¿›å…¥é¡µé¢æ—¶ï¼Œè¯·æ±‚è¿œç¨‹æ•°æ®å¤±è´¥</span></span><br><span class=\"line\"><span class=\"string\">  2. åˆ—è¡¨åº”è¯¥æ˜¾ç¤ºç©ºæ•°æ®ï¼Œä¸åº”è¯¥æŒ‚æ‰</span></span><br><span class=\"line\"><span class=\"string\">`</span>, <span class=\"function\"><span class=\"params\">done</span> =&gt;</span> &#123;</span><br><span class=\"line\">  axios.success = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = mount(</span><br><span class=\"line\">    &lt;Provider store=&#123;store&#125;&gt;</span><br><span class=\"line\">      &lt;TodoList /&gt;</span><br><span class=\"line\">    &lt;/Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">  expect(<span class=\"built_in\">setTimeout</span>).toHaveBeenCalledTimes(<span class=\"number\">1</span>); <span class=\"comment\">// è‡³å°‘æ‰§è¡Œä¸€æ¬¡å®šæ—¶å™¨</span></span><br><span class=\"line\">  jest.runAllTimers();</span><br><span class=\"line\">  process.nickTick(<span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    wrapper.update();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> listItems = findTestWrapper(wrapper, <span class=\"string\">&quot;list-item&quot;</span>);</span><br><span class=\"line\">    expect(listItems.length).toBe(<span class=\"number\">0</span>);</span><br><span class=\"line\">    done();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"14-vue-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"><a href=\"#14-vue-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\" class=\"headerlink\" title=\"14. vue é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"></a>14. vue é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•</h2><h3 id=\"14-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\"><a href=\"#14-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"14.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\"></a>14.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> Vue <span class=\"keyword\">from</span> <span class=\"string\">&quot;vue&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HelloWorld <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/components/HelloWorld&quot;</span>;</span><br><span class=\"line\">describe(<span class=\"string\">&quot;HelloWorld.vue&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  it(<span class=\"string\">&quot;renders props.msg when passed&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> root = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;div&quot;</span>);</span><br><span class=\"line\">    root.className = <span class=\"string\">&quot;root&quot;</span>;</span><br><span class=\"line\">    <span class=\"built_in\">document</span>.body.appendChild(root);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Vue(&#123;</span><br><span class=\"line\">      render: <span class=\"function\"><span class=\"params\">h</span> =&gt;</span></span><br><span class=\"line\">        h(HelloWorld, &#123;</span><br><span class=\"line\">          props: &#123;</span><br><span class=\"line\">            msg: <span class=\"string\">&quot;dell lee&quot;</span></span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">    &#125;).$mount(<span class=\"string\">&quot;.root&quot;</span>);</span><br><span class=\"line\">    expect(<span class=\"built_in\">document</span>.getElementByClassName(<span class=\"string\">&quot;hello&quot;</span>).length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•</p>\n<h3 id=\"14-2-ä½¿ç”¨-vue-test-utils-å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\"><a href=\"#14-2-ä½¿ç”¨-vue-test-utils-å¯¹-vue-ç»„ä»¶è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"14.2 ä½¿ç”¨ @vue/test-utils å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•\"></a>14.2 ä½¿ç”¨ @vue/test-utils å¯¹ vue ç»„ä»¶è¿›è¡Œæµ‹è¯•</h3><ul>\n<li><a href=\"https://vue-test-utils.vuejs.org/zh/\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n<h3 id=\"14-2-1-for-example\"><a href=\"#14-2-1-for-example\" class=\"headerlink\" title=\"14.2.1 for example\"></a>14.2.1 for example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; shallowMount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HelloWorld <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/components/HelloWorld&quot;</span>;</span><br><span class=\"line\">describe(<span class=\"string\">&quot;HelloWorld.vue&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  it(<span class=\"string\">&quot;renders props.msg when passed&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> msg = <span class=\"string\">&quot;dell lee&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> wrapper = shallowMount(HelloWorld, &#123;</span><br><span class=\"line\">      propsData: &#123; msg &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    expect(wrapper.text()).toMatch(msg);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-2-2-å¿«ç…§æµ‹è¯•\"><a href=\"#14-2-2-å¿«ç…§æµ‹è¯•\" class=\"headerlink\" title=\"14.2.2 å¿«ç…§æµ‹è¯•\"></a>14.2.2 å¿«ç…§æµ‹è¯•</h3><p>ä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬</p>\n<p>å¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ <code>dom</code> ç»“æ„çš„å˜åŒ–</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// HelloWorld.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; shallowMount &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@vue/test-utils&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> HelloWorld <span class=\"keyword\">from</span> <span class=\"string\">&quot;@/components/HelloWorld&quot;</span>;</span><br><span class=\"line\">describe(<span class=\"string\">&quot;HelloWorld.vue ç»„ä»¶æ¸²æŸ“æ­£å¸¸&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  it(<span class=\"string\">&quot;renders props.msg when passed&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> msg = <span class=\"string\">&quot;dell lee&quot;</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> wrapper = shallowMount(HelloWorld, &#123;</span><br><span class=\"line\">      propsData: &#123; msg &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    expect(wrapper).toMatchSnapshot();</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"15-react-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"><a href=\"#15-react-é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\" class=\"headerlink\" title=\"15. react é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•\"></a>15. react é¡¹ç›®çš„è‡ªåŠ¨åŒ–æµ‹è¯•</h2><h3 id=\"15-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-react-ç»„ä»¶è¿›è¡Œæµ‹è¯•\"><a href=\"#15-1-ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹-react-ç»„ä»¶è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"15.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•\"></a>15.1 ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼å¯¹ react ç»„ä»¶è¿›è¡Œæµ‹è¯•</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> ReactDOM <span class=\"keyword\">from</span> <span class=\"string\">&quot;react-dom&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;./App&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">it(<span class=\"string\">&quot;render App&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> div = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">&quot;div&quot;</span>);</span><br><span class=\"line\">  ReactDOM.render(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>, div);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> container = div.getElementsByClassName(<span class=\"string\">&quot;App&quot;</span>);</span><br><span class=\"line\">  expect(container.length).toBe(<span class=\"number\">1</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ç¼ºç‚¹ï¼šå†™æ³•è¿‡äºå¤æ‚ï¼Œå±€é™æ€§ä¹Ÿå¾ˆå¤§ï¼Œéƒ¨åˆ†å±æ€§æ— æ³•è¿›è¡Œæµ‹è¯•</p>\n<h3 id=\"15-2-enzyme-çš„é…ç½®å’Œä½¿ç”¨\"><a href=\"#15-2-enzyme-çš„é…ç½®å’Œä½¿ç”¨\" class=\"headerlink\" title=\"15.2 enzyme çš„é…ç½®å’Œä½¿ç”¨\"></a>15.2 enzyme çš„é…ç½®å’Œä½¿ç”¨</h3><ul>\n<li><a href=\"https://enzymejs.github.io/enzyme/\">å®˜æ–¹æ–‡æ¡£</a></li>\n<li><a href=\"https://github.com/enzymejs/enzyme\">github</a></li>\n<li><a href=\"https://github.com/enzymejs/enzyme-matchers/tree/master/packages/jest-enzyme\">jest-enzyme</a></li>\n</ul>\n<h3 id=\"15-2-1-for-example\"><a href=\"#15-2-1-for-example\" class=\"headerlink\" title=\"15.2.1 for example\"></a>15.2.1 for example</h3><figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; shallow &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;App&quot;</span>;</span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\">it(<span class=\"string\">&quot;render App&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = shallow(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>);</span><br><span class=\"line\">  expect(wrapper.find(<span class=\"string\">&#x27;[data-test=&quot;App&quot;]&#x27;</span>).length).toBe(<span class=\"number\">2</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<p>ä½¿ç”¨è‡ªå®šä¹‰ <code>props</code> å¯ä»¥é™ä½ä»£ç è€¦åˆåº¦</p>\n<p><code>shallow</code> é€‚åˆå•å…ƒæµ‹è¯•ï¼Œå±äºæµ…æ¸²æŸ“ï¼› <code>mount</code> é€‚åˆé›†æˆæµ‹è¯•ï¼Œä¼šå°†å½“å‰ç»„ä»¶åŒ…æ‹¬å…¶å­ç»„ä»¶ä¸€èµ·æ¸²æŸ“</p>\n<p>å•å…ƒæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ <code>api</code> <code>.state()</code> ï¼›é›†æˆæµ‹è¯•æ—¶æ›´å€¾å‘äºä½¿ç”¨ <code>api</code> <code>.prop()</code></p>\n<h3 id=\"15-2-2-å¿«ç…§æµ‹è¯•\"><a href=\"#15-2-2-å¿«ç…§æµ‹è¯•\" class=\"headerlink\" title=\"15.2.2 å¿«ç…§æµ‹è¯•\"></a>15.2.2 å¿«ç…§æµ‹è¯•</h3><p>ä½¿ç”¨åœºæ™¯: ä¸€èˆ¬ç”¨äºæµ‹è¯•ç»„ä»¶æ­£å¸¸æ¸²æŸ“ï¼Œè€Œä¸æµ‹è¯•ç»„ä»¶åŠŸèƒ½æ—¶ä½¿ç”¨ã€‚æ¯”å¦‚å¯¹æ ·å¼å’Œå¸ƒå±€çš„ä¿®æ”¹åšç›‘å¬</p>\n<p>å¥½å¤„: å¯ä»¥å¸®åŠ©æˆ‘ä»¬åŠæ—¶å‘ç°ç»„ä»¶ä¸­ <code>dom</code> ç»“æ„çš„å˜åŒ–</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// App.test.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> React <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Enzyme, &#123; shallow &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Adapter <span class=\"keyword\">from</span> <span class=\"string\">&quot;enzyme-adapter-react-16&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">&quot;App&quot;</span>;</span><br><span class=\"line\">Enzyme.configure(&#123; <span class=\"attr\">adapter</span>: <span class=\"keyword\">new</span> Adapter() &#125;);</span><br><span class=\"line\">it(<span class=\"string\">&quot;render App&quot;</span>, <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> wrapper = shallow(<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">App</span> /&gt;</span></span>);</span><br><span class=\"line\">  expect(wrapper).toMatchSnapshot();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<hr>\n<h2 id=\"16-å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\"><a href=\"#16-å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\" class=\"headerlink\" title=\"16. å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿\"></a>16. å‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„ä¼˜åŠ¿</h2><ul>\n<li>æ›´å¥½çš„ä»£ç ç»„ç»‡ï¼Œé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å¼º</li>\n<li>æ›´å°‘çš„ <code>Bug</code> å‡ºç°æ¦‚ç‡ï¼Œå°¤å…¶æ˜¯å›å½’æµ‹è¯•ä¸­çš„ <code>Bug</code></li>\n<li>ä¿®æ”¹å·¥ç¨‹è´¨é‡å·®çš„é¡¹ç›®ï¼Œæ›´åŠ å®‰å…¨</li>\n<li>é¡¹ç›®å…·å¤‡æ½œåœ¨çš„æ–‡æ¡£ç‰¹æ€§</li>\n<li>æ‰©å±•å‰ç«¯çš„çŸ¥è¯†é¢</li>\n</ul>\n<h2 id=\"17-æ€»ç»“é‡è¦çš„ç‚¹\"><a href=\"#17-æ€»ç»“é‡è¦çš„ç‚¹\" class=\"headerlink\" title=\"17 æ€»ç»“é‡è¦çš„ç‚¹\"></a>17 æ€»ç»“é‡è¦çš„ç‚¹</h2><ol>\n<li><code>BDD</code> å’Œ <code>TDD</code></li>\n<li>é›†æˆæµ‹è¯• å’Œ å•å…ƒæµ‹è¯•</li>\n<li>æµ‹è¯•å’Œä¸šåŠ¡çš„è§£è€¦</li>\n<li>ä»£ç æµ‹è¯•è¦†ç›–ç‡å¹¶ä¸ä»£è¡¨ä¸€å®šé è°±</li>\n<li>åŠŸèƒ½æ€§æµ‹è¯• å’Œ <code>UI</code>æµ‹è¯•</li>\n<li>æµ‹è¯•è¶Šç‹¬ç«‹ï¼Œéšè—çš„é—®é¢˜å°±è¶Šå¤š</li>\n</ol>\n"},{"title":"TypeScript æ–‡æ¡£","date":"2020-09-09T16:00:00.000Z","_content":"\n## ä¸€ã€ åŸºç¡€ç±»å‹\n\n### 1.1 ç±»å‹æ–­è¨€\n\n> æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” `TypeScript` æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šçš„çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸å°½å…´ç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚\n\n- ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼\n\n- ç¬¬ä¸€ç§ï¼šå°–æ‹¬å·è¯­æ³• (å½“åœ¨ `TypeScript` é‡Œä½¿ç”¨ `JSX` æ—¶ï¼Œåªæœ‰ `as` è¯­è¨€æ–­è¨€æ˜¯è¢«å…è®¸çš„)\n\n```typescript\nlet someValue: any = \"this is a string\";\nlet strLength: number = (<string>someValue).length;\n```\n\n- ç¬¬äºŒç§ï¼š`as` è¯­æ³•\n\n```typescript\nlet _someValue: any = \"this is a string\";\nlet _strLength: number = (_someValue as string).length;\n```\n\n### 1.2 åŸºç¡€ç±»å‹\n\n#### 1.2.1 å¸ƒå°”å€¼\n\n```typescript\nlet isDone: boolean = false;\n```\n\n#### 1.2.2 æ•°å­—\n\n> ä¸ `javascript` ä¸€æ ·ï¼Œ`TypeScript` é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ `number`ã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œ `TypeScript` è¿˜æ”¯æŒ `ECMA2015` ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚\n\n```typescript\nlet decLiteral: number = 6;\nlet hexLiteral: number = 0xf00d;\nlet binaryLiteral: number = 0b1010;\nlet octalLiteral: number = 0o744;\n```\n\n#### 1.2.3 å­—ç¬¦ä¸²\n\n```typescript\nlet strName: string = \"bob\";\n```\n\n#### 1.2.4 æ•°ç»„\n\n> `TypeScript` åƒ `JavaScript` ä¸€æ ·å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ã€‚æœ‰ä¸¤ç§æ–¹æ³•å®šä¹‰æ•°ç»„ã€‚\n\n- ç¬¬ä¸€ç§ï¼šå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š `[]`;\n\n```typescript\nlet list1: number[] = [1, 2, 3];\n```\n\n- ç¬¬äºŒç§ï¼šä½¿ç”¨æ•°ç»„æ³›å‹, `Array<å…ƒç´ ç±»å‹>`\n\n```typescript\nlet list2: Array<number> = [1, 2, 3];\n```\n\n#### 1.2.5 å…ƒç»„ Tuple\n\n- å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚\n\n```typescript\nlet x: [string, number];\nx = [\"hello\", 10]; // => Ok\nx = [10, \"hello\"]; // => Error\n```\n\n- å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹\n\n```typescript\nconsole.log(x[0].substr(1)); // => Ok\nconsole.log(x[1].substr(1)); // => Error\n```\n\n- å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£\n\n```typescript\nx[3] = \"world\"; // Ok, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹\nconsole.log(x[5].toString()); // Ok, \"string\"å’Œ\"number\"éƒ½æœ‰toStringæ–¹æ³•\nx[6] = true; // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹\n```\n\n#### 1.2.6 æšä¸¾\n\n- `enum` ç±»å‹æ˜¯å¯¹ `JavaScript` æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚åƒ `C#` ç­‰å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—\n\n```typescript\nenum Color {\n  Red,\n  Green,\n  Blue\n}\nlet c: Color = Color.Green;\n```\n\n- é»˜è®¤æƒ…å†µä¸‹ï¼Œä» `0` å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚\n\n```typescript\nenum Color1 {\n  Red = 1,\n  Green,\n  Blue\n}\nlet c1: Color1 = Color1.Green;\n```\n\n- æˆ–è€…å…¨éƒ¨é‡‡ç”¨èµ‹å€¼\n\n```typescript\nenum Color2 {\n  Red = 1,\n  Green = 2,\n  Blue = 4\n}\nlet c2: Color2 = Color2.Green;\n```\n\n- æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚\n\n```typescript\nenum Color3 {\n  Red = 1,\n  Green,\n  Blue\n}\nlet colorName: string = Color3[2];\nconsole.log(colorName);\n```\n\n#### 1.2.7 Any\n\n- æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹åº“ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `any` ç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡\n\n```typescript\nlet notSure: any = 4;\nnotSure = \"maybe a string instead\";\nnotSure = false; // Ok\n```\n\n- åœ¨å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹å†™çš„æ—¶å€™ï¼Œ`any` ç±»å‹æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©åœ°åŒ…å«æˆ–ç§»é™¤ç±»å‹æ£€æŸ¥ã€‚ä½ å¯èƒ½è®¤ä¸º `Object` æœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒåœ¨å…¶ä»–è¯­è¨€ä¸­é‚£æ ·ã€‚ä½†æ˜¯ `Object` ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™ä»–èµ‹ä»»æ„å€¼ï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä½¿å®ƒçœŸæœ‰è¿™äº›æ–¹æ³•ã€‚\n\n```typescript\nlet notSure1: any = 4;\nnotSure1.ifItExists(); // Ok\nnotSure1.toFixed(); // Ok\nlet prettySure: Object = 4;\n// prettySure.toFixed(); // Error, Property 'toFixed' doesn't exist on type 'Object'.\n```\n\n- å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®ç±»å‹æ—¶ï¼Œ`any` ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚\n\n```typescript\nlet list: any[] = [1, true, \"free\"];\nlist[1] = 100;\n```\n\n#### 1.2.8 Void\n\n- æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ`void` ç±»å‹åƒæ˜¯ä¸ `any` ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ `void`ã€‚\n\n```typescript\nfunction warnUser(): void {\n  console.log(\"This is my warning message\");\n}\n```\n\n- å£°æ˜ä¸€ä¸ª `void` ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ `undefined` å’Œ `null`\n\n```typescript\nlet unusbale: void = undefined;\n```\n\n#### 1.2.9 Null å’Œ Undefined\n\n- `TypeScript` é‡Œï¼Œ`undefined` å’Œ `null` ä¸¤è€…å„æœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš `undefined` å’Œ `null`ã€‚å’Œ `void` ç›¸ä¼¼ï¼Œå®ƒä»¬æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ã€‚\n\n```typescript\nlet u: undefined = undefined;\nlet n: null = null;\n```\n\n- é»˜è®¤æƒ…å†µä¸‹ `null` å’Œ `undefined` æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ `null` å’Œ `undefined` èµ‹å€¼ç»™ `number` ç±»å‹çš„å˜é‡ã€‚\n- ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº†ä¸€ä¸ª `--strictNullChecks` æ ‡è®°ï¼Œ`null` å’Œ `undefined` åªèƒ½èµ‹å€¼ç»™ `void` å’Œå®ƒä»¬å„è‡ªã€‚è¿™èƒ½é¿å…å¾ˆå¤šå¸¸è§çš„é—®é¢˜ã€‚ä¹Ÿè®¸åœ¨æŸå¤„ä½ æƒ³ä¼ å…¥ä¸€ä¸ª `string` æˆ– `null` æˆ– `undefined`ï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ `string | null | undefined`ã€‚\n\n#### 1.2.10 Never\n\n- `never` ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š`never` ç±»å‹æ˜¯é‚£äº›æ€»ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›\n- å˜é‡ä¹Ÿå¯èƒ½æ˜¯ `never` ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚\n- `never` ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›\n\n> ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ `never` çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ `never` ç±»å‹(é™¤äº† `never` æœ¬èº«ä¹‹å¤–)ã€‚å³ä½¿ `any` ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ `never`ã€‚\n\n```typescript\n// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹\nfunction error(message: string): never {\n  throw new Error(message);\n}\n// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºnever\nfunction fail() {\n  return error(\"Something failed\");\n}\n// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ³•è¾¾åˆ°çš„ç»ˆç‚¹\nfunction infiniteLoop(): never {\n  while (true) {}\n}\n```\n\n#### 1.2.11 Object\n\n- `Object` è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ `number`, `string`, `boolean`, `symbol`, `null` æˆ– `undefined` ä¹‹å¤–çš„ç±»å‹ã€‚\n- ä½¿ç”¨ `Object` ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ `Object.create` è¿™æ ·çš„ `API`ã€‚\n\n```typescript\ndeclare function create(o: object | null): void;\ncreate({ prop: 0 }); // Ok\ncreate(null); // Ok\ncreate(42); //Error\ncreate(\"string\"); // Error\ncreate(false); // Error\ncreate(undefined); // Error\n```\n\n## äºŒã€å˜é‡å£°æ˜\n\n### 2.1 ä»‹ç»\n\n> `let` å’Œ `const` æ˜¯ `JavaScript` é‡Œç›¸å¯¹è¾ƒæ–°çš„å˜é‡å£°æ˜æ–¹å¼ã€‚ åƒæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ï¼Œ `let` åœ¨å¾ˆå¤šæ–¹é¢ä¸ `var` æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©å¤§å®¶é¿å…åœ¨ `JavaScript` é‡Œå¸¸è§ä¸€äº›é—®é¢˜ã€‚ `const` æ˜¯å¯¹ `let` çš„ä¸€ä¸ªå¢å¼ºï¼Œå®ƒèƒ½é˜»æ­¢å¯¹ä¸€ä¸ªå˜é‡å†æ¬¡èµ‹å€¼ã€‚\n> å› ä¸º `TypeScript` æ˜¯ `JavaScript` çš„è¶…é›†ï¼Œæ‰€ä»¥å®ƒæœ¬èº«å°±æ”¯æŒ `let` å’Œ `const` ã€‚ ä¸‹é¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜è¿™äº›æ–°çš„å£°æ˜æ–¹å¼ä»¥åŠä¸ºä»€ä¹ˆæ¨èä½¿ç”¨å®ƒä»¬æ¥ä»£æ›¿ `var`ã€‚\n> å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ `JavaScript` æ—¶æ²¡æœ‰ç‰¹åˆ«åœ¨æ„ï¼Œé‚£ä¹ˆè¿™èŠ‚å†…å®¹ä¼šå”¤èµ·ä½ çš„å›å¿†ã€‚ å¦‚æœä½ å·²ç»å¯¹ `var` å£°æ˜çš„æ€ªå¼‚ä¹‹å¤„äº†å¦‚æŒ‡æŒï¼Œé‚£ä¹ˆä½ å¯ä»¥è½»æ¾åœ°ç•¥è¿‡è¿™èŠ‚ã€‚\n\n### 2.2 var å£°æ˜\n\n> ä¸€ç›´ä»¥æ¥æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ `var` å…³é”®å­—å®šä¹‰ `JavaScript` å˜é‡ã€‚\n\n```typescript\nvar a = 10;\n```\n\n> å¤§å®¶éƒ½èƒ½ç†è§£ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸º `a` å€¼ä¸º `10` çš„å˜é‡ã€‚\n> æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å˜é‡ï¼š\n\n```typescript\nfunction f() {\n  var message = \"Hello, world!\";\n  return message;\n}\n```\n\n> å¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒå‡½æ•°å†…éƒ¨è®¿é—®ç›¸åŒçš„å˜é‡ã€‚\n\n```typescript\nfunction f() {\n  var a = 10;\n  return function g() {\n    var b = a + 1;\n    return b;\n  };\n}\n\nvar g = f();\ng(); // returns 11;\n```\n\n> ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ`g` å¯ä»¥è·å–åˆ° `f` å‡½æ•°é‡Œå®šä¹‰çš„ `a` å˜é‡ã€‚ æ¯å½“ `g` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒéƒ½å¯ä»¥è®¿é—®åˆ° `f` é‡Œçš„ `a` å˜é‡ã€‚ å³ä½¿å½“ `g` åœ¨ `f` å·²ç»æ‰§è¡Œå®Œåæ‰è¢«è°ƒç”¨ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®åŠä¿®æ”¹ `a`ã€‚\n\n```typescript\nfunction f() {\n  var a = 1;\n\n  a = 2;\n  var b = g();\n  a = 3;\n\n  return b;\n\n  function g() {\n    return a;\n  }\n}\n\nf(); // returns 2\n```\n\n### 2.3 ä½œç”¨åŸŸè§„åˆ™\n\n> å¯¹äºç†Ÿæ‚‰å…¶å®ƒè¯­è¨€çš„äººæ¥è¯´ï¼Œ`var` å£°æ˜æœ‰äº›å¥‡æ€ªçš„ä½œç”¨åŸŸè§„åˆ™ã€‚ çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```typescript\nfunction f(shouldInitialize: boolean) {\n  if (shouldInitialize) {\n    var x = 10;\n  }\n  return x;\n}\n\nf(true); // returns '10'\nf(false); // returns 'undefined'\n```\n\n> æœ‰äº›è¯»è€…å¯èƒ½è¦å¤šçœ‹å‡ éè¿™ä¸ªä¾‹å­ã€‚ å˜é‡ `x` æ˜¯å®šä¹‰åœ¨ `if` è¯­å¥é‡Œé¢\\_ï¼Œä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥åœ¨è¯­å¥çš„å¤–é¢è®¿é—®å®ƒã€‚ è¿™æ˜¯å› ä¸º `var` å£°æ˜å¯ä»¥åœ¨åŒ…å«å®ƒçš„å‡½æ•°ï¼Œæ¨¡å—ï¼Œå‘½åç©ºé—´æˆ–å…¨å±€ä½œç”¨åŸŸå†…éƒ¨ä»»ä½•ä½ç½®è¢«è®¿é—®ï¼ˆæˆ‘ä»¬åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼ŒåŒ…å«å®ƒçš„ä»£ç å—å¯¹æ­¤æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ æœ‰äº›äººç§°æ­¤ä¸º `var` ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°å‚æ•°ä¹Ÿä½¿ç”¨å‡½æ•°ä½œç”¨åŸŸã€‚\n> è¿™äº›ä½œç”¨åŸŸè§„åˆ™å¯èƒ½ä¼šå¼•å‘ä¸€äº›é”™è¯¯ã€‚ å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼Œå¤šæ¬¡å£°æ˜åŒä¸€ä¸ªå˜é‡å¹¶ä¸ä¼šæŠ¥é”™ï¼š\n\n```typescript\nfunction sumMatrix(matrix: number[][]) {\n  var sum = 0;\n  for (var i = 0; i < matrix.length; i++) {\n    var currentRow = matrix[i];\n    for (var i = 0; i < currentRow.length; i++) {\n      sum += currentRow[i];\n    }\n  }\n  return sum;\n}\n```\n\n> è¿™é‡Œå¾ˆå®¹æ˜“çœ‹å‡ºä¸€äº›é—®é¢˜ï¼Œé‡Œå±‚çš„ `for` å¾ªç¯ä¼šè¦†ç›–å˜é‡ `i`ï¼Œå› ä¸ºæ‰€æœ‰ `i` éƒ½å¼•ç”¨ç›¸åŒçš„å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ æœ‰ç»éªŒçš„å¼€å‘è€…ä»¬å¾ˆæ¸…æ¥šï¼Œè¿™äº›é—®é¢˜å¯èƒ½åœ¨ä»£ç å®¡æŸ¥æ—¶æ¼æ‰ï¼Œå¼•å‘æ— ç©·çš„éº»çƒ¦ã€‚\n\n### 2.4 æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\n\n> å¿«é€Ÿçš„çŒœä¸€ä¸‹ä¸‹é¢çš„ä»£ç ä¼šè¿”å›ä»€ä¹ˆï¼š\n\n```typescript\nfor (var i = 0; i < 10; i++) {\n  setTimeout(function () {\n    console.log(i);\n  }, 100 * i);\n}\n```\n\n> ä»‹ç»ä¸€ä¸‹ï¼Œ`setTimeout` ä¼šåœ¨è‹¥å¹²æ¯«ç§’çš„å»¶æ—¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç­‰å¾…å…¶å®ƒä»£ç æ‰§è¡Œå®Œæ¯•ï¼‰ã€‚\n> å¥½å§ï¼Œçœ‹ä¸€ä¸‹ç»“æœï¼š\n\n```typescript\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n```\n\n> å¾ˆå¤š `JavaScript` ç¨‹åºå‘˜å¯¹è¿™ç§è¡Œä¸ºå·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å¦‚æœä½ å¾ˆä¸è§£ï¼Œä½ å¹¶ä¸æ˜¯ä¸€ä¸ªäººã€‚ å¤§å¤šæ•°äººæœŸæœ›è¾“å‡ºç»“æœæ˜¯è¿™æ ·ï¼š\n\n```typescript\n0;\n1;\n2;\n3;\n4;\n5;\n6;\n7;\n8;\n9;\n```\n\n> è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æåˆ°çš„æ•è·å˜é‡å—ï¼Ÿ\n> æˆ‘ä»¬ä¼ ç»™ `setTimeout` çš„æ¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼å®é™…ä¸Šéƒ½å¼•ç”¨äº†ç›¸åŒä½œç”¨åŸŸé‡Œçš„åŒä¸€ä¸ª `i`ã€‚\n> è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ€è€ƒä¸€ä¸‹è¿™æ˜¯ä¸ºä»€ä¹ˆã€‚ `setTimeout` åœ¨è‹¥å¹²æ¯«ç§’åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯åœ¨ `for` å¾ªç¯ç»“æŸåã€‚ `for` å¾ªç¯ç»“æŸåï¼Œ`i` çš„å€¼ä¸º `10`ã€‚ æ‰€ä»¥å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šæ‰“å°å‡º `10ï¼`\n> ä¸€ä¸ªé€šå¸¸çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆ`IIFE`ï¼‰æ¥æ•è·æ¯æ¬¡è¿­ä»£æ—¶ `i` çš„å€¼ï¼š\n\n```typescript\nfor (var i = 0; i < 10; i++) {\n  // capture the current state of 'i'\n  // by invoking a function with its current value\n  (function (i) {\n    setTimeout(function () {\n      console.log(i);\n    }, 100 * i);\n  })(i);\n}\n```\n\n> è¿™ç§å¥‡æ€ªçš„å½¢å¼æˆ‘ä»¬å·²ç»å¸ç©ºè§æƒ¯äº†ã€‚ å‚æ•° `i` ä¼šè¦†ç›– `for` å¾ªç¯é‡Œçš„ iï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬èµ·äº†åŒæ ·çš„åå­—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ€ä¹ˆæ”¹ `for` å¾ªç¯ä½“é‡Œçš„ä»£ç ã€‚\n\n### 2.5 let å£°æ˜\n\n> ç°åœ¨ä½ å·²ç»çŸ¥é“äº† `var` å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè¿™æ°å¥½è¯´æ˜äº†ä¸ºä»€ä¹ˆç”¨ `let` è¯­å¥æ¥å£°æ˜å˜é‡ã€‚ é™¤äº†åå­—ä¸åŒå¤–ï¼Œ let ä¸ `var` çš„å†™æ³•ä¸€è‡´ã€‚\n\n```typescript\nlet hello = \"Hello!\";\n```\n\n> ä¸»è¦çš„åŒºåˆ«ä¸åœ¨è¯­æ³•ä¸Šï¼Œè€Œæ˜¯è¯­ä¹‰ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šæ·±å…¥ç ”ç©¶ã€‚\n\n### 2.6 å—ä½œç”¨åŸŸ\n\n> å½“ç”¨ `let` å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå®ƒä½¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸæˆ–å—ä½œç”¨åŸŸã€‚ ä¸åŒäºä½¿ç”¨ `var` å£°æ˜çš„å˜é‡é‚£æ ·å¯ä»¥åœ¨åŒ…å«å®ƒä»¬çš„å‡½æ•°å¤–è®¿é—®ï¼Œå—ä½œç”¨åŸŸå˜é‡åœ¨åŒ…å«å®ƒä»¬çš„å—æˆ– `for` å¾ªç¯ä¹‹å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚\n\n```typescript\nfunction f(input: boolean) {\n  let a = 100;\n  if (input) {\n    // Still okay to reference 'a'\n    let b = a + 1;\n    return b;\n  }\n\n  // Error: 'b' doesn't exist here\n  return b;\n}\n```\n\n> è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†`2`ä¸ªå˜é‡ `a` å’Œ `b` ã€‚ `a` çš„ä½œç”¨åŸŸæ˜¯ `f` å‡½æ•°ä½“å†…ï¼Œè€Œ `b` çš„ä½œç”¨åŸŸæ˜¯ `if` è¯­å¥å—é‡Œã€‚\n> åœ¨ `catch` è¯­å¥é‡Œå£°æ˜çš„å˜é‡ä¹Ÿå…·æœ‰åŒæ ·çš„ä½œç”¨åŸŸè§„åˆ™ã€‚\n\n```typescript\ntry {\n  throw \"oh no!\";\n} catch (e) {\n  console.log(\"Oh well.\");\n}\n\n// Error: 'e' doesn't exist here\nconsole.log(e);\n```\n\n> æ‹¥æœ‰å—çº§ä½œç”¨åŸŸçš„å˜é‡çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸èƒ½åœ¨è¢«å£°æ˜ä¹‹å‰è¯»æˆ–å†™ã€‚ è™½ç„¶è¿™äº›å˜é‡å§‹ç»ˆâ€œå­˜åœ¨â€äºå®ƒä»¬çš„ä½œç”¨åŸŸé‡Œï¼Œä½†åœ¨ç›´åˆ°å£°æ˜å®ƒçš„ä»£ç ä¹‹å‰çš„åŒºåŸŸéƒ½å±äº æš‚æ—¶æ€§æ­»åŒºã€‚ å®ƒåªæ˜¯ç”¨æ¥è¯´æ˜æˆ‘ä»¬ä¸èƒ½åœ¨ `let` è¯­å¥ä¹‹å‰è®¿é—®å®ƒä»¬ï¼Œå¹¸è¿çš„æ˜¯ `TypeScript` å¯ä»¥å‘Šè¯‰æˆ‘ä»¬è¿™äº›ä¿¡æ¯ã€‚\n\n```typescript\na++; // illegal to use 'a' before it's declared;\nlet a;\n```\n\n> æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨ä¸€ä¸ªæ‹¥æœ‰å—ä½œç”¨åŸŸå˜é‡è¢«å£°æ˜å‰è·å–å®ƒã€‚ åªæ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨å˜é‡å£°æ˜å‰å»è°ƒç”¨é‚£ä¸ªå‡½æ•°ã€‚ å¦‚æœç”Ÿæˆä»£ç ç›®æ ‡ä¸º `ES2015`ï¼Œç°ä»£çš„è¿è¡Œæ—¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼›ç„¶è€Œï¼Œç°ä»Š `TypeScript` æ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚\n\n```typescript\nfunction foo() {\n  // okay to capture 'a'\n  return a;\n}\n\n// ä¸èƒ½åœ¨'a'è¢«å£°æ˜å‰è°ƒç”¨'foo'\n// è¿è¡Œæ—¶åº”è¯¥æŠ›å‡ºé”™è¯¯\nfoo();\n\nlet a;\n```\n\n> å…³äºæš‚æ—¶æ€§æ­»åŒºçš„æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹è¿™é‡Œ [Mozilla Developer Network.](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let)\n\n### 2.7 é‡å®šä¹‰åŠå±è”½\n\n> æˆ‘ä»¬æè¿‡ä½¿ç”¨ `var` å£°æ˜æ—¶ï¼Œå®ƒä¸åœ¨ä¹ä½ å£°æ˜å¤šå°‘æ¬¡ï¼›ä½ åªä¼šå¾—åˆ° `1` ä¸ªã€‚\n\n```typescript\nfunction f(x) {\n  var x;\n  var x;\n  if (true) {\n    var x;\n  }\n}\n```\n\n> åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæ‰€æœ‰ `x` çš„å£°æ˜å®é™…ä¸Šéƒ½å¼•ç”¨ä¸€ä¸ªç›¸åŒçš„ `x`ï¼Œå¹¶ä¸”è¿™æ˜¯å®Œå…¨æœ‰æ•ˆçš„ä»£ç ã€‚ è¿™ç»å¸¸ä¼šæˆä¸º`bug` çš„æ¥æºã€‚ å¥½çš„æ˜¯ï¼Œ `let` å£°æ˜å°±ä¸ä¼šè¿™ä¹ˆå®½æ¾äº†ã€‚\n\n```typescript\nlet x = 10;\nlet x = 20; // é”™è¯¯ï¼Œä¸èƒ½åœ¨1ä¸ªä½œç”¨åŸŸé‡Œå¤šæ¬¡å£°æ˜`x\n```\n\n> å¹¶ä¸æ˜¯è¦æ±‚ä¸¤ä¸ªå‡æ˜¯å—çº§ä½œç”¨åŸŸçš„å£°æ˜ `TypeScript` æ‰ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯çš„è­¦å‘Šã€‚\n\n```typescript\nfunction f(x) {\n  let x = 100; // error: interferes with parameter declaration\n}\n\nfunction g() {\n  let x = 100;\n  var x = 100; // error: can't have both declarations of 'x'\n}\n```\n\n> å¹¶ä¸æ˜¯è¯´å—çº§ä½œç”¨åŸŸå˜é‡ä¸èƒ½ç”¨å‡½æ•°ä½œç”¨åŸŸå˜é‡æ¥å£°æ˜ã€‚ è€Œæ˜¯å—çº§ä½œç”¨åŸŸå˜é‡éœ€è¦åœ¨æ˜æ˜¾ä¸åŒçš„å—é‡Œå£°æ˜ã€‚\n\n```typescript\nfunction f(condition, x) {\n  if (condition) {\n    let x = 100;\n    return x;\n  }\n  return x;\n}\n\nf(false, 0); // returns 0\nf(true, 0); // returns 100\n```\n\n> åœ¨ä¸€ä¸ªåµŒå¥—ä½œç”¨åŸŸé‡Œå¼•å…¥ä¸€ä¸ªæ–°åå­—çš„è¡Œä¸ºç§°åšå±è”½ã€‚ å®ƒæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå®ƒå¯èƒ½ä¼šä¸å°å¿ƒåœ°å¼•å…¥æ–°é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šè§£å†³ä¸€äº›é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨ç”¨ `let` é‡å†™ä¹‹å‰çš„ `sumMatrix` å‡½æ•°ã€‚\n\n```typescript\nfunction sumMatrix(matrix: number[][]) {\n  let sum = 0;\n  for (let i = 0; i < matrix.length; i++) {\n    var currentRow = matrix[i];\n    for (let i = 0; i < currentRow.length; i++) {\n      sum += currentRow[i];\n    }\n  }\n  return sum;\n}\n```\n\n> è¿™ä¸ªç‰ˆæœ¬çš„å¾ªç¯èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œå› ä¸ºå†…å±‚å¾ªç¯çš„ i å¯ä»¥å±è”½æ‰å¤–å±‚å¾ªç¯çš„ `i`ã€‚\n> é€šå¸¸æ¥è®²åº”è¯¥é¿å…ä½¿ç”¨å±è”½ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å†™å‡ºæ¸…æ™°çš„ä»£ç ã€‚ åŒæ—¶ä¹Ÿæœ‰äº›åœºæ™¯é€‚åˆåˆ©ç”¨å®ƒï¼Œä½ éœ€è¦å¥½å¥½æ‰“ç®—ä¸€ä¸‹ã€‚\n\n### 2.8 å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\n\n> åœ¨æˆ‘ä»¬æœ€åˆè°ˆåŠè·å–ç”¨ `var` å£°æ˜çš„å˜é‡æ—¶ï¼Œæˆ‘ä»¬ç®€ç•¥åœ°æ¢ç©¶äº†ä¸€ä¸‹åœ¨è·å–åˆ°äº†å˜é‡ä¹‹åå®ƒçš„è¡Œä¸ºæ˜¯æ€æ ·çš„ã€‚ ç›´è§‚åœ°è®²ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸæ—¶ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªå˜é‡çš„ ç¯å¢ƒã€‚ å°±ç®—ä½œç”¨åŸŸå†…ä»£ç å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒä¸å…¶æ•è·çš„å˜é‡ä¾ç„¶å­˜åœ¨ã€‚\n\n```typescript\nfunction theCityThatAlwaysSleeps() {\n  let getCity;\n  if (true) {\n    let city = \"Seattle\";\n    getCity = function () {\n      return city;\n    };\n  }\n  return getCity();\n}\n```\n\n> å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ `city` çš„ç¯å¢ƒé‡Œè·å–åˆ°äº† `city` ï¼Œæ‰€ä»¥å°±ç®— if è¯­å¥æ‰§è¡Œç»“æŸåæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å®ƒã€‚\n> å›æƒ³ä¸€ä¸‹å‰é¢ `setTimeout` çš„ä¾‹å­ï¼Œæˆ‘ä»¬æœ€åéœ€è¦ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ¥è·å–æ¯æ¬¡ `for` å¾ªç¯è¿­ä»£é‡Œçš„çŠ¶æ€ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬åšçš„æ˜¯ä¸ºè·å–åˆ°çš„å˜é‡åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒã€‚ è¿™æ ·åšæŒºç—›è‹¦çš„ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œä½ ä¸å¿…åœ¨ `TypeScript` é‡Œè¿™æ ·åšäº†ã€‚\n> å½“ `let` å£°æ˜å‡ºç°åœ¨å¾ªç¯ä½“é‡Œæ—¶æ‹¥æœ‰å®Œå…¨ä¸åŒçš„è¡Œä¸ºã€‚ ä¸ä»…æ˜¯åœ¨å¾ªç¯é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒï¼Œè€Œæ˜¯é’ˆå¯¹ æ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºè¿™æ ·ä¸€ä¸ªæ–°ä½œç”¨åŸŸã€‚ è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶åšçš„äº‹ï¼Œæ‰€ä»¥åœ¨ `setTimeout` ä¾‹å­é‡Œæˆ‘ä»¬ä»…ä½¿ç”¨ `let` å£°æ˜å°±å¯ä»¥äº†ã€‚\n\n```typescript\nfor (let i = 0; i < 10; i++) {\n  setTimeout(function () {\n    console.log(i);\n  }, 100 * i);\n}\n```\n\n> ä¼šè¾“å‡ºä¸é¢„æ–™ä¸€è‡´çš„ç»“æœï¼š\n\n```typescript\n0;\n1;\n2;\n3;\n4;\n5;\n6;\n7;\n8;\n9;\n```\n\n### 2.9 const å£°æ˜\n\n> `const` å£°æ˜æ˜¯å£°æ˜å˜é‡çš„å¦ä¸€ç§æ–¹å¼ã€‚\n\n```typescript\nconst numLivesForCat = 9;\n```\n\n> å®ƒä»¬ä¸ `let` å£°æ˜ç›¸ä¼¼ï¼Œä½†æ˜¯å°±åƒå®ƒçš„åå­—æ‰€è¡¨è¾¾çš„ï¼Œå®ƒä»¬è¢«èµ‹å€¼åä¸èƒ½å†æ”¹å˜ã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒä»¬æ‹¥æœ‰ä¸ `let` ç›¸åŒçš„ä½œç”¨åŸŸè§„åˆ™ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å®ƒä»¬é‡æ–°èµ‹å€¼ã€‚\n> è¿™å¾ˆå¥½ç†è§£ï¼Œå®ƒä»¬å¼•ç”¨çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚\n\n```typescript\nconst numLivesForCat = 9;\nconst kitty = {\n  name: \"Aurora\",\n  numLives: numLivesForCat\n};\n\n// Error\nkitty = {\n  name: \"Danielle\",\n  numLives: numLivesForCat\n};\n\n// all \"okay\"\nkitty.name = \"Rory\";\nkitty.name = \"Kitty\";\nkitty.name = \"Cat\";\nkitty.numLives--;\n```\n\n> é™¤éä½ ä½¿ç”¨ç‰¹æ®Šçš„æ–¹æ³•å»é¿å…ï¼Œå®é™…ä¸Š `const` å˜é‡çš„å†…éƒ¨çŠ¶æ€æ˜¯å¯ä¿®æ”¹çš„ã€‚ å¹¸è¿çš„æ˜¯ï¼Œ`TypeScript` å…è®¸ä½ å°†å¯¹è±¡çš„æˆå‘˜è®¾ç½®æˆåªè¯»çš„ã€‚ æ¥å£ä¸€ç« æœ‰è¯¦ç»†è¯´æ˜ã€‚\n\n### 2.10 let vs. const\n\n> ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ç§ä½œç”¨åŸŸç›¸ä¼¼çš„å£°æ˜æ–¹å¼ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šé—®åˆ°åº•åº”è¯¥ä½¿ç”¨å“ªä¸ªã€‚ ä¸å¤§å¤šæ•°æ³›æ³›çš„é—®é¢˜ä¸€æ ·ï¼Œç­”æ¡ˆæ˜¯ï¼šä¾æƒ…å†µè€Œå®šã€‚\n> ä½¿ç”¨æœ€å°ç‰¹æƒåŸåˆ™ï¼Œæ‰€æœ‰å˜é‡é™¤äº†ä½ è®¡åˆ’å»ä¿®æ”¹çš„éƒ½åº”è¯¥ä½¿ç”¨ `const`ã€‚ åŸºæœ¬åŸåˆ™å°±æ˜¯å¦‚æœä¸€ä¸ªå˜é‡ä¸éœ€è¦å¯¹å®ƒå†™å…¥ï¼Œé‚£ä¹ˆå…¶å®ƒä½¿ç”¨è¿™äº›ä»£ç çš„äººä¹Ÿä¸èƒ½å¤Ÿå†™å…¥å®ƒä»¬ï¼Œå¹¶ä¸”è¦æ€è€ƒä¸ºä»€ä¹ˆä¼šéœ€è¦å¯¹è¿™äº›å˜é‡é‡æ–°èµ‹å€¼ã€‚ ä½¿ç”¨ `const` ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„æ¨æµ‹æ•°æ®çš„æµåŠ¨ã€‚\n> è·Ÿæ®ä½ çš„è‡ªå·±åˆ¤æ–­ï¼Œå¦‚æœåˆé€‚çš„è¯ï¼Œä¸å›¢é˜Ÿæˆå‘˜å•†è®®ä¸€ä¸‹ã€‚\n> è¿™ä¸ªæ‰‹å†Œå¤§éƒ¨åˆ†åœ°æ–¹éƒ½ä½¿ç”¨äº† `let` å£°æ˜ã€‚\n\n### 2.11 è§£æ„\n\n> `Another TypeScript` å·²ç»å¯ä»¥è§£æå…¶å®ƒ `ECMAScript 2015` ç‰¹æ€§äº†ã€‚ å®Œæ•´åˆ—è¡¨è¯·å‚è§ [the article on the Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)ã€‚ æœ¬ç« ï¼Œæˆ‘ä»¬å°†ç»™å‡ºä¸€ä¸ªç®€çŸ­çš„æ¦‚è¿°ã€‚\n\n#### 2.11.1 è§£æ„æ•°ç»„\n\n> æœ€ç®€å•çš„è§£æ„è«è¿‡äºæ•°ç»„çš„è§£æ„èµ‹å€¼äº†ï¼š\n\n```typescript\nlet input = [1, 2];\nlet [first, second] = input;\nconsole.log(first); // outputs 1\nconsole.log(second); // outputs 2\n```\n\n> è¿™åˆ›å»ºäº† `2` ä¸ªå‘½åå˜é‡ `first` å’Œ `second`ã€‚ ç›¸å½“äºä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ›´ä¸ºæ–¹ä¾¿ï¼š\n\n```typescript\nfirst = input[0];\nsecond = input[1];\n```\n\n> è§£æ„ä½œç”¨äºå·²å£°æ˜çš„å˜é‡ä¼šæ›´å¥½ï¼š\n\n```typescript\n// swap variables\n[first, second] = [second, first];\n```\n\n> ä½œç”¨äºå‡½æ•°å‚æ•°ï¼š\n\n```typescript\nfunction f([first, second]: [number, number]) {\n  console.log(first);\n  console.log(second);\n}\nf(input);\n```\n\n> ä½ å¯ä»¥åœ¨æ•°ç»„é‡Œä½¿ç”¨ `...` è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š\n\n```typescript\nlet [first, ...rest] = [1, 2, 3, 4];\nconsole.log(first); // outputs 1\nconsole.log(rest); // outputs [ 2, 3, 4 ]\n```\n\n> å½“ç„¶ï¼Œç”±äºæ˜¯ `JavaScript`, ä½ å¯ä»¥å¿½ç•¥ä½ ä¸å…³å¿ƒçš„å°¾éšå…ƒç´ ï¼š\n\n```typescript\nlet [first] = [1, 2, 3, 4];\nconsole.log(first); // outputs 1\n```\n\n> æˆ–å…¶å®ƒå…ƒç´ ï¼š\n\n```typescript\nlet [, second, , fourth] = [1, 2, 3, 4];\n```\n\n#### 2.11.2 å¯¹è±¡è§£æ„\n\n> ä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡ï¼š\n\n```typescript\nlet o = {\n  a: \"foo\",\n  b: 12,\n  c: \"bar\"\n};\nlet { a, b } = o;\n```\n\n> è¿™é€šè¿‡ `o.a and o.b` åˆ›å»ºäº† `a` å’Œ `b` ã€‚ æ³¨æ„ï¼Œå¦‚æœä½ ä¸éœ€è¦ `c` ä½ å¯ä»¥å¿½ç•¥å®ƒã€‚\n> å°±åƒæ•°ç»„è§£æ„ï¼Œä½ å¯ä»¥ç”¨æ²¡æœ‰å£°æ˜çš„èµ‹å€¼ï¼š\n\n```typescript\n({ a, b } = { a: \"baz\", b: 101 });\n```\n\n> æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ‹¬å·å°†å®ƒæ‹¬èµ·æ¥ï¼Œå› ä¸º `Javascript` é€šå¸¸ä¼šå°†ä»¥ `{` èµ·å§‹çš„è¯­å¥è§£æä¸ºä¸€ä¸ªå—ã€‚\n> ä½ å¯ä»¥åœ¨å¯¹è±¡é‡Œä½¿ç”¨ `...` è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š\n\n```typescript\nlet { a, ...passthrough } = o;\nlet total = passthrough.b + passthrough.c.length;\n```\n\n#### 2.11.3 å±æ€§é‡å‘½å\n\n> ä½ ä¹Ÿå¯ä»¥ç»™å±æ€§ä»¥ä¸åŒçš„åå­—ï¼š\n\n```typescript\nlet { a: newName1, b: newName2 } = o;\n```\n\n> è¿™é‡Œçš„è¯­æ³•å¼€å§‹å˜å¾—æ··ä¹±ã€‚ ä½ å¯ä»¥å°† `a: newName1` è¯»åš \"`a` ä½œä¸º `newName1`\"ã€‚ æ–¹å‘æ˜¯ä»å·¦åˆ°å³ï¼Œå¥½åƒä½ å†™æˆäº†ä»¥ä¸‹æ ·å­ï¼š\n\n```typescript\nlet newName1 = o.a;\nlet newName2 = o.b;\n```\n\n> ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œè¿™é‡Œçš„å†’å·ä¸æ˜¯æŒ‡ç¤ºç±»å‹çš„ã€‚ å¦‚æœä½ æƒ³æŒ‡å®šå®ƒçš„ç±»å‹ï¼Œ ä»ç„¶éœ€è¦åœ¨å…¶åå†™ä¸Šå®Œæ•´çš„æ¨¡å¼ã€‚\n\n```typescript\nlet { a, b }: { a: string; b: number } = o;\n```\n\n#### 2.11.4 é»˜è®¤å€¼\n\n> é»˜è®¤å€¼å¯ä»¥è®©ä½ åœ¨å±æ€§ä¸º `undefined` æ—¶ä½¿ç”¨ç¼ºçœå€¼ï¼š\n\n```typescript\nfunction keepWholeObject(wholeObject: { a: string; b?: number }) {\n  let { a, b = 1001 } = wholeObject;\n}\n```\n\n> ç°åœ¨ï¼Œå³ä½¿ `b` ä¸º `undefined` ï¼Œ `keepWholeObject` å‡½æ•°çš„å˜é‡ `wholeObject` çš„å±æ€§ `a` å’Œ `b` éƒ½ä¼šæœ‰å€¼ã€‚\n\n#### 2.11.5 å‡½æ•°å£°æ˜\n\n> è§£æ„ä¹Ÿèƒ½ç”¨äºå‡½æ•°å£°æ˜ã€‚ çœ‹ä»¥ä¸‹ç®€å•çš„æƒ…å†µï¼š\n\n```typescript\ntype C = { a: string; b?: number };\nfunction f({ a, b }: C): void {\n  // ...\n}\n```\n\n> ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æ›´å¤šçš„æ˜¯æŒ‡å®šé»˜è®¤å€¼ï¼Œè§£æ„é»˜è®¤å€¼æœ‰äº›æ£˜æ‰‹ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦åœ¨é»˜è®¤å€¼ä¹‹å‰è®¾ç½®å…¶æ ¼å¼ã€‚\n\n```typescript\nfunction f({ a = \"\", b = 0 } = {}): void {\n  // ...\n}\nf();\n```\n\n> ä¸Šé¢çš„ä»£ç æ˜¯ä¸€ä¸ªç±»å‹æ¨æ–­çš„ä¾‹å­ï¼Œå°†åœ¨æœ¬æ‰‹å†Œåæ–‡ä»‹ç»ã€‚\n> å…¶æ¬¡ï¼Œä½ éœ€è¦çŸ¥é“åœ¨è§£æ„å±æ€§ä¸Šç»™äºˆä¸€ä¸ªé»˜è®¤æˆ–å¯é€‰çš„å±æ€§ç”¨æ¥æ›¿æ¢ä¸»åˆå§‹åŒ–åˆ—è¡¨ã€‚ è¦çŸ¥é“ `C` çš„å®šä¹‰æœ‰ä¸€ä¸ª `b` å¯é€‰å±æ€§ï¼š\n\n```typescript\nfunction f({ a, b = 0 } = { a: \"\" }): void {\n  // ...\n}\nf({ a: \"yes\" }); // ok, default b = 0\nf(); // ok, default to {a: \"\"}, which then defaults b = 0\nf({}); // error, 'a' is required if you supply an argument\n```\n\n> è¦å°å¿ƒä½¿ç”¨è§£æ„ã€‚ ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå°±ç®—æ˜¯æœ€ç®€å•çš„è§£æ„è¡¨è¾¾å¼ä¹Ÿæ˜¯éš¾ä»¥ç†è§£çš„ã€‚ å°¤å…¶å½“å­˜åœ¨æ·±å±‚åµŒå¥—è§£æ„çš„æ—¶å€™ï¼Œå°±ç®—è¿™æ—¶æ²¡æœ‰å †å åœ¨ä¸€èµ·çš„é‡å‘½åï¼Œé»˜è®¤å€¼å’Œç±»å‹æ³¨è§£ï¼Œä¹Ÿæ˜¯ä»¤äººéš¾ä»¥ç†è§£çš„ã€‚ è§£æ„è¡¨è¾¾å¼è¦å°½é‡ä¿æŒå°è€Œç®€å•ã€‚ ä½ è‡ªå·±ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è§£æ„å°†ä¼šç”Ÿæˆçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚\n\n#### 2.11.6 å±•å¼€\n\n> å±•å¼€æ“ä½œç¬¦æ­£ä¸è§£æ„ç›¸åã€‚ å®ƒå…è®¸ä½ å°†ä¸€ä¸ªæ•°ç»„å±•å¼€ä¸ºå¦ä¸€ä¸ªæ•°ç»„ï¼Œæˆ–å°†ä¸€ä¸ªå¯¹è±¡å±•å¼€ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š\n\n```typescript\nlet first = [1, 2];\nlet second = [3, 4];\nlet bothPlus = [0, ...first, ...second, 5];\n```\n\n> è¿™ä¼šä»¤ `bothPlus` çš„å€¼ä¸º `[0, 1, 2, 3, 4, 5]`ã€‚ å±•å¼€æ“ä½œåˆ›å»ºäº† `first` å’Œ `second` çš„ä¸€ä»½æµ…æ‹·è´ã€‚ å®ƒä»¬ä¸ä¼šè¢«å±•å¼€æ“ä½œæ‰€æ”¹å˜ã€‚\n> ä½ è¿˜å¯ä»¥å±•å¼€å¯¹è±¡ï¼š\n\n```typescript\nlet defaults = { food: \"spicy\", price: \"$$\", ambiance: \"noisy\" };\nlet search = { ...defaults, food: \"rich\" };\n```\n\n> `search` çš„å€¼ä¸º `{ food: \"rich\", price: \"$$\", ambiance: \"noisy\" }`ã€‚ å¯¹è±¡çš„å±•å¼€æ¯”æ•°ç»„çš„å±•å¼€è¦å¤æ‚çš„å¤šã€‚ åƒæ•°ç»„å±•å¼€ä¸€æ ·ï¼Œå®ƒæ˜¯ä»å·¦è‡³å³è¿›è¡Œå¤„ç†ï¼Œä½†ç»“æœä»ä¸ºå¯¹è±¡ã€‚ è¿™å°±æ„å‘³ç€å‡ºç°åœ¨å±•å¼€å¯¹è±¡åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨ç»“å°¾å¤„è¿›è¡Œå±•å¼€çš„è¯ï¼š\n\n```typescript\nlet defaults = { food: \"spicy\", price: \"$$\", ambiance: \"noisy\" };\nlet search = { food: \"rich\", ...defaults };\n```\n\n> é‚£ä¹ˆï¼Œ`defaults` é‡Œçš„ `food` å±æ€§ä¼šé‡å†™ `food: \"rich\"`ï¼Œåœ¨è¿™é‡Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚\n> å¯¹è±¡å±•å¼€è¿˜æœ‰å…¶å®ƒä¸€äº›æ„æƒ³ä¸åˆ°çš„é™åˆ¶ã€‚ é¦–å…ˆï¼Œå®ƒä»…åŒ…å«å¯¹è±¡ [è‡ªèº«çš„å¯æšä¸¾å±æ€§](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)ã€‚ å¤§ä½“ä¸Šæ˜¯è¯´å½“ä½ å±•å¼€ä¸€ä¸ªå¯¹è±¡å®ä¾‹æ—¶ï¼Œä½ ä¼šä¸¢å¤±å…¶æ–¹æ³•ï¼š\n\n```typescript\nclass C {\n  p = 12;\n  m() {}\n}\nlet c = new C();\nlet clone = { ...c };\nclone.p; // ok\nclone.m(); // error!\n```\n\n> å…¶æ¬¡ï¼Œ`TypeScript` ç¼–è¯‘å™¨ä¸å…è®¸å±•å¼€æ³›å‹å‡½æ•°ä¸Šçš„ç±»å‹å‚æ•°ã€‚ è¿™ä¸ªç‰¹æ€§ä¼šåœ¨ `TypeScript` çš„æœªæ¥ç‰ˆæœ¬ä¸­è€ƒè™‘å®ç°ã€‚\n\n## ä¸‰ã€æ¥å£\n\n### 3.1 å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\n\n```typescript\ninterface LabelledValue {\n  label: string;\n}\nfunction printLabel(labelledObj: LabelledValue) {\n  console.log(labelledObj.label);\n}\nlet myObj = { size: 10, label: \"size 10 Object\" };\nprintLabel(myObj);\n```\n\n### 3.2 å¯é€‰å±æ€§\n\n```typescript\ninterface SquareConfig {\n  color?: string;\n  width?: number;\n}\nfunction createConfig(config: SquareConfig): { color: string; area: number } {\n  let newSquare = { color: \"white\", area: 100 };\n  if (config.color) {\n    newSquare.color = config.color;\n  }\n  if (config.width) {\n    newSquare.area = config.width * config.width;\n  }\n  return newSquare;\n}\nlet mySquare = createConfig({ color: \"black\", width: 20 });\nconsole.log(mySquare);\n```\n\n### 3.3 åªè¯»å±æ€§\n\n```typescript\ninterface Point {\n  readonly x: number;\n  readonly y: number;\n}\nlet p1: Point = { x: 10, y: 20 };\np1.x = 5; // error! å› ä¸ºå±æ€§æ˜¯åªè¯»çš„\n```\n\n### 3.4 é¢å¤–çš„å±æ€§æ£€æŸ¥\n\n> é—®é¢˜ï¼šå°†\" _å¯é€‰å±æ€§_ \"ä¸\" `option bags` \"æ¨¡å¼ç›¸ç»“åˆè€Œå¼•å‘\n\n```typescript\ninterface SquareConfig {\n  color?: string;\n  width?: number;\n}\nfunction createConfig(config: SquareConfig): { color: string; area: number } {\n  let newSquare = { color: \"white\", area: 100 };\n  if (config.color) {\n    newSquare.color = config.color;\n  }\n  if (config.width) {\n    newSquare.area = config.width * config.width;\n  }\n  return newSquare;\n}\n```\n\n> `let mySquare = createConfig({ colour: \"red\", width: 100 }); //æŠ¥é”™`\n\n- è§£å†³æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨ç±»å‹æ–­è¨€\n\n```typescript\nlet mySquare = createConfig({ width: 100, opacity: 0.5 } as SquareConfig);\n```\n\n- è§£å†³æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å(æœ€ä½³æ–¹æ¡ˆ)\n\n```typescript\ninterface _SquareConfig {\n  color?: string;\n  width?: number;\n  [propName: string]: any;\n}\n```\n\n- è§£å†³æ–¹æ¡ˆä¸‰ï¼šå˜é‡èµ‹å€¼\n\n### 3.5 å‡½æ•°ç±»å‹\n\n#### 3.5.1 å‡½æ•°ç±»å‹\n\n```typescript\ninterface SearchFunc {\n  (source: string, subString: string): boolean;\n}\nlet mySearch: SearchFunc;\nmySearch = function (source: string, subString: string) {\n  let result = source.search(subString);\n  return result > -1;\n};\n```\n\n#### 3.5.2 å‡½æ•°ç±»å‹\n\n```typescript\nlet add: (baseValue: number, increment: number) => number = (x, y) => x + y;\n\nlet add2 = (x: number, y: number): number => x + y;\n\nlet buildNameFun: (fname: string, ...rest: Array<string>) => string = (firstName: string, ...restOfName: Array<string>) => `${firstName}, ${restOfName.join(\" \")}`;\n\nlet fn = (a: number, b: number): number => a + b;\n```\n\n#### 3.5.3 å‡½æ•°ç±»å‹\n\n```typescript\ninterface func {\n  (x: string, y: string): boolean;\n}\nlet func: func = (x: string, y: string) => {\n  return x.search(y) > -1;\n};\n```\n\n### 3.6 å¯ç´¢å¼•ç±»å‹\n\n- ä¾‹å¦‚ï¼š`a[10]` æˆ– `ageMap[\"daniel\"]`\n- å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª ç´¢å¼•ç­¾åï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹\n\n```typescript\ninterface StringArray {\n  [index: number]: string;\n}\nlet myArray: StringArray;\nmyArray = [\"Bob\", \"Fred\"];\nlet myStr: string = myArray[0];\nconsole.log(myStr);\n```\n\n> `Ts` æ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸² å’Œ æ•°å­—ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚\n\n### 3.7 ç±»ç±»å‹\n\n> æ¥å£æè¿°äº†ç±»çš„å…¬å…±éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç±»çš„å…¬æœ‰å’Œç§æœ‰ä¸¤éƒ¨åˆ†ã€‚å®ƒä¸ä¼šå¸®ä½ æ£€æŸ¥ç±»æ˜¯å¦å…·æœ‰æŸäº›ç§æœ‰æˆå‘˜\n\n```typescript\ninterface ClockInterface {\n  currentTime: Date;\n  setTime(d: Date); // åœ¨æ¥å£ä¸­æè¿°çš„æ–¹æ³•\n}\n\nclass Clock implements ClockInterface {\n  currentTime: Date;\n  setTime(d: Date) {\n    // åœ¨ç±»ä¸­çš„å…·ä½“å®ç°\n    this.currentTime = d;\n  }\n  constructor(h: number, m: number) {}\n}\n```\n\n> å½“æ“ä½œç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»æ˜¯å…·æœ‰ä¸¤ä¸ªç±»å‹çš„ï¼š_é™æ€éƒ¨åˆ†çš„ç±»å‹_ å’Œ _å®ä¾‹çš„ç±»å‹_ã€‚\n> å½“ç”¨æ„é€ å™¨ç­¾åå»å®šä¹‰ä¸€ä¸ªæ¥å£å¹¶è¯•å›¾å®šä¹‰ä¸€ä¸ªç±»å»å®ç°è¿™ä¸ªæ¥å£æ—¶ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚\n> å› ä¸ºå½“ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£æ—¶ï¼Œåªå¯¹å…¶å®ä¾‹éƒ¨åˆ†è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚`constructor` å­˜åœ¨äºç±»çš„é™æ€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸åœ¨æ£€æŸ¥çš„èŒƒå›´å†…ã€‚\n\n- å› æ­¤åº”å½“ç›´æ¥æ“ä½œ _ç±»çš„é™æ€éƒ¨åˆ†_\n\n```typescript\ninterface err_ClockConstructor {\n  new (hour: number, minute: number);\n}\nclass err_Clock implements err_ClockConstructor {\n  currentTime: Date;\n  constructor(h: number, m: number) {}\n}\n```\n\n- ä¸‹é¢æ˜¯å®ç°å¯¹ _é™æ€ç±»å‹_ çš„æ£€æŸ¥å·¥ä½œ\n\n> å› ä¸º `createClock` çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `ClockConstructor` ç±»å‹ï¼Œåœ¨ `createClock(AnalogClock, 7, 32)` é‡Œï¼Œä¼šæ£€æŸ¥ `AnalogClock` æ˜¯å¦ç¬¦åˆæ„é€ å‡½æ•°ç­¾å\n\n```typescript\ninterface ClockConstructor {\n  new (hour: number, minute: number): ClockInterface;\n}\n\ninterface ClockInterface {\n  tick();\n}\n\nfunction createClock(ctor: ClockConstructor, hour: number, minute: number): ClockInterface {\n  return new ctor(hour, minute);\n}\n\nclass DigitalClock implements ClockInterface {\n  constructor(h: number, m: number) {}\n\n  tick() {\n    console.log(\"beep beep\");\n  }\n}\n\nclass AnalogClock implements ClockInterface {\n  constructor(h: number, m: number) {}\n\n  tick() {\n    console.log(\"tick tick\");\n  }\n}\n\nlet digital = createClock(DigitalClock, 12, 17);\nlet analog = createClock(AnalogClock, 7, 32);\nconsole.log(digital);\nconsole.log(analog);\n```\n\n### 3.8 æ¥å£ç»§æ‰¿\n\n- å’Œç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç›¸äº’ç»§æ‰¿ã€‚å¯ä»¥çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—é‡Œã€‚\n\n```typescript\ninterface Shape {\n  color: string;\n}\n\ninterface Square extends Shape {\n  sideLength: number;\n}\n\nlet square = <Square>{};\nsquare.color = \"blue\";\nsquare.sideLength = 10;\n```\n\n- ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œåˆ›å»ºå‡ºå¤šä¸ªæ¥å£çš„åˆæˆæ¥å£\n\n```typescript\ninterface Shape {\n  color: string;\n}\n\ninterface PenStroke {\n  penWidth: number;\n}\n\ninterface Square extends Shape, PenStroke {\n  sideLength: number;\n}\n\nlet square = <Square>{};\nsquare.color = \"blue\";\nsquare.sideLength = 10;\nsquare.penWidth = 5.0;\n```\n\n- ç›®çš„: `=>` çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­\n\n```typescript\ninterface Lamp {\n  lampOn(): void;\n\n  lampOff(): void;\n}\n\ninterface wx {\n  wxNumber: number;\n\n  showWxNumber(): string;\n}\n\ninterface Photo extends Lamp, wx {\n  photo(): string;\n}\n\nclass HuaWeiPhone implements Photo {\n  public wxNumber: number;\n\n  photo(): string {\n    return \"åä¸ºæ‰‹æœº\";\n  }\n\n  lampOn(): void {}\n\n  lampOff(): void {}\n  constructor(wxNumber: number) {\n    this.wxNumber = wxNumber;\n  }\n\n  showWxNumber(): string {\n    return \"æˆ‘çš„å¾®ä¿¡å·ï¼š123\";\n  }\n}\nlet huaWeiPhone = new HuaWeiPhone(12345678910);\nconsole.log(huaWeiPhone.showWxNumber());\nconsole.log(huaWeiPhone.photo());\n```\n\n### 3.9 æ··åˆç±»å‹\n\n> ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åšä¸ºå‡½æ•°å’Œå¯¹è±¡ä½¿ç”¨ï¼Œå¹¶å¸¦æœ‰é¢å¤–çš„å±æ€§\n\n```typescript\ninterface Counter {\n  (start: number): string;\n\n  interval: number;\n\n  reset(): void;\n}\n\nfunction getCounter(): Counter {\n  let counter = <Counter>function (start: number) {\n    // return start + 'string';\n  };\n  counter.interval = 123;\n  counter.reset = function () {};\n  return counter;\n}\n\nlet c = getCounter();\nc(10);\nc.interval = 5.0;\nc.reset();\n```\n\n### 3.10 æ¥å£ç»§æ‰¿ç±»\n\n1. å½“æ¥å£ç»§æ‰¿äº†ä¸€ä¸ªç±»ç±»å‹æ—¶ï¼Œå®ƒä¼šç»§æ‰¿ç±»çš„æˆå‘˜ä½†ä¸åŒ…æ‹¬å…¶å®ç°ã€‚\n2. å°±å¥½åƒæ¥å£å£°æ˜äº†æ‰€æœ‰ç±»ä¸­å­˜åœ¨çš„æˆå‘˜ï¼Œä½†å¹¶æ²¡æœ‰æä¾›å…·ä½“å®ç°ä¸€æ ·ã€‚\n3. æ¥å£åŒæ ·ä¼šç»§æ‰¿åˆ°ç±»çš„ `private` å’Œ `protected` æˆå‘˜ã€‚\n4. è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢«è¿™ä¸ªç±»æˆ–å…¶å­ç±»æ‰€å®ç°( `implement` )ã€‚\n5. å½“ä½ æœ‰ä¸€ä¸ªåºå¤§çš„ç»§æ‰¿æ¥å£æ—¶è¿™å¾ˆæœ‰ç”¨ï¼Œä½†è¦æŒ‡å‡ºçš„æ˜¯ä½ çš„ä»£ç åªåœ¨å­ç±»æ‹¥æœ‰ç‰¹å®šå±æ€§æ—¶èµ·ä½œç”¨ã€‚è¿™ä¸ªå­ç±»é™¤äº†ç»§æ‰¿è‡³åŸºç±»å¤–ä¸åŸºç±»æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚\n\n```typescript\nclass Control {\n  private state: any;\n}\n\ninterface SelectableControl extends Control {\n  select(): void;\n}\n\nclass Button extends Control implements SelectableControl {\n  select(): void {}\n}\n\nclass TextBox extends Control {\n  select(): void {}\n}\n\n// é”™è¯¯ï¼š\"Image\"ç±»å‹ç¼ºå°‘\"state\"å±æ€§\nclass Image implements SelectableControl {\n  select(): void {}\n}\nclass Location {}\n```\n\n> åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`SelectableControl` åŒ…å«äº† `Control` çš„æ‰€æœ‰æˆå‘˜ã€‚åŒ…æ‹¬ç§æœ‰æˆå‘˜ `state`ã€‚å› ä¸º `state` æ˜¯ç§æœ‰æˆå‘˜ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿæ˜¯ `Control` çš„å­ç±»ä»¬æ‰èƒ½å®ç° `SelectableControl` æ¥å£ï¼Œå› ä¸ºåªæœ‰ `Control` çš„å­ç±»æ‰èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå£°æ˜äº `Control` çš„ç§æœ‰æˆå‘˜ `state`ï¼Œè¿™å¯¹ç§æœ‰æˆå‘˜çš„å…¼å®¹æ€§æ˜¯å¿…éœ€çš„ã€‚\n> åœ¨ `Control` ç±»å†…éƒ¨ï¼Œæ˜¯å…è®¸é€šè¿‡ `SelectableControl` çš„å®ä¾‹æ¥è®¿é—®ç§æœ‰æˆå‘˜ `state` çš„ã€‚å®é™…ä¸Šï¼Œ`SelectableControl` æ¥å£å’Œæ‹¥æœ‰ `select` æ–¹æ³•çš„ `Control` ç±»æ˜¯ä¸€æ ·çš„ã€‚`Button` å’Œ `TextBox` ç±»æ˜¯ `SelectableControl` çš„å­ç±»(å› ä¸ºå®ƒä»¬éƒ½ç»§æ‰¿è‡ª `Control` å¹¶æœ‰ `select` æ–¹æ³•ï¼Œä½† `Image` å’Œ `Location` ç±»å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚)\n\n### 3.11 æ¥å£ç»§æ‰¿æ¥å£\n\n> ç›®çš„: `=>` çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­\n\n```typescript\ninterface Lamp {\n  lampOn(): void;\n  lampOff(): void;\n}\ninterface wx {\n  wxNumber: number;\n  showWxNumber(): string;\n}\n\ninterface Photo extends Lamp, wx {\n  photo(): string;\n}\n\nclass HuaWeiPhone implements Photo {\n  public wxNumber: number;\n  photo(): string {\n    return \"åä¸ºæ‰‹æœº\";\n  }\n  lampOn() {}\n  lampOff() {}\n  constructor(wxNumber: number) {\n    this.wxNumber = wxNumber;\n  }\n  showWxNumber() {\n    return \"æˆ‘çš„å¾®ä¿¡å·æ˜¯ï¼š123\";\n  }\n}\n\nlet huaWeiPhone = new HuaWeiPhone(13100970071);\nconsole.log(huaWeiPhone.showWxNumber());\nconsole.log(huaWeiPhone.photo());\n```\n\n### 3.12 ç±»æ¥å£å®ç°\n\n> æ‰‹æœºç±»æ˜¯ä¸€ä¸ªå¤§ç±»\n> åä¸ºæ˜¯æ‰‹æœºç±»ä¸‹çš„ä¸€ä¸ªç±»\n> åä¸ºæ‰‹æœºæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½ï¼Œç…§ç›¸æœºä¹Ÿæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½\n> å› æ­¤åä¸ºæ‰‹æœºå’Œç…§ç›¸æœºçš„å…¬å…±ç‰¹æ€§å°±æ˜¯æ‹ç…§å’Œé—ªå…‰ç¯\n> æ‰€ä»¥é€šè¿‡å…³é”®å­— `implements` æ¥æ ‡è¯†æå–å‡ºæ¥çš„æ¥å£\n\n```typescript\n// æ‹ç…§\ninterface Photo {\n  photo(): string;\n}\n// é—ªå…‰ç¯\ninterface Lamp {\n  lampOn(): void;\n  lampOff(): void;\n}\n\nclass Phone {}\n\nclass HuaWei extends Phone implements Photo, Lamp {\n  photo(): string {\n    return \"åä¸ºæ‹ç…§\";\n  }\n  lampOn() {}\n  lampOff() {}\n}\n\nclass DigitalCamera implements Photo, Lamp {\n  photo(): string {\n    return \"ç…§ç›¸æœºæ‹ç…§\";\n  }\n  lampOn() {}\n  lampOff() {}\n}\n```\n\n## å››ã€ç±»\n\n### 4.1 åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\n\n```typescript\nclass Gretter {\n  public gretting: string;\n  constructor(message: string) {\n    this.gretting = message;\n  }\n  public greet() {\n    return `Hello, ${this.gretting}`;\n  }\n}\n\nlet gretter: Gretter = new Gretter(\"world!\");\nconsole.log(gretter);\n```\n\n### 4.2 ç»§æ‰¿\n\n```typescript\nclass Animal {\n  name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n  move(distanceInMeters: number = 0) {\n    console.log(`${this.name} moved ${distanceInMeters}m.`);\n  }\n}\n\nclass Snake extends Animal {\n  constructor(name: string) {\n    super(name);\n  }\n  move(distanceInMeters = 5) {\n    console.log(\"Slithering...\");\n    super.move(distanceInMeters);\n  }\n}\n\nclass Horse extends Animal {\n  constructor(name: string) {\n    super(name);\n  }\n  move(distanceInMeters = 45) {\n    console.log(\"Galloping\");\n    super.move(distanceInMeters);\n  }\n}\n\nlet sam = new Snake(\"Sammy the Python\");\nlet tom: Animal = new Horse(\"Tommy the Palomino\");\n\nsam.move();\ntom.move(34);\n```\n\n### 4.3 public å…³é”®å­—\n\n> é»˜è®¤ä¸º `public`\n> åœ¨ `TypeScript` ä¸­,æˆå‘˜éƒ½é»˜è®¤ä¸º `public`\n\n```typescript\nclass Animal_public {\n  public name: string;\n  public constructor(theName: string) {\n    this.name = theName;\n  }\n  public move(distanceInMeters: number) {\n    console.log(`${this.name} moved ${distanceInMeters}m.`);\n  }\n}\n```\n\n### 4.4 private å…³é”®å­—\n\n> ç†è§£ `private`\n>\n> 1. å½“æˆå‘˜è¢«æ ‡è®°æˆ `private` æ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®\n> 2. å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª `private` æˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª `private` æˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚\n\n```typescript\nclass Animal_private {\n  private name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nconst cat = new Animal_private(\"Cat\");\n// cat.name; // é”™è¯¯ï¼š'name'æ˜¯ç§æœ‰çš„\n\nclass Animal_private_1 {\n  private name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nclass Rhino extends Animal_private_1 {\n  constructor() {\n    super(\"Rhino\");\n  }\n}\nclass Employee {\n  private name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nlet animal = new Animal_private_1(\"Goat\");\nlet rhino = new Rhino();\nlet employee = new Employee(\"Bob\");\n\nanimal = rhino;\n// animal = employee; //é”™è¯¯ï¼šAnimalä¸Employeeä¸å…¼å®¹\n```\n\n### 4.5 protected å…³é”®å­—\n\n- ç†è§£ `protected`\n\n> `protected` ä¿®é¥°ç¬¦ä¸ `private` ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼Œ`protected` æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚\n\n```typescript\nclass Person {\n  protected name: string;\n  constructor(name: string) {\n    this.name = name;\n  }\n}\nclass _Employee extends Person {\n  private department: string;\n  constructor(name: string, department: string) {\n    super(name);\n    this.department = department;\n  }\n  public getElevatorPitch() {\n    return `Hello, my name is ${this.name} and I work in ${this.department}`;\n  }\n}\nlet howard = new _Employee(\"Howard\", \"Sales\");\nconsole.log(howard.getElevatorPitch());\n// console.log(howard.name); // é”™è¯¯ï¼Œå› ä¸º name æ— æ³•åœ¨å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®\n```\n\n- æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ `protected`\n\n> è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ã€‚ä½†æ˜¯èƒ½è¢«ç»§æ‰¿ã€‚\n\n```typescript\nclass __Person {\n  protected name: string;\n  protected constructor(theName: string) {\n    this.name = theName;\n  }\n}\n// __Employee èƒ½å¤Ÿç»§æ‰¿ Person\nclass __Employee extends __Person {\n  private department: string;\n  constructor(name: string, department: string) {\n    super(name);\n    this.department = department;\n  }\n  public getElevatorPitch() {\n    return `Hello, my name is ${this.name} and I work in ${this.department}.`;\n  }\n}\nlet __howard = new __Employee(\"Howard\", \"Sales\");\n// let __join = new __Person(\"John\");// é”™è¯¯ï¼š'Person'çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„\n```\n\n### 4.6 readonly ä¿®é¥°ç¬¦\n\n- ä½ å¯ä»¥ä½¿ç”¨ `readonly` å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–\n\n```typescript\nclass Octopus {\n  readonly name: string;\n  readonly numberOfLegs: number = 8;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nlet dad = new Octopus(\"Man with the 8 strong legs\");\n// dad.name = \"Man with the 3-piece suit\";// é”™è¯¯ï¼Œnameæ˜¯åªè¯»çš„\n```\n\n- å‚æ•°å±æ€§\n\n> 1. å‚æ•°å±æ€§å¯ä»¥æ–¹ä¾¿åœ°è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜ã€‚\n> 2. å‚æ•°å±æ€§é€šè¿‡ç»™æ„é€ å‡½æ•°å‚æ•°å‰é¢æ·»åŠ ä¸€ä¸ªè®¿é—®é™å®šç¬¦æ¥å£°æ˜ã€‚\n> 3. ä½¿ç”¨ `private` é™å®šä¸€ä¸ªå‚æ•°å±æ€§ä¼šå£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼›å¯¹äº `public` å’Œ `protected` æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·ã€‚\n\n```typescript\nclass _Octopus {\n  readonly numberOfLegs: number = 9;\n  constructor(readonly name: string) {}\n}\n```\n\n### 4.7 å­˜å–å™¨ get & set\n\n> å­˜å–å™¨ æ”¯æŒ `es5+`ï¼Œä¸æ”¯æŒ `es3`\n\n1. `TypeScript` æ”¯æŒé€šè¿‡ `getters/setters` æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚\n2. æ²¡æœ‰å­˜å–å™¨çš„ä¾‹å­\n\n```typescript\nclass _Employee {\n  fullName: string;\n}\nlet _employee = new _Employee();\n_employee.fullName = \"Bob Smith\";\nif (_employee.fullName) {\n  console.log(_employee.fullName);\n}\n```\n\n3. æ‹¥æœ‰å­˜å–å™¨çš„ä¾‹å­\n\n> 1. æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹å¯†ç ï¼Œæ¥éªŒè¯ä¸€ä¸‹å­˜å–å™¨æ˜¯å¦æ˜¯å·¥ä½œçš„ã€‚å½“å¯†ç ä¸å¯¹æ—¶ï¼Œä¼šæç¤ºæˆ‘ä»¬æ²¡æœ‰æƒé™å»ä¿®æ”¹å‘˜å·¥ã€‚\n> 2. åªå¸¦æœ‰ `get` ä¸å¸¦æœ‰ `set` çš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º `readonly`ã€‚\n> 3. è¿™åœ¨ä»ä»£ç ç”Ÿæˆ `.d.ts` æ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ã€‚\n\n```typescript\nlet passcode = \"secret passcode\";\nclass Employee {\n  private _fullName: string;\n\n  get fullName(): string {\n    return this._fullName;\n  }\n\n  set fullName(newName: string) {\n    if (passcode && passcode === \"secret passcode\") {\n      this._fullName = newName;\n    } else {\n      console.log(\"Error: Unauthorized update of employee!\");\n    }\n  }\n}\nlet employee = new Employee();\nemployee.fullName = \"Bob smith\";\nif (employee.fullName) {\n  console.log(employee.fullName);\n}\n```\n\n### 4.8 é™æ€å±æ€§\n\n> æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Šã€‚\n\n```typescript\nclass Gird {\n  public static origin = { x: 0, y: 0 };\n  public calculateDistanceFromOrigin(point: { x: number; y: number }) {\n    let xDist = point.x - Gird.origin.x;\n    let yDist = point.y - Gird.origin.y;\n    return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale;\n  }\n  public constructor(public scale: number) {}\n}\nconsole.log(Gird.origin.x);\nlet grid1 = new Gird(1.0);\nlet gird2 = new Gird(5.0);\nconsole.log(grid1.calculateDistanceFromOrigin({ x: 10, y: 10 }));\nconsole.log(gird2.calculateDistanceFromOrigin({ x: 10, y: 10 }));\n```\n\n### 4.9 æŠ½è±¡ç±»\n\n1. æŠ½è±¡ç±»ä½œä¸ºå…¶ä»–æ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚\n2. ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚\n3. `abstract` å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•\n\n```typescript\nabstract class Animal {\n  abstract makeSound(): void;\n  move(): void {\n    console.log(\"roaming the earth ...\");\n  }\n}\n```\n\n4. æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚\n5. æŠ½è±¡æ–¹æ³•çš„è¯­æ³•äºæ¥å£æ–¹æ³•ç›¸ä¼¼ï¼ŒäºŒè€…éƒ½æ˜¯å®šä¹‰æ–¹æ³•ç­¾åä½†ä¸åŒ…å«æ–¹æ³•ä½“ã€‚ç„¶è€ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å« `abstract` å…³é”®å­—å¹¶ä¸”å¯ä»¥åŒ…å«è®¿é—®ä¿®é¥°ç¬¦\n\n```typescript\nabstract class Department {\n  constructor(public name: string) {}\n  printName(): void {\n    console.log(`Department name: ${this.name}`);\n  }\n  abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°\n}\nclass AccountingDepartment extends Department {\n  constructor() {\n    super(\"Accounting and Auditing\");\n  }\n  printMeeting(): void {\n    console.log(\"The Accounting Department meets each Monday at 10am.\");\n  }\n  generateReports(): void {\n    console.log(\"Generating accounting reports...\");\n  }\n}\nlet department: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»çš„å¼•ç”¨\n// department = new Departmemnt(); // é”™è¯¯ï¼Œä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹\ndepartment = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼\ndepartment.printName();\ndepartment.printMeeting();\n// department.generateReports(); // é”™è¯¯ï¼Œæ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨\n```\n\n### 4.10 é«˜çº§æŠ€å·§(æ„é€ å‡½æ•°)\n\n> å½“åœ¨ `TypeScript` é‡Œå£°æ˜äº†ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šå£°æ˜äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆå°±æ˜¯ç±»çš„å®ä¾‹ç±»å‹\n\n```typescript\nclass Greeter {\n  greeting: string;\n  constructor(message: string) {\n    this.greeting = message;\n  }\n  greet() {\n    return \"Hello,\" + this.greeting;\n  }\n}\nlet greeter: Greeter; // =>æ„æ€ï¼šGreeterç±»çš„å®ä¾‹çš„ç±»å‹æ˜¯Greeter\ngreeter = new Greeter(\"world\");\nconsole.log(greeter.greet());\n```\n\n> å¯ä»¥è®¤ä¸ºç±»å…·æœ‰ _å®ä¾‹éƒ¨åˆ†_ ä¸ _é™æ€éƒ¨åˆ†_\n\n```typescript\nclass _Greeter {\n  static standardGreeting = \"Hello, there\";\n  greeting: string;\n  greet() {\n    if (this.greeting) {\n      return \"Hello,\" + this.greeting;\n    } else {\n      return _Greeter.standardGreeting;\n    }\n  }\n}\nlet _greeter: _Greeter;\n_greeter = new _Greeter();\nconsole.log(_greeter.greet());\n```\n\n> æ­¤å¤„åˆ›å»ºäº†ä¸€ä¸ª `greeterMaker` çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¿å­˜äº†è¿™ä¸ª _ç±»_ æˆ–è€…è¯´ä¿å­˜äº† _ç±»æ„é€ å‡½æ•°_ã€‚ç„¶åä½¿ç”¨ `typeof _Greeter`ï¼Œæ„æ€æ˜¯å– `Greeter` ç±»çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ç±»å‹ã€‚æˆ–è€…æ›´ç¡®åˆ‡çš„è¯´ï¼Œ\"å‘Šè¯‰æˆ‘ `Greeter` æ ‡è¯†ç¬¦çš„ç±»å‹\"ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹åŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ã€‚\n\n```typescript\nlet _greeterMaker: typeof _Greeter = _Greeter;\n_greeterMaker.standardGreeting = \"Hey there!\";\nlet _greeter2: _Greeter = new _greeterMaker();\nconsole.log(_greeter2.greet());\n```\n\n### 4.11 é«˜çº§æŠ€å·§(æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨)\n\n> ç±»å®šä¹‰ä¼šåˆ›å»ºä¸¤ä¸ªä¸œè¥¿ï¼š_ç±»çš„å®ä¾‹ç±»å‹_ å’Œ _ä¸€ä¸ªæ„é€ å‡½æ•°_ã€‚\n> å› ä¸ºç±»å¯ä»¥åˆ›å»ºå‡ºç±»å‹ï¼Œæ‰€ä»¥èƒ½å¤Ÿåœ¨å…è®¸ä½¿ç”¨æ¥å£çš„åœ°æ–¹ä½¿ç”¨ç±»\n\n```typescript\nclass Point {\n  x: number;\n  y: number;\n}\n\ninterface Point3d extends Point {\n  z: number;\n}\n\nlet point3d: Point3d = { x: 1, y: 2, z: 4 };\n```\n\n## äº”ã€å‡½æ•°\n\n### 5.1 ä»‹ç»\n\n> å‡½æ•°æ˜¯ `JavaScript` åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚å®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ï¼Œæ¨¡æ‹Ÿå±‚ï¼Œä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚åœ¨ `TypeScript` é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ï¼Œå‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰ è¡Œä¸ºçš„åœ°æ–¹ã€‚`TypeScript` ä¸º `JavaScript` å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„ä½¿ç”¨ã€‚\n\n### 5.2 å‡½æ•°ç±»å‹\n\n#### 5.2.1 ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\n\n> æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå‚æ•°æ·»åŠ ç±»å‹ä¹‹åå†ä¸ºå‡½æ•°æœ¬èº«æ·»åŠ è¿”å›å€¼ç±»å‹ã€‚\n\n> `TypeScript` èƒ½å¤Ÿæ ¹æ®è¿”å›è¯­å¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸çœç•¥å®ƒã€‚\n\n```typescript\nfunction add(x: number, y: number): number {\n  return x + y;\n}\n\nlet myAdd = function (x: number, y: number): number {\n  return x + y;\n};\n```\n\n#### 5.2.2 ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\n\n```typescript\nlet myAdd1: (x: number, y: number) => number = function (x: number, y: number): number {\n  return x + y;\n};\n```\n\n> å‡½æ•°ç±»å‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š_å‚æ•°ç±»å‹_ å’Œ _è¿”å›å€¼ç±»å‹_ã€‚å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æ˜¯éœ€è¦çš„ã€‚æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚\n\n> 1. åªè¦å‚æ•°ç±»å‹æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„å‡½æ•°ç±»å‹ï¼Œè€Œä¸åœ¨ä¹å‚æ•°åæ˜¯å¦æ­£ç¡®ã€‚\n> 2. ç¬¬äºŒéƒ¨åˆ†æ˜¯è¿”å›å€¼ç±»å‹ã€‚å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹é—´ä½¿ç”¨ `=>` ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚ å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸º `void`,è€Œä¸èƒ½ç•™ç©ºã€‚\n\n> å‡½æ•°çš„ç±»å‹åªæ˜¯ç”±å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç»„æˆçš„ã€‚å‡½æ•°ä¸­ä½¿ç”¨çš„æ•è·å˜é‡ä¸ä¼šä½“ç°åœ¨ç±»å‹é‡Œã€‚å®é™…ä¸Šï¼Œè¿™äº›å˜é‡æ˜¯å‡½æ•°çš„éšè—çŠ¶æ€å¹¶ä¸æ˜¯ç»„æˆ `API` çš„ä¸€éƒ¨åˆ†ã€‚\n\n- æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š\n\n```typescript\nlet myAdd2: (baseValue: number, increment: number) => number = function (x: number, y: number): number {\n  return x + y;\n};\n```\n\n#### 5.2.3 æ¨æ–­ç±»å‹\n\n> åœ¨å°è¯•ä¸‹é¢è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹ã€‚è¿™å«åšï¼š\"æŒ‰ä¸Šä¸‹æ–‡å½’ç±»\"ï¼Œæ˜¯ç±»å‹æ¨è®ºçš„ä¸€ç§ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä¸ºç¨‹åºæŒ‡å®šç±»å‹ã€‚\n\n```typescript\n// myAdd has the full function type\nlet myAdd3 = function(x: number, y: number): number { return x + y };\n// The parameters `x` and `y` have the type number\nlet myAdd4: (baseValue: number, increment: number) =number = function (x, y) {\n  return x + y;\n};\n```\n\n### 5.3 å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\n\n> `TypeScript` é‡Œçš„æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æ˜¯å¿…é¡»çš„ã€‚è¿™ä¸æ˜¯æŒ‡ä¸èƒ½ä¼ é€’ `null` æˆ– `undefined` ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯è¯´ç¼–è¯‘å™¨æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºæ¯ä¸ªå‚æ•°éƒ½ä¼ å…¥äº†å€¼ã€‚ç¼–è¯‘å™¨è¿˜ä¼šå‡è®¾åªæœ‰è¿™äº›å‚æ•°ä¼šè¢«ä¼ é€’è¿›å‡½æ•°ã€‚\n\n1. ç®€çŸ­åœ°è¯´ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¸ªæ•°å¿…é¡»ä¸å‡½æ•°æœŸæœ›çš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚\n\n```typescript\nfunction buildName(firstName: string, lastName: string) {\n  return firstName + \" \" + lastName;\n}\n// let result1 =  buildName(\"Bob\"); // error\n// let result2 = buildName(\"Bob\", \"Jack\", \"Sr.\"); // error\nlet result3 = buildName(\"Bob\", \"Jack\");\n```\n\n2. `JavaScript`é‡Œï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä¼ å¯ä¸ä¼ ã€‚æ²¡ä¼ å‚çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯ `undefined`ã€‚åœ¨ `TypeScript` é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°æ—è¾¹ä½¿ç”¨ `?` å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚\n3. æ³¨æ„ï¼šå¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…é€‰å‚æ•°åé¢ï¼Œä¸èƒ½æ”¾åœ¨å‰é¢\n\n```typescript\nfunction buildName1(firstName: string, lastName?: string) {\n  if (lastName) {\n    return firstName + \" \" + lastName;\n  } else {\n    return firstName;\n  }\n}\nlet result_1 = buildName1(\"Bob\");\nlet result_2 = buildName1(\"Bob\", \"Jack\");\n// let result_3 = buildName1(\"Bob\", \"Jack\", \"Sr.\"); // error\n```\n\n4. å¯ä»¥è®¾ç½®é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°\n5. åœ¨æ‰€æœ‰å¿…é¡»å‚æ•°åé¢çš„å¸¦é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸å¯é€‰å‚æ•°ä¸€æ ·ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥çœç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯é€‰å‚æ•°ä¸æœ«å°¾çš„é»˜è®¤å‚æ•°å…±äº«å‚æ•°ç±»å‹ã€‚\n\n```typescript\nfunction buildName2(firstName: string, lastName = \"Smith\") {\n  return firstName + \" \" + lastName;\n}\n```\n\n6. ä¸æ™®é€šå¯é€‰å‚æ•°å‚æ•°ä¸åŒçš„æ˜¯ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°ä¸éœ€è¦æ”¾åœ¨å¿…é¡»å‚æ•°çš„åé¢ã€‚å¦‚æœå¸¦é»˜è®¤å€¼çš„å‚æ•°å‡ºç°åœ¨å¿…é¡»å‚æ•°çš„å‰é¢ï¼Œç”¨æˆ·å¿…é¡»æ˜ç¡®çš„ä¼ å…¥ `undefined` å€¼æ¥è·å¾—é»˜è®¤å€¼ã€‚\n\n```typescript\nfunction buildName3(firstName = \"Will\", lastName: string) {\n  return firstName + \" \" + lastName;\n}\n// let result__1 = buildName3(\"Bob\"); // error\n// let result__2 = buildName3(\"Bob\", \"Jack\", \"Sr.\"); // error\nlet result__3 = buildName3(\"Bob\", \"Jack\");\nlet result__4 = buildName3(undefined, \"Jack\");\n```\n\n### 5.4 å‰©ä½™å‚æ•°\n\n> å¿…è¦å‚æ•°ï¼Œé»˜è®¤å‚æ•° å’Œ å¯é€‰å‚æ•° æœ‰ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬è¡¨ç¤ºæŸä¸€ä¸ªå‚æ•°ã€‚æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ è¿›æ¥ã€‚åœ¨ `JavaScript` é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ `arguments` æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚åœ¨ `TypeScript` é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œ\n\n```typescript\nfunction buildName(firstName: string, ...restOfName: string[]) {\n  return firstName + \" \" + restOfName.join(\" \");\n}\n\nlet employeeName = buildName(\"Jose\", \"Smith\", \"Bob\", \"Alice\");\n```\n\n> å‰©ä½™å‚æ•°ä¼šè¢«å½“ä½œä¸ªæ•°ä¸é™çš„å¯é€‰å‚æ•°ã€‚å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»ºå‚æ•°æ•°ç»„ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å·åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚\n\n```typescript\nfunction buildName1(firstName: string, ...restOfName: string[]) {\n  return firstName + \" \" + restOfName.join(\" \");\n}\n\nlet buildNameFun: (fName: string, ...rest: string[]) => string = buildName1;\n```\n\n> `this` å‚æ•°ã€‚åœ¨ä½¿ç”¨äº† `--noImplicitThis` æ ‡è®°ä¹‹åï¼Œ`this` ç±»å‹å¯èƒ½ä¼šæ˜¯ `any`ã€‚æ­¤æ—¶éœ€è¦æä¾›ä¸€ä¸ªæ˜¾ç¤ºçš„ `this` å‚æ•°ã€‚\n\n```typescript\ninterface Card {\n  suit: string;\n  card: number;\n}\n\ninterface Deck {\n  suits: string[];\n  cards: number[];\n\n  createCardPicker(this: Deck): () => Card;\n}\n\nlet deck: Deck = {\n  suits: [\"hearts\", \"spades\", \"clubs\", \"diamonds\"],\n  cards: Array(52),\n  createCardPicker(): (this: Deck) => Card {\n    return () => {\n      let pickedCard = Math.floor(Math.random() * 52);\n      let pickedSuit = Math.floor(pickedCard / 13);\n\n      return { suit: this.suits[pickedSuit], card: pickedCard % 13 };\n    };\n  }\n};\nlet cardPicker = deck.createCardPicker();\nlet pickedCard = cardPicker();\nconsole.log(`card: ${pickedCard.card} of ${pickedCard.suit}`);\n```\n\n## å…­ã€æ³›å‹\n\n### 6.1 ä»‹ç»\n\n> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ `API`ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚\n> åœ¨åƒ `C#` å’Œ `Java` è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `æ³›å‹` æ¥åˆ›å»ºå¯é‡ç”¨ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚\n> é™¤äº†æ³›å‹æ¥å£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºæ³›å‹ç±»ã€‚æ³¨æ„ï¼Œæ— æ³•åˆ›å»ºæ³›å‹æšä¸¾å’Œæ³›å‹å‘½åç©ºé—´ã€‚\n\n### 6.2 æ³›å‹ä¹‹ hello world\n\n> åˆ›å»ºä¸€ä¸ª `identity` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä»»ä½•ä¼ å…¥å®ƒçš„å€¼ã€‚\n\n- å¦‚æœä¸ä½¿ç”¨æ³›å‹ï¼Œå‡½æ•°å¯èƒ½æ˜¯ï¼š\n\n```typescript\nfunction identity(arg: number): number {\n  return arg;\n}\n```\n\n- ä¹Ÿå¯ä»¥ä½¿ç”¨ `any` ç±»å‹å®šä¹‰å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ä¼ å…¥çš„ç±»å‹ä¸è¿”å›çš„ç±»å‹ä¸ç›¸åŒã€‚\n\n```typescript\nfunction identity1(arg: any): any {\n  return arg;\n}\n```\n\n> å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿è¿”å›å€¼çš„ç±»å‹ä¸ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚\n\n- è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»å‹å˜é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œåªèƒ½ç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ã€‚\n\n```typescript\nfunction identity2<T>(arg: T): T {\n  return arg;\n}\n```\n\n- ä½¿ç”¨æ–¹å¼ä¸€ï¼šä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç±»å‹å‚æ•°\n\n```typescript\nlet output = identity2<string>(\"myString\");\n```\n\n- ä½¿ç”¨æ–¹å¼äºŒ(æ›´æ™®é)ï¼šåˆ©ç”¨äº†ç±»å‹æ¨è®º-å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®š `T` çš„ç±»å‹ã€‚\n\n```typescript\nlet output2 = identity2(\"myString\");\n```\n\n### 6.3 ä½¿ç”¨æ³›å‹å˜é‡\n\n> ä½¿ç”¨æ³›å‹åˆ›å»ºåƒ `identity` è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨è¦æ±‚ä½ åœ¨å‡½æ•°ä½“å¿…é¡»æ­£ç¡®çš„ä½¿ç”¨è¿™ä¸ªé€šç”¨çš„ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œä½ å¿…é¡»æŠŠè¿™äº›å‚æ•°å½“ä½œæ˜¯ä»»æ„æˆ–æ‰€æœ‰ç±»å‹ã€‚\n\n- å¦‚æœæˆ‘ä»¬æƒ³æ‰“å°å‡º `arg` çš„é•¿åº¦ï¼Œä¹Ÿè®¸ä¼šè¿™æ ·åšã€‚\n\n```typescript\nfunction loggingIdentity<T>(arg: T): T {\n  console.log(arg.length); // é”™è¯¯ï¼ŒT ç±»å‹ä¹Ÿè®¸ä¸ä¼šæœ‰.lengthå±æ€§\n  return arg;\n}\n```\n\n- å¦‚æœæˆ‘ä»¬åƒæ“ä½œ `T` ç±»å‹çš„æ•°ç»„\n\n```typescript\nfunction loggingIdentity<T>(arg: T[]): T[] {\n  console.log(arg.length);\n  return arg;\n}\nfunction loggingIdentity2<T>(arg: Array<T>): Array<T> {\n  console.log(arg.length);\n  return arg;\n}\n```\n\n### 6.4 æ³›å‹ç±»å‹(æ³›å‹æ¥å£)\n\n1. æ³›å‹å‡½æ•°çš„ç±»å‹å’Œéæ³›å‹å‡½æ•°çš„ç±»å‹ä¸€æ ·ï¼Œé¦–å…ˆåˆ—å‡ºç±»å‹å‚æ•°ï¼Œç±»ä¼¼äºå‡½æ•°å£°æ˜ã€‚\n\n```typescript\nfunction identity<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity: <T>(arg: T) => T = identity;\n```\n\n2. æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºç±»å‹ä¸­çš„æ³›å‹ç±»å‹å‚æ•°ä½¿ç”¨ä¸åŒçš„åç§°ï¼Œåªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ã€‚\n\n```typescript\nfunction identity1<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity1: <U>(arg: U) => U = identity;\n```\n\n3. æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰è°ƒç”¨ç­¾åçš„å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰æ³›å‹å‡½æ•°ï¼š\n\n```typescript\nfunction identity2<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity2: { <T>(arg: T): T } = identity;\n```\n\n4. è¿™å¼•å¯¼æˆ‘ä»¬å»å†™ç¬¬ä¸€ä¸ªæ³›å‹æ¥å£äº†ã€‚æˆ‘ä»¬æŠŠä¸Šé¢ä¾‹å­é‡Œçš„å¯¹è±¡å­—é¢é‡æ‹¿å‡ºæ¥åšä¸ºä¸€ä¸ªæ¥å£ï¼š\n\n```typescript\ninterface GenericIdentityFn {\n  <T>(arg: T): T;\n}\n\nfunction identity3<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity3: GenericIdentityFn = identity3;\n```\n\n5. æˆ‘ä»¬å¯èƒ½æƒ³æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹(æ¯”å¦‚ï¼š`Dictionary<string>` è€Œä¸åªæ˜¯ `Dictionary`)ã€‚è¿™æ ·æ¥å£é‡Œçš„å…¶å®ƒæˆå‘˜ä¹Ÿèƒ½çŸ¥é“è¿™ä¸ªå‚æ•°çš„ç±»å‹äº†ã€‚\n\n```typescript\ninterface _GenericIdentityFn<T> {\n  (arg: T): T;\n}\n\nfunction _identity<T>(arg: T): T {\n  return arg;\n}\n\nlet _myIdentity: _GenericIdentityFn<number> = _identity;\n```\n\n> æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹åšäº†å°‘è®¸æ”¹åŠ¨ã€‚ä¸å†æè¿°æ³›å‹å‡½æ•°ï¼Œè€Œæ˜¯æŠŠéæ³›å‹å‡½æ•°ç­¾åä½œä¸ºæ³›å‹ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚\n\n> å½“æˆ‘ä»¬ä½¿ç”¨ `GenericIdentityFn` çš„æ—¶å€™ï¼Œè¿˜å¾—ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹(è¿™é‡Œæ˜¯ï¼š`number`)ï¼Œä»è€Œé”å®šä¹‹åä»£ç é‡Œä½¿ç”¨çš„ç±»å‹ã€‚\n\n> å¯¹äºæè¿°å“ªéƒ¨åˆ†ç±»å‹å±äºæ³›å‹éƒ¨åˆ†æ¥è¯´ï¼Œç†è§£ä½•æ—¶æŠŠå‚æ•° \"æ”¾åœ¨è°ƒç”¨ç­¾åé‡Œ\" å’Œä½•æ—¶ \"æ”¾åœ¨æ¥å£ä¸Š\" æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚\n\n### 6.5 æ³›å‹ç±»\n\n> æ³›å‹ç±»å’Œæ³›å‹æ¥å£å·®ä¸å¤šã€‚æ³›å‹ç±»ä½¿ç”¨ `<>` æ‹¬èµ·æ³›å‹ç±»å‹ï¼Œè·Ÿåœ¨ç±»ååé¢ã€‚ç±»åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé™æ€éƒ¨åˆ† å’Œ å®ä¾‹éƒ¨åˆ†ã€‚æ³›å‹ç±»æŒ‡çš„æ˜¯å®ä¾‹éƒ¨åˆ†çš„ç±»å‹ï¼Œæ‰€ä»¥ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹ã€‚\n\n> `enericNumber` ç±»çš„ä½¿ç”¨æ˜¯éå¸¸ç›´è§‚çš„ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå»é™åˆ¶å®ƒåªèƒ½ä½¿ç”¨ `number` ç±»å‹ã€‚\n\n- ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–å…¶å®ƒæ›´å¤æ‚çš„ç±»å‹ã€‚\n\n```typescript\nclass GenericNumber<T> {\n  zeroValue: T;\n  add: (x: T, y: T) => T;\n}\nlet myGenericNumber = new GenericNumber<number>();\nmyGenericNumber.zeroValue = 0;\nmyGenericNumber.add = (x, y) => x + y;\n```\n\n> ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚\n\n```typescript\nlet stringNumeric = new GenericNumber<string>();\nstringNumeric.zeroValue = \" \";\nstringNumeric.add = (x, y) => x + y;\nconsole.log(stringNumeric.add(stringNumeric.zeroValue, \"test\"));\n```\n\n### 6.6 æ³›å‹çº¦æŸ\n\n> æˆ‘ä»¬åº”è¯¥è®°å¾—ä¹‹å‰çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™æƒ³è¦æ“ä½œæŸç±»å‹çš„ä¸€ç»„å€¼ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ç»„å€¼å…·æœ‰ä»€ä¹ˆæ ·çš„å±æ€§ã€‚\n\n> åœ¨ `loggingIdentity` ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®¿é—® `arg` çš„ `length` å±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å¹¶ä¸èƒ½è¯æ˜æ¯ç§ç±»å‹éƒ½æœ‰ length å±æ€§ã€‚\n\n```typescript\nfunction loggingIdentity<T>(arg: T): T {\n  console.log(arg.length);\n  return arg;\n}\n```\n\n> ç›¸æ¯”ä¸æ“ä½œ `any` æ‰€æœ‰ç±»å‹ï¼Œæˆ‘ä»¬æƒ³è¦é™åˆ¶å‡½æ•°å»å¤„ç†ä»»æ„å¸¦æœ‰ `.length` å±æ€§çš„æ‰€æœ‰ç±»å‹ã€‚åªè¦ä¼ å…¥çš„ç±»å‹æœ‰è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±å…è®¸ï¼Œå°±æ˜¯è¯´è‡³å°‘åŒ…å«è¿™ä¸€å±æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ—å‡ºå¯¹äº `T` çš„çº¦æŸè¦æ±‚ã€‚\n\n> ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å« `.length` å±æ€§çš„æ¥å£ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£å’Œ `extends` å…³é”®å­—æ¥å®ç°çº¦æŸã€‚\n\n```typescript\ninterface Lengthwise {\n  length: number;\n}\n\nfunction loggingIdentity<T extends Lengthwise>(arg: T): T {\n  console.log(arg.length);\n  return arg;\n}\n```\n\n- æ­¤æ—¶è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸã€‚å› æ­¤å®ƒä¸å†é€‚ç”¨äºä»»æ„ç±»å‹ï¼š\n\n```typescript\nloggingIdentity(3); // error\n```\n\n- æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«çš„å±æ€§ã€‚\n\n```typescript\nloggingIdentity({ length: 10, value: 3 });\n```\n\n### 6.7 åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\n\n> ä½ å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¸”å®ƒè¢«å¦ä¸€ä¸ªç±»å‹å‚æ•°æ‰€çº¦æŸã€‚ä¾‹å¦‚ï¼Œç°åœ¨æˆ‘ä»¬éœ€æƒ³è¦ç”¨å±æ€§åä»å¯¹è±¡é‡Œè·å–è¿™ä¸ªå±æ€§ã€‚å¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸ªå±æ€§å­˜åœ¨äºå¯¹è±¡ `obj` ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸¤ä¸ªç±»å‹ä¹‹é—´ä½¿ç”¨çº¦æŸã€‚\n\n```typescript\nfunction getProperty<T, K extends keyof T>(obj: T, key: K) {\n  return obj[key];\n}\nlet x = { a: 1, b: 2, c: 3, d: 4 };\ngetProperty(x, \"a\");\ngetProperty(x, \"m\"); // error\n```\n\n### 6.8 åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\n\n> åœ¨ `TypeScript` ä½¿ç”¨æ³›å‹åˆ›å»ºå·¥å‚å‡½æ•°æ—¶ï¼Œéœ€è¦å¼•ç”¨æ„é€ å‡½æ•°çš„ç±»ç±»å‹ã€‚\n\n```typescript\nfunction create<T>(c: { new (): T }): T {\n  return new c();\n}\n```\n\n> ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­ï¼Œä½¿ç”¨åŸå‹å±æ€§æ¨æ–­å¹¶çº¦æŸæ„é€ å‡½æ•°ä¸ç±»å®ä¾‹çš„å…³ç³»ã€‚\n\n```typescript\nclass BeeKeeper {\n  hasMask: boolean;\n}\n\nclass ZooKeeper {\n  nameTag: string;\n}\n\nclass Animal {\n  numLegs: number;\n}\n\nclass Bee extends Animal {\n  keeper: BeeKeeper;\n}\n\nclass Lion extends Animal {\n  keeper: ZooKeeper;\n}\n\nfunction createInstance<A extends Animal>(c: new () => A): A {\n  return new c();\n}\n\ncreateInstance(Lion).keeper.nameTag;\ncreateInstance(Bee).keeper.hasMask;\n```\n\n### 6.9 å¤šä¸ªç±»å‹å˜é‡\n\n```typescript\nfunction info<S, N>(name: S, age: N): [S, N] {\n  return [name, age];\n}\n\nconsole.log(info(\"pr\", 10));\nconsole.log(info<string, number>(\"pr\", 18));\n```\n\n## ä¸ƒã€æšä¸¾\n\n### 7.1 ä»‹ç»\n\n> ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦æœ‰åå­—çš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚`TypeScript` æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚\n\n### 7.2 æ•°å­—æšä¸¾\n\n```typescript\nenum Direction {\n  Up = 1,\n  Down,\n  Left,\n  Right\n}\n```\n\n> å¦‚ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œ`Up`ä½¿ç”¨åˆå§‹åŒ–ä¸º `1`ï¼Œå…¶ä½™æˆå‘˜ä¼šä» `1` å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚ æ¢å¥è¯è¯´ï¼Œ`Direction.Up` çš„å€¼ä¸º `1`ï¼Œ`Down` å€¼ä¸º `2`ï¼Œ`Left` å€¼ä¸º `3`ï¼Œ`Right` å€¼ä¸º `4`ã€‚\n\n1. æˆ‘ä»¬è¿˜å¯ä»¥å®Œå…¨ä¸ä½¿ç”¨åˆå§‹åŒ–å™¨\n\n```typescript\nenum Direction2 {\n  Up,\n  Down,\n  Left,\n  Right\n}\n```\n\n> ç°åœ¨ï¼Œ`Up` çš„å€¼ä¸º `0`ï¼Œ`Down` çš„å€¼ä¸º `1` ç­‰ç­‰ã€‚ å½“æˆ‘ä»¬ä¸åœ¨ä¹æˆå‘˜çš„å€¼çš„æ—¶å€™ï¼Œè¿™ç§è‡ªå¢é•¿çš„è¡Œä¸ºæ˜¯å¾ˆæœ‰ç”¨å¤„çš„ï¼Œä½†æ˜¯è¦æ³¨æ„æ¯ä¸ªæšä¸¾æˆå‘˜çš„å€¼éƒ½æ˜¯ä¸åŒçš„ã€‚\n\n2. ä½¿ç”¨æšä¸¾å¾ˆç®€å•ï¼šé€šè¿‡æšä¸¾çš„å±æ€§æ¥è®¿é—®æšä¸¾æˆå‘˜ï¼Œå’Œæšä¸¾çš„åå­—æ¥è®¿é—®æšä¸¾ç±»å‹ï¼š\n\n```typescript\nenum _Response {\n  No = 0,\n  Yes = 1\n}\n\nfunction respond(recipient: string, message: _Response): void {}\n\nrespond(\"Princess Caroline\", _Response.Yes);\n```\n\n3. æ•°å­—æšä¸¾å¯ä»¥è¢«æ··å…¥åˆ°è®¡ç®—è¿‡çš„å’Œå¸¸é‡æˆå‘˜ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚\n\n> ç®€çŸ­åœ°è¯´ï¼Œä¸å¸¦åˆå§‹åŒ–å™¨çš„æšä¸¾æˆ–è€…è¢«æ”¾åœ¨ç¬¬ä¸€çš„ä½ç½®ï¼Œæˆ–è€…è¢«æ”¾åœ¨ä½¿ç”¨äº†æ•°å­—å¸¸é‡æˆ–å…¶å®ƒå¸¸é‡åˆå§‹åŒ–äº†çš„æšä¸¾åé¢ã€‚æ¢å¥è¯è¯´ï¼Œä¸‹é¢çš„æƒ…å†µæ˜¯ä¸è¢«å…è®¸çš„ï¼š\n\n```typescript\nenum E {\n  A = getSomeValue(),\n  B // error! 'A' is not constant-initialized, so 'B' needs an initializer\n}\n```\n\n### 7.3 å­—ç¬¦ä¸²æšä¸¾\n\n> å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„è¿è¡Œæ—¶çš„å·®åˆ«ã€‚åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚\n\n```typescript\nenum Direction {\n  Up = \"UP\",\n  Down = \"DOWN\",\n  Left = \"LEFT\",\n  Right = \"RIGHT\"\n}\n```\n\n> ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„ - å®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼ˆå°½ç®¡åå‘æ˜ å°„ä¼šæœ‰æ‰€å¸®åŠ©ï¼‰ï¼Œå­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚\n\n### 7.4 å¼‚æ„æšä¸¾\n\n> ä»æŠ€æœ¯çš„è§’åº¦æ¥è¯´ï¼Œæšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜ï¼Œä½†æ˜¯ä½ ä¼¼ä¹å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼š\n\n```typescript\nenum BooleanLikeHeterogeneousEnum {\n  No = 0,\n  Yes = \"YES\"\n}\n```\n\n> é™¤éä½ çœŸçš„æƒ³è¦åˆ©ç”¨ `JavaScript` è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œå¦åˆ™æˆ‘ä»¬ä¸å»ºè®®è¿™æ ·åšã€‚\n\n### 7.5 è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\n\n> æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒå¯ä»¥æ˜¯å¸¸é‡æˆ–è®¡ç®—å‡ºæ¥çš„ã€‚å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œæšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯å¸¸é‡\n\n1. å®ƒæ˜¯æšä¸¾çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸”æ²¡æœ‰åˆå§‹åŒ–å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹å®ƒè¢«èµ‹äºˆå€¼ `0`ï¼š\n\n```typescript\nenum E {\n  X\n}\n```\n\n2. å®ƒä¸å¸¦æœ‰åˆå§‹åŒ–å™¨ä¸”å®ƒä¹‹å‰çš„æšä¸¾æˆå‘˜æ˜¯ä¸€ä¸ªæ•°å­—å¸¸é‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰æšä¸¾æˆå‘˜çš„å€¼ä¸ºå®ƒä¸Šä¸€ä¸ªæšä¸¾æˆå‘˜çš„å€¼åŠ  `1`ã€‚\n\n```typescript\nenum E1 {\n  X,\n  Y,\n  Z\n}\nenum E2 {\n  A = 1,\n  B,\n  C\n}\n```\n\n3. æšä¸¾æˆå‘˜ä½¿ç”¨ å¸¸é‡æšä¸¾è¡¨è¾¾å¼è¿›è¡Œåˆå§‹åŒ–ã€‚å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ˜¯ TypeScript è¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚\n\n> å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼š\n>\n> 1. ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰\n> 2. ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰\n> 3. å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼\n> 4. ä¸€å…ƒè¿ç®—ç¬¦ +ï¼Œ-ï¼Œï½ å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼\n> 5. å¸¸é‡æšä¸¾è¡¨è¾¾å¼ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ `+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%ï¼Œ<<ï¼Œ>>ï¼Œ>>>ï¼Œ&ï¼Œ|ï¼Œ^` çš„æ“ä½œå¯¹è±¡\n\n> è‹¥å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸º `NaN` æˆ– `Infinity`ï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚\n\n> æ‰€æœ‰å…¶å®ƒæƒ…å†µçš„æšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯éœ€è¦è®¡ç®—å¾—å‡ºçš„å€¼\n\n```typescript\nenum FileAccess {\n  // constant numbers\n  None,\n  Read = 1 << 1,\n  White = 1 << 2,\n  ReadWhite = Read | White,\n  // computed number\n  G = \"123\".length\n}\n```\n\n### 7.6 è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\n\n> å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„éè®¡ç®—çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å­é›†ï¼šå­—é¢é‡æšä¸¾æˆå‘˜ã€‚å­—é¢é‡æšä¸¾æˆå‘˜æ˜¯æŒ‡ä¸å¸¦æœ‰åˆå§‹å€¼çš„å¸¸é‡æšä¸¾æˆå‘˜ï¼Œæˆ–è€…æ˜¯è¢«åˆå§‹åŒ–ä¸ºï¼š\n>\n> 1. ä»»ä½•å­—ç¬¦ä¸²å­—é¢é‡(ä¾‹å¦‚ï¼š`\"foo\", \"bar\", \"baz\"`)\n> 2. ä»»ä½•æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š`1, 100`)\n> 3. åº”ç”¨äº†ä¸€å…ƒ - ç¬¦å·çš„æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š`-1, -100`) å½“æ‰€æœ‰æšä¸¾æˆå‘˜éƒ½æ‹¥æœ‰å­—é¢é‡æšä¸¾å€¼æ—¶ï¼Œå®ƒå°±æœ‰äº†ä¸€ç§ç‰¹æ®Šçš„å«ä¹‰ã€‚\n\n> é¦–å…ˆï¼Œæšä¸¾æˆå‘˜æˆä¸ºäº†ç±»å‹ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æŸäº›æˆå‘˜åªèƒ½æ˜¯æšä¸¾æˆå‘˜çš„å€¼ï¼š\n\n```typescript\nenum ShapeKind {\n  Circle,\n  Square\n}\n\ninterface Circle {\n  kind: ShapeKind.Circle;\n  radius: number;\n}\n\ninterface Square {\n  kind: ShapeKind.Square;\n  sideLength: number;\n}\n\nlet c: Circle = {\n  kind: ShapeKind.Square, // error\n  radius: 100\n};\n```\n\n> å¦ä¸€ä¸ªå˜åŒ–æ˜¯æšä¸¾ç±»å‹æœ¬èº«å˜æˆäº†æ¯ä¸ªæšä¸¾æˆå‘˜çš„è”åˆã€‚è™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®º è”åˆç±»å‹ ã€‚ä½†ä½ åªè¦çŸ¥é“é€šè¿‡è”åˆæšä¸¾ï¼Œç±»å‹ç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå®ƒå¯ä»¥çŸ¥é“æšä¸¾é‡Œçš„å€¼çš„é›†åˆã€‚å› æ­¤ï¼Œ`TypeScript` èƒ½å¤Ÿæ•è·åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™çŠ¯çš„æ„šè ¢çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼š\n\n```typescript\nenum E {\n  Foo,\n  Bar\n}\nfunction f(x: E) {\n  if (x !== E.Foo || x !== E.Bar) {\n    // // Error! Operator '!==' cannot be applied to types 'E.Foo' and 'E.Bar'.\n  }\n}\n```\n\n> è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å…ˆæ£€æŸ¥ `x` æ˜¯å¦ä¸æ˜¯ `E.Foo`ã€‚ å¦‚æœé€šè¿‡äº†è¿™ä¸ªæ£€æŸ¥ï¼Œç„¶å `||` ä¼šå‘ç”ŸçŸ­è·¯æ•ˆæœï¼Œ\n> `if` è¯­å¥ä½“é‡Œçš„å†…å®¹ä¼šè¢«æ‰§è¡Œã€‚ ç„¶è€Œï¼Œè¿™ä¸ªæ£€æŸ¥æ²¡æœ‰é€šè¿‡ï¼Œé‚£ä¹ˆ x åˆ™åªèƒ½ä¸º `E.Foo`ï¼Œå› æ­¤æ²¡ç†ç”±å†å»æ£€æŸ¥å®ƒæ˜¯å¦ä¸º `E.Bar`ã€‚\n\n### 7.7 è¿è¡Œæ—¶çš„æšä¸¾\n\n- æšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ã€‚\n\n```typescript\nenum E {\n  X,\n  Y,\n  Z\n}\n```\n\n- å¯ä»¥ä¼ é€’ç»™å‡½æ•°ä¹ˆï¼Ÿ\n\n```typescript\nfunction f(obj: { X: number }) {\n  return obj.X;\n}\n```\n\n- æ²¡é—®é¢˜ï¼Œå› ä¸º `\"E\"` åŒ…å«ä¸€ä¸ªæ•°å€¼å‹å±æ€§ `\"X\"`\n\n```typescript\nf(E);\n```\n\n### 7.8 ç¼–è¯‘æ—¶çš„æšä¸¾\n\n> å°½ç®¡ä¸€ä¸ªæšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ï¼Œä½† `keyof` å…³é”®å­—çš„è¡Œä¸ºä¸å…¶ä½œç”¨åœ¨å¯¹è±¡ä¸Šæ—¶æœ‰æ‰€ä¸åŒã€‚åº”è¯¥ä½¿ç”¨ `keyof` `typeof` æ¥è·å–ä¸€ä¸ªè¡¨ç¤ºæšä¸¾é‡Œæ‰€æœ‰å­—ç¬¦ä¸² `key` çš„ç±»å‹ã€‚\n\n```typescript\nenum LogLevel {\n  ERROR,\n  WARN,\n  INFO,\n  DEBUG\n}\n```\n\n- ç­‰åŒäºï¼š\n\n```typescript\ntype LogLevelStrings = \"ERROR\" | \"WARN\" | \"INFO\" | \"DEBUG\";\ntype LogLevelStrings = keyof typeof LogLevel;\n```\n\n```typescript\nfunction printImportant(key: LogLevelStrings, message: string) {\n  const num = LogLevel[key];\n  if (num <= LogLevel.WARN) {\n    console.log(\"Log Level key is: \", key);\n    console.log(\"Log Level value is: \", num);\n    console.log(\"Log Level message is \", message);\n  }\n}\nprintImportant(\"ERROR\", \"This is a message\");\n```\n\n### 7.9 åå‘æ˜ å°„\n\n> é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§åä½œä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº†åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­—ã€‚\n\n- ä¾‹å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š\n\n```typescript\nenum _Enum {\n  A\n}\nlet _a = _Enum.A;\nlet _nameOfA = _Enum[_a]; // \"A\"\n```\n\n- `TypeScript` å¯èƒ½ä¼šå°†è¿™æ®µä»£ç ç¼–è¯‘ä¸ºä¸‹é¢çš„ `JavaScript`ï¼š\n\n```typescript\nvar Enum;\n(function (Enum) {\n  Enum[(Enum[\"A\"] = 0)] = \"A\";\n})(Enum || (Enum = {}));\nvar a = Enum.A;\nvar nameOfA = Enum[a]; // \"A\"\n```\n\n> ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œæšä¸¾ç±»å‹è¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ­£å‘æ˜ å°„ï¼ˆ`name -> value`ï¼‰å’Œåå‘æ˜ å°„ï¼ˆ`value -> name`ï¼‰ã€‚\n\n> å¼•ç”¨æšä¸¾æˆå‘˜æ€»ä¼šç”Ÿæˆä¸ºå¯¹å±æ€§è®¿é—®å¹¶ä¸”æ°¸è¿œä¹Ÿä¸ä¼šå†…è”ä»£ç ã€‚\n\n> è¦æ³¨æ„çš„æ˜¯ä¸ä¼šä¸ºå­—ç¬¦ä¸²æšä¸¾æˆå‘˜ç”Ÿæˆåå‘æ˜ å°„ã€‚\n\n### 7.10 const æšä¸¾\n\n> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚ä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `const` æšä¸¾ã€‚\n\n> å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ `const` ä¿®é¥°ç¬¦æ¥å®šä¹‰ã€‚\n\n```typescript\nconst enum Enum {\n  A = 1,\n  B = A * 2\n}\n```\n\n> å¸¸é‡æšä¸¾åªèƒ½ä½¿ç”¨å¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒäºå¸¸è§„çš„æšä¸¾ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«åˆ é™¤ã€‚å¸¸é‡æšä¸¾æˆå‘˜åœ¨ä½¿ç”¨çš„åœ°æ–¹ä¼šè¢«å†…è”è¿›æ¥ã€‚ ä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºï¼Œå¸¸é‡æšä¸¾ä¸å…è®¸åŒ…å«è®¡ç®—æˆå‘˜ã€‚\n\n```typescript\nconst enum Directions {\n  Up,\n  Down,\n  Left,\n  Right\n}\nlet directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];\n// ç”Ÿæˆåçš„ä»£ç ä¸ºï¼š\nvar directions1 = [0 /* Up */, 1 /* Down */, 2 /* Left */, 3 /* Right */];\n```\n\n### 7.11 å¤–éƒ¨æšä¸¾\n\n> å¤–éƒ¨æšä¸¾ ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ã€‚\n\n```typescript\ndeclare enum Enum {\n  A = 1,\n  B,\n  C = 2\n}\n```\n\n> å¤–éƒ¨æšä¸¾ å’Œ éå¤–éƒ¨æšä¸¾ ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼Œåœ¨æ­£å¸¸çš„æšä¸¾é‡Œï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•çš„æˆå‘˜è¢«å½“æˆå¸¸é‡æˆå‘˜ã€‚\n\n> å¯¹äºéå¸¸é‡çš„å¤–éƒ¨æšä¸¾è€Œè¨€ï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•æ—¶è¢«å½“åšéœ€è¦ç»è¿‡è®¡ç®—çš„ã€‚\n\n## å…«ã€ç±»å‹åˆ«å\n\n### 8.1 ç±»å‹åˆ«å\n\n1. åˆ›å»ºåˆ«åéœ€è¦ä½¿ç”¨å…³é”®å­— `type`\n2. ä½¿ç”¨åˆ«åé€šå¸¸ç”¨åœ¨æœ‰ è”åˆç±»å‹ çš„åœºæ™¯ä¸‹\n\n> æ³¨æ„ï¼šä¸è¦æ··æ·†äº† `TypeScript` ä¸­çš„ `=>`; å’Œ `ES6` ä¸­çš„ `=>` åœ¨ `TypeScript` çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ`=>` ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ã€‚(å·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‰©èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹)ï¼›åœ¨ `ES6` ä¸­ï¼Œ`=>` å«åšç®­å¤´å‡½æ•°ã€‚\n\n```typescript\ntype Name = string;\ntype ShowName = () => string;\ntype NameOrShowName = Name | ShowName;\n\nconst getName = (name: NameOrShowName) => {\n  if (typeof name === \"string\") {\n    return name;\n  }\n  return name();\n};\n\nlet showName = () => \"pr is a boy\";\nconsole.log(getName(\"pr\"));\nconsole.log(getName(showName()));\n```\n\n### 8.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\n\n```typescript\ntype EventNames = \"click\" | \"scroll\" | \"mousemove\";\nconst handleEvent: (a: Element, b: EventNames) => string = (ele: Element, event: EventNames) => {\n  return `${ele} ${event}`;\n};\nhandleEvent(document.getElementById(\"header\"), \"scroll\");\nhandleEvent(document.getElementById(\"footer\"), \"click\");\n```\n\n## ä¹ã€ç±»å‹æ¨è®º\n\n### 9.1 åŸºç¡€\n\n> åœ¨ `TypeScript` é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```typescript\nlet x = 3;\n```\n\n> å˜é‡ `x` çš„ç±»å‹è¢«æ¨æ–­ä¸ºæ•°å­—ã€‚è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚\n\n> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç±»å‹æ¨è®ºæ˜¯ç›´æ¥äº†å½“åœ°ã€‚\n\n### 9.2 æœ€ä½³é€šç”¨ç±»å‹\n\n> å½“éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹ã€‚\n\n```typescript\nlet x = [0, 1, null];\n```\n\n> ä¸ºäº†æ¨æ–­ `x` çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©: `number` å’Œ `null`ã€‚è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚\n\n> ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ç›¸åŒçš„é€šç”¨ç±»å‹ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚\n\n```typescript\nlet zoo = [new Rhino(), new Elephant(), new Snake()];\n```\n\n> è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®© `zoo` è¢«æ¨æ–­ä¸º `Animal[]` ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯ `Animal` ç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚\n\n> ä¸ºäº†æ›´æ­£ï¼Œå½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹ï¼š\n\n```typescript\nlet zoo: Animal[] = [new Rhino(), new Elephant(), new Snake()];\n```\n\n> å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³é€šç”¨ç±»å‹çš„è¯ï¼Œç±»å‹æ¨æ–­çš„ç»“æœä¸ºè”åˆæ•°ç»„ç±»å‹ï¼Œ`(Rhino | Elephant | Snake)[]`ã€‚\n\n### 9.3 ä¸Šä¸‹æ–‡å½’ç±»\n\n1. `TypeScript` ç±»å‹æ¨è®ºä¹Ÿå¯èƒ½æŒ‰ç…§ç›¸åçš„æ–¹å‘è¿›è¡Œï¼Œè¿™è¢«å«åš\"ä¸Šä¸‹æ–‡å½’ç±»\"ã€‚æŒ‰ä¸Šä¸‹æ–‡å½’ç±»ä¼šå‘ç”Ÿåœ¨è¡¨è¾¾å¼ç±»å‹ä¸æ‰€å¤„çš„ä½ç½®ç›¸å…³æ—¶ã€‚\n\n> åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­é‡Œï¼Œ`TypeScript` ç±»å‹æ£€æŸ¥å™¨ä¼šä½¿ç”¨ `Window.onmousedown` å‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚æ‰€ä»¥å®ƒèƒ½å¤Ÿæ¨æ–­å‡º `mouseEvent` å‚æ•°çš„ç±»å‹ä¸­åŒ…å«äº† `button` å±æ€§è€Œä¸åŒ…å« `kangaroo` å±æ€§ã€‚\n\n```typescript\nwindow.onmousedown = function (mouseEvent) {\n  console.log(mouseEvent.button); // <- Ok\n  console.log(mouseEvent.kangaroo); // <- error\n};\n```\n\n2. `TypeScript` è¿˜èƒ½å¤Ÿå¾ˆå¥½åœ°æ¨æ–­å‡ºå…¶å®ƒä¸Šä¸‹æ–‡ä¸­çš„ç±»å‹ã€‚\n\n```typescript\nwindow.onscroll = function (uiEvent) {\n  console.log(uiEvent.button); // Error\n};\n```\n\n> ä¸Šé¢çš„å‡½æ•°è¢«èµ‹ç»™ ` window.onscroll``ï¼ŒTypeScript ` èƒ½å¤ŸçŸ¥é“ `uiEvent` æ˜¯ `UIEvent`ï¼Œè€Œä¸æ˜¯ `MouseEventã€‚UIEvent` å¯¹è±¡ä¸åŒ…å« `button` å±æ€§ï¼Œå› æ­¤ `TypeScript` ä¼šæŠ¥é”™ã€‚\n\n1. å¦‚æœè¿™ä¸ªå‡½æ•°ä¸æ˜¯åœ¨ä¸Šä¸‹æ–‡å½’ç±»çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹å°†éšå¼çš„æˆä¸º `any` ç±»å‹ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæŠ¥é”™(é™¤éä½ å¼€å¯äº† `--noImplicitAny` é€‰é¡¹)\n\n```typescript\nconst handler = function (uiEvent) {\n  console.log(uiEvent.button); // <- Ok\n};\n```\n\n- æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç¡®åœ°ä¸ºå‡½æ•°å‚æ•°ç±»å‹èµ‹å€¼æ¥è¦†å†™ä¸Šä¸‹æ–‡ç±»å‹ï¼š\n\n```typescript\nwindow.onscroll = function (uiEvent: any) {\n  console.log(uiEvent.button); // <- Now, no error is given\n};\n```\n\n> ä½†è¿™æ®µä»£ç ä¼šæ‰“å° `undefined`ï¼Œå› ä¸º `uiEvent` å¹¶ä¸åŒ…å« `button` å±æ€§ã€‚\n\n> ä¸Šä¸‹æ–‡å½’ç±»ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚é€šå¸¸åŒ…å«å‡½æ•°çš„å‚æ•°ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜å’Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚\n\n- ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š\n\n```typescript\nfunction createZoo(): Animal[] {\n  return [new Rhino(), new Elephant(), new Snake()];\n}\n```\n\n> ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œæœ€ä½³é€šç”¨ç±»å‹æœ‰ `4` ä¸ªå€™é€‰è€…ï¼š`Animal, Rhino, Elephant, Snake`ã€‚å½“ç„¶ï¼Œ`Animal` ä¼šè¢«ä½œä¸ºæœ€ä½³é€šç”¨ç±»å‹ã€‚\n\n## åã€ç±»å‹å…¼å®¹æ€§\n\n### 10.1 ä»‹ç»\n\n> `TypeScript` é‡Œçš„å…¼å®¹æ€§æ˜¯åŸºäºç»“æ„å­ç±»å‹çš„ã€‚ç»“æ„ç±»å‹æ˜¯ä¸€ç§åªä½¿ç”¨å…¶æˆå‘˜æ¥æè¿°ç±»å‹çš„æ–¹å¼ã€‚å®ƒæ­£å¥½ä¸åä¹‰( `nominal` )ç±»å‹å½¢æˆå¯¹æ¯”ã€‚(è¯‘è€…æ³¨ï¼šåœ¨åŸºäºåä¹‰ç±»å‹çš„ç±»å‹ç³»ç»Ÿä¸­ï¼Œæ•°æ®ç±»å‹çš„å…¼å®¹æ€§æˆ–ç­‰ä»·æ€§æ˜¯é€šè¿‡æ˜ç¡®çš„å£°æ˜/æˆ–ç±»å‹çš„åç§°æ¥å†³å®šçš„ã€‚è¿™ä¸ç»“æ„æ€§ç±»å‹ç³»ç»Ÿä¸åŒï¼Œå®ƒæ˜¯åŸºäºç±»å‹çš„ç»„æˆç»“æ„ï¼Œä¸”ä¸è¦æ±‚æ˜ç¡®åœ°å£°æ˜ã€‚)çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```typescript\ninterface Named {\n  name: string;\n}\n\nclass Person {\n  name: string;\n}\n\nlet p: Named;\n// Ok, because of structural typing\np = new Person();\n```\n\n> åœ¨ä½¿ç”¨åŸºäºåä¹‰ç±»å‹çš„æ–­è¨€ï¼Œæ¯”å¦‚ `C#` æˆ– `Java` ä¸­ï¼Œè¿™æ®µä»£ç ä¼šæŠ¥é”™ï¼Œ å› ä¸º `Person` ç±»æ²¡æœ‰æ˜ç¡®è¯´æ˜å…¶å®ç°äº† `Named` æ¥å£ã€‚\n> `TypeScript` çš„ç»“æ„æ€§å­ç±»å‹æ˜¯æ ¹æ® `JavaScript` ä»£ç çš„å…¸å‹å†™æ³•æ¥è®¾è®¡çš„ã€‚ å› ä¸º `JavaScript` é‡Œå¹¿æ³›åœ°ä½¿ç”¨åŒ¿åå¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°è¡¨è¾¾å¼å’Œå¯¹è±¡å­—é¢é‡ï¼Œ æ‰€ä»¥ä½¿ç”¨ç»“æ„ç±»å‹ç³»ç»Ÿæ¥æè¿°è¿™äº›ç±»å‹æ¯”ä½¿ç”¨åä¹‰ç±»å‹ç³»ç»Ÿæ›´å¥½ã€‚\n\n### 10.2 å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\n\n> `TypeScript` çš„ç±»å‹ç³»ç»Ÿå…è®¸æŸäº›åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®è®¤å…¶å®‰å…¨æ€§çš„æ“ä½œã€‚å½“ä¸€ä¸ªç±»å‹ç³»ç»Ÿå…·æ­¤å±æ€§æ—¶ï¼Œè¢«å½“åšæ˜¯â€œä¸å¯é â€çš„ã€‚TypeScript å…è®¸è¿™ç§ä¸å¯é è¡Œä¸ºçš„å‘ç”Ÿæ˜¯ç»è¿‡ä»”ç»†è€ƒè™‘çš„ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šè§£é‡Šä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µå’Œå…¶æœ‰åˆ©çš„ä¸€é¢ã€‚\n\n### 10.3 å¼€å§‹\n\n- `TypeScript` ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„åŸºæœ¬è§„åˆ™æ˜¯ï¼Œå¦‚æœ `x` è¦å…¼å®¹ `y`ï¼Œé‚£ä¹ˆ `y` è‡³å°‘å…·æœ‰ä¸ `x` ç›¸åŒçš„å±æ€§ã€‚æ¯”å¦‚ï¼š\n\n```typescript\ninterface Named {\n  name: string;\n}\n\nlet x: Named;\n// y's inferred type is { name: string; location: string }\nlet y = { name: \"Alice\", location: \"Seattle\" };\nx = y;\n```\n\n> è¿™é‡Œè¦æ£€æŸ¥ `y` æ˜¯å¦èƒ½èµ‹å€¼ç»™ `x`ï¼Œç¼–è¯‘å™¨æ£€æŸ¥ `x` ä¸­çš„æ¯ä¸ªå±æ€§ï¼Œçœ‹æ˜¯å¦èƒ½åœ¨ `y` ä¸­ä¹Ÿæ‰¾åˆ°å¯¹åº”å±æ€§ã€‚\n\n> åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`y` å¿…é¡»åŒ…å«åå­—æ˜¯ `name` çš„ `string` ç±»å‹æˆå‘˜ã€‚`y` æ»¡è¶³æ¡ä»¶ï¼Œå› æ­¤èµ‹å€¼æ­£ç¡®ã€‚\n\n- æ£€æŸ¥å‡½æ•°å‚æ•°æ—¶ä½¿ç”¨ç›¸åŒçš„è§„åˆ™\n\n```typescript\nfunction greet(n: Named) {\n  console.log(\"Hello, \" + n.name);\n}\n\ngreet(y); // OK\n```\n\n> æ³¨æ„ï¼Œ`y` æœ‰ä¸ªé¢å¤–çš„ `location` å±æ€§ï¼Œä½†è¿™ä¸ä¼šå¼•å‘é”™è¯¯ã€‚\n> åªæœ‰ç›®æ ‡ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ `Named`ï¼‰çš„æˆå‘˜ä¼šè¢«ä¸€ä¸€æ£€æŸ¥æ˜¯å¦å…¼å®¹ã€‚\n> è¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹æ˜¯é€’å½’è¿›è¡Œçš„ï¼Œæ£€æŸ¥æ¯ä¸ªæˆå‘˜åŠå­æˆå‘˜ã€‚\n\n### 10.4 æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\n\n1. ç›¸å¯¹æ¥è®²ï¼Œåœ¨æ¯”è¾ƒåŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹çš„æ—¶å€™æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œé—®é¢˜æ˜¯å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå‡½æ•°æ˜¯å…¼å®¹çš„ã€‚\n\n- ä¸‹é¢æˆ‘ä»¬ä»ä¸¤ä¸ªç®€å•çš„å‡½æ•°å…¥æ‰‹ï¼Œå®ƒä»¬ä»…æ˜¯å‚æ•°åˆ—è¡¨ç•¥æœ‰ä¸åŒï¼š\n\n```typescript\nlet x = (a: number) => 0;\nlet y = (b: number, s: string) => 0;\n\ny = x; // <- Ok\n// x = y; // <- Error\n```\n\n> è¦æŸ¥çœ‹ `x` æ˜¯å¦èƒ½èµ‹å€¼ç»™ `y`ï¼Œé¦–å…ˆçœ‹å®ƒä»¬çš„å‚æ•°åˆ—è¡¨ã€‚ `x` çš„æ¯ä¸ªå‚æ•°å¿…é¡»èƒ½åœ¨ `y` é‡Œæ‰¾åˆ°å¯¹åº”ç±»å‹çš„å‚æ•°ã€‚æ³¨æ„çš„æ˜¯å‚æ•°çš„åå­—ç›¸åŒä¸å¦æ— æ‰€è°“ï¼Œåªçœ‹å®ƒä»¬çš„ç±»å‹ã€‚ è¿™é‡Œï¼Œ`x` çš„æ¯ä¸ªå‚æ•°åœ¨ `y` ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„å‚æ•°ï¼Œæ‰€ä»¥å…è®¸èµ‹å€¼ã€‚ç¬¬äºŒä¸ªèµ‹å€¼é”™è¯¯ï¼Œå› ä¸º `y` æœ‰ä¸ªå¿…éœ€çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ `x` å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸å…è®¸èµ‹å€¼ã€‚\n> ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆå…è®¸å¿½ç•¥å‚æ•°ï¼Œåƒä¾‹å­ `y = x` ä¸­é‚£æ ·ã€‚ åŸå› æ˜¯å¿½ç•¥é¢å¤–çš„å‚æ•°åœ¨ `JavaScript` é‡Œæ˜¯å¾ˆå¸¸è§çš„ã€‚\n> ä¾‹å¦‚ï¼Œ`Array.forEach` ç»™å›è°ƒå‡½æ•°ä¼  `3` ä¸ªå‚æ•°ï¼šæ•°ç»„å…ƒç´ ï¼Œç´¢å¼• å’Œ æ•´ä¸ªæ•°ç»„ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä¼ å…¥ä¸€ä¸ªåªä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ï¼š\n\n```typescript\nlet items = [1, 2, 3];\n// Don't force these extra arguments\nitems.forEach((item, index, array) => console.log(item));\n// Should be Ok\nitems.forEach(item => console.log(item));\n```\n\n2. ä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•å¤„ç†è¿”å›å€¼ç±»å‹ï¼Œåˆ›å»ºä¸¤ä¸ªä»…æ˜¯è¿”å›å€¼ç±»å‹ä¸åŒçš„å‡½æ•°ã€‚\n\n```typescript\nlet x1 = () => ({ name: \"Alice\" });\nlet y1 = () => ({ name: \"Alice\", location: \"Seattle\" });\n\nx1 = y1; // Ok\ny1 = x1; // Error, because x() lacks a location property\n```\n\n3. ç±»å‹ç³»ç»Ÿå¼ºåˆ¶æºå‡½æ•°çš„è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ç›®æ ‡å‡½æ•°è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚\n\n### 10.5 å‡½æ•°å‚æ•°åŒå‘åå˜\n\n> å½“æ¯”è¾ƒå‡½æ•°å‚æ•°ç±»å‹æ—¶ï¼Œåªæœ‰å½“æºå‡½æ•°å‚æ•°èƒ½å¤Ÿèµ‹å€¼ç»™ç›®æ ‡å‡½æ•°æˆ–è€…åè¿‡æ¥æ—¶æ‰èƒ½èµ‹å€¼æˆåŠŸã€‚è¿™æ˜¯ä¸ç¨³å®šçš„ï¼Œå› ä¸ºè°ƒç”¨è€…å¯èƒ½ä¼ å…¥äº†ä¸€ä¸ªå…·æœ‰æ›´ç²¾ç¡®ç±»å‹ä¿¡æ¯çš„å‡½æ•°ï¼Œä½†æ˜¯è°ƒç”¨è¿™ä¸ªä¼ å…¥çš„å‡½æ•°çš„æ—¶å€™å´ä½¿ç”¨äº†ä¸æ˜¯é‚£ä¹ˆç²¾ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œè¿™æå°‘ä¼šå‘å£°é”™è¯¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®ç°å¾ˆå¤š `JavaScript` é‡Œçš„å¸¸è§æ¨¡å¼ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nenum EventType {\n  Mouse,\n  Keyboard\n}\n\ninterface Event {\n  timestamp: number;\n}\n\ninterface MouseEvent extends Event {\n  x1: number;\n  y1: number;\n}\n\ninterface keyEvent extends Event {\n  keyCode: number;\n}\n\nfunction listenEvent(eventType: EventType, handler: (n: Event) => void) {\n  /* â€¦â€¦ */\n}\n\n// Unsound, but useful and common ä¸å®Œæ•´ï¼Œä½†æ˜¯å¸¸ç”¨å¸¸è§\nlistenEvent(EventType.Mouse, (e: MouseEvent) => console.log(`${e.x1},${e.y1}`));\n\n// Undesirable alternatives in presence of soundness å®Œæ•´ä½†æ˜¯ä¸å—æ¬¢è¿\nlistenEvent(EventType.Mouse, (e: Event) => console.log(`${(<MouseEvent>e).x1},${(<MouseEvent>e).y1}`));\n\nlistenEvent(EventType.Mouse, <(e: Event) => void>((e: MouseEvent) => console.log(`${e.x1},${e.y1}`)));\n// Still disallowed (clear error). Type safety enforced for wholly incompatible types\n// ä»ç„¶ä¸å…è®¸ï¼ˆæ¸…é™¤é”™è¯¯ï¼‰ã€‚å®Œå…¨ä¸å…¼å®¹ç±»å‹æ‰€å¼ºåˆ¶è§„å®šçš„ç±»å‹å®‰å…¨\n// listenEvent(EventType.Mouse, (e: number) => console.log(e));\n```\n\n### 10.6 å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\n\n1. æ¯”è¾ƒå‡½æ•°å…¼å®¹æ€§çš„æ—¶å€™ï¼Œå¯é€‰å‚æ•°ä¸å¿…é¡»å‚æ•°æ˜¯å¯äº’æ¢çš„ã€‚æºç±»å‹ä¸Šæœ‰é¢å¤–çš„å¯é€‰å‚æ•°ä¸æ˜¯é”™è¯¯ï¼Œç›®æ ‡ç±»å‹çš„å¯é€‰å‚æ•°åœ¨æºç±»å‹é‡Œæ²¡æœ‰å¯¹åº”çš„å‚æ•°ä¹Ÿä¸æ˜¯é”™è¯¯ã€‚\n2. å½“ä¸€ä¸ªå‡½æ•°æœ‰å‰©ä½™å‚æ•°æ—¶ï¼Œå®ƒè¢«å½“åšæ— é™ä¸ªå¯é€‰å‚æ•°ã€‚\n3. è¿™å¯¹äºç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¨³å®šçš„ï¼Œä½†ä»è¿è¡Œæ—¶çš„è§’åº¦æ¥çœ‹ï¼Œå¯é€‰å‚æ•°ä¸€èˆ¬æ¥è¯´æ˜¯ä¸å¼ºåˆ¶çš„ï¼Œå› ä¸ºå¯¹äºå¤§å¤šæ•°å‡½æ•°æ¥è¯´ç›¸å½“äºä¼ é€’äº†ä¸€äº› undefined ã€‚\n\n> æœ‰ä¸€ä¸ªå¥½çš„ä¾‹å­ï¼Œå¸¸è§çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å¹¶ç”¨å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯å¯é¢„çŸ¥çš„å‚æ•° ä½†å¯¹ç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¡®å®šçš„å‚æ•°æ¥è°ƒç”¨ï¼š\n\n```typescript\nfunction invokeLater(args: any[], callback: (...args: any[]) => void) {\n  /* ... Invoke callback with 'args' ... é€šè¿‡argsè°ƒç”¨callback */\n}\n\n// Unsound - invokeLater \"might\" provide any number of arguments\n// ä¸å¥å…¨çš„æ˜¯ - è¢«è°ƒç”¨æ—¶å€™å¯èƒ½ä¼šæä¾›ä»»æ„æ•°é‡çš„å‚æ•°\ninvokeLater([1, 2], (x, y) => console.log(x + \",\" + y));\n\n// Confusing (x and y are actually required) and unrecoverable\n// ä»¤æˆ‘ä»¬å›°æƒ‘(æ˜¯å¦éœ€è¦ x å’Œ y) å¹¶ä¸” ä¸å¯æ¢å¤\ninvokeLater([1, 2], (x?, y?) => console.log(x + \",\" + y));\n```\n\n### 10.7 å‡½æ•°é‡è½½\n\n> å¯¹äºæœ‰é‡è½½çš„å‡½æ•°ï¼Œæºå‡½æ•°çš„æ¯ä¸ªé‡è½½éƒ½è¦åœ¨ç›®æ ‡å‡½æ•°ä¸Šæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°ç­¾åã€‚è¿™ç¡®ä¿äº†ç›®æ ‡å‡½æ•°å¯ä»¥åœ¨æ‰€æœ‰æºå‡½æ•°å¯è°ƒç”¨çš„åœ°æ–¹è°ƒç”¨ã€‚\n\n### 10.8 æšä¸¾\n\n> æšä¸¾ç±»å‹ä¸æ•°å­—ç±»å‹å…¼å®¹ï¼Œå¹¶ä¸”æ•°å­—ç±»å‹ä¸æšä¸¾ç±»å‹å…¼å®¹ã€‚ä¸åŒæšä¸¾ç±»å‹ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ã€‚\n\n- æ¯”å¦‚ï¼š\n\n```typescript\nenum Status {\n  Ready,\n  Waiting\n}\n\nenum Color {\n  Red,\n  Blue,\n  Green\n}\n\nlet _status = Status.Ready;\n// _status = Color.Green; // Error\n```\n\n### 10.9 ç±»\n\n> ç±»ä¸å¯¹è±¡å­—é¢é‡å’Œæ¥å£å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼šç±»çš„é™æ€éƒ¨åˆ†å’Œå®ä¾‹éƒ¨åˆ†çš„ç±»å‹ã€‚æ¯”è¾ƒä¸¤ä¸ªç±»ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œåªæœ‰å®ä¾‹çš„æˆå‘˜ä¼šè¢«æ¯”è¾ƒã€‚é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ä¸åœ¨æ¯”è¾ƒçš„èŒƒå›´å†…ã€‚\n\n```typescript\nclass Animal {\n  feet: number;\n\n  constructor(name: string, numFeet: number, c: boolean) {}\n}\n\nclass Size {\n  feet: number;\n\n  constructor(numFeet: number) {}\n}\n\nlet a: Animal;\nlet s: Size;\na = s; //Ok\ns = a; //Ok\n\n/*  */\n```\n\n### 10.10 ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\n\n> ç±»çš„ç§æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜ä¼šå½±å“å…¼å®¹æ€§ã€‚ å½“æ£€æŸ¥ç±»å®ä¾‹çš„å…¼å®¹æ—¶ï¼Œå¦‚æœç›®æ ‡ç±»å‹åŒ…å«ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆæºç±»å‹å¿…é¡»åŒ…å«æ¥è‡ªåŒä¸€ä¸ªç±»çš„è¿™ä¸ªç§æœ‰æˆå‘˜ã€‚åŒæ ·åœ°ï¼Œè¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äºåŒ…å«å—ä¿æŠ¤æˆå‘˜å®ä¾‹çš„ç±»å‹æ£€æŸ¥ã€‚ è¿™å…è®¸å­ç±»èµ‹å€¼ç»™çˆ¶ç±»ï¼Œä½†æ˜¯ä¸èƒ½èµ‹å€¼ç»™å…¶å®ƒæœ‰åŒæ ·ç±»å‹çš„ç±»ã€‚\n\n### 10.11 æ³›å‹\n\n> å› ä¸º `TypeScript` æ˜¯ç»“æ„æ€§çš„ç±»å‹ç³»ç»Ÿï¼Œç±»å‹å‚æ•°åªå½±å“ä½¿ç”¨å…¶åšä¸ºç±»å‹ä¸€éƒ¨åˆ†çš„ç»“æœç±»å‹ã€‚\n\n- æ¯”å¦‚\n\n```typescript\ninterface Empty<T> {}\n\nlet x: Empty<number>;\nlet y: Empty<string>;\n\nx = y; // Ok, because y matches structure of x\n```\n\n> ä¸Šé¢ä»£ç é‡Œï¼Œ`x` å’Œ `y` æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬çš„ç»“æ„ä½¿ç”¨ç±»å‹å‚æ•°æ—¶ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚\n\n- æŠŠè¿™ä¸ªä¾‹å­æ”¹å˜ä¸€ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªæˆå‘˜ï¼Œå°±èƒ½çœ‹å‡ºæ˜¯å¦‚ä½•å·¥ä½œçš„äº†ã€‚\n\n```typescript\ninterface NotEmpty<T> {\n  data: T;\n}\n\nlet x1: NotEmpty<number>;\nlet y1: NotEmpty<string>;\nx1 = y1; // Errorï¼Œbecause x and y are not compatible\n```\n\n> åœ¨è¿™é‡Œï¼Œæ³›å‹ç±»å‹åœ¨ä½¿ç”¨æ—¶å°±å¥½æ¯”ä¸æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ã€‚\n\n> å¯¹äºæ²¡æŒ‡å®šæ³›å‹ç±»å‹çš„æ³›å‹å‚æ•°æ—¶ï¼Œä¼šæŠŠæ‰€æœ‰æ³›å‹å‚æ•°å½“æˆ `any` æ¯”è¾ƒã€‚ç„¶åç”¨ç»“æœç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå°±åƒä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ã€‚\n\n- æ¯”å¦‚ï¼š\n\n```typescript\nlet identity = function <T>(x: T): T {\n  // ...\n  return;\n};\nlet reverse = function <U>(y: U): U {\n  // ...\n  return;\n};\nidentity = reverse; // Ok, because (x: any) => any matches (y: any) => any\n```\n\n### 10.12 é«˜çº§ä¸»é¢˜\n\n- å­ç±»å‹å’Œèµ‹å€¼\n\n> ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†\"å…¼å®¹æ€§\"ï¼Œå®ƒåœ¨è¯­è¨€è§„èŒƒé‡Œæ²¡æœ‰å®šä¹‰ï¼Œåœ¨ `TypeScript` é‡Œï¼Œæœ‰ä¸¤ç§å…¼å®¹æ€§ï¼šå­ç±»å‹ å’Œ èµ‹å€¼ã€‚å®ƒä»¬çš„ä¸åŒç‚¹åœ¨äºï¼šèµ‹å€¼æ‰©å±•äº†å­ç±»å‹å…¼å®¹æ€§ï¼Œå¢åŠ äº†ä¸€äº›è§„åˆ™ï¼Œå…è®¸å’Œ `any` æ¥å›èµ‹å€¼ï¼Œä»¥åŠ enum å’Œå¯¹åº”æ•°å­—å€¼ä¹‹é—´çš„æ¥å›èµ‹å€¼ã€‚\n> è¯­è¨€é‡Œçš„ä¸åŒåœ°æ–¹åˆ†åˆ«ä½¿ç”¨äº†å®ƒä»¬ä¹‹ä¸­çš„æœºåˆ¶ã€‚å®é™…ä¸Šï¼Œç±»å‹å…¼å®¹æ€§æ˜¯ç”±èµ‹å€¼å…¼å®¹æ€§æ¥æ§åˆ¶çš„ï¼Œå³ä½¿åœ¨ `implements` å’Œ `extends` è¯­å¥ä¹Ÿä¸ä¾‹å¤–ã€‚\n\n## åä¸€ã€é«˜çº§ç±»å‹\n\n### 11.1 äº¤å‰ç±»å‹\n\n> äº¤å‰ç±»å‹ æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œ`Person & Serializable & Loggable` åŒæ—¶æ˜¯ `Person` å’Œ `Serializable` å’Œ `Loggable`ã€‚å°±æ˜¯è¯´è¿™ä¸ªç±»å‹çš„å¯¹è±¡åŒæ—¶æ‹¥æœ‰äº†è¿™ä¸‰ç§ç±»å‹çš„æˆå‘˜ã€‚\n> æˆ‘ä»¬å¤§å¤šæ•°æ˜¯åœ¨æ··å…¥( `mixins` )æˆ–å…¶å®ƒä¸é€‚åˆå…¸å‹é¢å‘å¯¹è±¡æ¨¡å‹çš„åœ°æ–¹çœ‹åˆ°äº¤å‰ç±»å‹çš„ä½¿ç”¨ã€‚(åœ¨ `JavaScript` é‡Œå‘ç”Ÿè¿™ç§æƒ…å†µçš„åœºåˆå¾ˆå¤šï¼)\n\n#### 11.1.1 `ReadOnly` çš„å®ç°\n\n```typescript\ntype ReadOnly<T> = {\n    readOnly [P in keyof T]: T[P];\n}\n```\n\n#### 11.1.2 `Partial` çš„å®ç°\n\n```typescript\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n```\n\n#### 11.1.3 `Pick` çš„å®ç°\n\n```typescript\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\n```\n\n#### 11.1.4 `Record` çš„å®ç°\n\n```typescript\ntype Record<K extends string, T> = {\n  [P in K]: T;\n};\n```\n\n> ä¸‹é¢æ˜¯å¦‚ä½•åˆ›å»ºæ··å…¥çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­(`\"target\": \"es5\"`):\n\n```typescript\nfunction extend<First, Second>(first: First, second: Second): First & Second {\n    const result: Partial<First & Second>= {};\n    for (const prop in first) {\n        if (first.hasOwnProperty(prop)) {\n            (<First>result)[prop] = first[prop];\n        }\n    }\n    for (const prop in second) {\n        if (second.hasOwnProperty(prop)) {\n            (<Second>result)[prop] = second[prop];\n        }\n    }\n    return <First & Second>result;\n}\n>\nclass Person {\n    constructor(public name: string) {\n    }\n}\ninterface Loggable {\n    log(name: string): void;\n}\nclass ConsoleLogger implements Loggable {\n    log(name) {\n        console.log(`Hello, I'm ${name}`)\n    }\n}\nconst jim = extend(new Person(\"Jim\"), ConsoleLogger.prototype);\nlet c = jim.log(jim.name);\nconsole.log(c);\n```\n\n### 11.2 è”åˆç±»å‹\n\n> è”åˆç±»å‹ å’Œ äº¤å‰ç±»å‹ å¾ˆæœ‰å…³è”ï¼Œä½†æ˜¯ä½¿ç”¨ä¸Šå´å®Œå…¨ä¸åŒã€‚å¶å°”ä½ ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªä»£ç åº“å¸Œæœ›ä¼ å…¥ `number` æˆ– `string` ç±»å‹çš„å‚æ•°ã€‚ä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°ï¼š\n\n```typescript\n/**\n * Takes a string and adds \"padding\" to the left.\n * If 'padding' is a string, then 'padding' is appended to the left side.\n * If 'padding' is a number, then that number of spaces is added to the left side.\n */\nfunction padLeft(value: string, padding: any) {\n  if (typeof padding === \"number\") {\n    return Array(padding + 1).join(\" \") + value;\n  }\n  if (typeof padding === \"string\") {\n    return padding + value;\n  }\n  throw new Error(`Expected string or number, got '${padding}'.`);\n}\n\npadLeft(\"Hello World\", 4);\n```\n\n> `padLeft` å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œ`padding` å‚æ•°çš„ç±»å‹æŒ‡å®šæˆäº† `any`ã€‚è¿™å°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ—¢ä¸æ˜¯ `number` ä¹Ÿä¸æ˜¯ `string` ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯ `TypeScript` å´ä¸ä¼šæŠ¥é”™ã€‚\n>\n> ```typescript\n> let indentedString = padLeft(\"Hello World\", true); // ç¼–è¯‘é˜¶æ®µé€šè¿‡ï¼Œè¿è¡Œæ—¶æŠ¥é”™ã€‚\n> ```\n\n````\n>  åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€é‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†è¿™ä¸¤ç§ç±»å‹æŠ½è±¡æˆæœ‰å±‚çº§çš„ç±»å‹ã€‚è¿™ä¹ˆåšæ˜¾ç„¶æ˜¯éå¸¸æ¸…æ™°çš„ï¼Œä½†åŒæ—¶ä¹Ÿå­˜åœ¨äº†è¿‡åº¦è®¾è®¡ã€‚`padLeft` åŸå§‹ç‰ˆæœ¬çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯å…è®¸æˆ‘ä»¬ä¼ å…¥åŸå§‹ç±»å‹ã€‚è¿™æ ·åšçš„è¯ä½¿ç”¨èµ·æ¥æ—¢ç®€å•åˆæ–¹ä¾¿ã€‚å¦‚æœæˆ‘ä»¬å°±æ˜¯æƒ³ä½¿ç”¨å·²ç»å­˜åœ¨çš„å‡½æ•°çš„è¯ï¼Œè¿™ç§æ–°çš„æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚ä»£æ›¿ `any`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ è”åˆç±»å‹ ä½œä¸º `padding` çš„å‚æ•°ã€‚\n\n\n\n```typescript\n/**\n * Takes a string and adds \"padding\" to the left.\n * If 'padding' is a string, then 'padding' is appended to the left side.\n * If 'padding' is a number, then that number of spaces is added to the left side.\n */\nfunction padLeft1(value: string, padding: string | number) {\n    // ...\n}\n\n// let indentedString1 = padLeft1(\"Hello world\", true); // errors during compilation\n````\n\n> è”åˆç±»å‹ è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚æˆ‘ä»¬ä½¿ç”¨ç«–çº¿(`|`)åˆ†éš”æ¯ä¸ªç±»å‹ï¼Œæ‰€ä»¥ `number | string | boolean` è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½æ˜¯ `number`, `string`, `boolean`\n\n```typescript\ninterface Bird {\n  fly();\n\n  lagEggs();\n}\n\ninterface Fish {\n  swim();\n\n  layEggs();\n}\n\nfunction getSmallPet(): Fish | Bird {\n  // ...\n}\nlet pet = getSmallPet();\npet.layEggs(); // <- ok\n// pet.swim(); // <- errors\n```\n\n> è¿™é‡Œçš„è”åˆç±»å‹å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ä½ å¾ˆå®¹æ˜“å°±ä¹ æƒ¯äº†ã€‚å¦‚æœä¸€ä¸ªå€¼çš„ç±»å‹æ˜¯ `A | B`ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®å®šçš„æ˜¯å®ƒåŒ…å«äº† `A` å’Œ `B` ä¸­å…±æœ‰çš„æˆå‘˜ã€‚è¿™ä¸ªä¾‹å­é‡Œï¼Œ`Bird` å…·æœ‰ä¸€ä¸ª `fly` æˆå‘˜ã€‚æˆ‘ä»¬ä¸èƒ½ç¡®å®šä¸€ä¸ª `Bird | Fish` ç±»å‹çš„å˜é‡æ˜¯å¦æœ‰ `fly` æ–¹æ³•ã€‚å¦‚æœå˜é‡åœ¨è¿è¡Œæ—¶æ˜¯ `Fish` ç±»å‹ï¼Œé‚£ä¹ˆè°ƒç”¨ `pet.fly()` å°±å‡ºé”™äº†ã€‚\n\n### 11.3 ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\n\n> è”åˆç±»å‹é€‚ç”¨äºé‚£äº›å€¼å¯ä»¥ä¸ºä¸åŒç±»å‹çš„æƒ…å†µã€‚ä½†å½“æˆ‘ä»¬æƒ³ç¡®åˆ‡åœ°äº†è§£æ˜¯å¦ä¸º `Fish` æ—¶æ€ä¹ˆåŠï¼Ÿ`JavaScript` é‡Œå¸¸ç”¨æ¥åŒºåˆ† `2` ä¸ªå¯èƒ½å€¼çš„æ–¹æ³•æ˜¯æ£€æŸ¥æˆå‘˜æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¹‹å‰æåŠçš„ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®è”åˆç±»å‹ä¸­å…±åŒæ‹¥æœ‰çš„æˆå‘˜ã€‚\n\n```typescript\ninterface Fish {\n  swim();\n  layEggs();\n}\ninterface Bird {\n  fly();\n  layEggs();\n}\nfunction getSmallPet(): Fish | Bird {\n  return;\n}\nlet pet = getSmallPet();\n```\n\n> æ¯ä¸€ä¸ªè®¿é—®çš„æˆå‘˜éƒ½ä¼šæŠ¥é”™\n\n```typescript\nif (pet.swim) {\n  pet.swim();\n} else if (pet.fly) {\n  pet.fly();\n}\n```\n\n> ä¸ºäº†è®©è¿™æ®µä»£ç å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€\n\n```typescript\nif ((<Fish>pet).swim) {\n  (<Fish>pet).swim();\n} else if ((<Bird>pet).fly) {\n  (<Bird>pet).fly();\n}\n```\n\n### 11.4 ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\n\n> è¿™é‡Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸å¾—ä¸å¤šæ¬¡ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚å‡è‹¥æˆ‘ä»¬ä¸€æ—¦æ£€æŸ¥è¿‡ç±»å‹ï¼Œå°±èƒ½åœ¨ä¹‹åçš„æ¯ä¸ªåˆ†æ”¯é‡Œæ¸…æ¥šåœ°çŸ¥é“ `pet` çš„ç±»å‹çš„è¯å°±å¥½äº†ã€‚\n\n> `TypeScript` é‡Œçš„ç±»å‹å®ˆå«æœºåˆ¶è®©å®ƒæˆä¸ºäº†ç°å®ã€‚ç±»å‹å®ˆå«å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚è¦æƒ³å®šä¹‰ä¸€ä¸ªç±»å‹å®ˆå«ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»å‹è°“è¯ï¼š\n\n```typescript\ninterface Fish {\n  swim();\n\n  layEggs();\n}\n\ninterface Bird {\n  fly();\n\n  layEggs();\n}\n\nfunction isFish(pet: Fish | Bird): pet is Fish {\n  return (<Fish>pet).swim !== undefined;\n}\n```\n\n> åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ`pet is Fish` å°±æ˜¯ç±»å‹è°“è¯ã€‚è°“è¯ä¸º `parameterName is Type` è¿™ç§å½¢å¼ï¼Œ `parameterName` å¿…é¡»æ˜¯æ¥è‡ªäºå½“å‰å‡½æ•°ç­¾åé‡Œçš„ä¸€ä¸ªå‚æ•°åã€‚\n> æ¯å½“ä½¿ç”¨ä¸€äº›å˜é‡è°ƒç”¨ `isFish` `æ—¶ï¼ŒTypeScript` ä¼šå°†å˜é‡ç¼©å‡ä¸ºé‚£ä¸ªå…·ä½“çš„ç±»å‹ï¼Œåªè¦è¿™ä¸ªç±»å‹ä¸å˜é‡çš„åŸå§‹ç±»å‹æ˜¯å…¼å®¹çš„\n> `swim` å’Œ `fly` çš„è°ƒç”¨éƒ½æ²¡æœ‰é—®é¢˜äº†\n\n```typescript\nif (isFish(pet)) {\n  pet.swim();\n} else {\n  pet.fly();\n}\n```\n\n> æ³¨æ„ `TypeScript` ä¸ä»…çŸ¥é“åœ¨ `if` åˆ†æ”¯é‡Œ `pet` æ˜¯ `Fish` ç±»å‹ï¼›å®ƒè¿˜æ¸…æ¥šåœ¨ `else` åˆ†ä¹‹é‡Œï¼Œä¸€å®šä¸æ˜¯ `Fish` ç±»å‹ï¼Œä¸€å®šæ˜¯ Bird ç±»å‹ã€‚\n\n### 11.5 typeof ç±»å‹å®ˆå«\n\n> ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è”åˆç±»å‹ä¹¦å†™ `padLeft` ä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ©ç”¨ç±»å‹æ–­è¨€æ¥å†™ï¼š\n\n```typescript\nfunction isNumber(x: any): x is number {\n  return typeof x === \"number\";\n}\n\nfunction isString(x: any): x is string {\n  return typeof x === \"string\";\n}\n\nfunction padLeft(value: string, padding: string | number) {\n  if (isNumber(padding)) {\n    return Array(padding + 1).join(\" \") + value;\n  }\n  if (isString(padding)) {\n    return padding + value;\n  }\n  throw new Error(`Expected string or number, go ${padding}.`);\n}\n```\n\n> ç„¶è€Œï¼Œå¿…é¡»è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯åŸå§‹ç±»å‹ï¼Œè¿™å¤ªç—›è‹¦äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¿…å°† `typeof x === \"number\"` æŠ½è±¡æˆä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸º `TypeScript` å¯ä»¥å°†å®ƒè¯†åˆ«ä¸ºä¸€ä¸ªç±»å‹å®ˆå«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œæ£€æŸ¥ç±»å‹äº†ã€‚\n\n```typescript\nfunction newPadLeft(value: string, padding: string | number) {\n  if (typeof padding === \"number\") {\n    return Array(padding + 1).join(\" \") + value;\n  }\n  if (typeof padding === \"string\") {\n    return padding + value;\n  }\n  throw new Error(`Expected string or number, go ${padding}.`);\n}\n```\n\n> è¿™äº› `typeof` ç±»å‹å®ˆå«åªæœ‰ä¸¤ç§å½¢å¼èƒ½è¢«è¯†åˆ«ï¼š`typeof v === \"typename\"` å’Œ `typeof v !== \"typename\"`, `\"typename\"` å¿…é¡»æ˜¯ `\"number\"`, `\"string\"`, `\"boolean\"` æˆ– `\"symbol\"`ã€‚ä½†æ˜¯ `TypeScript` å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹å®ˆå«ã€‚\n\n### 11.6 instanceof ç±»å‹å®ˆå«\n\n> `instanceof` ç±»å‹å®ˆå«æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥ç»†åŒ–ç±»å‹çš„ä¸€ç§æ–¹å¼ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å€Ÿé‰´ä¸€ä¸‹ä¹‹å‰å­—ç¬¦ä¸²å¡«å……çš„ä¾‹å­ï¼š\n\n```typescript\ninterface Padder {\n  getPaddingString(): string;\n}\n\nclass SpaceRepeatingPadder implements Padder {\n  constructor(private numSpaces: number) {}\n\n  getPaddingString() {\n    return Array(this.numSpaces + 1).join(\" \");\n  }\n}\n\nclass StringPadder implements Padder {\n  constructor(private value: string) {}\n\n  getPaddingString() {\n    return this.value;\n  }\n}\n\nfunction getRandomPadder() {\n  return Math.random() < 0.5 ? new SpaceRepeatingPadder(4) : new StringPadder(\" \");\n}\n\n// ç±»å‹ä¸º SpaceRepeatingPadder | StringPadder\nlet padder: Padder = getRandomPadder();\n\nif (padder instanceof SpaceRepeatingPadder) {\n  padder; // ç±»å‹ç»†åŒ–ä¸º 'SpaceRepeatingPadder'\n}\nif (padder instanceof StringPadder) {\n  padder; // ç±»å‹ç»†åŒ–ä¸º 'StringPadder'\n}\n```\n\n> `instanceof` çš„å³ä¾§è¦æ±‚æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ`TypeScript` å°†ç»†åŒ–ä¸º:\n\n1. æ­¤æ„é€ å‡½æ•°çš„ `prototype` å±æ€§çš„ç±»å‹ï¼Œå¦‚æœå®ƒçš„ç±»å‹ä¸ä¸º `any` çš„è¯\n2. æ ‡ç­¾ç­¾åæ‰€è¿”å›çš„ç±»å‹çš„è”åˆ\n\n> ä»¥æ­¤é¡ºåºã€‚\n\n### 11.7 å¯ä¸º null çš„ç±»å‹\n\n> `TypeScript` å…·æœ‰ä¸¤ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œ`null` å’Œ `undefined` ï¼Œå®ƒä»¬åˆ†åˆ«å…·æœ‰å€¼ `null` å’Œ `undefined`ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å‹æ£€æŸ¥å™¨ä¼šè®¤ä¸º `null` å’Œ `undefined` å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚`null` å’Œ `undefined` æ˜¯æ‰€æœ‰å…¶å®ƒç±»å‹çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚è¿™æ„å‘³ç€ï¼Œä½ é˜»æ­¢ä¸äº†å°†å®ƒä»¬èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œå°±ç®—æ˜¯ä½ æƒ³è¦é˜»æ­¢è¿™ç§æƒ…å†µä¹Ÿä¸è¡Œã€‚\n\n> `--strictNullChecks` æ ‡è®°å¯ä»¥è§£å†³æ­¤é”™è¯¯ï¼šå½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åŒ…å« `null` æˆ– `undefined`ã€‚\n\n- ä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ˜ç¡®çš„åŒ…å«å®ƒä»¬ï¼š```typescript\n  let s = \"foo\";\n  s = null; // --strictNullChecks æ¨¡å¼ä¸‹ é”™è¯¯ï¼Œ 'null' ä¸èƒ½èµ‹å€¼ç»™ 'string'\n  let sn: string | null = \"bar\";\n  sn = null; // Ok\n  sn = undefined; // --strictNullChecks æ¨¡å¼ä¸‹ error, å› ä¸º'undefined'ä¸èƒ½èµ‹å€¼ç»™'string | null'\n\n````\n\n\n\n\n>  æ³¨æ„ï¼šæŒ‰ç…§ `JavaScript` `çš„è¯­ä¹‰ï¼ŒTypeScript` ä¼šæŠŠ `null` å’Œ `undefined` åŒºåˆ«å¯¹å¾…ã€‚\n\n\n\n> `string | null`ï¼Œ`string | undefined` å’Œ `string | undefined | null` æ˜¯ä¸åŒçš„ç±»å‹ã€‚\n\n\n\n### 11.8 å¯é€‰å‚æ•°å’Œå¯é€‰å±æ€§\n\n\n- ä½¿ç”¨äº† `--strictNullChecks` ï¼Œå¯é€‰å‚æ•°ä¼šè¢«è‡ªåŠ¨åœ°åŠ ä¸Š `| undefined`:\n\n\n\n```typescript\nfunction f(x: number, y?: number) {\n    return x + (y || 0);\n}\nf(1, 2);\nf(1);\nf(1, undefined);\nf(1, null); // error, 'null' is not assignable to 'number | undefined'\n````\n\n- å¯é€‰å±æ€§ä¹Ÿä¼šæœ‰åŒæ ·çš„å¤„ç†\n\n```typescript\nclass C {\n  a: number;\n  b?: number;\n}\nlet c = new C();\nc.a = 12;\nc.a = undefined; // error, 'undefined' is not assignable to 'number'\nc.b = 13;\nc.b = undefined; // Ok\nc.b = null; // error, 'null' is not assignable to 'number | undefined'\n```\n\n### 11.9 ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\n\n> ç”±äºå¯ä»¥ä¸º `null` çš„ç±»å‹æ˜¯é€šè¿‡è”åˆç±»å‹å®ç°ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ç±»å‹å®ˆå«æ¥å»é™¤ `null`ã€‚å¹¸è¿åœ°æ˜¯è¿™ä¸åœ¨ `JavaScript` é‡Œå†™çš„ä»£ç ä¸€è‡´ï¼š\n\n```typescript\nfunction f(sn: string | null): string {\n  if (sn == null) {\n    return \"default\";\n  } else {\n    return sn;\n  }\n}\n```\n\n> è¿™é‡Œå¾ˆæ˜æ˜¾åœ°å»é™¤äº† `null`, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ­è·¯è¿ç®—ç¬¦:\n\n```typescript\nfunction f1(sn: string | null): string {\n  return sn || \"default\";\n}\n```\n\n> å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿå»é™¤ `null` æˆ– `undefined`ï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ‰‹åŠ¨å»é™¤ã€‚è¯­æ³•æ˜¯æ·»åŠ  `!` åç¼€ï¼š`identifier!` ä» `identifier` çš„ç±»å‹é‡Œå»é™¤äº† `null` å’Œ `undefined`ï¼š\n\n```typescript\nfunction broken(name: string | null): string {\n  function postfix(epihet: string) {\n    return name.charAt(0) + \". the\" + epihet; // error, 'name' is possibly null\n  }\n  name = name || \"Bob\";\n  return postfix(\"great\");\n}\n\nfunction fixed(name: string | null): string {\n  function postfix(epihet: string) {\n    return name!.charAt(0) + \". the\" + epihet; // Ok\n  }\n  name = name || \"Bob\";\n  return postfix(\"great\");\n}\n```\n\n> æœ¬ä¾‹ä½¿ç”¨äº†åµŒå¥—å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•å»é™¤åµŒå¥—å‡½æ•°çš„ `null` (é™¤éæ˜¯ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)ã€‚å› ä¸ºå®ƒæ— æ³•è·Ÿè¸ªæ‰€æœ‰å¯¹åµŒå¥—å‡½æ•°çš„è°ƒç”¨ï¼Œå°¤å…¶æ˜¯ä½ å°†å†…å±‚å‡½æ•°ä½œä¸ºå¤–å±‚å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœæ— æ³•çŸ¥é“å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå°±æ— æ³•çŸ¥é“è°ƒç”¨æ—¶ `name` çš„ç±»å‹ã€‚\n\n### 11.10 ç±»å‹åˆ«å\n\n1. ç±»å‹åˆ«åä¼šç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚ç±»å‹åˆ«åæœ‰æ—¶å’Œæ¥å£å¾ˆåƒï¼Œä½†æ˜¯å¯ä»¥ä½œç”¨äº åŸå§‹å€¼ï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ ä»¥åŠå…¶å®ƒä»»ä½•ä½ éœ€è¦æ‰‹å†™çš„ç±»å‹ã€‚\n\n```typescript\ntype Name = string;\ntype NameResolver = () => string;\ntype NameOrResolver = Name | NameResolver;\n\nfunction getName(n: NameOrResolver): Name {\n  if (typeof n === \"string\") {\n    return n;\n  } else {\n    return n();\n  }\n}\n```\n\n2. èµ·åˆ«åä¸ä¼šæ–°å»ºä¸€ä¸ªç±»å‹ - å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°åå­—æ¥å¼•ç”¨é‚£ä¸ªç±»å‹ã€‚\n\n3.ç»™åŸå§‹ç±»å‹èµ·åˆ«åé€šå¸¸æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå°½ç®¡å¯ä»¥ä½œä¸ºæ–‡æ¡£çš„ä¸€ç§å½¢å¼ä½¿ç”¨ã€‚\n\n4. åŒæ¥å£ä¸€æ ·ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ˜¯æ³›å‹ - æˆ‘ä»¬å¯ä»¥æ·»åŠ ç±»å‹å‚æ•°å¹¶ä¸”åœ¨åˆ«åå£°æ˜çš„å³ä¾§ä¼ å…¥ã€‚\n\n```typescript\ntype Container<T> = { value: T };\n```\n\n5. æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥åœ¨å±æ€§é‡Œå¼•ç”¨è‡ªå·±ï¼š\n\n```typescript\ntype Tree<T> = {\n  value: T;\n  left: Tree<T>;\n  right: Tree<T>;\n};\n```\n\n6. ä¸äº¤å‰ç±»å‹ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºä¸€äº›ååˆ†ç¨€å¥‡å¤æ€ªçš„ç±»å‹\n\n```typescript\ntype LinkedList<T> = T & { next: LinkedList<T> };\n\ninterface Person {\n  name: string;\n}\n\nvar people: LinkedList<Person>;\nvar s = people.name;\nvar s = people.next.name;\nvar s = people.next.next.name;\nvar s = people.next.next.next.name;\n```\n\n> ç„¶è€Œï¼Œç±»å‹åˆ«åä¸èƒ½å‡ºç°åœ¨å£°æ˜å³ä¾§çš„ä»»ä½•åœ°æ–¹\n\n```typescript\n// type Yikes = Array<Yikes>; // error\n```\n\n### 11.11 æ¥å£ vs ç±»å‹åˆ«å\n\n> åƒæˆ‘ä»¬æåˆ°çš„ï¼Œç±»å‹åˆ«åå¯ä»¥åƒæ¥å£ä¸€æ ·ï¼›ç„¶è€Œï¼Œä»æœ‰ä¸€äº›ç»†å¾®å·®åˆ«ã€‚\n\n1. æ¥å£åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼Œå¯ä»¥åœ¨å…¶å®ƒä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ç±»å‹åˆ«åå¹¶ä¸åˆ›å»ºæ–°åå­— - æ¯”å¦‚ï¼Œé”™è¯¯ä¿¡æ¯å°±ä¸ä¼šä½¿ç”¨åˆ«åã€‚\n\n> åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‡Œï¼Œåœ¨ç¼–è¯‘å™¨ä¸­å°†é¼ æ ‡æ‚¬åœåœ¨ `interfaced` ä¸Šï¼Œæ˜¾ç¤ºå®ƒè¿”å›çš„æ˜¯ `Interface`ï¼Œä½†æ‚¬åœåœ¨ `aliased` ä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„å´æ˜¯å¯¹è±¡å­—é¢é‡ç±»å‹ã€‚\n\n```typescript\ntype Alias = { num: number };\n\ninterface Interface {\n  num: number;\n}\n\ndeclare function aliased(arg: Alias): Alias;\n\ndeclare function interfaced(arg: Interface): Interface;\n```\n\n2. å¦ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ç±»å‹åˆ«åä¸èƒ½è¢« `extends` å’Œ `implements` (è‡ªå·±ä¹Ÿä¸èƒ½ `extends` å’Œ `implements` å…¶å®ƒç±»å‹)ã€‚å› ä¸º è½¯ä»¶ä¸­çš„å¯¹è±¡åº”è¯¥å¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹æ˜¯å°é—­çš„ï¼Œä½ åº”è¯¥å°½é‡å»ä½¿ç”¨æ¥å£ä»£æ›¿ç±»å‹åˆ«åã€‚\n3. å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æ— æ³•é€šè¿‡æ¥å£æ¥æè¿°ä¸€ä¸ªç±»å‹å¹¶ä¸”éœ€è¦ä½¿ç”¨ è”åˆç±»å‹ æˆ– å…ƒç»„ç±»å‹ï¼Œè¿™æ—¶é€šå¸¸ä¼šä½¿ç”¨ç±»å‹åˆ«åã€‚\n\n### 11.12 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\n\n> å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å…è®¸ä½ æŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»çš„å›ºå®šå€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å¯ä»¥ä¸è”åˆç±»å‹ï¼Œç±»å‹å®ˆå«å’Œç±»å‹åˆ«åå¾ˆå¥½çš„é…åˆã€‚é€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥å®ç°ç±»ä¼¼æšä¸¾ç±»å‹çš„å­—ç¬¦ä¸²ã€‚\n\n```typescript\ntype Easing = \"ease-in\" | \"ease-out\" | \"ease-in-out\";\n\nclass UIElement {\n  animate(dx: number, dy: number, easing: Easing) {\n    if (easing === \"ease-in\") {\n      // ...\n    } else if (easing === \"ease-out\") {\n      // ...\n    } else if (easing === \"ease-in-out\") {\n      // ...\n    } else {\n      // error! should not pass null or undefined.\n    }\n  }\n}\n\nlet button = new UIElement();\nbutton.animate(0, 0, \"ease-in\");\n// button.animate(0, 0,\"uneasy\"); // error: \"uneasy\" is not allowed here\n```\n\n- ä½ åªèƒ½ä»ä¸‰ç§å…è®¸çš„å­—ç¬¦ä¸­é€‰æ‹©å…¶ä¸€æ¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä¼ å…¥å…¶å®ƒå€¼åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚\n\n```typescript\n// Argument of type '\"uneasy\"' is not assignable to parameter of type '\"ease-in\" | \"ease-out\" | \"ease-in-out\"'\n```\n\n- å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è¿˜å¯ä»¥ç”¨äºåŒºåˆ†å‡½æ•°é‡è½½\n\n```typescript\nfunction createElement(tagName: \"img\"): HTMLImageElement;\nfunction createELement(tagName: \"input\"): HTMLInputElement;\n// ... more overloads ...\nfunction createElement(tagName: \"string\"): Element {\n  // ... code goes here ...\n}\n```\n\n### 11.13 æ•°å­—å­—é¢é‡ç±»å‹\n\n- `TypeScript` è¿˜å…·æœ‰æ•°å­—å­—é¢é‡ç±»å‹\n\n```typescript\nfunction rollDice(): 1 | 2 | 3 | 4 | 5 | 6 {\n  // ...\n}\n```\n\n- æˆ‘ä»¬å¾ˆå°‘ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼Œä½†å®ƒä»¬å¯ä»¥ç”¨åœ¨ç¼©å°èŒƒå›´è°ƒè¯• `bug` çš„æ—¶å€™ã€‚\n\n```typescript\nfunction foo(x: number) {\n  if (x !== 1 || x !== 2) {\n    // ~~~~~~\n    // Operator '!==' cannot be applied to types '1' and '2'\n  }\n}\n```\n\n> æ¢å¥è¯è¯´ï¼Œå½“ `x` ä¸ `2` è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒçš„å€¼å¿…é¡»ä¸º `1`ï¼Œè¿™å°±æ„å‘³ç€ä¸Šé¢çš„æ¯”è¾ƒæ£€æŸ¥æ˜¯éæ³•çš„ã€‚\n\n### 11.14 æšä¸¾æˆå‘˜ç±»å‹\n\n> å¦‚æˆ‘ä»¬åœ¨æšä¸¾ä¸€èŠ‚é‡Œæåˆ°çš„ï¼Œå½“æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½æ˜¯ç”¨å­—é¢é‡åˆå§‹åŒ–çš„æ—¶å€™æšä¸¾æˆå‘˜æ˜¯å…·æœ‰ç±»å‹çš„ã€‚åœ¨æˆ‘ä»¬è°ˆåŠâ€œå•ä¾‹ç±»å‹â€çš„æ—¶å€™ï¼Œå¤šæ•°æ˜¯æŒ‡ æšä¸¾æˆå‘˜ç±»å‹ å’Œ æ•°å­—/å­—ç¬¦ä¸² å­—é¢é‡ç±»å‹ï¼Œå°½ç®¡å¤§å¤šæ•°ç”¨æˆ·ä¼šäº’æ¢ä½¿ç”¨â€œå•ä¾‹ç±»å‹â€å’Œâ€œå­—é¢é‡ç±»å‹â€ã€‚\n\n### 11.15 å¯è¾¨è¯†è”åˆ\n\n> ä½ å¯ä»¥åˆå¹¶ å•ä¾‹ç±»å‹ï¼Œè”åˆç±»å‹ï¼Œç±»å‹å®ˆå« å’Œ ç±»å‹åˆ«å æ¥åˆ›å»ºä¸€ä¸ªå«åš å¯è¾¨è¯†è”åˆ çš„é«˜çº§æ¨¡å¼ï¼Œå®ƒä¹Ÿç§°ä½œ æ ‡ç­¾è”åˆ æˆ– ä»£æ•°æ•°æ®ç±»å‹ã€‚å¯è¾¨è¯†è”åˆ åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆæœ‰ç”¨å¤„ã€‚ä¸€äº›è¯­è¨€ä¼šè‡ªåŠ¨åœ°ä¸ºä½ è¾¨è¯†è”åˆï¼›è€Œ `TypeScript` åˆ™åŸºäºå·²æœ‰çš„ `JavaScript` æ¨¡å¼ï¼Œã€‚å®ƒå…·æœ‰ `3` ä¸ªè¦ç´ ï¼š\n\n1. å…·æœ‰æ™®é€šçš„å•ä¾‹ç±»å‹å±æ€§ - å¯è¾¨è¯†çš„ç‰¹å¾\n2. ä¸€ä¸ªç±»å‹åˆ«ååŒ…å«äº†é‚£äº›ç±»å‹çš„è”åˆ - è”åˆã€‚\n3. æ­¤å±æ€§ä¸Šçš„ç±»å‹å®ˆå«\n\n```typescript\ninterface Square {\n  kind: \"square\";\n  size: number;\n}\n\ninterface Rectangle {\n  kind: \"rectangle\";\n  width: number;\n  height: number;\n}\n\ninterface Circle {\n  kind: \"circle\";\n  radius: number;\n}\n```\n\n> é¦–å…ˆæˆ‘ä»¬å£°æ˜äº†å°†è¦è”åˆçš„æ¥å£ã€‚æ¯ä¸ªæ¥å£éƒ½æœ‰ `kind` å±æ€§ä½†æœ‰ä¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€‚`kind` å±æ€§ç§°ä½œ å¯è¾¨è¯†çš„ç‰¹å¾æˆ–æ ‡ç­¾ã€‚å…¶å®ƒçš„å±æ€§åˆ™ç‰¹å®šäºå„ä¸ªæ¥å£ã€‚æ³¨æ„ï¼Œç›®å‰å„ä¸ªæ¥å£é—´æ˜¯æ²¡æœ‰è”ç³»çš„ã€‚\n\n- ä¸‹é¢æˆ‘ä»¬å°†å®ƒä»¬è”åˆåˆ°ä¸€èµ·ã€‚\n\n```typescript\ntype Shape = Square | Rectangle | Circle;\n```\n\n- ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å¯è¾¨è¯†è”åˆ\n\n```typescript\nfunction area(s: Shape) {\n  switch (s.kind) {\n    case \"square\":\n      return s.size * s.size;\n    case \"rectangle\":\n      return s.width * s.height;\n    case \"circle\":\n      return Math.PI * s.radius ** 2;\n  }\n}\nlet areaSquare = area({ kind: \"square\", size: 12 });\nlet areaRectangle = area({ kind: \"rectangle\", width: 14, height: 13 });\nlet areaCircle = area({ kind: \"circle\", radius: 5 });\nconsole.log(areaSquare, areaRectangle, areaCircle);\n```\n\n### 11.16 å®Œæ•´æ€§æ£€æŸ¥\n\n> å½“æ²¡æœ‰æ¶µç›–æ‰€æœ‰ å¯è¾¨è¯†è”åˆ çš„å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©ç¼–è¯‘å™¨å¯ä»¥é€šçŸ¥æˆ‘ä»¬ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ äº† `Triangle` å’Œ `Shape`ï¼Œæˆ‘ä»¬åŒæ—¶è¿˜éœ€è¦æ›´æ–° `area`ï¼š\n\n```typescript\ninterface Square {\n  kind: \"square\";\n  size: number;\n}\n\ninterface Rectangle {\n  kind: \"rectangle\";\n  width: number;\n  height: number;\n}\n\ninterface Circle {\n  kind: \"circle\";\n  radius: number;\n}\n\n// interface Triangle { kind: \"triangle\", bottom: number, height: number }\n\ntype Shape = Square | Rectangle | Circle;\n\nfunction area(s: Shape) {\n  switch (s.kind) {\n    case \"square\":\n      return s.size * s.size;\n    case \"rectangle\":\n      return s.width * s.height;\n    case \"circle\":\n      return Math.PI * s.radius ** 2;\n  }\n  // should error here - we didn't handle case \"triangle\"\n}\n```\n\n- æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ã€‚\n\n1. é¦–å…ˆæ˜¯å¯ç”¨ `--strictNullChecks` å¹¶ä¸”æŒ‡å®šä¸€ä¸ªè¿”å›å€¼ç±»å‹:\n\n```typescript\nfunction area1(s: Shape): number {\n  switch (s.kind) {\n    case \"square\":\n      return s.size * s.size;\n    case \"rectangle\":\n      return s.height * s.width;\n    case \"circle\":\n      return Math.PI * s.radius ** 2;\n  }\n}\n```\n\n> å› ä¸º `switch` æ²¡æœ‰åŒ…å«æ‰€æœ‰æƒ…å†µï¼Œæ‰€ä»¥ `TypeScript` è®¤ä¸ºè¿™ä¸ªå‡½æ•°æœ‰æ—¶å€™ä¼šè¿”å› `undefined`ã€‚å¦‚æœä½ æ˜ç¡®åœ°æŒ‡å®šäº†è¿”å›å€¼ç±»å‹ä¸º `number`ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®é™…ä¸Šè¿”å›å€¼ç±»å‹ä¸º `number | undefined`ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨äº›å¾®å¦™ä¹‹å¤„ä¸” `--strictNullChecks` å¯¹æ—§ä»£ç æ”¯æŒä¸å¥½ã€‚\n\n2. ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨ `never` ç±»å‹ï¼Œç¼–è¯‘å™¨ç”¨å®ƒæ¥è¿›è¡Œå®Œæ•´æ€§æ£€æŸ¥\n\n```typescript\nfunction assertNever(x: never): never {\n throw new Error(\"Unexpected object: \" + x);\n}\n>\nfunction area2(s: Shape) {\n switch (s.kind) {\n     case \"square\":\n         return s.size * s.size;\n     case \"rectangle\":\n         return s.width * s.height;\n     case \"circle\":\n         return Math.PI * s.radius ** 2;\n     default:\n         return assertNever(s); // error here if there are missing cases\n }\n}\n```\n\n> è¿™é‡Œï¼Œ`assertNever` æ£€æŸ¥ `s` æ˜¯å¦ä¸º `never` ç±»å‹ - å³ä¸ºé™¤å»æ‰€æœ‰å¯èƒ½æƒ…å†µåå‰©ä¸‹çš„ç±»å‹ã€‚å¦‚æœä½ å¿˜è®°äº†æŸä¸ª `case`ï¼Œé‚£ä¹ˆ `s` å°†å…·æœ‰ä¸€ä¸ªçœŸå®çš„ç±»å‹å¹¶ä¸”ä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚è¿™ç§æ–¹å¼éœ€è¦ä½ å®šä¹‰ä¸€ä¸ªé¢å¤–çš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨ä½ å¿˜è®°æŸä¸ª `case` çš„æ—¶å€™ä¹Ÿæ›´åŠ æ˜æ˜¾ã€‚\n\n### 11.17 å¤šæ€çš„ this ç±»å‹\n\n> å¤šæ€çš„ `this` ç±»å‹è¡¨ç¤ºçš„æ˜¯æŸä¸ªåŒ…å«ç±»æˆ–æ¥å£çš„å­ç±»å‹ã€‚è¿™è¢«ç§°ä½œæ˜¯ `F-bounded` å¤šæ€æ€§ã€‚å®ƒèƒ½å¾ˆå®¹æ˜“çš„è¡¨ç°è¿è´¯æ¥å£é—´çš„ç»§æ‰¿ã€‚\n\n- æ¯”å¦‚ï¼Œåœ¨è®¡ç®—å™¨çš„ä¾‹å­é‡Œï¼Œåœ¨æ¯ä¸ªæ“ä½œä¹‹åéƒ½è¿”å› `this` ç±»å‹ã€‚\n\n```typescript\nclass BasicCalculator {\n  public constructor(protected value: number = 0) {}\n\n  public currentValue(): number {\n    return this.value;\n  }\n\n  public add(operand: number): this {\n    this.value += operand;\n    return this;\n  }\n\n  public multiply(operand: number): this {\n    this.value *= operand;\n    return this;\n  }\n\n  //...other operations go here...\n}\n\nlet v = new BasicCalculator(2).multiply(5).add(1).currentValue();\nconsole.log(v);\n```\n\n> ç”±äºè¿™ä¸ªç±»ä½¿ç”¨äº† `this` ç±»å‹ï¼Œä½ å¯ä»¥ç»§æ‰¿å®ƒï¼Œæ–°çš„ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼Œä¸éœ€è¦åšä»»ä½•æ”¹å˜ã€‚\n\n```typescript\nclass ScientificCalculator extends BasicCalculator {\n  public constructor(value = 0) {\n    super(value);\n  }\n\n  public sin() {\n    this.value = Math.sin(this.value);\n    return this;\n  }\n\n  // ... other operations go here ...\n}\n\nlet v1 = new ScientificCalculator(2).multiply(5).sin().add(1).currentValue();\nconsole.log(v1);\n```\n\n> å¦‚æœæ²¡æœ‰ `this` ç±»å‹ï¼Œ`ScientificCalculator` å°±ä¸èƒ½å¤Ÿåœ¨ç»§æ‰¿ `BasicCalculator` çš„åŒæ—¶è¿˜ä¿æŒæ¥å£çš„è¿è´¯æ€§ã€‚`multiply` å°†ä¼šè¿”å› `BasicCalculator`ï¼Œå®ƒå¹¶æ²¡æœ‰ `sin` æ–¹æ³•ã€‚ç„¶è€Œï¼Œä½¿ç”¨ `this` ç±»å‹ï¼Œ`multiply` ä¼šè¿”å› `this`ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ `ScientificCalculator`ã€‚\n\n### 11.18 ç´¢å¼•ç±»å‹\n\n> ä½¿ç”¨ç´¢å¼•ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿæ£€æŸ¥ä½¿ç”¨äº†åŠ¨æ€å±æ€§åçš„ä»£ç ã€‚\n\n- ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„ `JavaScript` æ¨¡å¼æ˜¯ä»å¯¹è±¡ä¸­é€‰å–å±æ€§çš„å­é›†ã€‚\n\n```typescript\nfunction js_pluck(o, names) {\n  return names.map(n => o[n]);\n}\n```\n\n- ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ `TypeScript` é‡Œä½¿ç”¨æ­¤å‡½æ•°ï¼Œé€šè¿‡ ç´¢å¼•ç±»å‹æŸ¥è¯¢å’Œ ç´¢å¼•è®¿é—® æ“ä½œç¬¦ï¼š\n\n```typescript\nfunction pluck<T, K extends keyof T>(o: T, names: K[]): T[K][] {\n  return names.map(n => o[n]);\n}\n\ninterface Person {\n  name: string;\n  age: number;\n}\n\nlet person: Person = {\n  name: \"Jarid\",\n  age: 35\n};\nlet strings: string[] = pluck(person, [\"name\"]);\nconsole.log(strings);\n```\n\n> ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ `name` æ˜¯å¦çœŸçš„æ˜¯ `Person` çš„ä¸€ä¸ªå±æ€§ã€‚æœ¬ä¾‹è¿˜å¼•å…¥äº†å‡ ä¸ªæ–°çš„ç±»å‹æ“ä½œç¬¦ã€‚\n\n#### 11.18.1 é¦–å…ˆæ˜¯ `keyof T`ï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\n\n> å¯¹äºä»»ä½•ç±»å‹ `T` ï¼Œ`keyof T` çš„ç»“æœä¸º `T` ä¸Šå·²çŸ¥çš„å…¬å…±å±æ€§åçš„è”åˆã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nlet personProps: keyof Person; // 'name' | 'age'\n```\n\n> `keyof Person` æ˜¯å®Œå…¨å¯ä»¥ä¸ `'name' \\| 'age'` äº’ç›¸æ›¿æ¢çš„ã€‚ä¸åŒçš„æ˜¯å¦‚æœä½ æ·»åŠ äº†å…¶å®ƒçš„å±æ€§åˆ° `Person`, ä¾‹å¦‚ `address: string`ï¼Œé‚£ä¹ˆ`keyof Person` ä¼šè‡ªåŠ¨å˜ä¸º `'name' | 'age' | 'address'`ã€‚ä½ å¯ä»¥åƒ `pluck` å‡½æ•°è¿™ç±»ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ `keyof` ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ä¹‹å‰ä½ å¹¶ä¸æ¸…æ¥šå¯èƒ½å‡ºç°çš„å±æ€§åã€‚ä½†ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ä½ æ˜¯å¦ä¼ å…¥äº†æ­£ç¡®çš„å±æ€§åç»™ `pluck`ï¼š\n\n```typescript\n// pluck(person, ['age', 'unknown']); // error, 'unknown' is not in 'name' | 'age'\n```\n\n#### 11.18.2 ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯ `T[K]`, ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\n\n> åœ¨è¿™é‡Œï¼Œç±»å‹è¯­æ³•ååº”äº†è¡¨è¾¾å¼è¯­æ³•ã€‚è¿™æ„å‘³ç€ `person['name']` å…·æœ‰ç±»å‹ `Person['name']` -- åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œåˆ™ä¸º `string` ç±»å‹ã€‚ç„¶è€Œï¼Œå°±åƒç´¢å¼•ç±»å‹æŸ¥è¯¢ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨æ™®é€šçš„ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ `T[K]`ï¼Œè¿™æ­£æ˜¯å®ƒçš„å¼ºå¤§æ‰€åœ¨ã€‚ä½ åªè¦ç¡®ä¿ç±»å‹å˜é‡ `K extends keyof T` å°±å¯ä»¥äº†ã€‚\n\n- ä¾‹å¦‚ä¸‹é¢ `getProperty` å‡½æ•°çš„ä¾‹å­ï¼š\n\n```typescript\nfunction getProperty<T, K extends keyof T>(o: T, name: K): T[K] {\n  return o[name]; // o[name] is of type T[K]\n}\n```\n\n> `getProperty` é‡Œçš„ `o: T` å’Œ `name: K`ï¼Œæ„å‘³ç€ `o[name]: T[K]`ã€‚å½“ä½ è¿”å› `T[K]` çš„ç»“æœï¼Œ\n\n> ç¼–è¯‘å™¨ä¼šæ˜¯å®ä¾‹åŒ–é”®çš„çœŸå®ç±»å‹ï¼Œå› æ­¤ `getProperty` çš„è¿”å›å€¼ç±»å‹ä¼šéšç€ä½ éœ€è¦çš„å±æ€§æ”¹å˜ã€‚\n\n```typescript\nlet _name: string = getProperty(person, \"name\");\nlet _age: number = getProperty(person, \"age\");\n// let unknown = getProperty(person, \"unknown\"); // error, 'unknown' is not in 'name' | 'age'\nconsole.log(_name, \" \", _age);\n```\n\n### 11.19 ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\n\n> `keyof` å’Œ `T[K]` ä¸å­—ç¬¦ä¸²ç´¢å¼•ç­¾åè¿›è¡Œäº¤äº’ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²ç´¢å¼•ç­¾åçš„ç±»å‹ï¼Œé‚£ä¹ˆ `keyof T` ä¼šæ˜¯ `string`ã€‚å¹¶ä¸” `T[string]` ä¸ºç´¢å¼•ç­¾åçš„ç±»å‹ã€‚\n\n```typescript\ninterface Dictionary<T> {\n  [key: string]: T;\n}\nlet keys: keyof Dictionary<number>; // string\nlet value: Dictionary<number>[\"foo\"]; // number\n```\n\n### 11.20 æ˜ å°„ç±»å‹\n\n- ä¸€ä¸ªå¸¸è§çš„ä»»åŠ¡æ˜¯å°†ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹æ¯ä¸ªå±æ€§éƒ½å˜ä¸ºå¯é€‰çš„ã€‚\n\n```typescript\ninterface PersonPartial {\n  name?: string;\n  age?: number;\n}\n```\n\n- æˆ–è€…æˆ‘ä»¬åªæƒ³è¦ä¸€ä¸ªåªè¯»ç‰ˆæœ¬\n\n```typescript\ninterface PersonReadonly {\n  readonly name: string;\n  readonly age: number;\n}\n```\n\n> è¿™åœ¨ `JavaScript` é‡Œç»å¸¸å‡ºç°ã€‚`TypeScript` æä¾›äº†ä»æ—§ç±»å‹ä¸­åˆ›å»ºæ–°ç±»å‹çš„ä¸€ç§æ–¹å¼ `--` æ˜ å°„ç±»å‹ã€‚åœ¨æ˜ å°„ç±»å‹é‡Œï¼Œæ–°ç±»å‹ä»¥ç›¸åŒçš„å½¢å¼å»è½¬æ¢æ—§ç±»å‹é‡Œæ¯ä¸ªå±æ€§ã€‚å‡å¦‚ï¼Œä½ å¯ä»¥ä»¤æ¯ä¸ªå±æ€§æˆä¸º `readonly` ç±»å‹æˆ–å¯é€‰çš„ã€‚\n\n- ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```typescript\ntype Readonly<T> = {\n  readonly [P in keyof T]: T[P];\n};\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n```\n\n- åƒä¸‹é¢è¿™æ ·ä½¿ç”¨\n\n```typescript\ninterface Person {}\ntype PersonPartial = Partial;\ntype PersonReadonly = Readonly;\n```\n\n> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¯­æ³•æè¿°çš„æ˜¯ç±»å‹è€Œéæˆå‘˜ã€‚è‹¥æƒ³æ·»åŠ é¢å¤–çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ äº¤å‰ç±»å‹ã€‚\n\n- è¿™æ ·ä½¿ç”¨\n\n```typescript\ntype PartialWithNewMember<T> = {\n  [P in keyof T]?: T[P];\n} & { newMember: boolean };\n```\n\n- ä¸è¦è¿™æ ·ä½¿ç”¨\n\n```typescript\ntype PartialWithNewMember<T> = {\n  [P in keyof T]?: T[P];\n  newMember: boolean;\n}\n```\n\n> ä¸‹é¢æ¥çœ‹çœ‹æœ€ç®€å•çš„æ˜ å°„ç±»å‹å’Œå®ƒçš„ç»„æˆéƒ¨åˆ†\n\n```typescript\ntype Keys = \"option1\" | \"option2\";\ntype Flags = { [K in Keys]: boolean };\n```\n\n> å®ƒçš„è¯­æ³•ä¸ç´¢å¼•ç­¾åçš„è¯­æ³•ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨äº† `for...in`ã€‚å…·æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\n1. ç±»å‹å˜é‡ `K`ï¼Œå®ƒä¼šä¾æ¬¡ç»‘å®šåˆ°æ¯ä¸ªå±æ€§ã€‚\n2. å­—ç¬¦ä¸²å­—é¢é‡è”åˆçš„ `Keys`ï¼Œå®ƒåŒ…å«äº†è¦è¿­ä»£çš„å±æ€§åçš„é›†åˆã€‚\n3. å±æ€§çš„ç»“æœç±»å‹ã€‚\n\n> åœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­é‡Œï¼Œ`Keys` æ˜¯ç¡¬ç¼–ç çš„å±æ€§åˆ—è¡¨å¹¶ä¸”å±æ€§ç±»å‹æ°¸è¿œæ˜¯ `boolean`ï¼Œå› æ­¤è¿™ä¸ªæ˜ å°„ç±»å‹\n\n- ç­‰åŒäºï¼š\n\n```typescript\ntype _FLags = {\n  option1: boolean;\n  option2: boolean;\n};\n```\n\n> åœ¨çœŸæ­£çš„åº”ç”¨é‡Œï¼Œå¯èƒ½ä¸åŒäºä¸Šé¢çš„ `Readonly` æˆ– `Partial`ã€‚å®ƒä»¬ä¼šåŸºäºä¸€äº›å·²å­˜åœ¨çš„ç±»å‹ï¼Œä¸”æŒ‰ç…§ä¸€å®šçš„æ–¹å¼è½¬æ¢å­—æ®µã€‚è¿™å°±æ˜¯ `keyof` å’Œ `ç´¢å¼•è®¿é—®ç±»å‹` è¦åšçš„äº‹æƒ…ã€‚\n\n```typescript\ntype NullablePerson = { [P in keyof Person]: Person[P] | null };\ntype PartialPerson = { [P in keyof Person]?: Person[P] };\n```\n\n> ä½†å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹æ˜¯å¯ä»¥æœ‰ä¸€äº›é€šç”¨ç‰ˆæœ¬ã€‚\n\n```typescript\ntype Nullable<T> = { [P in keyof T]: T[P] | null };\ntype Partial1<T> = { [P in keyof T]?: T[P] };\n```\n\n> åœ¨è¿™äº›ä¾‹å­é‡Œï¼Œå±æ€§åˆ—è¡¨æ˜¯ `keyof T` ä¸”ç»“æœç±»å‹æ˜¯ `T[P]` çš„å˜ä½“ã€‚è¿™æ˜¯ä½¿ç”¨é€šç”¨æ˜ å°„ç±»å‹çš„ä¸€ä¸ªå¥½æ¨¡ç‰ˆã€‚å› ä¸ºè¿™ç±»è½¬æ¢æ˜¯åŒæ€çš„ï¼Œæ˜ å°„åªä½œç”¨äº `T` çš„å±æ€§è€Œæ²¡æœ‰å…¶å®ƒçš„ã€‚ç¼–è¯‘å™¨çŸ¥é“åœ¨æ·»åŠ ä»»ä½•æ–°å±æ€§ä¹‹å‰å¯ä»¥æ‹·è´æ‰€æœ‰å­˜åœ¨çš„å±æ€§ä¿®é¥°ç¬¦ã€‚å‡å¦‚ï¼Œå‡è®¾ `Person.name` æ˜¯åªè¯»çš„ï¼Œé‚£ä¹ˆ `Partial1<Person>.name` ä¹Ÿå°†æ˜¯åªè¯»çš„ä¸”ä¸ºå¯é€‰çš„ã€‚\n\n> ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œ`T[P]` è¢«åŒ…è£…åœ¨ `Proxy<T>` ç±»é‡Œï¼š\n\n```typescript\ntype Proxy<T> = {\n  get(): T;\n  set(value: T): void;\n};\ntype Proxify<T> = {\n  [P in keyof T]: Proxy<T[P]>;\n};\nfunction proxify<T>(o: T): Proxify<T> {\n  // ...wrap proxies\n}\nlet proxyProps = proxify(props);\n```\n\n> æ³¨æ„ `Readonly<T>` å’Œ `Partial<T>` ç”¨å¤„ä¸å°ï¼Œå› æ­¤å®ƒä»¬äº `pick` å’Œ `Record` ä¸€åŒè¢«åŒ…å«è¿›äº† `TypeScript` çš„æ ‡å‡†åº“é‡Œï¼š\n\n```typescript\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\ntype Record<K extends keyof any, T> = {\n  [P in K]: T;\n};\n```\n\n> `Readonly`, `Partial` å’Œ `Pick` æ˜¯åŒæ€çš„ï¼Œä½† `Record` ä¸æ˜¯ã€‚å› ä¸º `Record` å¹¶ä¸éœ€è¦è¾“å…¥ç±»å‹æ¥æ‹·è´å±æ€§ï¼Œæ‰€ä»¥å®ƒä¸å±äºåŒæ€ï¼š\n\n```typescript\ntype ThreeStringProps = Record<\"prop1\" | \"prop2\" | \"prop3\", string>;\n```\n\n> éåŒæ€ç±»å‹æœ¬è´¨ä¸Šä¼šåˆ›å»ºæ–°çš„å±æ€§ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šä»å®ƒå¤„æ‹·è´å±æ€§ä¿®é¥°ç¬¦ã€‚\n\n### 11.21 ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\n\n> ç°åœ¨ä½ äº†è§£äº†å¦‚ä½•åŒ…è£…ä¸€ä¸ªç±»å‹çš„å±æ€§ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ‹†åŒ…ã€‚å…¶å®è¿™ä¹Ÿéå¸¸å®¹æ˜“ï¼š\n\n```typescript\ntype Proxify<T> = {\n  get(): T;\n  set(value: T): void;\n};\n\nfunction unproxify<T>(t: Proxify<T>): T {\n  let result = {} as T;\n  for (const k in t) {\n    result[k] = t[k].get();\n  }\n  return result;\n}\n// let originalProps = unproxify(proxyProps);\n```\n\n> æ³¨æ„è¿™ä¸ªæ‹†åŒ…æ¨æ–­åªé€‚ç”¨äºåŒæ€çš„æ˜ å°„ç±»å‹ã€‚å¦‚æœæ˜ å°„ç±»å‹ä¸æ˜¯åŒæ€çš„ï¼Œé‚£ä¹ˆéœ€è¦ç»™æ‹†åŒ…å‡½æ•°ä¸€ä¸ªæ˜ç¡®çš„ç±»å‹å‚æ•°ã€‚\n\n### 11.22 æœ‰æ¡ä»¶ç±»å‹\n\n> `TypeScript 2.8` å¼•å…¥äº†æœ‰æ¡ä»¶ç±»å‹ï¼Œå®ƒèƒ½å¤Ÿè¡¨ç¤ºéç»Ÿä¸€çš„ç±»å‹ã€‚æœ‰æ¡ä»¶çš„ç±»å‹ä¼šä»¥ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç±»å‹å…³ç³»æ£€æµ‹ï¼Œä»è€Œåœ¨ä¸¤ç§ç±»å‹ä¸­é€‰æ‹©å…¶ä¸€ï¼š\n\n```typescript\nT extends U ? X : Y\n```\n\n> ä¸Šé¢çš„ç±»å‹æ„æ€æ˜¯ï¼šè‹¥ `T` èƒ½å¤Ÿèµ‹å€¼ç»™ `U`ï¼Œé‚£ä¹ˆç±»å‹æ˜¯ `X`ï¼Œå¦åˆ™ä¸º `Y`\n\n> æœ‰æ¡ä»¶çš„ç±»å‹ `T extends U ? X : Y` æˆ–è€…è§£æä¸º `X`ï¼Œæˆ–è€…è§£æä¸º `Y`ï¼Œå†æˆ–è€…å»¶è¿Ÿè§£æï¼Œå› ä¸ºå®ƒå¯èƒ½ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡ã€‚è‹¥ `T` æˆ– `U` åŒ…å«ç±»å‹å‚æ•°ï¼Œé‚£ä¹ˆæ˜¯å¦è§£æä¸º `X` æˆ– `Y` æˆ–æ¨è¿Ÿï¼Œå–å†³äºç±»å‹ç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®š `T` æ€»æ˜¯å¯ä»¥èµ‹å€¼ç»™ `U`ã€‚\n\n- ä¸‹é¢æ˜¯ä¸€äº›ç±»å‹å¯ä»¥è¢«ç«‹å³è§£æçš„ä¾‹å­ï¼š\n\n```typescript\ndeclare function f<T extends boolean>(x: T): T extends true ? string : number;\n\n// Type is 'string' | 'number'\nlet x = f(Math.random() < 0.5);\n```\n\n> å¦å¤–ä¸€ä¸ªä¾‹å­æ¶‰åŠ `TypeName` ç±»å‹åˆ«åï¼Œå®ƒä½¿ç”¨äº†åµŒå¥—äº†æœ‰æ¡ä»¶ç±»å‹\n\n```typescript\ntype TypeName<T> = T extends string ? \"string\" : T extends number ? \"number\" : T extends boolean ? \"boolean\" : T extends undefined ? \"undefined\" : T extends Function ? \"function\" : \"object\";\n\ntype T0 = TypeName<string>; // \"string\"\ntype T1 = TypeName<\"a\">; // \"string\"\ntype T2 = TypeName<true>; // \"boolean\"\ntype T3 = TypeName<() => void>; // \"function\"\ntype T4 = TypeName<string[]>; // \"object\"\n```\n\n- ä¸‹é¢æ˜¯ä¸€ä¸ªæœ‰æ¡ä»¶ç±»å‹è¢«æ¨è¿Ÿè§£æçš„ä¾‹å­\n\n```typescript\ninterface Foo {\n  propA: boolean;\n  propB: boolean;\n}\ndeclare function f<T>(x: T): T extends Foo ? string : number;\nfunction foo<U>(x: U) {\n  // Has type 'U extends Foo ? string : number'\n  let a = f(x);\n  // This assignment is allowed though!\n  let b: string | number = a;\n}\n```\n\n> è¿™é‡Œï¼Œ`a` å˜é‡å«æœ‰æœªç¡®å®šçš„æœ‰æ¡ä»¶ç±»å‹ã€‚å½“æœ‰å¦ä¸€æ®µä»£ç è°ƒç”¨ `foo`ï¼Œå®ƒä¼šç”¨å…¶å®ƒç±»å‹æ›¿æ¢ `U`ï¼Œ`TypeScript` å°†é‡æ–°è®¡ç®—æœ‰æ¡ä»¶ç±»å‹ï¼Œå†³å®šå®ƒæ˜¯å¦å¯ä»¥é€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ‰æ¡ä»¶ç±»å‹èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œåªè¦æœ‰æ¡ä»¶ç±»å‹çš„æ¯ä¸ªåˆ†æ”¯ï¼Œéƒ½å¯ä»¥èµ‹å€¼ç»™ç›®æ ‡ç±»å‹ã€‚å› æ­¤åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å°† `U extends Foo ? string : number` èµ‹å€¼ç»™ `string | number`ï¼Œå› ä¸ºä¸ç®¡è¿™ä¸ªæœ‰æ¡ä»¶ç±»å‹æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆï¼Œå®ƒåªèƒ½æ˜¯ `string | number`ã€‚\n\n### 11.23 åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\n\n> å¦‚æœæœ‰æ¡ä»¶ç±»å‹é‡Œå¾…æ£€æŸ¥çš„ç±»å‹æ˜¯ `naked type parameter` ï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¢«ç§°ä¸º\"åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\"ã€‚åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹åœ¨å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆ†å‘æˆè”åˆç±»å‹ã€‚ä¾‹å¦‚ï¼šå®ä¾‹åŒ– `T extends U ? X : Y`ï¼Œ`T` çš„ç±»å‹ä¸º `A | B | C`ï¼Œä¼šè¢«è§£æä¸º `(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)`ã€‚\n\n- ä¾‹å­ï¼š```typescript\n  type TypeName<T> =\n  T extends string ? \"string\" :\n  T extends number ? \"number\" :\n  T extends boolean ? \"boolean\" :\n  T extends undefined ? \"undefined\" :\n  T extends Function ? \"function\" : \"object\";\n  type T10 = TypeName<string | (() => void)>; // \"string\" | \"function\"\n  type T11 = TypeName<string | string[] | undefined>; // \"string\" | \"object\" | \"undefined\"\n  type T12 = TypeName<string[] | number[]>; // \"object\"\n\n````\n\n\n\n\n>  åœ¨ `T extends U ? X : Y` çš„å®ä¾‹åŒ–é‡Œï¼Œå¯¹ `T` çš„å¼•ç”¨è¢«è§£æä¸ºè”åˆç±»å‹çš„ä¸€éƒ¨åˆ†(æ¯”å¦‚ï¼Œ`T` æŒ‡å‘æŸä¸€å•ä¸ªéƒ¨åˆ†ï¼Œåœ¨æœ‰æ¡ä»¶ç±»å‹åˆ†å¸ƒåˆ°è”åˆç±»å‹ä¹‹å)ã€‚æ­¤å¤–ï¼Œåœ¨ `X` å†…å¯¹ `T` çš„å¼•ç”¨æœ‰ä¸€ä¸ªé™„åŠ çš„ç±»å‹å‚æ•°çº¦æŸ `U`(ä¾‹å¦‚ï¼Œ`T` è¢«å½“æˆåœ¨ `X` å†…å¯èµ‹å€¼ç»™ `U`)ã€‚\n\n\n\n- ä¾‹å­ï¼š\n\n\n\n```typescript\ntype BoxedValue<T> = { value: T };\ntype BoxedArray<T> = { array: T[] };\ntype Boxed<T> = T extends any[] ? BoxedArray<T[number]> : BoxedValue<T>;\n\ntype T20 = Boxed<string>; // BoxedValue<string>;\ntype T21 = Boxed<number[]>; // BoxedArray<number>;\ntype T22 = Boxed<string | number[]>; // BoxedValue<string> | BoxedArray<number>;\n````\n\n#### 11.23.1 æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\n\n```typescript\ntype Diff<T, U> = T extends U ? never : T; // Remove types from T that are assignable to U(ä» T ä¸­åˆ é™¤å¯åˆ†é…ç»™ U çš„ç±»å‹)\ntype Filter<T, U> = T extends U ? T : never; // Remove types from T that are not assignable to U(ä» T ä¸­åˆ é™¤ä¸å¯èµ‹å€¼ç»™ U çš„ç±»å‹)\n\ntype T30 = Diff<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"b\" | \"d\"\ntype T31 = Filter<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"a\" | \"c\"\ntype T32 = Diff<string | number | (() => void), Function>; // string | number\ntype T33 = Filter<string | number | (() => void), Function>; // () => void\n\ntype _NonNullable<T> = Diff<T, null | undefined>; // Remove null and undefined from T\n\ntype T34 = _NonNullable<string | number | undefined>; // string | number\ntype T35 = _NonNullable<string | string[] | null | undefined>; // string | string[]\n\nfunction f1<T>(x: T, y: _NonNullable<T>) {\n  x = y; // Ok\n  // y = x ;// Error\n}\nfunction f2<T extends string | undefined>(x: T, y: _NonNullable<T>) {\n  x = y; // Ok\n  // y = x; //Error\n  // let s1: string = x; // Error\n  let s2: string = y; // Ok\n}\n```\n\n#### 11.23.2 æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\n\n```typescript\ntype FunctionPropertyNames<T> = { [K in keyof T]: T[K] extends Function ? K : never }[keyof T];\ntype FunctionProperties<T> = Pick<T, FunctionPropertyNames<T>>;\n\ntype NonFunctionPropertyNames<T> = { [K in keyof T]: T[K] extends Function ? never : K }[keyof T];\ntype NonFunctionProperties<T> = Pick<T, NonFunctionPropertyNames<T>>;\n\ninterface Part {\n  id: number;\n  name: string;\n  subparts: Part[];\n  updatePart(newName: string): void;\n}\n\ntype T40 = FunctionPropertyNames<Part>; // \"updatePart\"\ntype T41 = NonFunctionPropertyNames<Part>; // \"id\" | \"name\" | \"subparts\"\ntype T42 = FunctionProperties<Part>; // { updatePart(newName: string): void }\ntype T43 = NonFunctionProperties<Part>; // { id: number, name: string, suparts: Part[] }\n```\n\n#### 11.23.3 ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\n\n- æ¯”å¦‚ä¸‹é¢çš„é”™è¯¯ï¼š\n\n```typescript\n// type ElementType<T> = T extends any[] ? ElementType<T[number]>: T; // Error\n```\n\n### 11.24 æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\n\n> ç°åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ `extends` å­è¯­å¥ä¸­ï¼Œå…è®¸å‡ºç° `infer` å£°æ˜ï¼Œå®ƒä¼šå¼•å…¥ä¸€ä¸ªå¾…æ¨æ–­çš„ç±»å‹å˜é‡ã€‚è¿™ä¸ªæ¨æ–­çš„ç±»å‹å˜é‡å¯ä»¥åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ `true` åˆ†æ”¯ä¸­è¢«å¼•ç”¨ã€‚å…è®¸å‡ºç°å¤šä¸ªåŒç±»å‹å˜é‡çš„ `infer`ã€‚\n\n> ä¾‹å¦‚ï¼šä¸‹é¢ä»£ç ä¼šæå–å‡½æ•°ç±»å‹çš„è¿”å›å€¼\n\n```typescript\ntype _ReturnType<T> = T extends (...args: any[]) => infer R ? R : any;\n```\n\n> æœ‰æ¡ä»¶ç±»å‹ å¯ä»¥åµŒå¥—æ¥æ„æˆä¸€ç³»åˆ—çš„åŒ¹é…æ¨¡å¼ï¼ŒæŒ‰é¡ºåºè¿›è¡Œæ±‚å€¼ï¼š\n\n```typescript\ntype Unpacked<T> = T extends (infer U)[] ? U : T extends (...args: any[]) => infer U ? U : T extends Promise<infer U> ? U : T;\n\ntype T0 = Unpacked<string>; // string\ntype T1 = Unpacked<string[]>; // string\ntype T2 = Unpacked<() => string>; // string\ntype T3 = Unpacked<Promise<string>>; // string\ntype T4 = Unpacked<Promise<string>[]>; // Promise<string>\ntype T5 = Unpacked<Unpacked<Promise<string>[]>>; // string\n```\n\n> ä¸‹é¢çš„ä¾‹å­è§£é‡Šäº†åœ¨åå˜ä½ç½®ä¸Šï¼ŒåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºè”åˆç±»å‹ï¼š\n\n```typescript\ntype Foo<T> = T extends { a: infer U; b: infer U } ? U : never;\ntype T10 = Foo<{ a: string; b: string }>; // string\ntype T11 = Foo<{ a: string; b: number }>; // string | number\n```\n\n> ç›¸ä¼¼åœ°ï¼Œåœ¨æŠ—å˜ä½ç½®ä¸ŠåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºäº¤å‰ç±»å‹ï¼š\n>\n> ```typescript\n> type Bar<T> = T extends { a: (x: infer U) => void; b: (x: infer U) => void } ? U : never;\n> type T20 = Bar<{ a: (x: string) => void; b: (x: string) => void }>; // string\n> type T21 = Bar<{ a: (x: string) => void; b: (x: number) => void }>; // string & number\n> ```\n\n````\n\n\n\n> å½“æ¨æ–­å…·æœ‰å¤šä¸ªè°ƒç”¨ç­¾å(ä¾‹å¦‚å‡½æ•°é‡è½½ç±»å‹)çš„ç±»å‹æ—¶ï¼Œç”¨æœ€åçš„ç­¾å(å¤§æ¦‚æ˜¯æœ€è‡ªç”±çš„åŒ…å«æ‰€æœ‰æƒ…å†µçš„ç­¾å) è¿›è¡Œæ¨æ–­ã€‚æ— æ³•æ ¹æ®å‚æ•°ç±»å‹åˆ—è¡¨æ¥è¿›è¡Œè§£æé‡è½½ã€‚\n\n\n\n```typescript\ndeclare function foo(x: string): number;\ndeclare function foo(x: number): string;\ndeclare function foo(x: string | number): string | number;\n\ntype T30 = ReturnType<typeof foo>; // string | number\n````\n\n> æ— æ³•åœ¨æ­£å¸¸ç±»å‹å‚æ•°çš„çº¦æŸå­è¯­å¥ä¸­ä½¿ç”¨ `infer` å£°æ˜ï¼š\n\n```typescript\n// type ReturnType1<T extends (...args: any[]) => infer R> = R; // Error\n```\n\n> ä½†æ˜¯ï¼Œå¯ä»¥è¿™æ ·è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œåœ¨çº¦æŸé‡Œåˆ æ‰ç±»å‹å˜é‡ï¼Œç”¨ æœ‰æ¡ä»¶ç±»å‹ æ¥æ›¿æ¢ï¼š\n\n```typescript\ntype AnyFunction = (...args: any[]) => any;\ntype ReturnType2<T extends AnyFunction> = T extends (...args: any[]) => infer R ? R : any;\n```\n\n> å®é™…ä¸Šï¼Œå°±æ˜¯ `ReturnType`\n\n```typescript\ntype __ReturnType<T extends (...args: any) => any> = T extends (...args: any) => infer R ? R : never;\n```\n\n### 11.25 é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\n\n> `TypeScript 2.8` åœ¨ `lib.d.ts` é‡Œå¢åŠ äº†ä¸€äº›é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\n\n> 1. `Exclude<T, U>` -- ä» `T` ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ `U` çš„ç±»å‹\n> 2. `Extract<T, U>` -- æå– `T` ä¸­å¯ä»¥èµ‹å€¼ç»™ `U` çš„ç±»å‹\n> 3. `NonNullable<T>` -- ä» `T` ä¸­å‰”é™¤ `null` å’Œ `undefined`\n> 4. `ReturnType<T>` -- è·å–å‡½æ•°è¿”å›å€¼ç±»å‹\n> 5. `InstanceType<T>` -- è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹\n\n- `Example`:\n\n```typescript\ntype T00 = Exclude<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"b\" | \"d\"\ntype T01 = Extract<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"a\" | \"c\"\n\ntype T02 = Exclude<string | number | (() => void), Function>; // \"string\" | \"number\"\ntype T03 = Extract<string | number | (() => void), Function>; // () => void\n\ntype T04 = NonNullable<string | number | undefined>; // string | number\ntype T05 = NonNullable<(() => string) | string[] | null | undefined>; // (() => string) | string[]\n\nfunction f1(s: string) {\n  return { a: 1, b: s };\n}\n\nclass C {\n  x = 0;\n  y = 0;\n}\n\ntype T10 = ReturnType<() => string>; // string\ntype T11 = ReturnType<(s: string) => void>; // void\ntype T12 = ReturnType<<T>() => T>; // {}\ntype T13 = ReturnType<<T extends U, U extends number[]>() => T>; // number[]\ntype T14 = ReturnType<typeof f1>; // { a: number, b: string }\ntype T15 = ReturnType<any>; // any\ntype T16 = ReturnType<never>; // never\n// type T17 = ReturnType<string>; // Error\n// type T18 = ReturnType<Function>; // Error\n\ntype T20 = InstanceType<typeof C>; // C\ntype T21 = InstanceType<any>; // any\ntype T22 = InstanceType<never>; // never\n// type T23 = InstanceType<string>; // Error\n// type T24 = InstanceType<Function>; // Error\n```\n\n> æ³¨æ„ï¼š`Exclude` ç±»å‹æ˜¯å»ºè®®çš„ `Diff` ç±»å‹çš„ä¸€ç§å®ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ `Exclude` è¿™ä¸ªåå­—æ˜¯ä¸ºäº†é¿å…ç ´åå·²ç»å®šä¹‰äº†çš„ `Diff` çš„ä»£ç ï¼Œå¹¶ä¸”æˆ‘ä»¬æ„Ÿè§‰è¿™ä¸ªåå­—èƒ½æ›´å¥½åœ°è¡¨è¾¾ç±»å‹çš„è¯­ä¹‰ã€‚æˆ‘ä»¬æ²¡æœ‰å¢åŠ  `Omit<T, K>` ç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å¾ˆå®¹æ˜“çš„ç”¨ `Pick<T, Exclude<keyof T, K>>` æ¥è¡¨ç¤º\n\n## åäºŒã€å®ç”¨å·¥å…·ç±»å‹\n\n> `TypeScript` æä¾›ä¸€äº›å·¥å…·ç±»å‹æ¥å¸®åŠ©å¸¸è§çš„ç±»å‹è½¬æ¢ã€‚è¿™äº›ç±»å‹æ˜¯å…¨å±€å¯è§çš„ã€‚\n\n### 12.1 Partial å±€éƒ¨çš„\n\n> æ„é€ ç±»å‹ `T`, å¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®æˆå¯é€‰çš„ï¼Œå®ƒçš„è¿”å›ç±»å‹è¡¨ç¤ºè¾“å…¥ç±»å‹çš„æ‰€æœ‰å­ç±»å‹ã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface PartialTodo {\n  title: string;\n  description: string;\n}\n\nfunction updateTodo(todo: PartialTodo, fieldsToUpdate: Partial<PartialTodo>) {\n  return { ...todo, ...fieldsToUpdate };\n}\n\nconst partialTodo1 = {\n  title: \"organize desk\",\n  description: \"clear clutter\"\n};\n\nconst partialTodo2 = updateTodo(partialTodo1, {\n  description: \"throw out trash\"\n});\n```\n\n### 12.2 Readonly åªè¯»çš„\n\n> æ„é€ ç±»å‹ T**ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸º** readonly**ï¼Œä¹Ÿå°±æ˜¯è¯´æ„é€ å‡ºçš„ç±»å‹çš„å±æ€§ä¸èƒ½è¢«å†æ¬¡èµ‹å€¼**\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface ReadonlyTodo {\n  title: string;\n}\n\nconst readonlyTodo: Readonly<ReadonlyTodo> = {\n  title: \"Delete inactive users\"\n};\n\nreadonlyTodo.title = \"Hello\"; // Error: cannot reassign a readonly property\n\n// Object.freeze\nfunction freeze<T>(obj: T): Readonly<T>;\n```\n\n### 12.3 Record<T, K> è®°å½•\n\n> æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹ä¸º `K`ï¼Œå±æ€§å€¼çš„ç±»å‹ä¸º `T`ã€‚è¿™ä¸ªå·¥å…·å¯ç”¨æ¥å°†æŸä¸ªç±»å‹çš„å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ä¸Šã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface PageInfo {\n  title: string;\n}\n\ntype Page = \"home\" | \"about\" | \"contact\";\n\nconst x: Record<Page, PageInfo> = {\n  about: { title: \"about\" },\n  contact: { title: \"concat\" },\n  home: { title: \"home\" }\n};\n```\n\n### 12.4 Pick<T, K> æŒ‘é€‰\n\n> ä»ç±»å‹ `T` ä¸­æŒ‘é€‰éƒ¨åˆ†å±æ€§ `K` æ¥æ„é€ ç±»å‹\n\n```typescript\ninterface PickTodo {\n  title: string;\n  description: string;\n  completed: boolean;\n}\n\ntype TodoPreview = Pick<PickTodo, \"title\" | \"completed\">;\n\nconst pickTodo: TodoPreview = {\n  title: \"Clean room\",\n  completed: false\n};\n```\n\n### 12.5 Exclude<T, U> å‰”é™¤\n\n> ä»ç±»å‹ `T` ä¸­å‰”é™¤æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ `U` çš„å±æ€§ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\ntype T0 = Exclude<\"a\" | \"b\" | \"c\", \"a\">; // \"b\" | \"c\"\ntype T1 = Exclude<\"a\" | \"b\" | \"c\", \"a\" | \"b\">; // \"c\"\ntype T2 = Exclude<string | number | (() => void), Function>; // string | number\n```\n\n### 12.6 Extract<T, U> æå–\n\n> ä»ç±»å‹ `T` ä¸­æå–æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ `U` çš„ç±»å‹ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚\n\n```typescript\ntype T01 = Extract<\"a\" | \"b\" | \"c\", \"a\" | \"f\">; // \"a\"\ntype T02 = Extract<string | number | (() => void), Function>; // () => void\n```\n\n### 12.7 NonNullable\n\n> ä»ç±»å‹ `T` ä¸­å‰”é™¤ `null` å’Œ `undefined`ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹\n\n- ä¾‹å­ï¼š\n\n```typescript\ntype T10 = NonNullable<string | number | undefined>; // string | number\ntype T11 = NonNullable<string[] | null | undefined>; // string[]\n```\n\n### 12.8 ReturnType è¿”å›å€¼ç±»å‹\n\n> ç”±å‡½æ•°ç±»å‹ `T` çš„è¿”å›å€¼ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹\n\n- ä¾‹å­ï¼š\n\n```typescript\nfunction f1(s: string) {\n  return { a: 1, b: s };\n}\n\ntype _T0 = ReturnType<() => string>; // string\ntype _T1 = ReturnType<(s: string) => void>; // void\ntype _T2 = ReturnType<<T>() => T>; // {}\ntype _T3 = ReturnType<<T extends U, U extends number[]>() => T>; // number[]\ntype _T4 = ReturnType<typeof f1>; // { a: number, b: string }\ntype _T5 = ReturnType<any>; // any\ntype _T6 = ReturnType<never>; // never\ntype _T7 = ReturnType<string>; // Error\ntype _T8 = ReturnType<Function>; // Error\n```\n\n### 12.9 InstanceType æ„é€ å‡½æ•° å®ä¾‹ç±»å‹\n\n> ç”±æ„é€ å‡½æ•°ç±»å‹ `T` çš„å®ä¾‹ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹ã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\nclass C {\n  x = 0;\n  y = 0;\n}\n\ntype _T01 = InstanceType<typeof C>; // C\ntype _T02 = InstanceType<any>; // any\ntype _T03 = InstanceType<never>; // never\ntype _T04 = InstanceType<string>; // Error\ntype _T05 = InstanceType<Function>; // Error\n```\n\n### 12.10 Required\n\n> æ„é€ ä¸€ä¸ªç±»å‹ï¼Œä½¿ç±»å‹ `T` çš„æ‰€æœ‰å±æ€§ä¸º `required`\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface Props {\n  a?: number;\n  b?: string;\n}\n\nconst obj: Props = { a: 5 }; // Ok\nconst obj2: Required<Props> = { a: 5 }; // Error, property 'b' missing\n```\n\n### 12.11 ThisType this\n\n> è¿™ä¸ªå·¥å…·ä¸ä¼šè¿”å›ä¸€ä¸ªè½¬æ¢åçš„ç±»å‹ã€‚å®ƒä½œä¸ºä¸Šä¸‹æ–‡çš„ `this` ç±»å‹çš„ä¸€ä¸ªæ ‡è®°ã€‚\n> æ³¨æ„ï¼šè‹¥æƒ³è¦ä½¿ç”¨æ­¤ç±»å‹ï¼Œå¿…é¡»å¯ç”¨ `--noImplicitThis`\n\n- ä¾‹å­ï¼š\n\n```typescript\n// Compile with --noImplicitThis\ntype ObjectDescriptor<D, M> = {\n  data?: D;\n  methods?: M & ThisType<D & M>; // Type of 'this' in methods is D & M\n};\n\nfunction makeObject<D, M>(desc: ObjectDescriptor<D, M>): D & M {\n  let data: object = desc.data || {};\n  let methods: object = desc.methods || {};\n  return { ...data, ...methods } as D & M;\n}\n\nlet _obj = makeObject({\n  data: { x: 0, y: 0 },\n  methods: {\n    moveBy(dx: number, dy: number) {\n      this.x += dx; // Strongly typed this\n      this.y += dy; // Strongly typed this\n    }\n  }\n});\n_obj.x = 10;\n_obj.y = 10;\n_obj.moveBy(5, 5);\n```\n\n> ä¸Šé¢ä¾‹å­ä¸­ï¼Œ`makeObject` å‚æ•°é‡Œçš„ `methods` å¯¹è±¡å…·æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡ç±»å‹ `ThisType<D & M>`ï¼Œå› æ­¤ `methods` å¯¹è±¡çš„æ–¹æ³•é‡Œ this çš„ç±»å‹ä¸º `{ x: number, y: number } & { moveBy(dx: number, dy: number): number }`ã€‚\n> åœ¨ `lib.d.ts` é‡Œï¼Œ`ThisType<T>` æ ‡è¯†æ¥å£æ˜¯ä¸ªç®€å•çš„ç©ºæ¥å£å£°æ˜ã€‚é™¤äº†åœ¨è¢«è¯†åˆ«ä¸ºå¯¹è±¡å­—é¢é‡çš„ä¸Šä¸‹æ–‡ç±»å‹ä¹‹å¤–ï¼Œè¿™ä¸ªæ¥å£ä¸ä¸€èˆ¬çš„ç©ºæ¥å£æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚\n\n## åä¸‰ã€Symbols\n\n> ä»‹ç»ï¼šè‡ª `ECMAScript 2015` èµ·ï¼Œ`symbol` æˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ï¼Œå°±åƒ `number` å’Œ `string` ä¸€æ ·ã€‚\n\n### 13.1 `symbol` ç±»å‹çš„å€¼æ˜¯é€šè¿‡ `Symbol` æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\n\n```typescript\nlet sym1 = Symbol();\nlet sym2 = Symbol(\"key\"); // å¯é€‰çš„å­—ç¬¦ä¸² key\n```\n\n### 13.2 `Symbols` æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\n\n```typescript\nlet sym3 = Symbol(\"key\");\nlet sym4 = Symbol(\"key\");\nsym3 === sym4; // false symbols æ˜¯å”¯ä¸€çš„\n```\n\n### 13.3 åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œ`symbols` ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\n\n```typescript\nconst sym = Symbol();\nlet obj = {\n  [sym]: \"value\"\n};\nconsole.log(obj[sym]); // \"value\"\n```\n\n### 13.4 `Symbols` ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\n\n```typescript\nconst getClassNameSymbol = Symbol();\n\nclass C {\n  [getClassNameSymbol]() {\n    return \"C\";\n  }\n}\n\nlet c = new C();\nlet className = c[getClassNameSymbol](); // \"C\"\n```\n\n### 13.5 ä¼—æ‰€å‘¨çŸ¥çš„ `Symbols`\n\n> é™¤äº†ç”¨æˆ·å®šä¹‰çš„ `Symbols`ï¼Œè¿˜æœ‰ä¸€äº›å·²ç»ä¼—æ‰€å‘¨çŸ¥çš„å†…ç½® `symbols`ã€‚å†…ç½® `symbols` ç”¨æ¥è¡¨ç¤ºè¯­è¨€å†…éƒ¨çš„è¡Œä¸ºã€‚\n> ä»¥ä¸‹ä¸ºè¿™äº› `symbols` çš„åˆ—è¡¨ï¼š\n\n- `Symbol.hasInstance`\n\n> è¯¥æ–¹æ³•ä¼šè¢« `instanceof` è¿ç®—ç¬¦è°ƒç”¨ã€‚æ„é€ å™¨å¯¹è±¡ç”¨æ¥è¯†åˆ«ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å…¶å®ä¾‹ã€‚\n\n- `Symbol.isConcatSpreadable`\n\n> å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ `Array.prototype.concat` æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ•°ç»„å…ƒç´ æ˜¯å¦å¯å±•å¼€ã€‚\n\n- `Symbol.iterator`\n\n> æ–¹æ³•ï¼Œè¢« `for-of` è¯­å¥è°ƒç”¨ï¼Œã€‚è¿”å›å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨\n\n- `Symbol.match`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.match` è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²\n\n- `Symbol.replace`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.replac`e è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­åŒ¹é…çš„å­ä¸²ã€‚\n\n- `Symbol.search`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.search` è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼è¿”å›è¢«åŒ¹é…éƒ¨åˆ†åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚\n\n- `Symbol.species`\n\n> å‡½æ•°å€¼ï¼Œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚\n\n- `Symbol.split`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.split` è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åˆ†å‰²å­—ç¬¦ä¸²ã€‚\n\n- `Symbol.toPrimitive`\n\n> æ–¹æ³•ï¼Œè¢« `ToPrimitive` æŠ½è±¡æ“ä½œè°ƒç”¨ã€‚æŠŠå¯¹è±¡è½¬æ¢ä¸ºç›¸åº”çš„åŸå§‹å€¼ã€‚\n\n- `Symbol.toStringTag`\n\n> æ–¹æ³•ï¼Œè¢«å†…ç½®æ–¹æ³• `Object.prototype.toString` è°ƒç”¨ã€‚è¿”å›åˆ›å»ºå¯¹è±¡æ—¶é»˜è®¤çš„å­—ç¬¦ä¸²æè¿°ã€‚\n\n- `Symbol.unscopables`\n\n> å¯¹è±¡ï¼Œå®ƒè‡ªå·±æ‹¥æœ‰çš„å±æ€§ä¼šè¢« `with` ä½œç”¨åŸŸæ’é™¤åœ¨å¤–ã€‚\n\n## åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\n\n- å¯è¿­ä»£æ€§\n\n> å½“ä¸€ä¸ªå¯¹è±¡å®ç°äº† `Symbol.iterator` å±æ€§æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯å¯è¿­ä»£çš„ã€‚ä¸€äº›å†…ç½®çš„ç±»å‹å¦‚ `Array`ï¼Œ`Map`ï¼Œ`Set`ï¼Œ`String`ï¼Œ`Int32Array`ï¼Œ`Uint32Array` ç­‰éƒ½å·²ç»å®ç°äº†å„è‡ªçš„ `Symbol.iterator`ã€‚å¯¹è±¡ä¸Šçš„ `Symbol.iterator` å‡½æ•°è´Ÿè´£è¿”å›ä¾›è¿­ä»£çš„å€¼ã€‚\n\n### 14.1 for ... of è¯­å¥\n\n> `for ... of` ä¼šéå†å¯è¿­ä»£å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡ä¸Šçš„ `Symbol.iterator` æ–¹æ³•ã€‚\n\n- ä¸‹é¢æ˜¯åœ¨æ•°ç»„ä¸Šä½¿ç”¨ `for ... of` çš„ç®€å•ä¾‹å­\n\n```typescript\nlet someArray = [1, \"string\", false];\n\nfor (let entry of someArray) {\n  console.log(entry); // 1, \"string\", false\n}\n```\n\n### 14.2 for ... of Vs for ... in è¯­å¥\n\n> `for ... of` å’Œ `for ... in` å‡å¯è¿­ä»£ä¸€ä¸ªåˆ—è¡¨ï¼›ä½†æ˜¯ç”¨äºè¿­ä»£çš„å€¼å´ä¸åŒï¼Œ`for ... in` è¿­ä»£çš„æ˜¯å¯¹è±¡çš„ `é”®` çš„åˆ—è¡¨ï¼Œè€Œ `for ... of` åˆ™è¿­ä»£å¯¹è±¡çš„é”®å¯¹åº”çš„å€¼ã€‚\n\n- ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ï¼š\n\n```typescript\nlet list = [4, 5, 6];\nfor (let i in list) {\n  console.log(i); // \"0\" \"1\" \"2\"\n}\nfor (let i of list) {\n  console.log(i); // \"4\" \"5\" \"6\"\n}\n```\n\n> å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ `for ... in` å¯ä»¥æ“ä½œä»»ä½•å¯¹è±¡ï¼›å®ƒæä¾›äº†æŸ¥çœ‹å¯¹è±¡å±æ€§çš„ä¸€ç§æ–¹æ³•ã€‚ä½†æ˜¯ `for ... of` å…³æ³¨äºè¿­ä»£å¯¹è±¡çš„å€¼ã€‚å†…ç½®å¯¹è±¡ `Map` å’Œ `Set` å·²ç»å®ç°äº† `Symbol.iterator` æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥è®¿é—®å®ƒä»¬ä¿å­˜çš„å€¼ã€‚\n\n```typescript\nlet pets = new Set([\"Cat\", \"Dog\", \"Hamster\"]);\npets[\"species\"] = \"mammals\";\nfor (let pet in pets) {\n  console.log(pet);\n}\nfor (let pet of pets) {\n  console.log(pet); // \"Cat\", \"Dog\", \"Hamster\"\n}\n```\n\n### 14.3 ä»£ç ç”Ÿæˆç›®æ ‡ä¸º `ES5` å’Œ `ES3`\n\n> å½“ç”Ÿæˆç›®æ ‡ä¸º `ES5` æˆ– `ES3`ï¼Œè¿­ä»£å™¨åªå…è®¸åœ¨ `Array` ç±»å‹ä¸Šä½¿ç”¨ã€‚åœ¨éæ•°ç»„å€¼ä¸Šä½¿ç”¨ `for ... of` è¯­å¥ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå°±ç®—è¿™äº›éæ•°ç»„å€¼å·²ç»å®ç°äº† `Symbol.iterator` å±æ€§ã€‚\n\n> ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç®€å•çš„ `for` å¾ªç¯åšä¸º `for ... of` å¾ªç¯ï¼Œæ¯”å¦‚ï¼š\n\n```typescript\nlet numbers = [1, 2, 3];\nfor (let num of numbers) {\n  console.log(num);\n}\n// ç”Ÿæˆçš„ä»£ç ä¸ºï¼š\nvar number = [1, 2, 3];\nfor (var _i = 0; _i < numbers.length; _i++) {\n  var num = numbers[_i];\n  console.log(num);\n}\n```\n\n### 14.4 ç›®æ ‡ä¸º `ECMAScript 2015` æˆ–æ›´é«˜\n\n> å½“ç›®æ ‡ä¸ºå…¼å®¹ `ECMAScript 2015` çš„å¼•æ“æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”å¼•æ“çš„ `for ... of` å†…ç½®è¿­ä»£å™¨å®ç°æ–¹å¼ã€‚\n\n## åäº”ã€æ¨¡å—\n\n### 15.1 å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\n\n> è¯·åŠ¡å¿…æ³¨æ„ä¸€ç‚¹ï¼š`TypeScript 1.5` é‡Œæœ¯è¯­åå·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚\"`å†…éƒ¨æ¨¡å—`\" ç°åœ¨è¢«ç§°ä½œ \"`å‘½åç©ºé—´`\"ã€‚\"`å¤–éƒ¨æ¨¡å—`\" ç°åœ¨åˆ™ç®€ç§°ä¸º \"`æ¨¡å—`\"ã€‚è¿™æ˜¯ä¸ºäº†ä¸ `ECMAScript 2015` é‡Œçš„æœ¯è¯­ä¿æŒå·²ä¸€è‡´ï¼Œ (ä¹Ÿå°±æ˜¯è¯´ `module X` { ç›¸å½“äºç°åœ¨æ¨èçš„å†™æ³• `namespace X` })\n\n### 15.2 ä»‹ç»\n\n1. ä» `ECMAScript 2015` å¼€å§‹ï¼Œ`JavaScript` å¼•å…¥äº†æ¨¡å—çš„æ¦‚å¿µã€‚`TypeScript` ä¹Ÿæ²¿ç”¨è¿™ä¸ªæ¦‚å¿µã€‚\n2. æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼›è¿™æ„å‘³ç€å®šä¹‰åœ¨ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ç­‰ç­‰åœ¨æ¨¡å—å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨ `export` å½¢å¼ä¹‹ä¸€å¯¼å‡ºå®ƒä»¬ã€‚ç›¸åï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶å®ƒæ¨¡å—å¯¼å‡ºçš„ `å˜é‡`ï¼Œ`å‡½æ•°`ï¼Œ`ç±»`ï¼Œ`æ¥å£` ç­‰çš„æ—¶å€™ï¼Œä½ å¿…é¡»è¦å¯¼å…¥å®ƒä»¬ï¼Œå¯ä»¥ä½¿ç”¨ `import` å½¢å¼ä¹‹ä¸€ã€‚\n3. æ¨¡å—æ˜¯è‡ªå£°æ˜çš„ï¼›ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡åœ¨æ–‡ä»¶çº§åˆ«ä¸Šä½¿ç”¨ `import` å’Œ `exports` å»ºç«‹çš„ã€‚\n4. æ¨¡å—ä½¿ç”¨æ¨¡å—åŠ è½½å™¨å»å¯¼å…¥å…¶å®ƒçš„æ¨¡å—ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ¨¡å—åŠ è½½å™¨çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œæ­¤æ¨¡å—ä»£ç å‰å»æŸ¥æ‰¾å¹¶æ‰§è¡Œè¿™ä¸ªæ¨¡å—çš„æ‰€æœ‰ä¾èµ–ã€‚å¤§å®¶æœ€ç†ŸçŸ¥çš„ `JavaScript` æ¨¡å—åŠ è½½å™¨æ˜¯æœåŠ¡ä¸ `Node.js` çš„ `CommonJS` å’Œ æœåŠ¡äº `Web` åº”ç”¨çš„ `Require.js`ã€‚\n5. `TypeScript` å’Œ `ECMAScript 2015` ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ `import` æˆ–è€… `export` çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ `import` æˆ–è€… `export` å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å°†è¢«è§†ä¸ºå…¨å±€å¯è§çš„ (å› æ­¤å¯¹æ¨¡å—ä¹Ÿæ˜¯å¯è§çš„)ã€‚\n\n### 15.3 å¯¼å‡º\n\n#### 15.3.1. å¯¼å‡ºå£°æ˜\n\n> ä»»ä½•å£°æ˜( æ¯”å¦‚ `å˜é‡`ï¼Œ`å‡½æ•°`ï¼Œ`ç±»`ï¼Œ`ç±»å‹åˆ«å` æˆ– `æ¥å£` )éƒ½èƒ½å¤Ÿé€šè¿‡æ·»åŠ  `export` å…³é”®å­—æ¥å¯¼å‡ºã€‚\n\n```typescript\nexport interface StringValidator {\n  isAcceptable(s: string): boolean;\n}\nexport const numberRegexp = /^[0-9]+$/;\nexport class ZipCodeValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegexp.test(s);\n  }\n}\n```\n\n#### 15.3.2 å¯¼å‡ºè¯­å¥\n\n> å¯¼å‡ºè¯­å¥å¾ˆä¾¿åˆ©ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å¯¼å‡ºçš„éƒ¨åˆ†é‡å‘½åï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¿™æ ·æ”¹å†™ï¼š\n\n```typescript\nclass ZipCodeValidator1 implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegexp.test(s);\n  }\n}\nexport { ZipCodeValidator1 };\nexport { ZipCodeValidator1 as mainValidator };\n```\n\n#### 15.3.3 é‡æ–°å¯¼å‡º\n\n> æˆ‘ä»¬ç»å¸¸ä¼šå»æ‰©å±•å…¶å®ƒæ¨¡å—ï¼Œå¹¶ä¸”åªå¯¼å‡ºé‚£ä¸ªæ¨¡å—çš„é‚£éƒ¨åˆ†å†…å®¹ã€‚\n\n> é‡æ–°å¯¼å‡ºåŠŸèƒ½å¹¶ä¸ä¼šåœ¨å½“å‰æ¨¡å—å¯¼å…¥é‚£ä¸ªæ¨¡å—æˆ–å®šä¹‰ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚\n\n```typescript\nexport class ParseIntBasedZipCodeValidator {\n  isAcceptable(s: string) {\n    return s.length === 5 && parseInt();\n  }\n}\n// å¯¼å‡ºåŸå…ˆçš„éªŒè¯å™¨ä½†åšäº†é‡å‘½å\nexport { ZipCodeValidator as RegExpBasedZipCodeValidator } from \"./ZipCodeValidator\";\n```\n\n> æˆ–è€…ä¸€ä¸ªæ¨¡å—å¯ä»¥åŒ…è£¹å¤šä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒä»¬å¯¼å‡ºçš„å†…å®¹è”åˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡è¯­æ³•ï¼š`export * from \"module\"`\n\n```typescript\nexport * from \"./StringValidator\";\nexport * from \"./LetterOnlyValidator\";\nexport * from \"./ZipCodeValidator\";\n```\n\n### 15.4 å¯¼å…¥\n\n> æ¨¡å—çš„å¯¼å…¥æ“ä½œä¸å¯¼å‡ºä¸€æ ·ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ `import` å½¢å¼ä¹‹ä¸€æ¥å¯¼å…¥å…¶å®ƒæ¨¡å—ä¸­çš„å¯¼å‡ºå†…å®¹ã€‚\n\n#### 15.4.1 å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\n\n```typescript\nimport { ZipCodeValidator } from \"./ZipCodeValidator\";\nlet myValidator = new ZipCodeValidator();\n```\n\n> å¯ä»¥å¯¹å¯¼å…¥å†…å®¹é‡å‘½å\n\n```typescript\nimport { ZipCodeValidator as ZCV } from \"./ZipCodeValidator\";\nlet myValidator = new ZCV();\n```\n\n#### 15.4.2 å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\n\n```typescript\nimport * as validator from \"./ZipCodeValidator\";\nlet myValidator = new validator.ZipCodeValidator();\n```\n\n#### 15.4.3 å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\n\n> å°½ç®¡ä¸æ¨èè¿™ä¹ˆåšï¼Œä¸€äº›æ¨¡å—ä¼šè®¾ç½®ä¸€äº›å…¨å±€çŠ¶æ€ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚è¿™äº›æ¨¡å—å¯èƒ½æ²¡æœ‰ä»»ä½•çš„å¯¼å‡ºæˆ–ç”¨æˆ·æ ¹æœ¬\n\n> å°±ä¸å…³æ³¨å®ƒçš„å¯¼å‡ºã€‚ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥å¯¼å…¥è¿™äº›æ¨¡å—ã€‚\n\n```typescript\nimport \"./my-module.js\";\n```\n\n### 15.5 é»˜è®¤å¯¼å‡º\n\n> æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥æœ‰ä¸€ä¸ª `default` å¯¼å‡ºã€‚é»˜è®¤å¯¼å‡ºä½¿ç”¨ `default` å…³é”®å­—æ ‡è®°ï¼›å¹¶ä¸”ä¸€ä¸ªæ¨¡å—åªèƒ½å¤Ÿæœ‰ä¸€ä¸ª `default` å¯¼å‡ºã€‚éœ€è¦ä½¿ç”¨ ä¸€ç§ç‰¹æ®Šçš„å¯¼å…¥å½¢å¼æ¥å¯¼å…¥ `default` å¯¼å‡ºã€‚\n\n> `default` å¯¼å‡ºååˆ†ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œåƒ `JQuery` è¿™æ ·çš„ç±»åº“å¯èƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡º `jQuery` æˆ– `$`ï¼Œå¹¶ä¸”æˆ‘ä»¬åŸºæœ¬ä¸Šä¹Ÿä¼šä½¿ç”¨åŒæ ·çš„åå­— `jQuery` æˆ– `$` å¯¼å‡º `JQuery`ã€‚\n\n- `JQuery.d.ts`\n\n```typescript\ndeclare let $: JQuery;\nexport default $;\n```\n\n- `App.ts`\n\n```typescript\nimport $ from \"JQuery\";\n$(\"button.continue\").html(\"Next step ...\");\n```\n\n> ç±»å’Œå‡½æ•°å£°æ˜å¯ä»¥ç›´æ¥è¢«æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºã€‚æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºçš„ç±»å’Œå‡½æ•°çš„åå­—æ˜¯å¯ä»¥çœç•¥çš„ã€‚\n\n- `ZipCodeValidator.ts`\n\n```typescript\nexport default class ZipCodeValidator {\n  static numberRegExp = /^[0-9]+$/;\n  isAcceptable(s: string) {\n    return s.length === 5 && ZipCodeValidator.numberRegExp.test(s);\n  }\n}\n```\n\n- `Test.ts`\n\n```typescript\nimport validator from \"./ZipCodeValidator\";\nlet myValidator = new validator();\n```\n\n> `æˆ–è€…`\n\n- `StaticZipCodeValidator.ts`\n\n```typescript\nconst numberRegExp = /^[0-9]+$/;\nexport default function (s: string) {\n  return s.length === 5 && numberRegExp.test(s);\n}\n```\n\n- `Test.ts`\n\n```typescript\nimport validate from \"./StaticZipCodeValidator\";\nlet strings = [\"Hello\", \"98052\", \"101\"];\n// use function validate\nstrings.forEach(s => {\n  console.log(`\"${s}\" ${validate(s)} ? \" matches\" : \" does not match\"`);\n});\n```\n\n> `default` å¯¼å‡ºä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå€¼\n\n- `OneTwoThree.ts`\n\n```typescript\nexport default \"123\";\n```\n\n- `Log.ts`\n\n```typescript\nimport num from \"./OneTwoThree\";\nconsole.log(num); // 123\n```\n\n> `export =` å’Œ `import = require()`\n\n1. `CommonJS` å’Œ `AMD` çš„ç¯å¢ƒé‡Œéƒ½æœ‰ä¸€ä¸ª `exports` å˜é‡ï¼Œè¿™ä¸ªå˜é‡åŒ…å«äº†ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºå†…å®¹ã€‚\n2. `CommonJS` å’Œ `AMD` çš„ `exports` éƒ½å¯ä»¥è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µä¸‹å…¶ä½œç”¨å°±ç±»ä¼¼äº es6 è¯­æ³•é‡Œçš„é»˜è®¤å¯¼å‡ºï¼Œå³ `export default` è¯­æ³•äº†ã€‚è™½ç„¶ä½œç”¨ç›¸ä¼¼ï¼Œä½†æ˜¯ `export default` è¯­æ³•å¹¶ä¸èƒ½å…¼å®¹ `CommonJS` å’Œ `AMD` çš„ `exports`ã€‚\n3. ä¸ºäº†æ”¯æŒ `CommonJS` å’Œ `AMD` çš„ `exports`ï¼Œ`TypeScript` æä¾›äº† `export =` è¯­æ³•ã€‚\n4. `export =` è¯­æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚è¿™é‡Œçš„å¯¹è±¡ä¸€è¯æŒ‡çš„æ˜¯ç±»ï¼Œæ¥å£ï¼Œå‘½åç©ºé—´ï¼Œå‡½æ•°æˆ–æšä¸¾ã€‚\n5. è‹¥ä½¿ç”¨ `export =` å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ `TypeScript` çš„ç‰¹å®šè¯­æ³• `import module = require('module')` æ¥å¯¼å…¥æ­¤æ¨¡å—ã€‚\n\n- `ZipCodeValidator.ts`\n\n```typescript\nlet numberRegExp = /^[0-9]+$/;\n\nclass ZipCodeValidator {\n  isAcceptable(s: string) {\n    return s.length === 5 && numberRegExp.test(s);\n  }\n}\n\nexport = ZipCodeValidator; // é‡ç‚¹\n```\n\n- `Test.ts`\n\n```typescript\nimport zip = require(\"./ZipCodeValidator\"); // é‡ç‚¹\n\nlet strings = [\"Hello\", \"98502\", \"101\"];\nlet validator = new zip();\nstrings.forEach(s => {\n  console.log(`\"${s}\" - ${validator.isAcceptable(s) ? \"matches\" : \"does not match\"}`);\n});\n```\n\n### 15.6 ç”Ÿæˆæ¨¡å—ä»£ç \n\n> æ ¹æ®ç¼–è¯‘æ—¶æŒ‡å®šçš„æ¨¡å—ç›®æ ‡å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”çš„ä¾› `Node.js\\(CommonJS\\)ï¼ŒRequire.js\\(AMD\\)`ï¼Œ`UMD`ï¼Œ`SystemJS` æˆ– `ECMAScript 2015 native module\\(ES6\\)` æ¨¡å—åŠ è½½ç³»ç»Ÿä½¿ç”¨çš„ä»£ç ã€‚\n\n> æƒ³è¦äº†è§£ç”Ÿæˆä»£ç ä¸­ `define`ï¼Œ`require` å’Œ `register` çš„æ„ä¹‰ï¼Œéœ€è¦å‚è€ƒç›¸åº”çš„æ¨¡å—åŠ è½½å™¨çš„æ–‡æ¡£ã€‚\n\n- `SimpleModule.ts`\n\n```typescript\nimport m = require(\"mod\");\nexport let t = m.something + 1;\n```\n\n- `AMD / RequireJS SimpleModule.js`\n\n```typescript\ndefine([\"require\", \"exports\", \"./mod\"], function (require, exports, mod_1) {\n  exports.t = mod_1.something + 1;\n});\n```\n\n- `CommonJS / Node SimpleModule.js`\n\n```typescript\nimport mod_1 = require(\"./mod\");\nexports.t = mod_1.something + 1;\n```\n\n- `UMD SimpleModule.js`\n\n```typescript\n(function (factory) {\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\n    let v = factory(require, exports);\n    if (v !== undefined) module.exports = v;\n  } else if (typeof define === \"function\" && define.amd) {\n    define([\"require\", \"exports\", \"./mod\"], factory);\n  }\n})(function (require, exports) {\n  let mod_1 = require(\"./mod\");\n  exports.t = mod_1.something + 1;\n});\n```\n\n- `System SimpleModule.js`\n\n```typescript\nSystem.register([\"./mod\"], function (exports_1) {\n  let mod_1;\n  let t;\n  return {\n    setters: [\n      function (mod_1_1) {\n        mod_1 = mod_1_1;\n      }\n    ],\n    execute: function () {\n      exports_1(\"t\", (t = mod_1.something + 1));\n    }\n  };\n});\n```\n\n- `Native ECMAScript 2015 modules SimpleModule.js`\n\n```typescript\nimport { something } from \"./mod\";\nexport let t = something + 1;\n```\n\n### 15.7 ç®€å•ç¤ºä¾‹\n\n> ä¸‹é¢æˆ‘ä»¬æ¥æ•´ç†ä¸€ä¸‹å‰é¢çš„éªŒè¯å™¨å®ç°ï¼Œæ¯ä¸ªæ¨¡å—åªæœ‰ä¸€ä¸ªå‘½åçš„å¯¼å‡ºã€‚\n\n> ä¸ºäº†ç¼–è¯‘ï¼Œæˆ‘ä»¬å¿…é¡»è¦åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šä¸€ä¸ªæ¨¡å—ç›®æ ‡ã€‚å¯¹äº `Node.js` æ¥è¯´ï¼Œä½¿ç”¨ `--module commonjs`ï¼›å¯¹äº `Require.js` æ¥è¯´ï¼Œä½¿ç”¨ `--module amd`ã€‚\n\n- æ¯”å¦‚ï¼š\n\n```typescript\ntsc --module commonjs Test.ts\n```\n\n> ç¼–è¯‘å®Œæˆåï¼Œæ¯ä¸ªæ¨¡å—ä¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ `.js` æ–‡ä»¶ã€‚å¥½æ¯”ä½¿ç”¨äº† `reference` æ ‡ç­¾ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ® `import` è¯­å¥ç¼–è¯‘ç›¸åº”çš„æ–‡ä»¶ã€‚\n\n- `Validation.ts`\n\n```typescript\nexport interface StringValidator {\n  isAcceptable(s: string): boolean;\n}\n```\n\n- `LetterOnlyValidator.ts`\n\n```typescript\nimport { StringValidator } from \"./Validation\";\nconst lettersRegExp = /^[A-Za-z]+$/;\n\nexport class LetterOnlyValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return lettersRegExp.test(s);\n  }\n}\n```\n\n- `ZipCodeValidator.ts`\n\n```typescript\nimport { StringValidator } from \"./Validation\";\nconst numberRegExp = /^[0-9]+$/;\n\nexport class ZipCodeValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegExp.test(s);\n  }\n}\n```\n\n- `Test.ts`\n\n```typescript\nimport { StringValidator } from \"./Validation\";\nimport { ZipCodeValidator } from \"./ZipCodeValidator\";\nimport { LetterOnlyValidator } from \"./LetterOnlyValidator\";\n\n// Some samples to try\nlet strings = [\"Hello\", \"98052\", \"101\"];\n\n// Validators to use\nlet validators: { [s: string]: StringValidator } = {};\nvalidators[\"ZIP code\"] = new ZipCodeValidator();\nvalidators[\"Letters only\"] = new LetterOnlyValidator();\n\n// Show whether each string passed each validator\nstrings.forEach(s => {\n  for (let name in validators) {\n    console.log(`\"${s}\" - ${validators[name].isAcceptable(s) ? \"matches\" : \"does not match\"} ${name}`);\n  }\n});\n```\n\n### 15.8 å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\n\n1. æœ‰æ—¶å€™ï¼Œä½ åªæƒ³åœ¨æŸç§æ¡ä»¶ä¸‹æ‰åŠ è½½æŸä¸ªæ¨¡å—ã€‚åœ¨ `TypeScript` é‡Œï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®ç°å®ƒå’Œå…¶å®ƒçš„é«˜çº§åŠ è½½åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨æ¨¡å—åŠ è½½å™¨å¹¶ä¸”ä¿è¯ç±»å‹å®Œå…¨ã€‚\n2. ç¼–è¯‘å™¨ä¼šæ£€æµ‹æ˜¯å¦æ¯ä¸ªæ¨¡å—éƒ½ä¼šåœ¨ç”Ÿæˆçš„ `JavaScript` ä¸­ç”¨åˆ°ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—æ ‡è¯†ç¬¦åªåœ¨ç±»å‹æ³¨è§£éƒ¨åˆ†ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œå…¨æ²¡æœ‰åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ï¼Œå°±ä¸ä¼šç”Ÿæˆ `require` è¿™ä¸ªæ¨¡å—çš„ä»£ç ã€‚çœç•¥æ‰æ²¡æœ‰ç”¨åˆ°çš„å¼•ç”¨å¯¹æ€§èƒ½æå‡æ˜¯å¾ˆæœ‰ç›Šçš„ï¼Œå¹¶åŒæ—¶æä¾›äº†é€‰æ‹©æ€§åŠ è½½æ¨¡å—çš„èƒ½åŠ›ã€‚\n3. è¿™ç§æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ `import id = require(\"...\")` è¯­å¥å¯ä»¥è®©æˆ‘ä»¬è®¿é—®æ¨¡å—å¯¼å‡ºçš„ç±»å‹ã€‚æ¨¡å—åŠ è½½å™¨ä¼šè¢«åŠ¨æ€è°ƒç”¨(é€šè¿‡ `require`)ï¼Œå°±åƒä¸‹é¢çš„ `if` ä»£ç å—é‡Œé‚£æ ·ã€‚å®ƒåˆ©ç”¨äº†çœç•¥å¼•ç”¨çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æ¨¡å—åªåœ¨è¢«éœ€è¦æ—¶åŠ è½½ã€‚ä¸ºäº†è®©è¿™ä¸ªæ¨¡å—å·¥ä½œï¼Œä¸€å®šè¦æ³¨æ„ `import` å®šä¹‰çš„æ ‡è¯†ç¬¦åªèƒ½åœ¨è¡¨ç¤ºç±»å‹å¤„ä½¿ç”¨(ä¸èƒ½åœ¨ä¼šè½¬æ¢æˆ `JavaScript` çš„åœ°æ–¹ã€‚)\n4. ä¸ºäº†ç¡®ä¿ç±»å‹å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `typeof` å…³é”®å­—ã€‚`typeof` å…³é”®å­—ï¼Œå½“åœ¨è¡¨ç¤ºç±»å‹çš„åœ°æ–¹ä½¿ç”¨æ—¶ï¼Œä¼šå¾—å‡ºä¸€ä¸ªç±»å‹å€¼ï¼Œè¿™é‡Œå°±è¡¨ç¤ºæ¨¡å—çš„ç±»å‹ã€‚\n\n- `ç¤ºä¾‹ 1`. `Node.js` é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½\n\n```typescript\ndeclare function require(moduleName: string): any;\nimport { ZipCodeValidator as Zip } from \"./ZipCodeValidator\";\nif (needZipValidator) {\n  let ZipCodeValidator: typeof Zip = require(\"./ZipCodeValidator\");\n  let validator = new ZipCodeValidator();\n  if (validator.isAcceptable(\"...\")) {\n    /!* ... *!/;\n  }\n}\n```\n\n- `ç¤ºä¾‹ 2`. `require.js` é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½\n\n```typescript\ndeclare function require(moduleNames: string[], onLoad: (...args: any[]) => void): void;\nimport * as Zip from \"./ZipCodeValidator\";\nif (needZipValidator) {\n  require([\"./ZipCodeValidator\"], (ZipCodeValidator: typeof Zip) => {\n    let validator = new ZipCodeValidator.ZipCodeValidator();\n    if (validator.isAcceptable(\"...\")) {\n      /!* ... *!/;\n    }\n  });\n}\n```\n\n- `ç¤ºä¾‹ 3`. `System.js` é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½\n\n```typescript\ndeclare const System: any;\nimport { ZipCodeValidator as Zip } from \"./ZipCodeValidator\";\nif (needZipValidator) {\n  System.import(\"./ZipCodeValidator\").then((ZipCodeValidator: typeof Zip) => {\n    var x = new ZipCodeValidator();\n    if (x.isAcceptable(\"...\")) {\n      /!*...*!/;\n    }\n  });\n}\n```\n\n### 15.9 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\n\n> è¦æƒ³æè¿°é `TypeScript` ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“æ‰€æš´éœ²çš„ `API`ã€‚\n\n> æˆ‘ä»¬å«å®ƒå£°æ˜å› ä¸ºå®ƒä¸æ˜¯'å¤–éƒ¨ç¨‹åº'çš„å…·ä½“å®ç°ï¼Œå®ƒä»¬é€šå¸¸æ˜¯åœ¨ `.d.ts` æ–‡ä»¶é‡Œå®šä¹‰çš„ã€‚ç±»ä¼¼äº `C/C++` é‡Œçš„ `.h` æ–‡ä»¶ã€‚\n\n#### 15.9.1 å¤–éƒ¨æ¨¡å—\n\n> åœ¨ `Node.js` é‡Œå¤§éƒ¨åˆ†å·¥ä½œæ˜¯é€šè¿‡åŠ è½½ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—å®ç°çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¡¶çº§çš„ `export` å£°æ˜æ¥ä¸ºæ¯ä¸ªæ¨¡å—éƒ½å®šä¹‰ä¸€ä¸ª `.d.ts` æ–‡ä»¶ï¼Œä½†æœ€å¥½è¿˜æ˜¯å†™åœ¨ä¸€ä¸ªå¤§çš„ `.d.ts` æ–‡ä»¶é‡Œã€‚æˆ‘ä»¬ä½¿ç”¨ä¸æ„é€ ä¸€ä¸ªå¤–éƒ¨å‘½åç©ºé—´ç›¸ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨ `module` å…³é”®å­—å¹¶ä¸”æŠŠåå­—ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œæ–¹ä¾¿ä¹‹å `import`ã€‚\n\n- `ä¾‹å¦‚ï¼š`\n- `node.d.ts(simplified except)`\n\n```typescript\ndeclare module \"url\" {\n  export interface Url {\n    protocol?: string;\n    hostname?: string;\n    pathname?: string;\n  }\n\n  export function parse(urlStr: string, parseQueryString?, slashesDenoteHost?): Url;\n}\n\ndeclare module \"path\" {\n  export function normalize(p: string): string;\n  export function join(...paths: any[]): string;\n  export let sep: string;\n}\n```\n\n> ç°åœ¨æˆ‘ä»¬å¯ä»¥ `/// <reference> node.d.ts` å¹¶ä¸”ä½¿ç”¨ `import url = require('url')`ï¼›æˆ– `import * as URl from \"url\"` åŠ è½½æ¨¡å—ã€‚`\n\n```typescript\n/// <reference path=\"node.d.ts\">\nimport * as URL from \"url\";\n\nlet myUrl = URL.parse(\"http://www.typescriptlang.org\");\n```\n\n#### 15.9.2 å¤–éƒ¨æ¨¡å—ç®€å†™\n\n> å‡å¦‚ä½ ä¸æƒ³åœ¨ä½¿ç”¨ä¸€ä¸ªæ–°æ¨¡å—ä¹‹å‰èŠ±æ—¶é—´å»ç¼–å†™å£°æ˜ï¼Œä½ å¯ä»¥é‡‡ç”¨å£°æ˜çš„ç®€å†™å½¢å¼ä»¥ä¾¿èƒ½å¤Ÿå¿«é€Ÿä½¿ç”¨å®ƒã€‚\n\n> `declarations.d.ts`\n\n```typescript\ndeclare module \"hot-new-module\";\n```\n\n- ç®€å†™æ¨¡å—é‡Œæ‰€æœ‰å¯¼å‡ºç±»å‹å°†æ˜¯ `any`\n\n```typescript\nimport x, { y } from \"hot-new-module\";\nx(y);\n```\n\n#### 15.9.3 æ¨¡å—å£°æ˜é€šé…ç¬¦\n\n> æŸäº›æ¨¡å—åŠ è½½å™¨å¦‚ `SystemJS` å’Œ `AMD` æ”¯æŒå¯¼å…¥é `JavaScript` å†…å®¹ã€‚å®ƒä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªå‰ç¼€æˆ–åç¼€æ¥è¡¨ç¤ºç‰¹æ®Šçš„åŠ è½½è¯­æ³•ï¼Œæ¨¡å—å£°æ˜é€šé…ç¬¦å¯ä»¥ç”¨æ¥è¡¨ç¤ºè¿™äº›æƒ…å†µã€‚\n\n```typescript\ndeclare module \"*!text\" {\n  const content: string;\n  export default content;\n}\n```\n\n- `some do it the other way around`\n\n```typescript\ndeclare module \"json!*\" {\n  const value: any;\n  export default value;\n}\n```\n\n- ç°åœ¨ä½ å¯ä»¥å°±å¯¼å…¥åŒ¹é… `\"!text\"` æˆ– `\"json!\"` çš„å†…å®¹äº†ã€‚\n\n```typescript\nimport fileContent from \"./xyz.txt!txt\";\nimport data from \"json!http://example.com/data.json\";\nconsole.log(data, fileContent);\n```\n\n#### 15.9.4 `UMD` æ¨¡å—\n\n> æœ‰äº›æ¨¡å—è¢«è®¾è®¡æˆå…¼å®¹å¤šä¸ªæ¨¡å—åŠ è½½å™¨ï¼Œæˆ–è€…ä¸ä½¿ç”¨æ¨¡å—åŠ è½½å™¨(å…¨å±€å˜é‡)ã€‚å®ƒä»¬ä»¥ `UMD` æ¨¡å—ä¸ºä»£è¡¨ã€‚è¿™äº›åº“å¯ä»¥é€šè¿‡å¯¼å…¥çš„å½¢å¼æˆ–å…¨å±€å˜é‡çš„å½¢å¼è®¿é—®ã€‚\n\n- `ä¾‹å¦‚ï¼š`\n- `math-lib.d.ts`\n\n```typescript\nexport function isPrime(x: number): boolean;\nexport as namespace mathLib;\n```\n\n- ä¹‹åï¼Œè¿™ä¸ªåº“å¯ä»¥åœ¨æŸä¸ªæ¨¡å—é‡Œé€šè¿‡å¯¼å…¥æ¥ä½¿ç”¨:\n\n```typescript\nimport { isPrime } from \"math-lib\";\nisPrime(2);\nmathLib.isPrime(2);\n```\n\n- å®ƒåŒæ ·å¯ä»¥é€šè¿‡å…¨å±€å˜é‡çš„å½¢å¼ä½¿ç”¨ï¼Œä½†åªèƒ½åœ¨æŸä¸ªè„šæœ¬(æŒ‡ä¸å¸¦æœ‰æ¨¡å—å¯¼å…¥æˆ–å¯¼å‡ºçš„è„šæœ¬æ–‡ä»¶)é‡Œã€‚\n\n```typescript\nmathLib.isPrime(2);\n```\n\n### 15.10 åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\n\n#### 15.10.1 å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\n\n1. ç”¨æˆ·åº”è¯¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ä½ æ¨¡å—å¯¼å‡ºçš„å†…å®¹ã€‚åµŒå¥—å±‚æ¬¡è¿‡å¤šä¼šå˜å¾—éš¾ä»¥å¤„ç†ï¼Œå› æ­¤ä»”ç»†è€ƒè™‘ä¸€ä¸‹å¦‚ä½•ç»„ç»‡ä½ çš„ä»£ç ã€‚\n2. ä»ä½ çš„æ¨¡å—ä¸­å¯¼å‡ºä¸€ä¸ªå‘½åç©ºé—´å°±æ˜¯ä¸€ä¸ªå¢åŠ åµŒå¥—çš„ä¾‹å­ã€‚è™½ç„¶å‘½åç©ºé—´æœ‰æ—¶å€™æœ‰å®ƒä»¬çš„ç”¨å¤„ï¼Œåœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™å®ƒä»¬é¢å¤–åœ°å¢åŠ äº†ä¸€å±‚ã€‚è¿™å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å¾ˆä¸æ–¹ä¾¿çš„å¹¶ä¸”é€šå¸¸æ˜¯å¤šä½™çš„ã€‚\n3. å¯¼å‡ºç±»çš„é™æ€æ–¹æ³•ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ - è¿™ä¸ªç±»æœ¬èº«å°±å¢åŠ äº†ä¸€å±‚åµŒå¥—ã€‚é™¤éå®ƒèƒ½æ–¹ä¾¿åœ°è¡¨è¿°æˆ–ä¾¿äºæ¸…æ™°ä½¿ç”¨ï¼Œå¦åˆ™è¯·è€ƒè™‘ç›´æ¥å¯¼å‡ºä¸€ä¸ªè¾…åŠ©æ–¹æ³•ã€‚\n\n#### 15.10.2 å¦‚æœä»…å¯¼å‡ºå•ä¸ª `class` æˆ– `function`ï¼Œä½¿ç”¨ `export default`\n\n> å°±åƒ\" `åœ¨é¡¶å±‚å¯¼å‡º` \"å¸®åŠ©å‡å°‘ç”¨æˆ·ä½¿ç”¨çš„éš¾åº¦ï¼Œä¸€ä¸ªé»˜è®¤çš„å¯¼å‡ºä¹Ÿèƒ½èµ·åˆ°è¿™ä¸ªæ•ˆæœã€‚å¦‚æœä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸ºäº†å¯¼å‡ºç‰¹å®šçš„å†…å®¹ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€‚è¿™ä¼šä»¤æ¨¡å—çš„å¯¼å…¥å’Œä½¿ç”¨å˜å¾—äº›è®¸ç®€å•ï¼Œæ¯”å¦‚ï¼š\n\n- `MyClass.ts`\n\n```typescript\nexport default class SomeType {\n  constructor() {\n    /!* ... *!/;\n  }\n}\n```\n\n- `MyFunc.ts`\n\n```typescript\nexport default function getThing() {\n  return \"thing\";\n}\n```\n\n- `Consumer.ts`\n\n```typescript\nimport t from \"./MyClass\";\nimport f from \"./MyFunc\";\nlet x = new t();\nconsole.log(f());\n```\n\n> å¯¹ç”¨æˆ·æ¥è¯´è¿™æ˜¯æœ€ç†æƒ³çš„ã€‚ä»–ä»¬å¯ä»¥éšæ„å‘½åå¯¼å…¥æ¨¡å—çš„ç±»å‹ (æœ¬ä¾‹ä¸º `t` ) å¹¶ä¸”ä¸éœ€è¦å¤šä½™çš„ ( `.` ) æ¥æ‰¾åˆ°ç›¸å…³å¯¹è±¡ã€‚\n\n#### 15.10.3 å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\n\n- `MyThings.ts`\n\n```typescript\nexport class SomeType {/!*...*!/}\nexport function someFunc() {\n    /*...*/\n}\n```\n\n#### 15.10.4 (ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™)æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\n\n- `Consumer.ts`\n\n```typescript\nimport { SomeType, someFunc } from \"./MyThings\";\nlet x = new SomeType();\nlet y = someFunc();\n```\n\n#### 15.10.5 ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\n\n- `MyLargeModule.ts`\n\n```typescript\nexport class Dog {}\nexport class Cat {}\nexport class Tree {}\nexport class Flower {}\n```\n\n- `Consumer.ts`\n\n```typescript\nimport * as myLargeModule from \"./MyLargeModule.ts\";\nlet x = new myLargeModule.Dog();\n```\n\n#### 15.10.6 ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\n\n> ä½ å¯èƒ½ç»å¸¸éœ€è¦æ‰©å±•ä¸€ä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚`JS` é‡Œå¸¸ç”¨çš„ä¸€ä¸ªæ¨¡å¼æ˜¯ `JQuery` é‚£æ ·å»æ‰©å±•åŸå¯¹è±¡ã€‚å¦‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ï¼Œæ¨¡å—ä¸ä¼šåƒå…¨å±€å‘½åç©ºé—´é‚£æ ·å»åˆå¹¶ã€‚æ¨èçš„æ–¹æ¡ˆæ˜¯ ä¸è¦å»æ”¹å˜åŸæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¯¼å‡ºä¸€ä¸ªæ–°çš„å®ä½“æ¥æä¾›æ–°çš„åŠŸèƒ½ã€‚\n\n> å‡è®¾ `Calculator.ts` æ¨¡å—é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨å®ç°ã€‚è¿™ä¸ªæ¨¡å—åŒæ ·æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¼ å…¥ä¸€ç³»åˆ—è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶åœ¨æœ€åç»™å‡ºç»“æœã€‚\n\n- `Calculator.ts`\n\n```typescript\nexport class Calculator {\n  private current = 0;\n  private memory = 0;\n  private operator: string;\n\n  protected static processDigit(digit: string, currentValue: number) {\n    if (digit >= \"0\" && digit <= \"9\") {\n      return currentValue * 10 + (digit.charCodeAt(0) - \"0\".charCodeAt(0));\n    }\n  }\n\n  protected static processOperator(operator: string) {\n    if ([\"+\", \"-\", \"*\", \"/\"].indexOf(operator) >= 0) {\n      return operator;\n    }\n  }\n\n  protected evaluateOperator(operator: string, left: number, right: number): number {\n    switch (this.operator) {\n      case \"+\":\n        return left + right;\n      case \"-\":\n        return left - right;\n      case \"*\":\n        return left * right;\n      case \"/\":\n        return left / right;\n    }\n  }\n\n  private evaluate() {\n    if (this.operator) {\n      this.memory = this.evaluateOperator(this.operator, this.memory, this.current);\n    } else {\n      this.memory = this.current;\n    }\n    this.current = 0;\n  }\n\n  public handleChar(char: string) {\n    if (char === \"=\") {\n      this.evaluate();\n      return;\n    } else {\n      let value = Calculator.processDigit(char, this.current);\n      if (value !== undefined) {\n        this.current = value;\n        return;\n      } else {\n        let value = Calculator.processOperator(char);\n        if (value !== undefined) {\n          this.evaluate();\n          this.operator = value;\n          return;\n        }\n      }\n    }\n    throw new Error(`Unsupported input: '${char}'`);\n  }\n\n  public getResult() {\n    return this.memory;\n  }\n}\n\nexport function test(c: Calculator, input: string) {\n  for (let i = 0; i < input.length; i++) {\n    c.handleChar(input[i]);\n  }\n  console.log(`result of '${input}' is '${c.getResult()}'`);\n}\n```\n\n- ä¸‹é¢ä½¿ç”¨å¯¼å‡ºçš„ `test` å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨\n- `TestCalculator.ts`\n\n```typescript\nimport { Calculator, test } from \"./Calculator\";\nlet c = new Calculator();\ntest(c, \"1+2*33/11=\"); // prints 9\n```\n\n- ç°åœ¨æ‰©å±•å®ƒï¼Œæ·»åŠ æ”¯æŒè¾“å…¥å…¶å®ƒè¿›åˆ¶(åè¿›åˆ¶ä»¥å¤–)ã€‚\n- `ProgrammerCalculator.ts`\n\n```typescript\nimport { Calculator } from \"./Calculator\";\nclass ProgrammerCalculator extends Calculator {\n  static digits = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\"];\n  constructor(public base: number) {\n    super();\n    const maxBase = ProgrammerCalculator.digits.length;\n    if (base <= 0 || base > maxBase) {\n      throw new Error(`base has to be within 0 to ${maxBase} inclusive`);\n    }\n  }\n  protected processDigit(digit: string, currentValue: number) {\n    if (ProgrammerCalculator.digits.indexOf(digit) >= 0) {\n      return currentValue * this.base + ProgrammerCalculator.digits.indexOf(digit);\n    }\n  }\n}\nexport { ProgrammerCalculator as Calculator };\nexport { test } from \"./Calculator\";\n```\n\n> æ–°çš„ `ProgrammerCalculator` æ¨¡å—å¯¼å‡ºçš„ API ä¸åŸå…ˆçš„ `Calculator` æ¨¡å—å¾ˆç›¸ä¼¼ï¼Œä½†å´æ²¡æœ‰æ”¹å˜åŸæ¨¡å—é‡Œçš„å¯¹è±¡ã€‚\n\n- `TestProgrammerCalculator.ts`\n\n```typescript\nimport { Calculator, test } from \"./ProgrammerCalculator\";\nlet c = new Calculator(2);\ntest(c, \"001+010=\"); // prints 3\n```\n\n#### 15.10.7 æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\n\n> å½“åˆæ¬¡è¿›å…¥åŸºäºæ¨¡å—çš„å¼€å‘æ¨¡å¼æ—¶ï¼Œå¯èƒ½æ€»ä¼šæ§åˆ¶ä¸ä½è¦å°†å¯¼å‡ºåŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚æ¨¡å—å…·æœ‰å…¶è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”åªæœ‰å¯¼å‡ºçš„å£°æ˜æ‰ä¼šåœ¨æ¨¡å—å¤–éƒ¨å¯è§ã€‚è®°ä½è¿™ç‚¹ï¼Œå‘½åç©ºé—´åœ¨ä½¿ç”¨æ¨¡å—æ—¶å‡ ä¹æ²¡ä»€ä¹ˆä»·å€¼ã€‚\n\n> åœ¨ç»„ç»‡æ–¹é¢ï¼Œå‘½åç©ºé—´å¯¹äºåœ¨å…¨å±€ä½œç”¨åŸŸå†…å¯¹é€»è¾‘ä¸Šç›¸å…³çš„å¯¹è±¡å’Œç±»å‹åˆ†ç»„æ˜¯å¾ˆä¾¿åˆ©çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ `C\\#` é‡Œï¼Œä½ ä¼šä» `System.Collections` é‡Œæ‰¾åˆ°æ‰€æœ‰é›†åˆçš„ç±»å‹ã€‚é€šè¿‡å°†ç±»å‹æœ‰å±‚æ¬¡åœ°ç»„ç»‡åœ¨å‘½åç©ºé—´é‡Œï¼Œå¯ä»¥æ–¹ä¾¿ç”¨æˆ·æ‰¾åˆ°ä¸ä½¿ç”¨é‚£äº›ç±»å‹ã€‚ç„¶è€Œï¼Œæ¨¡å—æœ¬èº«å·²ç»å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸­ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚æˆ‘ä»¬å¿…é¡»é€šè¿‡è·¯å¾„å’Œæ–‡ä»¶åæ‰¾åˆ°å®ƒä»¬ï¼Œè¿™å·²ç»æä¾›äº†ä¸€ç§é€»è¾‘ä¸Šçš„ç»„ç»‡å½¢å¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»º `/collections/generic/` æ–‡ä»¶å¤¹ï¼ŒæŠŠç›¸åº”æ¨¡å—æ”¾åœ¨è¿™é‡Œã€‚\n\n> å‘½åç©ºé—´å¯¹è§£å†³å…¨å±€ä½œç”¨åŸŸé‡Œå‘½åå†²çªæ¥è¯´æ˜¯å¾ˆé‡è¦çš„ã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ª `My.Application.Customer.AddFrom` å’Œ `My.Application.Order.AddForm` `--` ä¸¤ä¸ªç±»å‹çš„åå­—ç›¸åŒï¼Œä½†å‘½åç©ºé—´ä¸åŒã€‚ç„¶è€Œï¼Œè¿™å¯¹äºæ¨¡å—æ¥è¯´å´ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚åœ¨ä¸€ä¸ªæ¨¡å—é‡Œï¼Œæ²¡æœ‰ç†ç”±ä¸¤ä¸ªå¯¹è±¡æ‹¥æœ‰åŒä¸€ä¸ªåå­—ã€‚ä»æ¨¡å—çš„ä½¿ç”¨è§’åº¦æ¥è¯´ï¼Œä½¿ç”¨è€…ä¼šæŒ‘å‡ºå®ƒä»¬ç”¨æ¥å¼•ç”¨æ¨¡å—çš„åå­—ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ç†ç”±å‘å£°é‡åçš„æƒ…å†µã€‚\n\n#### 15.10.8 å±é™©ä¿¡å·\n\n> ä»¥ä¸‹å‡ä¸ºæ¨¡å—ç»“æ„ä¸Šçš„å±é™©ä¿¡å·ã€‚é‡æ–°æ£€æŸ¥ä»¥ç¡®ä¿ä½ æ²¡æœ‰åœ¨å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚\n\n1. æ–‡ä»¶çš„é¡¶å±‚å£°æ˜æ˜¯ `export namespace Foo {...}` ( åˆ é™¤ `Foo` å¹¶æŠŠæ‰€æœ‰å†…å®¹å‘ä¸Šå±‚ç§»åŠ¨ä¸€å±‚)\n2. æ–‡ä»¶åªæœ‰ä¸€ä¸ª `export class` æˆ– `export function` (è€ƒè™‘ä½¿ç”¨ `export default`)\n3. å¤šä¸ªæ–‡ä»¶çš„é¡¶å±‚å…·æœ‰åŒæ ·çš„ `export namespace Foo` {( ä¸è¦ä»¥ä¸ºè¿™äº›ä¼šåˆå¹¶åˆ°ä¸€ä¸ª `Foo` ä¸­! )}\n\n## åå…­ã€å‘½åç©ºé—´\n\n### 16.1 ä»‹ç»\n\n> è¿™ç¯‡æ–‡ç« æè¿°äº†å¦‚ä½•åœ¨ `TypeScript` é‡Œä½¿ç”¨å‘½åç©ºé—´(ä¹‹å‰å«åš\"å†…éƒ¨æ¨¡å—\")æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚å°±åƒæˆ‘ä»¬åœ¨æœ¯è¯­è¯´æ˜é‡Œæåˆ°çš„é‚£æ ·ï¼Œ`\"å†…éƒ¨æ¨¡å—\"` ç°åœ¨å«åš `\"å‘½åç©ºé—´\"`ã€‚å¦å¤–ï¼Œä»»ä½•ä½¿ç”¨ `module` å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå†…éƒ¨æ¨¡å—çš„åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨ `namespace` å…³é”®å­—æ¥æ›¿æ¢ã€‚è¿™å°±é¿å…äº†è®©æ–°çš„ä½¿ç”¨è€…è¢«ç›¸ä¼¼çš„åç§°æ‰€è¿·æƒ‘ã€‚\n\n- `ç¬¬ä¸€æ­¥`\n\n> æˆ‘ä»¬å…ˆæ¥å†™ä¸€æ®µç¨‹åºå¹¶å°†åœ¨æ•´ç¯‡æ–‡ç« ä¸­éƒ½ä½¿ç”¨è¿™ä¸ªä¾‹å­ã€‚æˆ‘ä»¬å®šä¹‰å‡ ä¸ªç®€å•çš„å­—ç¬¦ä¸²éªŒè¯å™¨ï¼Œ\n\n> å‡è®¾ä½ ä¼šä½¿ç”¨å®ƒä»¬æ¥éªŒè¯è¡¨å•é‡Œçš„ç”¨æˆ·è¾“å…¥æˆ–éªŒè¯å¤–éƒ¨æ•°æ®ã€‚\n\n- `æ‰€æœ‰éªŒè¯å™¨éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œ`\n\n```typescript\ninterface StringValidator {\n  isAcceptable(s: string): boolean;\n}\n\nlet letterRegExp = /^[A-Za-z]$/;\nlet numberRegExp = /^[0-9]+$/;\n\nclass LetterOnlyValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return letterRegExp.test(s);\n  }\n}\n\nclass ZipCodeValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegExp.test(s);\n  }\n}\n\nlet strings = [\"Hello\", \"98052\", \"101\"];\nlet validators: { [s: string]: StringValidator } = {};\nvalidators[\"ZIP code\"] = new ZipCodeValidator();\nvalidators[\"Letters Only\"] = new LetterOnlyValidator();\n// show whether each string passed each validator\nfor (let s of strings) {\n  for (let name in validators) {\n    let isMatch = validators[name].isAcceptable(s);\n    console.log(`'${s}' ${isMatch ? \"matches\" : \"does not match\"} '${name}'.`);\n  }\n}\n```\n\n### 16.2 å‘½åç©ºé—´\n\n> éšç€æ›´å¤šéªŒè¯å™¨çš„åŠ å…¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ‰‹æ®µæ¥ç»„ç»‡ä»£ç ï¼Œä»¥ä¾¿äºåœ¨è®°å½•å®ƒä»¬ç±»å‹çš„åŒæ—¶è¿˜ä¸ç”¨æ‹…å¿ƒä¸å…¶å®ƒå¯¹è±¡äº§ç”Ÿå‘½åå†²çªã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŠŠéªŒè¯å™¨åŒ…è£¹åˆ°ä¸€ä¸ªå‘½åç©ºé—´é‡Œå†…ï¼Œè€Œä¸æ˜¯æŠŠå®ƒä»¬æ”¾åœ¨å…¨å±€ç©ºé—´ä¸‹ã€‚\n\n> ä¸‹é¢çš„ä¾‹å­é‡Œï¼ŒæŠŠæ‰€æœ‰ä¸éªŒè¯å™¨ç›¸å…³çš„ç±»å‹éƒ½æ”¾åˆ°ä¸€ä¸ªå«åš `Validation` çš„å‘½åç©ºé—´é‡Œã€‚å› ä¸ºæˆ‘ä»¬æƒ³è®©è¿™äº›æ¥å£å’Œç±»åœ¨å‘½åç©ºé—´ä¹‹å¤–ä¹Ÿæ˜¯å¯è®¿é—®çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ `export`ã€‚ç›¸åçš„ï¼Œå˜é‡ `LetterRegExp` å’Œ `numberRegExp` æ˜¯å®ç°çš„ç»†èŠ‚ï¼Œä¸éœ€è¦å¯¼å‡ºï¼Œå› æ­¤å®ƒä»¬åœ¨å‘½åç©ºé—´å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚åœ¨æ–‡ä»¶æœ«å°¾çš„æµ‹è¯•ä»£ç é‡Œï¼Œç”±äºæ˜¯åœ¨å‘½åç©ºé—´ä¹‹å¤–è®¿é—®çš„ï¼Œå› æ­¤éœ€è¦é™å®šç±»å‹çš„åç§°ï¼Œæ¯”å¦‚ `Validation.LettersOnlyValidator`ã€‚\n\n- ä½¿ç”¨å‘½åç©ºé—´çš„éªŒè¯å™¨\n\n```typescript\nnamespace Validation {\n  export interface StringValidator {\n    isAcceptable(s: string): boolean;\n  }\n\n  const LetterRegExp = /^[A-Za-z]+$/;\n  const numberRegExp = /^[0-9]+$/;\n\n  export class LetterOnlyValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return LetterRegExp.test(s);\n    }\n  }\n\n  export class ZipCodeValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return s.length === 5 && numberRegExp.test(s);\n    }\n  }\n}\nlet strings = [\"Hello\", \"98052\", \"101\"];\nlet validators: { [s: string]: Validation.StringValidator } = {};\nvalidators[\"ZIP Code\"] = new Validation.ZipCodeValidator();\nvalidators[\"Letters Only\"] = new Validation.LetterOnlyValidator();\nfor (let s of strings) {\n  for (let name in validators) {\n    console.log(`'${s}' ${validators[name].isAcceptable(s) ? \"matches\" : \"does not match\"} '${name}'.`);\n  }\n}\n```\n\n### 16.3 åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\n\n> å½“åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ä»¥æ–¹ä¾¿ç»´æŠ¤ã€‚\n\n#### 16.3.1 å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\n\n> ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ `Validation` å‘½åç©ºé—´åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚å°½ç®¡æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼Œå®ƒä»¬ä»æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å¦‚åŒå®ƒä»¬åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€æ ·ã€‚å› ä¸ºä¸åŒæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ å…¥äº†å¼•ç”¨æ ‡ç­¾æ¥å‘Šè¯‰ç¼–è¯‘å™¨æ–‡ä»¶ä¹‹é—´çš„å…³è”ã€‚\n\n- `Validation.ts`\n\n```typescript\nnamespace Validation {\n  export interface StringValidator {\n    isAcceptable(s: string): boolean;\n  }\n}\n```\n\n- `LetterOnlyValidator.ts`\n\n```typescript\n/// <reference path=\"Validation.ts\" />;\nnamespace Validation {\n  const lettersRegExp = /^[A-Za-z]+$/;\n  export class LettersOnlyValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return lettersRegExp.test(s);\n    }\n  }\n}\n```\n\n- `ZipCodeValidator.ts`\n\n```typescript\n/// <reference path=\"Validation.ts\" />\nnamespace Validation {\n  const numberRegExp = /^[0-9]+$/;\n  export class ZipCodeValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return s.length === 5 && numberRegExp.test(s);\n    }\n  }\n}\n```\n\n- `Test.ts`\n\n```typescript\n/// <reference path=\"Validation.ts\" />\n/// <reference path=\"LettersOnlyValidator.ts\" />\n/// <reference path=\"ZipCodeValidator.ts\" />\n\n// Some samples to try\nlet strings = [\"Hello\", \"98052\", \"101\"];\n\n// Validators to use\nlet validators: { [s: string]: Validation.StringValidator } = {};\nvalidators[\"ZIP code\"] = new Validation.ZipCodeValidator();\nvalidators[\"Letters only\"] = new Validation.LettersOnlyValidator();\n\n// Show whether each string passed each validator\nfor (let s of strings) {\n  for (let name in validators) {\n    console.log(`\"${s}\" - ${validators[name].isAcceptable(s) ? \"matches\" : \"does not match\"} ${name}`);\n  }\n}\n```\n\n> å½“æ¶‰åŠåˆ°å¤šæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æ‰€æœ‰ç¼–è¯‘åçš„ä»£ç éƒ½è¢«åŠ è½½äº†ã€‚æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼ã€‚\n\n1. ç¬¬ä¸€ç§æ–¹å¼ï¼ŒæŠŠæ‰€æœ‰çš„è¾“å…¥æ–‡ä»¶ç¼–è¯‘ä¸ºä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ `--outFile` æ ‡è®°ï¼š `tsc --outFile sample.js Test.ts` ç¼–è¯‘å™¨ä¼šæ ¹æ®æºç é‡Œçš„å¼•ç”¨æ ‡ç­¾è‡ªåŠ¨åœ°å¯¹è¾“å‡ºè¿›è¡Œæ’åºã€‚ä½ ä¹Ÿå¯ä»¥å•ç‹¬åœ°æŒ‡å®šæ¯ä¸ªæ–‡ä»¶ã€‚ `tsc --outFile sample.js Validation.ts LetterOnlyValidator.ts ZipCodeValidator.ts Test.ts`\n2. ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¯ä¸€ä¸ªæ–‡ä»¶(é»˜è®¤æ–¹å¼)ï¼Œé‚£ä¹ˆæ¯ä¸ªæºæ–‡ä»¶éƒ½ä¼šå¯¹åº”ç”Ÿæˆä¸€ä¸ª `JavaScript` æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨é¡µé¢ä¸Šé€šè¿‡ `<script>` æ ‡ç­¾æŠŠæ‰€æœ‰ç”Ÿæˆçš„ `JavaScript` æ–‡ä»¶æŒ‰æ­£ç¡®çš„é¡ºåºå¼•è¿›æ¥ï¼Œæ¯”å¦‚ï¼š\n\n```html\nMyTestPage.html (excerpt)\n<script src=\"Validation.js\" type=\"text/javascript\" />\n<script src=\"LettersOnlyValidator.js\" type=\"text/javascript\" />\n<script src=\"ZipCodeValidator.js\" type=\"text/javascript\" />\n<script src=\"Test.js\" type=\"text/javascript\" />\n```\n\n### 16.4 åˆ«å\n\n> å¦ä¸€ç§ç®€åŒ–å‘½åç©ºé—´æ“ä½œçš„æ–¹æ³•æ˜¯ç”¨ `import q = x.y.z` ç»™å¸¸ç”¨çš„å¯¹è±¡èµ·ä¸€ä¸ªçŸ­çš„åå­—ã€‚ä¸è¦ä¸ç”¨æ¥åŠ è½½æ¨¡å—çš„ `import x = require('name')` è¯­æ³•å¼„æ··äº†ï¼Œè¿™é‡Œçš„è¯­æ³•æ˜¯ä¸ºæŒ‡å®šçš„ç¬¦å·åˆ›å»ºä¸€ä¸ªåˆ«åã€‚ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ä¸ºä»»æ„æ ‡è¯†ç¬¦åˆ›å»ºåˆ«åï¼Œä¹ŸåŒ…æ‹¬å¯¼å…¥çš„æ¨¡å—ä¸­çš„å¯¹è±¡ã€‚\n\n```typescript\nnamespace Shapes {\n  export namespace Polygons {\n    export class Triangle {}\n    export class Square {}\n  }\n}\nimport Polygons = Shapes.Polygons;\nlet sq = new Polygons.Square(); // Same as \"new Shapes.Polygons.Square()\"\n```\n\n> æ³¨æ„ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ `require` å…³é”®å­—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å¯¼å…¥ç¬¦å·çš„é™å®šåèµ‹å€¼ã€‚è¿™ä¸ä½¿ç”¨ `var` ç›¸ä¼¼ï¼Œä½†å®ƒè¿˜é€‚ç”¨äºç±»å‹å’Œå¯¼å…¥çš„å…·æœ‰å‘½åç©ºé—´å«ä¹‰çš„ç¬¦å·ã€‚é‡è¦çš„æ˜¯ï¼Œå¯¹äºå€¼æ¥è®²ï¼Œ`import` ä¼šç”Ÿæˆä¸åŸå§‹ç¬¦å·ä¸åŒçš„å¼•ç”¨ï¼Œæ‰€ä»¥æ”¹å˜åˆ«åçš„ `var` å€¼å¹¶ä¸ä¼šå½±å“åŸå§‹å˜é‡çš„å€¼ã€‚\n\n### 16.5 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\n\n> ä¸ºäº†æè¿°ä¸æ˜¯ç”¨ `TypeScript` ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“å¯¼å‡ºçš„ `API`ã€‚ç”±äºå¤§éƒ¨åˆ†ç¨‹åºåº“åªæä¾›å°‘æ•°çš„é¡¶çº§å¯¹è±¡ï¼Œå‘½åç©ºé—´æ˜¯ç”¨æ¥è¡¨ç¤ºå®ƒä»¬çš„ä¸€ä¸ªå¥½åŠæ³•ã€‚æˆ‘ä»¬ç§°å…¶ä¸ºå£°æ˜æ˜¯å› ä¸ºå®ƒä¸æ˜¯å¤–éƒ¨ç¨‹åºçš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ `.d.ts` é‡Œå†™è¿™äº›å£°æ˜ã€‚å¦‚æœä½ ç†Ÿæ‚‰ `C/C+`+ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œ `.h` æ–‡ä»¶ã€‚\n\n> å¤–éƒ¨å‘½åç©ºé—´ (`declare namespace =>`; å£°æ˜å…¨å±€å¯¹è±¡)\n\n> æµè¡Œçš„ç¨‹åºåº“ `D3` åœ¨å…¨å±€å¯¹è±¡ `d3` é‡Œå®šä¹‰å®ƒçš„åŠŸèƒ½ã€‚å› ä¸ºè¿™ä¸ªåº“é€šè¿‡ä¸€ä¸ª`<script>` æ ‡ç­¾åŠ è½½ (ä¸æ˜¯é€šè¿‡æ¨¡å—åŠ è½½å™¨)ï¼Œå®ƒçš„å£°æ˜æ–‡ä»¶ä½¿ç”¨å†…éƒ¨æ¨¡å—æ¥å®šä¹‰å®ƒçš„ç±»å‹ã€‚ä¸ºäº†è®© `TypeScript` ç¼–è¯‘å™¨è¯†åˆ«å®ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤–éƒ¨å‘½åç©ºé—´å£°æ˜ã€‚\n\n- æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™\n- `D3.d.ts`\n\n```typescript\ndeclare namespace D3 {\n  export interface Selectors {\n    select: {\n      (selector: string): Selection;\n      (element: EventTarget): Selection;\n    };\n  }\n\n  export interface Event {\n    x: number;\n    y: number;\n  }\n\n  export interface Base extends Selectors {\n    event: Event;\n  }\n}\ndeclare var d3: D3.Base;\n```\n\n## åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\n\n### 17.1 ä»‹ç»\n\n> è¿™ç¯‡æ–‡ç« å°†æ¦‚æ‹¬ä»‹ç»åœ¨ `TypeScript` é‡Œä½¿ç”¨æ¨¡å—ä¸å‘½åç©ºé—´æ¥ç»„ç»‡ä»£ç çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿä¼šè°ˆåŠå‘½åç©ºé—´å’Œæ¨¡å—çš„é«˜çº§ä½¿ç”¨åœºæ™¯ï¼Œå’Œåœ¨ä½¿ç”¨å®ƒä»¬çš„è¿‡ç¨‹ä¸­å¸¸è§çš„é™·é˜±ã€‚\n\n### 17.2 ä½¿ç”¨å‘½åç©ºé—´\n\n> å‘½åç©ºé—´æ˜¯ä½äºå…¨å±€å‘½åç©ºé—´ä¸‹çš„ä¸€ä¸ªæ™®é€šçš„å¸¦æœ‰åå­—çš„ `JavaScript` å¯¹è±¡ã€‚è¿™ä»¤å‘½åç©ºé—´ååˆ†å®¹æ˜“ä½¿ç”¨ã€‚å®ƒä»¬å¯ä»¥åœ¨å¤šæ–‡ä»¶ä¸­åŒæ—¶ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ `--outFile` ç»“åˆåœ¨ä¸€èµ·ã€‚å‘½åç©ºé—´æ˜¯å¸®ä½ ç»„ç»‡ `Web` åº”ç”¨ä¸é”™çš„æ–¹å¼ï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰ä¾èµ–éƒ½æ”¾åœ¨ `HTML` é¡µé¢çš„ `<script>` æ ‡ç­¾é‡Œã€‚ä½†å°±åƒå…¶å®ƒçš„å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ä¸€æ ·ï¼Œå®ƒå¾ˆéš¾å»è¯†åˆ«ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚\n\n### 17.3 ä½¿ç”¨æ¨¡å—\n\n1. åƒå‘½åç©ºé—´ä¸€æ ·ï¼Œæ¨¡å—å¯ä»¥åŒ…å«ä»£ç å’Œå£°æ˜ã€‚ä¸åŒçš„æ¨¡å—å¯ä»¥å£°æ˜å®ƒçš„ä¾èµ–ã€‚\n2. æ¨¡å—ä¼šæŠŠä¾èµ–æ·»åŠ åˆ°æ¨¡å—åŠ è½½å™¨ä¸Š(åƒæ˜¯ `CommonJS` / `RequireJS`)ã€‚å¯¹äºå°å‹çš„ JS åº”ç”¨æ¥è¯´å¯èƒ½æ²¡å¿…è¦ï¼Œä½†æ˜¯å¯¹äºå¤§å‹åº”ç”¨ï¼Œè¿™ä¸€ç‚¹ç‚¹çš„èŠ±è´¹ä¼šå¸¦æ¥é•¿ä¹…çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ä¸Šçš„ä¾¿åˆ©ã€‚æ¨¡å—ä¹Ÿæä¾›äº†æ›´å¥½çš„ä»£ç é‡ç”¨ï¼Œæ›´å¼ºçš„å°é—­æ€§ä»¥åŠæ›´å¥½çš„ä½¿ç”¨å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚\n3. å¯¹äº `Node.js` åº”ç”¨æ¥è¯´ï¼Œæ¨¡å—æ˜¯é»˜è®¤å¹¶æ¨èçš„ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚\n4. ä» `ECMAScript 2015` å¼€å§‹ï¼Œæ¨¡å—æˆä¸ºäº†è¯­è¨€å†…ç½®çš„éƒ¨åˆ†ï¼Œåº”è¯¥ä¼šè¢«æ‰€æœ‰æ­£å¸¸çš„è§£é‡Šå¼•æ“æ‰€æ”¯æŒã€‚\n\n> å› æ­¤ï¼Œå¯¹äºæ–°é¡¹ç›®æ¥è¯´æ¨èä½¿ç”¨æ¨¡å—ä½œä¸ºç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚\n\n### 17.4 å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\n\n> è¿™éƒ¨åˆ†æˆ‘ä»¬ä¼šæè¿°å¸¸è§çš„å‘½åç©ºé—´å’Œæ¨¡å—çš„ä½¿ç”¨é™·é˜±å’Œå¦‚ä½•å…¶é¿å…å®ƒä»¬ã€‚\n\n#### 17.4.1 å¯¹æ¨¡å—ä½¿ç”¨ `/// <reference>`\n\n> ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯ä½¿ç”¨ `/// <reference>` å¼•ç”¨æ¨¡å—æ–‡ä»¶ï¼Œåº”è¯¥ä½¿ç”¨ `import`ã€‚è¦ç†è§£è¿™ä¹‹é—´çš„å·®åˆ«ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥å¼„æ¸…ç¼–è¯‘å™¨æ˜¯å¦‚ä½•æ ¹æ® `import` è·¯å¾„(ä¾‹å¦‚ï¼š`import x from \"...\"`ï¼›æˆ– `import x = require(\"...\")` é‡Œé¢çš„ `...`ï¼Œç­‰ç­‰)æ¥å®šä½æ¨¡å—çš„ç±»å‹ä¿¡æ¯çš„ã€‚\n\n> ç¼–è¯‘å™¨é¦–å…ˆå°è¯•å»æŸ¥æ‰¾ç›¸åº”è·¯å¾„ä¸‹çš„ `.ts`ï¼Œ`.tsx` å†æˆ–è€… `.d.ts`ã€‚å¦‚æœè¿™äº›æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå®ƒä»¬æ˜¯åœ¨ `.d.ts` æ–‡ä»¶é‡Œå£°æ˜çš„ã€‚\n\n- `myModules.d.ts`\n\n```typescript\n// In a .d.ts file or .ts file that is not a module\ndeclare module \"SomeModule\" {\n  export function fn(): string;\n}\n```\n\n- `myOtherModule.ts`\n\n```typescript\n/// <reference path=\"myModules.d.ts\">\nimport * as m from \"SomeModule\";\n```\n\n> è¿™é‡Œçš„å¼•ç”¨æ ‡ç­¾æŒ‡å®šäº†å¤–æ¥æ¨¡å—çš„ä½ç½®ã€‚è¿™å°±æ˜¯ä¸€äº› `TypeScript` ä¾‹å­ä¸­å¼•ç”¨ `node.d.ts` çš„æ–¹æ³•ã€‚\n\n#### 17.4.2 ä¸å¿…è¦çš„å‘½åç©ºé—´\n\n> å¦‚æœä½ æƒ³æŠŠå‘½åç©ºé—´è½¬æ¢ä¸ºæ¨¡å—ï¼Œå®ƒå¯èƒ½ä¼šåƒä¸‹é¢è¿™ä¸ªæ–‡ä»¶ä¸€æ ·ã€‚\n\n- `shapes.ts`\n\n```typescript\nexport namespace Shapes {\n  export class Triangle {\n    /* ... */\n  }\n  export class Square {\n    /* ... */\n  }\n}\n```\n\n> é¡¶å±‚çš„æ¨¡å— `Shapes` åŒ…è£¹äº† `Triangle` å’Œ `Square`ã€‚å¯¹äºä½¿ç”¨å®ƒçš„äººæ¥è¯´è¿™æ˜¯ä»¤äººè¿·æƒ‘å’Œè®¨åŒçš„ã€‚\n\n- `shapeConsumer.ts`\n\n```typescript\nimport * as shapes from \"./shapes\";\nlet t = new shapes.Shapes.Triangle(); // shapes.Shapes?\n```\n\n> `TypeScript` é‡Œæ¨¡å—çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä¸åŒçš„æ¨¡å—æ°¸è¿œä¹Ÿä¸ä¼šåœ¨ç›¸åŒçš„ä½œç”¨åŸŸå†…ä½¿ç”¨ç›¸åŒçš„åå­—ã€‚å› ä¸ºä½¿ç”¨æ¨¡å—çš„äººä¼šä¸ºå®ƒä»¬å‘½åï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦æŠŠå¯¼å‡ºçš„ç¬¦å·åŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚å†æ¬¡é‡ç”³ï¼Œä¸åº”è¯¥å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚ä½¿ç”¨å‘½åç©ºé—´æ˜¯ä¸ºäº†æä¾›é€»è¾‘åˆ†ç»„å’Œé¿å…å‘½åå†²çªã€‚æ¨¡å—æ–‡ä»¶æœ¬èº«å·²ç»æ˜¯ä¸€ä¸ªé€»è¾‘åˆ†ç»„ï¼Œå¹¶ä¸”å®ƒçš„åå­—æ˜¯ç”±å¯¼å…¥è¿™ä¸ªæ¨¡å—çš„ä»£ç æŒ‡å®šï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ä¸ºå¯¼å‡ºçš„å¯¹è±¡å¢åŠ é¢å¤–çš„æ¨¡å—å±‚ã€‚\n\n- ä¸‹é¢æ˜¯æ”¹è¿›çš„ä¾‹å­ï¼š\n- `shape.ts`\n\n```typescript\nexport class Triangle {\n  /* ... */\n}\nexport class Square {\n  /* ... */\n}\n```\n\n- `shapeConsumer.ts`\n\n```typescript\nimport * as shapes from \"./shapes\";\nlet t = new shapes.Triangle();\n```\n\n#### 17.4.3 æ¨¡å—çš„å–èˆ\n\n> å°±åƒæ¯ä¸ª `JS` æ–‡ä»¶å¯¹åº”ä¸€ä¸ªæ¨¡å—ä¸€æ ·ï¼Œ`TypeScript` é‡Œæ¨¡å—æ–‡ä»¶ä¸ç”Ÿæˆçš„ `JS` æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚è¿™ä¼šäº§ç”Ÿä¸€ç§å½±å“ï¼Œæ ¹æ®ä½ æŒ‡å®šçš„ç›®æ ‡æ¨¡å—ç³»ç»Ÿçš„ä¸åŒï¼Œä½ å¯èƒ½æ— æ³•è¿æ¥å¤šä¸ªæ¨¡å—æºæ–‡ä»¶ã€‚ä¾‹å¦‚å½“ç›®æ ‡æ¨¡å—ç³»ç»Ÿä¸º `commonjs` æˆ– `umd` æ—¶ï¼Œæ— æ³•ä½¿ç”¨ `outFile` é€‰é¡¹ï¼Œä½†æ˜¯ `TypeScript 1.8` ä»¥ä¸Šçš„ç‰ˆæœ¬èƒ½å¤Ÿä½¿ç”¨ `outFile` å½“ç›®æ ‡ä¸º `amd` æˆ– `system`ã€‚\n\n## åå…«ã€æ¨¡å—è§£æ\n\n### 18.1 è¯´æ˜\n\n1. æ¨¡å—è§£ææ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨æŸ¥æ‰¾å¯¼å…¥æ¨¡å—å†…å®¹æ—¶æ‰€éµå¾ªçš„æµç¨‹ã€‚å‡è®¾æœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ `import { a } from \"moduleA\"`; ä¸ºäº†å»æ£€æŸ¥ä»»ä½•å¯¹ `a` çš„ä½¿ç”¨ï¼Œç¼–è¯‘å™¨éœ€è¦å‡†ç¡®çš„çŸ¥é“å®ƒè¡¨ç¤ºä»€ä¹ˆï¼Œå¹¶ä¸”éœ€è¦æ£€æŸ¥å®ƒçš„å®šä¹‰ `moduleA`ã€‚\n2. è¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæœ‰ä¸ªç–‘é—®â€œ `moduleA` çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿâ€ è¿™å¬ä¸Šå»å¾ˆç®€å•ï¼Œä½† moduleA å¯èƒ½åœ¨ä½ å†™çš„æŸä¸ª .ts/.tsx æ–‡ä»¶é‡Œæˆ–è€…åœ¨ä½ çš„ä»£ç æ‰€ä¾èµ–çš„ `.d.ts` é‡Œã€‚\n3. é¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½è¡¨ç¤ºå¯¼å…¥æ¨¡å—çš„æ–‡ä»¶ã€‚ç¼–è¯‘å™¨ä¼šéµå¾ªä»¥ä¸‹äºŒç§ç­–ç•¥ä¹‹ä¸€ï¼š `Classic` æˆ– `Node`ã€‚è¿™äº›ç­–ç•¥ä¼šå‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾ `moduleA`ã€‚\n4. å¦‚æœä¸Šé¢çš„è§£æå¤±è´¥äº†å¹¶ä¸”æ¨¡å—åæ˜¯éç›¸å¯¹çš„ï¼ˆä¸”æ˜¯åœ¨\" `moduleA` \"çš„æƒ…å†µä¸‹ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½ä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°éç›¸å¯¹å¯¼å…¥ã€‚\n\n`5`. æœ€åï¼Œå¦‚æœç¼–è¯‘å™¨è¿˜æ˜¯ä¸èƒ½è§£æè¿™ä¸ªæ¨¡å—ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸ªé”™è¯¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé”™è¯¯å¯èƒ½ä¸º `error TS2307: Cannot find module 'moduleA'.`\n\n### 18.2 ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥\n\n> æ ¹æ®æ¨¡å—å¼•ç”¨æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯éç›¸å¯¹çš„ï¼Œæ¨¡å—å¯¼å…¥ä¼šä»¥ä¸åŒçš„æ–¹å¼è§£æã€‚\n\n1. ç›¸å¯¹å¯¼å…¥æ˜¯ä»¥ `/ï¼Œ./` æˆ– `../` å¼€å¤´çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```typescript\nimport Entry from \"./components/Entry\";\nimport { Default } from \"../constants/http\";\nimport \"/mod\";\n```\n\n2. æ‰€æœ‰å…¶å®ƒå½¢å¼çš„å¯¼å…¥è¢«å½“ä½œéç›¸å¯¹çš„ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```typescript\nimport * as $ from \"JQuery\";\nimport { Component } from \"@angular/core\";\n```\n\n> ç›¸å¯¹å¯¼å…¥åœ¨è§£ææ—¶æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶ï¼Œå¹¶ä¸èƒ½è§£æä¸ºä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚ä½ åº”è¯¥ä¸ºä½ è‡ªå·±å†™çš„æ¨¡å—ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œè¿™æ ·èƒ½ç¡®ä¿å®ƒä»¬åœ¨è¿è¡Œæ—¶çš„ç›¸å¯¹ä½ç½®ã€‚\n\n> éç›¸å¯¹æ¨¡å—çš„å¯¼å…¥å¯ä»¥ç›¸å¯¹äº baseUrl æˆ– é€šè¿‡ä¸‹æ–‡ä¼šè®²åˆ°çš„è·¯å¾„æ˜ å°„æ¥è§£æã€‚å®ƒä»¬è¿˜å¯ä»¥è¢«è§£ææˆ å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚\n\n> ä½¿ç”¨éç›¸å¯¹è·¯å¾„æ¥å¯¼å…¥ä½ çš„å¤–éƒ¨ä¾èµ–ã€‚\n\n### 18.3 æ¨¡å—è§£æç­–ç•¥\n\n> å…±æœ‰ä¸¤ç§å¯ç”¨çš„æ¨¡å—è§£æç­–ç•¥ï¼š`Node` å’Œ `Classic`ã€‚ ä½ å¯ä»¥ä½¿ç”¨ `--moduleResolution` æ ‡è®°æ¥æŒ‡å®šä½¿ç”¨å“ªç§æ¨¡å—è§£æç­–ç•¥ã€‚è‹¥æœªæŒ‡å®šï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨äº† -`-module AMD \\| System \\| ES2015` æ—¶çš„é»˜è®¤å€¼ä¸º `Classic`ï¼Œå…¶å®ƒæƒ…å†µæ—¶åˆ™ä¸º `Node`ã€‚\n\n#### 18.3.1 Classic\n\n> è¿™ç§ç­–ç•¥åœ¨ä»¥å‰æ˜¯ `TypeScript` é»˜è®¤çš„è§£æç­–ç•¥ã€‚ ç°åœ¨ï¼Œå®ƒå­˜åœ¨çš„ç†ç”±ä¸»è¦æ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚\n\n> ç›¸å¯¹å¯¼å…¥çš„æ¨¡å—æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶è¿›è¡Œè§£æçš„ã€‚ å› æ­¤ `/root/src/folder/A.ts` æ–‡ä»¶é‡Œçš„ `import { b } from \"./moduleB\"` ä¼šä½¿ç”¨ä¸‹é¢çš„æŸ¥æ‰¾æµç¨‹ï¼š\n\n1. /root/src/folder/moduleB.ts``\n2. /root/src/folder/moduleB.d.ts``\n\n> å¯¹äºéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ï¼Œç¼–è¯‘å™¨åˆ™ä¼šä»åŒ…å«å¯¼å…¥æ–‡ä»¶çš„ç›®å½•å¼€å§‹ä¾æ¬¡å‘ä¸Šçº§ç›®å½•éå†ï¼Œå°è¯•å®šä½åŒ¹é…çš„å£°æ˜æ–‡ä»¶ã€‚\n\n- `æ¯”å¦‚ï¼š`\n\n> æœ‰ä¸€ä¸ªå¯¹ `moduleB` çš„éç›¸å¯¹å¯¼å…¥ `import { b } from \"moduleB\"`ï¼Œå®ƒæ˜¯åœ¨ `/root/src/folder/A.ts` æ–‡ä»¶é‡Œï¼Œä¼šä»¥å¦‚ä¸‹çš„æ–¹å¼æ¥å®šä½\"`moduleB`\"ï¼š\n\n> 1. `/root/src/folder/moduleB.ts`\n> 2. `/root/src/folder/moduleB.d.ts`\n> 3. `/root/src/moduleB.ts`\n> 4. `/root/src/moduleB.d.ts`\n> 5. `/root/moduleB.ts`\n> 6. `/root/moduleB.d.ts`\n> 7. `/moduleB.ts`\n> 8. `/moduleB.d.ts`\n\n#### 18.3.2 Node\n\n> è¿™ä¸ªè§£æç­–ç•¥è¯•å›¾åœ¨è¿è¡Œæ—¶æ¨¡ä»¿ `Node.js` æ¨¡å—è§£ææœºåˆ¶ã€‚å®Œæ•´çš„ `Node.js` è§£æç®—æ³•å¯ä»¥åœ¨ `Node.js module documentation` æ‰¾åˆ°ã€‚\n\n- Node.js å¦‚ä½•è§£ææ¨¡å—\n\n> ä¸ºäº†ç†è§£ `TypeScript` ç¼–è¯‘ä¾ç…§çš„è§£ææ­¥éª¤ï¼Œå…ˆå¼„æ˜ç™½`Node.js`æ¨¡å—æ˜¯éå¸¸é‡è¦çš„ã€‚\n\n> é€šå¸¸ï¼Œåœ¨ `Node.js` é‡Œå¯¼å…¥æ˜¯é€šè¿‡ `require` å‡½æ•°è°ƒç”¨è¿›è¡Œçš„ã€‚ `Node.js` ä¼šæ ¹æ® `require` æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯éç›¸å¯¹è·¯å¾„åšå‡ºä¸åŒçš„è¡Œä¸ºã€‚\n\n> ç›¸å¯¹è·¯å¾„å¾ˆç®€å•ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä¸º `/root/src/moduleA.js`ï¼ŒåŒ…å«äº†ä¸€ä¸ªå¯¼å…¥ `var x = require(\"./moduleB\")`;\n\n- Node.js ä»¥ä¸‹é¢çš„é¡ºåºè§£æè¿™ä¸ªå¯¼å…¥\n\n1. æ£€æŸ¥ `/root/src/moduleB.js` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚\n2. æ£€æŸ¥ `/root/src/moduleB` ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œä¸” `package.json` æ–‡ä»¶æŒ‡å®šäº†ä¸€ä¸ª\"`main`\"æ¨¡å—ã€‚\n\n> åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œå¦‚æœ `Node.js` å‘ç°æ–‡ä»¶ `/root/src/moduleB/package.json` åŒ…å«äº† `{ \"main\": \"lib/mainModule.js\" }`ï¼Œé‚£ä¹ˆ `Node.js` ä¼šå¼•ç”¨ `/root/src/moduleB/lib/mainModule.js`ã€‚\n\n3. æ£€æŸ¥ `/root/src/moduleB` ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª `index.js` æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šè¢«éšå¼åœ°å½“ä½œé‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„\"`main`\"æ¨¡å—ã€‚\n\nä½ å¯ä»¥é˜…è¯» `Node.js` æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š[file modules](https://nodejs.org/api/modules.html#modules_file_modules) å’Œ [folder modules](https://nodejs.org/api/modules.html#modules_folders_as_modules)ã€‚\n\n> ä½†æ˜¯ï¼Œéç›¸å¯¹æ¨¡å—åçš„è§£ææ˜¯ä¸ªå®Œå…¨ä¸åŒçš„è¿‡ç¨‹ã€‚`Node` ä¼šåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶å¤¹ `node\\_modules` é‡ŒæŸ¥æ‰¾ä½ çš„æ¨¡å—ã€‚`node\\_modules` å¯èƒ½ä¸å½“å‰æ–‡ä»¶åœ¨åŒä¸€çº§ç›®å½•ä¸‹ï¼Œæˆ–è€…åœ¨ä¸Šå±‚ç›®å½•é‡Œã€‚`Node` ä¼šå‘ä¸Šçº§ç›®å½•éå†ï¼ŒæŸ¥æ‰¾æ¯ä¸ª `node\\_modules`ç›´åˆ°å®ƒæ‰¾åˆ°è¦åŠ è½½çš„æ¨¡å—ã€‚\n> è¿˜æ˜¯ç”¨ä¸Šé¢ä¾‹å­ï¼Œä½†å‡è®¾ `/root/src/moduleA.js` é‡Œä½¿ç”¨çš„æ˜¯éç›¸å¯¹è·¯å¾„å¯¼å…¥ `var x = require(\"moduleB\")`;\n\n- `Node` åˆ™ä¼šä»¥ä¸‹é¢çš„é¡ºåºå»è§£æ `moduleB`ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªåŒ¹é…ä¸Šã€‚\n\n> 1.`/root/src/node_modules/moduleB.js` 2.`/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"main\"å±æ€§)` 3.`/root/src/node_modules/moduleB/index.js` 4.`/root/node_modules/moduleB.js` 5.`/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"main\"å±æ€§)` 6.`/root/node_modules/moduleB/index.js` 7.`/node_modules/moduleB.js` 8.`/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"main\"å±æ€§)` 9.`/node_modules/moduleB/index.js`\n\n> æ³¨æ„ `Node.js` åœ¨æ­¥éª¤ï¼ˆ`4`ï¼‰å’Œï¼ˆ`7`ï¼‰ä¼šå‘ä¸Šè·³ä¸€çº§ç›®å½•ã€‚\n> ä½ å¯ä»¥é˜…è¯» `Node.js` æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š[loading modules from node_modules](https://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)ã€‚\n\n- TypeScript å¦‚ä½•è§£ææ¨¡å—\n\n> `TypeScript` æ˜¯æ¨¡ä»¿ `Node.js` è¿è¡Œæ—¶çš„è§£æç­–ç•¥æ¥åœ¨ç¼–è¯‘é˜¶æ®µå®šä½æ¨¡å—å®šä¹‰æ–‡ä»¶ã€‚å› æ­¤ï¼Œ`TypeScript` åœ¨ `Node` è§£æé€»è¾‘åŸºç¡€ä¸Šå¢åŠ äº† TypeScript æºæ–‡ä»¶çš„æ‰©å±•åï¼ˆ `.ts`ï¼Œ`.tsx` å’Œ `.d.ts`ï¼‰ã€‚åŒæ—¶ï¼Œ`TypeScript` åœ¨ `package.json` é‡Œä½¿ç”¨å­—æ®µ\"`types`\"æ¥è¡¨ç¤ºç±»ä¼¼\"`main`\"çš„æ„ä¹‰ `-` ç¼–è¯‘å™¨ä¼šä½¿ç”¨å®ƒæ¥æ‰¾åˆ°è¦ä½¿ç”¨çš„\"`main`\"å®šä¹‰æ–‡ä»¶ã€‚\n\n> æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ `import { b } from \"./moduleB\"` åœ¨ `/root/src/moduleA.ts` é‡Œï¼Œä¼šä»¥ä¸‹é¢çš„æµç¨‹æ¥å®šä½ `\"./moduleB\"` ï¼š\n>\n> 1. `/root/src/moduleB.ts`\n> 2. `/root/src/moduleB.tsx`\n> 3. `/root/src/moduleB.d.ts`\n> 4. `/root/src/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 5. `/root/src/moduleB/index.ts`\n> 6. `/root/src/moduleB/index.tsx`\n> 7. `/root/src/moduleB/index.d.ts`\n\n> å›æƒ³ä¸€ä¸‹ `Node.js` å…ˆæŸ¥æ‰¾ `moduleB.js` æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„ `package.json`ï¼Œå†ä¹‹åæ˜¯ `index.js`ã€‚\n\n> ç±»ä¼¼åœ°ï¼Œéç›¸å¯¹çš„å¯¼å…¥ä¼šéµå¾ª `Node.js` çš„è§£æé€»è¾‘ï¼Œé¦–å…ˆæŸ¥æ‰¾æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„æ–‡ä»¶å¤¹ã€‚å› æ­¤ `/root/src/moduleA.ts` ä»¶é‡Œçš„ `import { b } from \"moduleB\"` ä¼šä»¥ä¸‹é¢çš„æŸ¥æ‰¾é¡ºåºè§£æï¼š\n>\n> 1. `/root/src/node_modules/moduleB.ts`\n> 2. `/root/src/node_modules/moduleB.tsx`\n> 3. `/root/src/node_modules/moduleB.d.ts`\n> 4. `/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 5. `/root/src/node_modules/moduleB/index.ts`\n> 6. `/root/src/node_modules/moduleB/index.tsx`\n> 7. `/root/src/node_modules/moduleB/index.d.ts`\n> 8. `/root/node_modules/moduleB.ts`\n> 9. `/root/node_modules/moduleB.tsx`\n> 10. `/root/node_modules/moduleB.d.ts`\n> 11. `/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 12. `/root/node_modules/moduleB/index.ts`\n> 13. `/root/node_modules/moduleB/index.tsx`\n> 14. `/root/node_modules/moduleB/index.d.ts`\n> 15. `/node_modules/moduleB.ts`\n> 16. `/node_modules/moduleB.tsx`\n> 17. `/node_modules/moduleB.d.ts`\n> 18. `/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 19. `/node_modules/moduleB/index.ts`\n> 20. `/node_modules/moduleB/index.tsx`\n> 21. `/node_modules/moduleB/index.d.ts`\n\n> ä¸è¦è¢«è¿™é‡Œæ­¥éª¤çš„æ•°é‡å“åˆ° `-` `TypeScript` åªæ˜¯åœ¨æ­¥éª¤ï¼ˆ`8`ï¼‰å’Œï¼ˆ`15`ï¼‰å‘ä¸Šè·³äº†ä¸¤æ¬¡ç›®å½•ã€‚ è¿™å¹¶ä¸æ¯” `Node.js` é‡Œçš„æµç¨‹å¤æ‚ã€‚\n\n### 18.4 é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\n\n> 1. æœ‰æ—¶å·¥ç¨‹æºç ç»“æ„ä¸è¾“å‡ºç»“æ„ä¸åŒã€‚ é€šå¸¸æ˜¯è¦ç»è¿‡ä¸€ç³»ç»Ÿçš„æ„å»ºæ­¥éª¤æœ€åç”Ÿæˆè¾“å‡ºã€‚ å®ƒä»¬åŒ…æ‹¬å°† `.ts` ç¼–è¯‘æˆ `.js`ï¼Œå°†ä¸åŒä½ç½®çš„ä¾èµ–æ‹·è´è‡³ä¸€ä¸ªè¾“å‡ºä½ç½®ã€‚ æœ€ç»ˆç»“æœå°±æ˜¯è¿è¡Œæ—¶çš„æ¨¡å—åä¸åŒ…å«å®ƒä»¬å£°æ˜çš„æºæ–‡ä»¶é‡Œçš„æ¨¡å—åä¸åŒã€‚ æˆ–è€…æœ€ç»ˆè¾“å‡ºæ–‡ä»¶é‡Œçš„æ¨¡å—è·¯å¾„ä¸ç¼–è¯‘æ—¶çš„æºæ–‡ä»¶è·¯å¾„ä¸åŒäº†ã€‚\n> 2. `TypeScript` ç¼–è¯‘å™¨æœ‰ä¸€äº›é¢å¤–çš„æ ‡è®°ç”¨æ¥é€šçŸ¥ç¼–è¯‘å™¨åœ¨æºç ç¼–è¯‘æˆæœ€ç»ˆè¾“å‡ºçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†å“ªä¸ªè½¬æ¢ã€‚\n> 3. æœ‰ä¸€ç‚¹è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œè¿™äº›è½¬æ¢æ“ä½œï¼›å®ƒåªæ˜¯åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æŒ‡å¯¼æ¨¡å—çš„å¯¼å…¥ã€‚\n\n- `Base URL`\n\n> åœ¨åˆ©ç”¨ `AMD` æ¨¡å—åŠ è½½å™¨çš„åº”ç”¨é‡Œä½¿ç”¨ `baseUrl` æ˜¯å¸¸è§åšæ³•ï¼Œå®ƒè¦æ±‚åœ¨è¿è¡Œæ—¶æ¨¡å—éƒ½è¢«æ”¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚è¿™äº›æ¨¡å—çš„æºç å¯ä»¥åœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œä½†æ˜¯æ„å»ºè„šæœ¬ä¼šå°†å®ƒä»¬é›†ä¸­åˆ°ä¸€èµ·ã€‚\n\n> è®¾ç½® `baseUrl` æ¥å‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾æ¨¡å—ã€‚ æ‰€æœ‰ `éç›¸å¯¹æ¨¡å—` å¯¼å…¥éƒ½ä¼šè¢«å½“åšç›¸å¯¹äº `baseUrl`ã€‚\n\n- `baseUrl` çš„å€¼ç”±ä»¥ä¸‹ä¸¤è€…ä¹‹ä¸€å†³å®šï¼š\n\n> 1. å‘½ä»¤è¡Œä¸­ `baseUrl` çš„å€¼ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºå½“å‰è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰\n> 2. `tsconfig.json`é‡Œçš„ `baseUrl` å±æ€§ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºâ€˜`tsconfig.json`â€™è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰\n\n> æ³¨æ„ç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ä¸ä¼šè¢«è®¾ç½®çš„ `baseUrl` æ‰€å½±å“ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒä»¬çš„æ–‡ä»¶ã€‚\n\n> é˜…è¯»æ›´å¤šå…³äº `baseUrl` çš„ä¿¡æ¯ [RequireJS](https://requirejs.org/docs/api.html#config-baseUrl) å’Œ [`SystemJS`](https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#baseurl)ã€‚\n\n### 18.5 è·¯å¾„æ˜ å°„\n\n> æœ‰æ—¶æ¨¡å—ä¸æ˜¯ç›´æ¥æ”¾åœ¨ `baseUrl` ä¸‹é¢ã€‚ æ¯”å¦‚ï¼Œå……åˆ† \"`jquery`\"æ¨¡å—åœ°å¯¼å…¥ï¼Œåœ¨è¿è¡Œæ—¶å¯èƒ½è¢«è§£é‡Šä¸º\"`node\\_modules/jquery/dist/jquery.slim.min.js`\"ã€‚ åŠ è½½å™¨ä½¿ç”¨æ˜ å°„é…ç½®æ¥å°†æ¨¡å—åæ˜ å°„åˆ°è¿è¡Œæ—¶çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹ [RequireJs documentation](https://requirejs.org/docs/api.html#config-paths) å’Œ [SystemJS documentation](https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#paths)ã€‚\n\n> `TypeScript` ç¼–è¯‘å™¨é€šè¿‡ä½¿ç”¨ `tsconfig.json` æ–‡ä»¶é‡Œçš„ \"`paths`\" æ¥æ”¯æŒè¿™æ ·çš„å£°æ˜æ˜ å°„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•æŒ‡å®š `jquery` çš„\"`paths`\"çš„ä¾‹å­ã€‚\n\n```json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\", // This must be specified if \"paths\" is.\n    \"paths\": {\n      \"jquery\": [\"node_modules/jquery/dist/jquery\"] // æ­¤å¤„æ˜ å°„æ˜¯ç›¸å¯¹äº\"baseUrl\"\n    }\n  }\n}\n```\n\n> è¯·æ³¨æ„\"`paths`\"æ˜¯ç›¸å¯¹äº\"`baseUrl`\"è¿›è¡Œè§£æã€‚ å¦‚æœ \"`baseUrl`\" è¢«è®¾ç½®æˆäº†é™¤\"`.`\"å¤–çš„å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ `tsconfig.json` æ‰€åœ¨çš„ç›®å½•ï¼Œé‚£ä¹ˆæ˜ å°„å¿…é¡»è¦åšç›¸åº”çš„æ”¹å˜ã€‚å¦‚æœä½ åœ¨ä¸Šä¾‹ä¸­è®¾ç½®äº† `\"baseUrl\": \"./src\"`ï¼Œé‚£ä¹ˆ `jquery` åº”è¯¥æ˜ å°„åˆ° `\"../node\\_modules/jquery/dist/jquery\"`ã€‚\n\n> é€šè¿‡\"`paths`\"æˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå¤æ‚çš„æ˜ å°„ï¼ŒåŒ…æ‹¬æŒ‡å®šå¤šä¸ªå›é€€ä½ç½®ã€‚ å‡è®¾åœ¨ä¸€ä¸ªå·¥ç¨‹é…ç½®é‡Œï¼Œæœ‰ä¸€äº›æ¨¡å—ä½äºä¸€å¤„ï¼Œè€Œå…¶å®ƒçš„åˆ™åœ¨å¦ä¸ªçš„ä½ç½®ã€‚ æ„å»ºè¿‡ç¨‹ä¼šå°†å®ƒä»¬é›†ä¸­è‡³ä¸€å¤„ã€‚ å·¥ç¨‹ç»“æ„å¯èƒ½å¦‚ä¸‹ï¼š\n\n```typescript\nprojectRoot\nâ”œâ”€â”€ folder1\nâ”‚   â”œâ”€â”€ file1.ts (imports 'folder1/file2' and 'folder2/file3')\nâ”‚   â””â”€â”€ file2.ts\nâ”œâ”€â”€ generated\nâ”‚   â”œâ”€â”€ folder1\nâ”‚   â””â”€â”€ folder2\nâ”‚       â””â”€â”€ file3.ts\nâ””â”€â”€ tsconfig.json\n```\n\n- ç›¸åº”çš„ `tsconfig.json` æ–‡ä»¶å¦‚ä¸‹ï¼š\n\n```json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"*\": [\"*\", \"generated/*\"]\n    }\n  }\n}\n```\n\n> å®ƒå‘Šè¯‰ç¼–è¯‘å™¨æ‰€æœ‰åŒ¹é… `\"\\*\"`ï¼ˆæ‰€æœ‰çš„å€¼ï¼‰æ¨¡å¼çš„æ¨¡å—å¯¼å…¥ä¼šåœ¨ä»¥ä¸‹ä¸¤ä¸ªä½ç½®æŸ¥æ‰¾ï¼š\n>\n> 1. `\"\\*\"`ï¼š è¡¨ç¤ºåå­—ä¸å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æ˜ å°„ä¸º Â `=>` `/`\n> 2. \"`generated/`\"è¡¨ç¤ºæ¨¡å—åæ·»åŠ äº†â€œ`generated`â€å‰ç¼€ï¼Œæ‰€ä»¥æ˜ å°„ä¸º `<moduleName> => <baseUrl>/generated/<moduleName>`\n\n- `æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œç¼–è¯‘å™¨å°†ä¼šå¦‚ä¸‹å°è¯•è§£æè¿™ä¸¤ä¸ªå¯¼å…¥ï¼š`\n\n> (i). å¯¼å…¥`'folder1/file2'`\n>\n> 1. åŒ¹é… `'\\*'` æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚\n> 2. å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š`'\\*' -> folder1/file2`ã€‚\n> 3. æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ `baseUrl` åˆå¹¶ `-> projectRoot/folder1/file2.ts`ã€‚\n> 4. æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚\n>\n> (ii). å¯¼å…¥`'folder2/file3'`\n>\n> 1. åŒ¹é… `'\\*'` æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚\n> 2. å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š`'\\*' -> folder2/file3`ã€‚\n> 3. æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ `baseUrl` åˆå¹¶ `-> projectRoot/folder2/file3.ts`ã€‚\n> 4. æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè·³åˆ°ç¬¬äºŒä¸ªæ›¿æ¢ã€‚\n> 5. ç¬¬äºŒä¸ªæ›¿æ¢ï¼š`'generated/' -> generated/folder2/file3`ã€‚\n> 6. æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ `baseUrl` åˆå¹¶ `-&gt; projectRoot/generated/folder2/file3.ts`ã€‚\n> 7. æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚\n\n- åˆ©ç”¨ `rootDirs` æŒ‡å®šè™šæ‹Ÿç›®å½•\n\n> æœ‰æ—¶å¤šä¸ªç›®å½•ä¸‹çš„å·¥ç¨‹æºæ–‡ä»¶åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œåˆå¹¶æ”¾åœ¨æŸä¸ªè¾“å‡ºç›®å½•ä¸‹ã€‚ è¿™å¯ä»¥çœ‹åšä¸€äº›æºç›®å½•åˆ›å»ºäº†ä¸€ä¸ªâ€œè™šæ‹Ÿâ€ç›®å½•ã€‚ åˆ©ç”¨ `rootDirs`ï¼Œå¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆè¿™ä¸ªè™šæ‹Ÿç›®å½•çš„ `roots`ï¼› å› æ­¤ç¼–è¯‘å™¨å¯ä»¥åœ¨â€œè™šæ‹Ÿâ€ç›®å½•ä¸‹è§£æç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå°±å¥½åƒå®ƒä»¬è¢«åˆå¹¶åœ¨äº†ä¸€èµ·ä¸€æ ·ã€‚\n\n> æ¯”å¦‚ï¼Œæœ‰ä¸‹é¢çš„å·¥ç¨‹ç»“æ„ï¼š\n\n```typescript\nsrc\n â””â”€â”€ views\n     â””â”€â”€ view1.ts (imports './template1')\n     â””â”€â”€ view2.ts\n\n generated\n â””â”€â”€ templates\n         â””â”€â”€ views\n             â””â”€â”€ template1.ts (imports './view2')\n```\n\n> `src/views` é‡Œçš„æ–‡ä»¶æ˜¯ç”¨äºæ§åˆ¶ UI çš„ç”¨æˆ·ä»£ç ã€‚ `generated/templates` æ˜¯ `UI` æ¨¡ç‰ˆï¼Œåœ¨æ„å»ºæ—¶é€šè¿‡æ¨¡ç‰ˆç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆã€‚æ„å»ºä¸­çš„ä¸€æ­¥ä¼šå°† `/src/views` å’Œ `/generated/templates/views` çš„è¾“å‡ºæ‹·è´åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ åœ¨è¿è¡Œæ—¶ï¼Œè§†å›¾å¯ä»¥å‡è®¾å®ƒçš„æ¨¡ç‰ˆä¸å®ƒåŒåœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ `\"./template\"`ã€‚\n\n> å¯ä»¥ä½¿ç”¨\"`rootDirs`\"æ¥å‘Šè¯‰ç¼–è¯‘å™¨ã€‚\"`rootDirs`\"æŒ‡å®šäº†ä¸€ä¸ª `roots` åˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œçš„å†…å®¹ä¼šåœ¨è¿è¡Œæ—¶è¢«åˆå¹¶ã€‚\n\n> å› æ­¤ï¼Œé’ˆå¯¹è¿™ä¸ªä¾‹å­ï¼Œ `tsconfig.json` å¦‚ä¸‹ï¼š\n\n```json\n{\n  \"compilerOptions\": {\n    \"rootDirs\": [\"src/views\", \"generated/templates/views\"]\n  }\n}\n```\n\n> æ¯å½“ç¼–è¯‘å™¨åœ¨æŸä¸€ `rootDirs` çš„å­ç›®å½•ä¸‹å‘ç°äº†ç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå®ƒå°±ä¼šå°è¯•ä»æ¯ä¸€ä¸ª `rootDirs` ä¸­å¯¼å…¥ã€‚\n\n> `rootDirs` çš„çµæ´»æ€§ä¸ä»…ä»…å±€é™äºå…¶æŒ‡å®šäº†è¦åœ¨é€»è¾‘ä¸Šåˆå¹¶çš„ç‰©ç†ç›®å½•åˆ—è¡¨ã€‚å®ƒæä¾›çš„æ•°ç»„å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„ä»»ä½•åå­—çš„ç›®å½•ï¼Œä¸è®ºå®ƒä»¬æ˜¯å¦å­˜åœ¨ã€‚è¿™å…è®¸ç¼–è¯‘å™¨ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å¤„ç†å¤æ‚æ†ç»‘( `bundles` )å’Œè¿è¡Œæ—¶çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ¡ä»¶å¼•å…¥å’Œå·¥ç¨‹ç‰¹å®šçš„åŠ è½½å™¨æ’ä»¶ã€‚\n\n> è®¾æƒ³è¿™æ ·ä¸€ä¸ªå›½é™…åŒ–çš„åœºæ™¯ï¼Œæ„å»ºå·¥å…·è‡ªåŠ¨æ’å…¥ç‰¹å®šçš„è·¯å¾„è®°å·æ¥ç”Ÿæˆé’ˆå¯¹ä¸åŒåŒºåŸŸçš„æ†ç»‘ï¼Œæ¯”å¦‚å°† `\\#{locale}` åšä¸ºç›¸å¯¹æ¨¡å—è·¯å¾„ `./\\#{locale}/messages` çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªå‡å®šçš„è®¾ç½®ä¸‹ï¼Œå·¥å…·ä¼šæšä¸¾æ”¯æŒçš„åŒºåŸŸï¼Œå°†æŠ½åƒçš„è·¯å¾„æ˜ å°„æˆ `./zh/messages`ï¼Œ`./de/messages` ç­‰ã€‚\n\n> å‡è®¾æ¯ä¸ªæ¨¡å—éƒ½ä¼šå¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚æ¯”å¦‚ `./zh/messages` å¯èƒ½åŒ…å«ï¼š\n\n```typescript\nexport default [\"æ‚¨å¥½å—\", \"å¾ˆé«˜å…´è®¤è¯†ä½ \"];\n```\n\n> åˆ©ç”¨ `rootDirs` æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨äº†è§£è¿™ä¸ªæ˜ å°„å…³ç³»ï¼Œä»è€Œä¹Ÿå…è®¸ç¼–è¯‘å™¨èƒ½å¤Ÿå®‰å…¨åœ°è§£æ `./\\#{locale}/messages`ï¼Œå°±ç®—è¿™ä¸ªç›®å½•æ°¸è¿œéƒ½ä¸å­˜åœ¨ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ä¸‹é¢çš„ `tsconfig.json`ï¼š\n\n```json\n{\n  \"compilerOptions\": {\n    \"rootDirs\": [\"src/zh\", \"src/de\", \"src/#{locale}\"]\n  }\n}\n```\n\n> ç¼–è¯‘å™¨ç°åœ¨å¯ä»¥å°† `import messages from './#{locale}/messages'` è§£æä¸º `import messages from './zh/messages'` ç”¨åšå·¥å…·æ”¯æŒçš„ç›®çš„ï¼Œå¹¶å…è®¸åœ¨å¼€å‘æ—¶ä¸å¿…äº†è§£åŒºåŸŸä¿¡æ¯ã€‚\n\n### 18.6 è·Ÿè¸ªæ¨¡å—è§£æ\n\n> å¦‚ä¹‹å‰è®¨è®ºï¼Œç¼–è¯‘å™¨åœ¨è§£ææ¨¡å—æ—¶å¯èƒ½è®¿é—®å½“å‰æ–‡ä»¶å¤¹å¤–çš„æ–‡ä»¶ã€‚ è¿™ä¼šå¯¼è‡´å¾ˆéš¾è¯Šæ–­æ¨¡å—ä¸ºä»€ä¹ˆæ²¡æœ‰è¢«è§£æï¼Œæˆ–è§£æåˆ°äº†é”™è¯¯çš„ä½ç½®ã€‚ é€šè¿‡ `--traceResolution` å¯ç”¨ç¼–è¯‘å™¨çš„æ¨¡å—è§£æè·Ÿè¸ªï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬åœ¨æ¨¡å—è§£æè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\n> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨äº† `typescript` æ¨¡å—çš„ç®€å•åº”ç”¨ã€‚`app.ts` é‡Œæœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¼å…¥ `import * as ts from \"typescript\"`ã€‚\n\n```typescript\nâ”‚   tsconfig.json\nâ”œâ”€â”€â”€node_modules\nâ”‚   â””â”€â”€â”€typescript\nâ”‚       â””â”€â”€â”€lib\nâ”‚               typescript.d.ts\nâ””â”€â”€â”€src\n        app.ts\n```\n\n> ä½¿ç”¨ `--traceResolution` è°ƒç”¨ç¼–è¯‘å™¨ã€‚\n\n```typescript\ntsc --traceResolution\n```\n\n> è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n\n```typescript\n======== Resolving module 'typescript' from 'src/app.ts'. ========\nModule resolution kind is not specified, using 'NodeJs'.\nLoading module 'typescript' from 'node_modules' folder.\nFile 'src/node_modules/typescript.ts' does not exist.\nFile 'src/node_modules/typescript.tsx' does not exist.\nFile 'src/node_modules/typescript.d.ts' does not exist.\nFile 'src/node_modules/typescript/package.json' does not exist.\nFile 'node_modules/typescript.ts' does not exist.\nFile 'node_modules/typescript.tsx' does not exist.\nFile 'node_modules/typescript.d.ts' does not exist.\nFound 'package.json' at 'node_modules/typescript/package.json'.\n'package.json' has 'types' field './lib/typescript.d.ts' that references 'node_modules/typescript/lib/typescript.d.ts'.\nFile 'node_modules/typescript/lib/typescript.d.ts' exist - use it as a module resolution result.\n======== Module name 'typescript' was successfully resolved to 'node_modules/typescript/lib/typescript.d.ts'. ========\n```\n\n> éœ€è¦ç•™æ„çš„åœ°æ–¹ï¼š\n\n> 1. å¯¼å…¥çš„åå­—åŠä½ç½® `======== Resolving module 'typescript' from 'src/app.ts'. ========`\n> 2. ç¼–è¯‘å™¨ä½¿ç”¨çš„ç­–ç•¥ `Module resolution kind is not specified, using 'NodeJs'.`\n> 3. ä» `npm` åŠ è½½ `types` `'package.json' has 'types' field './lib/typescript.d.ts' that references 'node\\_modules/typescript/lib/typescript.d.ts'.`\n> 4. æœ€ç»ˆç»“æœ `======== Module name 'typescript' was successfully resolved to 'node\\_modules/typescript/lib/typescript.d.ts'. ========`\n\n- ä½¿ç”¨ `--noResolve`\n\n> æ­£å¸¸æ¥è®²ç¼–è¯‘å™¨ä¼šåœ¨å¼€å§‹ç¼–è¯‘ä¹‹å‰è§£ææ¨¡å—å¯¼å…¥ã€‚ æ¯å½“å®ƒæˆåŠŸåœ°è§£æäº†å¯¹ä¸€ä¸ªæ–‡ä»¶ `import`ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ä¼šåŠ åˆ°ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œï¼Œä»¥ä¾›ç¼–è¯‘å™¨ç¨åå¤„ç†ã€‚`--noResolve` ç¼–è¯‘é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦æ·»åŠ ä»»ä½•ä¸æ˜¯åœ¨å‘½ä»¤è¡Œä¸Šä¼ å…¥çš„æ–‡ä»¶åˆ°ç¼–è¯‘åˆ—è¡¨ã€‚ ç¼–è¯‘å™¨ä»ç„¶ä¼šå°è¯•è§£ææ¨¡å—ï¼Œä½†æ˜¯åªè¦æ²¡æœ‰æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šè¢«åŒ…å«åœ¨å†…ã€‚\n\n> `æ¯”å¦‚`:\n\n- `app.ts`\n\n```typescript\nimport * as A from \"moduleA\"; // OK, moduleA passed on the command-line\nimport * as B from \"moduleB\"; // Error TS2307: Cannot find module 'moduleB'.\n```\n\n```typescript\ntsc app.ts moduleA.ts --noResolve\n```\n\n> ä½¿ç”¨ `--noResolve` ç¼–è¯‘ `app.ts`ï¼š\n\n> 1. å¯èƒ½æ­£ç¡®æ‰¾åˆ° `moduleA`ï¼Œå› ä¸ºå®ƒåœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šäº†ã€‚\n> 2. æ‰¾ä¸åˆ° `moduleB`ï¼Œå› ä¸ºæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸Šä¼ é€’ã€‚\n\n### 18.7 å¸¸è§é—®é¢˜\n\n- ä¸ºä»€ä¹ˆåœ¨ `exclude` åˆ—è¡¨é‡Œçš„æ¨¡å—è¿˜ä¼šè¢«ç¼–è¯‘å™¨ä½¿ç”¨\n\n> `tsconfig.json` å°†æ–‡ä»¶å¤¹è½¬å˜ä¸€ä¸ªâ€œå·¥ç¨‹â€ å¦‚æœä¸æŒ‡å®šä»»ä½• â€œ`exclude`â€ æˆ– â€œ`files`â€ï¼Œæ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬ `tsconfig.json` å’Œ æ‰€æœ‰çš„å­ç›®å½• éƒ½ä¼šåœ¨ç¼–è¯‘åˆ—è¡¨é‡Œã€‚ å¦‚æœä½ æƒ³åˆ©ç”¨ â€œ`exclude`â€æ’é™¤æŸäº›æ–‡ä»¶ï¼Œç”šè‡³ä½ æƒ³æŒ‡å®šæ‰€æœ‰è¦ç¼–è¯‘çš„æ–‡ä»¶åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨â€œ`files`â€ã€‚\n\n> æœ‰äº›æ˜¯è¢« `tsconfig.json` è‡ªåŠ¨åŠ å…¥çš„ã€‚ å®ƒä¸ä¼šæ¶‰åŠåˆ°ä¸Šé¢è®¨è®ºçš„æ¨¡å—è§£æã€‚ å¦‚æœç¼–è¯‘å™¨è¯†åˆ«å‡ºä¸€ä¸ªæ–‡ä»¶æ˜¯æ¨¡å—å¯¼å…¥ç›®æ ‡ï¼Œå®ƒå°±ä¼šåŠ åˆ°ç¼–è¯‘åˆ—è¡¨é‡Œï¼Œä¸ç®¡å®ƒæ˜¯å¦è¢«æ’é™¤äº†ã€‚\n\n> å› æ­¤ï¼Œè¦ä»ç¼–è¯‘åˆ—è¡¨ä¸­æ’é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ éœ€è¦åœ¨æ’é™¤å®ƒçš„åŒæ—¶ï¼Œè¿˜è¦æ’é™¤æ‰€æœ‰å¯¹å®ƒè¿›è¡Œ `import` æˆ–ä½¿ç”¨äº† `/// <reference path=\"...\" />` æŒ‡ä»¤çš„æ–‡ä»¶ã€‚\n\n## åä¹ã€å£°æ˜åˆå¹¶\n\n### 19.1 ä»‹ç»\n\n> `TypeScript` ä¸­æœ‰äº›ç‹¬ç‰¹çš„æ¦‚å¿µå¯ä»¥åœ¨ç±»å‹å±‚é¢ä¸Šæè¿° `JavaScript` å¯¹è±¡çš„æ¨¡å‹ã€‚è¿™å…¶ä¸­å°¤å…¶ç‹¬ç‰¹çš„ä¸€ä¸ªä¾‹å­ \"å£°æ˜åˆå¹¶\" çš„æ¦‚å¿µã€‚\n\n> ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œå°†æœ‰åŠ©äºæ“ä½œç°æœ‰çš„ `JavaScript` ä»£ç ã€‚åŒæ—¶ï¼Œä¹Ÿä¼šæœ‰åŠ©äºç†è§£æ›´å¤šé«˜çº§æŠ½è±¡çš„æ¦‚å¿µã€‚\n\n> å¯¹æœ¬æ–‡ä»¶æ¥è®²ï¼Œ\"`å£°æ˜åˆå¹¶`\" æ˜¯æŒ‡ç¼–è¯‘å™¨å°†é’ˆå¯¹åŒä¸€ä¸ªåå­—çš„ä¸¤ä¸ªç‹¬ç«‹å£°æ˜åˆå¹¶ä¸ºå•ä¸€å£°æ˜ã€‚åˆå¹¶åçš„å£°æ˜åŒæ—¶æ‹¥æœ‰åŸå…ˆä¸¤ä¸ªå£°æ˜çš„ç‰¹æ€§ã€‚ä»»ä½•æ•°é‡çš„å£°æ˜éƒ½å¯è¢«åˆå¹¶ï¼›ä¸å±€é™äºä¸¤ä¸ªå£°æ˜ã€‚\n\n### 19.2 åŸºç¡€æ¦‚å¿µ\n\n> `TypeScript` ä¸­çš„å£°æ˜ä¼šåˆ›å»ºä»¥ä¸‹ä¸‰ç§å®ä½“ä¹‹ä¸€ï¼š`å‘½åç©ºé—´`ï¼Œ`ç±»å‹` æˆ– `å€¼`ã€‚åˆ›å»ºå‘½åç©ºé—´çš„å£°æ˜ä¼šæ–°å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒåŒ…å«äº†ç”¨(.)ç¬¦å·æ¥è®¿é—®æ—¶ä½¿ç”¨çš„åå­—ã€‚åˆ›å»ºç±»å‹çš„å£°æ˜æ˜¯ï¼šç”¨å£°æ˜çš„æ¨¡å‹åˆ›å»ºä¸€ä¸ªç±»å‹å¹¶ç»‘å®šåˆ°ç»™å®šçš„åå­—ä¸Šã€‚\n> æœ€åï¼Œåˆ›å»ºå€¼çš„å£°æ˜ä¼šåˆ›å»ºåœ¨ `JavaScript` è¾“å‡ºä¸­çœ‹åˆ°çš„å€¼ã€‚\n\n| Declaration Type | Namespace | Type | Value |\n| :--------------- | :-------- | :--- | :---- |\n| `Namespace`      | X         |      | X     |\n| `Class`          |           | X    | X     |\n| `Enum`           |           | X    | X     |\n| `Interface`      |           | X    |       |\n| `Type Alias`     |           | X    |       |\n| `Function`       |           |      | X     |\n| `Variable`       |           |      | X     |\n\n> ç†è§£æ¯ä¸ªå£°æ˜åˆ›å»ºäº†ä»€ä¹ˆï¼Œæœ‰åŠ©äºç†è§£å½“å£°æ˜åˆå¹¶æ—¶ï¼Œæœ‰å“ªäº›ä¸œè¥¿è¢«åˆå¹¶äº†ã€‚\n\n### 19.3 åˆå¹¶æ¥å£\n\n> æœ€ç®€å•æœ€å¸¸è§çš„å£°æ˜åˆå¹¶ç±»å‹æ˜¯æ¥å£åˆå¹¶ã€‚ä»æ ¹æœ¬ä¸Šè¯´ï¼Œåˆå¹¶çš„æœºåˆ¶æ˜¯æŠŠåŒæ–¹çš„æˆå‘˜æ”¾åˆ°ä¸€ä¸ªåŒåçš„æ¥å£é‡Œã€‚\n\n```typescript\ninterface Box {\n  height: number;\n  width: number;\n}\ninterface Box {\n  scale: number;\n}\nlet box: Box = { height: 5, width: 6, scale: 10 };\n```\n\n> æ¥å£çš„éå‡½æ•°æˆå‘˜åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚å¦‚æœå®ƒä»¬ä¸æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå®ƒä»¬å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ã€‚å¦‚æœä¸¤ä¸ªæ¥å£ä¸­åŒæ—¶å£°æ˜äº†åŒåçš„éå‡½æ•°æˆå‘˜ä¸”å®ƒä»¬çš„ç±»å‹ä¸åŒï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚\n\n> å¯¹äºå‡½æ•°æˆå‘˜ï¼Œæ¯ä¸ªåŒåå‡½æ•°å£°æ˜éƒ½ä¼šè¢«å½“æˆè¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªé‡è½½ã€‚åŒæ—¶éœ€è¦æ³¨æ„ï¼Œå½“æ¥å£ `A` ä¸åæ¥çš„æ¥å£ `A` åˆå¹¶æ—¶ï¼Œåé¢çš„æ¥å£å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚\n\n```typescript\n// å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\ninterface Cloner {\n  clone(animal: Animal): Animal;\n}\ninterface Cloner {\n  clone(animal: Sheep): Sheep;\n}\ninterface Cloner {\n  clone(animal: Dog): Dog;\n  clone(animal: Cat): Cat;\n}\n// è¿™ä¸‰ä¸ªæ¥å£åˆå¹¶æˆä¸€ä¸ªå£°æ˜ï¼š\ninterface Cloner {\n  clone(animal: Dog): Dog;\n  clone(animal: Cat): Cat;\n  clone(animal: Sheep): Sheep;\n  clone(animal: Animal): Animal;\n}\n```\n\n> æ³¨æ„æ¯ç»„æ¥å£é‡Œçš„å£°æ˜é¡ºåºä¿æŒä¸å˜ï¼Œä½†å„ç»„æ¥å£ä¹‹é—´çš„é¡ºåºæ˜¯åæ¥çš„æ¥å£é‡è½½å‡ºç°åœ¨é å‰çš„ä½ç½®ã€‚\n\n> è¿™ä¸ªè§„åˆ™æœ‰ä¸€ä¸ªä¾‹å¤–æ˜¯å½“å‡ºç°ç‰¹æ®Šçš„å‡½æ•°ç­¾åæ—¶ã€‚å¦‚æœç­¾åé‡Œæœ‰ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯å•ä¸€çš„å­—ç¬¦ä¸²å­—é¢é‡(æ¯”å¦‚ï¼Œä¸æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„è”åˆç±»å‹)ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«æå‡åˆ°é‡è½½åˆ—è¡¨çš„æœ€é¡¶ç«¯ã€‚\n\n```typescript\n// æ¯”å¦‚ï¼Œä¸‹é¢çš„æ¥å£ä¼šåˆå¹¶åˆ°ä¸€èµ·\ninterface Document {\n  createElement(tagName: any): ELement;\n}\ninterface Document {\n  createElement(tagName: \"div\"): HTMLDivElement;\n  createElement(tagName: \"span\"): HTMLSpanElement;\n}\ninterface Document {\n  createElement(tagName: string): HTMLElement;\n  createElement(tagName: \"canvas\"): HTMLCanvasElement;\n}\n// åˆå¹¶åçš„ Document å°†ä¼šåƒä¸‹é¢è¿™æ ·:\ninterface Document {\n  createElement(tagName: \"canvas\"): HTMLCanvasElement;\n  createElement(tagName: \"div\"): HTMLDivElement;\n  createElement(tagName: \"span\"): HTMLSpanElement;\n  createElement(tagName: string): HTMLElement;\n  createElement(tagName: any): Element;\n}\n```\n\n### 19.4 åˆå¹¶å‘½åç©ºé—´\n\n1. ä¸æ¥å£ç›¸ä¼¼ï¼ŒåŒåçš„å‘½åç©ºé—´ä¹Ÿä¼šåˆå¹¶å…¶æˆå‘˜ã€‚å‘½åç©ºé—´ä¼šåˆ›å»ºå‡ºå‘½åç©ºé—´å’Œå€¼ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸¤è€…éƒ½æ˜¯æ€ä¹ˆåˆå¹¶çš„ã€‚\n2. å¯¹äºå‘½åç©ºé—´çš„åˆå¹¶ï¼Œæ¨¡å—å¯¼å‡ºçš„åŒåæ¥å£è¿›è¡Œåˆå¹¶ï¼Œæ„æˆå•ä¸€å‘½åç©ºé—´å†…å«åˆå¹¶åçš„æ¥å£ã€‚\n3. å¯¹äºå‘½åç©ºé—´é‡Œå€¼çš„åˆå¹¶ï¼Œå¦‚æœå½“å‰å·²ç»å­˜åœ¨ç»™å®šåå­—çš„å‘½åç©ºé—´ï¼Œé‚£ä¹ˆåæ¥çš„å‘½åç©ºé—´çš„å¯¼å‡ºæˆå‘˜ä¼šè¢«åŠ åˆ°å·²ç»å­˜åœ¨çš„é‚£ä¸ªæ¨¡å—é‡Œã€‚\n\n```typescript\n// Animals å£°æ˜åˆå¹¶ç¤ºä¾‹ï¼š\nnamespace Animals {\n  export class Zebra {}\n}\nnamespace Animals {\n  export interface Legged {\n    numberOfLegs: number;\n  }\n  export class Dog {}\n}\n// ç­‰åŒäºï¼š\nnamespace Animals {\n  export interface Legged {\n    numberOfLegs: number;\n  }\n  export class Zebra {}\n  export class Dog {}\n}\n```\n\n> é™¤äº†è¿™äº›åˆå¹¶å¤–ï¼Œä½ è¿˜éœ€è¦äº†è§£éå¯¼å‡ºæˆå‘˜æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚éå¯¼å‡ºæˆå‘˜ä»…åœ¨å…¶åŸæœ‰çš„(åˆå¹¶å‰çš„)å‘½åç©ºé—´å†…å¯è§ã€‚è¿™å°±æ˜¯è¯´åˆå¹¶ä¹‹åï¼Œä»å…¶å®ƒå‘½åç©ºé—´åˆå¹¶è¿›æ¥çš„æˆå‘˜æ— æ³•è®¿é—®éå¯¼å‡ºæˆå‘˜ã€‚\n\n- ä¸‹é¢æä¾›äº†æ¸…æ™°çš„è¯´æ˜ï¼š\n\n```typescript\nnamespace Animal {\n  let haveMuscles = true;\n  export function animalsHaveMuscles() {\n    return haveMuscles;\n  }\n}\nnamespace Animal {\n  export function doAnimalsHaveMuscles() {\n    return haveMuscles; // // Error, because haveMuscles is not accessible here\n  }\n}\n```\n\n> å› ä¸º `haveMuscles` å¹¶æ²¡æœ‰å¯¼å‡ºï¼Œåªæœ‰ `animalsHaveMuscles` å‡½æ•°å…±äº«äº†åŸå§‹æœªåˆå¹¶çš„å‘½åç©ºé—´å¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡ã€‚\n> `doAnimalsHaveMuscles` å‡½æ•°è™½æ˜¯åˆå¹¶å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯è®¿é—®ä¸äº†æœªå¯¼å‡ºçš„æˆå‘˜ã€‚\n\n### 19.5 å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\n\n> å‘½åç©ºé—´å¯ä»¥ä¸å…¶å®ƒç±»å‹çš„å£°æ˜åˆå¹¶ã€‚åªè¦å‘½åç©ºé—´çš„å®šä¹‰ç¬¦åˆå°†è¦åˆå¹¶ç±»å‹çš„å®šä¹‰ã€‚åˆå¹¶ç»“æœåŒ…å«ä¸¤è€…çš„å£°æ˜ç±»å‹ã€‚\n> `TypeScript` ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å»å®ç°ä¸€äº› `JavaScript` é‡Œçš„è®¾è®¡æ¨¡å¼ã€‚\n\n#### 19.5.1 åˆå¹¶å‘½åç©ºé—´å’Œç±»\n\n> è¿™è®©æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºå†…éƒ¨ç±»\n\n```typescript\nclass Album {\n  label: Album.AlbumLabel;\n}\n\nnamespace Album {\n  export class AlbumLabel {}\n}\n```\n\n> `åˆå¹¶è§„åˆ™` ä¸ä¸Šé¢ `åˆå¹¶å‘½åç©ºé—´` å°èŠ‚é‡Œè®²çš„è§„åˆ™ä¸€è‡´ï¼Œæˆ‘ä»¬å¿…é¡»å¯¼å‡º `AlbumLabel` ç±»ï¼Œå¥½è®©åˆå¹¶çš„ç±»èƒ½è®¿é—®ã€‚\n\n> `åˆå¹¶ç»“æœ`æ˜¯ä¸€ä¸ªç±»å¹¶å¸¦æœ‰ä¸€ä¸ªå†…éƒ¨ç±»ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ä¸ºç±»å¢åŠ ä¸€äº›é™æ€å±æ€§ã€‚\n\n> é™¤äº†å†…éƒ¨ç±»çš„æ¨¡å¼ï¼Œä½ åœ¨ `JavaScript` é‡Œï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ç¨åæ‰©å±•å®ƒå¢åŠ ä¸€äº›å±æ€§ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚`TypeScript` ä½¿ç”¨å£°æ˜åˆå¹¶æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„å¹¶ä¿è¯ç±»å‹å®‰å…¨ã€‚\n\n```typescript\nfunction buildLabel(name: string): string {\n  return buildLabel.prefix + name + buildLabel.suffix;\n}\nnamespace buildLabel {\n  export let suffix = \"\";\n  export let prefix = \"Hello, \";\n}\nconsole.log(buildLabel(\"Sam Smith\"));\n\n// ç›¸ä¼¼çš„ï¼Œå‘½åç©ºé—´å¯ä»¥ç”¨æ¥æ‰©å±•æšä¸¾ç±»å‹\nenum Color {\n  red = 1,\n  green = 2,\n  blue = 4\n}\nnamespace Color {\n  export function mixColor(colorName: string) {\n    if (colorName === \"yellow\") {\n      return Color.red + Color.green;\n    } else if (colorName === \"white\") {\n      return Color.red + Color.green + Color.blue;\n    } else if (colorName === \"magenta\") {\n      return Color.red + Color.blue;\n    } else if (colorName === \"cyan\") {\n      return Color.green + Color.blue;\n    }\n  }\n}\n```\n\n#### 19.5.2 éæ³•çš„åˆå¹¶\n\n> `TypeScript` å¹¶éå…è®¸æ‰€æœ‰çš„åˆå¹¶ã€‚ç›®å‰ï¼Œç±»ä¸èƒ½ä¸å…¶å®ƒç±»æˆ–å˜é‡åˆå¹¶ã€‚æƒ³è¦äº†è§£å¦‚ä½•æ¨¡ä»¿ç±»çš„åˆå¹¶ï¼Œè¯·å‚ç…§ [TypeScript æ··å…¥](https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/Mixins%E6%B7%B7%E5%85%A5/README.md)ã€‚\n\n### 19.6 æ¨¡å—æ‰©å±•\n\n> è™½ç„¶ `JavaScript` ä¸æ”¯æŒåˆå¹¶ï¼Œä½†ä½ å¯ä»¥ä¸ºå¯¼å…¥çš„å¯¹è±¡æ‰“è¡¥ä¸ä»¥æ›´æ–°å®ƒä»¬ã€‚\n\n- è®©æˆ‘ä»¬è€ƒå¯Ÿä¸€ä¸‹è¿™ä¸ªç©å…·æ€§çš„ç¤ºä¾‹ï¼š\n\n```typescript\n// observable.js\nexport class Observable<T> {\n  // ... implementation left as an exercise for the reader...\n}\n\n// map.js\nimport { Observable } from \"./observable\";\nObservable.prototype.map = function () {\n  // ... another exercise for the reader\n};\n```\n\n> å®ƒä¹Ÿå¯ä»¥å¾ˆå¥½åœ°å·¥ä½œåœ¨ `TypeScript` ä¸­ï¼Œä½†ç¼–è¯‘å™¨å¯¹ `Observable.prototype.map` ä¸€æ— æ‰€çŸ¥ã€‚ä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ¨¡å—æ¥å°†å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ã€‚\n\n```typescript\n// observable.ts stays the same\n// map.ts\nimport { Observable } from \"./observable\";\ndeclare module \"./observable\" {\n  interface Observable<T> {\n    map<U>(f: (x: T) => U): Observable<U>;\n  }\n}\nObservable.prototype.map = function (f) {\n  // ... another exercise for the reader\n};\n\n// consumer.ts\nimport { Observable } from \"./observable\";\nimport \"./map\";\nlet o: Observable<number>;\no.map(x => x.toFixed());\n```\n\n> æ¨¡å—åçš„è§£æå’Œç”¨ `import / export` è§£ææ¨¡å—æ ‡è¯†ç¬¦çš„æ–¹å¼æ˜¯ä¸€è‡´çš„ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ [Modules](https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/%E6%A8%A1%E5%9D%97/README.md)ã€‚å½“è¿™äº›å£°æ˜åœ¨æ‰©å±•ä¸­åˆå¹¶æ—¶ï¼Œå°±å¥½åƒåœ¨åŸå§‹ä½ç½®è¢«å£°æ˜äº†ä¸€æ ·ã€‚ ä½†æ˜¯ï¼Œä½ ä¸èƒ½åœ¨æ‰©å±•ä¸­å£°æ˜æ–°çš„é¡¶çº§å£°æ˜(ä»…å¯ä»¥æ‰©å±•æ¨¡å—ä¸­å·²ç»å­˜åœ¨çš„å£°æ˜)ã€‚\n\n### 19.7 å…¨å±€æ‰©å±•\n\n> ä½ ä¹Ÿå¯ä»¥åœ¨æ¨¡å—å†…éƒ¨æ·»åŠ å£°æ˜åˆ°å…¨å±€ä½œç”¨åŸŸä¸­\n\n> `observable.ts`\n\n```typescript\nexport class Observable<T> {\n  // ... still no implementation ...\n}\ndeclare global {\n  interface Array<T> {\n    toObservable(): Observable<T>;\n  }\n}\nArray.prototype.toObservable = function () {\n  // ...\n};\n```\n\n> å…¨å±€æ‰©å±•å’Œä¸æ¨¡å—æ‰©å±•çš„è¡Œä¸ºå’Œé™åˆ¶æ˜¯ç›¸åŒçš„ã€‚\n\n## äºŒåã€JSX\n\n### 20.1 ä»‹ç»\n\n> `JSX` æ˜¯ä¸€ç§åµŒå…¥å¼çš„ç±»ä¼¼ `XML` çš„è¯­æ³•ã€‚å®ƒå¯ä»¥è¢«è½¬æ¢æˆåˆæ³•çš„ `JavaScript`ï¼Œå°½ç®¡è½¬æ¢çš„è¯­ä¹‰æ˜¯æ ¹æ®ä¸åŒçš„å®ç°è€Œå®šçš„ã€‚\n> `JSX` å›  `React` æ¡†æ¶è€Œæµè¡Œï¼Œä½†ä¹Ÿå­˜åœ¨å…¶å®ƒçš„å®ç°ã€‚`TypeScript` æ”¯æŒå†…åµŒï¼Œç±»å‹æ£€æŸ¥ä»¥åŠå°† `JSX` ç›´æ¥ç¼–è¯‘ä¸º JavaScriptã€‚\n\n### 20.2 åŸºæœ¬ç”¨æ³•\n\n- æƒ³è¦ä½¿ç”¨ `JSX` å¿…é¡»åšä¸¤ä»¶äº‹ï¼š\n\n> 1. ç»™æ–‡ä»¶ä¸€ä¸ª `.tsx` æ‰©å±•å\n> 2. å¯ç”¨ `jsx` é€‰é¡¹\n\n- `TypeScript` å…·æœ‰ä¸‰ç§ `JSX` æ¨¡å¼ï¼š`preserve`, `react` å’Œ `react-native`ã€‚è¿™äº›æ¨¡å¼åªåœ¨ä»£ç ç”Ÿæˆé˜¶æ®µèµ·ä½œç”¨ - ç±»å‹æ£€æŸ¥å¹¶ä¸å—å½±å“ã€‚\n\n> 1. åœ¨ `preserve` æ¨¡å¼ä¸‹ç”Ÿæˆä»£ç ä¸­ä¼šä¿ç•™ `JSX` ä»¥ä¾›åç»­çš„è½¬æ¢æ“ä½œä½¿ç”¨( `æ¯”å¦‚ï¼šBabel` )ã€‚å¦å¤–ï¼Œè¾“å‡ºæ–‡ä»¶ä¼šå¸¦æœ‰ `.jsx` æ‰©å±•åã€‚\n> 2. `react` æ¨¡å¼ä¼šç”Ÿæˆ `React.createElement`ï¼Œåœ¨ä½¿ç”¨å‰ä¸éœ€è¦å†è¿›è¡Œè½¬æ¢æ“ä½œäº†ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åä¸º `.js`ã€‚\n> 3. `react-native` ç›¸å½“äº `preserve`ï¼Œå®ƒä¹Ÿä¿ç•™äº†æ‰€æœ‰çš„ `JSX`ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åæ˜¯ `.js`ã€‚\n\n| æ¨¡å¼         | è¾“å…¥      | è¾“å‡º                         | è¾“å‡ºæ–‡ä»¶æ‰©å±•å |\n| :----------- | :-------- | :--------------------------- | :------------- |\n| preserve     | `<div />` | `<div />`                    | `.js`          |\n| react        | `<div />` | `React.createElement(\"div\")` | `.js`          |\n| react-native | `<div />` | `<div />`                    | `.js`          |\n\n> ä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ `--jsx` æ ‡è®°æˆ– `tsconfig.json` é‡Œçš„é€‰é¡¹æ¥æŒ‡å®šæ¨¡å¼ã€‚\n> æ³¨æ„ï¼š`React` æ ‡è¯†ç¬¦æ˜¯å†™æ­»çš„ç¡¬ç¼–ç ï¼Œæ‰€ä»¥ä½ å¿…é¡»ä¿è¯ `React`ï¼ˆå¤§å†™çš„`R`ï¼‰æ˜¯å¯ç”¨çš„ã€‚\n\n### 20.3 as æ“ä½œç¬¦\n\n> å›æƒ³ä¸€ä¸‹æ€ä¹ˆå†™ç±»å‹æ–­è¨€\n\n```typescript\nvar foo = <foo>bar;\n```\n\n> è¿™é‡Œæ–­è¨€ `bar` å˜é‡æ˜¯ `foo` ç±»å‹çš„ã€‚ å› ä¸º `TypeScript` ä¹Ÿä½¿ç”¨å°–æ‹¬å·æ¥è¡¨ç¤ºç±»å‹æ–­è¨€ï¼Œåœ¨ç»“åˆ `JSX` çš„è¯­æ³•åå°†å¸¦æ¥è§£æä¸Šçš„å›°éš¾ã€‚å› æ­¤ï¼Œ`TypeScript` åœ¨ `.tsx` æ–‡ä»¶é‡Œç¦ç”¨äº†ä½¿ç”¨å°–æ‹¬å·çš„ç±»å‹æ–­è¨€ã€‚\n\n> ç”±äºä¸èƒ½å¤Ÿåœ¨ `.tsx` æ–‡ä»¶é‡Œä½¿ç”¨ä¸Šè¿°è¯­æ³•ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹æ–­è¨€æ“ä½œç¬¦ï¼š`as`ã€‚\n\n- ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨ `as` æ“ä½œç¬¦æ”¹å†™ï¼š\n\n```typescript\nvar foo = bar as foo;\n```\n\n> `as` æ“ä½œç¬¦åœ¨ `.ts` å’Œ `.tsx` é‡Œéƒ½å¯ç”¨ï¼Œå¹¶ä¸”ä¸å°–æ‹¬å·ç±»å‹æ–­è¨€è¡Œä¸ºæ˜¯ç­‰ä»·çš„ã€‚\n\n### 20.4 ç±»å‹æ£€æŸ¥\n\n> ä¸ºäº†ç†è§£ `JSX` çš„ç±»å‹æ£€æŸ¥ï¼Œä½ å¿…é¡»é¦–å…ˆç†è§£ `å›ºæœ‰å…ƒç´ ` ä¸ `åŸºäºå€¼çš„å…ƒç´ ` ä¹‹é—´çš„åŒºåˆ«ã€‚å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª `JSX` è¡¨è¾¾å¼ `<expr />`ï¼Œ`expr` å¯èƒ½å¼•ç”¨ç¯å¢ƒè‡ªå¸¦çš„æŸäº›ä¸œè¥¿(æ¯”å¦‚ï¼Œåœ¨ `DOM` ç¯å¢ƒé‡Œçš„ `div` æˆ– `span`)æˆ–è€…æ˜¯ä½ è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚è¿™æ˜¯éå¸¸é‡è¦çš„ã€‚åŸå› æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š\n\n1. å¯¹äº `React`ï¼Œå›ºæœ‰å…ƒç´ ä¼šç”Ÿæˆå­—ç¬¦ä¸² (`React.createElement(\"div\")` )ï¼Œç„¶åç”±ä½ è‡ªå®šä¹‰çš„ç»„ä»¶å´ä¸ä¼šç”Ÿæˆ( `React.createElement(MyComponent)`)ã€‚\n2. ä¼ å…¥ `JSX` å…ƒç´ é‡Œçš„å±æ€§ç±»å‹çš„æŸ¥æ‰¾æ–¹å¼ä¸åŒã€‚å›ºæœ‰å…ƒç´ æ€»ä»¥ä¸€ä¸ªå°å†™å­—æ¯å¼€å¤´ï¼ŒåŸºäºå€¼çš„å…ƒç´ æ€»æ˜¯ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´ã€‚\n\n#### 20.4.1 å›ºæœ‰å…ƒç´ \n\n> å›ºæœ‰å…ƒç´ ä½¿ç”¨ç‰¹æ®Šçš„æ¥å£ `JSX.IntrinsicElements` æ¥æŸ¥æ‰¾ã€‚é»˜è®¤åœ°ï¼Œå¦‚æœè¿™ä¸ªæ¥å£æ²¡æœ‰æŒ‡å®šï¼Œä¼šå…¨éƒ¨é€šè¿‡ï¼Œä¸å¯¹å›ºæœ‰å…ƒç´ è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ç„¶è€Œï¼Œå¦‚æœè¿™ä¸ªæ¥å£å­˜åœ¨ï¼Œé‚£ä¹ˆå›ºæœ‰å…ƒç´ çš„åå­—éœ€è¦åœ¨ `JSX.IntrinsicElements` æ¥å£çš„å±æ€§é‡ŒæŸ¥æ‰¾ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        foo: any;\n    }\n}\n<foo />; // æ­£ç¡®\n<bar />; // é”™è¯¯\n```\n\n> åœ¨ä¸Šä¾‹ä¸­ï¼Œ``æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯`ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæ²¡åœ¨ JSX.IntrinsicElements` é‡ŒæŒ‡å®šã€‚\n\n> æ³¨æ„ï¼šä½ ä¹Ÿå¯ä»¥åœ¨ `JSX.IntrinsicElements` ä¸ŠæŒ‡å®šä¸€ä¸ªç”¨æ¥æ•è·æ‰€æœ‰å­—ç¬¦ä¸²ç´¢å¼•ï¼š\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        [elemName: string]: any;\n    }\n}\n```\n\n#### 20.4.2 åŸºäºå€¼çš„å…ƒç´ \n\n> åŸºäºå€¼çš„å…ƒç´ ä¼šç®€å•çš„åœ¨å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸé‡ŒæŒ‰æ ‡è¯†ç¬¦æŸ¥æ‰¾ã€‚\n\n```jsx\nimport MyComponent from \"./myComponent\";\n<MyComponent /> // æ­£ç¡®\n<SomeOtherComponent /> // é”™è¯¯\n```\n\n> æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰åŸºäºå€¼çš„å…ƒç´ ï¼š\n>\n> 1. æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ (`SFC`)\n> 2. ç±»ç»„ä»¶\n\n> ç”±äºè¿™ä¸¤ç§åŸºäºå€¼çš„å…ƒç´ åœ¨ `JSX` è¡¨è¾¾å¼é‡Œæ— æ³•åŒºåˆ†ï¼Œå› æ­¤ `TypeScript` é¦–å…ˆä¼šå°è¯•å°†è¡¨è¾¾å¼ä½œä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶è¿›è¡Œè§£æã€‚å¦‚æœè§£ææˆåŠŸï¼Œé‚£ä¹ˆ `TypeScript` å°±å®Œæˆäº†è¡¨è¾¾å¼åˆ°å…¶å£°æ˜çš„è§£ææ“ä½œã€‚å¦‚æœæŒ‰ç…§æ— çŠ¶æ€å‡½æ•°ç»„ä»¶è§£æå¤±è´¥ï¼Œé‚£ä¹ˆ `TypeScript` ä¼šç»§ç»­å°è¯•ä»¥ç±»ç»„ä»¶çš„å½¢å¼è¿›è¡Œè§£æã€‚å¦‚æœä¾æ—§å¤±è´¥ï¼Œé‚£ä¹ˆå°†è¾“å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n\n##### (1) æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\n\n> æ­£å¦‚å…¶åï¼Œç»„ä»¶è¢«å®šä¹‰æˆ `JavaScript` å‡½æ•°ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `props` å¯¹è±¡ã€‚`TypeScript` ä¼šå¼ºåˆ¶å®ƒçš„è¿”å›å€¼å¯ä»¥èµ‹å€¼ç»™ `JSX.Element`ã€‚\n\n```jsx\ninterface FooProp {\n    name: string;\n    X: number;\n    Y: number;\n}\ndeclare function AnotherComponent(prop: { name: string });\nfunction ComponentFoo(prop: FooProp) {\n    return <AnotherComponent name={prop.name} />\n}\nconst Button = (prop: { value: string }, context: { color: string }) => <button>;\n```\n\n> ç”±äºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶æ˜¯ç®€å•çš„ `JavaScript` å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å‡½æ•°é‡è½½ã€‚\n\n```jsx\ninterface ClickableProps {\n    children: JSX.Element[] | JSX.Element;\n}\ninterface HomeProps extends ClickableProps {\n    home: JSX.Element;\n}\ninterface SlideProps extends ClickableProps {\n    side: JSX.Element | string;\n}\nfunction MainButton(prop: HomeProps): JSX.Element;\nfunction MainButton(prop: SlideProps): JSX.Element {\n    // ...\n}\n```\n\n##### (2) ç±»ç»„ä»¶\n\n> 1. æˆ‘ä»¬å¯ä»¥å®šä¹‰ç±»ç»„ä»¶çš„ç±»å‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é¦–å…ˆæœ€å¥½å¼„æ‡‚ä¸¤ä¸ªæ–°çš„æœ¯è¯­ï¼š`å…ƒç´ ç±»çš„ç±»å‹` å’Œ `å…ƒç´ å®ä¾‹çš„ç±»å‹`ã€‚\n> 2. ç°åœ¨æœ‰ `<Expr />`ï¼Œå…ƒç´ ç±»çš„ç±»å‹ä¸º `Expr` çš„ç±»å‹ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå¦‚æœ `MyComponent` æ˜¯ `ES6` çš„ç±»ï¼Œé‚£ä¹ˆç±»ç±»å‹å°±æ˜¯ç±»çš„æ„é€ å‡½æ•°å’Œé™æ€éƒ¨åˆ†ã€‚å¦‚æœ `MyComponent` æ˜¯ä¸ªå·¥å‚å‡½æ•°ï¼Œç±»ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°ã€‚\n> 3. ä¸€æ—¦å»ºç«‹èµ·äº†ç±»ç±»å‹ï¼Œå®ä¾‹ç±»å‹ç”±æ„é€ å™¨æˆ–è°ƒç”¨ç­¾å(å¦‚æœå­˜åœ¨çš„è¯)çš„è¿”å›å€¼çš„è”åˆæ„æˆã€‚å†æ¬¡è¯´æ˜ï¼Œåœ¨ `ES6` ç±»çš„æƒ…å†µä¸‹ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªç±»çš„å®ä¾‹çš„ç±»å‹ï¼Œå¹¶ä¸”å¦‚æœæ˜¯å·¥å‚å‡½æ•°ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°è¿”å›å€¼ç±»å‹ã€‚\n\n```jsx\nclass MyComponent {\n  render() {}\n}\n// ä½¿ç”¨æ„é€ ç­¾å\nvar myComponent = new MyComponent();\n// å…ƒç´ ç±»çš„ç±»å‹ => MyComponent;\n// å…ƒç´ å®ä¾‹çš„ç±»å‹ => { render: () => void }\n```\n\n```jsx\nfunction MyFactoryFunction() {\n  return {\n    render: () => {}\n  };\n}\n// ä½¿ç”¨è°ƒç”¨ç­¾å\nvar myComponent = MyFactoryFunction();\n// å…ƒç´ ç±»çš„ç±»å‹ => FactoryFunction\n// å…ƒç´ å®ä¾‹çš„ç±»å‹ => { render: () => void }\n```\n\n> å…ƒç´ çš„å®ä¾‹ç±»å‹å¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå¿…é¡»èµ‹å€¼ç»™ `JSX.ElementClass` æˆ– `æŠ›å‡ºä¸€ä¸ªé”™è¯¯`ã€‚é»˜è®¤çš„ `JSX.ElementClass` ä¸º `{}`ï¼Œä½†æ˜¯å®ƒå¯ä»¥è¢«æ‰©å±•ç”¨æ¥é™åˆ¶ `JSX` çš„ç±»å‹ä»¥ç¬¦åˆç›¸åº”çš„æ¥å£ã€‚\n\n```jsx\ndeclare namespace JSX {\n    interface ElementClass {\n        render: any\n    }\n}\n\nclass MyComponent {\n    render() {}\n}\nfunction MyFactoryFunction() {\n    return {\n        render: () => {}\n    }\n}\n<MyComponent />; // æ­£ç¡®\n<MyFactoryFunction />; // æ­£ç¡®\n\nclass NotAValidComponent {}\nfunction NotAValidFactoryFunction() {\n    return {}\n}\n<NotAValidComponent />; // é”™è¯¯\n<NotAValidFactoryFunction />; // é”™è¯¯\n```\n\n### 20.5 å±æ€§ç±»å‹æ£€æŸ¥\n\n1. å±æ€§ç±»å‹æ£€æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯ ç¡®å®šå…ƒç´ ç±»å‹ã€‚è¿™åœ¨ `å›ºæœ‰å…ƒç´ ` å’Œ `åŸºäºå€¼çš„å…ƒç´ ` ä¹‹é—´ç¨æœ‰ä¸åŒã€‚\n2. å¯¹äºå›ºæœ‰å…ƒç´ ï¼Œè¿™æ˜¯ `JSX.IntrinsicElements` å±æ€§çš„ç±»å‹ã€‚\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        foo: {\n            bar?: boolean;\n        }\n    }\n}\n// `foo` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `{bar?: boolean}`\n<foo bar />;\n```\n\n3. å¯¹äºåŸºäºå€¼çš„å…ƒç´ ï¼Œå°±ç¨å¾®å¤æ‚äº›ã€‚å®ƒå–å†³äºå…ˆå‰ç¡®å®šçš„åœ¨å…ƒç´ å®ä¾‹ç±»å‹ä¸Šçš„æŸä¸ªå±æ€§çš„ç±»å‹ã€‚è‡³äºè¯¥ä½¿ç”¨å“ªä¸ªå±æ€§æ¥ç¡®å®šç±»å‹å–å†³äº `JSX.ElementAttributesProperty`ã€‚å®ƒåº”è¯¥ä½¿ç”¨å•ä¸€çš„å±æ€§æ¥å®šä¹‰ã€‚è¿™ä¸ªå±æ€§åä¹‹åä¼šè¢«ä½¿ç”¨ã€‚`TypeScript 2.8`ï¼Œå¦‚æœæœªæŒ‡å®š `JSX.ElementAttributesProperty`ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ `ç±»å…ƒç´ æ„é€ å‡½æ•°` æˆ– `SFC` è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ã€‚\n\n```jsx\ndeclare namespace JSX {\n  interface ElementAttributesProperty {\n      props; // æŒ‡å®šç”¨æ¥ä½¿ç”¨çš„å±æ€§å\n  }\n}\nclass MyComponent {\n  // åœ¨å…ƒç´ å®ä¾‹ä¸ŠæŒ‡å®šç±»å‹\n  props: {\n      foo?: string;\n  }\n}\n// `MyComponent` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `{foo?: string}`\n<MyComponent foo=\"bar\" />;\n```\n\n4. å…ƒç´ å±æ€§ç±»å‹ç”¨äº `JSX` é‡Œè¿›è¡Œå±æ€§çš„ç±»å‹æ£€æŸ¥ã€‚æ”¯æŒå¯é€‰å±æ€§å’Œå¿…é¡»å±æ€§\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        foo: {\n            requiredProp: string;\n            optionalProp?: number;\n        }\n    }\n}\n<foo requiredProp=\"bar\" />; // æ­£ç¡®\n<foo requiredProp=\"bar\" optionalProp={0} />; // æ­£ç¡®\n<foo />; // é”™è¯¯ï¼Œç¼ºå°‘requiredProp\n<foo requiredProp={0} />; // é”™è¯¯ï¼ŒrequiredProp åº”è¯¥æ˜¯å­—ç¬¦ä¸²\n<foo requiredProp=\"bar\" unknownProp />; // é”™è¯¯ï¼ŒunknownProp å±æ€§ä¸å­˜åœ¨\n<foo requiredProp=\"bar\" some-unknown-prop />; // æ­£ç¡®ï¼Œ`some-unknown-prop` ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦\n```\n\n> æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªå±æ€§åä¸æ˜¯ä¸ªåˆæ³•çš„ `JS` æ ‡è¯†ç¬¦(åƒ `data-\\*` å±æ€§)ï¼Œå¹¶ä¸”å®ƒæ²¡å‡ºç°åœ¨å…ƒç´ å±æ€§ç±»å‹é‡Œæ—¶ä¸ä¼šå½“ä½œä¸€ä¸ªé”™è¯¯ã€‚\n\n> å¦å¤–ï¼Œ`JSX` è¿˜ä¼šä½¿ç”¨ `JSX.IntrinsicAttributes` æ¥å£æ¥æŒ‡å®šé¢å¤–çš„å±æ€§ï¼Œè¿™äº›é¢å¤–çš„å±æ€§é€šå¸¸ä¸ä¼šè¢«ç»„ä»¶çš„ `props` æˆ– `arguments` ä½¿ç”¨ - æ¯”å¦‚ `React` é‡Œçš„ `key`ã€‚è¿˜æœ‰ï¼Œ`JSX.IntrinsicClassAttributes<T>` æ³›å‹ç±»å‹ä¹Ÿå¯ä»¥ç”¨æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™é‡Œçš„æ³›å‹å‚æ•°è¡¨ç¤ºç±»å®ä¾‹ç±»å‹ã€‚åœ¨ `React` é‡Œï¼Œå®ƒç”¨æ¥å…è®¸ `Ref<T>` ç±»å‹ä¸Šçš„ `ref` å±æ€§ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™äº›æ¥å£ä¸Šçš„æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯é€‰çš„ï¼Œé™¤éä½ æƒ³è¦ç”¨æˆ·åœ¨æ¯ä¸ª `JSX` æ ‡ç­¾ä¸Šéƒ½æä¾›ä¸€äº›å±æ€§ã€‚\n\n> å»¶å±•æ“ä½œç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨\n\n```jsx\nvar props = { requiredProp: \"bar\" }; // æ­£ç¡®\nvar badProps = {};\n<foo {...badProps} />; // é”™è¯¯\n```\n\n### 20.6 å­å­™ç±»å‹æ£€æŸ¥\n\n> ä» `TypeScript 2.3` å¼€å§‹ï¼Œæˆ‘ä»¬å¼•å…¥äº† `children` ç±»å‹æ£€æŸ¥ã€‚`children` æ˜¯å…ƒç´ å±æ€§(`attribute`)ç±»å‹çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§(`property`)ï¼Œå­ `JSXExpression` å°†ä¼šè¢«æ’å…¥åˆ°å±æ€§é‡Œã€‚ä¸ä½¿ç”¨ `JSX.ElementAttributesProperty` æ¥å†³å®š `props` åç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `JSX.ElementChildrenAttribute` æ¥å†³å®š `children` åã€‚`JSX.ElementChildrenAttribute` åº”è¯¥è¢«å£°æ˜åœ¨å•ä¸€çš„å±æ€§(`property`)é‡Œã€‚\n\n```typescript\ndeclare namespace JSX {\n  interface ElementChildrenAttribute {\n    children: {}; // specify children name to use\n  }\n}\n```\n\n> å¦‚ä¸ç‰¹æ®ŠæŒ‡å®šå­å­™çš„ç±»å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ `React typings` é‡Œçš„é»˜è®¤ç±»å‹\n\n```jsx\n<div>\n  <h1>Hello</h1>\n</div>;\n\n<div>\n  <h1>Hello</h1>\n  World\n</div>;\n\nconst CustomComp = (props) => <div>props.children</div>\n<CustomComp>\n  <div>Hello World</div>\n  {\"This is just a JS expression...\" + 1000}\n</CustomComp>\n```\n\n```jsx\ninterface PropsType {\n  children: JSX.Element;\n  name: string;\n}\nclass Component extends React.Component<PropsType, {}> {\n  render() {\n      return (\n          <h2>\n              {this.props.children}\n          </h2>\n      )\n  }\n}\n// Ok\n<Component>\n  <h1>Hello World</h1>\n</Component>\n\n// Error: children is of type JSX.Element not array of JSX.Element\n<Component>\n  <h1>Hello World</h1>\n  <h2>Hello World</h2>\n</Component>\n\n// Error: children is of type JSX.Element not array of JSX.Element or string.\n<Component>\n  <h1>Hello</h1>\n  World\n</Component>\n```\n\n### 20.7 JSX ç»“æœç±»å‹\n\n> é»˜è®¤åœ° `JSX` è¡¨è¾¾å¼ç»“æœçš„ç±»å‹ä¸º `any`ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªç±»å‹ï¼Œé€šè¿‡æŒ‡å®š `JSX.Element` æ¥å£ã€‚ç„¶è€Œï¼Œä¸èƒ½å¤Ÿä»æ¥å£é‡Œæ£€ç´¢å…ƒç´ ï¼Œå±æ€§æˆ– `JSX` çš„å­å…ƒç´ çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒæ˜¯ä¸€ä¸ªé»‘ç›’ã€‚\n\n### 20.8 åµŒå…¥çš„è¡¨è¾¾å¼\n\n> `JSX` å…è®¸ä½ ä½¿ç”¨ `{}` æ ‡ç­¾æ¥å†…åµŒè¡¨è¾¾å¼\n\n```tsx\nvar a = (\n  <div>\n    {[\"foo\", \"bar\"].map(i => (\n      <span>{i / 2}</span>\n    ))}\n  </div>\n);\n// ä¸Šé¢çš„ä»£ç äº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºä½ ä¸èƒ½ç”¨æ•°å­—æ¥é™¤ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¾“å‡ºå¦‚ä¸‹ï¼Œè‹¥ä½ ä½¿ç”¨äº† preserve é€‰é¡¹\nvar a = (\n  <div>\n    {[\"foo\", \"bar\"].map(function (i) {\n      return <span>{i / 2}</span>;\n    })}\n  </div>\n);\n```\n\n### 20.9 react æ•´åˆ\n\n> è¦æƒ³ä¸€èµ·ä½¿ç”¨ `JSX` å’Œ `React`ï¼Œä½ åº”è¯¥ä½¿ç”¨ `React` ç±»å‹å®šä¹‰ã€‚è¿™äº›ç±»å‹å£°æ˜å®šä¹‰äº† `JSX` åˆé€‚å‘½åç©ºé—´æ¥ä½¿ç”¨ `React`ã€‚\n\n```jsx\n/// <reference path=\"react.d.ts\" />\ninterface Props {\n  foo: string;\n}\nclass MyComponent extends React.Component<Props, {}> {\n  render() {\n    return <span>{this.props.foo}</span>;\n  }\n}\n<MyComponent foo=\"bar\" />; // æ­£ç¡®\n<MyComponent foo={0} />; // é”™è¯¯\n```\n\n### 20.10 å·¥å‚å‡½æ•°\n\n> `jsx`ï¼š`react` ç¼–è¯‘é€‰é¡¹ä½¿ç”¨çš„å·¥å‚å‡½æ•°æ˜¯å¯ä»¥é…ç½®çš„ã€‚å¯ä»¥ä½¿ç”¨ `jsxFactory` å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæˆ–å†…è”çš„ `@jsx` æ³¨é‡ŠæŒ‡ä»¤åœ¨æ¯ä¸ªæ–‡ä»¶ä¸Šè®¾ç½®ã€‚æ¯”å¦‚ï¼Œç»™ `createElement` è®¾ç½® `jsxFactory`ï¼Œ`<div />` ä¼šä½¿ç”¨ `createElement(\"div\")` æ¥ç”Ÿæˆï¼Œè€Œä¸æ˜¯ `React.createElement(\"div\")`ã€‚\n\n```jsx\n// æ³¨é‡ŠæŒ‡ä»¤å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼š(åœ¨ TypeScript 2.8 é‡Œ)\nimport preact = require(\"preact\");\n/* @jsx preact.h */\nconst x = <div/>;\n\n// ç”Ÿæˆ\nconst preact = require(\"preact\");\nconst x = preact.h(\"div\", null);\n```\n\n> å·¥å‚å‡½æ•°çš„é€‰æ‹©åŒæ ·ä¼šå½±å“ `JSX` å‘½åç©ºé—´çš„æŸ¥æ‰¾(ç±»å‹æ£€æŸ¥)ã€‚å¦‚æœå·¥å‚å‡½æ•°ä½¿ç”¨ `React.createElement` å®šä¹‰(é»˜è®¤)ï¼Œç¼–è¯‘å™¨ä¼šå…ˆæ£€æŸ¥ `React.JSX`ï¼Œä¹‹åæ‰æ£€æŸ¥å…¨å±€çš„ `JSX`ã€‚å¦‚æœå·¥å‚å‡½æ•°å®šä¹‰ä¸º `h`ï¼Œé‚£ä¹ˆåœ¨æ£€æŸ¥å…¨å±€çš„ `JSX` ä¹‹å‰å…ˆæ£€æŸ¥ `h.JSX`ã€‚\n\n## äºŒåä¸€ã€è£…é¥°å™¨\n\n### 21.1 ä»‹ç»\n\n> éšç€ `TypeScript` å’Œ `ES6` é‡Œå¼•å…¥äº†ç±»ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦é¢å¤–çš„ç‰¹å®šæ¥æ”¯æŒæ ‡æ³¨æˆ–ä¿®æ”¹ç±»åŠå…¶æˆå‘˜ã€‚è£…é¥°å™¨(`Decorators`)ä¸ºæˆ‘ä»¬åœ¨ç±»çš„å£°æ˜åŠæˆå‘˜ä¸Šé€šè¿‡å…ƒç¼–ç¨‹è¯­æ³•æ·»åŠ æ ‡æ³¨æä¾›äº†ä¸€ç§æ–¹å¼ã€‚`JavaScript` é‡Œçš„è£…é¥°å™¨ç›®å‰å¤„åœ¨ å»ºè®®å¾é›†çš„ç¬¬äºŒé˜¶æ®µï¼Œä½†åœ¨ `TypeScript` é‡Œå·²ä½œä¸ºä¸€é¡¹å®éªŒæ€§ç‰¹æ€§äºˆä»¥æ”¯æŒã€‚\n> æ³¨æ„ï¼šè£…é¥°å™¨æ˜¯ä¸€é¡¹å®éªŒæ€§ç‰¹æ€§ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜\n> è‹¥è¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ï¼Œä½ å¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ– `tsconfig.json` é‡Œå¯ç”¨ `experimentalDecorators` ç¼–è¯‘å™¨é€‰é¡¹ã€‚\n> å‘½ä»¤è¡Œï¼š `tsc --target ES5 --experimentalDecorators`\n\n- tsconfig.json\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES5\",\n    \"experimentalDecorators\": true\n  }\n}\n```\n\n### 21.2 è£…é¥°å™¨\n\n> è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ° `ç±»å£°æ˜`ã€`æ–¹æ³•`ã€`è®¿é—®ç¬¦`ã€`å±æ€§æˆ–å‚æ•°ä¸Š`ã€‚è£…é¥°å™¨ä½¿ç”¨ `@expression` è¿™ç§å½¢å¼ï¼Œ`expression` æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°å™¨çš„å£°æ˜ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚\n> ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ª `@sealed` è£…é¥°å™¨ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å®šä¹‰ `sealed` å‡½æ•°\n\n```typescript\nfunction sealed(target) {\n  // do something with target\n}\n```\n\n> æ³¨æ„ï¼šåé¢ç±»è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚\n\n### 21.3 è£…é¥°å™¨å·¥å‚\n\n> å¦‚æœæˆ‘ä»¬è¦å®šåˆ¶ä¸€ä¸ªä¿®é¥°å™¨å¦‚ä½•åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œæˆ‘ä»¬å¾—å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ã€‚è£…é¥°å™¨å·¥å‚å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¾›è£…é¥°å™¨åœ¨è¿è¡Œæ—¶è°ƒç”¨ã€‚\n\n- æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ï¼š\n\n```typescript\nfunction color(value: string) {\n  // è¿™æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚\n  return function (target) {\n    // è¿™æ˜¯è£…é¥°å™¨\n    // do something with \"target\" and \"value\" ...\n  };\n}\n```\n\n> æ³¨æ„ï¼šä¸‹é¢æ–¹æ³•è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚\n\n### 21.4 è£…é¥°å™¨ç»„åˆ\n\n> å¤šä¸ªè£…é¥°å™¨å¯ä»¥åŒæ—¶åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œå°±åƒä¸‹é¢çš„å®ä¾‹ï¼š\n\n1. ä¹¦å†™åœ¨åŒä¸€è¡Œï¼š\n\n```typescript\n@f @g x\n```\n\n2. ä¹¦å†™åœ¨å¤šè¡Œä¸Šï¼š\n\n```typescript\n@f\n@g\nx\n```\n\n> å½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå£°æ˜ä¸Šï¼Œå®ƒä»¬æ±‚å€¼æ–¹å¼ä¸ å¤åˆå‡½æ•° ç›¸ä¼¼ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œå½“å¤åˆ f å’Œ g æ—¶ï¼Œå¤åˆçš„ç»“æœ `\\(fâˆ˜g\\)\\(x\\)` ç­‰åŒäº `f\\(g\\(x\\)\\)`ã€‚\n\n> åŒæ ·çš„ï¼Œåœ¨ `TypeScript` é‡Œï¼Œå½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨åœ¨ä¸€ä¸ªå£°æ˜ä¸Šæ—¶ä¼šè¿›è¡Œå¦‚ä¸‹æ­¥éª¤çš„æ“ä½œï¼š `1`. ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ `2`. æ±‚å€¼çš„ç»“æœä¼šè¢«å½“ä½œå‡½æ•°ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡è¢«è°ƒç”¨ã€‚\n\n```typescript\n// å¦‚æœæˆ‘ä»¬ä½¿ç”¨ è£…é¥°å™¨å·¥å‚ çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥è§‚å¯Ÿå®ƒä»¬æ±‚å€¼çš„é¡ºåºï¼š\nfunction f() {\n  console.log(\"f(): evaluated\");\n  return function (target, prototypeKey: string, descriptor: PropertyDescriptor) {\n    console.log(\"f(): called\");\n  };\n}\nfunction g() {\n  console.log(\"g(): evaluated\");\n  return function (target, prototypeKey: string, descriptor: PropertyDescriptor) {\n    console.log(\"g(): called\");\n  };\n}\nclass C {\n  @f()\n  @g()\n  method() {}\n}\n```\n\n```typescript\n// åœ¨æ§åˆ¶å°é‡Œä¼šæ‰“å°å‡ºå¦‚ä¸‹ç»“æœï¼š\nf(): evaluated\ng(): evaluated\ng(): called\nf(): called\n```\n\n### 21.5 è£…é¥°å™¨æ±‚å€¼\n\n> ç±»ä¸­ä¸åŒå£°æ˜ä¸Šçš„è£…é¥°å™¨å°†æŒ‰ä»¥ä¸‹è§„å®šçš„é¡ºåºåº”ç”¨ï¼š\n\n- å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªå®ä¾‹æˆå‘˜ã€‚\n- å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªé™æ€æˆå‘˜ã€‚\n- å‚æ•°è£…é¥°å™¨åº”ç”¨åˆ°æ„é€ å‡½æ•°ã€‚\n- ç±»è£…é¥°å™¨åº”ç”¨åˆ°ç±»ã€‚\n\n### 21.6 ç±»è£…é¥°å™¨\n\n1.ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰è¢«å£°æ˜(ç´§é ç€ç±»å£°æ˜)ã€‚ç±»è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰ã€‚ç±»è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( `.d.ts` )ï¼Œä¹Ÿä¸èƒ½ç”¨åœ¨ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ä¸­(æ¯”å¦‚ `declare` çš„ç±»)ã€‚\n\n2. ç±»è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œç±»çš„æ„é€ å‡½æ•°ä½œä¸ºå…¶å”¯ä¸€çš„å‚æ•°ã€‚\n3. å¦‚æœç±»è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šä½¿ç”¨æä¾›çš„æ„é€ å‡½æ•°æ¥æ›¿æ¢ç±»çš„å£°æ˜ã€‚\n\n> æ³¨æ„ï¼šå¦‚æœä½ è¦è¿”å›ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°ï¼Œä½ å¿…é¡»æ³¨æ„å¤„ç†å¥½åŸæ¥çš„åŸå‹é“¾ã€‚åœ¨è¿è¡Œæ—¶çš„è£…é¥°å™¨è°ƒç”¨é€»è¾‘ä¸­ ä¸ä¼šä¸ºä½ åšè¿™äº›ã€‚\n> ä¸‹é¢æ˜¯ä½¿ç”¨ç±»è£…é¥°å™¨( `@sealed` )çš„ä¾‹å­ï¼Œåº”ç”¨åœ¨ `Greeter` ç±»ï¼š\n\n```typescript\n@sealed\nclass Greeter1 {\n  greeting: string;\n\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  greet() {\n    return \"Hello, \" + this.greeting;\n  }\n}\n\n// æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ @sealed è£…é¥°å™¨\nfunction sealed(constructor: Function) {\n  Object.seal(constructor);\n  Object.seal(constructor.prototype);\n}\n```\n\n> å½“ `@sealed` è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒå°†å¯†é—­æ­¤ç±»çš„æ„é€ å‡½æ•°å’ŒåŸå‹ã€‚(æ³¨ï¼šå‚è§ `Object.seal` )\n\n- ä¸‹é¢æ˜¯ä¸€ä¸ªé‡è½½æ„é€ å‡½æ•°çš„ä¾‹å­ï¼š\n\n```typescript\nfunction classDecorator<T extends { new (...args: any[]): {} }>(constructor: T) {\n  return class extends constructor {\n    newProperty = \"new property\";\n    hello = \"override\";\n  };\n}\n\n@classDecorator\nclass Greeter2 {\n  property = \"property\";\n  hello: string;\n\n  constructor(m: string) {\n    this.hello = m;\n  }\n}\n\nconsole.log(new Greeter2(\"world\"));\n```\n\n### 21.7 æ–¹æ³•è£…é¥°å™¨\n\n> æ–¹æ³•è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜ä¹‹å‰(ç´§é ç€æ–¹æ³•å£°æ˜)ã€‚å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ `å±æ€§æè¿°ç¬¦` ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚æ–¹æ³•è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ `.d.ts` ä¸Šï¼Œé‡è½½æˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ `declare` çš„ç±»)ä¸­ã€‚\n\n> æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `3` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—\n> 3. æˆå‘˜çš„å±æ€§ä¿®é¥°ç¬¦\n\n> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ä»£ç å°äº `ES5`ï¼Œå±æ€§æè¿°ç¬¦ å°†ä¼šæ˜¯ `undefined`ã€‚\n\n> å¦‚æœæ–¹æ³•è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ã€‚\n\n> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº `ES5`ï¼Œè¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚\n\n- ä¸‹é¢æ˜¯ä¸€ä¸ªæ–¹æ³•è£…é¥°å™¨ (`@enumerable`) çš„ä¾‹å­ï¼Œåº”ç”¨äº `Greeter` ç±»çš„æ–¹æ³•ä¸Šã€‚\n\n```typescript\nclass Greeter {\n  greeting: string;\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  @enumerable(false)\n  greet() {\n    return \"Hello, \" + this.greeting;\n  }\n}\n```\n\n- æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‡½æ•°å£°æ˜æ¥å®šä¹‰ `@enumerable` è£…é¥°å™¨ï¼š\n\n```typescript\nfunction enumerable(value: boolean) {\n  return function (target: any, property: string, descriptor: PropertyDescriptor) {\n    descriptor.enumerable = value;\n  };\n}\n```\n\n> è¿™é‡Œçš„ `@enumerable(false)` æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚ï¼Œå½“è£…é¥°å™¨ `@enumerable(false)` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šä¿®æ”¹å±æ€§æè¿°ç¬¦çš„ `enumerable` å±æ€§ã€‚\n\n### 21.8 è®¿é—®å™¨è£…é¥°å™¨\n\n> è®¿é—®å™¨è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªè®¿é—®å™¨çš„å£°æ˜ä¹‹å‰(ç´§é ç€è®¿é—®å™¨å£°æ˜)ã€‚è®¿é—®å™¨è£…é¥°å™¨ åº”ç”¨äºè®¿é—®å™¨çš„ `å±æ€§æè¿°ç¬¦` å¹¶ä¸”å¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ä¸€ä¸ªè®¿é—®å™¨çš„å®šä¹‰ã€‚è®¿é—®å™¨è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( `.d.ts` )ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ `declare` çš„ç±»)é‡Œã€‚\n\n> æ³¨æ„ï¼š`TypeScript` ä¸å…è®¸åŒæ—¶è£…é¥°ä¸€ä¸ªæˆå‘˜çš„ `get` å’Œ `set` è®¿é—®å™¨ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä¸€ä¸ªæˆå‘˜çš„æ‰€æœ‰è£…é¥°çš„å¿…é¡»åº”ç”¨åœ¨æ–‡æ¡£é¡ºåºçš„ç¬¬ä¸€ä¸ªè®¿é—®å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨è£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå±æ€§æè¿°ç¬¦æ—¶ï¼Œå®ƒè”åˆäº† `get` å’Œ `set` è®¿é—®å™¨ï¼Œè€Œä¸æ˜¯åˆ†å¼€å£°æ˜çš„ã€‚\n\n> è®¿é—®å™¨è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `3` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—\n> 3. æˆå‘˜çš„å±æ€§æè¿°ç¬¦\n\n> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº `ES5`ï¼Œ`Property Descriptor` å°†ä¼šæ˜¯ `undefined`ã€‚\n\n> å¦‚æœè®¿é—®å™¨è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ `å±æ€§æè¿°ç¬¦` æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº `ES5` è¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚\n\n- ä¸‹é¢æ˜¯ä½¿ç”¨äº†è®¿é—®å™¨è£…é¥°å™¨ (`@configurable`) çš„ä¾‹å­ï¼Œåº”ç”¨äº `Point` ç±»çš„æˆå‘˜ä¸Šã€‚\n\n```typescript\nclass Point {\n  private _x: number;\n  private _y: number;\n  constructor(x: number, y: number) {\n    this._x = x;\n    this._y = y;\n  }\n\n  @configurable(false)\n  get x() {\n    return this._x;\n  }\n\n  @configurable(false)\n  get y() {\n    return this._y;\n  }\n}\nlet p: Point = new Point(1, 2);\nconsole.log(p);\n```\n\n- æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‡½æ•°å£°æ˜æ¥å®šä¹‰ `@configurable` è£…é¥°å™¨ï¼š\n\n```typescript\nfunction configurable(value: boolean) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    descriptor.configurable = value;\n  };\n}\n```\n\n### 21.9 å±æ€§è£…é¥°å™¨\n\n> å±æ€§è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå±æ€§å£°æ˜ä¹‹å‰(ç´§é ç€å±æ€§å£°æ˜)ã€‚å±æ€§è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ`.d.ts`ï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ `declare` çš„ç±»ï¼‰é‡Œã€‚\n\n> å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `2` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—ã€‚\n\n> æ³¨æ„ï¼š`å±æ€§æè¿°ç¬¦` ä¸ä¼šä½œä¸ºå‚æ•°ä¼ å…¥å±æ€§è£…é¥°å™¨ï¼Œè¿™ä¸ `TypeScript` æ˜¯å¦‚ä½•åˆå§‹åŒ–å±æ€§è£…é¥°å™¨æœ‰å…³ã€‚å› ä¸ºç›®å‰æ²¡æœ‰åŠæ³•åœ¨å®šä¹‰ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æˆå‘˜æ—¶æè¿°ä¸€ä¸ªå®ä¾‹å±æ€§ï¼Œå¹¶ä¸”æ²¡åŠæ³•ç›‘è§†æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•ã€‚è¿”å›å€¼ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚å› æ­¤ï¼Œå±æ€§æè¿°ç¬¦åªèƒ½ç”¨æ¥ç›‘è§†ç±»ä¸­æ˜¯å¦å£°æ˜äº†æŸä¸ªåå­—çš„å±æ€§ã€‚\n\n- æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è®°å½•è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\n\n```typescript\nclass Greeter {\n    @format(\"Hello, %s\")\n    greeting: string;\n>\n    constructor(message: string) {\n        this.greeting = message;\n    }\n>\n    greet() {\n        let formatString = getFormat(this, \"greeting\");\n        return formatString.replace(\"%s\", this.greeting);\n    }\n}\n>\nlet g: Greeter = new Greeter(\"é¼“åŠ±\");\nconsole.log(g);\n>\n// ç„¶åå®šä¹‰ @format è£…é¥°å™¨ å’Œ getFormat å‡½æ•°\nimport \"reflect-metadata\";\n>\nconst formatMetadataKey = Symbol(\"format\");\n>\nfunction format(formatString: string) {\n    return Reflect.metadata(formatMetadataKey, formatString);\n}\n>\nfunction getFormat(target: any, propertyKey: string) {\n    return Reflect.getMetadata(formatMetadataKey, target, propertyKey);\n}\n```\n\n> è¿™ä¸ª `@format(\"Hello, %s\")` è£…é¥°å™¨æ˜¯ä¸ª `è£…é¥°å™¨å·¥å‚`ã€‚å½“ `@format(\"Hello, %s\")` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ·»åŠ ä¸€æ¡è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œé€šè¿‡ `reflect-metadata` åº“é‡Œçš„ `Reflect.metadata` å‡½æ•°ã€‚å½“ `getFormat` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒè¯»å–æ ¼å¼çš„å…ƒæ•°æ®ã€‚\n\n> æ³¨æ„ï¼šè¿™ä¸ªä¾‹å­éœ€è¦ä½¿ç”¨ `reflect-metadata` åº“ã€‚æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ `reflect-metadata` åº“æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚\n\n### 21.10 å‚æ•°è£…é¥°å™¨\n\n> `å‚æ•°è£…é¥°å™¨` å£°æ˜åœ¨ä¸€ä¸ªå‚æ•°å£°æ˜ä¹‹å‰(ç´§é ç€å‚æ•°å£°æ˜)ã€‚å‚æ•°è£…é¥°å™¨åº”ç”¨äº `ç±»æ„é€ å‡½æ•°` æˆ– `æ–¹æ³•å£°æ˜`ã€‚å‚æ•°è£…é¥°å™¨ ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ï¼ˆ`.d.ts`ï¼‰ï¼Œé‡è½½æˆ–å…¶å®ƒå¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ `declare` çš„ç±»ï¼‰é‡Œã€‚\n> `å‚æ•°è£…é¥°å™¨` è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `3` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—\n> 3. å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„ç´¢å¼•\n\n> æ³¨æ„ï¼šå‚æ•°è£…é¥°å™¨åªèƒ½ç”¨æ¥ç›‘è§†ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯å¦è¢«ä¼ å…¥ã€‚\n\n> å‚æ•°è£…é¥°å™¨çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥\n\n- ä¸‹é¢å®šä¹‰äº†å‚æ•°è£…é¥°å™¨( `@required` )å¹¶åº”ç”¨äº `Greeter` ç±»æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ï¼š\n\n```typescript\nclass Greeter {\n  greeting: string;\n\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  @validate\n  greet(@required name: string) {\n    return \"Hello \" + name + \", \" + this.greeting;\n  }\n}\n```\n\n- ç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å®šä¹‰ `@required` å’Œ `@validate` è£…é¥°å™¨\n\n```typescript\nimport \"reflect-metadata\";\n\nconst requiredMetadataKey = Symbol(\"required\");\n\nfunction required(target: Object, propertyKey: string | symbol, parameterIndex: number) {\n  let existingRequiredParameters: number[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyKey) || [];\n  existingRequiredParameters.push(parameterIndex);\n  Reflect.defineMetadata(requiredMetadataKey, existingRequiredParameters, target, propertyKey);\n}\n\nfunction validate(target: any, propertyName: string, descriptor: TypedPropertyDescriptor<Function>) {\n  let method = descriptor.value;\n  descriptor.value = function () {\n    let requiredParameters: number[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyName);\n    if (requiredParameters) {\n      for (let parameterIndex of requiredParameters) {\n        if (parameterIndex >= arguments.length || arguments[parameterIndex] === undefined) {\n          throw new Error(\"Missing required argument.\");\n        }\n      }\n    }\n    return method.apply(this, arguments);\n  };\n}\n```\n\n> `@required` è£…é¥°å™¨æ·»åŠ äº†å…ƒæ•°æ®å®ä½“æŠŠå‚æ•°æ ‡è®°ä¸ºå¿…é¡»çš„ã€‚\n> `@validate` è£…é¥°å™¨æŠŠ `greet` æ–¹æ³•åŒ…è£¹åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œåœ¨è°ƒç”¨åŸå…ˆçš„å‡½æ•°å‰éªŒè¯å‡½æ•°å‚æ•°ã€‚\n> `æ³¨æ„ï¼š`è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† `reflect-metadata` åº“ã€‚ æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ `reflect-metadata` åº“çš„æ›´å¤šä¿¡æ¯ã€‚\n\n### 21.11 å…ƒæ•°æ®\n\n> ä¸€éƒ¨åˆ†ä¾‹å­ä½¿ç”¨äº† `reflect-metadata` åº“æ¥æ”¯æŒå®ç°æ€§çš„ `metadata API`ã€‚è¿™ä¸ªåº“è¿˜ä¸æ˜¯ `ECMAScript\\( JavaScript \\)` æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œå½“è£…é¥°å™¨è¢« `ECMAScript` å®˜æ–¹æ ‡å‡†é‡‡çº³åï¼Œè¿™äº›æ‰©å±•ä¹Ÿå°†è¢«æ¨èç»™ `ECMAScript` ä»¥é‡‡çº³ã€‚\n\n- ä½ å¯ä»¥é€šè¿‡ `npm` å®‰è£…è¿™ä¸ªåº“\n\n```bash\nnpm i reflect-metadata --save\n```\n\n> `TypeScript` æ”¯æŒä¸ºå¸¦æœ‰è£…é¥°å™¨çš„å£°æ˜ç”Ÿæˆå…ƒæ•°æ®ã€‚ä½ éœ€è¦åœ¨ `å‘½ä»¤è¡Œ` æˆ– `tsconfig.json` é‡Œå¯ç”¨ `emitDecoratorMetadata` ç¼–è¯‘å™¨é€‰é¡¹ã€‚\n\n- å‘½ä»¤è¡Œï¼š\n\n```bash\ntsc --target ES5 --experimentalDecorators --emitDecoratorMetadata\n```\n\n- `tsconfig.json`\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES5\",\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true\n  }\n}\n```\n\n> å½“å¯ç”¨äº†ï¼Œåªè¦ `reflect-metadata` åº“è¢«å¼•å…¥äº†ï¼Œè®¾è®¡é˜¶æ®µæ·»åŠ çš„ç±»å‹ä¿¡æ¯å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨ã€‚\n\n- å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\n\n```typescript\nimport \"reflect-metadata\";\n\nclass Point {\n  x: number;\n  y: number;\n}\n\nclass Line {\n  private _p0: Point;\n  private _p1: Point;\n\n  @validate\n  set p0(value: Point) {\n    this._p0 = value;\n  }\n\n  get p0() {\n    return this._p0;\n  }\n\n  @validate\n  set p1(value: Point) {\n    this._p1 = value;\n  }\n\n  get p1() {\n    return this._p1;\n  }\n}\n\nfunction validate<T>(target: any, propertyKey: string, descriptor: TypedPropertyDescriptor<T>) {\n  let set = descriptor.set;\n  descriptor.set = function (value: T) {\n    let type = Reflect.getMetadata(\"design:type\", target, propertyKey);\n    if (!(value instanceof type)) {\n      throw new TypeError(\"Invalid type.\");\n    }\n    set(value);\n  };\n}\n```\n\n- `TypeScript` ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ `@Reflect.metadata` è£…é¥°å™¨æ³¨å…¥è®¾è®¡é˜¶æ®µçš„ç±»å‹ä¿¡æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒç›¸å½“äºä¸‹é¢çš„ `TypeScriptï¼š`\n\n```typescript\nclass Line1 {\n  private _p0: Point;\n  private _p1: Point;\n\n  @validate\n  @Reflect.metadata(\"design:type\", Point)\n  set p0(value: Point) {\n    this._p0 = value;\n  }\n\n  get p0() {\n    return this._p0;\n  }\n\n  @validate\n  @Reflect.metadata(\"design:type\", Point)\n  set p1(value: Point) {\n    this._p1 = value;\n  }\n\n  get p1() {\n    return this._p1;\n  }\n}\n```\n\n> æ³¨æ„ï¼š è£…é¥°å™¨å…ƒæ•°æ®æ˜¯ä¸ªå®éªŒæ€§çš„ç‰¹æ€§å¹¶ä¸”å¯èƒ½åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å‘å£°ç ´åæ€§çš„æ”¹å˜ã€‚\n\n### 21.12 Reflect-metadata åº“\n\n```typescript\nnamespace Reflect {\n    // ç”¨äºè£…é¥°å™¨\n    metadata(k, v): (target, property?) => void\n    // åœ¨å¯¹è±¡ä¸Šé¢å®šä¹‰å…ƒæ•°æ®\n    defineMetadata(k, v, o, p?): void\n    // æ˜¯å¦å­˜åœ¨å…ƒæ•°æ®\n    hasMetadata(k, o, p?): boolean\n    hasOwnMetadata(k, o, p?): boolean\n    // è·å–å…ƒæ•°æ®\n    getMetadata(k, o, p?): any\n    getOwnMetadata(k, o, p?): any\n    // è·å–æ‰€æœ‰å…ƒæ•°æ®çš„ Key\n    getMetadataKeys(o, p?): any[]\n    getOwnMetadataKeys(o, p?): any[]\n    // åˆ é™¤å…ƒæ•°æ®\n    deleteMetadata(k, o, p?): boolean\n}\n```\n\n#### 21.12.1 å®‰è£…\n\n##### Metadata Reflection API\n\n- [Detailed proposal][metadata-spec]\n\n1. Installation\n\n```bash\nnpm install reflect-metadata\n```\n\n2. Background\n\n- Decorators add the ability to augment a class and its members as the class is defined, through a declarative syntax.\n- Traceur attaches annotations to a static property on the class.\n- Languages like C# (.NET), and Java support attributes or annotations that add metadata to types, along with a reflective API for reading metadata.\n\n3. Goals\n\n- A number of use cases (Composition/Dependency Injection, Runtime Type Assertions, Reflection/Mirroring, Testing) want the ability to add additional metadata to a class in a consistent manner.\n- A consistent approach is needed for various tools and libraries to be able to reason over metadata.\n- Metadata-producing decorators (nee. \"Annotations\") need to be generally composable with mutating decorators.\n- Metadata should be available not only on an object but also through a Proxy, with related traps.\n- Defining new metadata-producing decorators should not be arduous or over-complex for a developer.\n- Metadata should be consistent with other language and runtime features of ECMAScript.\n\n4. Syntax\n\n- Declarative definition of metadata:\n\n```javascript\nclass C {\n  @Reflect.metadata(metadataKey, metadataValue)\n  method() {}\n}\n```\n\n- Imperative definition of metadata:\n\n```javascript\nReflect.defineMetadata(metadataKey, metadataValue, C.prototype, \"method\");\n```\n\n- Imperative introspection of metadata:\n\n```javascript\nlet obj = new C();\nlet metadataValue = Reflect.getMetadata(metadataKey, obj, \"method\");\n```\n\n5. Semantics\n\n- Object has a new [[Metadata]] internal property that will contain a Map whose keys are property keys (or `undefined` ) and whose values are Maps of metadata keys to metadata values.\n- Object will have a number of new internal methods for [[DefineOwnMetadata]], [[GetOwnMetadata]], [[HasOwnMetadata]], etc.\n  - These internal methods can be overridden by a Proxy to support additional traps.\n  - These internal methods will by default call a set of abstract operations to define and read metadata.\n- The Reflect object will expose the MOP operations to allow imperative access to metadata.\n- Metadata defined on class declaration _C_ is stored in _C_.[[Metadata]], with `undefined` as the key.\n- Metadata defined on static members of class declaration _C_ are stored in _C_.[[Metadata]], with the property key as the key.\n- Metadata defined on instance members of class declaration _C_ are stored in _C_.prototype.[[Metadata]], with the property key as the key.\n\n1. API\n\n```javascript\n// define metadata on an object or property\nReflect.defineMetadata(metadataKey, metadataValue, target);\nReflect.defineMetadata(metadataKey, metadataValue, target, propertyKey);\n\n// check for presence of a metadata key on the prototype chain of an object or property\nlet result = Reflect.hasMetadata(metadataKey, target);\nlet result = Reflect.hasMetadata(metadataKey, target, propertyKey);\n\n// check for presence of an own metadata key of an object or property\nlet result = Reflect.hasOwnMetadata(metadataKey, target);\nlet result = Reflect.hasOwnMetadata(metadataKey, target, propertyKey);\n\n// get metadata value of a metadata key on the prototype chain of an object or property\nlet result = Reflect.getMetadata(metadataKey, target);\nlet result = Reflect.getMetadata(metadataKey, target, propertyKey);\n\n// get metadata value of an own metadata key of an object or property\nlet result = Reflect.getOwnMetadata(metadataKey, target);\nlet result = Reflect.getOwnMetadata(metadataKey, target, propertyKey);\n\n// get all metadata keys on the prototype chain of an object or property\nlet result = Reflect.getMetadataKeys(target);\nlet result = Reflect.getMetadataKeys(target, propertyKey);\n\n// get all own metadata keys of an object or property\nlet result = Reflect.getOwnMetadataKeys(target);\nlet result = Reflect.getOwnMetadataKeys(target, propertyKey);\n\n// delete metadata from an object or property\nlet result = Reflect.deleteMetadata(metadataKey, target);\nlet result = Reflect.deleteMetadata(metadataKey, target, propertyKey);\n\n// apply metadata via a decorator to a constructor\n@Reflect.metadata(metadataKey, metadataValue)\nclass C {\n  // apply metadata via a decorator to a method (property)\n  @Reflect.metadata(metadataKey, metadataValue)\n  method() {}\n}\n```\n\n7. Alternatives\n\n- Use properties rather than a separate API.\n  - Obvious downside is that this can be a lot of code:\n\n```javascript\nfunction ParamTypes(...types) {\n  return (target, propertyKey) => {\n    const symParamTypes = Symbol.for(\"design:paramtypes\");\n    if (propertyKey === undefined) {\n      target[symParamTypes] = types;\n    } else {\n      const symProperties = Symbol.for(\"design:properties\");\n      let properties, property;\n      if (Object.prototype.hasOwnProperty.call(target, symProperties)) {\n        properties = target[symProperties];\n      } else {\n        properties = target[symProperties] = {};\n      }\n      if (Object.prototype.hasOwnProperty.call(properties, propertyKey)) {\n        property = properties[propertyKey];\n      } else {\n        property = properties[propertyKey] = {};\n      }\n      property[symParamTypes] = types;\n    }\n  };\n}\n```\n\n8. Notes\n\n- Though it may seem counterintuitive, the methods on Reflect place the parameters for the metadata key and metadata value before the target or property key. This is due to the fact that the property key is the only optional parameter in the argument list. This also makes the methods easier to curry with Function#bind. This also helps reduce the overall footprint and complexity of a metadata-producing decorator that could target both a class or a property:\n\n```javascript\nfunction ParamTypes(...types) {\n  // as propertyKey is effectively optional, its easier to use here\n  return (target, propertyKey) => {\n    Reflect.defineMetadata(\"design:paramtypes\", types, target, propertyKey);\n  };\n\n  // vs. having multiple overloads with the target and key in the front:\n  //\n  // return (target, propertyKey) => {\n  //    if (propertyKey === undefined) {\n  //      Reflect.defineMetadata(target, \"design:paramtypes\", types);\n  //    }\n  //    else {\n  //      Reflect.defineMetadata(target, propertyKey, \"design:paramtypes\", types);\n  //    }\n  // }\n  //\n  // vs. having a different methods for the class or a property:\n  //\n  // return (target, propertyKey) => {\n  //    if (propertyKey === undefined) {\n  //      Reflect.defineMetadata(target, \"design:paramtypes\", types);\n  //    }\n  //    else {\n  //      Reflect.definePropertyMetadata(target, propertyKey, \"design:paramtypes\", types);\n  //    }\n  // }\n}\n```\n\n- To enable experimental support for metadata decorators in your TypeScript project, you must add `\"experimentalDecorators\": true` to your tsconfig.json file.\n- To enable experimental support for auto-generated type metadata in your TypeScript project, you must add `\"emitDecoratorMetadata\": true` to your tsconfig.json file.\n  - Please note that auto-generated type metadata may have issues with circular or forward references for types.\n\n9. Issues\n\n- A poorly written mutating decorator for a class constructor could cause metadata to become lost if the prototype chain is not maintained. Though, not maintaining the prototype chain in a mutating decorator for a class constructor would have other negative side effects as well. [@rbuckton ](/rbuckton)\n  - This is mitigated if the mutating decorator returns a class expression that extends from the target, or returns a proxy for the decorator. [@rbuckton ](/rbuckton)\n- Metadata for a method is attached to the class (or prototype) via the property key. It would not then be available if trying to read metadata on the function of the method (e.g. \"tearing-off\" the method from the class). [@rbuckton ](/rbuckton)\n\n[Metadata-Spec]: [https://rbuckton.github.io/reflect-metadata](https://rbuckton.github.io/reflect-metadata)\n\n## äºŒåäºŒã€Mixins æ··å…¥\n\n### 22.1 ä»‹ç»\n\n> é™¤äº†ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç»§æ‰¿æ–¹å¼ï¼Œè¿˜æµè¡Œä¸€ç§é€šç”¨å¯é‡ç”¨ç»„ä»¶åˆ›å»ºç±»çš„æ–¹å¼ï¼Œå°±æ˜¯è”åˆå¦ä¸€ä¸ªç®€å•ç±»çš„ä»£ç ã€‚\n> ä½ å¯èƒ½åœ¨ `Scala` ç­‰è¯­è¨€é‡Œå¯¹ `mixins` åŠå…¶ç‰¹æ€§å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å®ƒåœ¨ `JavaScript` ä¸­ä¹Ÿæ˜¯å¾ˆæµè¡Œçš„ã€‚\n\n### 22.2 æ··å…¥ç¤ºä¾‹\n\n> ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åœ¨ `TypeScript` é‡Œä½¿ç”¨æ··å…¥ã€‚åé¢æˆ‘ä»¬è¿˜ä¼šè§£é‡Šè¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n\n```typescript\n// Disposable Mixin\nclass Disposable {\n  isDisposed: boolean;\n  dispose() {\n    this.isDisposed = true;\n  }\n}\n\n// Activatable Mixin\nclass Activatable {\n  isActive: boolean;\n  activate() {\n    this.isActive = true;\n  }\n  deactivate() {\n    this.isActive = false;\n  }\n}\n\nclass SmartObject implements Disposable, Activatable {\n  constructor() {\n    setInterval(() => console.log(this.isActive + \":\" + this.isDisposed), 500);\n  }\n\n  interact() {\n    this.activate();\n  }\n\n  // Disposable\n  isDisposed: boolean = false;\n  dispose: () => void;\n  // Activatable\n  isActive: boolean = false;\n  activate: () => void;\n  deactivate: () => void;\n}\n\napplyMixins(SmartObject, [Disposable, Activatable]);\nlet smartObj = new SmartObject();\nsetTimeout(() => smartObj.interact(), 1000);\n\n////////////////////////////////////////\n// In your runtime library somewhere\n////////////////////////////////////////\n\nfunction applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      derivedCtor.prototype[name] = baseCtor.prototype[name];\n    });\n  });\n}\n```\n\n### 22.3 ç†è§£è¿™ä¸ªä¾‹å­\n\n1. ä»£ç é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œå®ƒä»¬å°†åšä¸º `mixins`ã€‚å¯ä»¥çœ‹åˆ°æ¯ä¸ªç±»éƒ½åªå®šä¹‰äº†ä¸€ä¸ªç‰¹å®šçš„è¡Œä¸ºæˆ–åŠŸèƒ½ã€‚ç¨åæˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ŒåŒæ—¶å…·æœ‰è¿™ä¸¤ç§åŠŸèƒ½ã€‚\n\n```typescript\n// Disposable Mixin\nclass Disponsable {\n  isDisponsed: boolean;\n  dispose() {\n    this.isDisponsed = true;\n  }\n}\n\n// Activatable Mixin\nclass Activatable {\n  isActive: boolean;\n  activate() {\n    this.isActive = true;\n  }\n  deactivate() {\n    this.isActive = false;\n  }\n}\n```\n\n2. ä¸‹é¢åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»“åˆäº†è¿™ä¸¤ä¸ª `mixins`ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸‹å…·ä½“æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼š\n\n```typescript\nclass SmartObject implements Disposable, Activatable {}\n```\n\n3. é¦–å…ˆåº”è¯¥æ³¨æ„åˆ°çš„æ˜¯ï¼Œæ²¡ä½¿ç”¨ `extends` è€Œæ˜¯ä½¿ç”¨ `implements`ã€‚ æŠŠç±»å½“æˆäº†æ¥å£ï¼Œä»…ä½¿ç”¨ `Disposable` å’Œ `Activatable` çš„ç±»å‹è€Œéå…¶å®ç°ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨ç±»é‡Œé¢å®ç°æ¥å£ã€‚ä½†æ˜¯è¿™æ˜¯æˆ‘ä»¬åœ¨ç”¨ `mixin` æ—¶æƒ³é¿å…çš„ã€‚\n4. æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšæ¥è¾¾åˆ°ç›®çš„ï¼Œä¸ºå°†è¦ `mixin` è¿›æ¥çš„å±æ€§æ–¹æ³•åˆ›å»ºå‡ºå ä½å±æ€§ã€‚è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›æˆå‘˜åœ¨è¿è¡Œæ—¶æ˜¯å¯ç”¨çš„ã€‚ è¿™æ ·å°±èƒ½ä½¿ç”¨ `mixin` å¸¦æ¥çš„ä¾¿åˆ©ï¼Œè™½è¯´éœ€è¦æå‰å®šä¹‰ä¸€äº›å ä½å±æ€§ã€‚\n\n```typescript\n// Disposable\n  isDisposed: boolean = false;\n  dispose: () => void;\n// Activatable\n  isActive: boolean = false;\n  activate: () => void;\n  deactivate: () => void;\n```\n\n5. æœ€åï¼ŒæŠŠ `mixins` æ··å…¥å®šä¹‰çš„ç±»ï¼Œå®Œæˆå…¨éƒ¨å®ç°éƒ¨åˆ†ã€‚\n\n```typescript\napplyMixins(SmartObject, [Disposable, Activatable]);\n```\n\n6. æœ€åï¼Œåˆ›å»ºè¿™ä¸ªå¸®åŠ©å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åšæ··å…¥æ“ä½œã€‚ å®ƒä¼šéå† `mixins` ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå¹¶å¤åˆ¶åˆ°ç›®æ ‡ä¸Šå»ï¼ŒæŠŠä¹‹å‰çš„å ä½å±æ€§æ›¿æ¢æˆçœŸæ­£çš„å®ç°ä»£ç ã€‚\n\n```typescript\nfunction applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      derivedCtor.prototype[name] = baseCtor.prototype[name];\n    });\n  });\n}\n```\n\n## äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\n\n- ä¸‰æ–œçº¿æŒ‡ä»¤æ˜¯åŒ…å«å•ä¸ª `XML` æ ‡ç­¾çš„å•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šå†…å®¹ä¼šåšä¸ºç¼–è¯‘å™¨æŒ‡ä»¤ä½¿ç”¨ã€‚\n- ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶æœ€é¡¶ç«¯ã€‚ä¸€ä¸ªä¸‰æ–œçº¿æŒ‡ä»¤çš„å‰é¢åªèƒ½å‡ºç°å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šï¼Œè¿™åŒ…æ‹¬å…¶å®ƒçš„ä¸‰æ–œçº¿æŒ‡ä»¤ã€‚å¦‚æœå®ƒä»¬å‡ºç°åœ¨ä¸€ä¸ªè¯­å¥æˆ–å£°æ˜ä¹‹åï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«å½“ä½œæ™®é€šçš„å•è¡Œæ³¨é‡Šï¼Œå¹¶ä¸”ä¸å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚\n\n```typescript\n/// <reference path=\"...\" />\n/// <reference path=\"...\" /> æŒ‡ä»¤æ˜¯ä¸‰æ–œçº¿æŒ‡ä»¤ä¸­æœ€å¸¸è§çš„ä¸€ç§ã€‚ å®ƒç”¨äºå£°æ˜æ–‡ä»¶é—´çš„ ä¾èµ–ã€‚\n```\n\n- ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–æ–‡ä»¶ã€‚\n- å½“ä½¿ç”¨ `--out` æˆ– `--outFile` æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥åšä¸ºè°ƒæ•´è¾“å‡ºå†…å®¹é¡ºåºçš„ä¸€ç§æ–¹æ³•ã€‚æ–‡ä»¶åœ¨è¾“å‡ºæ–‡ä»¶å†…å®¹ä¸­çš„ä½ç½®ä¸ç»è¿‡é¢„å¤„ç†åçš„è¾“å…¥é¡ºåºä¸€è‡´ã€‚\n\n### 23.1 é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\n\n> ç¼–è¯‘å™¨ä¼šå¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†æ¥è§£ææ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨æŒ‡ä»¤ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé¢å¤–çš„æ–‡ä»¶ä¼šåŠ åˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚\n> è¿™ä¸ªè¿‡ç¨‹ä¼šä»¥ä¸€äº›æ ¹æ–‡ä»¶å¼€å§‹ï¼›å®ƒä»¬æ˜¯åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–æ˜¯åœ¨ `tsconfig.json` ä¸­çš„ `\"files\"` åˆ—è¡¨é‡Œçš„æ–‡ä»¶ã€‚è¿™äº›æ ¹æ–‡ä»¶æŒ‰æŒ‡å®šçš„é¡ºåºè¿›è¡Œé¢„å¤„ç†ã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶è¢«åŠ å…¥åˆ—è¡¨å‰ï¼Œå®ƒåŒ…å«çš„æ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨éƒ½è¦è¢«å¤„ç†ï¼Œè¿˜æœ‰å®ƒä»¬åŒ…å«çš„ç›®æ ‡ã€‚ä¸‰æ–œçº¿å¼•ç”¨ä»¥å®ƒä»¬åœ¨æ–‡ä»¶é‡Œå‡ºç°çš„é¡ºåºï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆçš„æ–¹å¼è§£æã€‚\n> Â  ä¸€ä¸ªä¸‰æ–œçº¿å¼•ç”¨è·¯å¾„æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æ–‡ä»¶çš„ï¼Œå¦‚æœä¸æ˜¯æ ¹æ–‡ä»¶ã€‚\n\n### 23.2 é”™è¯¯\n\n> å¼•ç”¨ä¸å­˜åœ¨çš„æ–‡ä»¶ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªæ–‡ä»¶ç”¨ä¸‰æ–œçº¿æŒ‡ä»¤å¼•ç”¨è‡ªå·±ä¼šæŠ¥é”™ã€‚\n\n### 23.3 ä½¿ç”¨ `--noResolve`\n\n> å¦‚æœæŒ‡å®šäº† `--noResolve` ç¼–è¯‘é€‰é¡¹ï¼Œä¸‰æ–œçº¿æŒ‡ä»¤ä¼šè¢«å¿½ç•¥ï¼›å®ƒä»¬ä¸ä¼šå¢åŠ æ–°æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç»™å®šæ–‡ä»¶çš„é¡ºåºã€‚\n\n```typescript\n/// <reference types=\"...\" />\n```\n\n- ä¸ `/// <reference path=\"...\" />` æŒ‡ä»¤ç›¸ä¼¼ï¼Œè¿™ä¸ªæŒ‡ä»¤æ˜¯ç”¨æ¥å£°æ˜ä¾èµ–çš„ï¼›ä¸€ä¸ª `/// <reference types=\"...\" />` æŒ‡ä»¤åˆ™å£°æ˜äº†å¯¹æŸä¸ªåŒ…çš„ä¾èµ–ã€‚\n- å¯¹è¿™äº›åŒ…çš„åå­—çš„è§£æä¸åœ¨ `import` è¯­å¥é‡Œå¯¹æ¨¡å—åçš„è§£æç±»ä¼¼ã€‚å¯ä»¥ç®€å•åœ°æŠŠä¸‰æ–œçº¿ç±»å‹å¼•ç”¨æŒ‡ä»¤å½“åš `import` å£°æ˜çš„åŒ…ã€‚\n- ä¾‹å¦‚ï¼ŒæŠŠ `/// <reference types=\"node\" />`å¼•å…¥åˆ°å£°æ˜æ–‡ä»¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨äº†`@types/node/index.d.ts` é‡Œé¢å£°æ˜çš„åå­—ï¼›å¹¶ä¸”ï¼Œè¿™ä¸ªåŒ…éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä¸å£°æ˜æ–‡ä»¶ä¸€èµ·è¢«åŒ…å«è¿›æ¥ã€‚\n- ä»…å½“åœ¨ä½ éœ€è¦å†™ä¸€ä¸ª `.d.ts` æ–‡ä»¶æ—¶æ‰ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ã€‚\n- å¯¹äºé‚£äº›åœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°æ·»åŠ  `/// <reference types=\"...\" />`ï¼›å½“ä¸”ä»…å½“ç»“æœæ–‡ä»¶ä¸­ä½¿ç”¨äº†å¼•ç”¨çš„åŒ…é‡Œçš„å£°æ˜æ—¶æ‰ä¼šåœ¨ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶é‡Œæ·»åŠ  Â `/// <reference types=\"...\" />` è¯­å¥ã€‚\n- è‹¥è¦åœ¨ `.ts` æ–‡ä»¶é‡Œå£°æ˜ä¸€ä¸ªå¯¹ `@types` åŒ…çš„ä¾èµ–ï¼Œä½¿ç”¨ `--types` å‘½ä»¤è¡Œé€‰é¡¹ æˆ–åœ¨ `tsconfig.json` é‡ŒæŒ‡å®šã€‚æŸ¥çœ‹ åœ¨ `tsconfig.json` é‡Œä½¿ç”¨ `@types`ï¼Œ`typeRoots` å’Œ `types` äº†è§£è¯¦æƒ…ã€‚\n- `/// <reference no-default-lib=\"true\"/>` è¿™ä¸ªæŒ‡ä»¤æŠŠä¸€ä¸ªæ–‡ä»¶æ ‡è®°æˆé»˜è®¤åº“ã€‚ä½ ä¼šåœ¨ `lib.d.ts` æ–‡ä»¶å’Œå®ƒä¸åŒçš„å˜ä½“çš„é¡¶ç«¯çœ‹åˆ°è¿™ä¸ªæ³¨é‡Šã€‚è¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸è¦åŒ…å«è¿™ä¸ªé»˜è®¤åº“ï¼ˆæ¯”å¦‚ï¼Œ`lib.d.ts`ï¼‰ã€‚ è¿™ä¸åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ -`-noLib` ç›¸ä¼¼ã€‚\n- è¿˜è¦æ³¨æ„ï¼Œå½“ä¼ é€’äº† `--skipDefaultLibCheck` æ—¶ï¼Œç¼–è¯‘å™¨åªä¼šå¿½ç•¥æ£€æŸ¥å¸¦æœ‰ `/// <reference no-default-lib=\"true\"/>` çš„æ–‡ä»¶ã€‚\n\n### 23.4 `<amd-module />`\n\n> é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆçš„ `AMD` æ¨¡å— éƒ½æ˜¯åŒ¿åçš„ã€‚ä½†æ˜¯ï¼Œå½“ä¸€äº›å·¥å…·éœ€è¦å¤„ç†ç”Ÿæˆçš„æ¨¡å—æ—¶ä¼šäº§ç”Ÿé—®é¢˜ï¼Œæ¯”å¦‚ `r.jsã€‚amd-module` æŒ‡ä»¤å…è®¸ç»™ç¼–è¯‘å™¨ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„æ¨¡å—åï¼š\n\n- `amdModule.ts`\n\n```typescript\n/// <amd-module name=\"NamedModule\" />\nexport class C {}\n```\n\n> è¿™ä¼šå°† `NamedModule` ä¼ å…¥åˆ° `AMD define` å‡½æ•°é‡Œï¼š\n\n- `amdModule.js`\n\n```typescript\ndefine(\"NamedModule\", [\"require\", \"exports\"], function (require, exports) {\n  var C = (function () {\n    function C() {}\n    return C;\n  })();\n  exports.C = C;\n});\n```\n\n### 23.5 `<amd-dependency />`\n\n- æ³¨æ„ï¼šè¿™ä¸ªæŒ‡ä»¤è¢«åºŸå¼ƒäº†ã€‚ä½¿ç”¨ `import \"moduleName\";` è¯­å¥ä»£æ›¿ã€‚\n\n```typescript\n/// <amd-dependency path=\"x\" />\n\n// å‘Šè¯‰ç¼–è¯‘å™¨æœ‰ä¸€ä¸ªé TypeScript æ¨¡å—ä¾èµ–éœ€è¦è¢«æ³¨å…¥ï¼Œåšä¸ºç›®æ ‡æ¨¡å— require è°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚\n```\n\n- `amd-dependency` æŒ‡ä»¤ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå¯é€‰çš„ `name` å±æ€§ï¼›å®ƒå…è®¸æˆ‘ä»¬ä¸º `amd-dependency` ä¼ å…¥ä¸€ä¸ªå¯é€‰åå­—ï¼š\n\n```typescript\n/// <amd-dependency path=\"legacy/moduleA\" name=\"moduleA\"/>\ndeclare var moduleA: MyType;\nmoduleA.callStuff();\n```\n\n- ç”Ÿæˆçš„ `JavaScript` ä»£ç ï¼š\n\n```typescript\ndefine([\"require\", \"exports\", \"legacy/moduleA\"], function (require, exports, moduleA) {\n  moduleA.callStuff();\n});\n```\n\n## äºŒåå››ã€JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\n\n### 24.1 JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\n\n> `TypeScript 2.3` ä»¥åçš„ç‰ˆæœ¬æ”¯æŒä½¿ç”¨ `--checkJs` å¯¹ `.js` æ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥å’Œé”™è¯¯æç¤ºã€‚\n\n> ä½ å¯ä»¥é€šè¿‡æ·»åŠ  `// @ts-nocheck` æ³¨é‡Šæ¥å¿½ç•¥ç±»å‹æ£€æŸ¥ï¼›ç›¸åï¼Œä½ å¯ä»¥é€šè¿‡å»æ‰ `--checkJs` è®¾ç½®å¹¶æ·»åŠ ä¸€ä¸ª `// @ts-nocheck` æ³¨é‡Šæ¥é€‰æ‹©æ£€æŸ¥æŸäº› `.js` æ–‡ä»¶ã€‚ä½ è¿˜å¯ä»¥ç”¨ `// @ts-ignore` æ¥å¿½ç•¥æœ¬è¡Œçš„é”™è¯¯ã€‚å¦‚æœä½ ä½¿ç”¨äº† `tsconfig.json`ï¼Œ`JS` æ£€æŸ¥å°†éµç…§ä¸€äº›ä¸¥æ ¼æ£€æŸ¥æ ‡è®°ï¼Œå¦‚ `noImplicitAny`ï¼Œ`strictNullChecks` ç­‰ã€‚ä½†å› ä¸º `JS` æ£€æŸ¥æ˜¯ç›¸å¯¹å®½æ¾çš„ï¼Œåœ¨ä½¿ç”¨ä¸¥æ ¼æ ‡è®°æ—¶å¯èƒ½ä¼šæœ‰äº›å‡ºä¹æ„æ–™çš„æƒ…å†µã€‚\n\n- å¯¹æ¯” `.js`æ–‡ä»¶å’Œ `.ts` æ–‡ä»¶åœ¨ç±»å‹æ£€æŸ¥ä¸Šçš„å·®å¼‚ï¼Œæœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„\n\n#### (1) ç”¨ `JSDoc` ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\n\n> `.js` æ–‡ä»¶é‡Œï¼Œç±»å‹å¯ä»¥å’Œåœ¨ `.ts` æ–‡ä»¶é‡Œä¸€æ ·è¢«æ¨æ–­å‡ºæ¥ã€‚åŒæ ·åœ°ï¼Œå½“ç±»å‹ä¸èƒ½è¢«æ¨æ–­æ—¶ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ `JSDoc` æ¥æŒ‡å®šï¼Œå°±å¥½æ¯”åœ¨ `.ts` æ–‡ä»¶é‡Œé‚£æ ·ã€‚å¦‚åŒ `TypeScript`ï¼Œ`--noImplicitAny` ä¼šåœ¨ç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹çš„ä½ç½®æŠ¥é”™ã€‚ï¼ˆé™¤äº†å¯¹è±¡å­—é¢é‡çš„æƒ…å†µï¼›åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰`JSDoc` æ³¨è§£ä¿®é¥°çš„å£°æ˜ä¼šè¢«è®¾ç½®ä¸ºè¿™ä¸ªå£°æ˜çš„ç±»å‹ã€‚æ¯”å¦‚ï¼š\n\n```typescript\n/** @type {number} */\nvar x;\nx = 0; // OK\nx = false; // Error: boolean is not assignable to number\n```\n\n> ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ‰€æœ‰ `JSDoc` æ”¯æŒçš„æ¨¡å¼ï¼Œ[JSDoc æ–‡æ¡£](https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript)ã€‚\n\n#### (2) å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\n\n> `ES2015` æ²¡æä¾›å£°æ˜ç±»å±æ€§çš„æ–¹æ³•ã€‚å±æ€§æ˜¯åŠ¨æ€èµ‹å€¼çš„ï¼Œå°±åƒå¯¹è±¡å­—é¢é‡ä¸€æ ·ã€‚åœ¨ `.js` æ–‡ä»¶é‡Œï¼Œç¼–è¯‘å™¨ä»ç±»å†…éƒ¨çš„å±æ€§èµ‹å€¼è¯­å¥æ¥æ¨æ–­å±æ€§ç±»å‹ã€‚å±æ€§çš„ç±»å‹æ˜¯åœ¨æ„é€ å‡½æ•°é‡Œèµ‹çš„å€¼çš„ç±»å‹ï¼Œé™¤éå®ƒæ²¡åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰æˆ–è€…åœ¨æ„é€ å‡½æ•°é‡Œæ˜¯ `undefined` æˆ– `null`ã€‚è‹¥æ˜¯è¿™ç§æƒ…å†µï¼Œç±»å‹å°†ä¼šæ˜¯æ‰€æœ‰èµ‹å€¼çš„ç±»å‹çš„è”åˆç±»å‹ã€‚åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰çš„å±æ€§ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œç„¶è€Œé‚£äº›åœ¨æ–¹æ³•ï¼Œå­˜å–å™¨é‡Œå®šä¹‰çš„å±æ€§è¢«å½“æˆå¯é€‰çš„ã€‚\n\n```typescript\nclass C {\n  constructor() {\n    this.constructorOnly = 0;\n    this.constructorUnknown = undefined;\n  }\n  method() {\n    this.constructorOnly = false; // error, constructorOnly is a number\n    this.constructorUnknown = \"plunkbat\"; // ok, constructorUnknown is string | undefined\n    this.methodOnly = \"ok\"; // ok, but y could also be undefined\n  }\n  method2() {\n    this.methodOnly = true; // also, ok, y's type is string | boolean | undefined\n  }\n}\n```\n\n> å¦‚æœä¸€ä¸ªå±æ€§ä»æ²¡åœ¨ç±»å†…è®¾ç½®è¿‡ï¼Œå®ƒä»¬ä¼šè¢«å½“æˆæœªçŸ¥çš„ã€‚\n\n> å¦‚æœç±»çš„å±æ€§åªæ˜¯è¯»å–ç”¨çš„ï¼Œé‚£ä¹ˆå°±åœ¨æ„é€ å‡½æ•°é‡Œç”¨ `JSDoc` å£°æ˜å®ƒçš„ç±»å‹ã€‚å¦‚æœå®ƒç¨åä¼šè¢«åˆå§‹åŒ–ï¼Œä½ ç”šè‡³éƒ½ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°é‡Œç»™å®ƒèµ‹å€¼ï¼š\n\n```typescript\nclass C {\n  constructor() {\n    /** @type {name | undefined} */\n    this.prop = undefined;\n    /** @type {number | undefined} */\n    this.count;\n  }\n}\nlet c = new C();\nc.prop = 0; // Ok\nc.count = \"string\"; // Error: string is not assignable to number | undefined\n```\n\n#### (3) æ„é€ å‡½æ•°ç­‰åŒäºç±»\n\n> `ES2015` ä»¥å‰ï¼Œ`Javascript` ä½¿ç”¨æ„é€ å‡½æ•°ä»£æ›¿ç±»ã€‚ç¼–è¯‘å™¨æ”¯æŒè¿™ç§æ¨¡å¼å¹¶èƒ½å¤Ÿå°†æ„é€ å‡½æ•°è¯†åˆ«ä¸º `ES2015` çš„ç±»ã€‚å±æ€§ç±»å‹æ¨æ–­æœºåˆ¶å’Œä¸Šé¢ä»‹ç»çš„ä¸€è‡´ã€‚\n\n```typescript\nfunction C() {\n  this.constructorOnly = 0;\n  this.constructorUnknown = undefined;\n}\nC.prototype.method = function () {\n  this.constructorOnly = false; // error\n  this.constructorUnknown = \"plunkbat\"; // OK, the type is string | undefined\n};\n```\n\n#### (4) æ”¯æŒ `CommonJS` æ¨¡å—\n\n> åœ¨ `.js` æ–‡ä»¶é‡Œï¼Œ`TypeScript` èƒ½è¯†åˆ«å‡º `CommonJS` æ¨¡å—ã€‚å¯¹ `exports` å’Œ `module.exports` çš„èµ‹å€¼è¢«è¯†åˆ«ä¸ºå¯¼å‡ºå£°æ˜ã€‚ç›¸ä¼¼åœ°ï¼Œ`require` å‡½æ•°è°ƒç”¨è¢«è¯†åˆ«ä¸ºæ¨¡å—å¯¼å…¥ã€‚ä¾‹å¦‚ï¼š\n\n```typescript\n// same as `import module 'fs'`\nconst fs = require(\"fs\");\n// same as `export function readFile`\nmodule.exports.readFile = function (f) {\n  return fs.readFileSync(f);\n};\n```\n\n> å¯¹ `JavaScript` æ–‡ä»¶é‡Œæ¨¡å—è¯­æ³•çš„æ”¯æŒæ¯”åœ¨ `TypeScript` é‡Œå®½æ³›å¤šäº†ã€‚ å¤§éƒ¨åˆ†çš„èµ‹å€¼å’Œå£°æ˜æ–¹å¼éƒ½æ˜¯å…è®¸çš„ã€‚\n\n#### (5) ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\n\n```typescript\n// .js æ–‡ä»¶é‡Œçš„ç±»æ˜¯å‘½åç©ºé—´ã€‚å®ƒå¯ä»¥ç”¨äºåµŒå¥—ç±»ï¼Œæ¯”å¦‚ï¼š\nclass C {}\nC.D = class {};\n// ES2015 ä¹‹å‰çš„ä»£ç ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿé™æ€æ–¹æ³•ã€‚\nfunction Outer() {\n  this.y = 2;\n}\nOuter.Inner = function () {\n  this.yy = 2;\n};\n// å®ƒè¿˜å¯ä»¥ç”¨äºåˆ›å»ºç®€å•çš„å‘½åç©ºé—´ï¼š\nvar ns = {};\nns.C = class {};\nns.func = function () {};\n// åŒæ—¶è¿˜æ”¯æŒå…¶å®ƒçš„å˜åŒ–\n// ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼\nvar ns = (function (n) {\n  return n | {};\n})();\nns.COUNT = 1;\n\n// defaulting to global\nvar assign =\n  assign ||\n  function () {\n    // code goes here\n  };\nassign.extra = 1;\n```\n\n#### (6) å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\n\n- `.ts` æ–‡ä»¶é‡Œï¼Œç”¨å¯¹è±¡å­—é¢é‡åˆå§‹åŒ–ä¸€ä¸ªå˜é‡çš„åŒæ—¶ä¹Ÿç»™å®ƒå£°æ˜äº†ç±»å‹ã€‚ æ–°çš„æˆå‘˜ä¸èƒ½å†è¢«æ·»åŠ åˆ°å¯¹è±¡å­—é¢é‡ä¸­ã€‚è¿™ä¸ªè§„åˆ™åœ¨ `.js` æ–‡ä»¶é‡Œè¢«æ”¾å®½äº†ï¼›å¯¹è±¡å­—é¢é‡å…·æœ‰å¼€æ”¾çš„ç±»å‹ï¼Œå…è®¸æ·»åŠ å¹¶è®¿é—®åŸå…ˆæ²¡æœ‰å®šä¹‰çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š\n\n```typescript\nvar obj = { a: 1 };\nobj.b = 2; // Allowed\n```\n\n- å¯¹è±¡å­—é¢é‡çš„è¡¨ç°å°±å¥½æ¯”å…·æœ‰ä¸€ä¸ªé»˜è®¤çš„ç´¢å¼•ç­¾å `\\[x:string\\]: any`ï¼Œå®ƒä»¬å¯ä»¥è¢«å½“æˆå¼€æ”¾çš„æ˜ å°„è€Œä¸æ˜¯å°é—­çš„å¯¹è±¡ã€‚\n- ä¸å…¶å®ƒ `JS` æ£€æŸ¥è¡Œä¸ºç›¸ä¼¼ï¼Œè¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡æŒ‡å®š `JSDoc` ç±»å‹æ¥æ”¹å˜ï¼Œä¾‹å¦‚ï¼š\n\n```typescript\n/** @type {{ a: number }} */\nvar obj = { a: 1 };\nobj.b = 2; // Error, type {a: number} does not have property b\n```\n\n#### (7) null undefined å’Œ ç©ºæ•°ç»„çš„ç±»å‹æ˜¯ any æˆ– any[]\n\n> ä»»ä½•ç”¨ `null`ï¼Œ`undefined` åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ `any`ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ `null` æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ä»»ä½•ç”¨ `[]` åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ `any[]`ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ `null` æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ å”¯ä¸€çš„ä¾‹å¤–æ˜¯åƒä¸Šé¢é‚£æ ·æœ‰å¤šä¸ªåˆå§‹åŒ–å™¨çš„å±æ€§ã€‚\n\n```typescript\nfunction Foo(i = null) {\n  if (!i) i = 1;\n  var j = undefined;\n  j = 2;\n  this.l = [];\n}\nvar foo = new Foo();\nfoo.l.push(foo.i);\nfoo.l.push(\"end\");\n```\n\n#### (8) å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\n\n> ç”±äºåœ¨ `ES2015` ä¹‹å‰æ— æ³•æŒ‡å®šå¯é€‰å‚æ•°ï¼Œå› æ­¤ `.js` æ–‡ä»¶é‡Œæ‰€æœ‰å‡½æ•°å‚æ•°éƒ½è¢«å½“åšæ˜¯å¯é€‰çš„ã€‚ ä½¿ç”¨æ¯”é¢„æœŸå°‘çš„å‚æ•°è°ƒç”¨å‡½æ•°æ˜¯å…è®¸çš„ã€‚\n\n> éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨è¿‡å¤šçš„å‚æ•°è°ƒç”¨å‡½æ•°ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nfunction bar(a, b) {\n  console.log(a + \" \" + b);\n}\nbar(1); // OK, second argument considered optional\nbar(1, 2);\nbar(1, 2, 3); // Error, too many arguments\n```\n\n- ä½¿ç”¨ `JSDoc` æ³¨è§£çš„å‡½æ•°ä¼šè¢«ä»è¿™æ¡è§„åˆ™é‡Œç§»é™¤ã€‚ä½¿ç”¨ `JSDoc` å¯é€‰å‚æ•°è¯­æ³•æ¥è¡¨ç¤ºå¯é€‰æ€§ã€‚\n\n```typescript\n// æ¯”å¦‚ï¼š\n/**\n * @param {string} [somebody] - Somebody's name.\n */\nfunction sayHello(somebody) {\n  if (!somebody) {\n    somebody = \"John Doe\";\n  }\n  console.log(\"Hello \" + somebody);\n}\nsayHello();\n```\n\n#### (9) ç”± `arguments` æ¨æ–­å‡ºçš„ `var-args` å‚æ•°å£°æ˜\n\n> å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ä½“å†…æœ‰å¯¹ `arguments` çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¼šéšå¼åœ°è¢«è®¤ä¸ºå…·æœ‰ä¸€ä¸ª `var-arg` å‚æ•°ï¼ˆæ¯”å¦‚: `(...arg: any[]) =>; any)`ï¼‰ã€‚ä½¿ç”¨ `JSDoc` çš„ `var-arg` è¯­æ³•æ¥æŒ‡å®š `arguments` çš„ç±»å‹ã€‚\n\n```typescript\n/** @param {...number} args */\nfunction sum(/* numbers */) {\n  var total = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    total += arguments[i];\n  }\n  return total;\n}\n```\n\n#### (10) æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º `any`\n\n> ç”±äº `JavaScript` é‡Œæ²¡æœ‰ä¸€ç§è‡ªç„¶çš„è¯­æ³•æ¥æŒ‡å®šæ³›å‹å‚æ•°ï¼Œå› æ­¤æœªæŒ‡å®šçš„å‚æ•°ç±»å‹é»˜è®¤ä¸º `any`ã€‚\n\n#### (11) åœ¨ `extends` è¯­å¥ä¸­ï¼š\n\n> ä¾‹å¦‚ï¼Œ`React.Component` è¢«å®šä¹‰æˆå…·æœ‰ä¸¤ä¸ªç±»å‹å‚æ•°ï¼Œ`Props` å’Œ `State`ã€‚ åœ¨ä¸€ä¸ª `.js` æ–‡ä»¶é‡Œï¼Œæ²¡æœ‰ä¸€ä¸ªåˆæ³•çš„æ–¹å¼åœ¨ `extends` è¯­å¥é‡ŒæŒ‡å®šå®ƒä»¬ã€‚é»˜è®¤åœ°å‚æ•°ç±»å‹ä¸º `any`ï¼š\n\n```typescript\nimport { Component } from \"react\";\n\nclass MyComponent extends Component {\n  render() {\n    this.props.b; // Allowed, since this.props is of type any\n  }\n}\n```\n\n> ä½¿ç”¨ `JSDoc` çš„ `@augments` æ¥æ˜ç¡®åœ°æŒ‡å®šç±»å‹ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nimport { Component } from \"react\";\n/**\n * @augments {Component<{a: number}, State>}\n */\nclass MyComponent extends Component {\n  render() {\n    this.props.b; // Error: b does not exist on {a:number}\n  }\n}\n```\n\n#### (12) åœ¨ JSDoc å¼•ç”¨ä¸­\n\n```typescript\n/** @type{Array} */\nvar x = [];\n\nx.push(1); // OK\nx.push(\"string\"); // OK, x is of type Array<any>\n\n/** @type{Array.<number>} */\nvar y = [];\n\ny.push(1); // OK\ny.push(\"string\"); // Error, string is not assignable to number\n```\n\n#### (13) åœ¨å‡½æ•°è°ƒç”¨ä¸­\n\n> æ³›å‹å‡½æ•°çš„è°ƒç”¨ä½¿ç”¨ `arguments` æ¥æ¨æ–­æ³›å‹å‚æ•°ã€‚æœ‰æ—¶å€™ï¼Œè¿™ä¸ªæµç¨‹ä¸èƒ½å¤Ÿæ¨æ–­å‡ºç±»å‹ï¼Œå¤§å¤šæ˜¯å› ä¸ºç¼ºå°‘æ¨æ–­çš„æºï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å‹å‚æ•°ç±»å‹é»˜è®¤ä¸º `any`ã€‚\n\n```typescript\n// ä¾‹å¦‚ï¼š\nvar p = new Promise((resolve, reject) => {\n  reject();\n});\np; // Promise<any>;\n```\n\n### 24.2 æ”¯æŒçš„ JSDoc\n\n> é¢çš„åˆ—è¡¨åˆ—å‡ºäº†å½“å‰æ‰€æ”¯æŒçš„ `JSDoc` æ³¨è§£ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬åœ¨ `JavaScript` æ–‡ä»¶é‡Œæ·»åŠ ç±»å‹ä¿¡æ¯ã€‚ æ³¨æ„ï¼Œæ²¡æœ‰åœ¨ä¸‹é¢åˆ—å‡ºçš„æ ‡è®°ï¼ˆä¾‹å¦‚ `@async`ï¼‰éƒ½æ˜¯è¿˜ä¸æ”¯æŒçš„ã€‚\n\n```typescript\n1.  @type\n2.  @param (or @arg or @argument)\n3.  @returns (or @return)\n4.  @typedef\n5.  @callback\n6.  @template\n7.  @class (or @constructor)\n8.  @this\n9.  @extends (or @augments)\n10. @enum\n```\n\n> å®ƒä»¬ä»£è¡¨çš„æ„ä¹‰ä¸ `usejsdoc.org` ä¸Šé¢ç»™å‡ºçš„é€šå¸¸æ˜¯ä¸€è‡´çš„æˆ–è€…æ˜¯å®ƒçš„è¶…é›†ã€‚ ä¸‹é¢çš„ä»£ç æè¿°äº†å®ƒä»¬çš„åŒºåˆ«å¹¶ç»™å‡ºäº†ä¸€äº›ç¤ºä¾‹ã€‚\n\n#### (1) [@type ](/type)\n\n> å¯ä»¥ä½¿ç”¨ `@type` æ ‡è®°å¹¶å¼•ç”¨ä¸€ä¸ªç±»å‹åç§°ï¼ˆåŸå§‹ç±»å‹ï¼Œ`TypeScript` é‡Œå£°æ˜çš„ç±»å‹ï¼Œæˆ–åœ¨ `JSDoc` é‡Œ `@typedef` æ ‡è®°æŒ‡å®šçš„ï¼‰å¯ä»¥ä½¿ç”¨ä»»ä½• `TypeScript` ç±»å‹å’Œå¤§å¤šæ•° `JSDoc` ç±»å‹ã€‚\n\n```typescript\n/** @type {string} */\nvar s;\n\n/** @type {Window} */\nvar win;\n\n/** @type {PromiseLike<string>} */\nvar promisedString;\n\n// You can specify an HTML Element with DOM properties\n/** @type {HTMLElement} */\n\nvar myElement = document.querySelector(selector);\nelement.dataset.myData = \"\";\n```\n\n- `@type` å¯ä»¥æŒ‡å®šè”åˆç±»å‹â€”ä¾‹å¦‚ï¼Œ`string` å’Œ `boolean` ç±»å‹çš„è”åˆã€‚\n\n```typescript\n/** @type {{string | boolean}} */\nvar sb;\n```\n\n- æ³¨æ„ï¼šæ‹¬å·æ˜¯å¯é€‰çš„\n\n```typescript\n/** @type {string | boolean} */\nvar sb;\n```\n\n- æœ‰å¤šç§æ–¹å¼æ¥æŒ‡å®šæ•°ç»„ç±»å‹\n\n```typescript\n/** @type {number[]} */\nvar ns;\n/** @type {Array.<number>} */\nvar nds;\n/** @type {Array<number>} */\nvar nas;\n```\n\n- è¿˜å¯ä»¥æŒ‡å®šå¯¹è±¡å­—é¢é‡ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ `a(å­—ç¬¦ä¸²)` å’Œ `b(æ•°å­—)` å±æ€§çš„å¯¹è±¡ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š\n\n```typescript\n/** @type {{a: string, b: number}} */\nvar var9;\n```\n\n- å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å’Œæ•°å­—ç´¢å¼•ç­¾åæ¥æŒ‡å®š `map-like` å’Œ `array-like` çš„å¯¹è±¡ï¼Œä½¿ç”¨æ ‡å‡†çš„ `JSDoc` è¯­æ³•æˆ–è€… `TypeScript` è¯­æ³•ã€‚\n\n```typescript\n/**\n * A map-like object that maps arbitrary `string` properties to `number`s.\n *\n * @type {Object.<string, number>}\n * */\nvar stringToNumber;\n/** @type {Object.<number, object>} */\nvar arrayLike;\n```\n\n- è¿™ä¸¤ä¸ªç±»å‹ä¸ `TypeScript` é‡Œçš„ `{ [x: string]: number }` å’Œ `{ [x: number]: any }` æ˜¯ç­‰åŒçš„ã€‚ ç¼–è¯‘å™¨èƒ½è¯†åˆ«å‡ºè¿™ä¸¤ç§è¯­æ³•ã€‚\n- å¯ä»¥ä½¿ç”¨ `TypeScript` æˆ– `Closure` è¯­æ³•æŒ‡å®šå‡½æ•°ç±»å‹ã€‚\n\n```typescript\n/** @type {function(string, boolean): number} Closure syntax */\nvar sbn;\n/** @type {(s: string, b: boolean) => number} Typescript syntax */\nvar sbn2;\n```\n\n- æˆ–è€…ç›´æ¥ä½¿ç”¨æœªæŒ‡å®šçš„ `Function` ç±»å‹ï¼š\n\n```typescript\n/** @type {Function} */\nvar fn7;\n/** @type {function} */\nvar fn6;\n```\n\n- `Closure` çš„å…¶å®ƒç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š\n\n```typescript\n/** @type {*} - can be 'any' type */\nvar star;\n/** @type {?} - unknown type (same as 'any') */\nvar question;\n```\n\n#### (2) è½¬æ¢\n\n> `TypeScript` å€Ÿé‰´äº† `Closure` é‡Œçš„è½¬æ¢è¯­æ³•ã€‚åœ¨æ‹¬å·è¡¨è¾¾å¼å‰é¢ä½¿ç”¨ `@type` æ ‡è®°ï¼Œå¯ä»¥å°†ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹\n\n```typescript\n/**\n * @type {number | string}\n */\nvar numberOrString = Math.random() < 0.5 ? \"hello\" : 100;\nvar typeAssertedNumber = /** @type {number} */ numberOrString;\n```\n\n#### (3) å¯¼å…¥ç±»å‹\n\n> å¯ä»¥ä½¿ç”¨å¯¼å…¥ç±»å‹ä»å…¶å®ƒæ–‡ä»¶ä¸­å¯¼å…¥å£°æ˜ã€‚ è¿™ä¸ªè¯­æ³•æ˜¯ `TypeScript` ç‰¹æœ‰çš„ï¼Œä¸ `JSDoc` æ ‡å‡†ä¸åŒï¼š\n\n```typescript\n/**\n * @param p { import(\"./a\").Pet }\n */\nfunction walk(p) {\n  console.log(`Walking ${p.name}...`);\n}\n```\n\n> å¯¼å…¥ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ç±»å‹åˆ«åå£°æ˜ä¸­ï¼š\n\n```typescript\n/**\n * @typedef Pet { import(\"./a\").Pet }\n */\n\n/**\n * @type {Pet}\n */\nvar myPet;\nmyPet.name;\n```\n\n> å¯¼å…¥ç±»å‹å¯ä»¥ç”¨åœ¨ä»æ¨¡å—ä¸­å¾—åˆ°ä¸€ä¸ªå€¼çš„ç±»å‹ã€‚\n\n```typescript\n/**\n * @type {typeof import(\"./a\").x }\n */\nvar x = require(\"./a\").x;\n```\n\n#### (4) [@param ](/param) å’Œ [@returns ](/returns)\n\n> `@param` è¯­æ³• å’Œ `@type` ç›¸åŒï¼Œä½†å¢åŠ äº†ä¸€ä¸ªå‚æ•°åã€‚ ä½¿ç”¨ `[]` å¯ä»¥æŠŠå‚æ•°å£°æ˜ä¸ºå¯é€‰çš„ï¼š\n\n```typescript\n// Parameters may be declared in a variety of syntactic forms\n/**\n * @param {string}  p1 - A string param.\n * @param {string=} p2 - An optional param (Closure syntax)\n * @param {string} [p3] - Another optional param (JSDoc syntax).\n * @param {string} [p4=\"test\"] - An optional param with a default value\n * @return {string} This is the result\n */\nfunction stringsStringStrings(p1, p2, p3, p4) {\n  // TODO\n}\n```\n\n> å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š\n\n```typescript\n/**\n * @return {PromiseLike<string>}\n */\nfunction ps() {}\n\n/**\n * @returns {{ a: string, b: number }} - May use '@returns' as well as '@return'\n */\nfunction ab() {}\n```\n\n#### (5) @typedef, @callback, å’Œ [@param ](/param)\n\n> `@typedef` å¯ä»¥ç”¨æ¥å£°æ˜å¤æ‚ç±»å‹ã€‚å’Œ `@param` ç±»ä¼¼çš„è¯­æ³•ã€‚\n\n```typescript\n/**\n * @typedef {Object} SpecialType - creates a new type named 'SpecialType'\n * @property {string} prop1 - a string property of SpecialType\n * @property {number} prop2 - a number property of SpecialType\n * @property {number=} prop3 - an optional number property of SpecialType\n * @prop {number} [prop4] - an optional number property of SpecialType\n * @prop {number} [prop5=42] - an optional number property of SpecialType with default\n */\n/** @type {SpecialType} */\nvar specialTypeObject;\n```\n\n> å¯ä»¥åœ¨ç¬¬ä¸€è¡Œä¸Šä½¿ç”¨ `object` æˆ– `Object`ã€‚\n\n```typescript\n/**\n * @typedef {object} SpecialType1 - creates a new type named 'SpecialType'\n * @property {string} prop1 - a string property of SpecialType\n * @property {number} prop2 - a number property of SpecialType\n * @property {number=} prop3 - an optional number property of SpecialType\n */\n/** @type {SpecialType1} */\nvar specialTypeObject1;\n```\n\n> `@param` å…è®¸ä½¿ç”¨ç›¸ä¼¼çš„è¯­æ³•ã€‚ æ³¨æ„ï¼ŒåµŒå¥—çš„å±æ€§åå¿…é¡»ä½¿ç”¨å‚æ•°ååšä¸ºå‰ç¼€ï¼š\n\n```typescript\n/**\n * @param {Object} options - The shape is the same as SpecialType above\n * @param {string} options.prop1\n * @param {number} options.prop2\n * @param {number=} options.prop3\n * @param {number} [options.prop4]\n * @param {number} [options.prop5=42]\n */\nfunction special(options) {\n  return (options.prop4 || 1001) + options.prop5;\n}\n```\n\n> `@callback` ä¸ `@typedef` ç›¸ä¼¼ï¼Œä½†å®ƒæŒ‡å®šå‡½æ•°ç±»å‹è€Œä¸æ˜¯å¯¹è±¡ç±»å‹ï¼š\n\n```typescript\n/**\n * @callback Predicate\n * @param {string} data\n * @param {number} [index]\n * @returns {boolean}\n */\n/** @type {Predicate} */\nconst ok = s => !(s.length % 2);\n```\n\n> å½“ç„¶ï¼Œæ‰€æœ‰è¿™äº›ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ `TypeScript` çš„è¯­æ³• `@typedef` åœ¨ä¸€è¡Œä¸Šå£°æ˜ï¼š\n\n```typescript\n/** @typedef {{ prop1: string, prop2: string, prop3?: number }} SpecialType */\n/** @typedef {(data: string, index?: number) => boolean} Predicate */\n```\n\n#### (6) [@template ](/template)\n\n> ä½¿ç”¨ `@template` å£°æ˜æ³›å‹ï¼š\n\n```typescript\n/**\n * @template T\n * @param {T} p1 - A generic parameter that flows through to the return type\n * @return {T}\n */\nfunction id(x) {\n  return x;\n}\n```\n\n> ç”¨é€—å·æˆ–å¤šä¸ªæ ‡è®°æ¥å£°æ˜å¤šä¸ªç±»å‹å‚æ•°ï¼š\n\n```typescript\n/**\n * @template T,U,V\n * @template W,X\n */\n```\n\n> è¿˜å¯ä»¥åœ¨å‚æ•°åå‰æŒ‡å®šç±»å‹çº¦æŸã€‚åªæœ‰åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ç±»å‹å‚æ•°ä¼šè¢«çº¦æŸ:\n\n```typescript\n/**\n * @template {string} K - K must be a string or string literal\n * @template {{ serious(): string }} Seriousalizable - must have a serious method\n * @param {K} key\n * @param {Seriousalizable} object\n */\nfunction seriousalize(key, object) {\n  // ????\n}\n```\n\n#### (7) [@constructor ](/constructor)\n\n> ç¼–è¯‘å™¨é€šè¿‡ `this` å±æ€§çš„èµ‹å€¼æ¥æ¨æ–­æ„é€ å‡½æ•°, ä½†ä½ å¯ä»¥è®©æ£€æŸ¥æ›´ä¸¥æ ¼æç¤ºæ›´å‹å¥½, ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ª `@constructor` æ ‡è®°:\n\n```typescript\n/**\n * @constructor\n * @param {number} data\n */\nfunction C(data) {\n  this.size = 0;\n  this.initialize(data); // Should error, initializer expects a string\n}\n/**\n * @param {string} s\n */\nC.prototype.initialize = function (s) {\n  this.size = s.length;\n};\n\nvar c = new C(0);\nvar result = C(1); // C should only be called with new\n```\n\n> é€šè¿‡ `@constructor`, `this` å°†åœ¨æ„é€ å‡½æ•°`C`é‡Œè¢«æ£€æŸ¥ï¼Œå› æ­¤ä½ åœ¨ `initialize` æ–¹æ³•é‡Œå¾—åˆ°ä¸€ä¸ªæç¤ºï¼Œå¦‚æœä½ ä¼ å…¥ä¸€ä¸ªæ•°å­—ä½ è¿˜å°†å¾—åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºã€‚å¦‚æœä½ ç›´æ¥è°ƒç”¨`C`è€Œä¸æ˜¯æ„é€ å®ƒï¼Œä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚\n\n> ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€é‚£äº›æ—¢èƒ½æ„é€ ä¹Ÿèƒ½ç›´æ¥è°ƒç”¨çš„æ„é€ å‡½æ•°ä¸èƒ½ä½¿ç”¨ `@constructor`ã€‚\n\n#### (8) [@this ](/this)\n\n> ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¥æ¨æ–­å‡º `this` çš„ç±»å‹ã€‚ä½†ä½ å¯ä»¥ä½¿ç”¨ `@this` æ¥æ˜ç¡®æŒ‡å®šå®ƒçš„ç±»å‹ï¼š\n\n```typescript\n/**\n * @this {HTMLElement}\n * @param {*} e\n */\nfunction callbackForLater(e) {\n  this.clientHeight = parseInt(e); // should be fine!\n}\n```\n\n#### (9) [@extends ](/extends)\n\n> å½“ `JavaScript` ç±»ç»§æ‰¿äº†ä¸€ä¸ªåŸºç±», æ— å¤„æŒ‡å®šç±»å‹å‚æ•°çš„ç±»å‹, è€Œ `@extends` æ ‡è®°æä¾›äº†è¿™æ ·ä¸€ç§æ–¹å¼:\n\n```typescript\n/**\n * @template T\n * @extends {Set<T>}\n */\nclass SortableSet extends Set {\n  // ...\n}\n```\n\n> æ³¨æ„ `@extends` åªä½œç”¨äºç±»ã€‚å½“å‰ï¼Œæ— æ³•å®ç°æ„é€ å‡½æ•°ç»§æ‰¿ç±»çš„æƒ…å†µã€‚\n\n#### (10) [@enum ](/enum)\n\n> `@enum` æ ‡è®°å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡å­—é¢é‡, å®ƒçš„æˆå‘˜éƒ½æœ‰ç¡®å®šçš„ç±»å‹ã€‚ä¸åŒäº `JavaScript` é‡Œå¤§å¤šæ•°çš„å¯¹è±¡å­—é¢é‡ï¼Œå®ƒä¸å…è®¸æ·»åŠ é¢å¤–æˆå‘˜ã€‚\n\n```typescript\n/** @enum {number} */\nconst JSDocState = {\n  BeginningOfLine: 0,\n  SawAsterisk: 1,\n  SavingComments: 2\n};\n```\n\n> æ³¨æ„ `@enum` ä¸ `TypeScript` çš„ `@enum` å¤§ä¸ç›¸åŒ, å®ƒæ›´åŠ ç®€å•ã€‚ç„¶è€Œï¼Œä¸åŒäº `TypeScript` çš„æšä¸¾, `@enum` å¯ä»¥æ˜¯ä»»ä½•ç±»å‹:\n\n```typescript\n/** @enum {function(number): number} */\nconst Math = {\n  add1: n => n + 1,\n  id: n => -n,\n  sub1: n => n - 1\n};\n```\n\n#### (11) æ›´å¤šç¤ºä¾‹\n\n```tsx\nvar someObj = {\n  /**\n   * @param {string} param1 - Docs on property assignments work\n   */\n  x: function (param1) {}\n};\n\n/**\n * As do docs on variable assignments\n * @return {Window}\n */\nlet someFunc = function () {};\n\n/**\n * And class methods\n * @param {string} greeting The greeting to use\n */\nFoo.prototype.sayHi = greeting => console.log(\"Hi!\");\n\n/**\n * And arrow functions expressions\n * @param {number} x - A multiplier\n */\nlet myArrow = x => x * x;\n\n/**\n * Which means it works for stateless function components in JSX too\n * @param {{a: string, b: number}} test - Some param\n */\nvar sfc = test => <div>{test.a.charAt(0)}</div>;\n\n/**\n * A parameter can be a class constructor, using Closure syntax.\n *\n * @param {{new(...args: any[]): object}} C - The class to register\n */\nfunction registerClass(C) {}\n\n/**\n * @param {...string} p1 - A 'rest' arg (array) of strings. (treated as 'any')\n */\nfunction fn10(p1) {}\n\n/**\n * @param {...string} p1 - A 'rest' arg (array) of strings. (treated as 'any')\n */\nfunction fn9(p1) {\n  return p1.join();\n}\n```\n\n#### (12) å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\n\n> åœ¨å€¼ç©ºé—´ä¸­å°†å¯¹è±¡è§†ä¸ºç±»å‹æ˜¯ä¸å¯ä»¥çš„, é™¤éå¯¹è±¡åˆ›å»ºäº†ç±»å‹, å¦‚æ„é€ å‡½æ•°ã€‚\n\n```typescript\nfunction aNormalFunction() {}\n/**\n * @type {aNormalFunction}\n */\nvar wrong;\n/**\n * Use 'typeof' instead:\n * @type {typeof aNormalFunction}\n */\nvar right;\n```\n\n> å¯¹è±¡å­—é¢é‡å±æ€§ä¸Šçš„ `=` åç¼€ä¸èƒ½æŒ‡å®šè¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„:\n\n```typescript\n/**\n * @type {{ a: string, b: number= }}\n */\nvar wrong;\n/**\n * Use postfix question on the property name instead:\n * @type {{ a: string, b?: number }}\n */\nvar right;\n```\n\n> `Nullable` ç±»å‹åªåœ¨å¯ç”¨äº† `strictNullChecks` æ£€æŸ¥æ—¶æ‰å¯ä½œç”¨:\n\n```typescript\n/**\n * @type {?number}\n * With strictNullChecks: true -- number | null\n * With strictNullChecks: off  -- number\n */\nvar nullable;\n```\n\n> `Non-nullable` ç±»å‹æ²¡æœ‰æ„ä¹‰, ä»¥å…¶åŸç±»å‹å¯¹å¾…:\n\n```typescript\n/**\n * @type {!number}\n * Just has type number\n */\nvar normal;\n```\n\n> ä¸åŒäº `JSDoc` ç±»å‹ç³»ç»Ÿ, `TypeScript` åªå…è®¸å°†ç±»å‹æ ‡è®°ä¸ºåŒ…ä¸åŒ…å« `null`ã€‚`Non-nullable` -- å¦‚æœå¯ç”¨äº† `strictNullChecks`ï¼Œé‚£ä¹ˆ `number` æ˜¯ `énull` çš„ã€‚ å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œé‚£ä¹ˆ `number` æ˜¯å¯ä»¥ä¸º `null` çš„ã€‚\n","source":"_posts/å‰ç«¯/TypeScript æ–‡æ¡£.md","raw":"---\ntitle: TypeScript æ–‡æ¡£\ndate: 2020-09-10\ncategories: [å‰ç«¯, ts]\ntags:\n  - æ–‡æ¡£\n---\n\n## ä¸€ã€ åŸºç¡€ç±»å‹\n\n### 1.1 ç±»å‹æ–­è¨€\n\n> æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” `TypeScript` æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šçš„çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸å°½å…´ç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚\n\n- ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼\n\n- ç¬¬ä¸€ç§ï¼šå°–æ‹¬å·è¯­æ³• (å½“åœ¨ `TypeScript` é‡Œä½¿ç”¨ `JSX` æ—¶ï¼Œåªæœ‰ `as` è¯­è¨€æ–­è¨€æ˜¯è¢«å…è®¸çš„)\n\n```typescript\nlet someValue: any = \"this is a string\";\nlet strLength: number = (<string>someValue).length;\n```\n\n- ç¬¬äºŒç§ï¼š`as` è¯­æ³•\n\n```typescript\nlet _someValue: any = \"this is a string\";\nlet _strLength: number = (_someValue as string).length;\n```\n\n### 1.2 åŸºç¡€ç±»å‹\n\n#### 1.2.1 å¸ƒå°”å€¼\n\n```typescript\nlet isDone: boolean = false;\n```\n\n#### 1.2.2 æ•°å­—\n\n> ä¸ `javascript` ä¸€æ ·ï¼Œ`TypeScript` é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ `number`ã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œ `TypeScript` è¿˜æ”¯æŒ `ECMA2015` ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚\n\n```typescript\nlet decLiteral: number = 6;\nlet hexLiteral: number = 0xf00d;\nlet binaryLiteral: number = 0b1010;\nlet octalLiteral: number = 0o744;\n```\n\n#### 1.2.3 å­—ç¬¦ä¸²\n\n```typescript\nlet strName: string = \"bob\";\n```\n\n#### 1.2.4 æ•°ç»„\n\n> `TypeScript` åƒ `JavaScript` ä¸€æ ·å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ã€‚æœ‰ä¸¤ç§æ–¹æ³•å®šä¹‰æ•°ç»„ã€‚\n\n- ç¬¬ä¸€ç§ï¼šå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š `[]`;\n\n```typescript\nlet list1: number[] = [1, 2, 3];\n```\n\n- ç¬¬äºŒç§ï¼šä½¿ç”¨æ•°ç»„æ³›å‹, `Array<å…ƒç´ ç±»å‹>`\n\n```typescript\nlet list2: Array<number> = [1, 2, 3];\n```\n\n#### 1.2.5 å…ƒç»„ Tuple\n\n- å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚\n\n```typescript\nlet x: [string, number];\nx = [\"hello\", 10]; // => Ok\nx = [10, \"hello\"]; // => Error\n```\n\n- å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹\n\n```typescript\nconsole.log(x[0].substr(1)); // => Ok\nconsole.log(x[1].substr(1)); // => Error\n```\n\n- å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£\n\n```typescript\nx[3] = \"world\"; // Ok, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹\nconsole.log(x[5].toString()); // Ok, \"string\"å’Œ\"number\"éƒ½æœ‰toStringæ–¹æ³•\nx[6] = true; // Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹\n```\n\n#### 1.2.6 æšä¸¾\n\n- `enum` ç±»å‹æ˜¯å¯¹ `JavaScript` æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚åƒ `C#` ç­‰å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—\n\n```typescript\nenum Color {\n  Red,\n  Green,\n  Blue\n}\nlet c: Color = Color.Green;\n```\n\n- é»˜è®¤æƒ…å†µä¸‹ï¼Œä» `0` å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚\n\n```typescript\nenum Color1 {\n  Red = 1,\n  Green,\n  Blue\n}\nlet c1: Color1 = Color1.Green;\n```\n\n- æˆ–è€…å…¨éƒ¨é‡‡ç”¨èµ‹å€¼\n\n```typescript\nenum Color2 {\n  Red = 1,\n  Green = 2,\n  Blue = 4\n}\nlet c2: Color2 = Color2.Green;\n```\n\n- æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚\n\n```typescript\nenum Color3 {\n  Red = 1,\n  Green,\n  Blue\n}\nlet colorName: string = Color3[2];\nconsole.log(colorName);\n```\n\n#### 1.2.7 Any\n\n- æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹åº“ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `any` ç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡\n\n```typescript\nlet notSure: any = 4;\nnotSure = \"maybe a string instead\";\nnotSure = false; // Ok\n```\n\n- åœ¨å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹å†™çš„æ—¶å€™ï¼Œ`any` ç±»å‹æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©åœ°åŒ…å«æˆ–ç§»é™¤ç±»å‹æ£€æŸ¥ã€‚ä½ å¯èƒ½è®¤ä¸º `Object` æœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒåœ¨å…¶ä»–è¯­è¨€ä¸­é‚£æ ·ã€‚ä½†æ˜¯ `Object` ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™ä»–èµ‹ä»»æ„å€¼ï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä½¿å®ƒçœŸæœ‰è¿™äº›æ–¹æ³•ã€‚\n\n```typescript\nlet notSure1: any = 4;\nnotSure1.ifItExists(); // Ok\nnotSure1.toFixed(); // Ok\nlet prettySure: Object = 4;\n// prettySure.toFixed(); // Error, Property 'toFixed' doesn't exist on type 'Object'.\n```\n\n- å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®ç±»å‹æ—¶ï¼Œ`any` ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚\n\n```typescript\nlet list: any[] = [1, true, \"free\"];\nlist[1] = 100;\n```\n\n#### 1.2.8 Void\n\n- æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ`void` ç±»å‹åƒæ˜¯ä¸ `any` ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ `void`ã€‚\n\n```typescript\nfunction warnUser(): void {\n  console.log(\"This is my warning message\");\n}\n```\n\n- å£°æ˜ä¸€ä¸ª `void` ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ `undefined` å’Œ `null`\n\n```typescript\nlet unusbale: void = undefined;\n```\n\n#### 1.2.9 Null å’Œ Undefined\n\n- `TypeScript` é‡Œï¼Œ`undefined` å’Œ `null` ä¸¤è€…å„æœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš `undefined` å’Œ `null`ã€‚å’Œ `void` ç›¸ä¼¼ï¼Œå®ƒä»¬æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ã€‚\n\n```typescript\nlet u: undefined = undefined;\nlet n: null = null;\n```\n\n- é»˜è®¤æƒ…å†µä¸‹ `null` å’Œ `undefined` æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ `null` å’Œ `undefined` èµ‹å€¼ç»™ `number` ç±»å‹çš„å˜é‡ã€‚\n- ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº†ä¸€ä¸ª `--strictNullChecks` æ ‡è®°ï¼Œ`null` å’Œ `undefined` åªèƒ½èµ‹å€¼ç»™ `void` å’Œå®ƒä»¬å„è‡ªã€‚è¿™èƒ½é¿å…å¾ˆå¤šå¸¸è§çš„é—®é¢˜ã€‚ä¹Ÿè®¸åœ¨æŸå¤„ä½ æƒ³ä¼ å…¥ä¸€ä¸ª `string` æˆ– `null` æˆ– `undefined`ï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ `string | null | undefined`ã€‚\n\n#### 1.2.10 Never\n\n- `never` ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š`never` ç±»å‹æ˜¯é‚£äº›æ€»ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›\n- å˜é‡ä¹Ÿå¯èƒ½æ˜¯ `never` ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚\n- `never` ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›\n\n> ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ `never` çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ `never` ç±»å‹(é™¤äº† `never` æœ¬èº«ä¹‹å¤–)ã€‚å³ä½¿ `any` ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ `never`ã€‚\n\n```typescript\n// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹\nfunction error(message: string): never {\n  throw new Error(message);\n}\n// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºnever\nfunction fail() {\n  return error(\"Something failed\");\n}\n// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ³•è¾¾åˆ°çš„ç»ˆç‚¹\nfunction infiniteLoop(): never {\n  while (true) {}\n}\n```\n\n#### 1.2.11 Object\n\n- `Object` è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ `number`, `string`, `boolean`, `symbol`, `null` æˆ– `undefined` ä¹‹å¤–çš„ç±»å‹ã€‚\n- ä½¿ç”¨ `Object` ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ `Object.create` è¿™æ ·çš„ `API`ã€‚\n\n```typescript\ndeclare function create(o: object | null): void;\ncreate({ prop: 0 }); // Ok\ncreate(null); // Ok\ncreate(42); //Error\ncreate(\"string\"); // Error\ncreate(false); // Error\ncreate(undefined); // Error\n```\n\n## äºŒã€å˜é‡å£°æ˜\n\n### 2.1 ä»‹ç»\n\n> `let` å’Œ `const` æ˜¯ `JavaScript` é‡Œç›¸å¯¹è¾ƒæ–°çš„å˜é‡å£°æ˜æ–¹å¼ã€‚ åƒæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ï¼Œ `let` åœ¨å¾ˆå¤šæ–¹é¢ä¸ `var` æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©å¤§å®¶é¿å…åœ¨ `JavaScript` é‡Œå¸¸è§ä¸€äº›é—®é¢˜ã€‚ `const` æ˜¯å¯¹ `let` çš„ä¸€ä¸ªå¢å¼ºï¼Œå®ƒèƒ½é˜»æ­¢å¯¹ä¸€ä¸ªå˜é‡å†æ¬¡èµ‹å€¼ã€‚\n> å› ä¸º `TypeScript` æ˜¯ `JavaScript` çš„è¶…é›†ï¼Œæ‰€ä»¥å®ƒæœ¬èº«å°±æ”¯æŒ `let` å’Œ `const` ã€‚ ä¸‹é¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜è¿™äº›æ–°çš„å£°æ˜æ–¹å¼ä»¥åŠä¸ºä»€ä¹ˆæ¨èä½¿ç”¨å®ƒä»¬æ¥ä»£æ›¿ `var`ã€‚\n> å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ `JavaScript` æ—¶æ²¡æœ‰ç‰¹åˆ«åœ¨æ„ï¼Œé‚£ä¹ˆè¿™èŠ‚å†…å®¹ä¼šå”¤èµ·ä½ çš„å›å¿†ã€‚ å¦‚æœä½ å·²ç»å¯¹ `var` å£°æ˜çš„æ€ªå¼‚ä¹‹å¤„äº†å¦‚æŒ‡æŒï¼Œé‚£ä¹ˆä½ å¯ä»¥è½»æ¾åœ°ç•¥è¿‡è¿™èŠ‚ã€‚\n\n### 2.2 var å£°æ˜\n\n> ä¸€ç›´ä»¥æ¥æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ `var` å…³é”®å­—å®šä¹‰ `JavaScript` å˜é‡ã€‚\n\n```typescript\nvar a = 10;\n```\n\n> å¤§å®¶éƒ½èƒ½ç†è§£ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸º `a` å€¼ä¸º `10` çš„å˜é‡ã€‚\n> æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å˜é‡ï¼š\n\n```typescript\nfunction f() {\n  var message = \"Hello, world!\";\n  return message;\n}\n```\n\n> å¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒå‡½æ•°å†…éƒ¨è®¿é—®ç›¸åŒçš„å˜é‡ã€‚\n\n```typescript\nfunction f() {\n  var a = 10;\n  return function g() {\n    var b = a + 1;\n    return b;\n  };\n}\n\nvar g = f();\ng(); // returns 11;\n```\n\n> ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ`g` å¯ä»¥è·å–åˆ° `f` å‡½æ•°é‡Œå®šä¹‰çš„ `a` å˜é‡ã€‚ æ¯å½“ `g` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒéƒ½å¯ä»¥è®¿é—®åˆ° `f` é‡Œçš„ `a` å˜é‡ã€‚ å³ä½¿å½“ `g` åœ¨ `f` å·²ç»æ‰§è¡Œå®Œåæ‰è¢«è°ƒç”¨ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®åŠä¿®æ”¹ `a`ã€‚\n\n```typescript\nfunction f() {\n  var a = 1;\n\n  a = 2;\n  var b = g();\n  a = 3;\n\n  return b;\n\n  function g() {\n    return a;\n  }\n}\n\nf(); // returns 2\n```\n\n### 2.3 ä½œç”¨åŸŸè§„åˆ™\n\n> å¯¹äºç†Ÿæ‚‰å…¶å®ƒè¯­è¨€çš„äººæ¥è¯´ï¼Œ`var` å£°æ˜æœ‰äº›å¥‡æ€ªçš„ä½œç”¨åŸŸè§„åˆ™ã€‚ çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```typescript\nfunction f(shouldInitialize: boolean) {\n  if (shouldInitialize) {\n    var x = 10;\n  }\n  return x;\n}\n\nf(true); // returns '10'\nf(false); // returns 'undefined'\n```\n\n> æœ‰äº›è¯»è€…å¯èƒ½è¦å¤šçœ‹å‡ éè¿™ä¸ªä¾‹å­ã€‚ å˜é‡ `x` æ˜¯å®šä¹‰åœ¨ `if` è¯­å¥é‡Œé¢\\_ï¼Œä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥åœ¨è¯­å¥çš„å¤–é¢è®¿é—®å®ƒã€‚ è¿™æ˜¯å› ä¸º `var` å£°æ˜å¯ä»¥åœ¨åŒ…å«å®ƒçš„å‡½æ•°ï¼Œæ¨¡å—ï¼Œå‘½åç©ºé—´æˆ–å…¨å±€ä½œç”¨åŸŸå†…éƒ¨ä»»ä½•ä½ç½®è¢«è®¿é—®ï¼ˆæˆ‘ä»¬åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼ŒåŒ…å«å®ƒçš„ä»£ç å—å¯¹æ­¤æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ æœ‰äº›äººç§°æ­¤ä¸º `var` ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°å‚æ•°ä¹Ÿä½¿ç”¨å‡½æ•°ä½œç”¨åŸŸã€‚\n> è¿™äº›ä½œç”¨åŸŸè§„åˆ™å¯èƒ½ä¼šå¼•å‘ä¸€äº›é”™è¯¯ã€‚ å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼Œå¤šæ¬¡å£°æ˜åŒä¸€ä¸ªå˜é‡å¹¶ä¸ä¼šæŠ¥é”™ï¼š\n\n```typescript\nfunction sumMatrix(matrix: number[][]) {\n  var sum = 0;\n  for (var i = 0; i < matrix.length; i++) {\n    var currentRow = matrix[i];\n    for (var i = 0; i < currentRow.length; i++) {\n      sum += currentRow[i];\n    }\n  }\n  return sum;\n}\n```\n\n> è¿™é‡Œå¾ˆå®¹æ˜“çœ‹å‡ºä¸€äº›é—®é¢˜ï¼Œé‡Œå±‚çš„ `for` å¾ªç¯ä¼šè¦†ç›–å˜é‡ `i`ï¼Œå› ä¸ºæ‰€æœ‰ `i` éƒ½å¼•ç”¨ç›¸åŒçš„å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ æœ‰ç»éªŒçš„å¼€å‘è€…ä»¬å¾ˆæ¸…æ¥šï¼Œè¿™äº›é—®é¢˜å¯èƒ½åœ¨ä»£ç å®¡æŸ¥æ—¶æ¼æ‰ï¼Œå¼•å‘æ— ç©·çš„éº»çƒ¦ã€‚\n\n### 2.4 æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\n\n> å¿«é€Ÿçš„çŒœä¸€ä¸‹ä¸‹é¢çš„ä»£ç ä¼šè¿”å›ä»€ä¹ˆï¼š\n\n```typescript\nfor (var i = 0; i < 10; i++) {\n  setTimeout(function () {\n    console.log(i);\n  }, 100 * i);\n}\n```\n\n> ä»‹ç»ä¸€ä¸‹ï¼Œ`setTimeout` ä¼šåœ¨è‹¥å¹²æ¯«ç§’çš„å»¶æ—¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç­‰å¾…å…¶å®ƒä»£ç æ‰§è¡Œå®Œæ¯•ï¼‰ã€‚\n> å¥½å§ï¼Œçœ‹ä¸€ä¸‹ç»“æœï¼š\n\n```typescript\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n10;\n```\n\n> å¾ˆå¤š `JavaScript` ç¨‹åºå‘˜å¯¹è¿™ç§è¡Œä¸ºå·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å¦‚æœä½ å¾ˆä¸è§£ï¼Œä½ å¹¶ä¸æ˜¯ä¸€ä¸ªäººã€‚ å¤§å¤šæ•°äººæœŸæœ›è¾“å‡ºç»“æœæ˜¯è¿™æ ·ï¼š\n\n```typescript\n0;\n1;\n2;\n3;\n4;\n5;\n6;\n7;\n8;\n9;\n```\n\n> è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æåˆ°çš„æ•è·å˜é‡å—ï¼Ÿ\n> æˆ‘ä»¬ä¼ ç»™ `setTimeout` çš„æ¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼å®é™…ä¸Šéƒ½å¼•ç”¨äº†ç›¸åŒä½œç”¨åŸŸé‡Œçš„åŒä¸€ä¸ª `i`ã€‚\n> è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ€è€ƒä¸€ä¸‹è¿™æ˜¯ä¸ºä»€ä¹ˆã€‚ `setTimeout` åœ¨è‹¥å¹²æ¯«ç§’åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯åœ¨ `for` å¾ªç¯ç»“æŸåã€‚ `for` å¾ªç¯ç»“æŸåï¼Œ`i` çš„å€¼ä¸º `10`ã€‚ æ‰€ä»¥å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šæ‰“å°å‡º `10ï¼`\n> ä¸€ä¸ªé€šå¸¸çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆ`IIFE`ï¼‰æ¥æ•è·æ¯æ¬¡è¿­ä»£æ—¶ `i` çš„å€¼ï¼š\n\n```typescript\nfor (var i = 0; i < 10; i++) {\n  // capture the current state of 'i'\n  // by invoking a function with its current value\n  (function (i) {\n    setTimeout(function () {\n      console.log(i);\n    }, 100 * i);\n  })(i);\n}\n```\n\n> è¿™ç§å¥‡æ€ªçš„å½¢å¼æˆ‘ä»¬å·²ç»å¸ç©ºè§æƒ¯äº†ã€‚ å‚æ•° `i` ä¼šè¦†ç›– `for` å¾ªç¯é‡Œçš„ iï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬èµ·äº†åŒæ ·çš„åå­—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ€ä¹ˆæ”¹ `for` å¾ªç¯ä½“é‡Œçš„ä»£ç ã€‚\n\n### 2.5 let å£°æ˜\n\n> ç°åœ¨ä½ å·²ç»çŸ¥é“äº† `var` å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè¿™æ°å¥½è¯´æ˜äº†ä¸ºä»€ä¹ˆç”¨ `let` è¯­å¥æ¥å£°æ˜å˜é‡ã€‚ é™¤äº†åå­—ä¸åŒå¤–ï¼Œ let ä¸ `var` çš„å†™æ³•ä¸€è‡´ã€‚\n\n```typescript\nlet hello = \"Hello!\";\n```\n\n> ä¸»è¦çš„åŒºåˆ«ä¸åœ¨è¯­æ³•ä¸Šï¼Œè€Œæ˜¯è¯­ä¹‰ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šæ·±å…¥ç ”ç©¶ã€‚\n\n### 2.6 å—ä½œç”¨åŸŸ\n\n> å½“ç”¨ `let` å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå®ƒä½¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸæˆ–å—ä½œç”¨åŸŸã€‚ ä¸åŒäºä½¿ç”¨ `var` å£°æ˜çš„å˜é‡é‚£æ ·å¯ä»¥åœ¨åŒ…å«å®ƒä»¬çš„å‡½æ•°å¤–è®¿é—®ï¼Œå—ä½œç”¨åŸŸå˜é‡åœ¨åŒ…å«å®ƒä»¬çš„å—æˆ– `for` å¾ªç¯ä¹‹å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚\n\n```typescript\nfunction f(input: boolean) {\n  let a = 100;\n  if (input) {\n    // Still okay to reference 'a'\n    let b = a + 1;\n    return b;\n  }\n\n  // Error: 'b' doesn't exist here\n  return b;\n}\n```\n\n> è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†`2`ä¸ªå˜é‡ `a` å’Œ `b` ã€‚ `a` çš„ä½œç”¨åŸŸæ˜¯ `f` å‡½æ•°ä½“å†…ï¼Œè€Œ `b` çš„ä½œç”¨åŸŸæ˜¯ `if` è¯­å¥å—é‡Œã€‚\n> åœ¨ `catch` è¯­å¥é‡Œå£°æ˜çš„å˜é‡ä¹Ÿå…·æœ‰åŒæ ·çš„ä½œç”¨åŸŸè§„åˆ™ã€‚\n\n```typescript\ntry {\n  throw \"oh no!\";\n} catch (e) {\n  console.log(\"Oh well.\");\n}\n\n// Error: 'e' doesn't exist here\nconsole.log(e);\n```\n\n> æ‹¥æœ‰å—çº§ä½œç”¨åŸŸçš„å˜é‡çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸èƒ½åœ¨è¢«å£°æ˜ä¹‹å‰è¯»æˆ–å†™ã€‚ è™½ç„¶è¿™äº›å˜é‡å§‹ç»ˆâ€œå­˜åœ¨â€äºå®ƒä»¬çš„ä½œç”¨åŸŸé‡Œï¼Œä½†åœ¨ç›´åˆ°å£°æ˜å®ƒçš„ä»£ç ä¹‹å‰çš„åŒºåŸŸéƒ½å±äº æš‚æ—¶æ€§æ­»åŒºã€‚ å®ƒåªæ˜¯ç”¨æ¥è¯´æ˜æˆ‘ä»¬ä¸èƒ½åœ¨ `let` è¯­å¥ä¹‹å‰è®¿é—®å®ƒä»¬ï¼Œå¹¸è¿çš„æ˜¯ `TypeScript` å¯ä»¥å‘Šè¯‰æˆ‘ä»¬è¿™äº›ä¿¡æ¯ã€‚\n\n```typescript\na++; // illegal to use 'a' before it's declared;\nlet a;\n```\n\n> æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨ä¸€ä¸ªæ‹¥æœ‰å—ä½œç”¨åŸŸå˜é‡è¢«å£°æ˜å‰è·å–å®ƒã€‚ åªæ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨å˜é‡å£°æ˜å‰å»è°ƒç”¨é‚£ä¸ªå‡½æ•°ã€‚ å¦‚æœç”Ÿæˆä»£ç ç›®æ ‡ä¸º `ES2015`ï¼Œç°ä»£çš„è¿è¡Œæ—¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼›ç„¶è€Œï¼Œç°ä»Š `TypeScript` æ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚\n\n```typescript\nfunction foo() {\n  // okay to capture 'a'\n  return a;\n}\n\n// ä¸èƒ½åœ¨'a'è¢«å£°æ˜å‰è°ƒç”¨'foo'\n// è¿è¡Œæ—¶åº”è¯¥æŠ›å‡ºé”™è¯¯\nfoo();\n\nlet a;\n```\n\n> å…³äºæš‚æ—¶æ€§æ­»åŒºçš„æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹è¿™é‡Œ [Mozilla Developer Network.](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let)\n\n### 2.7 é‡å®šä¹‰åŠå±è”½\n\n> æˆ‘ä»¬æè¿‡ä½¿ç”¨ `var` å£°æ˜æ—¶ï¼Œå®ƒä¸åœ¨ä¹ä½ å£°æ˜å¤šå°‘æ¬¡ï¼›ä½ åªä¼šå¾—åˆ° `1` ä¸ªã€‚\n\n```typescript\nfunction f(x) {\n  var x;\n  var x;\n  if (true) {\n    var x;\n  }\n}\n```\n\n> åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæ‰€æœ‰ `x` çš„å£°æ˜å®é™…ä¸Šéƒ½å¼•ç”¨ä¸€ä¸ªç›¸åŒçš„ `x`ï¼Œå¹¶ä¸”è¿™æ˜¯å®Œå…¨æœ‰æ•ˆçš„ä»£ç ã€‚ è¿™ç»å¸¸ä¼šæˆä¸º`bug` çš„æ¥æºã€‚ å¥½çš„æ˜¯ï¼Œ `let` å£°æ˜å°±ä¸ä¼šè¿™ä¹ˆå®½æ¾äº†ã€‚\n\n```typescript\nlet x = 10;\nlet x = 20; // é”™è¯¯ï¼Œä¸èƒ½åœ¨1ä¸ªä½œç”¨åŸŸé‡Œå¤šæ¬¡å£°æ˜`x\n```\n\n> å¹¶ä¸æ˜¯è¦æ±‚ä¸¤ä¸ªå‡æ˜¯å—çº§ä½œç”¨åŸŸçš„å£°æ˜ `TypeScript` æ‰ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯çš„è­¦å‘Šã€‚\n\n```typescript\nfunction f(x) {\n  let x = 100; // error: interferes with parameter declaration\n}\n\nfunction g() {\n  let x = 100;\n  var x = 100; // error: can't have both declarations of 'x'\n}\n```\n\n> å¹¶ä¸æ˜¯è¯´å—çº§ä½œç”¨åŸŸå˜é‡ä¸èƒ½ç”¨å‡½æ•°ä½œç”¨åŸŸå˜é‡æ¥å£°æ˜ã€‚ è€Œæ˜¯å—çº§ä½œç”¨åŸŸå˜é‡éœ€è¦åœ¨æ˜æ˜¾ä¸åŒçš„å—é‡Œå£°æ˜ã€‚\n\n```typescript\nfunction f(condition, x) {\n  if (condition) {\n    let x = 100;\n    return x;\n  }\n  return x;\n}\n\nf(false, 0); // returns 0\nf(true, 0); // returns 100\n```\n\n> åœ¨ä¸€ä¸ªåµŒå¥—ä½œç”¨åŸŸé‡Œå¼•å…¥ä¸€ä¸ªæ–°åå­—çš„è¡Œä¸ºç§°åšå±è”½ã€‚ å®ƒæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå®ƒå¯èƒ½ä¼šä¸å°å¿ƒåœ°å¼•å…¥æ–°é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šè§£å†³ä¸€äº›é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨ç”¨ `let` é‡å†™ä¹‹å‰çš„ `sumMatrix` å‡½æ•°ã€‚\n\n```typescript\nfunction sumMatrix(matrix: number[][]) {\n  let sum = 0;\n  for (let i = 0; i < matrix.length; i++) {\n    var currentRow = matrix[i];\n    for (let i = 0; i < currentRow.length; i++) {\n      sum += currentRow[i];\n    }\n  }\n  return sum;\n}\n```\n\n> è¿™ä¸ªç‰ˆæœ¬çš„å¾ªç¯èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œå› ä¸ºå†…å±‚å¾ªç¯çš„ i å¯ä»¥å±è”½æ‰å¤–å±‚å¾ªç¯çš„ `i`ã€‚\n> é€šå¸¸æ¥è®²åº”è¯¥é¿å…ä½¿ç”¨å±è”½ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å†™å‡ºæ¸…æ™°çš„ä»£ç ã€‚ åŒæ—¶ä¹Ÿæœ‰äº›åœºæ™¯é€‚åˆåˆ©ç”¨å®ƒï¼Œä½ éœ€è¦å¥½å¥½æ‰“ç®—ä¸€ä¸‹ã€‚\n\n### 2.8 å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\n\n> åœ¨æˆ‘ä»¬æœ€åˆè°ˆåŠè·å–ç”¨ `var` å£°æ˜çš„å˜é‡æ—¶ï¼Œæˆ‘ä»¬ç®€ç•¥åœ°æ¢ç©¶äº†ä¸€ä¸‹åœ¨è·å–åˆ°äº†å˜é‡ä¹‹åå®ƒçš„è¡Œä¸ºæ˜¯æ€æ ·çš„ã€‚ ç›´è§‚åœ°è®²ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸæ—¶ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªå˜é‡çš„ ç¯å¢ƒã€‚ å°±ç®—ä½œç”¨åŸŸå†…ä»£ç å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒä¸å…¶æ•è·çš„å˜é‡ä¾ç„¶å­˜åœ¨ã€‚\n\n```typescript\nfunction theCityThatAlwaysSleeps() {\n  let getCity;\n  if (true) {\n    let city = \"Seattle\";\n    getCity = function () {\n      return city;\n    };\n  }\n  return getCity();\n}\n```\n\n> å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ `city` çš„ç¯å¢ƒé‡Œè·å–åˆ°äº† `city` ï¼Œæ‰€ä»¥å°±ç®— if è¯­å¥æ‰§è¡Œç»“æŸåæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å®ƒã€‚\n> å›æƒ³ä¸€ä¸‹å‰é¢ `setTimeout` çš„ä¾‹å­ï¼Œæˆ‘ä»¬æœ€åéœ€è¦ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ¥è·å–æ¯æ¬¡ `for` å¾ªç¯è¿­ä»£é‡Œçš„çŠ¶æ€ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬åšçš„æ˜¯ä¸ºè·å–åˆ°çš„å˜é‡åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒã€‚ è¿™æ ·åšæŒºç—›è‹¦çš„ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œä½ ä¸å¿…åœ¨ `TypeScript` é‡Œè¿™æ ·åšäº†ã€‚\n> å½“ `let` å£°æ˜å‡ºç°åœ¨å¾ªç¯ä½“é‡Œæ—¶æ‹¥æœ‰å®Œå…¨ä¸åŒçš„è¡Œä¸ºã€‚ ä¸ä»…æ˜¯åœ¨å¾ªç¯é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒï¼Œè€Œæ˜¯é’ˆå¯¹ æ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºè¿™æ ·ä¸€ä¸ªæ–°ä½œç”¨åŸŸã€‚ è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶åšçš„äº‹ï¼Œæ‰€ä»¥åœ¨ `setTimeout` ä¾‹å­é‡Œæˆ‘ä»¬ä»…ä½¿ç”¨ `let` å£°æ˜å°±å¯ä»¥äº†ã€‚\n\n```typescript\nfor (let i = 0; i < 10; i++) {\n  setTimeout(function () {\n    console.log(i);\n  }, 100 * i);\n}\n```\n\n> ä¼šè¾“å‡ºä¸é¢„æ–™ä¸€è‡´çš„ç»“æœï¼š\n\n```typescript\n0;\n1;\n2;\n3;\n4;\n5;\n6;\n7;\n8;\n9;\n```\n\n### 2.9 const å£°æ˜\n\n> `const` å£°æ˜æ˜¯å£°æ˜å˜é‡çš„å¦ä¸€ç§æ–¹å¼ã€‚\n\n```typescript\nconst numLivesForCat = 9;\n```\n\n> å®ƒä»¬ä¸ `let` å£°æ˜ç›¸ä¼¼ï¼Œä½†æ˜¯å°±åƒå®ƒçš„åå­—æ‰€è¡¨è¾¾çš„ï¼Œå®ƒä»¬è¢«èµ‹å€¼åä¸èƒ½å†æ”¹å˜ã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒä»¬æ‹¥æœ‰ä¸ `let` ç›¸åŒçš„ä½œç”¨åŸŸè§„åˆ™ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å®ƒä»¬é‡æ–°èµ‹å€¼ã€‚\n> è¿™å¾ˆå¥½ç†è§£ï¼Œå®ƒä»¬å¼•ç”¨çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚\n\n```typescript\nconst numLivesForCat = 9;\nconst kitty = {\n  name: \"Aurora\",\n  numLives: numLivesForCat\n};\n\n// Error\nkitty = {\n  name: \"Danielle\",\n  numLives: numLivesForCat\n};\n\n// all \"okay\"\nkitty.name = \"Rory\";\nkitty.name = \"Kitty\";\nkitty.name = \"Cat\";\nkitty.numLives--;\n```\n\n> é™¤éä½ ä½¿ç”¨ç‰¹æ®Šçš„æ–¹æ³•å»é¿å…ï¼Œå®é™…ä¸Š `const` å˜é‡çš„å†…éƒ¨çŠ¶æ€æ˜¯å¯ä¿®æ”¹çš„ã€‚ å¹¸è¿çš„æ˜¯ï¼Œ`TypeScript` å…è®¸ä½ å°†å¯¹è±¡çš„æˆå‘˜è®¾ç½®æˆåªè¯»çš„ã€‚ æ¥å£ä¸€ç« æœ‰è¯¦ç»†è¯´æ˜ã€‚\n\n### 2.10 let vs. const\n\n> ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ç§ä½œç”¨åŸŸç›¸ä¼¼çš„å£°æ˜æ–¹å¼ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šé—®åˆ°åº•åº”è¯¥ä½¿ç”¨å“ªä¸ªã€‚ ä¸å¤§å¤šæ•°æ³›æ³›çš„é—®é¢˜ä¸€æ ·ï¼Œç­”æ¡ˆæ˜¯ï¼šä¾æƒ…å†µè€Œå®šã€‚\n> ä½¿ç”¨æœ€å°ç‰¹æƒåŸåˆ™ï¼Œæ‰€æœ‰å˜é‡é™¤äº†ä½ è®¡åˆ’å»ä¿®æ”¹çš„éƒ½åº”è¯¥ä½¿ç”¨ `const`ã€‚ åŸºæœ¬åŸåˆ™å°±æ˜¯å¦‚æœä¸€ä¸ªå˜é‡ä¸éœ€è¦å¯¹å®ƒå†™å…¥ï¼Œé‚£ä¹ˆå…¶å®ƒä½¿ç”¨è¿™äº›ä»£ç çš„äººä¹Ÿä¸èƒ½å¤Ÿå†™å…¥å®ƒä»¬ï¼Œå¹¶ä¸”è¦æ€è€ƒä¸ºä»€ä¹ˆä¼šéœ€è¦å¯¹è¿™äº›å˜é‡é‡æ–°èµ‹å€¼ã€‚ ä½¿ç”¨ `const` ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„æ¨æµ‹æ•°æ®çš„æµåŠ¨ã€‚\n> è·Ÿæ®ä½ çš„è‡ªå·±åˆ¤æ–­ï¼Œå¦‚æœåˆé€‚çš„è¯ï¼Œä¸å›¢é˜Ÿæˆå‘˜å•†è®®ä¸€ä¸‹ã€‚\n> è¿™ä¸ªæ‰‹å†Œå¤§éƒ¨åˆ†åœ°æ–¹éƒ½ä½¿ç”¨äº† `let` å£°æ˜ã€‚\n\n### 2.11 è§£æ„\n\n> `Another TypeScript` å·²ç»å¯ä»¥è§£æå…¶å®ƒ `ECMAScript 2015` ç‰¹æ€§äº†ã€‚ å®Œæ•´åˆ—è¡¨è¯·å‚è§ [the article on the Mozilla Developer Network](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)ã€‚ æœ¬ç« ï¼Œæˆ‘ä»¬å°†ç»™å‡ºä¸€ä¸ªç®€çŸ­çš„æ¦‚è¿°ã€‚\n\n#### 2.11.1 è§£æ„æ•°ç»„\n\n> æœ€ç®€å•çš„è§£æ„è«è¿‡äºæ•°ç»„çš„è§£æ„èµ‹å€¼äº†ï¼š\n\n```typescript\nlet input = [1, 2];\nlet [first, second] = input;\nconsole.log(first); // outputs 1\nconsole.log(second); // outputs 2\n```\n\n> è¿™åˆ›å»ºäº† `2` ä¸ªå‘½åå˜é‡ `first` å’Œ `second`ã€‚ ç›¸å½“äºä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ›´ä¸ºæ–¹ä¾¿ï¼š\n\n```typescript\nfirst = input[0];\nsecond = input[1];\n```\n\n> è§£æ„ä½œç”¨äºå·²å£°æ˜çš„å˜é‡ä¼šæ›´å¥½ï¼š\n\n```typescript\n// swap variables\n[first, second] = [second, first];\n```\n\n> ä½œç”¨äºå‡½æ•°å‚æ•°ï¼š\n\n```typescript\nfunction f([first, second]: [number, number]) {\n  console.log(first);\n  console.log(second);\n}\nf(input);\n```\n\n> ä½ å¯ä»¥åœ¨æ•°ç»„é‡Œä½¿ç”¨ `...` è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š\n\n```typescript\nlet [first, ...rest] = [1, 2, 3, 4];\nconsole.log(first); // outputs 1\nconsole.log(rest); // outputs [ 2, 3, 4 ]\n```\n\n> å½“ç„¶ï¼Œç”±äºæ˜¯ `JavaScript`, ä½ å¯ä»¥å¿½ç•¥ä½ ä¸å…³å¿ƒçš„å°¾éšå…ƒç´ ï¼š\n\n```typescript\nlet [first] = [1, 2, 3, 4];\nconsole.log(first); // outputs 1\n```\n\n> æˆ–å…¶å®ƒå…ƒç´ ï¼š\n\n```typescript\nlet [, second, , fourth] = [1, 2, 3, 4];\n```\n\n#### 2.11.2 å¯¹è±¡è§£æ„\n\n> ä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡ï¼š\n\n```typescript\nlet o = {\n  a: \"foo\",\n  b: 12,\n  c: \"bar\"\n};\nlet { a, b } = o;\n```\n\n> è¿™é€šè¿‡ `o.a and o.b` åˆ›å»ºäº† `a` å’Œ `b` ã€‚ æ³¨æ„ï¼Œå¦‚æœä½ ä¸éœ€è¦ `c` ä½ å¯ä»¥å¿½ç•¥å®ƒã€‚\n> å°±åƒæ•°ç»„è§£æ„ï¼Œä½ å¯ä»¥ç”¨æ²¡æœ‰å£°æ˜çš„èµ‹å€¼ï¼š\n\n```typescript\n({ a, b } = { a: \"baz\", b: 101 });\n```\n\n> æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ‹¬å·å°†å®ƒæ‹¬èµ·æ¥ï¼Œå› ä¸º `Javascript` é€šå¸¸ä¼šå°†ä»¥ `{` èµ·å§‹çš„è¯­å¥è§£æä¸ºä¸€ä¸ªå—ã€‚\n> ä½ å¯ä»¥åœ¨å¯¹è±¡é‡Œä½¿ç”¨ `...` è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š\n\n```typescript\nlet { a, ...passthrough } = o;\nlet total = passthrough.b + passthrough.c.length;\n```\n\n#### 2.11.3 å±æ€§é‡å‘½å\n\n> ä½ ä¹Ÿå¯ä»¥ç»™å±æ€§ä»¥ä¸åŒçš„åå­—ï¼š\n\n```typescript\nlet { a: newName1, b: newName2 } = o;\n```\n\n> è¿™é‡Œçš„è¯­æ³•å¼€å§‹å˜å¾—æ··ä¹±ã€‚ ä½ å¯ä»¥å°† `a: newName1` è¯»åš \"`a` ä½œä¸º `newName1`\"ã€‚ æ–¹å‘æ˜¯ä»å·¦åˆ°å³ï¼Œå¥½åƒä½ å†™æˆäº†ä»¥ä¸‹æ ·å­ï¼š\n\n```typescript\nlet newName1 = o.a;\nlet newName2 = o.b;\n```\n\n> ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œè¿™é‡Œçš„å†’å·ä¸æ˜¯æŒ‡ç¤ºç±»å‹çš„ã€‚ å¦‚æœä½ æƒ³æŒ‡å®šå®ƒçš„ç±»å‹ï¼Œ ä»ç„¶éœ€è¦åœ¨å…¶åå†™ä¸Šå®Œæ•´çš„æ¨¡å¼ã€‚\n\n```typescript\nlet { a, b }: { a: string; b: number } = o;\n```\n\n#### 2.11.4 é»˜è®¤å€¼\n\n> é»˜è®¤å€¼å¯ä»¥è®©ä½ åœ¨å±æ€§ä¸º `undefined` æ—¶ä½¿ç”¨ç¼ºçœå€¼ï¼š\n\n```typescript\nfunction keepWholeObject(wholeObject: { a: string; b?: number }) {\n  let { a, b = 1001 } = wholeObject;\n}\n```\n\n> ç°åœ¨ï¼Œå³ä½¿ `b` ä¸º `undefined` ï¼Œ `keepWholeObject` å‡½æ•°çš„å˜é‡ `wholeObject` çš„å±æ€§ `a` å’Œ `b` éƒ½ä¼šæœ‰å€¼ã€‚\n\n#### 2.11.5 å‡½æ•°å£°æ˜\n\n> è§£æ„ä¹Ÿèƒ½ç”¨äºå‡½æ•°å£°æ˜ã€‚ çœ‹ä»¥ä¸‹ç®€å•çš„æƒ…å†µï¼š\n\n```typescript\ntype C = { a: string; b?: number };\nfunction f({ a, b }: C): void {\n  // ...\n}\n```\n\n> ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æ›´å¤šçš„æ˜¯æŒ‡å®šé»˜è®¤å€¼ï¼Œè§£æ„é»˜è®¤å€¼æœ‰äº›æ£˜æ‰‹ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦åœ¨é»˜è®¤å€¼ä¹‹å‰è®¾ç½®å…¶æ ¼å¼ã€‚\n\n```typescript\nfunction f({ a = \"\", b = 0 } = {}): void {\n  // ...\n}\nf();\n```\n\n> ä¸Šé¢çš„ä»£ç æ˜¯ä¸€ä¸ªç±»å‹æ¨æ–­çš„ä¾‹å­ï¼Œå°†åœ¨æœ¬æ‰‹å†Œåæ–‡ä»‹ç»ã€‚\n> å…¶æ¬¡ï¼Œä½ éœ€è¦çŸ¥é“åœ¨è§£æ„å±æ€§ä¸Šç»™äºˆä¸€ä¸ªé»˜è®¤æˆ–å¯é€‰çš„å±æ€§ç”¨æ¥æ›¿æ¢ä¸»åˆå§‹åŒ–åˆ—è¡¨ã€‚ è¦çŸ¥é“ `C` çš„å®šä¹‰æœ‰ä¸€ä¸ª `b` å¯é€‰å±æ€§ï¼š\n\n```typescript\nfunction f({ a, b = 0 } = { a: \"\" }): void {\n  // ...\n}\nf({ a: \"yes\" }); // ok, default b = 0\nf(); // ok, default to {a: \"\"}, which then defaults b = 0\nf({}); // error, 'a' is required if you supply an argument\n```\n\n> è¦å°å¿ƒä½¿ç”¨è§£æ„ã€‚ ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå°±ç®—æ˜¯æœ€ç®€å•çš„è§£æ„è¡¨è¾¾å¼ä¹Ÿæ˜¯éš¾ä»¥ç†è§£çš„ã€‚ å°¤å…¶å½“å­˜åœ¨æ·±å±‚åµŒå¥—è§£æ„çš„æ—¶å€™ï¼Œå°±ç®—è¿™æ—¶æ²¡æœ‰å †å åœ¨ä¸€èµ·çš„é‡å‘½åï¼Œé»˜è®¤å€¼å’Œç±»å‹æ³¨è§£ï¼Œä¹Ÿæ˜¯ä»¤äººéš¾ä»¥ç†è§£çš„ã€‚ è§£æ„è¡¨è¾¾å¼è¦å°½é‡ä¿æŒå°è€Œç®€å•ã€‚ ä½ è‡ªå·±ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è§£æ„å°†ä¼šç”Ÿæˆçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚\n\n#### 2.11.6 å±•å¼€\n\n> å±•å¼€æ“ä½œç¬¦æ­£ä¸è§£æ„ç›¸åã€‚ å®ƒå…è®¸ä½ å°†ä¸€ä¸ªæ•°ç»„å±•å¼€ä¸ºå¦ä¸€ä¸ªæ•°ç»„ï¼Œæˆ–å°†ä¸€ä¸ªå¯¹è±¡å±•å¼€ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š\n\n```typescript\nlet first = [1, 2];\nlet second = [3, 4];\nlet bothPlus = [0, ...first, ...second, 5];\n```\n\n> è¿™ä¼šä»¤ `bothPlus` çš„å€¼ä¸º `[0, 1, 2, 3, 4, 5]`ã€‚ å±•å¼€æ“ä½œåˆ›å»ºäº† `first` å’Œ `second` çš„ä¸€ä»½æµ…æ‹·è´ã€‚ å®ƒä»¬ä¸ä¼šè¢«å±•å¼€æ“ä½œæ‰€æ”¹å˜ã€‚\n> ä½ è¿˜å¯ä»¥å±•å¼€å¯¹è±¡ï¼š\n\n```typescript\nlet defaults = { food: \"spicy\", price: \"$$\", ambiance: \"noisy\" };\nlet search = { ...defaults, food: \"rich\" };\n```\n\n> `search` çš„å€¼ä¸º `{ food: \"rich\", price: \"$$\", ambiance: \"noisy\" }`ã€‚ å¯¹è±¡çš„å±•å¼€æ¯”æ•°ç»„çš„å±•å¼€è¦å¤æ‚çš„å¤šã€‚ åƒæ•°ç»„å±•å¼€ä¸€æ ·ï¼Œå®ƒæ˜¯ä»å·¦è‡³å³è¿›è¡Œå¤„ç†ï¼Œä½†ç»“æœä»ä¸ºå¯¹è±¡ã€‚ è¿™å°±æ„å‘³ç€å‡ºç°åœ¨å±•å¼€å¯¹è±¡åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨ç»“å°¾å¤„è¿›è¡Œå±•å¼€çš„è¯ï¼š\n\n```typescript\nlet defaults = { food: \"spicy\", price: \"$$\", ambiance: \"noisy\" };\nlet search = { food: \"rich\", ...defaults };\n```\n\n> é‚£ä¹ˆï¼Œ`defaults` é‡Œçš„ `food` å±æ€§ä¼šé‡å†™ `food: \"rich\"`ï¼Œåœ¨è¿™é‡Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚\n> å¯¹è±¡å±•å¼€è¿˜æœ‰å…¶å®ƒä¸€äº›æ„æƒ³ä¸åˆ°çš„é™åˆ¶ã€‚ é¦–å…ˆï¼Œå®ƒä»…åŒ…å«å¯¹è±¡ [è‡ªèº«çš„å¯æšä¸¾å±æ€§](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)ã€‚ å¤§ä½“ä¸Šæ˜¯è¯´å½“ä½ å±•å¼€ä¸€ä¸ªå¯¹è±¡å®ä¾‹æ—¶ï¼Œä½ ä¼šä¸¢å¤±å…¶æ–¹æ³•ï¼š\n\n```typescript\nclass C {\n  p = 12;\n  m() {}\n}\nlet c = new C();\nlet clone = { ...c };\nclone.p; // ok\nclone.m(); // error!\n```\n\n> å…¶æ¬¡ï¼Œ`TypeScript` ç¼–è¯‘å™¨ä¸å…è®¸å±•å¼€æ³›å‹å‡½æ•°ä¸Šçš„ç±»å‹å‚æ•°ã€‚ è¿™ä¸ªç‰¹æ€§ä¼šåœ¨ `TypeScript` çš„æœªæ¥ç‰ˆæœ¬ä¸­è€ƒè™‘å®ç°ã€‚\n\n## ä¸‰ã€æ¥å£\n\n### 3.1 å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\n\n```typescript\ninterface LabelledValue {\n  label: string;\n}\nfunction printLabel(labelledObj: LabelledValue) {\n  console.log(labelledObj.label);\n}\nlet myObj = { size: 10, label: \"size 10 Object\" };\nprintLabel(myObj);\n```\n\n### 3.2 å¯é€‰å±æ€§\n\n```typescript\ninterface SquareConfig {\n  color?: string;\n  width?: number;\n}\nfunction createConfig(config: SquareConfig): { color: string; area: number } {\n  let newSquare = { color: \"white\", area: 100 };\n  if (config.color) {\n    newSquare.color = config.color;\n  }\n  if (config.width) {\n    newSquare.area = config.width * config.width;\n  }\n  return newSquare;\n}\nlet mySquare = createConfig({ color: \"black\", width: 20 });\nconsole.log(mySquare);\n```\n\n### 3.3 åªè¯»å±æ€§\n\n```typescript\ninterface Point {\n  readonly x: number;\n  readonly y: number;\n}\nlet p1: Point = { x: 10, y: 20 };\np1.x = 5; // error! å› ä¸ºå±æ€§æ˜¯åªè¯»çš„\n```\n\n### 3.4 é¢å¤–çš„å±æ€§æ£€æŸ¥\n\n> é—®é¢˜ï¼šå°†\" _å¯é€‰å±æ€§_ \"ä¸\" `option bags` \"æ¨¡å¼ç›¸ç»“åˆè€Œå¼•å‘\n\n```typescript\ninterface SquareConfig {\n  color?: string;\n  width?: number;\n}\nfunction createConfig(config: SquareConfig): { color: string; area: number } {\n  let newSquare = { color: \"white\", area: 100 };\n  if (config.color) {\n    newSquare.color = config.color;\n  }\n  if (config.width) {\n    newSquare.area = config.width * config.width;\n  }\n  return newSquare;\n}\n```\n\n> `let mySquare = createConfig({ colour: \"red\", width: 100 }); //æŠ¥é”™`\n\n- è§£å†³æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨ç±»å‹æ–­è¨€\n\n```typescript\nlet mySquare = createConfig({ width: 100, opacity: 0.5 } as SquareConfig);\n```\n\n- è§£å†³æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å(æœ€ä½³æ–¹æ¡ˆ)\n\n```typescript\ninterface _SquareConfig {\n  color?: string;\n  width?: number;\n  [propName: string]: any;\n}\n```\n\n- è§£å†³æ–¹æ¡ˆä¸‰ï¼šå˜é‡èµ‹å€¼\n\n### 3.5 å‡½æ•°ç±»å‹\n\n#### 3.5.1 å‡½æ•°ç±»å‹\n\n```typescript\ninterface SearchFunc {\n  (source: string, subString: string): boolean;\n}\nlet mySearch: SearchFunc;\nmySearch = function (source: string, subString: string) {\n  let result = source.search(subString);\n  return result > -1;\n};\n```\n\n#### 3.5.2 å‡½æ•°ç±»å‹\n\n```typescript\nlet add: (baseValue: number, increment: number) => number = (x, y) => x + y;\n\nlet add2 = (x: number, y: number): number => x + y;\n\nlet buildNameFun: (fname: string, ...rest: Array<string>) => string = (firstName: string, ...restOfName: Array<string>) => `${firstName}, ${restOfName.join(\" \")}`;\n\nlet fn = (a: number, b: number): number => a + b;\n```\n\n#### 3.5.3 å‡½æ•°ç±»å‹\n\n```typescript\ninterface func {\n  (x: string, y: string): boolean;\n}\nlet func: func = (x: string, y: string) => {\n  return x.search(y) > -1;\n};\n```\n\n### 3.6 å¯ç´¢å¼•ç±»å‹\n\n- ä¾‹å¦‚ï¼š`a[10]` æˆ– `ageMap[\"daniel\"]`\n- å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª ç´¢å¼•ç­¾åï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹\n\n```typescript\ninterface StringArray {\n  [index: number]: string;\n}\nlet myArray: StringArray;\nmyArray = [\"Bob\", \"Fred\"];\nlet myStr: string = myArray[0];\nconsole.log(myStr);\n```\n\n> `Ts` æ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸² å’Œ æ•°å­—ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚\n\n### 3.7 ç±»ç±»å‹\n\n> æ¥å£æè¿°äº†ç±»çš„å…¬å…±éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç±»çš„å…¬æœ‰å’Œç§æœ‰ä¸¤éƒ¨åˆ†ã€‚å®ƒä¸ä¼šå¸®ä½ æ£€æŸ¥ç±»æ˜¯å¦å…·æœ‰æŸäº›ç§æœ‰æˆå‘˜\n\n```typescript\ninterface ClockInterface {\n  currentTime: Date;\n  setTime(d: Date); // åœ¨æ¥å£ä¸­æè¿°çš„æ–¹æ³•\n}\n\nclass Clock implements ClockInterface {\n  currentTime: Date;\n  setTime(d: Date) {\n    // åœ¨ç±»ä¸­çš„å…·ä½“å®ç°\n    this.currentTime = d;\n  }\n  constructor(h: number, m: number) {}\n}\n```\n\n> å½“æ“ä½œç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»æ˜¯å…·æœ‰ä¸¤ä¸ªç±»å‹çš„ï¼š_é™æ€éƒ¨åˆ†çš„ç±»å‹_ å’Œ _å®ä¾‹çš„ç±»å‹_ã€‚\n> å½“ç”¨æ„é€ å™¨ç­¾åå»å®šä¹‰ä¸€ä¸ªæ¥å£å¹¶è¯•å›¾å®šä¹‰ä¸€ä¸ªç±»å»å®ç°è¿™ä¸ªæ¥å£æ—¶ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚\n> å› ä¸ºå½“ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£æ—¶ï¼Œåªå¯¹å…¶å®ä¾‹éƒ¨åˆ†è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚`constructor` å­˜åœ¨äºç±»çš„é™æ€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸åœ¨æ£€æŸ¥çš„èŒƒå›´å†…ã€‚\n\n- å› æ­¤åº”å½“ç›´æ¥æ“ä½œ _ç±»çš„é™æ€éƒ¨åˆ†_\n\n```typescript\ninterface err_ClockConstructor {\n  new (hour: number, minute: number);\n}\nclass err_Clock implements err_ClockConstructor {\n  currentTime: Date;\n  constructor(h: number, m: number) {}\n}\n```\n\n- ä¸‹é¢æ˜¯å®ç°å¯¹ _é™æ€ç±»å‹_ çš„æ£€æŸ¥å·¥ä½œ\n\n> å› ä¸º `createClock` çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `ClockConstructor` ç±»å‹ï¼Œåœ¨ `createClock(AnalogClock, 7, 32)` é‡Œï¼Œä¼šæ£€æŸ¥ `AnalogClock` æ˜¯å¦ç¬¦åˆæ„é€ å‡½æ•°ç­¾å\n\n```typescript\ninterface ClockConstructor {\n  new (hour: number, minute: number): ClockInterface;\n}\n\ninterface ClockInterface {\n  tick();\n}\n\nfunction createClock(ctor: ClockConstructor, hour: number, minute: number): ClockInterface {\n  return new ctor(hour, minute);\n}\n\nclass DigitalClock implements ClockInterface {\n  constructor(h: number, m: number) {}\n\n  tick() {\n    console.log(\"beep beep\");\n  }\n}\n\nclass AnalogClock implements ClockInterface {\n  constructor(h: number, m: number) {}\n\n  tick() {\n    console.log(\"tick tick\");\n  }\n}\n\nlet digital = createClock(DigitalClock, 12, 17);\nlet analog = createClock(AnalogClock, 7, 32);\nconsole.log(digital);\nconsole.log(analog);\n```\n\n### 3.8 æ¥å£ç»§æ‰¿\n\n- å’Œç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç›¸äº’ç»§æ‰¿ã€‚å¯ä»¥çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—é‡Œã€‚\n\n```typescript\ninterface Shape {\n  color: string;\n}\n\ninterface Square extends Shape {\n  sideLength: number;\n}\n\nlet square = <Square>{};\nsquare.color = \"blue\";\nsquare.sideLength = 10;\n```\n\n- ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œåˆ›å»ºå‡ºå¤šä¸ªæ¥å£çš„åˆæˆæ¥å£\n\n```typescript\ninterface Shape {\n  color: string;\n}\n\ninterface PenStroke {\n  penWidth: number;\n}\n\ninterface Square extends Shape, PenStroke {\n  sideLength: number;\n}\n\nlet square = <Square>{};\nsquare.color = \"blue\";\nsquare.sideLength = 10;\nsquare.penWidth = 5.0;\n```\n\n- ç›®çš„: `=>` çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­\n\n```typescript\ninterface Lamp {\n  lampOn(): void;\n\n  lampOff(): void;\n}\n\ninterface wx {\n  wxNumber: number;\n\n  showWxNumber(): string;\n}\n\ninterface Photo extends Lamp, wx {\n  photo(): string;\n}\n\nclass HuaWeiPhone implements Photo {\n  public wxNumber: number;\n\n  photo(): string {\n    return \"åä¸ºæ‰‹æœº\";\n  }\n\n  lampOn(): void {}\n\n  lampOff(): void {}\n  constructor(wxNumber: number) {\n    this.wxNumber = wxNumber;\n  }\n\n  showWxNumber(): string {\n    return \"æˆ‘çš„å¾®ä¿¡å·ï¼š123\";\n  }\n}\nlet huaWeiPhone = new HuaWeiPhone(12345678910);\nconsole.log(huaWeiPhone.showWxNumber());\nconsole.log(huaWeiPhone.photo());\n```\n\n### 3.9 æ··åˆç±»å‹\n\n> ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åšä¸ºå‡½æ•°å’Œå¯¹è±¡ä½¿ç”¨ï¼Œå¹¶å¸¦æœ‰é¢å¤–çš„å±æ€§\n\n```typescript\ninterface Counter {\n  (start: number): string;\n\n  interval: number;\n\n  reset(): void;\n}\n\nfunction getCounter(): Counter {\n  let counter = <Counter>function (start: number) {\n    // return start + 'string';\n  };\n  counter.interval = 123;\n  counter.reset = function () {};\n  return counter;\n}\n\nlet c = getCounter();\nc(10);\nc.interval = 5.0;\nc.reset();\n```\n\n### 3.10 æ¥å£ç»§æ‰¿ç±»\n\n1. å½“æ¥å£ç»§æ‰¿äº†ä¸€ä¸ªç±»ç±»å‹æ—¶ï¼Œå®ƒä¼šç»§æ‰¿ç±»çš„æˆå‘˜ä½†ä¸åŒ…æ‹¬å…¶å®ç°ã€‚\n2. å°±å¥½åƒæ¥å£å£°æ˜äº†æ‰€æœ‰ç±»ä¸­å­˜åœ¨çš„æˆå‘˜ï¼Œä½†å¹¶æ²¡æœ‰æä¾›å…·ä½“å®ç°ä¸€æ ·ã€‚\n3. æ¥å£åŒæ ·ä¼šç»§æ‰¿åˆ°ç±»çš„ `private` å’Œ `protected` æˆå‘˜ã€‚\n4. è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢«è¿™ä¸ªç±»æˆ–å…¶å­ç±»æ‰€å®ç°( `implement` )ã€‚\n5. å½“ä½ æœ‰ä¸€ä¸ªåºå¤§çš„ç»§æ‰¿æ¥å£æ—¶è¿™å¾ˆæœ‰ç”¨ï¼Œä½†è¦æŒ‡å‡ºçš„æ˜¯ä½ çš„ä»£ç åªåœ¨å­ç±»æ‹¥æœ‰ç‰¹å®šå±æ€§æ—¶èµ·ä½œç”¨ã€‚è¿™ä¸ªå­ç±»é™¤äº†ç»§æ‰¿è‡³åŸºç±»å¤–ä¸åŸºç±»æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚\n\n```typescript\nclass Control {\n  private state: any;\n}\n\ninterface SelectableControl extends Control {\n  select(): void;\n}\n\nclass Button extends Control implements SelectableControl {\n  select(): void {}\n}\n\nclass TextBox extends Control {\n  select(): void {}\n}\n\n// é”™è¯¯ï¼š\"Image\"ç±»å‹ç¼ºå°‘\"state\"å±æ€§\nclass Image implements SelectableControl {\n  select(): void {}\n}\nclass Location {}\n```\n\n> åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`SelectableControl` åŒ…å«äº† `Control` çš„æ‰€æœ‰æˆå‘˜ã€‚åŒ…æ‹¬ç§æœ‰æˆå‘˜ `state`ã€‚å› ä¸º `state` æ˜¯ç§æœ‰æˆå‘˜ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿæ˜¯ `Control` çš„å­ç±»ä»¬æ‰èƒ½å®ç° `SelectableControl` æ¥å£ï¼Œå› ä¸ºåªæœ‰ `Control` çš„å­ç±»æ‰èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå£°æ˜äº `Control` çš„ç§æœ‰æˆå‘˜ `state`ï¼Œè¿™å¯¹ç§æœ‰æˆå‘˜çš„å…¼å®¹æ€§æ˜¯å¿…éœ€çš„ã€‚\n> åœ¨ `Control` ç±»å†…éƒ¨ï¼Œæ˜¯å…è®¸é€šè¿‡ `SelectableControl` çš„å®ä¾‹æ¥è®¿é—®ç§æœ‰æˆå‘˜ `state` çš„ã€‚å®é™…ä¸Šï¼Œ`SelectableControl` æ¥å£å’Œæ‹¥æœ‰ `select` æ–¹æ³•çš„ `Control` ç±»æ˜¯ä¸€æ ·çš„ã€‚`Button` å’Œ `TextBox` ç±»æ˜¯ `SelectableControl` çš„å­ç±»(å› ä¸ºå®ƒä»¬éƒ½ç»§æ‰¿è‡ª `Control` å¹¶æœ‰ `select` æ–¹æ³•ï¼Œä½† `Image` å’Œ `Location` ç±»å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚)\n\n### 3.11 æ¥å£ç»§æ‰¿æ¥å£\n\n> ç›®çš„: `=>` çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­\n\n```typescript\ninterface Lamp {\n  lampOn(): void;\n  lampOff(): void;\n}\ninterface wx {\n  wxNumber: number;\n  showWxNumber(): string;\n}\n\ninterface Photo extends Lamp, wx {\n  photo(): string;\n}\n\nclass HuaWeiPhone implements Photo {\n  public wxNumber: number;\n  photo(): string {\n    return \"åä¸ºæ‰‹æœº\";\n  }\n  lampOn() {}\n  lampOff() {}\n  constructor(wxNumber: number) {\n    this.wxNumber = wxNumber;\n  }\n  showWxNumber() {\n    return \"æˆ‘çš„å¾®ä¿¡å·æ˜¯ï¼š123\";\n  }\n}\n\nlet huaWeiPhone = new HuaWeiPhone(13100970071);\nconsole.log(huaWeiPhone.showWxNumber());\nconsole.log(huaWeiPhone.photo());\n```\n\n### 3.12 ç±»æ¥å£å®ç°\n\n> æ‰‹æœºç±»æ˜¯ä¸€ä¸ªå¤§ç±»\n> åä¸ºæ˜¯æ‰‹æœºç±»ä¸‹çš„ä¸€ä¸ªç±»\n> åä¸ºæ‰‹æœºæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½ï¼Œç…§ç›¸æœºä¹Ÿæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½\n> å› æ­¤åä¸ºæ‰‹æœºå’Œç…§ç›¸æœºçš„å…¬å…±ç‰¹æ€§å°±æ˜¯æ‹ç…§å’Œé—ªå…‰ç¯\n> æ‰€ä»¥é€šè¿‡å…³é”®å­— `implements` æ¥æ ‡è¯†æå–å‡ºæ¥çš„æ¥å£\n\n```typescript\n// æ‹ç…§\ninterface Photo {\n  photo(): string;\n}\n// é—ªå…‰ç¯\ninterface Lamp {\n  lampOn(): void;\n  lampOff(): void;\n}\n\nclass Phone {}\n\nclass HuaWei extends Phone implements Photo, Lamp {\n  photo(): string {\n    return \"åä¸ºæ‹ç…§\";\n  }\n  lampOn() {}\n  lampOff() {}\n}\n\nclass DigitalCamera implements Photo, Lamp {\n  photo(): string {\n    return \"ç…§ç›¸æœºæ‹ç…§\";\n  }\n  lampOn() {}\n  lampOff() {}\n}\n```\n\n## å››ã€ç±»\n\n### 4.1 åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\n\n```typescript\nclass Gretter {\n  public gretting: string;\n  constructor(message: string) {\n    this.gretting = message;\n  }\n  public greet() {\n    return `Hello, ${this.gretting}`;\n  }\n}\n\nlet gretter: Gretter = new Gretter(\"world!\");\nconsole.log(gretter);\n```\n\n### 4.2 ç»§æ‰¿\n\n```typescript\nclass Animal {\n  name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n  move(distanceInMeters: number = 0) {\n    console.log(`${this.name} moved ${distanceInMeters}m.`);\n  }\n}\n\nclass Snake extends Animal {\n  constructor(name: string) {\n    super(name);\n  }\n  move(distanceInMeters = 5) {\n    console.log(\"Slithering...\");\n    super.move(distanceInMeters);\n  }\n}\n\nclass Horse extends Animal {\n  constructor(name: string) {\n    super(name);\n  }\n  move(distanceInMeters = 45) {\n    console.log(\"Galloping\");\n    super.move(distanceInMeters);\n  }\n}\n\nlet sam = new Snake(\"Sammy the Python\");\nlet tom: Animal = new Horse(\"Tommy the Palomino\");\n\nsam.move();\ntom.move(34);\n```\n\n### 4.3 public å…³é”®å­—\n\n> é»˜è®¤ä¸º `public`\n> åœ¨ `TypeScript` ä¸­,æˆå‘˜éƒ½é»˜è®¤ä¸º `public`\n\n```typescript\nclass Animal_public {\n  public name: string;\n  public constructor(theName: string) {\n    this.name = theName;\n  }\n  public move(distanceInMeters: number) {\n    console.log(`${this.name} moved ${distanceInMeters}m.`);\n  }\n}\n```\n\n### 4.4 private å…³é”®å­—\n\n> ç†è§£ `private`\n>\n> 1. å½“æˆå‘˜è¢«æ ‡è®°æˆ `private` æ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®\n> 2. å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª `private` æˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª `private` æˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚\n\n```typescript\nclass Animal_private {\n  private name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nconst cat = new Animal_private(\"Cat\");\n// cat.name; // é”™è¯¯ï¼š'name'æ˜¯ç§æœ‰çš„\n\nclass Animal_private_1 {\n  private name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nclass Rhino extends Animal_private_1 {\n  constructor() {\n    super(\"Rhino\");\n  }\n}\nclass Employee {\n  private name: string;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nlet animal = new Animal_private_1(\"Goat\");\nlet rhino = new Rhino();\nlet employee = new Employee(\"Bob\");\n\nanimal = rhino;\n// animal = employee; //é”™è¯¯ï¼šAnimalä¸Employeeä¸å…¼å®¹\n```\n\n### 4.5 protected å…³é”®å­—\n\n- ç†è§£ `protected`\n\n> `protected` ä¿®é¥°ç¬¦ä¸ `private` ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼Œ`protected` æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚\n\n```typescript\nclass Person {\n  protected name: string;\n  constructor(name: string) {\n    this.name = name;\n  }\n}\nclass _Employee extends Person {\n  private department: string;\n  constructor(name: string, department: string) {\n    super(name);\n    this.department = department;\n  }\n  public getElevatorPitch() {\n    return `Hello, my name is ${this.name} and I work in ${this.department}`;\n  }\n}\nlet howard = new _Employee(\"Howard\", \"Sales\");\nconsole.log(howard.getElevatorPitch());\n// console.log(howard.name); // é”™è¯¯ï¼Œå› ä¸º name æ— æ³•åœ¨å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®\n```\n\n- æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ `protected`\n\n> è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ã€‚ä½†æ˜¯èƒ½è¢«ç»§æ‰¿ã€‚\n\n```typescript\nclass __Person {\n  protected name: string;\n  protected constructor(theName: string) {\n    this.name = theName;\n  }\n}\n// __Employee èƒ½å¤Ÿç»§æ‰¿ Person\nclass __Employee extends __Person {\n  private department: string;\n  constructor(name: string, department: string) {\n    super(name);\n    this.department = department;\n  }\n  public getElevatorPitch() {\n    return `Hello, my name is ${this.name} and I work in ${this.department}.`;\n  }\n}\nlet __howard = new __Employee(\"Howard\", \"Sales\");\n// let __join = new __Person(\"John\");// é”™è¯¯ï¼š'Person'çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„\n```\n\n### 4.6 readonly ä¿®é¥°ç¬¦\n\n- ä½ å¯ä»¥ä½¿ç”¨ `readonly` å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–\n\n```typescript\nclass Octopus {\n  readonly name: string;\n  readonly numberOfLegs: number = 8;\n  constructor(theName: string) {\n    this.name = theName;\n  }\n}\nlet dad = new Octopus(\"Man with the 8 strong legs\");\n// dad.name = \"Man with the 3-piece suit\";// é”™è¯¯ï¼Œnameæ˜¯åªè¯»çš„\n```\n\n- å‚æ•°å±æ€§\n\n> 1. å‚æ•°å±æ€§å¯ä»¥æ–¹ä¾¿åœ°è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜ã€‚\n> 2. å‚æ•°å±æ€§é€šè¿‡ç»™æ„é€ å‡½æ•°å‚æ•°å‰é¢æ·»åŠ ä¸€ä¸ªè®¿é—®é™å®šç¬¦æ¥å£°æ˜ã€‚\n> 3. ä½¿ç”¨ `private` é™å®šä¸€ä¸ªå‚æ•°å±æ€§ä¼šå£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼›å¯¹äº `public` å’Œ `protected` æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·ã€‚\n\n```typescript\nclass _Octopus {\n  readonly numberOfLegs: number = 9;\n  constructor(readonly name: string) {}\n}\n```\n\n### 4.7 å­˜å–å™¨ get & set\n\n> å­˜å–å™¨ æ”¯æŒ `es5+`ï¼Œä¸æ”¯æŒ `es3`\n\n1. `TypeScript` æ”¯æŒé€šè¿‡ `getters/setters` æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚\n2. æ²¡æœ‰å­˜å–å™¨çš„ä¾‹å­\n\n```typescript\nclass _Employee {\n  fullName: string;\n}\nlet _employee = new _Employee();\n_employee.fullName = \"Bob Smith\";\nif (_employee.fullName) {\n  console.log(_employee.fullName);\n}\n```\n\n3. æ‹¥æœ‰å­˜å–å™¨çš„ä¾‹å­\n\n> 1. æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹å¯†ç ï¼Œæ¥éªŒè¯ä¸€ä¸‹å­˜å–å™¨æ˜¯å¦æ˜¯å·¥ä½œçš„ã€‚å½“å¯†ç ä¸å¯¹æ—¶ï¼Œä¼šæç¤ºæˆ‘ä»¬æ²¡æœ‰æƒé™å»ä¿®æ”¹å‘˜å·¥ã€‚\n> 2. åªå¸¦æœ‰ `get` ä¸å¸¦æœ‰ `set` çš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º `readonly`ã€‚\n> 3. è¿™åœ¨ä»ä»£ç ç”Ÿæˆ `.d.ts` æ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ã€‚\n\n```typescript\nlet passcode = \"secret passcode\";\nclass Employee {\n  private _fullName: string;\n\n  get fullName(): string {\n    return this._fullName;\n  }\n\n  set fullName(newName: string) {\n    if (passcode && passcode === \"secret passcode\") {\n      this._fullName = newName;\n    } else {\n      console.log(\"Error: Unauthorized update of employee!\");\n    }\n  }\n}\nlet employee = new Employee();\nemployee.fullName = \"Bob smith\";\nif (employee.fullName) {\n  console.log(employee.fullName);\n}\n```\n\n### 4.8 é™æ€å±æ€§\n\n> æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Šã€‚\n\n```typescript\nclass Gird {\n  public static origin = { x: 0, y: 0 };\n  public calculateDistanceFromOrigin(point: { x: number; y: number }) {\n    let xDist = point.x - Gird.origin.x;\n    let yDist = point.y - Gird.origin.y;\n    return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale;\n  }\n  public constructor(public scale: number) {}\n}\nconsole.log(Gird.origin.x);\nlet grid1 = new Gird(1.0);\nlet gird2 = new Gird(5.0);\nconsole.log(grid1.calculateDistanceFromOrigin({ x: 10, y: 10 }));\nconsole.log(gird2.calculateDistanceFromOrigin({ x: 10, y: 10 }));\n```\n\n### 4.9 æŠ½è±¡ç±»\n\n1. æŠ½è±¡ç±»ä½œä¸ºå…¶ä»–æ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚\n2. ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚\n3. `abstract` å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•\n\n```typescript\nabstract class Animal {\n  abstract makeSound(): void;\n  move(): void {\n    console.log(\"roaming the earth ...\");\n  }\n}\n```\n\n4. æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚\n5. æŠ½è±¡æ–¹æ³•çš„è¯­æ³•äºæ¥å£æ–¹æ³•ç›¸ä¼¼ï¼ŒäºŒè€…éƒ½æ˜¯å®šä¹‰æ–¹æ³•ç­¾åä½†ä¸åŒ…å«æ–¹æ³•ä½“ã€‚ç„¶è€ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å« `abstract` å…³é”®å­—å¹¶ä¸”å¯ä»¥åŒ…å«è®¿é—®ä¿®é¥°ç¬¦\n\n```typescript\nabstract class Department {\n  constructor(public name: string) {}\n  printName(): void {\n    console.log(`Department name: ${this.name}`);\n  }\n  abstract printMeeting(): void; // å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°\n}\nclass AccountingDepartment extends Department {\n  constructor() {\n    super(\"Accounting and Auditing\");\n  }\n  printMeeting(): void {\n    console.log(\"The Accounting Department meets each Monday at 10am.\");\n  }\n  generateReports(): void {\n    console.log(\"Generating accounting reports...\");\n  }\n}\nlet department: Department; // å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»çš„å¼•ç”¨\n// department = new Departmemnt(); // é”™è¯¯ï¼Œä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹\ndepartment = new AccountingDepartment(); // å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼\ndepartment.printName();\ndepartment.printMeeting();\n// department.generateReports(); // é”™è¯¯ï¼Œæ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨\n```\n\n### 4.10 é«˜çº§æŠ€å·§(æ„é€ å‡½æ•°)\n\n> å½“åœ¨ `TypeScript` é‡Œå£°æ˜äº†ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šå£°æ˜äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆå°±æ˜¯ç±»çš„å®ä¾‹ç±»å‹\n\n```typescript\nclass Greeter {\n  greeting: string;\n  constructor(message: string) {\n    this.greeting = message;\n  }\n  greet() {\n    return \"Hello,\" + this.greeting;\n  }\n}\nlet greeter: Greeter; // =>æ„æ€ï¼šGreeterç±»çš„å®ä¾‹çš„ç±»å‹æ˜¯Greeter\ngreeter = new Greeter(\"world\");\nconsole.log(greeter.greet());\n```\n\n> å¯ä»¥è®¤ä¸ºç±»å…·æœ‰ _å®ä¾‹éƒ¨åˆ†_ ä¸ _é™æ€éƒ¨åˆ†_\n\n```typescript\nclass _Greeter {\n  static standardGreeting = \"Hello, there\";\n  greeting: string;\n  greet() {\n    if (this.greeting) {\n      return \"Hello,\" + this.greeting;\n    } else {\n      return _Greeter.standardGreeting;\n    }\n  }\n}\nlet _greeter: _Greeter;\n_greeter = new _Greeter();\nconsole.log(_greeter.greet());\n```\n\n> æ­¤å¤„åˆ›å»ºäº†ä¸€ä¸ª `greeterMaker` çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¿å­˜äº†è¿™ä¸ª _ç±»_ æˆ–è€…è¯´ä¿å­˜äº† _ç±»æ„é€ å‡½æ•°_ã€‚ç„¶åä½¿ç”¨ `typeof _Greeter`ï¼Œæ„æ€æ˜¯å– `Greeter` ç±»çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ç±»å‹ã€‚æˆ–è€…æ›´ç¡®åˆ‡çš„è¯´ï¼Œ\"å‘Šè¯‰æˆ‘ `Greeter` æ ‡è¯†ç¬¦çš„ç±»å‹\"ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹åŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ã€‚\n\n```typescript\nlet _greeterMaker: typeof _Greeter = _Greeter;\n_greeterMaker.standardGreeting = \"Hey there!\";\nlet _greeter2: _Greeter = new _greeterMaker();\nconsole.log(_greeter2.greet());\n```\n\n### 4.11 é«˜çº§æŠ€å·§(æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨)\n\n> ç±»å®šä¹‰ä¼šåˆ›å»ºä¸¤ä¸ªä¸œè¥¿ï¼š_ç±»çš„å®ä¾‹ç±»å‹_ å’Œ _ä¸€ä¸ªæ„é€ å‡½æ•°_ã€‚\n> å› ä¸ºç±»å¯ä»¥åˆ›å»ºå‡ºç±»å‹ï¼Œæ‰€ä»¥èƒ½å¤Ÿåœ¨å…è®¸ä½¿ç”¨æ¥å£çš„åœ°æ–¹ä½¿ç”¨ç±»\n\n```typescript\nclass Point {\n  x: number;\n  y: number;\n}\n\ninterface Point3d extends Point {\n  z: number;\n}\n\nlet point3d: Point3d = { x: 1, y: 2, z: 4 };\n```\n\n## äº”ã€å‡½æ•°\n\n### 5.1 ä»‹ç»\n\n> å‡½æ•°æ˜¯ `JavaScript` åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚å®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ï¼Œæ¨¡æ‹Ÿå±‚ï¼Œä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚åœ¨ `TypeScript` é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ï¼Œå‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰ è¡Œä¸ºçš„åœ°æ–¹ã€‚`TypeScript` ä¸º `JavaScript` å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„ä½¿ç”¨ã€‚\n\n### 5.2 å‡½æ•°ç±»å‹\n\n#### 5.2.1 ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\n\n> æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå‚æ•°æ·»åŠ ç±»å‹ä¹‹åå†ä¸ºå‡½æ•°æœ¬èº«æ·»åŠ è¿”å›å€¼ç±»å‹ã€‚\n\n> `TypeScript` èƒ½å¤Ÿæ ¹æ®è¿”å›è¯­å¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸çœç•¥å®ƒã€‚\n\n```typescript\nfunction add(x: number, y: number): number {\n  return x + y;\n}\n\nlet myAdd = function (x: number, y: number): number {\n  return x + y;\n};\n```\n\n#### 5.2.2 ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\n\n```typescript\nlet myAdd1: (x: number, y: number) => number = function (x: number, y: number): number {\n  return x + y;\n};\n```\n\n> å‡½æ•°ç±»å‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š_å‚æ•°ç±»å‹_ å’Œ _è¿”å›å€¼ç±»å‹_ã€‚å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æ˜¯éœ€è¦çš„ã€‚æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚\n\n> 1. åªè¦å‚æ•°ç±»å‹æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„å‡½æ•°ç±»å‹ï¼Œè€Œä¸åœ¨ä¹å‚æ•°åæ˜¯å¦æ­£ç¡®ã€‚\n> 2. ç¬¬äºŒéƒ¨åˆ†æ˜¯è¿”å›å€¼ç±»å‹ã€‚å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹é—´ä½¿ç”¨ `=>` ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚ å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸º `void`,è€Œä¸èƒ½ç•™ç©ºã€‚\n\n> å‡½æ•°çš„ç±»å‹åªæ˜¯ç”±å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç»„æˆçš„ã€‚å‡½æ•°ä¸­ä½¿ç”¨çš„æ•è·å˜é‡ä¸ä¼šä½“ç°åœ¨ç±»å‹é‡Œã€‚å®é™…ä¸Šï¼Œè¿™äº›å˜é‡æ˜¯å‡½æ•°çš„éšè—çŠ¶æ€å¹¶ä¸æ˜¯ç»„æˆ `API` çš„ä¸€éƒ¨åˆ†ã€‚\n\n- æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š\n\n```typescript\nlet myAdd2: (baseValue: number, increment: number) => number = function (x: number, y: number): number {\n  return x + y;\n};\n```\n\n#### 5.2.3 æ¨æ–­ç±»å‹\n\n> åœ¨å°è¯•ä¸‹é¢è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹ã€‚è¿™å«åšï¼š\"æŒ‰ä¸Šä¸‹æ–‡å½’ç±»\"ï¼Œæ˜¯ç±»å‹æ¨è®ºçš„ä¸€ç§ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä¸ºç¨‹åºæŒ‡å®šç±»å‹ã€‚\n\n```typescript\n// myAdd has the full function type\nlet myAdd3 = function(x: number, y: number): number { return x + y };\n// The parameters `x` and `y` have the type number\nlet myAdd4: (baseValue: number, increment: number) =number = function (x, y) {\n  return x + y;\n};\n```\n\n### 5.3 å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\n\n> `TypeScript` é‡Œçš„æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æ˜¯å¿…é¡»çš„ã€‚è¿™ä¸æ˜¯æŒ‡ä¸èƒ½ä¼ é€’ `null` æˆ– `undefined` ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯è¯´ç¼–è¯‘å™¨æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºæ¯ä¸ªå‚æ•°éƒ½ä¼ å…¥äº†å€¼ã€‚ç¼–è¯‘å™¨è¿˜ä¼šå‡è®¾åªæœ‰è¿™äº›å‚æ•°ä¼šè¢«ä¼ é€’è¿›å‡½æ•°ã€‚\n\n1. ç®€çŸ­åœ°è¯´ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¸ªæ•°å¿…é¡»ä¸å‡½æ•°æœŸæœ›çš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚\n\n```typescript\nfunction buildName(firstName: string, lastName: string) {\n  return firstName + \" \" + lastName;\n}\n// let result1 =  buildName(\"Bob\"); // error\n// let result2 = buildName(\"Bob\", \"Jack\", \"Sr.\"); // error\nlet result3 = buildName(\"Bob\", \"Jack\");\n```\n\n2. `JavaScript`é‡Œï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä¼ å¯ä¸ä¼ ã€‚æ²¡ä¼ å‚çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯ `undefined`ã€‚åœ¨ `TypeScript` é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°æ—è¾¹ä½¿ç”¨ `?` å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚\n3. æ³¨æ„ï¼šå¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…é€‰å‚æ•°åé¢ï¼Œä¸èƒ½æ”¾åœ¨å‰é¢\n\n```typescript\nfunction buildName1(firstName: string, lastName?: string) {\n  if (lastName) {\n    return firstName + \" \" + lastName;\n  } else {\n    return firstName;\n  }\n}\nlet result_1 = buildName1(\"Bob\");\nlet result_2 = buildName1(\"Bob\", \"Jack\");\n// let result_3 = buildName1(\"Bob\", \"Jack\", \"Sr.\"); // error\n```\n\n4. å¯ä»¥è®¾ç½®é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°\n5. åœ¨æ‰€æœ‰å¿…é¡»å‚æ•°åé¢çš„å¸¦é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸å¯é€‰å‚æ•°ä¸€æ ·ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥çœç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯é€‰å‚æ•°ä¸æœ«å°¾çš„é»˜è®¤å‚æ•°å…±äº«å‚æ•°ç±»å‹ã€‚\n\n```typescript\nfunction buildName2(firstName: string, lastName = \"Smith\") {\n  return firstName + \" \" + lastName;\n}\n```\n\n6. ä¸æ™®é€šå¯é€‰å‚æ•°å‚æ•°ä¸åŒçš„æ˜¯ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°ä¸éœ€è¦æ”¾åœ¨å¿…é¡»å‚æ•°çš„åé¢ã€‚å¦‚æœå¸¦é»˜è®¤å€¼çš„å‚æ•°å‡ºç°åœ¨å¿…é¡»å‚æ•°çš„å‰é¢ï¼Œç”¨æˆ·å¿…é¡»æ˜ç¡®çš„ä¼ å…¥ `undefined` å€¼æ¥è·å¾—é»˜è®¤å€¼ã€‚\n\n```typescript\nfunction buildName3(firstName = \"Will\", lastName: string) {\n  return firstName + \" \" + lastName;\n}\n// let result__1 = buildName3(\"Bob\"); // error\n// let result__2 = buildName3(\"Bob\", \"Jack\", \"Sr.\"); // error\nlet result__3 = buildName3(\"Bob\", \"Jack\");\nlet result__4 = buildName3(undefined, \"Jack\");\n```\n\n### 5.4 å‰©ä½™å‚æ•°\n\n> å¿…è¦å‚æ•°ï¼Œé»˜è®¤å‚æ•° å’Œ å¯é€‰å‚æ•° æœ‰ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬è¡¨ç¤ºæŸä¸€ä¸ªå‚æ•°ã€‚æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ è¿›æ¥ã€‚åœ¨ `JavaScript` é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ `arguments` æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚åœ¨ `TypeScript` é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œ\n\n```typescript\nfunction buildName(firstName: string, ...restOfName: string[]) {\n  return firstName + \" \" + restOfName.join(\" \");\n}\n\nlet employeeName = buildName(\"Jose\", \"Smith\", \"Bob\", \"Alice\");\n```\n\n> å‰©ä½™å‚æ•°ä¼šè¢«å½“ä½œä¸ªæ•°ä¸é™çš„å¯é€‰å‚æ•°ã€‚å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»ºå‚æ•°æ•°ç»„ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å·åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚\n\n```typescript\nfunction buildName1(firstName: string, ...restOfName: string[]) {\n  return firstName + \" \" + restOfName.join(\" \");\n}\n\nlet buildNameFun: (fName: string, ...rest: string[]) => string = buildName1;\n```\n\n> `this` å‚æ•°ã€‚åœ¨ä½¿ç”¨äº† `--noImplicitThis` æ ‡è®°ä¹‹åï¼Œ`this` ç±»å‹å¯èƒ½ä¼šæ˜¯ `any`ã€‚æ­¤æ—¶éœ€è¦æä¾›ä¸€ä¸ªæ˜¾ç¤ºçš„ `this` å‚æ•°ã€‚\n\n```typescript\ninterface Card {\n  suit: string;\n  card: number;\n}\n\ninterface Deck {\n  suits: string[];\n  cards: number[];\n\n  createCardPicker(this: Deck): () => Card;\n}\n\nlet deck: Deck = {\n  suits: [\"hearts\", \"spades\", \"clubs\", \"diamonds\"],\n  cards: Array(52),\n  createCardPicker(): (this: Deck) => Card {\n    return () => {\n      let pickedCard = Math.floor(Math.random() * 52);\n      let pickedSuit = Math.floor(pickedCard / 13);\n\n      return { suit: this.suits[pickedSuit], card: pickedCard % 13 };\n    };\n  }\n};\nlet cardPicker = deck.createCardPicker();\nlet pickedCard = cardPicker();\nconsole.log(`card: ${pickedCard.card} of ${pickedCard.suit}`);\n```\n\n## å…­ã€æ³›å‹\n\n### 6.1 ä»‹ç»\n\n> åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ `API`ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚\n> åœ¨åƒ `C#` å’Œ `Java` è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `æ³›å‹` æ¥åˆ›å»ºå¯é‡ç”¨ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚\n> é™¤äº†æ³›å‹æ¥å£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºæ³›å‹ç±»ã€‚æ³¨æ„ï¼Œæ— æ³•åˆ›å»ºæ³›å‹æšä¸¾å’Œæ³›å‹å‘½åç©ºé—´ã€‚\n\n### 6.2 æ³›å‹ä¹‹ hello world\n\n> åˆ›å»ºä¸€ä¸ª `identity` å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä»»ä½•ä¼ å…¥å®ƒçš„å€¼ã€‚\n\n- å¦‚æœä¸ä½¿ç”¨æ³›å‹ï¼Œå‡½æ•°å¯èƒ½æ˜¯ï¼š\n\n```typescript\nfunction identity(arg: number): number {\n  return arg;\n}\n```\n\n- ä¹Ÿå¯ä»¥ä½¿ç”¨ `any` ç±»å‹å®šä¹‰å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ä¼ å…¥çš„ç±»å‹ä¸è¿”å›çš„ç±»å‹ä¸ç›¸åŒã€‚\n\n```typescript\nfunction identity1(arg: any): any {\n  return arg;\n}\n```\n\n> å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿è¿”å›å€¼çš„ç±»å‹ä¸ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚\n\n- è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»å‹å˜é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œåªèƒ½ç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ã€‚\n\n```typescript\nfunction identity2<T>(arg: T): T {\n  return arg;\n}\n```\n\n- ä½¿ç”¨æ–¹å¼ä¸€ï¼šä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç±»å‹å‚æ•°\n\n```typescript\nlet output = identity2<string>(\"myString\");\n```\n\n- ä½¿ç”¨æ–¹å¼äºŒ(æ›´æ™®é)ï¼šåˆ©ç”¨äº†ç±»å‹æ¨è®º-å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®š `T` çš„ç±»å‹ã€‚\n\n```typescript\nlet output2 = identity2(\"myString\");\n```\n\n### 6.3 ä½¿ç”¨æ³›å‹å˜é‡\n\n> ä½¿ç”¨æ³›å‹åˆ›å»ºåƒ `identity` è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨è¦æ±‚ä½ åœ¨å‡½æ•°ä½“å¿…é¡»æ­£ç¡®çš„ä½¿ç”¨è¿™ä¸ªé€šç”¨çš„ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œä½ å¿…é¡»æŠŠè¿™äº›å‚æ•°å½“ä½œæ˜¯ä»»æ„æˆ–æ‰€æœ‰ç±»å‹ã€‚\n\n- å¦‚æœæˆ‘ä»¬æƒ³æ‰“å°å‡º `arg` çš„é•¿åº¦ï¼Œä¹Ÿè®¸ä¼šè¿™æ ·åšã€‚\n\n```typescript\nfunction loggingIdentity<T>(arg: T): T {\n  console.log(arg.length); // é”™è¯¯ï¼ŒT ç±»å‹ä¹Ÿè®¸ä¸ä¼šæœ‰.lengthå±æ€§\n  return arg;\n}\n```\n\n- å¦‚æœæˆ‘ä»¬åƒæ“ä½œ `T` ç±»å‹çš„æ•°ç»„\n\n```typescript\nfunction loggingIdentity<T>(arg: T[]): T[] {\n  console.log(arg.length);\n  return arg;\n}\nfunction loggingIdentity2<T>(arg: Array<T>): Array<T> {\n  console.log(arg.length);\n  return arg;\n}\n```\n\n### 6.4 æ³›å‹ç±»å‹(æ³›å‹æ¥å£)\n\n1. æ³›å‹å‡½æ•°çš„ç±»å‹å’Œéæ³›å‹å‡½æ•°çš„ç±»å‹ä¸€æ ·ï¼Œé¦–å…ˆåˆ—å‡ºç±»å‹å‚æ•°ï¼Œç±»ä¼¼äºå‡½æ•°å£°æ˜ã€‚\n\n```typescript\nfunction identity<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity: <T>(arg: T) => T = identity;\n```\n\n2. æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºç±»å‹ä¸­çš„æ³›å‹ç±»å‹å‚æ•°ä½¿ç”¨ä¸åŒçš„åç§°ï¼Œåªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ã€‚\n\n```typescript\nfunction identity1<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity1: <U>(arg: U) => U = identity;\n```\n\n3. æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰è°ƒç”¨ç­¾åçš„å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰æ³›å‹å‡½æ•°ï¼š\n\n```typescript\nfunction identity2<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity2: { <T>(arg: T): T } = identity;\n```\n\n4. è¿™å¼•å¯¼æˆ‘ä»¬å»å†™ç¬¬ä¸€ä¸ªæ³›å‹æ¥å£äº†ã€‚æˆ‘ä»¬æŠŠä¸Šé¢ä¾‹å­é‡Œçš„å¯¹è±¡å­—é¢é‡æ‹¿å‡ºæ¥åšä¸ºä¸€ä¸ªæ¥å£ï¼š\n\n```typescript\ninterface GenericIdentityFn {\n  <T>(arg: T): T;\n}\n\nfunction identity3<T>(arg: T): T {\n  return arg;\n}\n\nlet myIdentity3: GenericIdentityFn = identity3;\n```\n\n5. æˆ‘ä»¬å¯èƒ½æƒ³æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹(æ¯”å¦‚ï¼š`Dictionary<string>` è€Œä¸åªæ˜¯ `Dictionary`)ã€‚è¿™æ ·æ¥å£é‡Œçš„å…¶å®ƒæˆå‘˜ä¹Ÿèƒ½çŸ¥é“è¿™ä¸ªå‚æ•°çš„ç±»å‹äº†ã€‚\n\n```typescript\ninterface _GenericIdentityFn<T> {\n  (arg: T): T;\n}\n\nfunction _identity<T>(arg: T): T {\n  return arg;\n}\n\nlet _myIdentity: _GenericIdentityFn<number> = _identity;\n```\n\n> æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹åšäº†å°‘è®¸æ”¹åŠ¨ã€‚ä¸å†æè¿°æ³›å‹å‡½æ•°ï¼Œè€Œæ˜¯æŠŠéæ³›å‹å‡½æ•°ç­¾åä½œä¸ºæ³›å‹ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚\n\n> å½“æˆ‘ä»¬ä½¿ç”¨ `GenericIdentityFn` çš„æ—¶å€™ï¼Œè¿˜å¾—ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹(è¿™é‡Œæ˜¯ï¼š`number`)ï¼Œä»è€Œé”å®šä¹‹åä»£ç é‡Œä½¿ç”¨çš„ç±»å‹ã€‚\n\n> å¯¹äºæè¿°å“ªéƒ¨åˆ†ç±»å‹å±äºæ³›å‹éƒ¨åˆ†æ¥è¯´ï¼Œç†è§£ä½•æ—¶æŠŠå‚æ•° \"æ”¾åœ¨è°ƒç”¨ç­¾åé‡Œ\" å’Œä½•æ—¶ \"æ”¾åœ¨æ¥å£ä¸Š\" æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚\n\n### 6.5 æ³›å‹ç±»\n\n> æ³›å‹ç±»å’Œæ³›å‹æ¥å£å·®ä¸å¤šã€‚æ³›å‹ç±»ä½¿ç”¨ `<>` æ‹¬èµ·æ³›å‹ç±»å‹ï¼Œè·Ÿåœ¨ç±»ååé¢ã€‚ç±»åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé™æ€éƒ¨åˆ† å’Œ å®ä¾‹éƒ¨åˆ†ã€‚æ³›å‹ç±»æŒ‡çš„æ˜¯å®ä¾‹éƒ¨åˆ†çš„ç±»å‹ï¼Œæ‰€ä»¥ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹ã€‚\n\n> `enericNumber` ç±»çš„ä½¿ç”¨æ˜¯éå¸¸ç›´è§‚çš„ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå»é™åˆ¶å®ƒåªèƒ½ä½¿ç”¨ `number` ç±»å‹ã€‚\n\n- ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–å…¶å®ƒæ›´å¤æ‚çš„ç±»å‹ã€‚\n\n```typescript\nclass GenericNumber<T> {\n  zeroValue: T;\n  add: (x: T, y: T) => T;\n}\nlet myGenericNumber = new GenericNumber<number>();\nmyGenericNumber.zeroValue = 0;\nmyGenericNumber.add = (x, y) => x + y;\n```\n\n> ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚\n\n```typescript\nlet stringNumeric = new GenericNumber<string>();\nstringNumeric.zeroValue = \" \";\nstringNumeric.add = (x, y) => x + y;\nconsole.log(stringNumeric.add(stringNumeric.zeroValue, \"test\"));\n```\n\n### 6.6 æ³›å‹çº¦æŸ\n\n> æˆ‘ä»¬åº”è¯¥è®°å¾—ä¹‹å‰çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™æƒ³è¦æ“ä½œæŸç±»å‹çš„ä¸€ç»„å€¼ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ç»„å€¼å…·æœ‰ä»€ä¹ˆæ ·çš„å±æ€§ã€‚\n\n> åœ¨ `loggingIdentity` ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®¿é—® `arg` çš„ `length` å±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å¹¶ä¸èƒ½è¯æ˜æ¯ç§ç±»å‹éƒ½æœ‰ length å±æ€§ã€‚\n\n```typescript\nfunction loggingIdentity<T>(arg: T): T {\n  console.log(arg.length);\n  return arg;\n}\n```\n\n> ç›¸æ¯”ä¸æ“ä½œ `any` æ‰€æœ‰ç±»å‹ï¼Œæˆ‘ä»¬æƒ³è¦é™åˆ¶å‡½æ•°å»å¤„ç†ä»»æ„å¸¦æœ‰ `.length` å±æ€§çš„æ‰€æœ‰ç±»å‹ã€‚åªè¦ä¼ å…¥çš„ç±»å‹æœ‰è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±å…è®¸ï¼Œå°±æ˜¯è¯´è‡³å°‘åŒ…å«è¿™ä¸€å±æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ—å‡ºå¯¹äº `T` çš„çº¦æŸè¦æ±‚ã€‚\n\n> ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å« `.length` å±æ€§çš„æ¥å£ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£å’Œ `extends` å…³é”®å­—æ¥å®ç°çº¦æŸã€‚\n\n```typescript\ninterface Lengthwise {\n  length: number;\n}\n\nfunction loggingIdentity<T extends Lengthwise>(arg: T): T {\n  console.log(arg.length);\n  return arg;\n}\n```\n\n- æ­¤æ—¶è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸã€‚å› æ­¤å®ƒä¸å†é€‚ç”¨äºä»»æ„ç±»å‹ï¼š\n\n```typescript\nloggingIdentity(3); // error\n```\n\n- æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«çš„å±æ€§ã€‚\n\n```typescript\nloggingIdentity({ length: 10, value: 3 });\n```\n\n### 6.7 åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\n\n> ä½ å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¸”å®ƒè¢«å¦ä¸€ä¸ªç±»å‹å‚æ•°æ‰€çº¦æŸã€‚ä¾‹å¦‚ï¼Œç°åœ¨æˆ‘ä»¬éœ€æƒ³è¦ç”¨å±æ€§åä»å¯¹è±¡é‡Œè·å–è¿™ä¸ªå±æ€§ã€‚å¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸ªå±æ€§å­˜åœ¨äºå¯¹è±¡ `obj` ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸¤ä¸ªç±»å‹ä¹‹é—´ä½¿ç”¨çº¦æŸã€‚\n\n```typescript\nfunction getProperty<T, K extends keyof T>(obj: T, key: K) {\n  return obj[key];\n}\nlet x = { a: 1, b: 2, c: 3, d: 4 };\ngetProperty(x, \"a\");\ngetProperty(x, \"m\"); // error\n```\n\n### 6.8 åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\n\n> åœ¨ `TypeScript` ä½¿ç”¨æ³›å‹åˆ›å»ºå·¥å‚å‡½æ•°æ—¶ï¼Œéœ€è¦å¼•ç”¨æ„é€ å‡½æ•°çš„ç±»ç±»å‹ã€‚\n\n```typescript\nfunction create<T>(c: { new (): T }): T {\n  return new c();\n}\n```\n\n> ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­ï¼Œä½¿ç”¨åŸå‹å±æ€§æ¨æ–­å¹¶çº¦æŸæ„é€ å‡½æ•°ä¸ç±»å®ä¾‹çš„å…³ç³»ã€‚\n\n```typescript\nclass BeeKeeper {\n  hasMask: boolean;\n}\n\nclass ZooKeeper {\n  nameTag: string;\n}\n\nclass Animal {\n  numLegs: number;\n}\n\nclass Bee extends Animal {\n  keeper: BeeKeeper;\n}\n\nclass Lion extends Animal {\n  keeper: ZooKeeper;\n}\n\nfunction createInstance<A extends Animal>(c: new () => A): A {\n  return new c();\n}\n\ncreateInstance(Lion).keeper.nameTag;\ncreateInstance(Bee).keeper.hasMask;\n```\n\n### 6.9 å¤šä¸ªç±»å‹å˜é‡\n\n```typescript\nfunction info<S, N>(name: S, age: N): [S, N] {\n  return [name, age];\n}\n\nconsole.log(info(\"pr\", 10));\nconsole.log(info<string, number>(\"pr\", 18));\n```\n\n## ä¸ƒã€æšä¸¾\n\n### 7.1 ä»‹ç»\n\n> ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦æœ‰åå­—çš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚`TypeScript` æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚\n\n### 7.2 æ•°å­—æšä¸¾\n\n```typescript\nenum Direction {\n  Up = 1,\n  Down,\n  Left,\n  Right\n}\n```\n\n> å¦‚ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œ`Up`ä½¿ç”¨åˆå§‹åŒ–ä¸º `1`ï¼Œå…¶ä½™æˆå‘˜ä¼šä» `1` å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚ æ¢å¥è¯è¯´ï¼Œ`Direction.Up` çš„å€¼ä¸º `1`ï¼Œ`Down` å€¼ä¸º `2`ï¼Œ`Left` å€¼ä¸º `3`ï¼Œ`Right` å€¼ä¸º `4`ã€‚\n\n1. æˆ‘ä»¬è¿˜å¯ä»¥å®Œå…¨ä¸ä½¿ç”¨åˆå§‹åŒ–å™¨\n\n```typescript\nenum Direction2 {\n  Up,\n  Down,\n  Left,\n  Right\n}\n```\n\n> ç°åœ¨ï¼Œ`Up` çš„å€¼ä¸º `0`ï¼Œ`Down` çš„å€¼ä¸º `1` ç­‰ç­‰ã€‚ å½“æˆ‘ä»¬ä¸åœ¨ä¹æˆå‘˜çš„å€¼çš„æ—¶å€™ï¼Œè¿™ç§è‡ªå¢é•¿çš„è¡Œä¸ºæ˜¯å¾ˆæœ‰ç”¨å¤„çš„ï¼Œä½†æ˜¯è¦æ³¨æ„æ¯ä¸ªæšä¸¾æˆå‘˜çš„å€¼éƒ½æ˜¯ä¸åŒçš„ã€‚\n\n2. ä½¿ç”¨æšä¸¾å¾ˆç®€å•ï¼šé€šè¿‡æšä¸¾çš„å±æ€§æ¥è®¿é—®æšä¸¾æˆå‘˜ï¼Œå’Œæšä¸¾çš„åå­—æ¥è®¿é—®æšä¸¾ç±»å‹ï¼š\n\n```typescript\nenum _Response {\n  No = 0,\n  Yes = 1\n}\n\nfunction respond(recipient: string, message: _Response): void {}\n\nrespond(\"Princess Caroline\", _Response.Yes);\n```\n\n3. æ•°å­—æšä¸¾å¯ä»¥è¢«æ··å…¥åˆ°è®¡ç®—è¿‡çš„å’Œå¸¸é‡æˆå‘˜ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚\n\n> ç®€çŸ­åœ°è¯´ï¼Œä¸å¸¦åˆå§‹åŒ–å™¨çš„æšä¸¾æˆ–è€…è¢«æ”¾åœ¨ç¬¬ä¸€çš„ä½ç½®ï¼Œæˆ–è€…è¢«æ”¾åœ¨ä½¿ç”¨äº†æ•°å­—å¸¸é‡æˆ–å…¶å®ƒå¸¸é‡åˆå§‹åŒ–äº†çš„æšä¸¾åé¢ã€‚æ¢å¥è¯è¯´ï¼Œä¸‹é¢çš„æƒ…å†µæ˜¯ä¸è¢«å…è®¸çš„ï¼š\n\n```typescript\nenum E {\n  A = getSomeValue(),\n  B // error! 'A' is not constant-initialized, so 'B' needs an initializer\n}\n```\n\n### 7.3 å­—ç¬¦ä¸²æšä¸¾\n\n> å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„è¿è¡Œæ—¶çš„å·®åˆ«ã€‚åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚\n\n```typescript\nenum Direction {\n  Up = \"UP\",\n  Down = \"DOWN\",\n  Left = \"LEFT\",\n  Right = \"RIGHT\"\n}\n```\n\n> ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„ - å®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼ˆå°½ç®¡åå‘æ˜ å°„ä¼šæœ‰æ‰€å¸®åŠ©ï¼‰ï¼Œå­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚\n\n### 7.4 å¼‚æ„æšä¸¾\n\n> ä»æŠ€æœ¯çš„è§’åº¦æ¥è¯´ï¼Œæšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜ï¼Œä½†æ˜¯ä½ ä¼¼ä¹å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼š\n\n```typescript\nenum BooleanLikeHeterogeneousEnum {\n  No = 0,\n  Yes = \"YES\"\n}\n```\n\n> é™¤éä½ çœŸçš„æƒ³è¦åˆ©ç”¨ `JavaScript` è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œå¦åˆ™æˆ‘ä»¬ä¸å»ºè®®è¿™æ ·åšã€‚\n\n### 7.5 è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\n\n> æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒå¯ä»¥æ˜¯å¸¸é‡æˆ–è®¡ç®—å‡ºæ¥çš„ã€‚å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œæšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯å¸¸é‡\n\n1. å®ƒæ˜¯æšä¸¾çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸”æ²¡æœ‰åˆå§‹åŒ–å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹å®ƒè¢«èµ‹äºˆå€¼ `0`ï¼š\n\n```typescript\nenum E {\n  X\n}\n```\n\n2. å®ƒä¸å¸¦æœ‰åˆå§‹åŒ–å™¨ä¸”å®ƒä¹‹å‰çš„æšä¸¾æˆå‘˜æ˜¯ä¸€ä¸ªæ•°å­—å¸¸é‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰æšä¸¾æˆå‘˜çš„å€¼ä¸ºå®ƒä¸Šä¸€ä¸ªæšä¸¾æˆå‘˜çš„å€¼åŠ  `1`ã€‚\n\n```typescript\nenum E1 {\n  X,\n  Y,\n  Z\n}\nenum E2 {\n  A = 1,\n  B,\n  C\n}\n```\n\n3. æšä¸¾æˆå‘˜ä½¿ç”¨ å¸¸é‡æšä¸¾è¡¨è¾¾å¼è¿›è¡Œåˆå§‹åŒ–ã€‚å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ˜¯ TypeScript è¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚\n\n> å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼š\n>\n> 1. ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰\n> 2. ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰\n> 3. å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼\n> 4. ä¸€å…ƒè¿ç®—ç¬¦ +ï¼Œ-ï¼Œï½ å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼\n> 5. å¸¸é‡æšä¸¾è¡¨è¾¾å¼ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ `+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%ï¼Œ<<ï¼Œ>>ï¼Œ>>>ï¼Œ&ï¼Œ|ï¼Œ^` çš„æ“ä½œå¯¹è±¡\n\n> è‹¥å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸º `NaN` æˆ– `Infinity`ï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚\n\n> æ‰€æœ‰å…¶å®ƒæƒ…å†µçš„æšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯éœ€è¦è®¡ç®—å¾—å‡ºçš„å€¼\n\n```typescript\nenum FileAccess {\n  // constant numbers\n  None,\n  Read = 1 << 1,\n  White = 1 << 2,\n  ReadWhite = Read | White,\n  // computed number\n  G = \"123\".length\n}\n```\n\n### 7.6 è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\n\n> å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„éè®¡ç®—çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å­é›†ï¼šå­—é¢é‡æšä¸¾æˆå‘˜ã€‚å­—é¢é‡æšä¸¾æˆå‘˜æ˜¯æŒ‡ä¸å¸¦æœ‰åˆå§‹å€¼çš„å¸¸é‡æšä¸¾æˆå‘˜ï¼Œæˆ–è€…æ˜¯è¢«åˆå§‹åŒ–ä¸ºï¼š\n>\n> 1. ä»»ä½•å­—ç¬¦ä¸²å­—é¢é‡(ä¾‹å¦‚ï¼š`\"foo\", \"bar\", \"baz\"`)\n> 2. ä»»ä½•æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š`1, 100`)\n> 3. åº”ç”¨äº†ä¸€å…ƒ - ç¬¦å·çš„æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š`-1, -100`) å½“æ‰€æœ‰æšä¸¾æˆå‘˜éƒ½æ‹¥æœ‰å­—é¢é‡æšä¸¾å€¼æ—¶ï¼Œå®ƒå°±æœ‰äº†ä¸€ç§ç‰¹æ®Šçš„å«ä¹‰ã€‚\n\n> é¦–å…ˆï¼Œæšä¸¾æˆå‘˜æˆä¸ºäº†ç±»å‹ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æŸäº›æˆå‘˜åªèƒ½æ˜¯æšä¸¾æˆå‘˜çš„å€¼ï¼š\n\n```typescript\nenum ShapeKind {\n  Circle,\n  Square\n}\n\ninterface Circle {\n  kind: ShapeKind.Circle;\n  radius: number;\n}\n\ninterface Square {\n  kind: ShapeKind.Square;\n  sideLength: number;\n}\n\nlet c: Circle = {\n  kind: ShapeKind.Square, // error\n  radius: 100\n};\n```\n\n> å¦ä¸€ä¸ªå˜åŒ–æ˜¯æšä¸¾ç±»å‹æœ¬èº«å˜æˆäº†æ¯ä¸ªæšä¸¾æˆå‘˜çš„è”åˆã€‚è™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®º è”åˆç±»å‹ ã€‚ä½†ä½ åªè¦çŸ¥é“é€šè¿‡è”åˆæšä¸¾ï¼Œç±»å‹ç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå®ƒå¯ä»¥çŸ¥é“æšä¸¾é‡Œçš„å€¼çš„é›†åˆã€‚å› æ­¤ï¼Œ`TypeScript` èƒ½å¤Ÿæ•è·åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™çŠ¯çš„æ„šè ¢çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼š\n\n```typescript\nenum E {\n  Foo,\n  Bar\n}\nfunction f(x: E) {\n  if (x !== E.Foo || x !== E.Bar) {\n    // // Error! Operator '!==' cannot be applied to types 'E.Foo' and 'E.Bar'.\n  }\n}\n```\n\n> è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å…ˆæ£€æŸ¥ `x` æ˜¯å¦ä¸æ˜¯ `E.Foo`ã€‚ å¦‚æœé€šè¿‡äº†è¿™ä¸ªæ£€æŸ¥ï¼Œç„¶å `||` ä¼šå‘ç”ŸçŸ­è·¯æ•ˆæœï¼Œ\n> `if` è¯­å¥ä½“é‡Œçš„å†…å®¹ä¼šè¢«æ‰§è¡Œã€‚ ç„¶è€Œï¼Œè¿™ä¸ªæ£€æŸ¥æ²¡æœ‰é€šè¿‡ï¼Œé‚£ä¹ˆ x åˆ™åªèƒ½ä¸º `E.Foo`ï¼Œå› æ­¤æ²¡ç†ç”±å†å»æ£€æŸ¥å®ƒæ˜¯å¦ä¸º `E.Bar`ã€‚\n\n### 7.7 è¿è¡Œæ—¶çš„æšä¸¾\n\n- æšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ã€‚\n\n```typescript\nenum E {\n  X,\n  Y,\n  Z\n}\n```\n\n- å¯ä»¥ä¼ é€’ç»™å‡½æ•°ä¹ˆï¼Ÿ\n\n```typescript\nfunction f(obj: { X: number }) {\n  return obj.X;\n}\n```\n\n- æ²¡é—®é¢˜ï¼Œå› ä¸º `\"E\"` åŒ…å«ä¸€ä¸ªæ•°å€¼å‹å±æ€§ `\"X\"`\n\n```typescript\nf(E);\n```\n\n### 7.8 ç¼–è¯‘æ—¶çš„æšä¸¾\n\n> å°½ç®¡ä¸€ä¸ªæšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ï¼Œä½† `keyof` å…³é”®å­—çš„è¡Œä¸ºä¸å…¶ä½œç”¨åœ¨å¯¹è±¡ä¸Šæ—¶æœ‰æ‰€ä¸åŒã€‚åº”è¯¥ä½¿ç”¨ `keyof` `typeof` æ¥è·å–ä¸€ä¸ªè¡¨ç¤ºæšä¸¾é‡Œæ‰€æœ‰å­—ç¬¦ä¸² `key` çš„ç±»å‹ã€‚\n\n```typescript\nenum LogLevel {\n  ERROR,\n  WARN,\n  INFO,\n  DEBUG\n}\n```\n\n- ç­‰åŒäºï¼š\n\n```typescript\ntype LogLevelStrings = \"ERROR\" | \"WARN\" | \"INFO\" | \"DEBUG\";\ntype LogLevelStrings = keyof typeof LogLevel;\n```\n\n```typescript\nfunction printImportant(key: LogLevelStrings, message: string) {\n  const num = LogLevel[key];\n  if (num <= LogLevel.WARN) {\n    console.log(\"Log Level key is: \", key);\n    console.log(\"Log Level value is: \", num);\n    console.log(\"Log Level message is \", message);\n  }\n}\nprintImportant(\"ERROR\", \"This is a message\");\n```\n\n### 7.9 åå‘æ˜ å°„\n\n> é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§åä½œä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº†åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­—ã€‚\n\n- ä¾‹å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š\n\n```typescript\nenum _Enum {\n  A\n}\nlet _a = _Enum.A;\nlet _nameOfA = _Enum[_a]; // \"A\"\n```\n\n- `TypeScript` å¯èƒ½ä¼šå°†è¿™æ®µä»£ç ç¼–è¯‘ä¸ºä¸‹é¢çš„ `JavaScript`ï¼š\n\n```typescript\nvar Enum;\n(function (Enum) {\n  Enum[(Enum[\"A\"] = 0)] = \"A\";\n})(Enum || (Enum = {}));\nvar a = Enum.A;\nvar nameOfA = Enum[a]; // \"A\"\n```\n\n> ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œæšä¸¾ç±»å‹è¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ­£å‘æ˜ å°„ï¼ˆ`name -> value`ï¼‰å’Œåå‘æ˜ å°„ï¼ˆ`value -> name`ï¼‰ã€‚\n\n> å¼•ç”¨æšä¸¾æˆå‘˜æ€»ä¼šç”Ÿæˆä¸ºå¯¹å±æ€§è®¿é—®å¹¶ä¸”æ°¸è¿œä¹Ÿä¸ä¼šå†…è”ä»£ç ã€‚\n\n> è¦æ³¨æ„çš„æ˜¯ä¸ä¼šä¸ºå­—ç¬¦ä¸²æšä¸¾æˆå‘˜ç”Ÿæˆåå‘æ˜ å°„ã€‚\n\n### 7.10 const æšä¸¾\n\n> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚ä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `const` æšä¸¾ã€‚\n\n> å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ `const` ä¿®é¥°ç¬¦æ¥å®šä¹‰ã€‚\n\n```typescript\nconst enum Enum {\n  A = 1,\n  B = A * 2\n}\n```\n\n> å¸¸é‡æšä¸¾åªèƒ½ä½¿ç”¨å¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒäºå¸¸è§„çš„æšä¸¾ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«åˆ é™¤ã€‚å¸¸é‡æšä¸¾æˆå‘˜åœ¨ä½¿ç”¨çš„åœ°æ–¹ä¼šè¢«å†…è”è¿›æ¥ã€‚ ä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºï¼Œå¸¸é‡æšä¸¾ä¸å…è®¸åŒ…å«è®¡ç®—æˆå‘˜ã€‚\n\n```typescript\nconst enum Directions {\n  Up,\n  Down,\n  Left,\n  Right\n}\nlet directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];\n// ç”Ÿæˆåçš„ä»£ç ä¸ºï¼š\nvar directions1 = [0 /* Up */, 1 /* Down */, 2 /* Left */, 3 /* Right */];\n```\n\n### 7.11 å¤–éƒ¨æšä¸¾\n\n> å¤–éƒ¨æšä¸¾ ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ã€‚\n\n```typescript\ndeclare enum Enum {\n  A = 1,\n  B,\n  C = 2\n}\n```\n\n> å¤–éƒ¨æšä¸¾ å’Œ éå¤–éƒ¨æšä¸¾ ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼Œåœ¨æ­£å¸¸çš„æšä¸¾é‡Œï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•çš„æˆå‘˜è¢«å½“æˆå¸¸é‡æˆå‘˜ã€‚\n\n> å¯¹äºéå¸¸é‡çš„å¤–éƒ¨æšä¸¾è€Œè¨€ï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•æ—¶è¢«å½“åšéœ€è¦ç»è¿‡è®¡ç®—çš„ã€‚\n\n## å…«ã€ç±»å‹åˆ«å\n\n### 8.1 ç±»å‹åˆ«å\n\n1. åˆ›å»ºåˆ«åéœ€è¦ä½¿ç”¨å…³é”®å­— `type`\n2. ä½¿ç”¨åˆ«åé€šå¸¸ç”¨åœ¨æœ‰ è”åˆç±»å‹ çš„åœºæ™¯ä¸‹\n\n> æ³¨æ„ï¼šä¸è¦æ··æ·†äº† `TypeScript` ä¸­çš„ `=>`; å’Œ `ES6` ä¸­çš„ `=>` åœ¨ `TypeScript` çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ`=>` ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ã€‚(å·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‰©èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹)ï¼›åœ¨ `ES6` ä¸­ï¼Œ`=>` å«åšç®­å¤´å‡½æ•°ã€‚\n\n```typescript\ntype Name = string;\ntype ShowName = () => string;\ntype NameOrShowName = Name | ShowName;\n\nconst getName = (name: NameOrShowName) => {\n  if (typeof name === \"string\") {\n    return name;\n  }\n  return name();\n};\n\nlet showName = () => \"pr is a boy\";\nconsole.log(getName(\"pr\"));\nconsole.log(getName(showName()));\n```\n\n### 8.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\n\n```typescript\ntype EventNames = \"click\" | \"scroll\" | \"mousemove\";\nconst handleEvent: (a: Element, b: EventNames) => string = (ele: Element, event: EventNames) => {\n  return `${ele} ${event}`;\n};\nhandleEvent(document.getElementById(\"header\"), \"scroll\");\nhandleEvent(document.getElementById(\"footer\"), \"click\");\n```\n\n## ä¹ã€ç±»å‹æ¨è®º\n\n### 9.1 åŸºç¡€\n\n> åœ¨ `TypeScript` é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```typescript\nlet x = 3;\n```\n\n> å˜é‡ `x` çš„ç±»å‹è¢«æ¨æ–­ä¸ºæ•°å­—ã€‚è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚\n\n> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç±»å‹æ¨è®ºæ˜¯ç›´æ¥äº†å½“åœ°ã€‚\n\n### 9.2 æœ€ä½³é€šç”¨ç±»å‹\n\n> å½“éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹ã€‚\n\n```typescript\nlet x = [0, 1, null];\n```\n\n> ä¸ºäº†æ¨æ–­ `x` çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©: `number` å’Œ `null`ã€‚è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚\n\n> ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ç›¸åŒçš„é€šç”¨ç±»å‹ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚\n\n```typescript\nlet zoo = [new Rhino(), new Elephant(), new Snake()];\n```\n\n> è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®© `zoo` è¢«æ¨æ–­ä¸º `Animal[]` ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯ `Animal` ç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚\n\n> ä¸ºäº†æ›´æ­£ï¼Œå½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹ï¼š\n\n```typescript\nlet zoo: Animal[] = [new Rhino(), new Elephant(), new Snake()];\n```\n\n> å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³é€šç”¨ç±»å‹çš„è¯ï¼Œç±»å‹æ¨æ–­çš„ç»“æœä¸ºè”åˆæ•°ç»„ç±»å‹ï¼Œ`(Rhino | Elephant | Snake)[]`ã€‚\n\n### 9.3 ä¸Šä¸‹æ–‡å½’ç±»\n\n1. `TypeScript` ç±»å‹æ¨è®ºä¹Ÿå¯èƒ½æŒ‰ç…§ç›¸åçš„æ–¹å‘è¿›è¡Œï¼Œè¿™è¢«å«åš\"ä¸Šä¸‹æ–‡å½’ç±»\"ã€‚æŒ‰ä¸Šä¸‹æ–‡å½’ç±»ä¼šå‘ç”Ÿåœ¨è¡¨è¾¾å¼ç±»å‹ä¸æ‰€å¤„çš„ä½ç½®ç›¸å…³æ—¶ã€‚\n\n> åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­é‡Œï¼Œ`TypeScript` ç±»å‹æ£€æŸ¥å™¨ä¼šä½¿ç”¨ `Window.onmousedown` å‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚æ‰€ä»¥å®ƒèƒ½å¤Ÿæ¨æ–­å‡º `mouseEvent` å‚æ•°çš„ç±»å‹ä¸­åŒ…å«äº† `button` å±æ€§è€Œä¸åŒ…å« `kangaroo` å±æ€§ã€‚\n\n```typescript\nwindow.onmousedown = function (mouseEvent) {\n  console.log(mouseEvent.button); // <- Ok\n  console.log(mouseEvent.kangaroo); // <- error\n};\n```\n\n2. `TypeScript` è¿˜èƒ½å¤Ÿå¾ˆå¥½åœ°æ¨æ–­å‡ºå…¶å®ƒä¸Šä¸‹æ–‡ä¸­çš„ç±»å‹ã€‚\n\n```typescript\nwindow.onscroll = function (uiEvent) {\n  console.log(uiEvent.button); // Error\n};\n```\n\n> ä¸Šé¢çš„å‡½æ•°è¢«èµ‹ç»™ ` window.onscroll``ï¼ŒTypeScript ` èƒ½å¤ŸçŸ¥é“ `uiEvent` æ˜¯ `UIEvent`ï¼Œè€Œä¸æ˜¯ `MouseEventã€‚UIEvent` å¯¹è±¡ä¸åŒ…å« `button` å±æ€§ï¼Œå› æ­¤ `TypeScript` ä¼šæŠ¥é”™ã€‚\n\n1. å¦‚æœè¿™ä¸ªå‡½æ•°ä¸æ˜¯åœ¨ä¸Šä¸‹æ–‡å½’ç±»çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹å°†éšå¼çš„æˆä¸º `any` ç±»å‹ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæŠ¥é”™(é™¤éä½ å¼€å¯äº† `--noImplicitAny` é€‰é¡¹)\n\n```typescript\nconst handler = function (uiEvent) {\n  console.log(uiEvent.button); // <- Ok\n};\n```\n\n- æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç¡®åœ°ä¸ºå‡½æ•°å‚æ•°ç±»å‹èµ‹å€¼æ¥è¦†å†™ä¸Šä¸‹æ–‡ç±»å‹ï¼š\n\n```typescript\nwindow.onscroll = function (uiEvent: any) {\n  console.log(uiEvent.button); // <- Now, no error is given\n};\n```\n\n> ä½†è¿™æ®µä»£ç ä¼šæ‰“å° `undefined`ï¼Œå› ä¸º `uiEvent` å¹¶ä¸åŒ…å« `button` å±æ€§ã€‚\n\n> ä¸Šä¸‹æ–‡å½’ç±»ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚é€šå¸¸åŒ…å«å‡½æ•°çš„å‚æ•°ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜å’Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚\n\n- ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š\n\n```typescript\nfunction createZoo(): Animal[] {\n  return [new Rhino(), new Elephant(), new Snake()];\n}\n```\n\n> ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œæœ€ä½³é€šç”¨ç±»å‹æœ‰ `4` ä¸ªå€™é€‰è€…ï¼š`Animal, Rhino, Elephant, Snake`ã€‚å½“ç„¶ï¼Œ`Animal` ä¼šè¢«ä½œä¸ºæœ€ä½³é€šç”¨ç±»å‹ã€‚\n\n## åã€ç±»å‹å…¼å®¹æ€§\n\n### 10.1 ä»‹ç»\n\n> `TypeScript` é‡Œçš„å…¼å®¹æ€§æ˜¯åŸºäºç»“æ„å­ç±»å‹çš„ã€‚ç»“æ„ç±»å‹æ˜¯ä¸€ç§åªä½¿ç”¨å…¶æˆå‘˜æ¥æè¿°ç±»å‹çš„æ–¹å¼ã€‚å®ƒæ­£å¥½ä¸åä¹‰( `nominal` )ç±»å‹å½¢æˆå¯¹æ¯”ã€‚(è¯‘è€…æ³¨ï¼šåœ¨åŸºäºåä¹‰ç±»å‹çš„ç±»å‹ç³»ç»Ÿä¸­ï¼Œæ•°æ®ç±»å‹çš„å…¼å®¹æ€§æˆ–ç­‰ä»·æ€§æ˜¯é€šè¿‡æ˜ç¡®çš„å£°æ˜/æˆ–ç±»å‹çš„åç§°æ¥å†³å®šçš„ã€‚è¿™ä¸ç»“æ„æ€§ç±»å‹ç³»ç»Ÿä¸åŒï¼Œå®ƒæ˜¯åŸºäºç±»å‹çš„ç»„æˆç»“æ„ï¼Œä¸”ä¸è¦æ±‚æ˜ç¡®åœ°å£°æ˜ã€‚)çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š\n\n```typescript\ninterface Named {\n  name: string;\n}\n\nclass Person {\n  name: string;\n}\n\nlet p: Named;\n// Ok, because of structural typing\np = new Person();\n```\n\n> åœ¨ä½¿ç”¨åŸºäºåä¹‰ç±»å‹çš„æ–­è¨€ï¼Œæ¯”å¦‚ `C#` æˆ– `Java` ä¸­ï¼Œè¿™æ®µä»£ç ä¼šæŠ¥é”™ï¼Œ å› ä¸º `Person` ç±»æ²¡æœ‰æ˜ç¡®è¯´æ˜å…¶å®ç°äº† `Named` æ¥å£ã€‚\n> `TypeScript` çš„ç»“æ„æ€§å­ç±»å‹æ˜¯æ ¹æ® `JavaScript` ä»£ç çš„å…¸å‹å†™æ³•æ¥è®¾è®¡çš„ã€‚ å› ä¸º `JavaScript` é‡Œå¹¿æ³›åœ°ä½¿ç”¨åŒ¿åå¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°è¡¨è¾¾å¼å’Œå¯¹è±¡å­—é¢é‡ï¼Œ æ‰€ä»¥ä½¿ç”¨ç»“æ„ç±»å‹ç³»ç»Ÿæ¥æè¿°è¿™äº›ç±»å‹æ¯”ä½¿ç”¨åä¹‰ç±»å‹ç³»ç»Ÿæ›´å¥½ã€‚\n\n### 10.2 å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\n\n> `TypeScript` çš„ç±»å‹ç³»ç»Ÿå…è®¸æŸäº›åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®è®¤å…¶å®‰å…¨æ€§çš„æ“ä½œã€‚å½“ä¸€ä¸ªç±»å‹ç³»ç»Ÿå…·æ­¤å±æ€§æ—¶ï¼Œè¢«å½“åšæ˜¯â€œä¸å¯é â€çš„ã€‚TypeScript å…è®¸è¿™ç§ä¸å¯é è¡Œä¸ºçš„å‘ç”Ÿæ˜¯ç»è¿‡ä»”ç»†è€ƒè™‘çš„ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šè§£é‡Šä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µå’Œå…¶æœ‰åˆ©çš„ä¸€é¢ã€‚\n\n### 10.3 å¼€å§‹\n\n- `TypeScript` ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„åŸºæœ¬è§„åˆ™æ˜¯ï¼Œå¦‚æœ `x` è¦å…¼å®¹ `y`ï¼Œé‚£ä¹ˆ `y` è‡³å°‘å…·æœ‰ä¸ `x` ç›¸åŒçš„å±æ€§ã€‚æ¯”å¦‚ï¼š\n\n```typescript\ninterface Named {\n  name: string;\n}\n\nlet x: Named;\n// y's inferred type is { name: string; location: string }\nlet y = { name: \"Alice\", location: \"Seattle\" };\nx = y;\n```\n\n> è¿™é‡Œè¦æ£€æŸ¥ `y` æ˜¯å¦èƒ½èµ‹å€¼ç»™ `x`ï¼Œç¼–è¯‘å™¨æ£€æŸ¥ `x` ä¸­çš„æ¯ä¸ªå±æ€§ï¼Œçœ‹æ˜¯å¦èƒ½åœ¨ `y` ä¸­ä¹Ÿæ‰¾åˆ°å¯¹åº”å±æ€§ã€‚\n\n> åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ`y` å¿…é¡»åŒ…å«åå­—æ˜¯ `name` çš„ `string` ç±»å‹æˆå‘˜ã€‚`y` æ»¡è¶³æ¡ä»¶ï¼Œå› æ­¤èµ‹å€¼æ­£ç¡®ã€‚\n\n- æ£€æŸ¥å‡½æ•°å‚æ•°æ—¶ä½¿ç”¨ç›¸åŒçš„è§„åˆ™\n\n```typescript\nfunction greet(n: Named) {\n  console.log(\"Hello, \" + n.name);\n}\n\ngreet(y); // OK\n```\n\n> æ³¨æ„ï¼Œ`y` æœ‰ä¸ªé¢å¤–çš„ `location` å±æ€§ï¼Œä½†è¿™ä¸ä¼šå¼•å‘é”™è¯¯ã€‚\n> åªæœ‰ç›®æ ‡ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ `Named`ï¼‰çš„æˆå‘˜ä¼šè¢«ä¸€ä¸€æ£€æŸ¥æ˜¯å¦å…¼å®¹ã€‚\n> è¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹æ˜¯é€’å½’è¿›è¡Œçš„ï¼Œæ£€æŸ¥æ¯ä¸ªæˆå‘˜åŠå­æˆå‘˜ã€‚\n\n### 10.4 æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\n\n1. ç›¸å¯¹æ¥è®²ï¼Œåœ¨æ¯”è¾ƒåŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹çš„æ—¶å€™æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œé—®é¢˜æ˜¯å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå‡½æ•°æ˜¯å…¼å®¹çš„ã€‚\n\n- ä¸‹é¢æˆ‘ä»¬ä»ä¸¤ä¸ªç®€å•çš„å‡½æ•°å…¥æ‰‹ï¼Œå®ƒä»¬ä»…æ˜¯å‚æ•°åˆ—è¡¨ç•¥æœ‰ä¸åŒï¼š\n\n```typescript\nlet x = (a: number) => 0;\nlet y = (b: number, s: string) => 0;\n\ny = x; // <- Ok\n// x = y; // <- Error\n```\n\n> è¦æŸ¥çœ‹ `x` æ˜¯å¦èƒ½èµ‹å€¼ç»™ `y`ï¼Œé¦–å…ˆçœ‹å®ƒä»¬çš„å‚æ•°åˆ—è¡¨ã€‚ `x` çš„æ¯ä¸ªå‚æ•°å¿…é¡»èƒ½åœ¨ `y` é‡Œæ‰¾åˆ°å¯¹åº”ç±»å‹çš„å‚æ•°ã€‚æ³¨æ„çš„æ˜¯å‚æ•°çš„åå­—ç›¸åŒä¸å¦æ— æ‰€è°“ï¼Œåªçœ‹å®ƒä»¬çš„ç±»å‹ã€‚ è¿™é‡Œï¼Œ`x` çš„æ¯ä¸ªå‚æ•°åœ¨ `y` ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„å‚æ•°ï¼Œæ‰€ä»¥å…è®¸èµ‹å€¼ã€‚ç¬¬äºŒä¸ªèµ‹å€¼é”™è¯¯ï¼Œå› ä¸º `y` æœ‰ä¸ªå¿…éœ€çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ `x` å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸å…è®¸èµ‹å€¼ã€‚\n> ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆå…è®¸å¿½ç•¥å‚æ•°ï¼Œåƒä¾‹å­ `y = x` ä¸­é‚£æ ·ã€‚ åŸå› æ˜¯å¿½ç•¥é¢å¤–çš„å‚æ•°åœ¨ `JavaScript` é‡Œæ˜¯å¾ˆå¸¸è§çš„ã€‚\n> ä¾‹å¦‚ï¼Œ`Array.forEach` ç»™å›è°ƒå‡½æ•°ä¼  `3` ä¸ªå‚æ•°ï¼šæ•°ç»„å…ƒç´ ï¼Œç´¢å¼• å’Œ æ•´ä¸ªæ•°ç»„ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä¼ å…¥ä¸€ä¸ªåªä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ï¼š\n\n```typescript\nlet items = [1, 2, 3];\n// Don't force these extra arguments\nitems.forEach((item, index, array) => console.log(item));\n// Should be Ok\nitems.forEach(item => console.log(item));\n```\n\n2. ä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•å¤„ç†è¿”å›å€¼ç±»å‹ï¼Œåˆ›å»ºä¸¤ä¸ªä»…æ˜¯è¿”å›å€¼ç±»å‹ä¸åŒçš„å‡½æ•°ã€‚\n\n```typescript\nlet x1 = () => ({ name: \"Alice\" });\nlet y1 = () => ({ name: \"Alice\", location: \"Seattle\" });\n\nx1 = y1; // Ok\ny1 = x1; // Error, because x() lacks a location property\n```\n\n3. ç±»å‹ç³»ç»Ÿå¼ºåˆ¶æºå‡½æ•°çš„è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ç›®æ ‡å‡½æ•°è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚\n\n### 10.5 å‡½æ•°å‚æ•°åŒå‘åå˜\n\n> å½“æ¯”è¾ƒå‡½æ•°å‚æ•°ç±»å‹æ—¶ï¼Œåªæœ‰å½“æºå‡½æ•°å‚æ•°èƒ½å¤Ÿèµ‹å€¼ç»™ç›®æ ‡å‡½æ•°æˆ–è€…åè¿‡æ¥æ—¶æ‰èƒ½èµ‹å€¼æˆåŠŸã€‚è¿™æ˜¯ä¸ç¨³å®šçš„ï¼Œå› ä¸ºè°ƒç”¨è€…å¯èƒ½ä¼ å…¥äº†ä¸€ä¸ªå…·æœ‰æ›´ç²¾ç¡®ç±»å‹ä¿¡æ¯çš„å‡½æ•°ï¼Œä½†æ˜¯è°ƒç”¨è¿™ä¸ªä¼ å…¥çš„å‡½æ•°çš„æ—¶å€™å´ä½¿ç”¨äº†ä¸æ˜¯é‚£ä¹ˆç²¾ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œè¿™æå°‘ä¼šå‘å£°é”™è¯¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®ç°å¾ˆå¤š `JavaScript` é‡Œçš„å¸¸è§æ¨¡å¼ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nenum EventType {\n  Mouse,\n  Keyboard\n}\n\ninterface Event {\n  timestamp: number;\n}\n\ninterface MouseEvent extends Event {\n  x1: number;\n  y1: number;\n}\n\ninterface keyEvent extends Event {\n  keyCode: number;\n}\n\nfunction listenEvent(eventType: EventType, handler: (n: Event) => void) {\n  /* â€¦â€¦ */\n}\n\n// Unsound, but useful and common ä¸å®Œæ•´ï¼Œä½†æ˜¯å¸¸ç”¨å¸¸è§\nlistenEvent(EventType.Mouse, (e: MouseEvent) => console.log(`${e.x1},${e.y1}`));\n\n// Undesirable alternatives in presence of soundness å®Œæ•´ä½†æ˜¯ä¸å—æ¬¢è¿\nlistenEvent(EventType.Mouse, (e: Event) => console.log(`${(<MouseEvent>e).x1},${(<MouseEvent>e).y1}`));\n\nlistenEvent(EventType.Mouse, <(e: Event) => void>((e: MouseEvent) => console.log(`${e.x1},${e.y1}`)));\n// Still disallowed (clear error). Type safety enforced for wholly incompatible types\n// ä»ç„¶ä¸å…è®¸ï¼ˆæ¸…é™¤é”™è¯¯ï¼‰ã€‚å®Œå…¨ä¸å…¼å®¹ç±»å‹æ‰€å¼ºåˆ¶è§„å®šçš„ç±»å‹å®‰å…¨\n// listenEvent(EventType.Mouse, (e: number) => console.log(e));\n```\n\n### 10.6 å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\n\n1. æ¯”è¾ƒå‡½æ•°å…¼å®¹æ€§çš„æ—¶å€™ï¼Œå¯é€‰å‚æ•°ä¸å¿…é¡»å‚æ•°æ˜¯å¯äº’æ¢çš„ã€‚æºç±»å‹ä¸Šæœ‰é¢å¤–çš„å¯é€‰å‚æ•°ä¸æ˜¯é”™è¯¯ï¼Œç›®æ ‡ç±»å‹çš„å¯é€‰å‚æ•°åœ¨æºç±»å‹é‡Œæ²¡æœ‰å¯¹åº”çš„å‚æ•°ä¹Ÿä¸æ˜¯é”™è¯¯ã€‚\n2. å½“ä¸€ä¸ªå‡½æ•°æœ‰å‰©ä½™å‚æ•°æ—¶ï¼Œå®ƒè¢«å½“åšæ— é™ä¸ªå¯é€‰å‚æ•°ã€‚\n3. è¿™å¯¹äºç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¨³å®šçš„ï¼Œä½†ä»è¿è¡Œæ—¶çš„è§’åº¦æ¥çœ‹ï¼Œå¯é€‰å‚æ•°ä¸€èˆ¬æ¥è¯´æ˜¯ä¸å¼ºåˆ¶çš„ï¼Œå› ä¸ºå¯¹äºå¤§å¤šæ•°å‡½æ•°æ¥è¯´ç›¸å½“äºä¼ é€’äº†ä¸€äº› undefined ã€‚\n\n> æœ‰ä¸€ä¸ªå¥½çš„ä¾‹å­ï¼Œå¸¸è§çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å¹¶ç”¨å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯å¯é¢„çŸ¥çš„å‚æ•° ä½†å¯¹ç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¡®å®šçš„å‚æ•°æ¥è°ƒç”¨ï¼š\n\n```typescript\nfunction invokeLater(args: any[], callback: (...args: any[]) => void) {\n  /* ... Invoke callback with 'args' ... é€šè¿‡argsè°ƒç”¨callback */\n}\n\n// Unsound - invokeLater \"might\" provide any number of arguments\n// ä¸å¥å…¨çš„æ˜¯ - è¢«è°ƒç”¨æ—¶å€™å¯èƒ½ä¼šæä¾›ä»»æ„æ•°é‡çš„å‚æ•°\ninvokeLater([1, 2], (x, y) => console.log(x + \",\" + y));\n\n// Confusing (x and y are actually required) and unrecoverable\n// ä»¤æˆ‘ä»¬å›°æƒ‘(æ˜¯å¦éœ€è¦ x å’Œ y) å¹¶ä¸” ä¸å¯æ¢å¤\ninvokeLater([1, 2], (x?, y?) => console.log(x + \",\" + y));\n```\n\n### 10.7 å‡½æ•°é‡è½½\n\n> å¯¹äºæœ‰é‡è½½çš„å‡½æ•°ï¼Œæºå‡½æ•°çš„æ¯ä¸ªé‡è½½éƒ½è¦åœ¨ç›®æ ‡å‡½æ•°ä¸Šæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°ç­¾åã€‚è¿™ç¡®ä¿äº†ç›®æ ‡å‡½æ•°å¯ä»¥åœ¨æ‰€æœ‰æºå‡½æ•°å¯è°ƒç”¨çš„åœ°æ–¹è°ƒç”¨ã€‚\n\n### 10.8 æšä¸¾\n\n> æšä¸¾ç±»å‹ä¸æ•°å­—ç±»å‹å…¼å®¹ï¼Œå¹¶ä¸”æ•°å­—ç±»å‹ä¸æšä¸¾ç±»å‹å…¼å®¹ã€‚ä¸åŒæšä¸¾ç±»å‹ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ã€‚\n\n- æ¯”å¦‚ï¼š\n\n```typescript\nenum Status {\n  Ready,\n  Waiting\n}\n\nenum Color {\n  Red,\n  Blue,\n  Green\n}\n\nlet _status = Status.Ready;\n// _status = Color.Green; // Error\n```\n\n### 10.9 ç±»\n\n> ç±»ä¸å¯¹è±¡å­—é¢é‡å’Œæ¥å£å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼šç±»çš„é™æ€éƒ¨åˆ†å’Œå®ä¾‹éƒ¨åˆ†çš„ç±»å‹ã€‚æ¯”è¾ƒä¸¤ä¸ªç±»ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œåªæœ‰å®ä¾‹çš„æˆå‘˜ä¼šè¢«æ¯”è¾ƒã€‚é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ä¸åœ¨æ¯”è¾ƒçš„èŒƒå›´å†…ã€‚\n\n```typescript\nclass Animal {\n  feet: number;\n\n  constructor(name: string, numFeet: number, c: boolean) {}\n}\n\nclass Size {\n  feet: number;\n\n  constructor(numFeet: number) {}\n}\n\nlet a: Animal;\nlet s: Size;\na = s; //Ok\ns = a; //Ok\n\n/*  */\n```\n\n### 10.10 ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\n\n> ç±»çš„ç§æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜ä¼šå½±å“å…¼å®¹æ€§ã€‚ å½“æ£€æŸ¥ç±»å®ä¾‹çš„å…¼å®¹æ—¶ï¼Œå¦‚æœç›®æ ‡ç±»å‹åŒ…å«ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆæºç±»å‹å¿…é¡»åŒ…å«æ¥è‡ªåŒä¸€ä¸ªç±»çš„è¿™ä¸ªç§æœ‰æˆå‘˜ã€‚åŒæ ·åœ°ï¼Œè¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äºåŒ…å«å—ä¿æŠ¤æˆå‘˜å®ä¾‹çš„ç±»å‹æ£€æŸ¥ã€‚ è¿™å…è®¸å­ç±»èµ‹å€¼ç»™çˆ¶ç±»ï¼Œä½†æ˜¯ä¸èƒ½èµ‹å€¼ç»™å…¶å®ƒæœ‰åŒæ ·ç±»å‹çš„ç±»ã€‚\n\n### 10.11 æ³›å‹\n\n> å› ä¸º `TypeScript` æ˜¯ç»“æ„æ€§çš„ç±»å‹ç³»ç»Ÿï¼Œç±»å‹å‚æ•°åªå½±å“ä½¿ç”¨å…¶åšä¸ºç±»å‹ä¸€éƒ¨åˆ†çš„ç»“æœç±»å‹ã€‚\n\n- æ¯”å¦‚\n\n```typescript\ninterface Empty<T> {}\n\nlet x: Empty<number>;\nlet y: Empty<string>;\n\nx = y; // Ok, because y matches structure of x\n```\n\n> ä¸Šé¢ä»£ç é‡Œï¼Œ`x` å’Œ `y` æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬çš„ç»“æ„ä½¿ç”¨ç±»å‹å‚æ•°æ—¶ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚\n\n- æŠŠè¿™ä¸ªä¾‹å­æ”¹å˜ä¸€ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªæˆå‘˜ï¼Œå°±èƒ½çœ‹å‡ºæ˜¯å¦‚ä½•å·¥ä½œçš„äº†ã€‚\n\n```typescript\ninterface NotEmpty<T> {\n  data: T;\n}\n\nlet x1: NotEmpty<number>;\nlet y1: NotEmpty<string>;\nx1 = y1; // Errorï¼Œbecause x and y are not compatible\n```\n\n> åœ¨è¿™é‡Œï¼Œæ³›å‹ç±»å‹åœ¨ä½¿ç”¨æ—¶å°±å¥½æ¯”ä¸æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ã€‚\n\n> å¯¹äºæ²¡æŒ‡å®šæ³›å‹ç±»å‹çš„æ³›å‹å‚æ•°æ—¶ï¼Œä¼šæŠŠæ‰€æœ‰æ³›å‹å‚æ•°å½“æˆ `any` æ¯”è¾ƒã€‚ç„¶åç”¨ç»“æœç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå°±åƒä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ã€‚\n\n- æ¯”å¦‚ï¼š\n\n```typescript\nlet identity = function <T>(x: T): T {\n  // ...\n  return;\n};\nlet reverse = function <U>(y: U): U {\n  // ...\n  return;\n};\nidentity = reverse; // Ok, because (x: any) => any matches (y: any) => any\n```\n\n### 10.12 é«˜çº§ä¸»é¢˜\n\n- å­ç±»å‹å’Œèµ‹å€¼\n\n> ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†\"å…¼å®¹æ€§\"ï¼Œå®ƒåœ¨è¯­è¨€è§„èŒƒé‡Œæ²¡æœ‰å®šä¹‰ï¼Œåœ¨ `TypeScript` é‡Œï¼Œæœ‰ä¸¤ç§å…¼å®¹æ€§ï¼šå­ç±»å‹ å’Œ èµ‹å€¼ã€‚å®ƒä»¬çš„ä¸åŒç‚¹åœ¨äºï¼šèµ‹å€¼æ‰©å±•äº†å­ç±»å‹å…¼å®¹æ€§ï¼Œå¢åŠ äº†ä¸€äº›è§„åˆ™ï¼Œå…è®¸å’Œ `any` æ¥å›èµ‹å€¼ï¼Œä»¥åŠ enum å’Œå¯¹åº”æ•°å­—å€¼ä¹‹é—´çš„æ¥å›èµ‹å€¼ã€‚\n> è¯­è¨€é‡Œçš„ä¸åŒåœ°æ–¹åˆ†åˆ«ä½¿ç”¨äº†å®ƒä»¬ä¹‹ä¸­çš„æœºåˆ¶ã€‚å®é™…ä¸Šï¼Œç±»å‹å…¼å®¹æ€§æ˜¯ç”±èµ‹å€¼å…¼å®¹æ€§æ¥æ§åˆ¶çš„ï¼Œå³ä½¿åœ¨ `implements` å’Œ `extends` è¯­å¥ä¹Ÿä¸ä¾‹å¤–ã€‚\n\n## åä¸€ã€é«˜çº§ç±»å‹\n\n### 11.1 äº¤å‰ç±»å‹\n\n> äº¤å‰ç±»å‹ æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œ`Person & Serializable & Loggable` åŒæ—¶æ˜¯ `Person` å’Œ `Serializable` å’Œ `Loggable`ã€‚å°±æ˜¯è¯´è¿™ä¸ªç±»å‹çš„å¯¹è±¡åŒæ—¶æ‹¥æœ‰äº†è¿™ä¸‰ç§ç±»å‹çš„æˆå‘˜ã€‚\n> æˆ‘ä»¬å¤§å¤šæ•°æ˜¯åœ¨æ··å…¥( `mixins` )æˆ–å…¶å®ƒä¸é€‚åˆå…¸å‹é¢å‘å¯¹è±¡æ¨¡å‹çš„åœ°æ–¹çœ‹åˆ°äº¤å‰ç±»å‹çš„ä½¿ç”¨ã€‚(åœ¨ `JavaScript` é‡Œå‘ç”Ÿè¿™ç§æƒ…å†µçš„åœºåˆå¾ˆå¤šï¼)\n\n#### 11.1.1 `ReadOnly` çš„å®ç°\n\n```typescript\ntype ReadOnly<T> = {\n    readOnly [P in keyof T]: T[P];\n}\n```\n\n#### 11.1.2 `Partial` çš„å®ç°\n\n```typescript\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n```\n\n#### 11.1.3 `Pick` çš„å®ç°\n\n```typescript\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\n```\n\n#### 11.1.4 `Record` çš„å®ç°\n\n```typescript\ntype Record<K extends string, T> = {\n  [P in K]: T;\n};\n```\n\n> ä¸‹é¢æ˜¯å¦‚ä½•åˆ›å»ºæ··å…¥çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­(`\"target\": \"es5\"`):\n\n```typescript\nfunction extend<First, Second>(first: First, second: Second): First & Second {\n    const result: Partial<First & Second>= {};\n    for (const prop in first) {\n        if (first.hasOwnProperty(prop)) {\n            (<First>result)[prop] = first[prop];\n        }\n    }\n    for (const prop in second) {\n        if (second.hasOwnProperty(prop)) {\n            (<Second>result)[prop] = second[prop];\n        }\n    }\n    return <First & Second>result;\n}\n>\nclass Person {\n    constructor(public name: string) {\n    }\n}\ninterface Loggable {\n    log(name: string): void;\n}\nclass ConsoleLogger implements Loggable {\n    log(name) {\n        console.log(`Hello, I'm ${name}`)\n    }\n}\nconst jim = extend(new Person(\"Jim\"), ConsoleLogger.prototype);\nlet c = jim.log(jim.name);\nconsole.log(c);\n```\n\n### 11.2 è”åˆç±»å‹\n\n> è”åˆç±»å‹ å’Œ äº¤å‰ç±»å‹ å¾ˆæœ‰å…³è”ï¼Œä½†æ˜¯ä½¿ç”¨ä¸Šå´å®Œå…¨ä¸åŒã€‚å¶å°”ä½ ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªä»£ç åº“å¸Œæœ›ä¼ å…¥ `number` æˆ– `string` ç±»å‹çš„å‚æ•°ã€‚ä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°ï¼š\n\n```typescript\n/**\n * Takes a string and adds \"padding\" to the left.\n * If 'padding' is a string, then 'padding' is appended to the left side.\n * If 'padding' is a number, then that number of spaces is added to the left side.\n */\nfunction padLeft(value: string, padding: any) {\n  if (typeof padding === \"number\") {\n    return Array(padding + 1).join(\" \") + value;\n  }\n  if (typeof padding === \"string\") {\n    return padding + value;\n  }\n  throw new Error(`Expected string or number, got '${padding}'.`);\n}\n\npadLeft(\"Hello World\", 4);\n```\n\n> `padLeft` å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œ`padding` å‚æ•°çš„ç±»å‹æŒ‡å®šæˆäº† `any`ã€‚è¿™å°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ—¢ä¸æ˜¯ `number` ä¹Ÿä¸æ˜¯ `string` ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯ `TypeScript` å´ä¸ä¼šæŠ¥é”™ã€‚\n>\n> ```typescript\n> let indentedString = padLeft(\"Hello World\", true); // ç¼–è¯‘é˜¶æ®µé€šè¿‡ï¼Œè¿è¡Œæ—¶æŠ¥é”™ã€‚\n> ```\n\n````\n>  åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€é‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†è¿™ä¸¤ç§ç±»å‹æŠ½è±¡æˆæœ‰å±‚çº§çš„ç±»å‹ã€‚è¿™ä¹ˆåšæ˜¾ç„¶æ˜¯éå¸¸æ¸…æ™°çš„ï¼Œä½†åŒæ—¶ä¹Ÿå­˜åœ¨äº†è¿‡åº¦è®¾è®¡ã€‚`padLeft` åŸå§‹ç‰ˆæœ¬çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯å…è®¸æˆ‘ä»¬ä¼ å…¥åŸå§‹ç±»å‹ã€‚è¿™æ ·åšçš„è¯ä½¿ç”¨èµ·æ¥æ—¢ç®€å•åˆæ–¹ä¾¿ã€‚å¦‚æœæˆ‘ä»¬å°±æ˜¯æƒ³ä½¿ç”¨å·²ç»å­˜åœ¨çš„å‡½æ•°çš„è¯ï¼Œè¿™ç§æ–°çš„æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚ä»£æ›¿ `any`ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ è”åˆç±»å‹ ä½œä¸º `padding` çš„å‚æ•°ã€‚\n\n\n\n```typescript\n/**\n * Takes a string and adds \"padding\" to the left.\n * If 'padding' is a string, then 'padding' is appended to the left side.\n * If 'padding' is a number, then that number of spaces is added to the left side.\n */\nfunction padLeft1(value: string, padding: string | number) {\n    // ...\n}\n\n// let indentedString1 = padLeft1(\"Hello world\", true); // errors during compilation\n````\n\n> è”åˆç±»å‹ è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚æˆ‘ä»¬ä½¿ç”¨ç«–çº¿(`|`)åˆ†éš”æ¯ä¸ªç±»å‹ï¼Œæ‰€ä»¥ `number | string | boolean` è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½æ˜¯ `number`, `string`, `boolean`\n\n```typescript\ninterface Bird {\n  fly();\n\n  lagEggs();\n}\n\ninterface Fish {\n  swim();\n\n  layEggs();\n}\n\nfunction getSmallPet(): Fish | Bird {\n  // ...\n}\nlet pet = getSmallPet();\npet.layEggs(); // <- ok\n// pet.swim(); // <- errors\n```\n\n> è¿™é‡Œçš„è”åˆç±»å‹å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ä½ å¾ˆå®¹æ˜“å°±ä¹ æƒ¯äº†ã€‚å¦‚æœä¸€ä¸ªå€¼çš„ç±»å‹æ˜¯ `A | B`ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®å®šçš„æ˜¯å®ƒåŒ…å«äº† `A` å’Œ `B` ä¸­å…±æœ‰çš„æˆå‘˜ã€‚è¿™ä¸ªä¾‹å­é‡Œï¼Œ`Bird` å…·æœ‰ä¸€ä¸ª `fly` æˆå‘˜ã€‚æˆ‘ä»¬ä¸èƒ½ç¡®å®šä¸€ä¸ª `Bird | Fish` ç±»å‹çš„å˜é‡æ˜¯å¦æœ‰ `fly` æ–¹æ³•ã€‚å¦‚æœå˜é‡åœ¨è¿è¡Œæ—¶æ˜¯ `Fish` ç±»å‹ï¼Œé‚£ä¹ˆè°ƒç”¨ `pet.fly()` å°±å‡ºé”™äº†ã€‚\n\n### 11.3 ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\n\n> è”åˆç±»å‹é€‚ç”¨äºé‚£äº›å€¼å¯ä»¥ä¸ºä¸åŒç±»å‹çš„æƒ…å†µã€‚ä½†å½“æˆ‘ä»¬æƒ³ç¡®åˆ‡åœ°äº†è§£æ˜¯å¦ä¸º `Fish` æ—¶æ€ä¹ˆåŠï¼Ÿ`JavaScript` é‡Œå¸¸ç”¨æ¥åŒºåˆ† `2` ä¸ªå¯èƒ½å€¼çš„æ–¹æ³•æ˜¯æ£€æŸ¥æˆå‘˜æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¹‹å‰æåŠçš„ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®è”åˆç±»å‹ä¸­å…±åŒæ‹¥æœ‰çš„æˆå‘˜ã€‚\n\n```typescript\ninterface Fish {\n  swim();\n  layEggs();\n}\ninterface Bird {\n  fly();\n  layEggs();\n}\nfunction getSmallPet(): Fish | Bird {\n  return;\n}\nlet pet = getSmallPet();\n```\n\n> æ¯ä¸€ä¸ªè®¿é—®çš„æˆå‘˜éƒ½ä¼šæŠ¥é”™\n\n```typescript\nif (pet.swim) {\n  pet.swim();\n} else if (pet.fly) {\n  pet.fly();\n}\n```\n\n> ä¸ºäº†è®©è¿™æ®µä»£ç å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€\n\n```typescript\nif ((<Fish>pet).swim) {\n  (<Fish>pet).swim();\n} else if ((<Bird>pet).fly) {\n  (<Bird>pet).fly();\n}\n```\n\n### 11.4 ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\n\n> è¿™é‡Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸å¾—ä¸å¤šæ¬¡ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚å‡è‹¥æˆ‘ä»¬ä¸€æ—¦æ£€æŸ¥è¿‡ç±»å‹ï¼Œå°±èƒ½åœ¨ä¹‹åçš„æ¯ä¸ªåˆ†æ”¯é‡Œæ¸…æ¥šåœ°çŸ¥é“ `pet` çš„ç±»å‹çš„è¯å°±å¥½äº†ã€‚\n\n> `TypeScript` é‡Œçš„ç±»å‹å®ˆå«æœºåˆ¶è®©å®ƒæˆä¸ºäº†ç°å®ã€‚ç±»å‹å®ˆå«å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚è¦æƒ³å®šä¹‰ä¸€ä¸ªç±»å‹å®ˆå«ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»å‹è°“è¯ï¼š\n\n```typescript\ninterface Fish {\n  swim();\n\n  layEggs();\n}\n\ninterface Bird {\n  fly();\n\n  layEggs();\n}\n\nfunction isFish(pet: Fish | Bird): pet is Fish {\n  return (<Fish>pet).swim !== undefined;\n}\n```\n\n> åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ`pet is Fish` å°±æ˜¯ç±»å‹è°“è¯ã€‚è°“è¯ä¸º `parameterName is Type` è¿™ç§å½¢å¼ï¼Œ `parameterName` å¿…é¡»æ˜¯æ¥è‡ªäºå½“å‰å‡½æ•°ç­¾åé‡Œçš„ä¸€ä¸ªå‚æ•°åã€‚\n> æ¯å½“ä½¿ç”¨ä¸€äº›å˜é‡è°ƒç”¨ `isFish` `æ—¶ï¼ŒTypeScript` ä¼šå°†å˜é‡ç¼©å‡ä¸ºé‚£ä¸ªå…·ä½“çš„ç±»å‹ï¼Œåªè¦è¿™ä¸ªç±»å‹ä¸å˜é‡çš„åŸå§‹ç±»å‹æ˜¯å…¼å®¹çš„\n> `swim` å’Œ `fly` çš„è°ƒç”¨éƒ½æ²¡æœ‰é—®é¢˜äº†\n\n```typescript\nif (isFish(pet)) {\n  pet.swim();\n} else {\n  pet.fly();\n}\n```\n\n> æ³¨æ„ `TypeScript` ä¸ä»…çŸ¥é“åœ¨ `if` åˆ†æ”¯é‡Œ `pet` æ˜¯ `Fish` ç±»å‹ï¼›å®ƒè¿˜æ¸…æ¥šåœ¨ `else` åˆ†ä¹‹é‡Œï¼Œä¸€å®šä¸æ˜¯ `Fish` ç±»å‹ï¼Œä¸€å®šæ˜¯ Bird ç±»å‹ã€‚\n\n### 11.5 typeof ç±»å‹å®ˆå«\n\n> ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è”åˆç±»å‹ä¹¦å†™ `padLeft` ä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ©ç”¨ç±»å‹æ–­è¨€æ¥å†™ï¼š\n\n```typescript\nfunction isNumber(x: any): x is number {\n  return typeof x === \"number\";\n}\n\nfunction isString(x: any): x is string {\n  return typeof x === \"string\";\n}\n\nfunction padLeft(value: string, padding: string | number) {\n  if (isNumber(padding)) {\n    return Array(padding + 1).join(\" \") + value;\n  }\n  if (isString(padding)) {\n    return padding + value;\n  }\n  throw new Error(`Expected string or number, go ${padding}.`);\n}\n```\n\n> ç„¶è€Œï¼Œå¿…é¡»è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯åŸå§‹ç±»å‹ï¼Œè¿™å¤ªç—›è‹¦äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¿…å°† `typeof x === \"number\"` æŠ½è±¡æˆä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸º `TypeScript` å¯ä»¥å°†å®ƒè¯†åˆ«ä¸ºä¸€ä¸ªç±»å‹å®ˆå«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œæ£€æŸ¥ç±»å‹äº†ã€‚\n\n```typescript\nfunction newPadLeft(value: string, padding: string | number) {\n  if (typeof padding === \"number\") {\n    return Array(padding + 1).join(\" \") + value;\n  }\n  if (typeof padding === \"string\") {\n    return padding + value;\n  }\n  throw new Error(`Expected string or number, go ${padding}.`);\n}\n```\n\n> è¿™äº› `typeof` ç±»å‹å®ˆå«åªæœ‰ä¸¤ç§å½¢å¼èƒ½è¢«è¯†åˆ«ï¼š`typeof v === \"typename\"` å’Œ `typeof v !== \"typename\"`, `\"typename\"` å¿…é¡»æ˜¯ `\"number\"`, `\"string\"`, `\"boolean\"` æˆ– `\"symbol\"`ã€‚ä½†æ˜¯ `TypeScript` å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹å®ˆå«ã€‚\n\n### 11.6 instanceof ç±»å‹å®ˆå«\n\n> `instanceof` ç±»å‹å®ˆå«æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥ç»†åŒ–ç±»å‹çš„ä¸€ç§æ–¹å¼ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å€Ÿé‰´ä¸€ä¸‹ä¹‹å‰å­—ç¬¦ä¸²å¡«å……çš„ä¾‹å­ï¼š\n\n```typescript\ninterface Padder {\n  getPaddingString(): string;\n}\n\nclass SpaceRepeatingPadder implements Padder {\n  constructor(private numSpaces: number) {}\n\n  getPaddingString() {\n    return Array(this.numSpaces + 1).join(\" \");\n  }\n}\n\nclass StringPadder implements Padder {\n  constructor(private value: string) {}\n\n  getPaddingString() {\n    return this.value;\n  }\n}\n\nfunction getRandomPadder() {\n  return Math.random() < 0.5 ? new SpaceRepeatingPadder(4) : new StringPadder(\" \");\n}\n\n// ç±»å‹ä¸º SpaceRepeatingPadder | StringPadder\nlet padder: Padder = getRandomPadder();\n\nif (padder instanceof SpaceRepeatingPadder) {\n  padder; // ç±»å‹ç»†åŒ–ä¸º 'SpaceRepeatingPadder'\n}\nif (padder instanceof StringPadder) {\n  padder; // ç±»å‹ç»†åŒ–ä¸º 'StringPadder'\n}\n```\n\n> `instanceof` çš„å³ä¾§è¦æ±‚æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ`TypeScript` å°†ç»†åŒ–ä¸º:\n\n1. æ­¤æ„é€ å‡½æ•°çš„ `prototype` å±æ€§çš„ç±»å‹ï¼Œå¦‚æœå®ƒçš„ç±»å‹ä¸ä¸º `any` çš„è¯\n2. æ ‡ç­¾ç­¾åæ‰€è¿”å›çš„ç±»å‹çš„è”åˆ\n\n> ä»¥æ­¤é¡ºåºã€‚\n\n### 11.7 å¯ä¸º null çš„ç±»å‹\n\n> `TypeScript` å…·æœ‰ä¸¤ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œ`null` å’Œ `undefined` ï¼Œå®ƒä»¬åˆ†åˆ«å…·æœ‰å€¼ `null` å’Œ `undefined`ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å‹æ£€æŸ¥å™¨ä¼šè®¤ä¸º `null` å’Œ `undefined` å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚`null` å’Œ `undefined` æ˜¯æ‰€æœ‰å…¶å®ƒç±»å‹çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚è¿™æ„å‘³ç€ï¼Œä½ é˜»æ­¢ä¸äº†å°†å®ƒä»¬èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œå°±ç®—æ˜¯ä½ æƒ³è¦é˜»æ­¢è¿™ç§æƒ…å†µä¹Ÿä¸è¡Œã€‚\n\n> `--strictNullChecks` æ ‡è®°å¯ä»¥è§£å†³æ­¤é”™è¯¯ï¼šå½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åŒ…å« `null` æˆ– `undefined`ã€‚\n\n- ä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ˜ç¡®çš„åŒ…å«å®ƒä»¬ï¼š```typescript\n  let s = \"foo\";\n  s = null; // --strictNullChecks æ¨¡å¼ä¸‹ é”™è¯¯ï¼Œ 'null' ä¸èƒ½èµ‹å€¼ç»™ 'string'\n  let sn: string | null = \"bar\";\n  sn = null; // Ok\n  sn = undefined; // --strictNullChecks æ¨¡å¼ä¸‹ error, å› ä¸º'undefined'ä¸èƒ½èµ‹å€¼ç»™'string | null'\n\n````\n\n\n\n\n>  æ³¨æ„ï¼šæŒ‰ç…§ `JavaScript` `çš„è¯­ä¹‰ï¼ŒTypeScript` ä¼šæŠŠ `null` å’Œ `undefined` åŒºåˆ«å¯¹å¾…ã€‚\n\n\n\n> `string | null`ï¼Œ`string | undefined` å’Œ `string | undefined | null` æ˜¯ä¸åŒçš„ç±»å‹ã€‚\n\n\n\n### 11.8 å¯é€‰å‚æ•°å’Œå¯é€‰å±æ€§\n\n\n- ä½¿ç”¨äº† `--strictNullChecks` ï¼Œå¯é€‰å‚æ•°ä¼šè¢«è‡ªåŠ¨åœ°åŠ ä¸Š `| undefined`:\n\n\n\n```typescript\nfunction f(x: number, y?: number) {\n    return x + (y || 0);\n}\nf(1, 2);\nf(1);\nf(1, undefined);\nf(1, null); // error, 'null' is not assignable to 'number | undefined'\n````\n\n- å¯é€‰å±æ€§ä¹Ÿä¼šæœ‰åŒæ ·çš„å¤„ç†\n\n```typescript\nclass C {\n  a: number;\n  b?: number;\n}\nlet c = new C();\nc.a = 12;\nc.a = undefined; // error, 'undefined' is not assignable to 'number'\nc.b = 13;\nc.b = undefined; // Ok\nc.b = null; // error, 'null' is not assignable to 'number | undefined'\n```\n\n### 11.9 ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\n\n> ç”±äºå¯ä»¥ä¸º `null` çš„ç±»å‹æ˜¯é€šè¿‡è”åˆç±»å‹å®ç°ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ç±»å‹å®ˆå«æ¥å»é™¤ `null`ã€‚å¹¸è¿åœ°æ˜¯è¿™ä¸åœ¨ `JavaScript` é‡Œå†™çš„ä»£ç ä¸€è‡´ï¼š\n\n```typescript\nfunction f(sn: string | null): string {\n  if (sn == null) {\n    return \"default\";\n  } else {\n    return sn;\n  }\n}\n```\n\n> è¿™é‡Œå¾ˆæ˜æ˜¾åœ°å»é™¤äº† `null`, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ­è·¯è¿ç®—ç¬¦:\n\n```typescript\nfunction f1(sn: string | null): string {\n  return sn || \"default\";\n}\n```\n\n> å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿå»é™¤ `null` æˆ– `undefined`ï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ‰‹åŠ¨å»é™¤ã€‚è¯­æ³•æ˜¯æ·»åŠ  `!` åç¼€ï¼š`identifier!` ä» `identifier` çš„ç±»å‹é‡Œå»é™¤äº† `null` å’Œ `undefined`ï¼š\n\n```typescript\nfunction broken(name: string | null): string {\n  function postfix(epihet: string) {\n    return name.charAt(0) + \". the\" + epihet; // error, 'name' is possibly null\n  }\n  name = name || \"Bob\";\n  return postfix(\"great\");\n}\n\nfunction fixed(name: string | null): string {\n  function postfix(epihet: string) {\n    return name!.charAt(0) + \". the\" + epihet; // Ok\n  }\n  name = name || \"Bob\";\n  return postfix(\"great\");\n}\n```\n\n> æœ¬ä¾‹ä½¿ç”¨äº†åµŒå¥—å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•å»é™¤åµŒå¥—å‡½æ•°çš„ `null` (é™¤éæ˜¯ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)ã€‚å› ä¸ºå®ƒæ— æ³•è·Ÿè¸ªæ‰€æœ‰å¯¹åµŒå¥—å‡½æ•°çš„è°ƒç”¨ï¼Œå°¤å…¶æ˜¯ä½ å°†å†…å±‚å‡½æ•°ä½œä¸ºå¤–å±‚å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœæ— æ³•çŸ¥é“å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå°±æ— æ³•çŸ¥é“è°ƒç”¨æ—¶ `name` çš„ç±»å‹ã€‚\n\n### 11.10 ç±»å‹åˆ«å\n\n1. ç±»å‹åˆ«åä¼šç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚ç±»å‹åˆ«åæœ‰æ—¶å’Œæ¥å£å¾ˆåƒï¼Œä½†æ˜¯å¯ä»¥ä½œç”¨äº åŸå§‹å€¼ï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ ä»¥åŠå…¶å®ƒä»»ä½•ä½ éœ€è¦æ‰‹å†™çš„ç±»å‹ã€‚\n\n```typescript\ntype Name = string;\ntype NameResolver = () => string;\ntype NameOrResolver = Name | NameResolver;\n\nfunction getName(n: NameOrResolver): Name {\n  if (typeof n === \"string\") {\n    return n;\n  } else {\n    return n();\n  }\n}\n```\n\n2. èµ·åˆ«åä¸ä¼šæ–°å»ºä¸€ä¸ªç±»å‹ - å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°åå­—æ¥å¼•ç”¨é‚£ä¸ªç±»å‹ã€‚\n\n3.ç»™åŸå§‹ç±»å‹èµ·åˆ«åé€šå¸¸æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå°½ç®¡å¯ä»¥ä½œä¸ºæ–‡æ¡£çš„ä¸€ç§å½¢å¼ä½¿ç”¨ã€‚\n\n4. åŒæ¥å£ä¸€æ ·ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ˜¯æ³›å‹ - æˆ‘ä»¬å¯ä»¥æ·»åŠ ç±»å‹å‚æ•°å¹¶ä¸”åœ¨åˆ«åå£°æ˜çš„å³ä¾§ä¼ å…¥ã€‚\n\n```typescript\ntype Container<T> = { value: T };\n```\n\n5. æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥åœ¨å±æ€§é‡Œå¼•ç”¨è‡ªå·±ï¼š\n\n```typescript\ntype Tree<T> = {\n  value: T;\n  left: Tree<T>;\n  right: Tree<T>;\n};\n```\n\n6. ä¸äº¤å‰ç±»å‹ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºä¸€äº›ååˆ†ç¨€å¥‡å¤æ€ªçš„ç±»å‹\n\n```typescript\ntype LinkedList<T> = T & { next: LinkedList<T> };\n\ninterface Person {\n  name: string;\n}\n\nvar people: LinkedList<Person>;\nvar s = people.name;\nvar s = people.next.name;\nvar s = people.next.next.name;\nvar s = people.next.next.next.name;\n```\n\n> ç„¶è€Œï¼Œç±»å‹åˆ«åä¸èƒ½å‡ºç°åœ¨å£°æ˜å³ä¾§çš„ä»»ä½•åœ°æ–¹\n\n```typescript\n// type Yikes = Array<Yikes>; // error\n```\n\n### 11.11 æ¥å£ vs ç±»å‹åˆ«å\n\n> åƒæˆ‘ä»¬æåˆ°çš„ï¼Œç±»å‹åˆ«åå¯ä»¥åƒæ¥å£ä¸€æ ·ï¼›ç„¶è€Œï¼Œä»æœ‰ä¸€äº›ç»†å¾®å·®åˆ«ã€‚\n\n1. æ¥å£åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼Œå¯ä»¥åœ¨å…¶å®ƒä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ç±»å‹åˆ«åå¹¶ä¸åˆ›å»ºæ–°åå­— - æ¯”å¦‚ï¼Œé”™è¯¯ä¿¡æ¯å°±ä¸ä¼šä½¿ç”¨åˆ«åã€‚\n\n> åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‡Œï¼Œåœ¨ç¼–è¯‘å™¨ä¸­å°†é¼ æ ‡æ‚¬åœåœ¨ `interfaced` ä¸Šï¼Œæ˜¾ç¤ºå®ƒè¿”å›çš„æ˜¯ `Interface`ï¼Œä½†æ‚¬åœåœ¨ `aliased` ä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„å´æ˜¯å¯¹è±¡å­—é¢é‡ç±»å‹ã€‚\n\n```typescript\ntype Alias = { num: number };\n\ninterface Interface {\n  num: number;\n}\n\ndeclare function aliased(arg: Alias): Alias;\n\ndeclare function interfaced(arg: Interface): Interface;\n```\n\n2. å¦ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ç±»å‹åˆ«åä¸èƒ½è¢« `extends` å’Œ `implements` (è‡ªå·±ä¹Ÿä¸èƒ½ `extends` å’Œ `implements` å…¶å®ƒç±»å‹)ã€‚å› ä¸º è½¯ä»¶ä¸­çš„å¯¹è±¡åº”è¯¥å¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹æ˜¯å°é—­çš„ï¼Œä½ åº”è¯¥å°½é‡å»ä½¿ç”¨æ¥å£ä»£æ›¿ç±»å‹åˆ«åã€‚\n3. å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æ— æ³•é€šè¿‡æ¥å£æ¥æè¿°ä¸€ä¸ªç±»å‹å¹¶ä¸”éœ€è¦ä½¿ç”¨ è”åˆç±»å‹ æˆ– å…ƒç»„ç±»å‹ï¼Œè¿™æ—¶é€šå¸¸ä¼šä½¿ç”¨ç±»å‹åˆ«åã€‚\n\n### 11.12 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\n\n> å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å…è®¸ä½ æŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»çš„å›ºå®šå€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å¯ä»¥ä¸è”åˆç±»å‹ï¼Œç±»å‹å®ˆå«å’Œç±»å‹åˆ«åå¾ˆå¥½çš„é…åˆã€‚é€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥å®ç°ç±»ä¼¼æšä¸¾ç±»å‹çš„å­—ç¬¦ä¸²ã€‚\n\n```typescript\ntype Easing = \"ease-in\" | \"ease-out\" | \"ease-in-out\";\n\nclass UIElement {\n  animate(dx: number, dy: number, easing: Easing) {\n    if (easing === \"ease-in\") {\n      // ...\n    } else if (easing === \"ease-out\") {\n      // ...\n    } else if (easing === \"ease-in-out\") {\n      // ...\n    } else {\n      // error! should not pass null or undefined.\n    }\n  }\n}\n\nlet button = new UIElement();\nbutton.animate(0, 0, \"ease-in\");\n// button.animate(0, 0,\"uneasy\"); // error: \"uneasy\" is not allowed here\n```\n\n- ä½ åªèƒ½ä»ä¸‰ç§å…è®¸çš„å­—ç¬¦ä¸­é€‰æ‹©å…¶ä¸€æ¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä¼ å…¥å…¶å®ƒå€¼åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚\n\n```typescript\n// Argument of type '\"uneasy\"' is not assignable to parameter of type '\"ease-in\" | \"ease-out\" | \"ease-in-out\"'\n```\n\n- å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è¿˜å¯ä»¥ç”¨äºåŒºåˆ†å‡½æ•°é‡è½½\n\n```typescript\nfunction createElement(tagName: \"img\"): HTMLImageElement;\nfunction createELement(tagName: \"input\"): HTMLInputElement;\n// ... more overloads ...\nfunction createElement(tagName: \"string\"): Element {\n  // ... code goes here ...\n}\n```\n\n### 11.13 æ•°å­—å­—é¢é‡ç±»å‹\n\n- `TypeScript` è¿˜å…·æœ‰æ•°å­—å­—é¢é‡ç±»å‹\n\n```typescript\nfunction rollDice(): 1 | 2 | 3 | 4 | 5 | 6 {\n  // ...\n}\n```\n\n- æˆ‘ä»¬å¾ˆå°‘ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼Œä½†å®ƒä»¬å¯ä»¥ç”¨åœ¨ç¼©å°èŒƒå›´è°ƒè¯• `bug` çš„æ—¶å€™ã€‚\n\n```typescript\nfunction foo(x: number) {\n  if (x !== 1 || x !== 2) {\n    // ~~~~~~\n    // Operator '!==' cannot be applied to types '1' and '2'\n  }\n}\n```\n\n> æ¢å¥è¯è¯´ï¼Œå½“ `x` ä¸ `2` è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒçš„å€¼å¿…é¡»ä¸º `1`ï¼Œè¿™å°±æ„å‘³ç€ä¸Šé¢çš„æ¯”è¾ƒæ£€æŸ¥æ˜¯éæ³•çš„ã€‚\n\n### 11.14 æšä¸¾æˆå‘˜ç±»å‹\n\n> å¦‚æˆ‘ä»¬åœ¨æšä¸¾ä¸€èŠ‚é‡Œæåˆ°çš„ï¼Œå½“æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½æ˜¯ç”¨å­—é¢é‡åˆå§‹åŒ–çš„æ—¶å€™æšä¸¾æˆå‘˜æ˜¯å…·æœ‰ç±»å‹çš„ã€‚åœ¨æˆ‘ä»¬è°ˆåŠâ€œå•ä¾‹ç±»å‹â€çš„æ—¶å€™ï¼Œå¤šæ•°æ˜¯æŒ‡ æšä¸¾æˆå‘˜ç±»å‹ å’Œ æ•°å­—/å­—ç¬¦ä¸² å­—é¢é‡ç±»å‹ï¼Œå°½ç®¡å¤§å¤šæ•°ç”¨æˆ·ä¼šäº’æ¢ä½¿ç”¨â€œå•ä¾‹ç±»å‹â€å’Œâ€œå­—é¢é‡ç±»å‹â€ã€‚\n\n### 11.15 å¯è¾¨è¯†è”åˆ\n\n> ä½ å¯ä»¥åˆå¹¶ å•ä¾‹ç±»å‹ï¼Œè”åˆç±»å‹ï¼Œç±»å‹å®ˆå« å’Œ ç±»å‹åˆ«å æ¥åˆ›å»ºä¸€ä¸ªå«åš å¯è¾¨è¯†è”åˆ çš„é«˜çº§æ¨¡å¼ï¼Œå®ƒä¹Ÿç§°ä½œ æ ‡ç­¾è”åˆ æˆ– ä»£æ•°æ•°æ®ç±»å‹ã€‚å¯è¾¨è¯†è”åˆ åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆæœ‰ç”¨å¤„ã€‚ä¸€äº›è¯­è¨€ä¼šè‡ªåŠ¨åœ°ä¸ºä½ è¾¨è¯†è”åˆï¼›è€Œ `TypeScript` åˆ™åŸºäºå·²æœ‰çš„ `JavaScript` æ¨¡å¼ï¼Œã€‚å®ƒå…·æœ‰ `3` ä¸ªè¦ç´ ï¼š\n\n1. å…·æœ‰æ™®é€šçš„å•ä¾‹ç±»å‹å±æ€§ - å¯è¾¨è¯†çš„ç‰¹å¾\n2. ä¸€ä¸ªç±»å‹åˆ«ååŒ…å«äº†é‚£äº›ç±»å‹çš„è”åˆ - è”åˆã€‚\n3. æ­¤å±æ€§ä¸Šçš„ç±»å‹å®ˆå«\n\n```typescript\ninterface Square {\n  kind: \"square\";\n  size: number;\n}\n\ninterface Rectangle {\n  kind: \"rectangle\";\n  width: number;\n  height: number;\n}\n\ninterface Circle {\n  kind: \"circle\";\n  radius: number;\n}\n```\n\n> é¦–å…ˆæˆ‘ä»¬å£°æ˜äº†å°†è¦è”åˆçš„æ¥å£ã€‚æ¯ä¸ªæ¥å£éƒ½æœ‰ `kind` å±æ€§ä½†æœ‰ä¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€‚`kind` å±æ€§ç§°ä½œ å¯è¾¨è¯†çš„ç‰¹å¾æˆ–æ ‡ç­¾ã€‚å…¶å®ƒçš„å±æ€§åˆ™ç‰¹å®šäºå„ä¸ªæ¥å£ã€‚æ³¨æ„ï¼Œç›®å‰å„ä¸ªæ¥å£é—´æ˜¯æ²¡æœ‰è”ç³»çš„ã€‚\n\n- ä¸‹é¢æˆ‘ä»¬å°†å®ƒä»¬è”åˆåˆ°ä¸€èµ·ã€‚\n\n```typescript\ntype Shape = Square | Rectangle | Circle;\n```\n\n- ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å¯è¾¨è¯†è”åˆ\n\n```typescript\nfunction area(s: Shape) {\n  switch (s.kind) {\n    case \"square\":\n      return s.size * s.size;\n    case \"rectangle\":\n      return s.width * s.height;\n    case \"circle\":\n      return Math.PI * s.radius ** 2;\n  }\n}\nlet areaSquare = area({ kind: \"square\", size: 12 });\nlet areaRectangle = area({ kind: \"rectangle\", width: 14, height: 13 });\nlet areaCircle = area({ kind: \"circle\", radius: 5 });\nconsole.log(areaSquare, areaRectangle, areaCircle);\n```\n\n### 11.16 å®Œæ•´æ€§æ£€æŸ¥\n\n> å½“æ²¡æœ‰æ¶µç›–æ‰€æœ‰ å¯è¾¨è¯†è”åˆ çš„å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©ç¼–è¯‘å™¨å¯ä»¥é€šçŸ¥æˆ‘ä»¬ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ äº† `Triangle` å’Œ `Shape`ï¼Œæˆ‘ä»¬åŒæ—¶è¿˜éœ€è¦æ›´æ–° `area`ï¼š\n\n```typescript\ninterface Square {\n  kind: \"square\";\n  size: number;\n}\n\ninterface Rectangle {\n  kind: \"rectangle\";\n  width: number;\n  height: number;\n}\n\ninterface Circle {\n  kind: \"circle\";\n  radius: number;\n}\n\n// interface Triangle { kind: \"triangle\", bottom: number, height: number }\n\ntype Shape = Square | Rectangle | Circle;\n\nfunction area(s: Shape) {\n  switch (s.kind) {\n    case \"square\":\n      return s.size * s.size;\n    case \"rectangle\":\n      return s.width * s.height;\n    case \"circle\":\n      return Math.PI * s.radius ** 2;\n  }\n  // should error here - we didn't handle case \"triangle\"\n}\n```\n\n- æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ã€‚\n\n1. é¦–å…ˆæ˜¯å¯ç”¨ `--strictNullChecks` å¹¶ä¸”æŒ‡å®šä¸€ä¸ªè¿”å›å€¼ç±»å‹:\n\n```typescript\nfunction area1(s: Shape): number {\n  switch (s.kind) {\n    case \"square\":\n      return s.size * s.size;\n    case \"rectangle\":\n      return s.height * s.width;\n    case \"circle\":\n      return Math.PI * s.radius ** 2;\n  }\n}\n```\n\n> å› ä¸º `switch` æ²¡æœ‰åŒ…å«æ‰€æœ‰æƒ…å†µï¼Œæ‰€ä»¥ `TypeScript` è®¤ä¸ºè¿™ä¸ªå‡½æ•°æœ‰æ—¶å€™ä¼šè¿”å› `undefined`ã€‚å¦‚æœä½ æ˜ç¡®åœ°æŒ‡å®šäº†è¿”å›å€¼ç±»å‹ä¸º `number`ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®é™…ä¸Šè¿”å›å€¼ç±»å‹ä¸º `number | undefined`ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨äº›å¾®å¦™ä¹‹å¤„ä¸” `--strictNullChecks` å¯¹æ—§ä»£ç æ”¯æŒä¸å¥½ã€‚\n\n2. ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨ `never` ç±»å‹ï¼Œç¼–è¯‘å™¨ç”¨å®ƒæ¥è¿›è¡Œå®Œæ•´æ€§æ£€æŸ¥\n\n```typescript\nfunction assertNever(x: never): never {\n throw new Error(\"Unexpected object: \" + x);\n}\n>\nfunction area2(s: Shape) {\n switch (s.kind) {\n     case \"square\":\n         return s.size * s.size;\n     case \"rectangle\":\n         return s.width * s.height;\n     case \"circle\":\n         return Math.PI * s.radius ** 2;\n     default:\n         return assertNever(s); // error here if there are missing cases\n }\n}\n```\n\n> è¿™é‡Œï¼Œ`assertNever` æ£€æŸ¥ `s` æ˜¯å¦ä¸º `never` ç±»å‹ - å³ä¸ºé™¤å»æ‰€æœ‰å¯èƒ½æƒ…å†µåå‰©ä¸‹çš„ç±»å‹ã€‚å¦‚æœä½ å¿˜è®°äº†æŸä¸ª `case`ï¼Œé‚£ä¹ˆ `s` å°†å…·æœ‰ä¸€ä¸ªçœŸå®çš„ç±»å‹å¹¶ä¸”ä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚è¿™ç§æ–¹å¼éœ€è¦ä½ å®šä¹‰ä¸€ä¸ªé¢å¤–çš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨ä½ å¿˜è®°æŸä¸ª `case` çš„æ—¶å€™ä¹Ÿæ›´åŠ æ˜æ˜¾ã€‚\n\n### 11.17 å¤šæ€çš„ this ç±»å‹\n\n> å¤šæ€çš„ `this` ç±»å‹è¡¨ç¤ºçš„æ˜¯æŸä¸ªåŒ…å«ç±»æˆ–æ¥å£çš„å­ç±»å‹ã€‚è¿™è¢«ç§°ä½œæ˜¯ `F-bounded` å¤šæ€æ€§ã€‚å®ƒèƒ½å¾ˆå®¹æ˜“çš„è¡¨ç°è¿è´¯æ¥å£é—´çš„ç»§æ‰¿ã€‚\n\n- æ¯”å¦‚ï¼Œåœ¨è®¡ç®—å™¨çš„ä¾‹å­é‡Œï¼Œåœ¨æ¯ä¸ªæ“ä½œä¹‹åéƒ½è¿”å› `this` ç±»å‹ã€‚\n\n```typescript\nclass BasicCalculator {\n  public constructor(protected value: number = 0) {}\n\n  public currentValue(): number {\n    return this.value;\n  }\n\n  public add(operand: number): this {\n    this.value += operand;\n    return this;\n  }\n\n  public multiply(operand: number): this {\n    this.value *= operand;\n    return this;\n  }\n\n  //...other operations go here...\n}\n\nlet v = new BasicCalculator(2).multiply(5).add(1).currentValue();\nconsole.log(v);\n```\n\n> ç”±äºè¿™ä¸ªç±»ä½¿ç”¨äº† `this` ç±»å‹ï¼Œä½ å¯ä»¥ç»§æ‰¿å®ƒï¼Œæ–°çš„ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼Œä¸éœ€è¦åšä»»ä½•æ”¹å˜ã€‚\n\n```typescript\nclass ScientificCalculator extends BasicCalculator {\n  public constructor(value = 0) {\n    super(value);\n  }\n\n  public sin() {\n    this.value = Math.sin(this.value);\n    return this;\n  }\n\n  // ... other operations go here ...\n}\n\nlet v1 = new ScientificCalculator(2).multiply(5).sin().add(1).currentValue();\nconsole.log(v1);\n```\n\n> å¦‚æœæ²¡æœ‰ `this` ç±»å‹ï¼Œ`ScientificCalculator` å°±ä¸èƒ½å¤Ÿåœ¨ç»§æ‰¿ `BasicCalculator` çš„åŒæ—¶è¿˜ä¿æŒæ¥å£çš„è¿è´¯æ€§ã€‚`multiply` å°†ä¼šè¿”å› `BasicCalculator`ï¼Œå®ƒå¹¶æ²¡æœ‰ `sin` æ–¹æ³•ã€‚ç„¶è€Œï¼Œä½¿ç”¨ `this` ç±»å‹ï¼Œ`multiply` ä¼šè¿”å› `this`ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ `ScientificCalculator`ã€‚\n\n### 11.18 ç´¢å¼•ç±»å‹\n\n> ä½¿ç”¨ç´¢å¼•ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿæ£€æŸ¥ä½¿ç”¨äº†åŠ¨æ€å±æ€§åçš„ä»£ç ã€‚\n\n- ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„ `JavaScript` æ¨¡å¼æ˜¯ä»å¯¹è±¡ä¸­é€‰å–å±æ€§çš„å­é›†ã€‚\n\n```typescript\nfunction js_pluck(o, names) {\n  return names.map(n => o[n]);\n}\n```\n\n- ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ `TypeScript` é‡Œä½¿ç”¨æ­¤å‡½æ•°ï¼Œé€šè¿‡ ç´¢å¼•ç±»å‹æŸ¥è¯¢å’Œ ç´¢å¼•è®¿é—® æ“ä½œç¬¦ï¼š\n\n```typescript\nfunction pluck<T, K extends keyof T>(o: T, names: K[]): T[K][] {\n  return names.map(n => o[n]);\n}\n\ninterface Person {\n  name: string;\n  age: number;\n}\n\nlet person: Person = {\n  name: \"Jarid\",\n  age: 35\n};\nlet strings: string[] = pluck(person, [\"name\"]);\nconsole.log(strings);\n```\n\n> ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ `name` æ˜¯å¦çœŸçš„æ˜¯ `Person` çš„ä¸€ä¸ªå±æ€§ã€‚æœ¬ä¾‹è¿˜å¼•å…¥äº†å‡ ä¸ªæ–°çš„ç±»å‹æ“ä½œç¬¦ã€‚\n\n#### 11.18.1 é¦–å…ˆæ˜¯ `keyof T`ï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\n\n> å¯¹äºä»»ä½•ç±»å‹ `T` ï¼Œ`keyof T` çš„ç»“æœä¸º `T` ä¸Šå·²çŸ¥çš„å…¬å…±å±æ€§åçš„è”åˆã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nlet personProps: keyof Person; // 'name' | 'age'\n```\n\n> `keyof Person` æ˜¯å®Œå…¨å¯ä»¥ä¸ `'name' \\| 'age'` äº’ç›¸æ›¿æ¢çš„ã€‚ä¸åŒçš„æ˜¯å¦‚æœä½ æ·»åŠ äº†å…¶å®ƒçš„å±æ€§åˆ° `Person`, ä¾‹å¦‚ `address: string`ï¼Œé‚£ä¹ˆ`keyof Person` ä¼šè‡ªåŠ¨å˜ä¸º `'name' | 'age' | 'address'`ã€‚ä½ å¯ä»¥åƒ `pluck` å‡½æ•°è¿™ç±»ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ `keyof` ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ä¹‹å‰ä½ å¹¶ä¸æ¸…æ¥šå¯èƒ½å‡ºç°çš„å±æ€§åã€‚ä½†ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ä½ æ˜¯å¦ä¼ å…¥äº†æ­£ç¡®çš„å±æ€§åç»™ `pluck`ï¼š\n\n```typescript\n// pluck(person, ['age', 'unknown']); // error, 'unknown' is not in 'name' | 'age'\n```\n\n#### 11.18.2 ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯ `T[K]`, ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\n\n> åœ¨è¿™é‡Œï¼Œç±»å‹è¯­æ³•ååº”äº†è¡¨è¾¾å¼è¯­æ³•ã€‚è¿™æ„å‘³ç€ `person['name']` å…·æœ‰ç±»å‹ `Person['name']` -- åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œåˆ™ä¸º `string` ç±»å‹ã€‚ç„¶è€Œï¼Œå°±åƒç´¢å¼•ç±»å‹æŸ¥è¯¢ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨æ™®é€šçš„ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ `T[K]`ï¼Œè¿™æ­£æ˜¯å®ƒçš„å¼ºå¤§æ‰€åœ¨ã€‚ä½ åªè¦ç¡®ä¿ç±»å‹å˜é‡ `K extends keyof T` å°±å¯ä»¥äº†ã€‚\n\n- ä¾‹å¦‚ä¸‹é¢ `getProperty` å‡½æ•°çš„ä¾‹å­ï¼š\n\n```typescript\nfunction getProperty<T, K extends keyof T>(o: T, name: K): T[K] {\n  return o[name]; // o[name] is of type T[K]\n}\n```\n\n> `getProperty` é‡Œçš„ `o: T` å’Œ `name: K`ï¼Œæ„å‘³ç€ `o[name]: T[K]`ã€‚å½“ä½ è¿”å› `T[K]` çš„ç»“æœï¼Œ\n\n> ç¼–è¯‘å™¨ä¼šæ˜¯å®ä¾‹åŒ–é”®çš„çœŸå®ç±»å‹ï¼Œå› æ­¤ `getProperty` çš„è¿”å›å€¼ç±»å‹ä¼šéšç€ä½ éœ€è¦çš„å±æ€§æ”¹å˜ã€‚\n\n```typescript\nlet _name: string = getProperty(person, \"name\");\nlet _age: number = getProperty(person, \"age\");\n// let unknown = getProperty(person, \"unknown\"); // error, 'unknown' is not in 'name' | 'age'\nconsole.log(_name, \" \", _age);\n```\n\n### 11.19 ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\n\n> `keyof` å’Œ `T[K]` ä¸å­—ç¬¦ä¸²ç´¢å¼•ç­¾åè¿›è¡Œäº¤äº’ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²ç´¢å¼•ç­¾åçš„ç±»å‹ï¼Œé‚£ä¹ˆ `keyof T` ä¼šæ˜¯ `string`ã€‚å¹¶ä¸” `T[string]` ä¸ºç´¢å¼•ç­¾åçš„ç±»å‹ã€‚\n\n```typescript\ninterface Dictionary<T> {\n  [key: string]: T;\n}\nlet keys: keyof Dictionary<number>; // string\nlet value: Dictionary<number>[\"foo\"]; // number\n```\n\n### 11.20 æ˜ å°„ç±»å‹\n\n- ä¸€ä¸ªå¸¸è§çš„ä»»åŠ¡æ˜¯å°†ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹æ¯ä¸ªå±æ€§éƒ½å˜ä¸ºå¯é€‰çš„ã€‚\n\n```typescript\ninterface PersonPartial {\n  name?: string;\n  age?: number;\n}\n```\n\n- æˆ–è€…æˆ‘ä»¬åªæƒ³è¦ä¸€ä¸ªåªè¯»ç‰ˆæœ¬\n\n```typescript\ninterface PersonReadonly {\n  readonly name: string;\n  readonly age: number;\n}\n```\n\n> è¿™åœ¨ `JavaScript` é‡Œç»å¸¸å‡ºç°ã€‚`TypeScript` æä¾›äº†ä»æ—§ç±»å‹ä¸­åˆ›å»ºæ–°ç±»å‹çš„ä¸€ç§æ–¹å¼ `--` æ˜ å°„ç±»å‹ã€‚åœ¨æ˜ å°„ç±»å‹é‡Œï¼Œæ–°ç±»å‹ä»¥ç›¸åŒçš„å½¢å¼å»è½¬æ¢æ—§ç±»å‹é‡Œæ¯ä¸ªå±æ€§ã€‚å‡å¦‚ï¼Œä½ å¯ä»¥ä»¤æ¯ä¸ªå±æ€§æˆä¸º `readonly` ç±»å‹æˆ–å¯é€‰çš„ã€‚\n\n- ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```typescript\ntype Readonly<T> = {\n  readonly [P in keyof T]: T[P];\n};\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n```\n\n- åƒä¸‹é¢è¿™æ ·ä½¿ç”¨\n\n```typescript\ninterface Person {}\ntype PersonPartial = Partial;\ntype PersonReadonly = Readonly;\n```\n\n> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¯­æ³•æè¿°çš„æ˜¯ç±»å‹è€Œéæˆå‘˜ã€‚è‹¥æƒ³æ·»åŠ é¢å¤–çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ äº¤å‰ç±»å‹ã€‚\n\n- è¿™æ ·ä½¿ç”¨\n\n```typescript\ntype PartialWithNewMember<T> = {\n  [P in keyof T]?: T[P];\n} & { newMember: boolean };\n```\n\n- ä¸è¦è¿™æ ·ä½¿ç”¨\n\n```typescript\ntype PartialWithNewMember<T> = {\n  [P in keyof T]?: T[P];\n  newMember: boolean;\n}\n```\n\n> ä¸‹é¢æ¥çœ‹çœ‹æœ€ç®€å•çš„æ˜ å°„ç±»å‹å’Œå®ƒçš„ç»„æˆéƒ¨åˆ†\n\n```typescript\ntype Keys = \"option1\" | \"option2\";\ntype Flags = { [K in Keys]: boolean };\n```\n\n> å®ƒçš„è¯­æ³•ä¸ç´¢å¼•ç­¾åçš„è¯­æ³•ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨äº† `for...in`ã€‚å…·æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š\n\n1. ç±»å‹å˜é‡ `K`ï¼Œå®ƒä¼šä¾æ¬¡ç»‘å®šåˆ°æ¯ä¸ªå±æ€§ã€‚\n2. å­—ç¬¦ä¸²å­—é¢é‡è”åˆçš„ `Keys`ï¼Œå®ƒåŒ…å«äº†è¦è¿­ä»£çš„å±æ€§åçš„é›†åˆã€‚\n3. å±æ€§çš„ç»“æœç±»å‹ã€‚\n\n> åœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­é‡Œï¼Œ`Keys` æ˜¯ç¡¬ç¼–ç çš„å±æ€§åˆ—è¡¨å¹¶ä¸”å±æ€§ç±»å‹æ°¸è¿œæ˜¯ `boolean`ï¼Œå› æ­¤è¿™ä¸ªæ˜ å°„ç±»å‹\n\n- ç­‰åŒäºï¼š\n\n```typescript\ntype _FLags = {\n  option1: boolean;\n  option2: boolean;\n};\n```\n\n> åœ¨çœŸæ­£çš„åº”ç”¨é‡Œï¼Œå¯èƒ½ä¸åŒäºä¸Šé¢çš„ `Readonly` æˆ– `Partial`ã€‚å®ƒä»¬ä¼šåŸºäºä¸€äº›å·²å­˜åœ¨çš„ç±»å‹ï¼Œä¸”æŒ‰ç…§ä¸€å®šçš„æ–¹å¼è½¬æ¢å­—æ®µã€‚è¿™å°±æ˜¯ `keyof` å’Œ `ç´¢å¼•è®¿é—®ç±»å‹` è¦åšçš„äº‹æƒ…ã€‚\n\n```typescript\ntype NullablePerson = { [P in keyof Person]: Person[P] | null };\ntype PartialPerson = { [P in keyof Person]?: Person[P] };\n```\n\n> ä½†å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹æ˜¯å¯ä»¥æœ‰ä¸€äº›é€šç”¨ç‰ˆæœ¬ã€‚\n\n```typescript\ntype Nullable<T> = { [P in keyof T]: T[P] | null };\ntype Partial1<T> = { [P in keyof T]?: T[P] };\n```\n\n> åœ¨è¿™äº›ä¾‹å­é‡Œï¼Œå±æ€§åˆ—è¡¨æ˜¯ `keyof T` ä¸”ç»“æœç±»å‹æ˜¯ `T[P]` çš„å˜ä½“ã€‚è¿™æ˜¯ä½¿ç”¨é€šç”¨æ˜ å°„ç±»å‹çš„ä¸€ä¸ªå¥½æ¨¡ç‰ˆã€‚å› ä¸ºè¿™ç±»è½¬æ¢æ˜¯åŒæ€çš„ï¼Œæ˜ å°„åªä½œç”¨äº `T` çš„å±æ€§è€Œæ²¡æœ‰å…¶å®ƒçš„ã€‚ç¼–è¯‘å™¨çŸ¥é“åœ¨æ·»åŠ ä»»ä½•æ–°å±æ€§ä¹‹å‰å¯ä»¥æ‹·è´æ‰€æœ‰å­˜åœ¨çš„å±æ€§ä¿®é¥°ç¬¦ã€‚å‡å¦‚ï¼Œå‡è®¾ `Person.name` æ˜¯åªè¯»çš„ï¼Œé‚£ä¹ˆ `Partial1<Person>.name` ä¹Ÿå°†æ˜¯åªè¯»çš„ä¸”ä¸ºå¯é€‰çš„ã€‚\n\n> ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œ`T[P]` è¢«åŒ…è£…åœ¨ `Proxy<T>` ç±»é‡Œï¼š\n\n```typescript\ntype Proxy<T> = {\n  get(): T;\n  set(value: T): void;\n};\ntype Proxify<T> = {\n  [P in keyof T]: Proxy<T[P]>;\n};\nfunction proxify<T>(o: T): Proxify<T> {\n  // ...wrap proxies\n}\nlet proxyProps = proxify(props);\n```\n\n> æ³¨æ„ `Readonly<T>` å’Œ `Partial<T>` ç”¨å¤„ä¸å°ï¼Œå› æ­¤å®ƒä»¬äº `pick` å’Œ `Record` ä¸€åŒè¢«åŒ…å«è¿›äº† `TypeScript` çš„æ ‡å‡†åº“é‡Œï¼š\n\n```typescript\ntype Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\ntype Record<K extends keyof any, T> = {\n  [P in K]: T;\n};\n```\n\n> `Readonly`, `Partial` å’Œ `Pick` æ˜¯åŒæ€çš„ï¼Œä½† `Record` ä¸æ˜¯ã€‚å› ä¸º `Record` å¹¶ä¸éœ€è¦è¾“å…¥ç±»å‹æ¥æ‹·è´å±æ€§ï¼Œæ‰€ä»¥å®ƒä¸å±äºåŒæ€ï¼š\n\n```typescript\ntype ThreeStringProps = Record<\"prop1\" | \"prop2\" | \"prop3\", string>;\n```\n\n> éåŒæ€ç±»å‹æœ¬è´¨ä¸Šä¼šåˆ›å»ºæ–°çš„å±æ€§ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šä»å®ƒå¤„æ‹·è´å±æ€§ä¿®é¥°ç¬¦ã€‚\n\n### 11.21 ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\n\n> ç°åœ¨ä½ äº†è§£äº†å¦‚ä½•åŒ…è£…ä¸€ä¸ªç±»å‹çš„å±æ€§ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ‹†åŒ…ã€‚å…¶å®è¿™ä¹Ÿéå¸¸å®¹æ˜“ï¼š\n\n```typescript\ntype Proxify<T> = {\n  get(): T;\n  set(value: T): void;\n};\n\nfunction unproxify<T>(t: Proxify<T>): T {\n  let result = {} as T;\n  for (const k in t) {\n    result[k] = t[k].get();\n  }\n  return result;\n}\n// let originalProps = unproxify(proxyProps);\n```\n\n> æ³¨æ„è¿™ä¸ªæ‹†åŒ…æ¨æ–­åªé€‚ç”¨äºåŒæ€çš„æ˜ å°„ç±»å‹ã€‚å¦‚æœæ˜ å°„ç±»å‹ä¸æ˜¯åŒæ€çš„ï¼Œé‚£ä¹ˆéœ€è¦ç»™æ‹†åŒ…å‡½æ•°ä¸€ä¸ªæ˜ç¡®çš„ç±»å‹å‚æ•°ã€‚\n\n### 11.22 æœ‰æ¡ä»¶ç±»å‹\n\n> `TypeScript 2.8` å¼•å…¥äº†æœ‰æ¡ä»¶ç±»å‹ï¼Œå®ƒèƒ½å¤Ÿè¡¨ç¤ºéç»Ÿä¸€çš„ç±»å‹ã€‚æœ‰æ¡ä»¶çš„ç±»å‹ä¼šä»¥ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç±»å‹å…³ç³»æ£€æµ‹ï¼Œä»è€Œåœ¨ä¸¤ç§ç±»å‹ä¸­é€‰æ‹©å…¶ä¸€ï¼š\n\n```typescript\nT extends U ? X : Y\n```\n\n> ä¸Šé¢çš„ç±»å‹æ„æ€æ˜¯ï¼šè‹¥ `T` èƒ½å¤Ÿèµ‹å€¼ç»™ `U`ï¼Œé‚£ä¹ˆç±»å‹æ˜¯ `X`ï¼Œå¦åˆ™ä¸º `Y`\n\n> æœ‰æ¡ä»¶çš„ç±»å‹ `T extends U ? X : Y` æˆ–è€…è§£æä¸º `X`ï¼Œæˆ–è€…è§£æä¸º `Y`ï¼Œå†æˆ–è€…å»¶è¿Ÿè§£æï¼Œå› ä¸ºå®ƒå¯èƒ½ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡ã€‚è‹¥ `T` æˆ– `U` åŒ…å«ç±»å‹å‚æ•°ï¼Œé‚£ä¹ˆæ˜¯å¦è§£æä¸º `X` æˆ– `Y` æˆ–æ¨è¿Ÿï¼Œå–å†³äºç±»å‹ç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®š `T` æ€»æ˜¯å¯ä»¥èµ‹å€¼ç»™ `U`ã€‚\n\n- ä¸‹é¢æ˜¯ä¸€äº›ç±»å‹å¯ä»¥è¢«ç«‹å³è§£æçš„ä¾‹å­ï¼š\n\n```typescript\ndeclare function f<T extends boolean>(x: T): T extends true ? string : number;\n\n// Type is 'string' | 'number'\nlet x = f(Math.random() < 0.5);\n```\n\n> å¦å¤–ä¸€ä¸ªä¾‹å­æ¶‰åŠ `TypeName` ç±»å‹åˆ«åï¼Œå®ƒä½¿ç”¨äº†åµŒå¥—äº†æœ‰æ¡ä»¶ç±»å‹\n\n```typescript\ntype TypeName<T> = T extends string ? \"string\" : T extends number ? \"number\" : T extends boolean ? \"boolean\" : T extends undefined ? \"undefined\" : T extends Function ? \"function\" : \"object\";\n\ntype T0 = TypeName<string>; // \"string\"\ntype T1 = TypeName<\"a\">; // \"string\"\ntype T2 = TypeName<true>; // \"boolean\"\ntype T3 = TypeName<() => void>; // \"function\"\ntype T4 = TypeName<string[]>; // \"object\"\n```\n\n- ä¸‹é¢æ˜¯ä¸€ä¸ªæœ‰æ¡ä»¶ç±»å‹è¢«æ¨è¿Ÿè§£æçš„ä¾‹å­\n\n```typescript\ninterface Foo {\n  propA: boolean;\n  propB: boolean;\n}\ndeclare function f<T>(x: T): T extends Foo ? string : number;\nfunction foo<U>(x: U) {\n  // Has type 'U extends Foo ? string : number'\n  let a = f(x);\n  // This assignment is allowed though!\n  let b: string | number = a;\n}\n```\n\n> è¿™é‡Œï¼Œ`a` å˜é‡å«æœ‰æœªç¡®å®šçš„æœ‰æ¡ä»¶ç±»å‹ã€‚å½“æœ‰å¦ä¸€æ®µä»£ç è°ƒç”¨ `foo`ï¼Œå®ƒä¼šç”¨å…¶å®ƒç±»å‹æ›¿æ¢ `U`ï¼Œ`TypeScript` å°†é‡æ–°è®¡ç®—æœ‰æ¡ä»¶ç±»å‹ï¼Œå†³å®šå®ƒæ˜¯å¦å¯ä»¥é€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ‰æ¡ä»¶ç±»å‹èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œåªè¦æœ‰æ¡ä»¶ç±»å‹çš„æ¯ä¸ªåˆ†æ”¯ï¼Œéƒ½å¯ä»¥èµ‹å€¼ç»™ç›®æ ‡ç±»å‹ã€‚å› æ­¤åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å°† `U extends Foo ? string : number` èµ‹å€¼ç»™ `string | number`ï¼Œå› ä¸ºä¸ç®¡è¿™ä¸ªæœ‰æ¡ä»¶ç±»å‹æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆï¼Œå®ƒåªèƒ½æ˜¯ `string | number`ã€‚\n\n### 11.23 åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\n\n> å¦‚æœæœ‰æ¡ä»¶ç±»å‹é‡Œå¾…æ£€æŸ¥çš„ç±»å‹æ˜¯ `naked type parameter` ï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¢«ç§°ä¸º\"åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\"ã€‚åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹åœ¨å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆ†å‘æˆè”åˆç±»å‹ã€‚ä¾‹å¦‚ï¼šå®ä¾‹åŒ– `T extends U ? X : Y`ï¼Œ`T` çš„ç±»å‹ä¸º `A | B | C`ï¼Œä¼šè¢«è§£æä¸º `(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)`ã€‚\n\n- ä¾‹å­ï¼š```typescript\n  type TypeName<T> =\n  T extends string ? \"string\" :\n  T extends number ? \"number\" :\n  T extends boolean ? \"boolean\" :\n  T extends undefined ? \"undefined\" :\n  T extends Function ? \"function\" : \"object\";\n  type T10 = TypeName<string | (() => void)>; // \"string\" | \"function\"\n  type T11 = TypeName<string | string[] | undefined>; // \"string\" | \"object\" | \"undefined\"\n  type T12 = TypeName<string[] | number[]>; // \"object\"\n\n````\n\n\n\n\n>  åœ¨ `T extends U ? X : Y` çš„å®ä¾‹åŒ–é‡Œï¼Œå¯¹ `T` çš„å¼•ç”¨è¢«è§£æä¸ºè”åˆç±»å‹çš„ä¸€éƒ¨åˆ†(æ¯”å¦‚ï¼Œ`T` æŒ‡å‘æŸä¸€å•ä¸ªéƒ¨åˆ†ï¼Œåœ¨æœ‰æ¡ä»¶ç±»å‹åˆ†å¸ƒåˆ°è”åˆç±»å‹ä¹‹å)ã€‚æ­¤å¤–ï¼Œåœ¨ `X` å†…å¯¹ `T` çš„å¼•ç”¨æœ‰ä¸€ä¸ªé™„åŠ çš„ç±»å‹å‚æ•°çº¦æŸ `U`(ä¾‹å¦‚ï¼Œ`T` è¢«å½“æˆåœ¨ `X` å†…å¯èµ‹å€¼ç»™ `U`)ã€‚\n\n\n\n- ä¾‹å­ï¼š\n\n\n\n```typescript\ntype BoxedValue<T> = { value: T };\ntype BoxedArray<T> = { array: T[] };\ntype Boxed<T> = T extends any[] ? BoxedArray<T[number]> : BoxedValue<T>;\n\ntype T20 = Boxed<string>; // BoxedValue<string>;\ntype T21 = Boxed<number[]>; // BoxedArray<number>;\ntype T22 = Boxed<string | number[]>; // BoxedValue<string> | BoxedArray<number>;\n````\n\n#### 11.23.1 æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\n\n```typescript\ntype Diff<T, U> = T extends U ? never : T; // Remove types from T that are assignable to U(ä» T ä¸­åˆ é™¤å¯åˆ†é…ç»™ U çš„ç±»å‹)\ntype Filter<T, U> = T extends U ? T : never; // Remove types from T that are not assignable to U(ä» T ä¸­åˆ é™¤ä¸å¯èµ‹å€¼ç»™ U çš„ç±»å‹)\n\ntype T30 = Diff<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"b\" | \"d\"\ntype T31 = Filter<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"a\" | \"c\"\ntype T32 = Diff<string | number | (() => void), Function>; // string | number\ntype T33 = Filter<string | number | (() => void), Function>; // () => void\n\ntype _NonNullable<T> = Diff<T, null | undefined>; // Remove null and undefined from T\n\ntype T34 = _NonNullable<string | number | undefined>; // string | number\ntype T35 = _NonNullable<string | string[] | null | undefined>; // string | string[]\n\nfunction f1<T>(x: T, y: _NonNullable<T>) {\n  x = y; // Ok\n  // y = x ;// Error\n}\nfunction f2<T extends string | undefined>(x: T, y: _NonNullable<T>) {\n  x = y; // Ok\n  // y = x; //Error\n  // let s1: string = x; // Error\n  let s2: string = y; // Ok\n}\n```\n\n#### 11.23.2 æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\n\n```typescript\ntype FunctionPropertyNames<T> = { [K in keyof T]: T[K] extends Function ? K : never }[keyof T];\ntype FunctionProperties<T> = Pick<T, FunctionPropertyNames<T>>;\n\ntype NonFunctionPropertyNames<T> = { [K in keyof T]: T[K] extends Function ? never : K }[keyof T];\ntype NonFunctionProperties<T> = Pick<T, NonFunctionPropertyNames<T>>;\n\ninterface Part {\n  id: number;\n  name: string;\n  subparts: Part[];\n  updatePart(newName: string): void;\n}\n\ntype T40 = FunctionPropertyNames<Part>; // \"updatePart\"\ntype T41 = NonFunctionPropertyNames<Part>; // \"id\" | \"name\" | \"subparts\"\ntype T42 = FunctionProperties<Part>; // { updatePart(newName: string): void }\ntype T43 = NonFunctionProperties<Part>; // { id: number, name: string, suparts: Part[] }\n```\n\n#### 11.23.3 ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\n\n- æ¯”å¦‚ä¸‹é¢çš„é”™è¯¯ï¼š\n\n```typescript\n// type ElementType<T> = T extends any[] ? ElementType<T[number]>: T; // Error\n```\n\n### 11.24 æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\n\n> ç°åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ `extends` å­è¯­å¥ä¸­ï¼Œå…è®¸å‡ºç° `infer` å£°æ˜ï¼Œå®ƒä¼šå¼•å…¥ä¸€ä¸ªå¾…æ¨æ–­çš„ç±»å‹å˜é‡ã€‚è¿™ä¸ªæ¨æ–­çš„ç±»å‹å˜é‡å¯ä»¥åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ `true` åˆ†æ”¯ä¸­è¢«å¼•ç”¨ã€‚å…è®¸å‡ºç°å¤šä¸ªåŒç±»å‹å˜é‡çš„ `infer`ã€‚\n\n> ä¾‹å¦‚ï¼šä¸‹é¢ä»£ç ä¼šæå–å‡½æ•°ç±»å‹çš„è¿”å›å€¼\n\n```typescript\ntype _ReturnType<T> = T extends (...args: any[]) => infer R ? R : any;\n```\n\n> æœ‰æ¡ä»¶ç±»å‹ å¯ä»¥åµŒå¥—æ¥æ„æˆä¸€ç³»åˆ—çš„åŒ¹é…æ¨¡å¼ï¼ŒæŒ‰é¡ºåºè¿›è¡Œæ±‚å€¼ï¼š\n\n```typescript\ntype Unpacked<T> = T extends (infer U)[] ? U : T extends (...args: any[]) => infer U ? U : T extends Promise<infer U> ? U : T;\n\ntype T0 = Unpacked<string>; // string\ntype T1 = Unpacked<string[]>; // string\ntype T2 = Unpacked<() => string>; // string\ntype T3 = Unpacked<Promise<string>>; // string\ntype T4 = Unpacked<Promise<string>[]>; // Promise<string>\ntype T5 = Unpacked<Unpacked<Promise<string>[]>>; // string\n```\n\n> ä¸‹é¢çš„ä¾‹å­è§£é‡Šäº†åœ¨åå˜ä½ç½®ä¸Šï¼ŒåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºè”åˆç±»å‹ï¼š\n\n```typescript\ntype Foo<T> = T extends { a: infer U; b: infer U } ? U : never;\ntype T10 = Foo<{ a: string; b: string }>; // string\ntype T11 = Foo<{ a: string; b: number }>; // string | number\n```\n\n> ç›¸ä¼¼åœ°ï¼Œåœ¨æŠ—å˜ä½ç½®ä¸ŠåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºäº¤å‰ç±»å‹ï¼š\n>\n> ```typescript\n> type Bar<T> = T extends { a: (x: infer U) => void; b: (x: infer U) => void } ? U : never;\n> type T20 = Bar<{ a: (x: string) => void; b: (x: string) => void }>; // string\n> type T21 = Bar<{ a: (x: string) => void; b: (x: number) => void }>; // string & number\n> ```\n\n````\n\n\n\n> å½“æ¨æ–­å…·æœ‰å¤šä¸ªè°ƒç”¨ç­¾å(ä¾‹å¦‚å‡½æ•°é‡è½½ç±»å‹)çš„ç±»å‹æ—¶ï¼Œç”¨æœ€åçš„ç­¾å(å¤§æ¦‚æ˜¯æœ€è‡ªç”±çš„åŒ…å«æ‰€æœ‰æƒ…å†µçš„ç­¾å) è¿›è¡Œæ¨æ–­ã€‚æ— æ³•æ ¹æ®å‚æ•°ç±»å‹åˆ—è¡¨æ¥è¿›è¡Œè§£æé‡è½½ã€‚\n\n\n\n```typescript\ndeclare function foo(x: string): number;\ndeclare function foo(x: number): string;\ndeclare function foo(x: string | number): string | number;\n\ntype T30 = ReturnType<typeof foo>; // string | number\n````\n\n> æ— æ³•åœ¨æ­£å¸¸ç±»å‹å‚æ•°çš„çº¦æŸå­è¯­å¥ä¸­ä½¿ç”¨ `infer` å£°æ˜ï¼š\n\n```typescript\n// type ReturnType1<T extends (...args: any[]) => infer R> = R; // Error\n```\n\n> ä½†æ˜¯ï¼Œå¯ä»¥è¿™æ ·è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œåœ¨çº¦æŸé‡Œåˆ æ‰ç±»å‹å˜é‡ï¼Œç”¨ æœ‰æ¡ä»¶ç±»å‹ æ¥æ›¿æ¢ï¼š\n\n```typescript\ntype AnyFunction = (...args: any[]) => any;\ntype ReturnType2<T extends AnyFunction> = T extends (...args: any[]) => infer R ? R : any;\n```\n\n> å®é™…ä¸Šï¼Œå°±æ˜¯ `ReturnType`\n\n```typescript\ntype __ReturnType<T extends (...args: any) => any> = T extends (...args: any) => infer R ? R : never;\n```\n\n### 11.25 é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\n\n> `TypeScript 2.8` åœ¨ `lib.d.ts` é‡Œå¢åŠ äº†ä¸€äº›é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\n\n> 1. `Exclude<T, U>` -- ä» `T` ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ `U` çš„ç±»å‹\n> 2. `Extract<T, U>` -- æå– `T` ä¸­å¯ä»¥èµ‹å€¼ç»™ `U` çš„ç±»å‹\n> 3. `NonNullable<T>` -- ä» `T` ä¸­å‰”é™¤ `null` å’Œ `undefined`\n> 4. `ReturnType<T>` -- è·å–å‡½æ•°è¿”å›å€¼ç±»å‹\n> 5. `InstanceType<T>` -- è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹\n\n- `Example`:\n\n```typescript\ntype T00 = Exclude<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"b\" | \"d\"\ntype T01 = Extract<\"a\" | \"b\" | \"c\" | \"d\", \"a\" | \"c\" | \"f\">; // \"a\" | \"c\"\n\ntype T02 = Exclude<string | number | (() => void), Function>; // \"string\" | \"number\"\ntype T03 = Extract<string | number | (() => void), Function>; // () => void\n\ntype T04 = NonNullable<string | number | undefined>; // string | number\ntype T05 = NonNullable<(() => string) | string[] | null | undefined>; // (() => string) | string[]\n\nfunction f1(s: string) {\n  return { a: 1, b: s };\n}\n\nclass C {\n  x = 0;\n  y = 0;\n}\n\ntype T10 = ReturnType<() => string>; // string\ntype T11 = ReturnType<(s: string) => void>; // void\ntype T12 = ReturnType<<T>() => T>; // {}\ntype T13 = ReturnType<<T extends U, U extends number[]>() => T>; // number[]\ntype T14 = ReturnType<typeof f1>; // { a: number, b: string }\ntype T15 = ReturnType<any>; // any\ntype T16 = ReturnType<never>; // never\n// type T17 = ReturnType<string>; // Error\n// type T18 = ReturnType<Function>; // Error\n\ntype T20 = InstanceType<typeof C>; // C\ntype T21 = InstanceType<any>; // any\ntype T22 = InstanceType<never>; // never\n// type T23 = InstanceType<string>; // Error\n// type T24 = InstanceType<Function>; // Error\n```\n\n> æ³¨æ„ï¼š`Exclude` ç±»å‹æ˜¯å»ºè®®çš„ `Diff` ç±»å‹çš„ä¸€ç§å®ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ `Exclude` è¿™ä¸ªåå­—æ˜¯ä¸ºäº†é¿å…ç ´åå·²ç»å®šä¹‰äº†çš„ `Diff` çš„ä»£ç ï¼Œå¹¶ä¸”æˆ‘ä»¬æ„Ÿè§‰è¿™ä¸ªåå­—èƒ½æ›´å¥½åœ°è¡¨è¾¾ç±»å‹çš„è¯­ä¹‰ã€‚æˆ‘ä»¬æ²¡æœ‰å¢åŠ  `Omit<T, K>` ç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å¾ˆå®¹æ˜“çš„ç”¨ `Pick<T, Exclude<keyof T, K>>` æ¥è¡¨ç¤º\n\n## åäºŒã€å®ç”¨å·¥å…·ç±»å‹\n\n> `TypeScript` æä¾›ä¸€äº›å·¥å…·ç±»å‹æ¥å¸®åŠ©å¸¸è§çš„ç±»å‹è½¬æ¢ã€‚è¿™äº›ç±»å‹æ˜¯å…¨å±€å¯è§çš„ã€‚\n\n### 12.1 Partial å±€éƒ¨çš„\n\n> æ„é€ ç±»å‹ `T`, å¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®æˆå¯é€‰çš„ï¼Œå®ƒçš„è¿”å›ç±»å‹è¡¨ç¤ºè¾“å…¥ç±»å‹çš„æ‰€æœ‰å­ç±»å‹ã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface PartialTodo {\n  title: string;\n  description: string;\n}\n\nfunction updateTodo(todo: PartialTodo, fieldsToUpdate: Partial<PartialTodo>) {\n  return { ...todo, ...fieldsToUpdate };\n}\n\nconst partialTodo1 = {\n  title: \"organize desk\",\n  description: \"clear clutter\"\n};\n\nconst partialTodo2 = updateTodo(partialTodo1, {\n  description: \"throw out trash\"\n});\n```\n\n### 12.2 Readonly åªè¯»çš„\n\n> æ„é€ ç±»å‹ T**ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸º** readonly**ï¼Œä¹Ÿå°±æ˜¯è¯´æ„é€ å‡ºçš„ç±»å‹çš„å±æ€§ä¸èƒ½è¢«å†æ¬¡èµ‹å€¼**\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface ReadonlyTodo {\n  title: string;\n}\n\nconst readonlyTodo: Readonly<ReadonlyTodo> = {\n  title: \"Delete inactive users\"\n};\n\nreadonlyTodo.title = \"Hello\"; // Error: cannot reassign a readonly property\n\n// Object.freeze\nfunction freeze<T>(obj: T): Readonly<T>;\n```\n\n### 12.3 Record<T, K> è®°å½•\n\n> æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹ä¸º `K`ï¼Œå±æ€§å€¼çš„ç±»å‹ä¸º `T`ã€‚è¿™ä¸ªå·¥å…·å¯ç”¨æ¥å°†æŸä¸ªç±»å‹çš„å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ä¸Šã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface PageInfo {\n  title: string;\n}\n\ntype Page = \"home\" | \"about\" | \"contact\";\n\nconst x: Record<Page, PageInfo> = {\n  about: { title: \"about\" },\n  contact: { title: \"concat\" },\n  home: { title: \"home\" }\n};\n```\n\n### 12.4 Pick<T, K> æŒ‘é€‰\n\n> ä»ç±»å‹ `T` ä¸­æŒ‘é€‰éƒ¨åˆ†å±æ€§ `K` æ¥æ„é€ ç±»å‹\n\n```typescript\ninterface PickTodo {\n  title: string;\n  description: string;\n  completed: boolean;\n}\n\ntype TodoPreview = Pick<PickTodo, \"title\" | \"completed\">;\n\nconst pickTodo: TodoPreview = {\n  title: \"Clean room\",\n  completed: false\n};\n```\n\n### 12.5 Exclude<T, U> å‰”é™¤\n\n> ä»ç±»å‹ `T` ä¸­å‰”é™¤æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ `U` çš„å±æ€§ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\ntype T0 = Exclude<\"a\" | \"b\" | \"c\", \"a\">; // \"b\" | \"c\"\ntype T1 = Exclude<\"a\" | \"b\" | \"c\", \"a\" | \"b\">; // \"c\"\ntype T2 = Exclude<string | number | (() => void), Function>; // string | number\n```\n\n### 12.6 Extract<T, U> æå–\n\n> ä»ç±»å‹ `T` ä¸­æå–æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ `U` çš„ç±»å‹ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚\n\n```typescript\ntype T01 = Extract<\"a\" | \"b\" | \"c\", \"a\" | \"f\">; // \"a\"\ntype T02 = Extract<string | number | (() => void), Function>; // () => void\n```\n\n### 12.7 NonNullable\n\n> ä»ç±»å‹ `T` ä¸­å‰”é™¤ `null` å’Œ `undefined`ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹\n\n- ä¾‹å­ï¼š\n\n```typescript\ntype T10 = NonNullable<string | number | undefined>; // string | number\ntype T11 = NonNullable<string[] | null | undefined>; // string[]\n```\n\n### 12.8 ReturnType è¿”å›å€¼ç±»å‹\n\n> ç”±å‡½æ•°ç±»å‹ `T` çš„è¿”å›å€¼ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹\n\n- ä¾‹å­ï¼š\n\n```typescript\nfunction f1(s: string) {\n  return { a: 1, b: s };\n}\n\ntype _T0 = ReturnType<() => string>; // string\ntype _T1 = ReturnType<(s: string) => void>; // void\ntype _T2 = ReturnType<<T>() => T>; // {}\ntype _T3 = ReturnType<<T extends U, U extends number[]>() => T>; // number[]\ntype _T4 = ReturnType<typeof f1>; // { a: number, b: string }\ntype _T5 = ReturnType<any>; // any\ntype _T6 = ReturnType<never>; // never\ntype _T7 = ReturnType<string>; // Error\ntype _T8 = ReturnType<Function>; // Error\n```\n\n### 12.9 InstanceType æ„é€ å‡½æ•° å®ä¾‹ç±»å‹\n\n> ç”±æ„é€ å‡½æ•°ç±»å‹ `T` çš„å®ä¾‹ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹ã€‚\n\n- ä¾‹å­ï¼š\n\n```typescript\nclass C {\n  x = 0;\n  y = 0;\n}\n\ntype _T01 = InstanceType<typeof C>; // C\ntype _T02 = InstanceType<any>; // any\ntype _T03 = InstanceType<never>; // never\ntype _T04 = InstanceType<string>; // Error\ntype _T05 = InstanceType<Function>; // Error\n```\n\n### 12.10 Required\n\n> æ„é€ ä¸€ä¸ªç±»å‹ï¼Œä½¿ç±»å‹ `T` çš„æ‰€æœ‰å±æ€§ä¸º `required`\n\n- ä¾‹å­ï¼š\n\n```typescript\ninterface Props {\n  a?: number;\n  b?: string;\n}\n\nconst obj: Props = { a: 5 }; // Ok\nconst obj2: Required<Props> = { a: 5 }; // Error, property 'b' missing\n```\n\n### 12.11 ThisType this\n\n> è¿™ä¸ªå·¥å…·ä¸ä¼šè¿”å›ä¸€ä¸ªè½¬æ¢åçš„ç±»å‹ã€‚å®ƒä½œä¸ºä¸Šä¸‹æ–‡çš„ `this` ç±»å‹çš„ä¸€ä¸ªæ ‡è®°ã€‚\n> æ³¨æ„ï¼šè‹¥æƒ³è¦ä½¿ç”¨æ­¤ç±»å‹ï¼Œå¿…é¡»å¯ç”¨ `--noImplicitThis`\n\n- ä¾‹å­ï¼š\n\n```typescript\n// Compile with --noImplicitThis\ntype ObjectDescriptor<D, M> = {\n  data?: D;\n  methods?: M & ThisType<D & M>; // Type of 'this' in methods is D & M\n};\n\nfunction makeObject<D, M>(desc: ObjectDescriptor<D, M>): D & M {\n  let data: object = desc.data || {};\n  let methods: object = desc.methods || {};\n  return { ...data, ...methods } as D & M;\n}\n\nlet _obj = makeObject({\n  data: { x: 0, y: 0 },\n  methods: {\n    moveBy(dx: number, dy: number) {\n      this.x += dx; // Strongly typed this\n      this.y += dy; // Strongly typed this\n    }\n  }\n});\n_obj.x = 10;\n_obj.y = 10;\n_obj.moveBy(5, 5);\n```\n\n> ä¸Šé¢ä¾‹å­ä¸­ï¼Œ`makeObject` å‚æ•°é‡Œçš„ `methods` å¯¹è±¡å…·æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡ç±»å‹ `ThisType<D & M>`ï¼Œå› æ­¤ `methods` å¯¹è±¡çš„æ–¹æ³•é‡Œ this çš„ç±»å‹ä¸º `{ x: number, y: number } & { moveBy(dx: number, dy: number): number }`ã€‚\n> åœ¨ `lib.d.ts` é‡Œï¼Œ`ThisType<T>` æ ‡è¯†æ¥å£æ˜¯ä¸ªç®€å•çš„ç©ºæ¥å£å£°æ˜ã€‚é™¤äº†åœ¨è¢«è¯†åˆ«ä¸ºå¯¹è±¡å­—é¢é‡çš„ä¸Šä¸‹æ–‡ç±»å‹ä¹‹å¤–ï¼Œè¿™ä¸ªæ¥å£ä¸ä¸€èˆ¬çš„ç©ºæ¥å£æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚\n\n## åä¸‰ã€Symbols\n\n> ä»‹ç»ï¼šè‡ª `ECMAScript 2015` èµ·ï¼Œ`symbol` æˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ï¼Œå°±åƒ `number` å’Œ `string` ä¸€æ ·ã€‚\n\n### 13.1 `symbol` ç±»å‹çš„å€¼æ˜¯é€šè¿‡ `Symbol` æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\n\n```typescript\nlet sym1 = Symbol();\nlet sym2 = Symbol(\"key\"); // å¯é€‰çš„å­—ç¬¦ä¸² key\n```\n\n### 13.2 `Symbols` æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\n\n```typescript\nlet sym3 = Symbol(\"key\");\nlet sym4 = Symbol(\"key\");\nsym3 === sym4; // false symbols æ˜¯å”¯ä¸€çš„\n```\n\n### 13.3 åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œ`symbols` ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\n\n```typescript\nconst sym = Symbol();\nlet obj = {\n  [sym]: \"value\"\n};\nconsole.log(obj[sym]); // \"value\"\n```\n\n### 13.4 `Symbols` ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\n\n```typescript\nconst getClassNameSymbol = Symbol();\n\nclass C {\n  [getClassNameSymbol]() {\n    return \"C\";\n  }\n}\n\nlet c = new C();\nlet className = c[getClassNameSymbol](); // \"C\"\n```\n\n### 13.5 ä¼—æ‰€å‘¨çŸ¥çš„ `Symbols`\n\n> é™¤äº†ç”¨æˆ·å®šä¹‰çš„ `Symbols`ï¼Œè¿˜æœ‰ä¸€äº›å·²ç»ä¼—æ‰€å‘¨çŸ¥çš„å†…ç½® `symbols`ã€‚å†…ç½® `symbols` ç”¨æ¥è¡¨ç¤ºè¯­è¨€å†…éƒ¨çš„è¡Œä¸ºã€‚\n> ä»¥ä¸‹ä¸ºè¿™äº› `symbols` çš„åˆ—è¡¨ï¼š\n\n- `Symbol.hasInstance`\n\n> è¯¥æ–¹æ³•ä¼šè¢« `instanceof` è¿ç®—ç¬¦è°ƒç”¨ã€‚æ„é€ å™¨å¯¹è±¡ç”¨æ¥è¯†åˆ«ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å…¶å®ä¾‹ã€‚\n\n- `Symbol.isConcatSpreadable`\n\n> å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ `Array.prototype.concat` æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ•°ç»„å…ƒç´ æ˜¯å¦å¯å±•å¼€ã€‚\n\n- `Symbol.iterator`\n\n> æ–¹æ³•ï¼Œè¢« `for-of` è¯­å¥è°ƒç”¨ï¼Œã€‚è¿”å›å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨\n\n- `Symbol.match`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.match` è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²\n\n- `Symbol.replace`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.replac`e è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­åŒ¹é…çš„å­ä¸²ã€‚\n\n- `Symbol.search`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.search` è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼è¿”å›è¢«åŒ¹é…éƒ¨åˆ†åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚\n\n- `Symbol.species`\n\n> å‡½æ•°å€¼ï¼Œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚\n\n- `Symbol.split`\n\n> æ–¹æ³•ï¼Œè¢« `String.prototype.split` è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åˆ†å‰²å­—ç¬¦ä¸²ã€‚\n\n- `Symbol.toPrimitive`\n\n> æ–¹æ³•ï¼Œè¢« `ToPrimitive` æŠ½è±¡æ“ä½œè°ƒç”¨ã€‚æŠŠå¯¹è±¡è½¬æ¢ä¸ºç›¸åº”çš„åŸå§‹å€¼ã€‚\n\n- `Symbol.toStringTag`\n\n> æ–¹æ³•ï¼Œè¢«å†…ç½®æ–¹æ³• `Object.prototype.toString` è°ƒç”¨ã€‚è¿”å›åˆ›å»ºå¯¹è±¡æ—¶é»˜è®¤çš„å­—ç¬¦ä¸²æè¿°ã€‚\n\n- `Symbol.unscopables`\n\n> å¯¹è±¡ï¼Œå®ƒè‡ªå·±æ‹¥æœ‰çš„å±æ€§ä¼šè¢« `with` ä½œç”¨åŸŸæ’é™¤åœ¨å¤–ã€‚\n\n## åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\n\n- å¯è¿­ä»£æ€§\n\n> å½“ä¸€ä¸ªå¯¹è±¡å®ç°äº† `Symbol.iterator` å±æ€§æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯å¯è¿­ä»£çš„ã€‚ä¸€äº›å†…ç½®çš„ç±»å‹å¦‚ `Array`ï¼Œ`Map`ï¼Œ`Set`ï¼Œ`String`ï¼Œ`Int32Array`ï¼Œ`Uint32Array` ç­‰éƒ½å·²ç»å®ç°äº†å„è‡ªçš„ `Symbol.iterator`ã€‚å¯¹è±¡ä¸Šçš„ `Symbol.iterator` å‡½æ•°è´Ÿè´£è¿”å›ä¾›è¿­ä»£çš„å€¼ã€‚\n\n### 14.1 for ... of è¯­å¥\n\n> `for ... of` ä¼šéå†å¯è¿­ä»£å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡ä¸Šçš„ `Symbol.iterator` æ–¹æ³•ã€‚\n\n- ä¸‹é¢æ˜¯åœ¨æ•°ç»„ä¸Šä½¿ç”¨ `for ... of` çš„ç®€å•ä¾‹å­\n\n```typescript\nlet someArray = [1, \"string\", false];\n\nfor (let entry of someArray) {\n  console.log(entry); // 1, \"string\", false\n}\n```\n\n### 14.2 for ... of Vs for ... in è¯­å¥\n\n> `for ... of` å’Œ `for ... in` å‡å¯è¿­ä»£ä¸€ä¸ªåˆ—è¡¨ï¼›ä½†æ˜¯ç”¨äºè¿­ä»£çš„å€¼å´ä¸åŒï¼Œ`for ... in` è¿­ä»£çš„æ˜¯å¯¹è±¡çš„ `é”®` çš„åˆ—è¡¨ï¼Œè€Œ `for ... of` åˆ™è¿­ä»£å¯¹è±¡çš„é”®å¯¹åº”çš„å€¼ã€‚\n\n- ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ï¼š\n\n```typescript\nlet list = [4, 5, 6];\nfor (let i in list) {\n  console.log(i); // \"0\" \"1\" \"2\"\n}\nfor (let i of list) {\n  console.log(i); // \"4\" \"5\" \"6\"\n}\n```\n\n> å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ `for ... in` å¯ä»¥æ“ä½œä»»ä½•å¯¹è±¡ï¼›å®ƒæä¾›äº†æŸ¥çœ‹å¯¹è±¡å±æ€§çš„ä¸€ç§æ–¹æ³•ã€‚ä½†æ˜¯ `for ... of` å…³æ³¨äºè¿­ä»£å¯¹è±¡çš„å€¼ã€‚å†…ç½®å¯¹è±¡ `Map` å’Œ `Set` å·²ç»å®ç°äº† `Symbol.iterator` æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥è®¿é—®å®ƒä»¬ä¿å­˜çš„å€¼ã€‚\n\n```typescript\nlet pets = new Set([\"Cat\", \"Dog\", \"Hamster\"]);\npets[\"species\"] = \"mammals\";\nfor (let pet in pets) {\n  console.log(pet);\n}\nfor (let pet of pets) {\n  console.log(pet); // \"Cat\", \"Dog\", \"Hamster\"\n}\n```\n\n### 14.3 ä»£ç ç”Ÿæˆç›®æ ‡ä¸º `ES5` å’Œ `ES3`\n\n> å½“ç”Ÿæˆç›®æ ‡ä¸º `ES5` æˆ– `ES3`ï¼Œè¿­ä»£å™¨åªå…è®¸åœ¨ `Array` ç±»å‹ä¸Šä½¿ç”¨ã€‚åœ¨éæ•°ç»„å€¼ä¸Šä½¿ç”¨ `for ... of` è¯­å¥ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå°±ç®—è¿™äº›éæ•°ç»„å€¼å·²ç»å®ç°äº† `Symbol.iterator` å±æ€§ã€‚\n\n> ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç®€å•çš„ `for` å¾ªç¯åšä¸º `for ... of` å¾ªç¯ï¼Œæ¯”å¦‚ï¼š\n\n```typescript\nlet numbers = [1, 2, 3];\nfor (let num of numbers) {\n  console.log(num);\n}\n// ç”Ÿæˆçš„ä»£ç ä¸ºï¼š\nvar number = [1, 2, 3];\nfor (var _i = 0; _i < numbers.length; _i++) {\n  var num = numbers[_i];\n  console.log(num);\n}\n```\n\n### 14.4 ç›®æ ‡ä¸º `ECMAScript 2015` æˆ–æ›´é«˜\n\n> å½“ç›®æ ‡ä¸ºå…¼å®¹ `ECMAScript 2015` çš„å¼•æ“æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”å¼•æ“çš„ `for ... of` å†…ç½®è¿­ä»£å™¨å®ç°æ–¹å¼ã€‚\n\n## åäº”ã€æ¨¡å—\n\n### 15.1 å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\n\n> è¯·åŠ¡å¿…æ³¨æ„ä¸€ç‚¹ï¼š`TypeScript 1.5` é‡Œæœ¯è¯­åå·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚\"`å†…éƒ¨æ¨¡å—`\" ç°åœ¨è¢«ç§°ä½œ \"`å‘½åç©ºé—´`\"ã€‚\"`å¤–éƒ¨æ¨¡å—`\" ç°åœ¨åˆ™ç®€ç§°ä¸º \"`æ¨¡å—`\"ã€‚è¿™æ˜¯ä¸ºäº†ä¸ `ECMAScript 2015` é‡Œçš„æœ¯è¯­ä¿æŒå·²ä¸€è‡´ï¼Œ (ä¹Ÿå°±æ˜¯è¯´ `module X` { ç›¸å½“äºç°åœ¨æ¨èçš„å†™æ³• `namespace X` })\n\n### 15.2 ä»‹ç»\n\n1. ä» `ECMAScript 2015` å¼€å§‹ï¼Œ`JavaScript` å¼•å…¥äº†æ¨¡å—çš„æ¦‚å¿µã€‚`TypeScript` ä¹Ÿæ²¿ç”¨è¿™ä¸ªæ¦‚å¿µã€‚\n2. æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼›è¿™æ„å‘³ç€å®šä¹‰åœ¨ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ç­‰ç­‰åœ¨æ¨¡å—å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨ `export` å½¢å¼ä¹‹ä¸€å¯¼å‡ºå®ƒä»¬ã€‚ç›¸åï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶å®ƒæ¨¡å—å¯¼å‡ºçš„ `å˜é‡`ï¼Œ`å‡½æ•°`ï¼Œ`ç±»`ï¼Œ`æ¥å£` ç­‰çš„æ—¶å€™ï¼Œä½ å¿…é¡»è¦å¯¼å…¥å®ƒä»¬ï¼Œå¯ä»¥ä½¿ç”¨ `import` å½¢å¼ä¹‹ä¸€ã€‚\n3. æ¨¡å—æ˜¯è‡ªå£°æ˜çš„ï¼›ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡åœ¨æ–‡ä»¶çº§åˆ«ä¸Šä½¿ç”¨ `import` å’Œ `exports` å»ºç«‹çš„ã€‚\n4. æ¨¡å—ä½¿ç”¨æ¨¡å—åŠ è½½å™¨å»å¯¼å…¥å…¶å®ƒçš„æ¨¡å—ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ¨¡å—åŠ è½½å™¨çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œæ­¤æ¨¡å—ä»£ç å‰å»æŸ¥æ‰¾å¹¶æ‰§è¡Œè¿™ä¸ªæ¨¡å—çš„æ‰€æœ‰ä¾èµ–ã€‚å¤§å®¶æœ€ç†ŸçŸ¥çš„ `JavaScript` æ¨¡å—åŠ è½½å™¨æ˜¯æœåŠ¡ä¸ `Node.js` çš„ `CommonJS` å’Œ æœåŠ¡äº `Web` åº”ç”¨çš„ `Require.js`ã€‚\n5. `TypeScript` å’Œ `ECMAScript 2015` ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ `import` æˆ–è€… `export` çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ `import` æˆ–è€… `export` å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å°†è¢«è§†ä¸ºå…¨å±€å¯è§çš„ (å› æ­¤å¯¹æ¨¡å—ä¹Ÿæ˜¯å¯è§çš„)ã€‚\n\n### 15.3 å¯¼å‡º\n\n#### 15.3.1. å¯¼å‡ºå£°æ˜\n\n> ä»»ä½•å£°æ˜( æ¯”å¦‚ `å˜é‡`ï¼Œ`å‡½æ•°`ï¼Œ`ç±»`ï¼Œ`ç±»å‹åˆ«å` æˆ– `æ¥å£` )éƒ½èƒ½å¤Ÿé€šè¿‡æ·»åŠ  `export` å…³é”®å­—æ¥å¯¼å‡ºã€‚\n\n```typescript\nexport interface StringValidator {\n  isAcceptable(s: string): boolean;\n}\nexport const numberRegexp = /^[0-9]+$/;\nexport class ZipCodeValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegexp.test(s);\n  }\n}\n```\n\n#### 15.3.2 å¯¼å‡ºè¯­å¥\n\n> å¯¼å‡ºè¯­å¥å¾ˆä¾¿åˆ©ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å¯¼å‡ºçš„éƒ¨åˆ†é‡å‘½åï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¿™æ ·æ”¹å†™ï¼š\n\n```typescript\nclass ZipCodeValidator1 implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegexp.test(s);\n  }\n}\nexport { ZipCodeValidator1 };\nexport { ZipCodeValidator1 as mainValidator };\n```\n\n#### 15.3.3 é‡æ–°å¯¼å‡º\n\n> æˆ‘ä»¬ç»å¸¸ä¼šå»æ‰©å±•å…¶å®ƒæ¨¡å—ï¼Œå¹¶ä¸”åªå¯¼å‡ºé‚£ä¸ªæ¨¡å—çš„é‚£éƒ¨åˆ†å†…å®¹ã€‚\n\n> é‡æ–°å¯¼å‡ºåŠŸèƒ½å¹¶ä¸ä¼šåœ¨å½“å‰æ¨¡å—å¯¼å…¥é‚£ä¸ªæ¨¡å—æˆ–å®šä¹‰ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚\n\n```typescript\nexport class ParseIntBasedZipCodeValidator {\n  isAcceptable(s: string) {\n    return s.length === 5 && parseInt();\n  }\n}\n// å¯¼å‡ºåŸå…ˆçš„éªŒè¯å™¨ä½†åšäº†é‡å‘½å\nexport { ZipCodeValidator as RegExpBasedZipCodeValidator } from \"./ZipCodeValidator\";\n```\n\n> æˆ–è€…ä¸€ä¸ªæ¨¡å—å¯ä»¥åŒ…è£¹å¤šä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒä»¬å¯¼å‡ºçš„å†…å®¹è”åˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡è¯­æ³•ï¼š`export * from \"module\"`\n\n```typescript\nexport * from \"./StringValidator\";\nexport * from \"./LetterOnlyValidator\";\nexport * from \"./ZipCodeValidator\";\n```\n\n### 15.4 å¯¼å…¥\n\n> æ¨¡å—çš„å¯¼å…¥æ“ä½œä¸å¯¼å‡ºä¸€æ ·ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ `import` å½¢å¼ä¹‹ä¸€æ¥å¯¼å…¥å…¶å®ƒæ¨¡å—ä¸­çš„å¯¼å‡ºå†…å®¹ã€‚\n\n#### 15.4.1 å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\n\n```typescript\nimport { ZipCodeValidator } from \"./ZipCodeValidator\";\nlet myValidator = new ZipCodeValidator();\n```\n\n> å¯ä»¥å¯¹å¯¼å…¥å†…å®¹é‡å‘½å\n\n```typescript\nimport { ZipCodeValidator as ZCV } from \"./ZipCodeValidator\";\nlet myValidator = new ZCV();\n```\n\n#### 15.4.2 å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\n\n```typescript\nimport * as validator from \"./ZipCodeValidator\";\nlet myValidator = new validator.ZipCodeValidator();\n```\n\n#### 15.4.3 å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\n\n> å°½ç®¡ä¸æ¨èè¿™ä¹ˆåšï¼Œä¸€äº›æ¨¡å—ä¼šè®¾ç½®ä¸€äº›å…¨å±€çŠ¶æ€ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚è¿™äº›æ¨¡å—å¯èƒ½æ²¡æœ‰ä»»ä½•çš„å¯¼å‡ºæˆ–ç”¨æˆ·æ ¹æœ¬\n\n> å°±ä¸å…³æ³¨å®ƒçš„å¯¼å‡ºã€‚ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥å¯¼å…¥è¿™äº›æ¨¡å—ã€‚\n\n```typescript\nimport \"./my-module.js\";\n```\n\n### 15.5 é»˜è®¤å¯¼å‡º\n\n> æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥æœ‰ä¸€ä¸ª `default` å¯¼å‡ºã€‚é»˜è®¤å¯¼å‡ºä½¿ç”¨ `default` å…³é”®å­—æ ‡è®°ï¼›å¹¶ä¸”ä¸€ä¸ªæ¨¡å—åªèƒ½å¤Ÿæœ‰ä¸€ä¸ª `default` å¯¼å‡ºã€‚éœ€è¦ä½¿ç”¨ ä¸€ç§ç‰¹æ®Šçš„å¯¼å…¥å½¢å¼æ¥å¯¼å…¥ `default` å¯¼å‡ºã€‚\n\n> `default` å¯¼å‡ºååˆ†ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œåƒ `JQuery` è¿™æ ·çš„ç±»åº“å¯èƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡º `jQuery` æˆ– `$`ï¼Œå¹¶ä¸”æˆ‘ä»¬åŸºæœ¬ä¸Šä¹Ÿä¼šä½¿ç”¨åŒæ ·çš„åå­— `jQuery` æˆ– `$` å¯¼å‡º `JQuery`ã€‚\n\n- `JQuery.d.ts`\n\n```typescript\ndeclare let $: JQuery;\nexport default $;\n```\n\n- `App.ts`\n\n```typescript\nimport $ from \"JQuery\";\n$(\"button.continue\").html(\"Next step ...\");\n```\n\n> ç±»å’Œå‡½æ•°å£°æ˜å¯ä»¥ç›´æ¥è¢«æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºã€‚æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºçš„ç±»å’Œå‡½æ•°çš„åå­—æ˜¯å¯ä»¥çœç•¥çš„ã€‚\n\n- `ZipCodeValidator.ts`\n\n```typescript\nexport default class ZipCodeValidator {\n  static numberRegExp = /^[0-9]+$/;\n  isAcceptable(s: string) {\n    return s.length === 5 && ZipCodeValidator.numberRegExp.test(s);\n  }\n}\n```\n\n- `Test.ts`\n\n```typescript\nimport validator from \"./ZipCodeValidator\";\nlet myValidator = new validator();\n```\n\n> `æˆ–è€…`\n\n- `StaticZipCodeValidator.ts`\n\n```typescript\nconst numberRegExp = /^[0-9]+$/;\nexport default function (s: string) {\n  return s.length === 5 && numberRegExp.test(s);\n}\n```\n\n- `Test.ts`\n\n```typescript\nimport validate from \"./StaticZipCodeValidator\";\nlet strings = [\"Hello\", \"98052\", \"101\"];\n// use function validate\nstrings.forEach(s => {\n  console.log(`\"${s}\" ${validate(s)} ? \" matches\" : \" does not match\"`);\n});\n```\n\n> `default` å¯¼å‡ºä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå€¼\n\n- `OneTwoThree.ts`\n\n```typescript\nexport default \"123\";\n```\n\n- `Log.ts`\n\n```typescript\nimport num from \"./OneTwoThree\";\nconsole.log(num); // 123\n```\n\n> `export =` å’Œ `import = require()`\n\n1. `CommonJS` å’Œ `AMD` çš„ç¯å¢ƒé‡Œéƒ½æœ‰ä¸€ä¸ª `exports` å˜é‡ï¼Œè¿™ä¸ªå˜é‡åŒ…å«äº†ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºå†…å®¹ã€‚\n2. `CommonJS` å’Œ `AMD` çš„ `exports` éƒ½å¯ä»¥è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µä¸‹å…¶ä½œç”¨å°±ç±»ä¼¼äº es6 è¯­æ³•é‡Œçš„é»˜è®¤å¯¼å‡ºï¼Œå³ `export default` è¯­æ³•äº†ã€‚è™½ç„¶ä½œç”¨ç›¸ä¼¼ï¼Œä½†æ˜¯ `export default` è¯­æ³•å¹¶ä¸èƒ½å…¼å®¹ `CommonJS` å’Œ `AMD` çš„ `exports`ã€‚\n3. ä¸ºäº†æ”¯æŒ `CommonJS` å’Œ `AMD` çš„ `exports`ï¼Œ`TypeScript` æä¾›äº† `export =` è¯­æ³•ã€‚\n4. `export =` è¯­æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚è¿™é‡Œçš„å¯¹è±¡ä¸€è¯æŒ‡çš„æ˜¯ç±»ï¼Œæ¥å£ï¼Œå‘½åç©ºé—´ï¼Œå‡½æ•°æˆ–æšä¸¾ã€‚\n5. è‹¥ä½¿ç”¨ `export =` å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ `TypeScript` çš„ç‰¹å®šè¯­æ³• `import module = require('module')` æ¥å¯¼å…¥æ­¤æ¨¡å—ã€‚\n\n- `ZipCodeValidator.ts`\n\n```typescript\nlet numberRegExp = /^[0-9]+$/;\n\nclass ZipCodeValidator {\n  isAcceptable(s: string) {\n    return s.length === 5 && numberRegExp.test(s);\n  }\n}\n\nexport = ZipCodeValidator; // é‡ç‚¹\n```\n\n- `Test.ts`\n\n```typescript\nimport zip = require(\"./ZipCodeValidator\"); // é‡ç‚¹\n\nlet strings = [\"Hello\", \"98502\", \"101\"];\nlet validator = new zip();\nstrings.forEach(s => {\n  console.log(`\"${s}\" - ${validator.isAcceptable(s) ? \"matches\" : \"does not match\"}`);\n});\n```\n\n### 15.6 ç”Ÿæˆæ¨¡å—ä»£ç \n\n> æ ¹æ®ç¼–è¯‘æ—¶æŒ‡å®šçš„æ¨¡å—ç›®æ ‡å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”çš„ä¾› `Node.js\\(CommonJS\\)ï¼ŒRequire.js\\(AMD\\)`ï¼Œ`UMD`ï¼Œ`SystemJS` æˆ– `ECMAScript 2015 native module\\(ES6\\)` æ¨¡å—åŠ è½½ç³»ç»Ÿä½¿ç”¨çš„ä»£ç ã€‚\n\n> æƒ³è¦äº†è§£ç”Ÿæˆä»£ç ä¸­ `define`ï¼Œ`require` å’Œ `register` çš„æ„ä¹‰ï¼Œéœ€è¦å‚è€ƒç›¸åº”çš„æ¨¡å—åŠ è½½å™¨çš„æ–‡æ¡£ã€‚\n\n- `SimpleModule.ts`\n\n```typescript\nimport m = require(\"mod\");\nexport let t = m.something + 1;\n```\n\n- `AMD / RequireJS SimpleModule.js`\n\n```typescript\ndefine([\"require\", \"exports\", \"./mod\"], function (require, exports, mod_1) {\n  exports.t = mod_1.something + 1;\n});\n```\n\n- `CommonJS / Node SimpleModule.js`\n\n```typescript\nimport mod_1 = require(\"./mod\");\nexports.t = mod_1.something + 1;\n```\n\n- `UMD SimpleModule.js`\n\n```typescript\n(function (factory) {\n  if (typeof module === \"object\" && typeof module.exports === \"object\") {\n    let v = factory(require, exports);\n    if (v !== undefined) module.exports = v;\n  } else if (typeof define === \"function\" && define.amd) {\n    define([\"require\", \"exports\", \"./mod\"], factory);\n  }\n})(function (require, exports) {\n  let mod_1 = require(\"./mod\");\n  exports.t = mod_1.something + 1;\n});\n```\n\n- `System SimpleModule.js`\n\n```typescript\nSystem.register([\"./mod\"], function (exports_1) {\n  let mod_1;\n  let t;\n  return {\n    setters: [\n      function (mod_1_1) {\n        mod_1 = mod_1_1;\n      }\n    ],\n    execute: function () {\n      exports_1(\"t\", (t = mod_1.something + 1));\n    }\n  };\n});\n```\n\n- `Native ECMAScript 2015 modules SimpleModule.js`\n\n```typescript\nimport { something } from \"./mod\";\nexport let t = something + 1;\n```\n\n### 15.7 ç®€å•ç¤ºä¾‹\n\n> ä¸‹é¢æˆ‘ä»¬æ¥æ•´ç†ä¸€ä¸‹å‰é¢çš„éªŒè¯å™¨å®ç°ï¼Œæ¯ä¸ªæ¨¡å—åªæœ‰ä¸€ä¸ªå‘½åçš„å¯¼å‡ºã€‚\n\n> ä¸ºäº†ç¼–è¯‘ï¼Œæˆ‘ä»¬å¿…é¡»è¦åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šä¸€ä¸ªæ¨¡å—ç›®æ ‡ã€‚å¯¹äº `Node.js` æ¥è¯´ï¼Œä½¿ç”¨ `--module commonjs`ï¼›å¯¹äº `Require.js` æ¥è¯´ï¼Œä½¿ç”¨ `--module amd`ã€‚\n\n- æ¯”å¦‚ï¼š\n\n```typescript\ntsc --module commonjs Test.ts\n```\n\n> ç¼–è¯‘å®Œæˆåï¼Œæ¯ä¸ªæ¨¡å—ä¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ `.js` æ–‡ä»¶ã€‚å¥½æ¯”ä½¿ç”¨äº† `reference` æ ‡ç­¾ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ® `import` è¯­å¥ç¼–è¯‘ç›¸åº”çš„æ–‡ä»¶ã€‚\n\n- `Validation.ts`\n\n```typescript\nexport interface StringValidator {\n  isAcceptable(s: string): boolean;\n}\n```\n\n- `LetterOnlyValidator.ts`\n\n```typescript\nimport { StringValidator } from \"./Validation\";\nconst lettersRegExp = /^[A-Za-z]+$/;\n\nexport class LetterOnlyValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return lettersRegExp.test(s);\n  }\n}\n```\n\n- `ZipCodeValidator.ts`\n\n```typescript\nimport { StringValidator } from \"./Validation\";\nconst numberRegExp = /^[0-9]+$/;\n\nexport class ZipCodeValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegExp.test(s);\n  }\n}\n```\n\n- `Test.ts`\n\n```typescript\nimport { StringValidator } from \"./Validation\";\nimport { ZipCodeValidator } from \"./ZipCodeValidator\";\nimport { LetterOnlyValidator } from \"./LetterOnlyValidator\";\n\n// Some samples to try\nlet strings = [\"Hello\", \"98052\", \"101\"];\n\n// Validators to use\nlet validators: { [s: string]: StringValidator } = {};\nvalidators[\"ZIP code\"] = new ZipCodeValidator();\nvalidators[\"Letters only\"] = new LetterOnlyValidator();\n\n// Show whether each string passed each validator\nstrings.forEach(s => {\n  for (let name in validators) {\n    console.log(`\"${s}\" - ${validators[name].isAcceptable(s) ? \"matches\" : \"does not match\"} ${name}`);\n  }\n});\n```\n\n### 15.8 å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\n\n1. æœ‰æ—¶å€™ï¼Œä½ åªæƒ³åœ¨æŸç§æ¡ä»¶ä¸‹æ‰åŠ è½½æŸä¸ªæ¨¡å—ã€‚åœ¨ `TypeScript` é‡Œï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®ç°å®ƒå’Œå…¶å®ƒçš„é«˜çº§åŠ è½½åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨æ¨¡å—åŠ è½½å™¨å¹¶ä¸”ä¿è¯ç±»å‹å®Œå…¨ã€‚\n2. ç¼–è¯‘å™¨ä¼šæ£€æµ‹æ˜¯å¦æ¯ä¸ªæ¨¡å—éƒ½ä¼šåœ¨ç”Ÿæˆçš„ `JavaScript` ä¸­ç”¨åˆ°ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—æ ‡è¯†ç¬¦åªåœ¨ç±»å‹æ³¨è§£éƒ¨åˆ†ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œå…¨æ²¡æœ‰åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ï¼Œå°±ä¸ä¼šç”Ÿæˆ `require` è¿™ä¸ªæ¨¡å—çš„ä»£ç ã€‚çœç•¥æ‰æ²¡æœ‰ç”¨åˆ°çš„å¼•ç”¨å¯¹æ€§èƒ½æå‡æ˜¯å¾ˆæœ‰ç›Šçš„ï¼Œå¹¶åŒæ—¶æä¾›äº†é€‰æ‹©æ€§åŠ è½½æ¨¡å—çš„èƒ½åŠ›ã€‚\n3. è¿™ç§æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ `import id = require(\"...\")` è¯­å¥å¯ä»¥è®©æˆ‘ä»¬è®¿é—®æ¨¡å—å¯¼å‡ºçš„ç±»å‹ã€‚æ¨¡å—åŠ è½½å™¨ä¼šè¢«åŠ¨æ€è°ƒç”¨(é€šè¿‡ `require`)ï¼Œå°±åƒä¸‹é¢çš„ `if` ä»£ç å—é‡Œé‚£æ ·ã€‚å®ƒåˆ©ç”¨äº†çœç•¥å¼•ç”¨çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æ¨¡å—åªåœ¨è¢«éœ€è¦æ—¶åŠ è½½ã€‚ä¸ºäº†è®©è¿™ä¸ªæ¨¡å—å·¥ä½œï¼Œä¸€å®šè¦æ³¨æ„ `import` å®šä¹‰çš„æ ‡è¯†ç¬¦åªèƒ½åœ¨è¡¨ç¤ºç±»å‹å¤„ä½¿ç”¨(ä¸èƒ½åœ¨ä¼šè½¬æ¢æˆ `JavaScript` çš„åœ°æ–¹ã€‚)\n4. ä¸ºäº†ç¡®ä¿ç±»å‹å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `typeof` å…³é”®å­—ã€‚`typeof` å…³é”®å­—ï¼Œå½“åœ¨è¡¨ç¤ºç±»å‹çš„åœ°æ–¹ä½¿ç”¨æ—¶ï¼Œä¼šå¾—å‡ºä¸€ä¸ªç±»å‹å€¼ï¼Œè¿™é‡Œå°±è¡¨ç¤ºæ¨¡å—çš„ç±»å‹ã€‚\n\n- `ç¤ºä¾‹ 1`. `Node.js` é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½\n\n```typescript\ndeclare function require(moduleName: string): any;\nimport { ZipCodeValidator as Zip } from \"./ZipCodeValidator\";\nif (needZipValidator) {\n  let ZipCodeValidator: typeof Zip = require(\"./ZipCodeValidator\");\n  let validator = new ZipCodeValidator();\n  if (validator.isAcceptable(\"...\")) {\n    /!* ... *!/;\n  }\n}\n```\n\n- `ç¤ºä¾‹ 2`. `require.js` é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½\n\n```typescript\ndeclare function require(moduleNames: string[], onLoad: (...args: any[]) => void): void;\nimport * as Zip from \"./ZipCodeValidator\";\nif (needZipValidator) {\n  require([\"./ZipCodeValidator\"], (ZipCodeValidator: typeof Zip) => {\n    let validator = new ZipCodeValidator.ZipCodeValidator();\n    if (validator.isAcceptable(\"...\")) {\n      /!* ... *!/;\n    }\n  });\n}\n```\n\n- `ç¤ºä¾‹ 3`. `System.js` é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½\n\n```typescript\ndeclare const System: any;\nimport { ZipCodeValidator as Zip } from \"./ZipCodeValidator\";\nif (needZipValidator) {\n  System.import(\"./ZipCodeValidator\").then((ZipCodeValidator: typeof Zip) => {\n    var x = new ZipCodeValidator();\n    if (x.isAcceptable(\"...\")) {\n      /!*...*!/;\n    }\n  });\n}\n```\n\n### 15.9 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\n\n> è¦æƒ³æè¿°é `TypeScript` ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“æ‰€æš´éœ²çš„ `API`ã€‚\n\n> æˆ‘ä»¬å«å®ƒå£°æ˜å› ä¸ºå®ƒä¸æ˜¯'å¤–éƒ¨ç¨‹åº'çš„å…·ä½“å®ç°ï¼Œå®ƒä»¬é€šå¸¸æ˜¯åœ¨ `.d.ts` æ–‡ä»¶é‡Œå®šä¹‰çš„ã€‚ç±»ä¼¼äº `C/C++` é‡Œçš„ `.h` æ–‡ä»¶ã€‚\n\n#### 15.9.1 å¤–éƒ¨æ¨¡å—\n\n> åœ¨ `Node.js` é‡Œå¤§éƒ¨åˆ†å·¥ä½œæ˜¯é€šè¿‡åŠ è½½ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—å®ç°çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¡¶çº§çš„ `export` å£°æ˜æ¥ä¸ºæ¯ä¸ªæ¨¡å—éƒ½å®šä¹‰ä¸€ä¸ª `.d.ts` æ–‡ä»¶ï¼Œä½†æœ€å¥½è¿˜æ˜¯å†™åœ¨ä¸€ä¸ªå¤§çš„ `.d.ts` æ–‡ä»¶é‡Œã€‚æˆ‘ä»¬ä½¿ç”¨ä¸æ„é€ ä¸€ä¸ªå¤–éƒ¨å‘½åç©ºé—´ç›¸ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨ `module` å…³é”®å­—å¹¶ä¸”æŠŠåå­—ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œæ–¹ä¾¿ä¹‹å `import`ã€‚\n\n- `ä¾‹å¦‚ï¼š`\n- `node.d.ts(simplified except)`\n\n```typescript\ndeclare module \"url\" {\n  export interface Url {\n    protocol?: string;\n    hostname?: string;\n    pathname?: string;\n  }\n\n  export function parse(urlStr: string, parseQueryString?, slashesDenoteHost?): Url;\n}\n\ndeclare module \"path\" {\n  export function normalize(p: string): string;\n  export function join(...paths: any[]): string;\n  export let sep: string;\n}\n```\n\n> ç°åœ¨æˆ‘ä»¬å¯ä»¥ `/// <reference> node.d.ts` å¹¶ä¸”ä½¿ç”¨ `import url = require('url')`ï¼›æˆ– `import * as URl from \"url\"` åŠ è½½æ¨¡å—ã€‚`\n\n```typescript\n/// <reference path=\"node.d.ts\">\nimport * as URL from \"url\";\n\nlet myUrl = URL.parse(\"http://www.typescriptlang.org\");\n```\n\n#### 15.9.2 å¤–éƒ¨æ¨¡å—ç®€å†™\n\n> å‡å¦‚ä½ ä¸æƒ³åœ¨ä½¿ç”¨ä¸€ä¸ªæ–°æ¨¡å—ä¹‹å‰èŠ±æ—¶é—´å»ç¼–å†™å£°æ˜ï¼Œä½ å¯ä»¥é‡‡ç”¨å£°æ˜çš„ç®€å†™å½¢å¼ä»¥ä¾¿èƒ½å¤Ÿå¿«é€Ÿä½¿ç”¨å®ƒã€‚\n\n> `declarations.d.ts`\n\n```typescript\ndeclare module \"hot-new-module\";\n```\n\n- ç®€å†™æ¨¡å—é‡Œæ‰€æœ‰å¯¼å‡ºç±»å‹å°†æ˜¯ `any`\n\n```typescript\nimport x, { y } from \"hot-new-module\";\nx(y);\n```\n\n#### 15.9.3 æ¨¡å—å£°æ˜é€šé…ç¬¦\n\n> æŸäº›æ¨¡å—åŠ è½½å™¨å¦‚ `SystemJS` å’Œ `AMD` æ”¯æŒå¯¼å…¥é `JavaScript` å†…å®¹ã€‚å®ƒä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªå‰ç¼€æˆ–åç¼€æ¥è¡¨ç¤ºç‰¹æ®Šçš„åŠ è½½è¯­æ³•ï¼Œæ¨¡å—å£°æ˜é€šé…ç¬¦å¯ä»¥ç”¨æ¥è¡¨ç¤ºè¿™äº›æƒ…å†µã€‚\n\n```typescript\ndeclare module \"*!text\" {\n  const content: string;\n  export default content;\n}\n```\n\n- `some do it the other way around`\n\n```typescript\ndeclare module \"json!*\" {\n  const value: any;\n  export default value;\n}\n```\n\n- ç°åœ¨ä½ å¯ä»¥å°±å¯¼å…¥åŒ¹é… `\"!text\"` æˆ– `\"json!\"` çš„å†…å®¹äº†ã€‚\n\n```typescript\nimport fileContent from \"./xyz.txt!txt\";\nimport data from \"json!http://example.com/data.json\";\nconsole.log(data, fileContent);\n```\n\n#### 15.9.4 `UMD` æ¨¡å—\n\n> æœ‰äº›æ¨¡å—è¢«è®¾è®¡æˆå…¼å®¹å¤šä¸ªæ¨¡å—åŠ è½½å™¨ï¼Œæˆ–è€…ä¸ä½¿ç”¨æ¨¡å—åŠ è½½å™¨(å…¨å±€å˜é‡)ã€‚å®ƒä»¬ä»¥ `UMD` æ¨¡å—ä¸ºä»£è¡¨ã€‚è¿™äº›åº“å¯ä»¥é€šè¿‡å¯¼å…¥çš„å½¢å¼æˆ–å…¨å±€å˜é‡çš„å½¢å¼è®¿é—®ã€‚\n\n- `ä¾‹å¦‚ï¼š`\n- `math-lib.d.ts`\n\n```typescript\nexport function isPrime(x: number): boolean;\nexport as namespace mathLib;\n```\n\n- ä¹‹åï¼Œè¿™ä¸ªåº“å¯ä»¥åœ¨æŸä¸ªæ¨¡å—é‡Œé€šè¿‡å¯¼å…¥æ¥ä½¿ç”¨:\n\n```typescript\nimport { isPrime } from \"math-lib\";\nisPrime(2);\nmathLib.isPrime(2);\n```\n\n- å®ƒåŒæ ·å¯ä»¥é€šè¿‡å…¨å±€å˜é‡çš„å½¢å¼ä½¿ç”¨ï¼Œä½†åªèƒ½åœ¨æŸä¸ªè„šæœ¬(æŒ‡ä¸å¸¦æœ‰æ¨¡å—å¯¼å…¥æˆ–å¯¼å‡ºçš„è„šæœ¬æ–‡ä»¶)é‡Œã€‚\n\n```typescript\nmathLib.isPrime(2);\n```\n\n### 15.10 åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\n\n#### 15.10.1 å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\n\n1. ç”¨æˆ·åº”è¯¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ä½ æ¨¡å—å¯¼å‡ºçš„å†…å®¹ã€‚åµŒå¥—å±‚æ¬¡è¿‡å¤šä¼šå˜å¾—éš¾ä»¥å¤„ç†ï¼Œå› æ­¤ä»”ç»†è€ƒè™‘ä¸€ä¸‹å¦‚ä½•ç»„ç»‡ä½ çš„ä»£ç ã€‚\n2. ä»ä½ çš„æ¨¡å—ä¸­å¯¼å‡ºä¸€ä¸ªå‘½åç©ºé—´å°±æ˜¯ä¸€ä¸ªå¢åŠ åµŒå¥—çš„ä¾‹å­ã€‚è™½ç„¶å‘½åç©ºé—´æœ‰æ—¶å€™æœ‰å®ƒä»¬çš„ç”¨å¤„ï¼Œåœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™å®ƒä»¬é¢å¤–åœ°å¢åŠ äº†ä¸€å±‚ã€‚è¿™å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å¾ˆä¸æ–¹ä¾¿çš„å¹¶ä¸”é€šå¸¸æ˜¯å¤šä½™çš„ã€‚\n3. å¯¼å‡ºç±»çš„é™æ€æ–¹æ³•ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ - è¿™ä¸ªç±»æœ¬èº«å°±å¢åŠ äº†ä¸€å±‚åµŒå¥—ã€‚é™¤éå®ƒèƒ½æ–¹ä¾¿åœ°è¡¨è¿°æˆ–ä¾¿äºæ¸…æ™°ä½¿ç”¨ï¼Œå¦åˆ™è¯·è€ƒè™‘ç›´æ¥å¯¼å‡ºä¸€ä¸ªè¾…åŠ©æ–¹æ³•ã€‚\n\n#### 15.10.2 å¦‚æœä»…å¯¼å‡ºå•ä¸ª `class` æˆ– `function`ï¼Œä½¿ç”¨ `export default`\n\n> å°±åƒ\" `åœ¨é¡¶å±‚å¯¼å‡º` \"å¸®åŠ©å‡å°‘ç”¨æˆ·ä½¿ç”¨çš„éš¾åº¦ï¼Œä¸€ä¸ªé»˜è®¤çš„å¯¼å‡ºä¹Ÿèƒ½èµ·åˆ°è¿™ä¸ªæ•ˆæœã€‚å¦‚æœä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸ºäº†å¯¼å‡ºç‰¹å®šçš„å†…å®¹ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€‚è¿™ä¼šä»¤æ¨¡å—çš„å¯¼å…¥å’Œä½¿ç”¨å˜å¾—äº›è®¸ç®€å•ï¼Œæ¯”å¦‚ï¼š\n\n- `MyClass.ts`\n\n```typescript\nexport default class SomeType {\n  constructor() {\n    /!* ... *!/;\n  }\n}\n```\n\n- `MyFunc.ts`\n\n```typescript\nexport default function getThing() {\n  return \"thing\";\n}\n```\n\n- `Consumer.ts`\n\n```typescript\nimport t from \"./MyClass\";\nimport f from \"./MyFunc\";\nlet x = new t();\nconsole.log(f());\n```\n\n> å¯¹ç”¨æˆ·æ¥è¯´è¿™æ˜¯æœ€ç†æƒ³çš„ã€‚ä»–ä»¬å¯ä»¥éšæ„å‘½åå¯¼å…¥æ¨¡å—çš„ç±»å‹ (æœ¬ä¾‹ä¸º `t` ) å¹¶ä¸”ä¸éœ€è¦å¤šä½™çš„ ( `.` ) æ¥æ‰¾åˆ°ç›¸å…³å¯¹è±¡ã€‚\n\n#### 15.10.3 å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\n\n- `MyThings.ts`\n\n```typescript\nexport class SomeType {/!*...*!/}\nexport function someFunc() {\n    /*...*/\n}\n```\n\n#### 15.10.4 (ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™)æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\n\n- `Consumer.ts`\n\n```typescript\nimport { SomeType, someFunc } from \"./MyThings\";\nlet x = new SomeType();\nlet y = someFunc();\n```\n\n#### 15.10.5 ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\n\n- `MyLargeModule.ts`\n\n```typescript\nexport class Dog {}\nexport class Cat {}\nexport class Tree {}\nexport class Flower {}\n```\n\n- `Consumer.ts`\n\n```typescript\nimport * as myLargeModule from \"./MyLargeModule.ts\";\nlet x = new myLargeModule.Dog();\n```\n\n#### 15.10.6 ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\n\n> ä½ å¯èƒ½ç»å¸¸éœ€è¦æ‰©å±•ä¸€ä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚`JS` é‡Œå¸¸ç”¨çš„ä¸€ä¸ªæ¨¡å¼æ˜¯ `JQuery` é‚£æ ·å»æ‰©å±•åŸå¯¹è±¡ã€‚å¦‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ï¼Œæ¨¡å—ä¸ä¼šåƒå…¨å±€å‘½åç©ºé—´é‚£æ ·å»åˆå¹¶ã€‚æ¨èçš„æ–¹æ¡ˆæ˜¯ ä¸è¦å»æ”¹å˜åŸæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¯¼å‡ºä¸€ä¸ªæ–°çš„å®ä½“æ¥æä¾›æ–°çš„åŠŸèƒ½ã€‚\n\n> å‡è®¾ `Calculator.ts` æ¨¡å—é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨å®ç°ã€‚è¿™ä¸ªæ¨¡å—åŒæ ·æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¼ å…¥ä¸€ç³»åˆ—è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶åœ¨æœ€åç»™å‡ºç»“æœã€‚\n\n- `Calculator.ts`\n\n```typescript\nexport class Calculator {\n  private current = 0;\n  private memory = 0;\n  private operator: string;\n\n  protected static processDigit(digit: string, currentValue: number) {\n    if (digit >= \"0\" && digit <= \"9\") {\n      return currentValue * 10 + (digit.charCodeAt(0) - \"0\".charCodeAt(0));\n    }\n  }\n\n  protected static processOperator(operator: string) {\n    if ([\"+\", \"-\", \"*\", \"/\"].indexOf(operator) >= 0) {\n      return operator;\n    }\n  }\n\n  protected evaluateOperator(operator: string, left: number, right: number): number {\n    switch (this.operator) {\n      case \"+\":\n        return left + right;\n      case \"-\":\n        return left - right;\n      case \"*\":\n        return left * right;\n      case \"/\":\n        return left / right;\n    }\n  }\n\n  private evaluate() {\n    if (this.operator) {\n      this.memory = this.evaluateOperator(this.operator, this.memory, this.current);\n    } else {\n      this.memory = this.current;\n    }\n    this.current = 0;\n  }\n\n  public handleChar(char: string) {\n    if (char === \"=\") {\n      this.evaluate();\n      return;\n    } else {\n      let value = Calculator.processDigit(char, this.current);\n      if (value !== undefined) {\n        this.current = value;\n        return;\n      } else {\n        let value = Calculator.processOperator(char);\n        if (value !== undefined) {\n          this.evaluate();\n          this.operator = value;\n          return;\n        }\n      }\n    }\n    throw new Error(`Unsupported input: '${char}'`);\n  }\n\n  public getResult() {\n    return this.memory;\n  }\n}\n\nexport function test(c: Calculator, input: string) {\n  for (let i = 0; i < input.length; i++) {\n    c.handleChar(input[i]);\n  }\n  console.log(`result of '${input}' is '${c.getResult()}'`);\n}\n```\n\n- ä¸‹é¢ä½¿ç”¨å¯¼å‡ºçš„ `test` å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨\n- `TestCalculator.ts`\n\n```typescript\nimport { Calculator, test } from \"./Calculator\";\nlet c = new Calculator();\ntest(c, \"1+2*33/11=\"); // prints 9\n```\n\n- ç°åœ¨æ‰©å±•å®ƒï¼Œæ·»åŠ æ”¯æŒè¾“å…¥å…¶å®ƒè¿›åˆ¶(åè¿›åˆ¶ä»¥å¤–)ã€‚\n- `ProgrammerCalculator.ts`\n\n```typescript\nimport { Calculator } from \"./Calculator\";\nclass ProgrammerCalculator extends Calculator {\n  static digits = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\"];\n  constructor(public base: number) {\n    super();\n    const maxBase = ProgrammerCalculator.digits.length;\n    if (base <= 0 || base > maxBase) {\n      throw new Error(`base has to be within 0 to ${maxBase} inclusive`);\n    }\n  }\n  protected processDigit(digit: string, currentValue: number) {\n    if (ProgrammerCalculator.digits.indexOf(digit) >= 0) {\n      return currentValue * this.base + ProgrammerCalculator.digits.indexOf(digit);\n    }\n  }\n}\nexport { ProgrammerCalculator as Calculator };\nexport { test } from \"./Calculator\";\n```\n\n> æ–°çš„ `ProgrammerCalculator` æ¨¡å—å¯¼å‡ºçš„ API ä¸åŸå…ˆçš„ `Calculator` æ¨¡å—å¾ˆç›¸ä¼¼ï¼Œä½†å´æ²¡æœ‰æ”¹å˜åŸæ¨¡å—é‡Œçš„å¯¹è±¡ã€‚\n\n- `TestProgrammerCalculator.ts`\n\n```typescript\nimport { Calculator, test } from \"./ProgrammerCalculator\";\nlet c = new Calculator(2);\ntest(c, \"001+010=\"); // prints 3\n```\n\n#### 15.10.7 æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\n\n> å½“åˆæ¬¡è¿›å…¥åŸºäºæ¨¡å—çš„å¼€å‘æ¨¡å¼æ—¶ï¼Œå¯èƒ½æ€»ä¼šæ§åˆ¶ä¸ä½è¦å°†å¯¼å‡ºåŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚æ¨¡å—å…·æœ‰å…¶è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”åªæœ‰å¯¼å‡ºçš„å£°æ˜æ‰ä¼šåœ¨æ¨¡å—å¤–éƒ¨å¯è§ã€‚è®°ä½è¿™ç‚¹ï¼Œå‘½åç©ºé—´åœ¨ä½¿ç”¨æ¨¡å—æ—¶å‡ ä¹æ²¡ä»€ä¹ˆä»·å€¼ã€‚\n\n> åœ¨ç»„ç»‡æ–¹é¢ï¼Œå‘½åç©ºé—´å¯¹äºåœ¨å…¨å±€ä½œç”¨åŸŸå†…å¯¹é€»è¾‘ä¸Šç›¸å…³çš„å¯¹è±¡å’Œç±»å‹åˆ†ç»„æ˜¯å¾ˆä¾¿åˆ©çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ `C\\#` é‡Œï¼Œä½ ä¼šä» `System.Collections` é‡Œæ‰¾åˆ°æ‰€æœ‰é›†åˆçš„ç±»å‹ã€‚é€šè¿‡å°†ç±»å‹æœ‰å±‚æ¬¡åœ°ç»„ç»‡åœ¨å‘½åç©ºé—´é‡Œï¼Œå¯ä»¥æ–¹ä¾¿ç”¨æˆ·æ‰¾åˆ°ä¸ä½¿ç”¨é‚£äº›ç±»å‹ã€‚ç„¶è€Œï¼Œæ¨¡å—æœ¬èº«å·²ç»å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸­ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚æˆ‘ä»¬å¿…é¡»é€šè¿‡è·¯å¾„å’Œæ–‡ä»¶åæ‰¾åˆ°å®ƒä»¬ï¼Œè¿™å·²ç»æä¾›äº†ä¸€ç§é€»è¾‘ä¸Šçš„ç»„ç»‡å½¢å¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»º `/collections/generic/` æ–‡ä»¶å¤¹ï¼ŒæŠŠç›¸åº”æ¨¡å—æ”¾åœ¨è¿™é‡Œã€‚\n\n> å‘½åç©ºé—´å¯¹è§£å†³å…¨å±€ä½œç”¨åŸŸé‡Œå‘½åå†²çªæ¥è¯´æ˜¯å¾ˆé‡è¦çš„ã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ª `My.Application.Customer.AddFrom` å’Œ `My.Application.Order.AddForm` `--` ä¸¤ä¸ªç±»å‹çš„åå­—ç›¸åŒï¼Œä½†å‘½åç©ºé—´ä¸åŒã€‚ç„¶è€Œï¼Œè¿™å¯¹äºæ¨¡å—æ¥è¯´å´ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚åœ¨ä¸€ä¸ªæ¨¡å—é‡Œï¼Œæ²¡æœ‰ç†ç”±ä¸¤ä¸ªå¯¹è±¡æ‹¥æœ‰åŒä¸€ä¸ªåå­—ã€‚ä»æ¨¡å—çš„ä½¿ç”¨è§’åº¦æ¥è¯´ï¼Œä½¿ç”¨è€…ä¼šæŒ‘å‡ºå®ƒä»¬ç”¨æ¥å¼•ç”¨æ¨¡å—çš„åå­—ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ç†ç”±å‘å£°é‡åçš„æƒ…å†µã€‚\n\n#### 15.10.8 å±é™©ä¿¡å·\n\n> ä»¥ä¸‹å‡ä¸ºæ¨¡å—ç»“æ„ä¸Šçš„å±é™©ä¿¡å·ã€‚é‡æ–°æ£€æŸ¥ä»¥ç¡®ä¿ä½ æ²¡æœ‰åœ¨å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚\n\n1. æ–‡ä»¶çš„é¡¶å±‚å£°æ˜æ˜¯ `export namespace Foo {...}` ( åˆ é™¤ `Foo` å¹¶æŠŠæ‰€æœ‰å†…å®¹å‘ä¸Šå±‚ç§»åŠ¨ä¸€å±‚)\n2. æ–‡ä»¶åªæœ‰ä¸€ä¸ª `export class` æˆ– `export function` (è€ƒè™‘ä½¿ç”¨ `export default`)\n3. å¤šä¸ªæ–‡ä»¶çš„é¡¶å±‚å…·æœ‰åŒæ ·çš„ `export namespace Foo` {( ä¸è¦ä»¥ä¸ºè¿™äº›ä¼šåˆå¹¶åˆ°ä¸€ä¸ª `Foo` ä¸­! )}\n\n## åå…­ã€å‘½åç©ºé—´\n\n### 16.1 ä»‹ç»\n\n> è¿™ç¯‡æ–‡ç« æè¿°äº†å¦‚ä½•åœ¨ `TypeScript` é‡Œä½¿ç”¨å‘½åç©ºé—´(ä¹‹å‰å«åš\"å†…éƒ¨æ¨¡å—\")æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚å°±åƒæˆ‘ä»¬åœ¨æœ¯è¯­è¯´æ˜é‡Œæåˆ°çš„é‚£æ ·ï¼Œ`\"å†…éƒ¨æ¨¡å—\"` ç°åœ¨å«åš `\"å‘½åç©ºé—´\"`ã€‚å¦å¤–ï¼Œä»»ä½•ä½¿ç”¨ `module` å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå†…éƒ¨æ¨¡å—çš„åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨ `namespace` å…³é”®å­—æ¥æ›¿æ¢ã€‚è¿™å°±é¿å…äº†è®©æ–°çš„ä½¿ç”¨è€…è¢«ç›¸ä¼¼çš„åç§°æ‰€è¿·æƒ‘ã€‚\n\n- `ç¬¬ä¸€æ­¥`\n\n> æˆ‘ä»¬å…ˆæ¥å†™ä¸€æ®µç¨‹åºå¹¶å°†åœ¨æ•´ç¯‡æ–‡ç« ä¸­éƒ½ä½¿ç”¨è¿™ä¸ªä¾‹å­ã€‚æˆ‘ä»¬å®šä¹‰å‡ ä¸ªç®€å•çš„å­—ç¬¦ä¸²éªŒè¯å™¨ï¼Œ\n\n> å‡è®¾ä½ ä¼šä½¿ç”¨å®ƒä»¬æ¥éªŒè¯è¡¨å•é‡Œçš„ç”¨æˆ·è¾“å…¥æˆ–éªŒè¯å¤–éƒ¨æ•°æ®ã€‚\n\n- `æ‰€æœ‰éªŒè¯å™¨éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œ`\n\n```typescript\ninterface StringValidator {\n  isAcceptable(s: string): boolean;\n}\n\nlet letterRegExp = /^[A-Za-z]$/;\nlet numberRegExp = /^[0-9]+$/;\n\nclass LetterOnlyValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return letterRegExp.test(s);\n  }\n}\n\nclass ZipCodeValidator implements StringValidator {\n  isAcceptable(s: string): boolean {\n    return s.length === 5 && numberRegExp.test(s);\n  }\n}\n\nlet strings = [\"Hello\", \"98052\", \"101\"];\nlet validators: { [s: string]: StringValidator } = {};\nvalidators[\"ZIP code\"] = new ZipCodeValidator();\nvalidators[\"Letters Only\"] = new LetterOnlyValidator();\n// show whether each string passed each validator\nfor (let s of strings) {\n  for (let name in validators) {\n    let isMatch = validators[name].isAcceptable(s);\n    console.log(`'${s}' ${isMatch ? \"matches\" : \"does not match\"} '${name}'.`);\n  }\n}\n```\n\n### 16.2 å‘½åç©ºé—´\n\n> éšç€æ›´å¤šéªŒè¯å™¨çš„åŠ å…¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ‰‹æ®µæ¥ç»„ç»‡ä»£ç ï¼Œä»¥ä¾¿äºåœ¨è®°å½•å®ƒä»¬ç±»å‹çš„åŒæ—¶è¿˜ä¸ç”¨æ‹…å¿ƒä¸å…¶å®ƒå¯¹è±¡äº§ç”Ÿå‘½åå†²çªã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŠŠéªŒè¯å™¨åŒ…è£¹åˆ°ä¸€ä¸ªå‘½åç©ºé—´é‡Œå†…ï¼Œè€Œä¸æ˜¯æŠŠå®ƒä»¬æ”¾åœ¨å…¨å±€ç©ºé—´ä¸‹ã€‚\n\n> ä¸‹é¢çš„ä¾‹å­é‡Œï¼ŒæŠŠæ‰€æœ‰ä¸éªŒè¯å™¨ç›¸å…³çš„ç±»å‹éƒ½æ”¾åˆ°ä¸€ä¸ªå«åš `Validation` çš„å‘½åç©ºé—´é‡Œã€‚å› ä¸ºæˆ‘ä»¬æƒ³è®©è¿™äº›æ¥å£å’Œç±»åœ¨å‘½åç©ºé—´ä¹‹å¤–ä¹Ÿæ˜¯å¯è®¿é—®çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ `export`ã€‚ç›¸åçš„ï¼Œå˜é‡ `LetterRegExp` å’Œ `numberRegExp` æ˜¯å®ç°çš„ç»†èŠ‚ï¼Œä¸éœ€è¦å¯¼å‡ºï¼Œå› æ­¤å®ƒä»¬åœ¨å‘½åç©ºé—´å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚åœ¨æ–‡ä»¶æœ«å°¾çš„æµ‹è¯•ä»£ç é‡Œï¼Œç”±äºæ˜¯åœ¨å‘½åç©ºé—´ä¹‹å¤–è®¿é—®çš„ï¼Œå› æ­¤éœ€è¦é™å®šç±»å‹çš„åç§°ï¼Œæ¯”å¦‚ `Validation.LettersOnlyValidator`ã€‚\n\n- ä½¿ç”¨å‘½åç©ºé—´çš„éªŒè¯å™¨\n\n```typescript\nnamespace Validation {\n  export interface StringValidator {\n    isAcceptable(s: string): boolean;\n  }\n\n  const LetterRegExp = /^[A-Za-z]+$/;\n  const numberRegExp = /^[0-9]+$/;\n\n  export class LetterOnlyValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return LetterRegExp.test(s);\n    }\n  }\n\n  export class ZipCodeValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return s.length === 5 && numberRegExp.test(s);\n    }\n  }\n}\nlet strings = [\"Hello\", \"98052\", \"101\"];\nlet validators: { [s: string]: Validation.StringValidator } = {};\nvalidators[\"ZIP Code\"] = new Validation.ZipCodeValidator();\nvalidators[\"Letters Only\"] = new Validation.LetterOnlyValidator();\nfor (let s of strings) {\n  for (let name in validators) {\n    console.log(`'${s}' ${validators[name].isAcceptable(s) ? \"matches\" : \"does not match\"} '${name}'.`);\n  }\n}\n```\n\n### 16.3 åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\n\n> å½“åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ä»¥æ–¹ä¾¿ç»´æŠ¤ã€‚\n\n#### 16.3.1 å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\n\n> ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ `Validation` å‘½åç©ºé—´åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚å°½ç®¡æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼Œå®ƒä»¬ä»æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å¦‚åŒå®ƒä»¬åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€æ ·ã€‚å› ä¸ºä¸åŒæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ å…¥äº†å¼•ç”¨æ ‡ç­¾æ¥å‘Šè¯‰ç¼–è¯‘å™¨æ–‡ä»¶ä¹‹é—´çš„å…³è”ã€‚\n\n- `Validation.ts`\n\n```typescript\nnamespace Validation {\n  export interface StringValidator {\n    isAcceptable(s: string): boolean;\n  }\n}\n```\n\n- `LetterOnlyValidator.ts`\n\n```typescript\n/// <reference path=\"Validation.ts\" />;\nnamespace Validation {\n  const lettersRegExp = /^[A-Za-z]+$/;\n  export class LettersOnlyValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return lettersRegExp.test(s);\n    }\n  }\n}\n```\n\n- `ZipCodeValidator.ts`\n\n```typescript\n/// <reference path=\"Validation.ts\" />\nnamespace Validation {\n  const numberRegExp = /^[0-9]+$/;\n  export class ZipCodeValidator implements StringValidator {\n    isAcceptable(s: string): boolean {\n      return s.length === 5 && numberRegExp.test(s);\n    }\n  }\n}\n```\n\n- `Test.ts`\n\n```typescript\n/// <reference path=\"Validation.ts\" />\n/// <reference path=\"LettersOnlyValidator.ts\" />\n/// <reference path=\"ZipCodeValidator.ts\" />\n\n// Some samples to try\nlet strings = [\"Hello\", \"98052\", \"101\"];\n\n// Validators to use\nlet validators: { [s: string]: Validation.StringValidator } = {};\nvalidators[\"ZIP code\"] = new Validation.ZipCodeValidator();\nvalidators[\"Letters only\"] = new Validation.LettersOnlyValidator();\n\n// Show whether each string passed each validator\nfor (let s of strings) {\n  for (let name in validators) {\n    console.log(`\"${s}\" - ${validators[name].isAcceptable(s) ? \"matches\" : \"does not match\"} ${name}`);\n  }\n}\n```\n\n> å½“æ¶‰åŠåˆ°å¤šæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æ‰€æœ‰ç¼–è¯‘åçš„ä»£ç éƒ½è¢«åŠ è½½äº†ã€‚æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼ã€‚\n\n1. ç¬¬ä¸€ç§æ–¹å¼ï¼ŒæŠŠæ‰€æœ‰çš„è¾“å…¥æ–‡ä»¶ç¼–è¯‘ä¸ºä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ `--outFile` æ ‡è®°ï¼š `tsc --outFile sample.js Test.ts` ç¼–è¯‘å™¨ä¼šæ ¹æ®æºç é‡Œçš„å¼•ç”¨æ ‡ç­¾è‡ªåŠ¨åœ°å¯¹è¾“å‡ºè¿›è¡Œæ’åºã€‚ä½ ä¹Ÿå¯ä»¥å•ç‹¬åœ°æŒ‡å®šæ¯ä¸ªæ–‡ä»¶ã€‚ `tsc --outFile sample.js Validation.ts LetterOnlyValidator.ts ZipCodeValidator.ts Test.ts`\n2. ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¯ä¸€ä¸ªæ–‡ä»¶(é»˜è®¤æ–¹å¼)ï¼Œé‚£ä¹ˆæ¯ä¸ªæºæ–‡ä»¶éƒ½ä¼šå¯¹åº”ç”Ÿæˆä¸€ä¸ª `JavaScript` æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨é¡µé¢ä¸Šé€šè¿‡ `<script>` æ ‡ç­¾æŠŠæ‰€æœ‰ç”Ÿæˆçš„ `JavaScript` æ–‡ä»¶æŒ‰æ­£ç¡®çš„é¡ºåºå¼•è¿›æ¥ï¼Œæ¯”å¦‚ï¼š\n\n```html\nMyTestPage.html (excerpt)\n<script src=\"Validation.js\" type=\"text/javascript\" />\n<script src=\"LettersOnlyValidator.js\" type=\"text/javascript\" />\n<script src=\"ZipCodeValidator.js\" type=\"text/javascript\" />\n<script src=\"Test.js\" type=\"text/javascript\" />\n```\n\n### 16.4 åˆ«å\n\n> å¦ä¸€ç§ç®€åŒ–å‘½åç©ºé—´æ“ä½œçš„æ–¹æ³•æ˜¯ç”¨ `import q = x.y.z` ç»™å¸¸ç”¨çš„å¯¹è±¡èµ·ä¸€ä¸ªçŸ­çš„åå­—ã€‚ä¸è¦ä¸ç”¨æ¥åŠ è½½æ¨¡å—çš„ `import x = require('name')` è¯­æ³•å¼„æ··äº†ï¼Œè¿™é‡Œçš„è¯­æ³•æ˜¯ä¸ºæŒ‡å®šçš„ç¬¦å·åˆ›å»ºä¸€ä¸ªåˆ«åã€‚ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ä¸ºä»»æ„æ ‡è¯†ç¬¦åˆ›å»ºåˆ«åï¼Œä¹ŸåŒ…æ‹¬å¯¼å…¥çš„æ¨¡å—ä¸­çš„å¯¹è±¡ã€‚\n\n```typescript\nnamespace Shapes {\n  export namespace Polygons {\n    export class Triangle {}\n    export class Square {}\n  }\n}\nimport Polygons = Shapes.Polygons;\nlet sq = new Polygons.Square(); // Same as \"new Shapes.Polygons.Square()\"\n```\n\n> æ³¨æ„ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ `require` å…³é”®å­—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å¯¼å…¥ç¬¦å·çš„é™å®šåèµ‹å€¼ã€‚è¿™ä¸ä½¿ç”¨ `var` ç›¸ä¼¼ï¼Œä½†å®ƒè¿˜é€‚ç”¨äºç±»å‹å’Œå¯¼å…¥çš„å…·æœ‰å‘½åç©ºé—´å«ä¹‰çš„ç¬¦å·ã€‚é‡è¦çš„æ˜¯ï¼Œå¯¹äºå€¼æ¥è®²ï¼Œ`import` ä¼šç”Ÿæˆä¸åŸå§‹ç¬¦å·ä¸åŒçš„å¼•ç”¨ï¼Œæ‰€ä»¥æ”¹å˜åˆ«åçš„ `var` å€¼å¹¶ä¸ä¼šå½±å“åŸå§‹å˜é‡çš„å€¼ã€‚\n\n### 16.5 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\n\n> ä¸ºäº†æè¿°ä¸æ˜¯ç”¨ `TypeScript` ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“å¯¼å‡ºçš„ `API`ã€‚ç”±äºå¤§éƒ¨åˆ†ç¨‹åºåº“åªæä¾›å°‘æ•°çš„é¡¶çº§å¯¹è±¡ï¼Œå‘½åç©ºé—´æ˜¯ç”¨æ¥è¡¨ç¤ºå®ƒä»¬çš„ä¸€ä¸ªå¥½åŠæ³•ã€‚æˆ‘ä»¬ç§°å…¶ä¸ºå£°æ˜æ˜¯å› ä¸ºå®ƒä¸æ˜¯å¤–éƒ¨ç¨‹åºçš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ `.d.ts` é‡Œå†™è¿™äº›å£°æ˜ã€‚å¦‚æœä½ ç†Ÿæ‚‰ `C/C+`+ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œ `.h` æ–‡ä»¶ã€‚\n\n> å¤–éƒ¨å‘½åç©ºé—´ (`declare namespace =>`; å£°æ˜å…¨å±€å¯¹è±¡)\n\n> æµè¡Œçš„ç¨‹åºåº“ `D3` åœ¨å…¨å±€å¯¹è±¡ `d3` é‡Œå®šä¹‰å®ƒçš„åŠŸèƒ½ã€‚å› ä¸ºè¿™ä¸ªåº“é€šè¿‡ä¸€ä¸ª`<script>` æ ‡ç­¾åŠ è½½ (ä¸æ˜¯é€šè¿‡æ¨¡å—åŠ è½½å™¨)ï¼Œå®ƒçš„å£°æ˜æ–‡ä»¶ä½¿ç”¨å†…éƒ¨æ¨¡å—æ¥å®šä¹‰å®ƒçš„ç±»å‹ã€‚ä¸ºäº†è®© `TypeScript` ç¼–è¯‘å™¨è¯†åˆ«å®ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤–éƒ¨å‘½åç©ºé—´å£°æ˜ã€‚\n\n- æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™\n- `D3.d.ts`\n\n```typescript\ndeclare namespace D3 {\n  export interface Selectors {\n    select: {\n      (selector: string): Selection;\n      (element: EventTarget): Selection;\n    };\n  }\n\n  export interface Event {\n    x: number;\n    y: number;\n  }\n\n  export interface Base extends Selectors {\n    event: Event;\n  }\n}\ndeclare var d3: D3.Base;\n```\n\n## åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\n\n### 17.1 ä»‹ç»\n\n> è¿™ç¯‡æ–‡ç« å°†æ¦‚æ‹¬ä»‹ç»åœ¨ `TypeScript` é‡Œä½¿ç”¨æ¨¡å—ä¸å‘½åç©ºé—´æ¥ç»„ç»‡ä»£ç çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿä¼šè°ˆåŠå‘½åç©ºé—´å’Œæ¨¡å—çš„é«˜çº§ä½¿ç”¨åœºæ™¯ï¼Œå’Œåœ¨ä½¿ç”¨å®ƒä»¬çš„è¿‡ç¨‹ä¸­å¸¸è§çš„é™·é˜±ã€‚\n\n### 17.2 ä½¿ç”¨å‘½åç©ºé—´\n\n> å‘½åç©ºé—´æ˜¯ä½äºå…¨å±€å‘½åç©ºé—´ä¸‹çš„ä¸€ä¸ªæ™®é€šçš„å¸¦æœ‰åå­—çš„ `JavaScript` å¯¹è±¡ã€‚è¿™ä»¤å‘½åç©ºé—´ååˆ†å®¹æ˜“ä½¿ç”¨ã€‚å®ƒä»¬å¯ä»¥åœ¨å¤šæ–‡ä»¶ä¸­åŒæ—¶ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ `--outFile` ç»“åˆåœ¨ä¸€èµ·ã€‚å‘½åç©ºé—´æ˜¯å¸®ä½ ç»„ç»‡ `Web` åº”ç”¨ä¸é”™çš„æ–¹å¼ï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰ä¾èµ–éƒ½æ”¾åœ¨ `HTML` é¡µé¢çš„ `<script>` æ ‡ç­¾é‡Œã€‚ä½†å°±åƒå…¶å®ƒçš„å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ä¸€æ ·ï¼Œå®ƒå¾ˆéš¾å»è¯†åˆ«ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚\n\n### 17.3 ä½¿ç”¨æ¨¡å—\n\n1. åƒå‘½åç©ºé—´ä¸€æ ·ï¼Œæ¨¡å—å¯ä»¥åŒ…å«ä»£ç å’Œå£°æ˜ã€‚ä¸åŒçš„æ¨¡å—å¯ä»¥å£°æ˜å®ƒçš„ä¾èµ–ã€‚\n2. æ¨¡å—ä¼šæŠŠä¾èµ–æ·»åŠ åˆ°æ¨¡å—åŠ è½½å™¨ä¸Š(åƒæ˜¯ `CommonJS` / `RequireJS`)ã€‚å¯¹äºå°å‹çš„ JS åº”ç”¨æ¥è¯´å¯èƒ½æ²¡å¿…è¦ï¼Œä½†æ˜¯å¯¹äºå¤§å‹åº”ç”¨ï¼Œè¿™ä¸€ç‚¹ç‚¹çš„èŠ±è´¹ä¼šå¸¦æ¥é•¿ä¹…çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ä¸Šçš„ä¾¿åˆ©ã€‚æ¨¡å—ä¹Ÿæä¾›äº†æ›´å¥½çš„ä»£ç é‡ç”¨ï¼Œæ›´å¼ºçš„å°é—­æ€§ä»¥åŠæ›´å¥½çš„ä½¿ç”¨å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚\n3. å¯¹äº `Node.js` åº”ç”¨æ¥è¯´ï¼Œæ¨¡å—æ˜¯é»˜è®¤å¹¶æ¨èçš„ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚\n4. ä» `ECMAScript 2015` å¼€å§‹ï¼Œæ¨¡å—æˆä¸ºäº†è¯­è¨€å†…ç½®çš„éƒ¨åˆ†ï¼Œåº”è¯¥ä¼šè¢«æ‰€æœ‰æ­£å¸¸çš„è§£é‡Šå¼•æ“æ‰€æ”¯æŒã€‚\n\n> å› æ­¤ï¼Œå¯¹äºæ–°é¡¹ç›®æ¥è¯´æ¨èä½¿ç”¨æ¨¡å—ä½œä¸ºç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚\n\n### 17.4 å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\n\n> è¿™éƒ¨åˆ†æˆ‘ä»¬ä¼šæè¿°å¸¸è§çš„å‘½åç©ºé—´å’Œæ¨¡å—çš„ä½¿ç”¨é™·é˜±å’Œå¦‚ä½•å…¶é¿å…å®ƒä»¬ã€‚\n\n#### 17.4.1 å¯¹æ¨¡å—ä½¿ç”¨ `/// <reference>`\n\n> ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯ä½¿ç”¨ `/// <reference>` å¼•ç”¨æ¨¡å—æ–‡ä»¶ï¼Œåº”è¯¥ä½¿ç”¨ `import`ã€‚è¦ç†è§£è¿™ä¹‹é—´çš„å·®åˆ«ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥å¼„æ¸…ç¼–è¯‘å™¨æ˜¯å¦‚ä½•æ ¹æ® `import` è·¯å¾„(ä¾‹å¦‚ï¼š`import x from \"...\"`ï¼›æˆ– `import x = require(\"...\")` é‡Œé¢çš„ `...`ï¼Œç­‰ç­‰)æ¥å®šä½æ¨¡å—çš„ç±»å‹ä¿¡æ¯çš„ã€‚\n\n> ç¼–è¯‘å™¨é¦–å…ˆå°è¯•å»æŸ¥æ‰¾ç›¸åº”è·¯å¾„ä¸‹çš„ `.ts`ï¼Œ`.tsx` å†æˆ–è€… `.d.ts`ã€‚å¦‚æœè¿™äº›æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå®ƒä»¬æ˜¯åœ¨ `.d.ts` æ–‡ä»¶é‡Œå£°æ˜çš„ã€‚\n\n- `myModules.d.ts`\n\n```typescript\n// In a .d.ts file or .ts file that is not a module\ndeclare module \"SomeModule\" {\n  export function fn(): string;\n}\n```\n\n- `myOtherModule.ts`\n\n```typescript\n/// <reference path=\"myModules.d.ts\">\nimport * as m from \"SomeModule\";\n```\n\n> è¿™é‡Œçš„å¼•ç”¨æ ‡ç­¾æŒ‡å®šäº†å¤–æ¥æ¨¡å—çš„ä½ç½®ã€‚è¿™å°±æ˜¯ä¸€äº› `TypeScript` ä¾‹å­ä¸­å¼•ç”¨ `node.d.ts` çš„æ–¹æ³•ã€‚\n\n#### 17.4.2 ä¸å¿…è¦çš„å‘½åç©ºé—´\n\n> å¦‚æœä½ æƒ³æŠŠå‘½åç©ºé—´è½¬æ¢ä¸ºæ¨¡å—ï¼Œå®ƒå¯èƒ½ä¼šåƒä¸‹é¢è¿™ä¸ªæ–‡ä»¶ä¸€æ ·ã€‚\n\n- `shapes.ts`\n\n```typescript\nexport namespace Shapes {\n  export class Triangle {\n    /* ... */\n  }\n  export class Square {\n    /* ... */\n  }\n}\n```\n\n> é¡¶å±‚çš„æ¨¡å— `Shapes` åŒ…è£¹äº† `Triangle` å’Œ `Square`ã€‚å¯¹äºä½¿ç”¨å®ƒçš„äººæ¥è¯´è¿™æ˜¯ä»¤äººè¿·æƒ‘å’Œè®¨åŒçš„ã€‚\n\n- `shapeConsumer.ts`\n\n```typescript\nimport * as shapes from \"./shapes\";\nlet t = new shapes.Shapes.Triangle(); // shapes.Shapes?\n```\n\n> `TypeScript` é‡Œæ¨¡å—çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä¸åŒçš„æ¨¡å—æ°¸è¿œä¹Ÿä¸ä¼šåœ¨ç›¸åŒçš„ä½œç”¨åŸŸå†…ä½¿ç”¨ç›¸åŒçš„åå­—ã€‚å› ä¸ºä½¿ç”¨æ¨¡å—çš„äººä¼šä¸ºå®ƒä»¬å‘½åï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦æŠŠå¯¼å‡ºçš„ç¬¦å·åŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚å†æ¬¡é‡ç”³ï¼Œä¸åº”è¯¥å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚ä½¿ç”¨å‘½åç©ºé—´æ˜¯ä¸ºäº†æä¾›é€»è¾‘åˆ†ç»„å’Œé¿å…å‘½åå†²çªã€‚æ¨¡å—æ–‡ä»¶æœ¬èº«å·²ç»æ˜¯ä¸€ä¸ªé€»è¾‘åˆ†ç»„ï¼Œå¹¶ä¸”å®ƒçš„åå­—æ˜¯ç”±å¯¼å…¥è¿™ä¸ªæ¨¡å—çš„ä»£ç æŒ‡å®šï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ä¸ºå¯¼å‡ºçš„å¯¹è±¡å¢åŠ é¢å¤–çš„æ¨¡å—å±‚ã€‚\n\n- ä¸‹é¢æ˜¯æ”¹è¿›çš„ä¾‹å­ï¼š\n- `shape.ts`\n\n```typescript\nexport class Triangle {\n  /* ... */\n}\nexport class Square {\n  /* ... */\n}\n```\n\n- `shapeConsumer.ts`\n\n```typescript\nimport * as shapes from \"./shapes\";\nlet t = new shapes.Triangle();\n```\n\n#### 17.4.3 æ¨¡å—çš„å–èˆ\n\n> å°±åƒæ¯ä¸ª `JS` æ–‡ä»¶å¯¹åº”ä¸€ä¸ªæ¨¡å—ä¸€æ ·ï¼Œ`TypeScript` é‡Œæ¨¡å—æ–‡ä»¶ä¸ç”Ÿæˆçš„ `JS` æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚è¿™ä¼šäº§ç”Ÿä¸€ç§å½±å“ï¼Œæ ¹æ®ä½ æŒ‡å®šçš„ç›®æ ‡æ¨¡å—ç³»ç»Ÿçš„ä¸åŒï¼Œä½ å¯èƒ½æ— æ³•è¿æ¥å¤šä¸ªæ¨¡å—æºæ–‡ä»¶ã€‚ä¾‹å¦‚å½“ç›®æ ‡æ¨¡å—ç³»ç»Ÿä¸º `commonjs` æˆ– `umd` æ—¶ï¼Œæ— æ³•ä½¿ç”¨ `outFile` é€‰é¡¹ï¼Œä½†æ˜¯ `TypeScript 1.8` ä»¥ä¸Šçš„ç‰ˆæœ¬èƒ½å¤Ÿä½¿ç”¨ `outFile` å½“ç›®æ ‡ä¸º `amd` æˆ– `system`ã€‚\n\n## åå…«ã€æ¨¡å—è§£æ\n\n### 18.1 è¯´æ˜\n\n1. æ¨¡å—è§£ææ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨æŸ¥æ‰¾å¯¼å…¥æ¨¡å—å†…å®¹æ—¶æ‰€éµå¾ªçš„æµç¨‹ã€‚å‡è®¾æœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ `import { a } from \"moduleA\"`; ä¸ºäº†å»æ£€æŸ¥ä»»ä½•å¯¹ `a` çš„ä½¿ç”¨ï¼Œç¼–è¯‘å™¨éœ€è¦å‡†ç¡®çš„çŸ¥é“å®ƒè¡¨ç¤ºä»€ä¹ˆï¼Œå¹¶ä¸”éœ€è¦æ£€æŸ¥å®ƒçš„å®šä¹‰ `moduleA`ã€‚\n2. è¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæœ‰ä¸ªç–‘é—®â€œ `moduleA` çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿâ€ è¿™å¬ä¸Šå»å¾ˆç®€å•ï¼Œä½† moduleA å¯èƒ½åœ¨ä½ å†™çš„æŸä¸ª .ts/.tsx æ–‡ä»¶é‡Œæˆ–è€…åœ¨ä½ çš„ä»£ç æ‰€ä¾èµ–çš„ `.d.ts` é‡Œã€‚\n3. é¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½è¡¨ç¤ºå¯¼å…¥æ¨¡å—çš„æ–‡ä»¶ã€‚ç¼–è¯‘å™¨ä¼šéµå¾ªä»¥ä¸‹äºŒç§ç­–ç•¥ä¹‹ä¸€ï¼š `Classic` æˆ– `Node`ã€‚è¿™äº›ç­–ç•¥ä¼šå‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾ `moduleA`ã€‚\n4. å¦‚æœä¸Šé¢çš„è§£æå¤±è´¥äº†å¹¶ä¸”æ¨¡å—åæ˜¯éç›¸å¯¹çš„ï¼ˆä¸”æ˜¯åœ¨\" `moduleA` \"çš„æƒ…å†µä¸‹ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½ä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°éç›¸å¯¹å¯¼å…¥ã€‚\n\n`5`. æœ€åï¼Œå¦‚æœç¼–è¯‘å™¨è¿˜æ˜¯ä¸èƒ½è§£æè¿™ä¸ªæ¨¡å—ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸ªé”™è¯¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé”™è¯¯å¯èƒ½ä¸º `error TS2307: Cannot find module 'moduleA'.`\n\n### 18.2 ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥\n\n> æ ¹æ®æ¨¡å—å¼•ç”¨æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯éç›¸å¯¹çš„ï¼Œæ¨¡å—å¯¼å…¥ä¼šä»¥ä¸åŒçš„æ–¹å¼è§£æã€‚\n\n1. ç›¸å¯¹å¯¼å…¥æ˜¯ä»¥ `/ï¼Œ./` æˆ– `../` å¼€å¤´çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```typescript\nimport Entry from \"./components/Entry\";\nimport { Default } from \"../constants/http\";\nimport \"/mod\";\n```\n\n2. æ‰€æœ‰å…¶å®ƒå½¢å¼çš„å¯¼å…¥è¢«å½“ä½œéç›¸å¯¹çš„ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š\n\n```typescript\nimport * as $ from \"JQuery\";\nimport { Component } from \"@angular/core\";\n```\n\n> ç›¸å¯¹å¯¼å…¥åœ¨è§£ææ—¶æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶ï¼Œå¹¶ä¸èƒ½è§£æä¸ºä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚ä½ åº”è¯¥ä¸ºä½ è‡ªå·±å†™çš„æ¨¡å—ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œè¿™æ ·èƒ½ç¡®ä¿å®ƒä»¬åœ¨è¿è¡Œæ—¶çš„ç›¸å¯¹ä½ç½®ã€‚\n\n> éç›¸å¯¹æ¨¡å—çš„å¯¼å…¥å¯ä»¥ç›¸å¯¹äº baseUrl æˆ– é€šè¿‡ä¸‹æ–‡ä¼šè®²åˆ°çš„è·¯å¾„æ˜ å°„æ¥è§£æã€‚å®ƒä»¬è¿˜å¯ä»¥è¢«è§£ææˆ å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚\n\n> ä½¿ç”¨éç›¸å¯¹è·¯å¾„æ¥å¯¼å…¥ä½ çš„å¤–éƒ¨ä¾èµ–ã€‚\n\n### 18.3 æ¨¡å—è§£æç­–ç•¥\n\n> å…±æœ‰ä¸¤ç§å¯ç”¨çš„æ¨¡å—è§£æç­–ç•¥ï¼š`Node` å’Œ `Classic`ã€‚ ä½ å¯ä»¥ä½¿ç”¨ `--moduleResolution` æ ‡è®°æ¥æŒ‡å®šä½¿ç”¨å“ªç§æ¨¡å—è§£æç­–ç•¥ã€‚è‹¥æœªæŒ‡å®šï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨äº† -`-module AMD \\| System \\| ES2015` æ—¶çš„é»˜è®¤å€¼ä¸º `Classic`ï¼Œå…¶å®ƒæƒ…å†µæ—¶åˆ™ä¸º `Node`ã€‚\n\n#### 18.3.1 Classic\n\n> è¿™ç§ç­–ç•¥åœ¨ä»¥å‰æ˜¯ `TypeScript` é»˜è®¤çš„è§£æç­–ç•¥ã€‚ ç°åœ¨ï¼Œå®ƒå­˜åœ¨çš„ç†ç”±ä¸»è¦æ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚\n\n> ç›¸å¯¹å¯¼å…¥çš„æ¨¡å—æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶è¿›è¡Œè§£æçš„ã€‚ å› æ­¤ `/root/src/folder/A.ts` æ–‡ä»¶é‡Œçš„ `import { b } from \"./moduleB\"` ä¼šä½¿ç”¨ä¸‹é¢çš„æŸ¥æ‰¾æµç¨‹ï¼š\n\n1. /root/src/folder/moduleB.ts``\n2. /root/src/folder/moduleB.d.ts``\n\n> å¯¹äºéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ï¼Œç¼–è¯‘å™¨åˆ™ä¼šä»åŒ…å«å¯¼å…¥æ–‡ä»¶çš„ç›®å½•å¼€å§‹ä¾æ¬¡å‘ä¸Šçº§ç›®å½•éå†ï¼Œå°è¯•å®šä½åŒ¹é…çš„å£°æ˜æ–‡ä»¶ã€‚\n\n- `æ¯”å¦‚ï¼š`\n\n> æœ‰ä¸€ä¸ªå¯¹ `moduleB` çš„éç›¸å¯¹å¯¼å…¥ `import { b } from \"moduleB\"`ï¼Œå®ƒæ˜¯åœ¨ `/root/src/folder/A.ts` æ–‡ä»¶é‡Œï¼Œä¼šä»¥å¦‚ä¸‹çš„æ–¹å¼æ¥å®šä½\"`moduleB`\"ï¼š\n\n> 1. `/root/src/folder/moduleB.ts`\n> 2. `/root/src/folder/moduleB.d.ts`\n> 3. `/root/src/moduleB.ts`\n> 4. `/root/src/moduleB.d.ts`\n> 5. `/root/moduleB.ts`\n> 6. `/root/moduleB.d.ts`\n> 7. `/moduleB.ts`\n> 8. `/moduleB.d.ts`\n\n#### 18.3.2 Node\n\n> è¿™ä¸ªè§£æç­–ç•¥è¯•å›¾åœ¨è¿è¡Œæ—¶æ¨¡ä»¿ `Node.js` æ¨¡å—è§£ææœºåˆ¶ã€‚å®Œæ•´çš„ `Node.js` è§£æç®—æ³•å¯ä»¥åœ¨ `Node.js module documentation` æ‰¾åˆ°ã€‚\n\n- Node.js å¦‚ä½•è§£ææ¨¡å—\n\n> ä¸ºäº†ç†è§£ `TypeScript` ç¼–è¯‘ä¾ç…§çš„è§£ææ­¥éª¤ï¼Œå…ˆå¼„æ˜ç™½`Node.js`æ¨¡å—æ˜¯éå¸¸é‡è¦çš„ã€‚\n\n> é€šå¸¸ï¼Œåœ¨ `Node.js` é‡Œå¯¼å…¥æ˜¯é€šè¿‡ `require` å‡½æ•°è°ƒç”¨è¿›è¡Œçš„ã€‚ `Node.js` ä¼šæ ¹æ® `require` æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯éç›¸å¯¹è·¯å¾„åšå‡ºä¸åŒçš„è¡Œä¸ºã€‚\n\n> ç›¸å¯¹è·¯å¾„å¾ˆç®€å•ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä¸º `/root/src/moduleA.js`ï¼ŒåŒ…å«äº†ä¸€ä¸ªå¯¼å…¥ `var x = require(\"./moduleB\")`;\n\n- Node.js ä»¥ä¸‹é¢çš„é¡ºåºè§£æè¿™ä¸ªå¯¼å…¥\n\n1. æ£€æŸ¥ `/root/src/moduleB.js` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚\n2. æ£€æŸ¥ `/root/src/moduleB` ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œä¸” `package.json` æ–‡ä»¶æŒ‡å®šäº†ä¸€ä¸ª\"`main`\"æ¨¡å—ã€‚\n\n> åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œå¦‚æœ `Node.js` å‘ç°æ–‡ä»¶ `/root/src/moduleB/package.json` åŒ…å«äº† `{ \"main\": \"lib/mainModule.js\" }`ï¼Œé‚£ä¹ˆ `Node.js` ä¼šå¼•ç”¨ `/root/src/moduleB/lib/mainModule.js`ã€‚\n\n3. æ£€æŸ¥ `/root/src/moduleB` ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª `index.js` æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šè¢«éšå¼åœ°å½“ä½œé‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„\"`main`\"æ¨¡å—ã€‚\n\nä½ å¯ä»¥é˜…è¯» `Node.js` æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š[file modules](https://nodejs.org/api/modules.html#modules_file_modules) å’Œ [folder modules](https://nodejs.org/api/modules.html#modules_folders_as_modules)ã€‚\n\n> ä½†æ˜¯ï¼Œéç›¸å¯¹æ¨¡å—åçš„è§£ææ˜¯ä¸ªå®Œå…¨ä¸åŒçš„è¿‡ç¨‹ã€‚`Node` ä¼šåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶å¤¹ `node\\_modules` é‡ŒæŸ¥æ‰¾ä½ çš„æ¨¡å—ã€‚`node\\_modules` å¯èƒ½ä¸å½“å‰æ–‡ä»¶åœ¨åŒä¸€çº§ç›®å½•ä¸‹ï¼Œæˆ–è€…åœ¨ä¸Šå±‚ç›®å½•é‡Œã€‚`Node` ä¼šå‘ä¸Šçº§ç›®å½•éå†ï¼ŒæŸ¥æ‰¾æ¯ä¸ª `node\\_modules`ç›´åˆ°å®ƒæ‰¾åˆ°è¦åŠ è½½çš„æ¨¡å—ã€‚\n> è¿˜æ˜¯ç”¨ä¸Šé¢ä¾‹å­ï¼Œä½†å‡è®¾ `/root/src/moduleA.js` é‡Œä½¿ç”¨çš„æ˜¯éç›¸å¯¹è·¯å¾„å¯¼å…¥ `var x = require(\"moduleB\")`;\n\n- `Node` åˆ™ä¼šä»¥ä¸‹é¢çš„é¡ºåºå»è§£æ `moduleB`ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªåŒ¹é…ä¸Šã€‚\n\n> 1.`/root/src/node_modules/moduleB.js` 2.`/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"main\"å±æ€§)` 3.`/root/src/node_modules/moduleB/index.js` 4.`/root/node_modules/moduleB.js` 5.`/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"main\"å±æ€§)` 6.`/root/node_modules/moduleB/index.js` 7.`/node_modules/moduleB.js` 8.`/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"main\"å±æ€§)` 9.`/node_modules/moduleB/index.js`\n\n> æ³¨æ„ `Node.js` åœ¨æ­¥éª¤ï¼ˆ`4`ï¼‰å’Œï¼ˆ`7`ï¼‰ä¼šå‘ä¸Šè·³ä¸€çº§ç›®å½•ã€‚\n> ä½ å¯ä»¥é˜…è¯» `Node.js` æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š[loading modules from node_modules](https://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders)ã€‚\n\n- TypeScript å¦‚ä½•è§£ææ¨¡å—\n\n> `TypeScript` æ˜¯æ¨¡ä»¿ `Node.js` è¿è¡Œæ—¶çš„è§£æç­–ç•¥æ¥åœ¨ç¼–è¯‘é˜¶æ®µå®šä½æ¨¡å—å®šä¹‰æ–‡ä»¶ã€‚å› æ­¤ï¼Œ`TypeScript` åœ¨ `Node` è§£æé€»è¾‘åŸºç¡€ä¸Šå¢åŠ äº† TypeScript æºæ–‡ä»¶çš„æ‰©å±•åï¼ˆ `.ts`ï¼Œ`.tsx` å’Œ `.d.ts`ï¼‰ã€‚åŒæ—¶ï¼Œ`TypeScript` åœ¨ `package.json` é‡Œä½¿ç”¨å­—æ®µ\"`types`\"æ¥è¡¨ç¤ºç±»ä¼¼\"`main`\"çš„æ„ä¹‰ `-` ç¼–è¯‘å™¨ä¼šä½¿ç”¨å®ƒæ¥æ‰¾åˆ°è¦ä½¿ç”¨çš„\"`main`\"å®šä¹‰æ–‡ä»¶ã€‚\n\n> æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ `import { b } from \"./moduleB\"` åœ¨ `/root/src/moduleA.ts` é‡Œï¼Œä¼šä»¥ä¸‹é¢çš„æµç¨‹æ¥å®šä½ `\"./moduleB\"` ï¼š\n>\n> 1. `/root/src/moduleB.ts`\n> 2. `/root/src/moduleB.tsx`\n> 3. `/root/src/moduleB.d.ts`\n> 4. `/root/src/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 5. `/root/src/moduleB/index.ts`\n> 6. `/root/src/moduleB/index.tsx`\n> 7. `/root/src/moduleB/index.d.ts`\n\n> å›æƒ³ä¸€ä¸‹ `Node.js` å…ˆæŸ¥æ‰¾ `moduleB.js` æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„ `package.json`ï¼Œå†ä¹‹åæ˜¯ `index.js`ã€‚\n\n> ç±»ä¼¼åœ°ï¼Œéç›¸å¯¹çš„å¯¼å…¥ä¼šéµå¾ª `Node.js` çš„è§£æé€»è¾‘ï¼Œé¦–å…ˆæŸ¥æ‰¾æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„æ–‡ä»¶å¤¹ã€‚å› æ­¤ `/root/src/moduleA.ts` ä»¶é‡Œçš„ `import { b } from \"moduleB\"` ä¼šä»¥ä¸‹é¢çš„æŸ¥æ‰¾é¡ºåºè§£æï¼š\n>\n> 1. `/root/src/node_modules/moduleB.ts`\n> 2. `/root/src/node_modules/moduleB.tsx`\n> 3. `/root/src/node_modules/moduleB.d.ts`\n> 4. `/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 5. `/root/src/node_modules/moduleB/index.ts`\n> 6. `/root/src/node_modules/moduleB/index.tsx`\n> 7. `/root/src/node_modules/moduleB/index.d.ts`\n> 8. `/root/node_modules/moduleB.ts`\n> 9. `/root/node_modules/moduleB.tsx`\n> 10. `/root/node_modules/moduleB.d.ts`\n> 11. `/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 12. `/root/node_modules/moduleB/index.ts`\n> 13. `/root/node_modules/moduleB/index.tsx`\n> 14. `/root/node_modules/moduleB/index.d.ts`\n> 15. `/node_modules/moduleB.ts`\n> 16. `/node_modules/moduleB.tsx`\n> 17. `/node_modules/moduleB.d.ts`\n> 18. `/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†\"types\"å±æ€§)`\n> 19. `/node_modules/moduleB/index.ts`\n> 20. `/node_modules/moduleB/index.tsx`\n> 21. `/node_modules/moduleB/index.d.ts`\n\n> ä¸è¦è¢«è¿™é‡Œæ­¥éª¤çš„æ•°é‡å“åˆ° `-` `TypeScript` åªæ˜¯åœ¨æ­¥éª¤ï¼ˆ`8`ï¼‰å’Œï¼ˆ`15`ï¼‰å‘ä¸Šè·³äº†ä¸¤æ¬¡ç›®å½•ã€‚ è¿™å¹¶ä¸æ¯” `Node.js` é‡Œçš„æµç¨‹å¤æ‚ã€‚\n\n### 18.4 é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\n\n> 1. æœ‰æ—¶å·¥ç¨‹æºç ç»“æ„ä¸è¾“å‡ºç»“æ„ä¸åŒã€‚ é€šå¸¸æ˜¯è¦ç»è¿‡ä¸€ç³»ç»Ÿçš„æ„å»ºæ­¥éª¤æœ€åç”Ÿæˆè¾“å‡ºã€‚ å®ƒä»¬åŒ…æ‹¬å°† `.ts` ç¼–è¯‘æˆ `.js`ï¼Œå°†ä¸åŒä½ç½®çš„ä¾èµ–æ‹·è´è‡³ä¸€ä¸ªè¾“å‡ºä½ç½®ã€‚ æœ€ç»ˆç»“æœå°±æ˜¯è¿è¡Œæ—¶çš„æ¨¡å—åä¸åŒ…å«å®ƒä»¬å£°æ˜çš„æºæ–‡ä»¶é‡Œçš„æ¨¡å—åä¸åŒã€‚ æˆ–è€…æœ€ç»ˆè¾“å‡ºæ–‡ä»¶é‡Œçš„æ¨¡å—è·¯å¾„ä¸ç¼–è¯‘æ—¶çš„æºæ–‡ä»¶è·¯å¾„ä¸åŒäº†ã€‚\n> 2. `TypeScript` ç¼–è¯‘å™¨æœ‰ä¸€äº›é¢å¤–çš„æ ‡è®°ç”¨æ¥é€šçŸ¥ç¼–è¯‘å™¨åœ¨æºç ç¼–è¯‘æˆæœ€ç»ˆè¾“å‡ºçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†å“ªä¸ªè½¬æ¢ã€‚\n> 3. æœ‰ä¸€ç‚¹è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œè¿™äº›è½¬æ¢æ“ä½œï¼›å®ƒåªæ˜¯åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æŒ‡å¯¼æ¨¡å—çš„å¯¼å…¥ã€‚\n\n- `Base URL`\n\n> åœ¨åˆ©ç”¨ `AMD` æ¨¡å—åŠ è½½å™¨çš„åº”ç”¨é‡Œä½¿ç”¨ `baseUrl` æ˜¯å¸¸è§åšæ³•ï¼Œå®ƒè¦æ±‚åœ¨è¿è¡Œæ—¶æ¨¡å—éƒ½è¢«æ”¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚è¿™äº›æ¨¡å—çš„æºç å¯ä»¥åœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œä½†æ˜¯æ„å»ºè„šæœ¬ä¼šå°†å®ƒä»¬é›†ä¸­åˆ°ä¸€èµ·ã€‚\n\n> è®¾ç½® `baseUrl` æ¥å‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾æ¨¡å—ã€‚ æ‰€æœ‰ `éç›¸å¯¹æ¨¡å—` å¯¼å…¥éƒ½ä¼šè¢«å½“åšç›¸å¯¹äº `baseUrl`ã€‚\n\n- `baseUrl` çš„å€¼ç”±ä»¥ä¸‹ä¸¤è€…ä¹‹ä¸€å†³å®šï¼š\n\n> 1. å‘½ä»¤è¡Œä¸­ `baseUrl` çš„å€¼ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºå½“å‰è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰\n> 2. `tsconfig.json`é‡Œçš„ `baseUrl` å±æ€§ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºâ€˜`tsconfig.json`â€™è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰\n\n> æ³¨æ„ç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ä¸ä¼šè¢«è®¾ç½®çš„ `baseUrl` æ‰€å½±å“ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒä»¬çš„æ–‡ä»¶ã€‚\n\n> é˜…è¯»æ›´å¤šå…³äº `baseUrl` çš„ä¿¡æ¯ [RequireJS](https://requirejs.org/docs/api.html#config-baseUrl) å’Œ [`SystemJS`](https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#baseurl)ã€‚\n\n### 18.5 è·¯å¾„æ˜ å°„\n\n> æœ‰æ—¶æ¨¡å—ä¸æ˜¯ç›´æ¥æ”¾åœ¨ `baseUrl` ä¸‹é¢ã€‚ æ¯”å¦‚ï¼Œå……åˆ† \"`jquery`\"æ¨¡å—åœ°å¯¼å…¥ï¼Œåœ¨è¿è¡Œæ—¶å¯èƒ½è¢«è§£é‡Šä¸º\"`node\\_modules/jquery/dist/jquery.slim.min.js`\"ã€‚ åŠ è½½å™¨ä½¿ç”¨æ˜ å°„é…ç½®æ¥å°†æ¨¡å—åæ˜ å°„åˆ°è¿è¡Œæ—¶çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹ [RequireJs documentation](https://requirejs.org/docs/api.html#config-paths) å’Œ [SystemJS documentation](https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#paths)ã€‚\n\n> `TypeScript` ç¼–è¯‘å™¨é€šè¿‡ä½¿ç”¨ `tsconfig.json` æ–‡ä»¶é‡Œçš„ \"`paths`\" æ¥æ”¯æŒè¿™æ ·çš„å£°æ˜æ˜ å°„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•æŒ‡å®š `jquery` çš„\"`paths`\"çš„ä¾‹å­ã€‚\n\n```json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\", // This must be specified if \"paths\" is.\n    \"paths\": {\n      \"jquery\": [\"node_modules/jquery/dist/jquery\"] // æ­¤å¤„æ˜ å°„æ˜¯ç›¸å¯¹äº\"baseUrl\"\n    }\n  }\n}\n```\n\n> è¯·æ³¨æ„\"`paths`\"æ˜¯ç›¸å¯¹äº\"`baseUrl`\"è¿›è¡Œè§£æã€‚ å¦‚æœ \"`baseUrl`\" è¢«è®¾ç½®æˆäº†é™¤\"`.`\"å¤–çš„å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ `tsconfig.json` æ‰€åœ¨çš„ç›®å½•ï¼Œé‚£ä¹ˆæ˜ å°„å¿…é¡»è¦åšç›¸åº”çš„æ”¹å˜ã€‚å¦‚æœä½ åœ¨ä¸Šä¾‹ä¸­è®¾ç½®äº† `\"baseUrl\": \"./src\"`ï¼Œé‚£ä¹ˆ `jquery` åº”è¯¥æ˜ å°„åˆ° `\"../node\\_modules/jquery/dist/jquery\"`ã€‚\n\n> é€šè¿‡\"`paths`\"æˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå¤æ‚çš„æ˜ å°„ï¼ŒåŒ…æ‹¬æŒ‡å®šå¤šä¸ªå›é€€ä½ç½®ã€‚ å‡è®¾åœ¨ä¸€ä¸ªå·¥ç¨‹é…ç½®é‡Œï¼Œæœ‰ä¸€äº›æ¨¡å—ä½äºä¸€å¤„ï¼Œè€Œå…¶å®ƒçš„åˆ™åœ¨å¦ä¸ªçš„ä½ç½®ã€‚ æ„å»ºè¿‡ç¨‹ä¼šå°†å®ƒä»¬é›†ä¸­è‡³ä¸€å¤„ã€‚ å·¥ç¨‹ç»“æ„å¯èƒ½å¦‚ä¸‹ï¼š\n\n```typescript\nprojectRoot\nâ”œâ”€â”€ folder1\nâ”‚   â”œâ”€â”€ file1.ts (imports 'folder1/file2' and 'folder2/file3')\nâ”‚   â””â”€â”€ file2.ts\nâ”œâ”€â”€ generated\nâ”‚   â”œâ”€â”€ folder1\nâ”‚   â””â”€â”€ folder2\nâ”‚       â””â”€â”€ file3.ts\nâ””â”€â”€ tsconfig.json\n```\n\n- ç›¸åº”çš„ `tsconfig.json` æ–‡ä»¶å¦‚ä¸‹ï¼š\n\n```json\n{\n  \"compilerOptions\": {\n    \"baseUrl\": \".\",\n    \"paths\": {\n      \"*\": [\"*\", \"generated/*\"]\n    }\n  }\n}\n```\n\n> å®ƒå‘Šè¯‰ç¼–è¯‘å™¨æ‰€æœ‰åŒ¹é… `\"\\*\"`ï¼ˆæ‰€æœ‰çš„å€¼ï¼‰æ¨¡å¼çš„æ¨¡å—å¯¼å…¥ä¼šåœ¨ä»¥ä¸‹ä¸¤ä¸ªä½ç½®æŸ¥æ‰¾ï¼š\n>\n> 1. `\"\\*\"`ï¼š è¡¨ç¤ºåå­—ä¸å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æ˜ å°„ä¸º Â `=>` `/`\n> 2. \"`generated/`\"è¡¨ç¤ºæ¨¡å—åæ·»åŠ äº†â€œ`generated`â€å‰ç¼€ï¼Œæ‰€ä»¥æ˜ å°„ä¸º `<moduleName> => <baseUrl>/generated/<moduleName>`\n\n- `æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œç¼–è¯‘å™¨å°†ä¼šå¦‚ä¸‹å°è¯•è§£æè¿™ä¸¤ä¸ªå¯¼å…¥ï¼š`\n\n> (i). å¯¼å…¥`'folder1/file2'`\n>\n> 1. åŒ¹é… `'\\*'` æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚\n> 2. å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š`'\\*' -> folder1/file2`ã€‚\n> 3. æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ `baseUrl` åˆå¹¶ `-> projectRoot/folder1/file2.ts`ã€‚\n> 4. æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚\n>\n> (ii). å¯¼å…¥`'folder2/file3'`\n>\n> 1. åŒ¹é… `'\\*'` æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚\n> 2. å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š`'\\*' -> folder2/file3`ã€‚\n> 3. æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ `baseUrl` åˆå¹¶ `-> projectRoot/folder2/file3.ts`ã€‚\n> 4. æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè·³åˆ°ç¬¬äºŒä¸ªæ›¿æ¢ã€‚\n> 5. ç¬¬äºŒä¸ªæ›¿æ¢ï¼š`'generated/' -> generated/folder2/file3`ã€‚\n> 6. æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ `baseUrl` åˆå¹¶ `-&gt; projectRoot/generated/folder2/file3.ts`ã€‚\n> 7. æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚\n\n- åˆ©ç”¨ `rootDirs` æŒ‡å®šè™šæ‹Ÿç›®å½•\n\n> æœ‰æ—¶å¤šä¸ªç›®å½•ä¸‹çš„å·¥ç¨‹æºæ–‡ä»¶åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œåˆå¹¶æ”¾åœ¨æŸä¸ªè¾“å‡ºç›®å½•ä¸‹ã€‚ è¿™å¯ä»¥çœ‹åšä¸€äº›æºç›®å½•åˆ›å»ºäº†ä¸€ä¸ªâ€œè™šæ‹Ÿâ€ç›®å½•ã€‚ åˆ©ç”¨ `rootDirs`ï¼Œå¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆè¿™ä¸ªè™šæ‹Ÿç›®å½•çš„ `roots`ï¼› å› æ­¤ç¼–è¯‘å™¨å¯ä»¥åœ¨â€œè™šæ‹Ÿâ€ç›®å½•ä¸‹è§£æç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå°±å¥½åƒå®ƒä»¬è¢«åˆå¹¶åœ¨äº†ä¸€èµ·ä¸€æ ·ã€‚\n\n> æ¯”å¦‚ï¼Œæœ‰ä¸‹é¢çš„å·¥ç¨‹ç»“æ„ï¼š\n\n```typescript\nsrc\n â””â”€â”€ views\n     â””â”€â”€ view1.ts (imports './template1')\n     â””â”€â”€ view2.ts\n\n generated\n â””â”€â”€ templates\n         â””â”€â”€ views\n             â””â”€â”€ template1.ts (imports './view2')\n```\n\n> `src/views` é‡Œçš„æ–‡ä»¶æ˜¯ç”¨äºæ§åˆ¶ UI çš„ç”¨æˆ·ä»£ç ã€‚ `generated/templates` æ˜¯ `UI` æ¨¡ç‰ˆï¼Œåœ¨æ„å»ºæ—¶é€šè¿‡æ¨¡ç‰ˆç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆã€‚æ„å»ºä¸­çš„ä¸€æ­¥ä¼šå°† `/src/views` å’Œ `/generated/templates/views` çš„è¾“å‡ºæ‹·è´åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ åœ¨è¿è¡Œæ—¶ï¼Œè§†å›¾å¯ä»¥å‡è®¾å®ƒçš„æ¨¡ç‰ˆä¸å®ƒåŒåœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ `\"./template\"`ã€‚\n\n> å¯ä»¥ä½¿ç”¨\"`rootDirs`\"æ¥å‘Šè¯‰ç¼–è¯‘å™¨ã€‚\"`rootDirs`\"æŒ‡å®šäº†ä¸€ä¸ª `roots` åˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œçš„å†…å®¹ä¼šåœ¨è¿è¡Œæ—¶è¢«åˆå¹¶ã€‚\n\n> å› æ­¤ï¼Œé’ˆå¯¹è¿™ä¸ªä¾‹å­ï¼Œ `tsconfig.json` å¦‚ä¸‹ï¼š\n\n```json\n{\n  \"compilerOptions\": {\n    \"rootDirs\": [\"src/views\", \"generated/templates/views\"]\n  }\n}\n```\n\n> æ¯å½“ç¼–è¯‘å™¨åœ¨æŸä¸€ `rootDirs` çš„å­ç›®å½•ä¸‹å‘ç°äº†ç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå®ƒå°±ä¼šå°è¯•ä»æ¯ä¸€ä¸ª `rootDirs` ä¸­å¯¼å…¥ã€‚\n\n> `rootDirs` çš„çµæ´»æ€§ä¸ä»…ä»…å±€é™äºå…¶æŒ‡å®šäº†è¦åœ¨é€»è¾‘ä¸Šåˆå¹¶çš„ç‰©ç†ç›®å½•åˆ—è¡¨ã€‚å®ƒæä¾›çš„æ•°ç»„å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„ä»»ä½•åå­—çš„ç›®å½•ï¼Œä¸è®ºå®ƒä»¬æ˜¯å¦å­˜åœ¨ã€‚è¿™å…è®¸ç¼–è¯‘å™¨ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å¤„ç†å¤æ‚æ†ç»‘( `bundles` )å’Œè¿è¡Œæ—¶çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ¡ä»¶å¼•å…¥å’Œå·¥ç¨‹ç‰¹å®šçš„åŠ è½½å™¨æ’ä»¶ã€‚\n\n> è®¾æƒ³è¿™æ ·ä¸€ä¸ªå›½é™…åŒ–çš„åœºæ™¯ï¼Œæ„å»ºå·¥å…·è‡ªåŠ¨æ’å…¥ç‰¹å®šçš„è·¯å¾„è®°å·æ¥ç”Ÿæˆé’ˆå¯¹ä¸åŒåŒºåŸŸçš„æ†ç»‘ï¼Œæ¯”å¦‚å°† `\\#{locale}` åšä¸ºç›¸å¯¹æ¨¡å—è·¯å¾„ `./\\#{locale}/messages` çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªå‡å®šçš„è®¾ç½®ä¸‹ï¼Œå·¥å…·ä¼šæšä¸¾æ”¯æŒçš„åŒºåŸŸï¼Œå°†æŠ½åƒçš„è·¯å¾„æ˜ å°„æˆ `./zh/messages`ï¼Œ`./de/messages` ç­‰ã€‚\n\n> å‡è®¾æ¯ä¸ªæ¨¡å—éƒ½ä¼šå¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚æ¯”å¦‚ `./zh/messages` å¯èƒ½åŒ…å«ï¼š\n\n```typescript\nexport default [\"æ‚¨å¥½å—\", \"å¾ˆé«˜å…´è®¤è¯†ä½ \"];\n```\n\n> åˆ©ç”¨ `rootDirs` æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨äº†è§£è¿™ä¸ªæ˜ å°„å…³ç³»ï¼Œä»è€Œä¹Ÿå…è®¸ç¼–è¯‘å™¨èƒ½å¤Ÿå®‰å…¨åœ°è§£æ `./\\#{locale}/messages`ï¼Œå°±ç®—è¿™ä¸ªç›®å½•æ°¸è¿œéƒ½ä¸å­˜åœ¨ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ä¸‹é¢çš„ `tsconfig.json`ï¼š\n\n```json\n{\n  \"compilerOptions\": {\n    \"rootDirs\": [\"src/zh\", \"src/de\", \"src/#{locale}\"]\n  }\n}\n```\n\n> ç¼–è¯‘å™¨ç°åœ¨å¯ä»¥å°† `import messages from './#{locale}/messages'` è§£æä¸º `import messages from './zh/messages'` ç”¨åšå·¥å…·æ”¯æŒçš„ç›®çš„ï¼Œå¹¶å…è®¸åœ¨å¼€å‘æ—¶ä¸å¿…äº†è§£åŒºåŸŸä¿¡æ¯ã€‚\n\n### 18.6 è·Ÿè¸ªæ¨¡å—è§£æ\n\n> å¦‚ä¹‹å‰è®¨è®ºï¼Œç¼–è¯‘å™¨åœ¨è§£ææ¨¡å—æ—¶å¯èƒ½è®¿é—®å½“å‰æ–‡ä»¶å¤¹å¤–çš„æ–‡ä»¶ã€‚ è¿™ä¼šå¯¼è‡´å¾ˆéš¾è¯Šæ–­æ¨¡å—ä¸ºä»€ä¹ˆæ²¡æœ‰è¢«è§£æï¼Œæˆ–è§£æåˆ°äº†é”™è¯¯çš„ä½ç½®ã€‚ é€šè¿‡ `--traceResolution` å¯ç”¨ç¼–è¯‘å™¨çš„æ¨¡å—è§£æè·Ÿè¸ªï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬åœ¨æ¨¡å—è§£æè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚\n\n> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨äº† `typescript` æ¨¡å—çš„ç®€å•åº”ç”¨ã€‚`app.ts` é‡Œæœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¼å…¥ `import * as ts from \"typescript\"`ã€‚\n\n```typescript\nâ”‚   tsconfig.json\nâ”œâ”€â”€â”€node_modules\nâ”‚   â””â”€â”€â”€typescript\nâ”‚       â””â”€â”€â”€lib\nâ”‚               typescript.d.ts\nâ””â”€â”€â”€src\n        app.ts\n```\n\n> ä½¿ç”¨ `--traceResolution` è°ƒç”¨ç¼–è¯‘å™¨ã€‚\n\n```typescript\ntsc --traceResolution\n```\n\n> è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š\n\n```typescript\n======== Resolving module 'typescript' from 'src/app.ts'. ========\nModule resolution kind is not specified, using 'NodeJs'.\nLoading module 'typescript' from 'node_modules' folder.\nFile 'src/node_modules/typescript.ts' does not exist.\nFile 'src/node_modules/typescript.tsx' does not exist.\nFile 'src/node_modules/typescript.d.ts' does not exist.\nFile 'src/node_modules/typescript/package.json' does not exist.\nFile 'node_modules/typescript.ts' does not exist.\nFile 'node_modules/typescript.tsx' does not exist.\nFile 'node_modules/typescript.d.ts' does not exist.\nFound 'package.json' at 'node_modules/typescript/package.json'.\n'package.json' has 'types' field './lib/typescript.d.ts' that references 'node_modules/typescript/lib/typescript.d.ts'.\nFile 'node_modules/typescript/lib/typescript.d.ts' exist - use it as a module resolution result.\n======== Module name 'typescript' was successfully resolved to 'node_modules/typescript/lib/typescript.d.ts'. ========\n```\n\n> éœ€è¦ç•™æ„çš„åœ°æ–¹ï¼š\n\n> 1. å¯¼å…¥çš„åå­—åŠä½ç½® `======== Resolving module 'typescript' from 'src/app.ts'. ========`\n> 2. ç¼–è¯‘å™¨ä½¿ç”¨çš„ç­–ç•¥ `Module resolution kind is not specified, using 'NodeJs'.`\n> 3. ä» `npm` åŠ è½½ `types` `'package.json' has 'types' field './lib/typescript.d.ts' that references 'node\\_modules/typescript/lib/typescript.d.ts'.`\n> 4. æœ€ç»ˆç»“æœ `======== Module name 'typescript' was successfully resolved to 'node\\_modules/typescript/lib/typescript.d.ts'. ========`\n\n- ä½¿ç”¨ `--noResolve`\n\n> æ­£å¸¸æ¥è®²ç¼–è¯‘å™¨ä¼šåœ¨å¼€å§‹ç¼–è¯‘ä¹‹å‰è§£ææ¨¡å—å¯¼å…¥ã€‚ æ¯å½“å®ƒæˆåŠŸåœ°è§£æäº†å¯¹ä¸€ä¸ªæ–‡ä»¶ `import`ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ä¼šåŠ åˆ°ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œï¼Œä»¥ä¾›ç¼–è¯‘å™¨ç¨åå¤„ç†ã€‚`--noResolve` ç¼–è¯‘é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦æ·»åŠ ä»»ä½•ä¸æ˜¯åœ¨å‘½ä»¤è¡Œä¸Šä¼ å…¥çš„æ–‡ä»¶åˆ°ç¼–è¯‘åˆ—è¡¨ã€‚ ç¼–è¯‘å™¨ä»ç„¶ä¼šå°è¯•è§£ææ¨¡å—ï¼Œä½†æ˜¯åªè¦æ²¡æœ‰æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šè¢«åŒ…å«åœ¨å†…ã€‚\n\n> `æ¯”å¦‚`:\n\n- `app.ts`\n\n```typescript\nimport * as A from \"moduleA\"; // OK, moduleA passed on the command-line\nimport * as B from \"moduleB\"; // Error TS2307: Cannot find module 'moduleB'.\n```\n\n```typescript\ntsc app.ts moduleA.ts --noResolve\n```\n\n> ä½¿ç”¨ `--noResolve` ç¼–è¯‘ `app.ts`ï¼š\n\n> 1. å¯èƒ½æ­£ç¡®æ‰¾åˆ° `moduleA`ï¼Œå› ä¸ºå®ƒåœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šäº†ã€‚\n> 2. æ‰¾ä¸åˆ° `moduleB`ï¼Œå› ä¸ºæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸Šä¼ é€’ã€‚\n\n### 18.7 å¸¸è§é—®é¢˜\n\n- ä¸ºä»€ä¹ˆåœ¨ `exclude` åˆ—è¡¨é‡Œçš„æ¨¡å—è¿˜ä¼šè¢«ç¼–è¯‘å™¨ä½¿ç”¨\n\n> `tsconfig.json` å°†æ–‡ä»¶å¤¹è½¬å˜ä¸€ä¸ªâ€œå·¥ç¨‹â€ å¦‚æœä¸æŒ‡å®šä»»ä½• â€œ`exclude`â€ æˆ– â€œ`files`â€ï¼Œæ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬ `tsconfig.json` å’Œ æ‰€æœ‰çš„å­ç›®å½• éƒ½ä¼šåœ¨ç¼–è¯‘åˆ—è¡¨é‡Œã€‚ å¦‚æœä½ æƒ³åˆ©ç”¨ â€œ`exclude`â€æ’é™¤æŸäº›æ–‡ä»¶ï¼Œç”šè‡³ä½ æƒ³æŒ‡å®šæ‰€æœ‰è¦ç¼–è¯‘çš„æ–‡ä»¶åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨â€œ`files`â€ã€‚\n\n> æœ‰äº›æ˜¯è¢« `tsconfig.json` è‡ªåŠ¨åŠ å…¥çš„ã€‚ å®ƒä¸ä¼šæ¶‰åŠåˆ°ä¸Šé¢è®¨è®ºçš„æ¨¡å—è§£æã€‚ å¦‚æœç¼–è¯‘å™¨è¯†åˆ«å‡ºä¸€ä¸ªæ–‡ä»¶æ˜¯æ¨¡å—å¯¼å…¥ç›®æ ‡ï¼Œå®ƒå°±ä¼šåŠ åˆ°ç¼–è¯‘åˆ—è¡¨é‡Œï¼Œä¸ç®¡å®ƒæ˜¯å¦è¢«æ’é™¤äº†ã€‚\n\n> å› æ­¤ï¼Œè¦ä»ç¼–è¯‘åˆ—è¡¨ä¸­æ’é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ éœ€è¦åœ¨æ’é™¤å®ƒçš„åŒæ—¶ï¼Œè¿˜è¦æ’é™¤æ‰€æœ‰å¯¹å®ƒè¿›è¡Œ `import` æˆ–ä½¿ç”¨äº† `/// <reference path=\"...\" />` æŒ‡ä»¤çš„æ–‡ä»¶ã€‚\n\n## åä¹ã€å£°æ˜åˆå¹¶\n\n### 19.1 ä»‹ç»\n\n> `TypeScript` ä¸­æœ‰äº›ç‹¬ç‰¹çš„æ¦‚å¿µå¯ä»¥åœ¨ç±»å‹å±‚é¢ä¸Šæè¿° `JavaScript` å¯¹è±¡çš„æ¨¡å‹ã€‚è¿™å…¶ä¸­å°¤å…¶ç‹¬ç‰¹çš„ä¸€ä¸ªä¾‹å­ \"å£°æ˜åˆå¹¶\" çš„æ¦‚å¿µã€‚\n\n> ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œå°†æœ‰åŠ©äºæ“ä½œç°æœ‰çš„ `JavaScript` ä»£ç ã€‚åŒæ—¶ï¼Œä¹Ÿä¼šæœ‰åŠ©äºç†è§£æ›´å¤šé«˜çº§æŠ½è±¡çš„æ¦‚å¿µã€‚\n\n> å¯¹æœ¬æ–‡ä»¶æ¥è®²ï¼Œ\"`å£°æ˜åˆå¹¶`\" æ˜¯æŒ‡ç¼–è¯‘å™¨å°†é’ˆå¯¹åŒä¸€ä¸ªåå­—çš„ä¸¤ä¸ªç‹¬ç«‹å£°æ˜åˆå¹¶ä¸ºå•ä¸€å£°æ˜ã€‚åˆå¹¶åçš„å£°æ˜åŒæ—¶æ‹¥æœ‰åŸå…ˆä¸¤ä¸ªå£°æ˜çš„ç‰¹æ€§ã€‚ä»»ä½•æ•°é‡çš„å£°æ˜éƒ½å¯è¢«åˆå¹¶ï¼›ä¸å±€é™äºä¸¤ä¸ªå£°æ˜ã€‚\n\n### 19.2 åŸºç¡€æ¦‚å¿µ\n\n> `TypeScript` ä¸­çš„å£°æ˜ä¼šåˆ›å»ºä»¥ä¸‹ä¸‰ç§å®ä½“ä¹‹ä¸€ï¼š`å‘½åç©ºé—´`ï¼Œ`ç±»å‹` æˆ– `å€¼`ã€‚åˆ›å»ºå‘½åç©ºé—´çš„å£°æ˜ä¼šæ–°å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒåŒ…å«äº†ç”¨(.)ç¬¦å·æ¥è®¿é—®æ—¶ä½¿ç”¨çš„åå­—ã€‚åˆ›å»ºç±»å‹çš„å£°æ˜æ˜¯ï¼šç”¨å£°æ˜çš„æ¨¡å‹åˆ›å»ºä¸€ä¸ªç±»å‹å¹¶ç»‘å®šåˆ°ç»™å®šçš„åå­—ä¸Šã€‚\n> æœ€åï¼Œåˆ›å»ºå€¼çš„å£°æ˜ä¼šåˆ›å»ºåœ¨ `JavaScript` è¾“å‡ºä¸­çœ‹åˆ°çš„å€¼ã€‚\n\n| Declaration Type | Namespace | Type | Value |\n| :--------------- | :-------- | :--- | :---- |\n| `Namespace`      | X         |      | X     |\n| `Class`          |           | X    | X     |\n| `Enum`           |           | X    | X     |\n| `Interface`      |           | X    |       |\n| `Type Alias`     |           | X    |       |\n| `Function`       |           |      | X     |\n| `Variable`       |           |      | X     |\n\n> ç†è§£æ¯ä¸ªå£°æ˜åˆ›å»ºäº†ä»€ä¹ˆï¼Œæœ‰åŠ©äºç†è§£å½“å£°æ˜åˆå¹¶æ—¶ï¼Œæœ‰å“ªäº›ä¸œè¥¿è¢«åˆå¹¶äº†ã€‚\n\n### 19.3 åˆå¹¶æ¥å£\n\n> æœ€ç®€å•æœ€å¸¸è§çš„å£°æ˜åˆå¹¶ç±»å‹æ˜¯æ¥å£åˆå¹¶ã€‚ä»æ ¹æœ¬ä¸Šè¯´ï¼Œåˆå¹¶çš„æœºåˆ¶æ˜¯æŠŠåŒæ–¹çš„æˆå‘˜æ”¾åˆ°ä¸€ä¸ªåŒåçš„æ¥å£é‡Œã€‚\n\n```typescript\ninterface Box {\n  height: number;\n  width: number;\n}\ninterface Box {\n  scale: number;\n}\nlet box: Box = { height: 5, width: 6, scale: 10 };\n```\n\n> æ¥å£çš„éå‡½æ•°æˆå‘˜åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚å¦‚æœå®ƒä»¬ä¸æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå®ƒä»¬å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ã€‚å¦‚æœä¸¤ä¸ªæ¥å£ä¸­åŒæ—¶å£°æ˜äº†åŒåçš„éå‡½æ•°æˆå‘˜ä¸”å®ƒä»¬çš„ç±»å‹ä¸åŒï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚\n\n> å¯¹äºå‡½æ•°æˆå‘˜ï¼Œæ¯ä¸ªåŒåå‡½æ•°å£°æ˜éƒ½ä¼šè¢«å½“æˆè¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªé‡è½½ã€‚åŒæ—¶éœ€è¦æ³¨æ„ï¼Œå½“æ¥å£ `A` ä¸åæ¥çš„æ¥å£ `A` åˆå¹¶æ—¶ï¼Œåé¢çš„æ¥å£å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚\n\n```typescript\n// å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\ninterface Cloner {\n  clone(animal: Animal): Animal;\n}\ninterface Cloner {\n  clone(animal: Sheep): Sheep;\n}\ninterface Cloner {\n  clone(animal: Dog): Dog;\n  clone(animal: Cat): Cat;\n}\n// è¿™ä¸‰ä¸ªæ¥å£åˆå¹¶æˆä¸€ä¸ªå£°æ˜ï¼š\ninterface Cloner {\n  clone(animal: Dog): Dog;\n  clone(animal: Cat): Cat;\n  clone(animal: Sheep): Sheep;\n  clone(animal: Animal): Animal;\n}\n```\n\n> æ³¨æ„æ¯ç»„æ¥å£é‡Œçš„å£°æ˜é¡ºåºä¿æŒä¸å˜ï¼Œä½†å„ç»„æ¥å£ä¹‹é—´çš„é¡ºåºæ˜¯åæ¥çš„æ¥å£é‡è½½å‡ºç°åœ¨é å‰çš„ä½ç½®ã€‚\n\n> è¿™ä¸ªè§„åˆ™æœ‰ä¸€ä¸ªä¾‹å¤–æ˜¯å½“å‡ºç°ç‰¹æ®Šçš„å‡½æ•°ç­¾åæ—¶ã€‚å¦‚æœç­¾åé‡Œæœ‰ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯å•ä¸€çš„å­—ç¬¦ä¸²å­—é¢é‡(æ¯”å¦‚ï¼Œä¸æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„è”åˆç±»å‹)ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«æå‡åˆ°é‡è½½åˆ—è¡¨çš„æœ€é¡¶ç«¯ã€‚\n\n```typescript\n// æ¯”å¦‚ï¼Œä¸‹é¢çš„æ¥å£ä¼šåˆå¹¶åˆ°ä¸€èµ·\ninterface Document {\n  createElement(tagName: any): ELement;\n}\ninterface Document {\n  createElement(tagName: \"div\"): HTMLDivElement;\n  createElement(tagName: \"span\"): HTMLSpanElement;\n}\ninterface Document {\n  createElement(tagName: string): HTMLElement;\n  createElement(tagName: \"canvas\"): HTMLCanvasElement;\n}\n// åˆå¹¶åçš„ Document å°†ä¼šåƒä¸‹é¢è¿™æ ·:\ninterface Document {\n  createElement(tagName: \"canvas\"): HTMLCanvasElement;\n  createElement(tagName: \"div\"): HTMLDivElement;\n  createElement(tagName: \"span\"): HTMLSpanElement;\n  createElement(tagName: string): HTMLElement;\n  createElement(tagName: any): Element;\n}\n```\n\n### 19.4 åˆå¹¶å‘½åç©ºé—´\n\n1. ä¸æ¥å£ç›¸ä¼¼ï¼ŒåŒåçš„å‘½åç©ºé—´ä¹Ÿä¼šåˆå¹¶å…¶æˆå‘˜ã€‚å‘½åç©ºé—´ä¼šåˆ›å»ºå‡ºå‘½åç©ºé—´å’Œå€¼ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸¤è€…éƒ½æ˜¯æ€ä¹ˆåˆå¹¶çš„ã€‚\n2. å¯¹äºå‘½åç©ºé—´çš„åˆå¹¶ï¼Œæ¨¡å—å¯¼å‡ºçš„åŒåæ¥å£è¿›è¡Œåˆå¹¶ï¼Œæ„æˆå•ä¸€å‘½åç©ºé—´å†…å«åˆå¹¶åçš„æ¥å£ã€‚\n3. å¯¹äºå‘½åç©ºé—´é‡Œå€¼çš„åˆå¹¶ï¼Œå¦‚æœå½“å‰å·²ç»å­˜åœ¨ç»™å®šåå­—çš„å‘½åç©ºé—´ï¼Œé‚£ä¹ˆåæ¥çš„å‘½åç©ºé—´çš„å¯¼å‡ºæˆå‘˜ä¼šè¢«åŠ åˆ°å·²ç»å­˜åœ¨çš„é‚£ä¸ªæ¨¡å—é‡Œã€‚\n\n```typescript\n// Animals å£°æ˜åˆå¹¶ç¤ºä¾‹ï¼š\nnamespace Animals {\n  export class Zebra {}\n}\nnamespace Animals {\n  export interface Legged {\n    numberOfLegs: number;\n  }\n  export class Dog {}\n}\n// ç­‰åŒäºï¼š\nnamespace Animals {\n  export interface Legged {\n    numberOfLegs: number;\n  }\n  export class Zebra {}\n  export class Dog {}\n}\n```\n\n> é™¤äº†è¿™äº›åˆå¹¶å¤–ï¼Œä½ è¿˜éœ€è¦äº†è§£éå¯¼å‡ºæˆå‘˜æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚éå¯¼å‡ºæˆå‘˜ä»…åœ¨å…¶åŸæœ‰çš„(åˆå¹¶å‰çš„)å‘½åç©ºé—´å†…å¯è§ã€‚è¿™å°±æ˜¯è¯´åˆå¹¶ä¹‹åï¼Œä»å…¶å®ƒå‘½åç©ºé—´åˆå¹¶è¿›æ¥çš„æˆå‘˜æ— æ³•è®¿é—®éå¯¼å‡ºæˆå‘˜ã€‚\n\n- ä¸‹é¢æä¾›äº†æ¸…æ™°çš„è¯´æ˜ï¼š\n\n```typescript\nnamespace Animal {\n  let haveMuscles = true;\n  export function animalsHaveMuscles() {\n    return haveMuscles;\n  }\n}\nnamespace Animal {\n  export function doAnimalsHaveMuscles() {\n    return haveMuscles; // // Error, because haveMuscles is not accessible here\n  }\n}\n```\n\n> å› ä¸º `haveMuscles` å¹¶æ²¡æœ‰å¯¼å‡ºï¼Œåªæœ‰ `animalsHaveMuscles` å‡½æ•°å…±äº«äº†åŸå§‹æœªåˆå¹¶çš„å‘½åç©ºé—´å¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡ã€‚\n> `doAnimalsHaveMuscles` å‡½æ•°è™½æ˜¯åˆå¹¶å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯è®¿é—®ä¸äº†æœªå¯¼å‡ºçš„æˆå‘˜ã€‚\n\n### 19.5 å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\n\n> å‘½åç©ºé—´å¯ä»¥ä¸å…¶å®ƒç±»å‹çš„å£°æ˜åˆå¹¶ã€‚åªè¦å‘½åç©ºé—´çš„å®šä¹‰ç¬¦åˆå°†è¦åˆå¹¶ç±»å‹çš„å®šä¹‰ã€‚åˆå¹¶ç»“æœåŒ…å«ä¸¤è€…çš„å£°æ˜ç±»å‹ã€‚\n> `TypeScript` ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å»å®ç°ä¸€äº› `JavaScript` é‡Œçš„è®¾è®¡æ¨¡å¼ã€‚\n\n#### 19.5.1 åˆå¹¶å‘½åç©ºé—´å’Œç±»\n\n> è¿™è®©æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºå†…éƒ¨ç±»\n\n```typescript\nclass Album {\n  label: Album.AlbumLabel;\n}\n\nnamespace Album {\n  export class AlbumLabel {}\n}\n```\n\n> `åˆå¹¶è§„åˆ™` ä¸ä¸Šé¢ `åˆå¹¶å‘½åç©ºé—´` å°èŠ‚é‡Œè®²çš„è§„åˆ™ä¸€è‡´ï¼Œæˆ‘ä»¬å¿…é¡»å¯¼å‡º `AlbumLabel` ç±»ï¼Œå¥½è®©åˆå¹¶çš„ç±»èƒ½è®¿é—®ã€‚\n\n> `åˆå¹¶ç»“æœ`æ˜¯ä¸€ä¸ªç±»å¹¶å¸¦æœ‰ä¸€ä¸ªå†…éƒ¨ç±»ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ä¸ºç±»å¢åŠ ä¸€äº›é™æ€å±æ€§ã€‚\n\n> é™¤äº†å†…éƒ¨ç±»çš„æ¨¡å¼ï¼Œä½ åœ¨ `JavaScript` é‡Œï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ç¨åæ‰©å±•å®ƒå¢åŠ ä¸€äº›å±æ€§ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚`TypeScript` ä½¿ç”¨å£°æ˜åˆå¹¶æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„å¹¶ä¿è¯ç±»å‹å®‰å…¨ã€‚\n\n```typescript\nfunction buildLabel(name: string): string {\n  return buildLabel.prefix + name + buildLabel.suffix;\n}\nnamespace buildLabel {\n  export let suffix = \"\";\n  export let prefix = \"Hello, \";\n}\nconsole.log(buildLabel(\"Sam Smith\"));\n\n// ç›¸ä¼¼çš„ï¼Œå‘½åç©ºé—´å¯ä»¥ç”¨æ¥æ‰©å±•æšä¸¾ç±»å‹\nenum Color {\n  red = 1,\n  green = 2,\n  blue = 4\n}\nnamespace Color {\n  export function mixColor(colorName: string) {\n    if (colorName === \"yellow\") {\n      return Color.red + Color.green;\n    } else if (colorName === \"white\") {\n      return Color.red + Color.green + Color.blue;\n    } else if (colorName === \"magenta\") {\n      return Color.red + Color.blue;\n    } else if (colorName === \"cyan\") {\n      return Color.green + Color.blue;\n    }\n  }\n}\n```\n\n#### 19.5.2 éæ³•çš„åˆå¹¶\n\n> `TypeScript` å¹¶éå…è®¸æ‰€æœ‰çš„åˆå¹¶ã€‚ç›®å‰ï¼Œç±»ä¸èƒ½ä¸å…¶å®ƒç±»æˆ–å˜é‡åˆå¹¶ã€‚æƒ³è¦äº†è§£å¦‚ä½•æ¨¡ä»¿ç±»çš„åˆå¹¶ï¼Œè¯·å‚ç…§ [TypeScript æ··å…¥](https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/Mixins%E6%B7%B7%E5%85%A5/README.md)ã€‚\n\n### 19.6 æ¨¡å—æ‰©å±•\n\n> è™½ç„¶ `JavaScript` ä¸æ”¯æŒåˆå¹¶ï¼Œä½†ä½ å¯ä»¥ä¸ºå¯¼å…¥çš„å¯¹è±¡æ‰“è¡¥ä¸ä»¥æ›´æ–°å®ƒä»¬ã€‚\n\n- è®©æˆ‘ä»¬è€ƒå¯Ÿä¸€ä¸‹è¿™ä¸ªç©å…·æ€§çš„ç¤ºä¾‹ï¼š\n\n```typescript\n// observable.js\nexport class Observable<T> {\n  // ... implementation left as an exercise for the reader...\n}\n\n// map.js\nimport { Observable } from \"./observable\";\nObservable.prototype.map = function () {\n  // ... another exercise for the reader\n};\n```\n\n> å®ƒä¹Ÿå¯ä»¥å¾ˆå¥½åœ°å·¥ä½œåœ¨ `TypeScript` ä¸­ï¼Œä½†ç¼–è¯‘å™¨å¯¹ `Observable.prototype.map` ä¸€æ— æ‰€çŸ¥ã€‚ä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ¨¡å—æ¥å°†å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ã€‚\n\n```typescript\n// observable.ts stays the same\n// map.ts\nimport { Observable } from \"./observable\";\ndeclare module \"./observable\" {\n  interface Observable<T> {\n    map<U>(f: (x: T) => U): Observable<U>;\n  }\n}\nObservable.prototype.map = function (f) {\n  // ... another exercise for the reader\n};\n\n// consumer.ts\nimport { Observable } from \"./observable\";\nimport \"./map\";\nlet o: Observable<number>;\no.map(x => x.toFixed());\n```\n\n> æ¨¡å—åçš„è§£æå’Œç”¨ `import / export` è§£ææ¨¡å—æ ‡è¯†ç¬¦çš„æ–¹å¼æ˜¯ä¸€è‡´çš„ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ [Modules](https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/%E6%A8%A1%E5%9D%97/README.md)ã€‚å½“è¿™äº›å£°æ˜åœ¨æ‰©å±•ä¸­åˆå¹¶æ—¶ï¼Œå°±å¥½åƒåœ¨åŸå§‹ä½ç½®è¢«å£°æ˜äº†ä¸€æ ·ã€‚ ä½†æ˜¯ï¼Œä½ ä¸èƒ½åœ¨æ‰©å±•ä¸­å£°æ˜æ–°çš„é¡¶çº§å£°æ˜(ä»…å¯ä»¥æ‰©å±•æ¨¡å—ä¸­å·²ç»å­˜åœ¨çš„å£°æ˜)ã€‚\n\n### 19.7 å…¨å±€æ‰©å±•\n\n> ä½ ä¹Ÿå¯ä»¥åœ¨æ¨¡å—å†…éƒ¨æ·»åŠ å£°æ˜åˆ°å…¨å±€ä½œç”¨åŸŸä¸­\n\n> `observable.ts`\n\n```typescript\nexport class Observable<T> {\n  // ... still no implementation ...\n}\ndeclare global {\n  interface Array<T> {\n    toObservable(): Observable<T>;\n  }\n}\nArray.prototype.toObservable = function () {\n  // ...\n};\n```\n\n> å…¨å±€æ‰©å±•å’Œä¸æ¨¡å—æ‰©å±•çš„è¡Œä¸ºå’Œé™åˆ¶æ˜¯ç›¸åŒçš„ã€‚\n\n## äºŒåã€JSX\n\n### 20.1 ä»‹ç»\n\n> `JSX` æ˜¯ä¸€ç§åµŒå…¥å¼çš„ç±»ä¼¼ `XML` çš„è¯­æ³•ã€‚å®ƒå¯ä»¥è¢«è½¬æ¢æˆåˆæ³•çš„ `JavaScript`ï¼Œå°½ç®¡è½¬æ¢çš„è¯­ä¹‰æ˜¯æ ¹æ®ä¸åŒçš„å®ç°è€Œå®šçš„ã€‚\n> `JSX` å›  `React` æ¡†æ¶è€Œæµè¡Œï¼Œä½†ä¹Ÿå­˜åœ¨å…¶å®ƒçš„å®ç°ã€‚`TypeScript` æ”¯æŒå†…åµŒï¼Œç±»å‹æ£€æŸ¥ä»¥åŠå°† `JSX` ç›´æ¥ç¼–è¯‘ä¸º JavaScriptã€‚\n\n### 20.2 åŸºæœ¬ç”¨æ³•\n\n- æƒ³è¦ä½¿ç”¨ `JSX` å¿…é¡»åšä¸¤ä»¶äº‹ï¼š\n\n> 1. ç»™æ–‡ä»¶ä¸€ä¸ª `.tsx` æ‰©å±•å\n> 2. å¯ç”¨ `jsx` é€‰é¡¹\n\n- `TypeScript` å…·æœ‰ä¸‰ç§ `JSX` æ¨¡å¼ï¼š`preserve`, `react` å’Œ `react-native`ã€‚è¿™äº›æ¨¡å¼åªåœ¨ä»£ç ç”Ÿæˆé˜¶æ®µèµ·ä½œç”¨ - ç±»å‹æ£€æŸ¥å¹¶ä¸å—å½±å“ã€‚\n\n> 1. åœ¨ `preserve` æ¨¡å¼ä¸‹ç”Ÿæˆä»£ç ä¸­ä¼šä¿ç•™ `JSX` ä»¥ä¾›åç»­çš„è½¬æ¢æ“ä½œä½¿ç”¨( `æ¯”å¦‚ï¼šBabel` )ã€‚å¦å¤–ï¼Œè¾“å‡ºæ–‡ä»¶ä¼šå¸¦æœ‰ `.jsx` æ‰©å±•åã€‚\n> 2. `react` æ¨¡å¼ä¼šç”Ÿæˆ `React.createElement`ï¼Œåœ¨ä½¿ç”¨å‰ä¸éœ€è¦å†è¿›è¡Œè½¬æ¢æ“ä½œäº†ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åä¸º `.js`ã€‚\n> 3. `react-native` ç›¸å½“äº `preserve`ï¼Œå®ƒä¹Ÿä¿ç•™äº†æ‰€æœ‰çš„ `JSX`ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åæ˜¯ `.js`ã€‚\n\n| æ¨¡å¼         | è¾“å…¥      | è¾“å‡º                         | è¾“å‡ºæ–‡ä»¶æ‰©å±•å |\n| :----------- | :-------- | :--------------------------- | :------------- |\n| preserve     | `<div />` | `<div />`                    | `.js`          |\n| react        | `<div />` | `React.createElement(\"div\")` | `.js`          |\n| react-native | `<div />` | `<div />`                    | `.js`          |\n\n> ä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ `--jsx` æ ‡è®°æˆ– `tsconfig.json` é‡Œçš„é€‰é¡¹æ¥æŒ‡å®šæ¨¡å¼ã€‚\n> æ³¨æ„ï¼š`React` æ ‡è¯†ç¬¦æ˜¯å†™æ­»çš„ç¡¬ç¼–ç ï¼Œæ‰€ä»¥ä½ å¿…é¡»ä¿è¯ `React`ï¼ˆå¤§å†™çš„`R`ï¼‰æ˜¯å¯ç”¨çš„ã€‚\n\n### 20.3 as æ“ä½œç¬¦\n\n> å›æƒ³ä¸€ä¸‹æ€ä¹ˆå†™ç±»å‹æ–­è¨€\n\n```typescript\nvar foo = <foo>bar;\n```\n\n> è¿™é‡Œæ–­è¨€ `bar` å˜é‡æ˜¯ `foo` ç±»å‹çš„ã€‚ å› ä¸º `TypeScript` ä¹Ÿä½¿ç”¨å°–æ‹¬å·æ¥è¡¨ç¤ºç±»å‹æ–­è¨€ï¼Œåœ¨ç»“åˆ `JSX` çš„è¯­æ³•åå°†å¸¦æ¥è§£æä¸Šçš„å›°éš¾ã€‚å› æ­¤ï¼Œ`TypeScript` åœ¨ `.tsx` æ–‡ä»¶é‡Œç¦ç”¨äº†ä½¿ç”¨å°–æ‹¬å·çš„ç±»å‹æ–­è¨€ã€‚\n\n> ç”±äºä¸èƒ½å¤Ÿåœ¨ `.tsx` æ–‡ä»¶é‡Œä½¿ç”¨ä¸Šè¿°è¯­æ³•ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹æ–­è¨€æ“ä½œç¬¦ï¼š`as`ã€‚\n\n- ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨ `as` æ“ä½œç¬¦æ”¹å†™ï¼š\n\n```typescript\nvar foo = bar as foo;\n```\n\n> `as` æ“ä½œç¬¦åœ¨ `.ts` å’Œ `.tsx` é‡Œéƒ½å¯ç”¨ï¼Œå¹¶ä¸”ä¸å°–æ‹¬å·ç±»å‹æ–­è¨€è¡Œä¸ºæ˜¯ç­‰ä»·çš„ã€‚\n\n### 20.4 ç±»å‹æ£€æŸ¥\n\n> ä¸ºäº†ç†è§£ `JSX` çš„ç±»å‹æ£€æŸ¥ï¼Œä½ å¿…é¡»é¦–å…ˆç†è§£ `å›ºæœ‰å…ƒç´ ` ä¸ `åŸºäºå€¼çš„å…ƒç´ ` ä¹‹é—´çš„åŒºåˆ«ã€‚å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª `JSX` è¡¨è¾¾å¼ `<expr />`ï¼Œ`expr` å¯èƒ½å¼•ç”¨ç¯å¢ƒè‡ªå¸¦çš„æŸäº›ä¸œè¥¿(æ¯”å¦‚ï¼Œåœ¨ `DOM` ç¯å¢ƒé‡Œçš„ `div` æˆ– `span`)æˆ–è€…æ˜¯ä½ è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚è¿™æ˜¯éå¸¸é‡è¦çš„ã€‚åŸå› æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š\n\n1. å¯¹äº `React`ï¼Œå›ºæœ‰å…ƒç´ ä¼šç”Ÿæˆå­—ç¬¦ä¸² (`React.createElement(\"div\")` )ï¼Œç„¶åç”±ä½ è‡ªå®šä¹‰çš„ç»„ä»¶å´ä¸ä¼šç”Ÿæˆ( `React.createElement(MyComponent)`)ã€‚\n2. ä¼ å…¥ `JSX` å…ƒç´ é‡Œçš„å±æ€§ç±»å‹çš„æŸ¥æ‰¾æ–¹å¼ä¸åŒã€‚å›ºæœ‰å…ƒç´ æ€»ä»¥ä¸€ä¸ªå°å†™å­—æ¯å¼€å¤´ï¼ŒåŸºäºå€¼çš„å…ƒç´ æ€»æ˜¯ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´ã€‚\n\n#### 20.4.1 å›ºæœ‰å…ƒç´ \n\n> å›ºæœ‰å…ƒç´ ä½¿ç”¨ç‰¹æ®Šçš„æ¥å£ `JSX.IntrinsicElements` æ¥æŸ¥æ‰¾ã€‚é»˜è®¤åœ°ï¼Œå¦‚æœè¿™ä¸ªæ¥å£æ²¡æœ‰æŒ‡å®šï¼Œä¼šå…¨éƒ¨é€šè¿‡ï¼Œä¸å¯¹å›ºæœ‰å…ƒç´ è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ç„¶è€Œï¼Œå¦‚æœè¿™ä¸ªæ¥å£å­˜åœ¨ï¼Œé‚£ä¹ˆå›ºæœ‰å…ƒç´ çš„åå­—éœ€è¦åœ¨ `JSX.IntrinsicElements` æ¥å£çš„å±æ€§é‡ŒæŸ¥æ‰¾ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        foo: any;\n    }\n}\n<foo />; // æ­£ç¡®\n<bar />; // é”™è¯¯\n```\n\n> åœ¨ä¸Šä¾‹ä¸­ï¼Œ``æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯`ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæ²¡åœ¨ JSX.IntrinsicElements` é‡ŒæŒ‡å®šã€‚\n\n> æ³¨æ„ï¼šä½ ä¹Ÿå¯ä»¥åœ¨ `JSX.IntrinsicElements` ä¸ŠæŒ‡å®šä¸€ä¸ªç”¨æ¥æ•è·æ‰€æœ‰å­—ç¬¦ä¸²ç´¢å¼•ï¼š\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        [elemName: string]: any;\n    }\n}\n```\n\n#### 20.4.2 åŸºäºå€¼çš„å…ƒç´ \n\n> åŸºäºå€¼çš„å…ƒç´ ä¼šç®€å•çš„åœ¨å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸé‡ŒæŒ‰æ ‡è¯†ç¬¦æŸ¥æ‰¾ã€‚\n\n```jsx\nimport MyComponent from \"./myComponent\";\n<MyComponent /> // æ­£ç¡®\n<SomeOtherComponent /> // é”™è¯¯\n```\n\n> æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰åŸºäºå€¼çš„å…ƒç´ ï¼š\n>\n> 1. æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ (`SFC`)\n> 2. ç±»ç»„ä»¶\n\n> ç”±äºè¿™ä¸¤ç§åŸºäºå€¼çš„å…ƒç´ åœ¨ `JSX` è¡¨è¾¾å¼é‡Œæ— æ³•åŒºåˆ†ï¼Œå› æ­¤ `TypeScript` é¦–å…ˆä¼šå°è¯•å°†è¡¨è¾¾å¼ä½œä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶è¿›è¡Œè§£æã€‚å¦‚æœè§£ææˆåŠŸï¼Œé‚£ä¹ˆ `TypeScript` å°±å®Œæˆäº†è¡¨è¾¾å¼åˆ°å…¶å£°æ˜çš„è§£ææ“ä½œã€‚å¦‚æœæŒ‰ç…§æ— çŠ¶æ€å‡½æ•°ç»„ä»¶è§£æå¤±è´¥ï¼Œé‚£ä¹ˆ `TypeScript` ä¼šç»§ç»­å°è¯•ä»¥ç±»ç»„ä»¶çš„å½¢å¼è¿›è¡Œè§£æã€‚å¦‚æœä¾æ—§å¤±è´¥ï¼Œé‚£ä¹ˆå°†è¾“å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n\n##### (1) æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\n\n> æ­£å¦‚å…¶åï¼Œç»„ä»¶è¢«å®šä¹‰æˆ `JavaScript` å‡½æ•°ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `props` å¯¹è±¡ã€‚`TypeScript` ä¼šå¼ºåˆ¶å®ƒçš„è¿”å›å€¼å¯ä»¥èµ‹å€¼ç»™ `JSX.Element`ã€‚\n\n```jsx\ninterface FooProp {\n    name: string;\n    X: number;\n    Y: number;\n}\ndeclare function AnotherComponent(prop: { name: string });\nfunction ComponentFoo(prop: FooProp) {\n    return <AnotherComponent name={prop.name} />\n}\nconst Button = (prop: { value: string }, context: { color: string }) => <button>;\n```\n\n> ç”±äºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶æ˜¯ç®€å•çš„ `JavaScript` å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å‡½æ•°é‡è½½ã€‚\n\n```jsx\ninterface ClickableProps {\n    children: JSX.Element[] | JSX.Element;\n}\ninterface HomeProps extends ClickableProps {\n    home: JSX.Element;\n}\ninterface SlideProps extends ClickableProps {\n    side: JSX.Element | string;\n}\nfunction MainButton(prop: HomeProps): JSX.Element;\nfunction MainButton(prop: SlideProps): JSX.Element {\n    // ...\n}\n```\n\n##### (2) ç±»ç»„ä»¶\n\n> 1. æˆ‘ä»¬å¯ä»¥å®šä¹‰ç±»ç»„ä»¶çš„ç±»å‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é¦–å…ˆæœ€å¥½å¼„æ‡‚ä¸¤ä¸ªæ–°çš„æœ¯è¯­ï¼š`å…ƒç´ ç±»çš„ç±»å‹` å’Œ `å…ƒç´ å®ä¾‹çš„ç±»å‹`ã€‚\n> 2. ç°åœ¨æœ‰ `<Expr />`ï¼Œå…ƒç´ ç±»çš„ç±»å‹ä¸º `Expr` çš„ç±»å‹ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå¦‚æœ `MyComponent` æ˜¯ `ES6` çš„ç±»ï¼Œé‚£ä¹ˆç±»ç±»å‹å°±æ˜¯ç±»çš„æ„é€ å‡½æ•°å’Œé™æ€éƒ¨åˆ†ã€‚å¦‚æœ `MyComponent` æ˜¯ä¸ªå·¥å‚å‡½æ•°ï¼Œç±»ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°ã€‚\n> 3. ä¸€æ—¦å»ºç«‹èµ·äº†ç±»ç±»å‹ï¼Œå®ä¾‹ç±»å‹ç”±æ„é€ å™¨æˆ–è°ƒç”¨ç­¾å(å¦‚æœå­˜åœ¨çš„è¯)çš„è¿”å›å€¼çš„è”åˆæ„æˆã€‚å†æ¬¡è¯´æ˜ï¼Œåœ¨ `ES6` ç±»çš„æƒ…å†µä¸‹ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªç±»çš„å®ä¾‹çš„ç±»å‹ï¼Œå¹¶ä¸”å¦‚æœæ˜¯å·¥å‚å‡½æ•°ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°è¿”å›å€¼ç±»å‹ã€‚\n\n```jsx\nclass MyComponent {\n  render() {}\n}\n// ä½¿ç”¨æ„é€ ç­¾å\nvar myComponent = new MyComponent();\n// å…ƒç´ ç±»çš„ç±»å‹ => MyComponent;\n// å…ƒç´ å®ä¾‹çš„ç±»å‹ => { render: () => void }\n```\n\n```jsx\nfunction MyFactoryFunction() {\n  return {\n    render: () => {}\n  };\n}\n// ä½¿ç”¨è°ƒç”¨ç­¾å\nvar myComponent = MyFactoryFunction();\n// å…ƒç´ ç±»çš„ç±»å‹ => FactoryFunction\n// å…ƒç´ å®ä¾‹çš„ç±»å‹ => { render: () => void }\n```\n\n> å…ƒç´ çš„å®ä¾‹ç±»å‹å¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå¿…é¡»èµ‹å€¼ç»™ `JSX.ElementClass` æˆ– `æŠ›å‡ºä¸€ä¸ªé”™è¯¯`ã€‚é»˜è®¤çš„ `JSX.ElementClass` ä¸º `{}`ï¼Œä½†æ˜¯å®ƒå¯ä»¥è¢«æ‰©å±•ç”¨æ¥é™åˆ¶ `JSX` çš„ç±»å‹ä»¥ç¬¦åˆç›¸åº”çš„æ¥å£ã€‚\n\n```jsx\ndeclare namespace JSX {\n    interface ElementClass {\n        render: any\n    }\n}\n\nclass MyComponent {\n    render() {}\n}\nfunction MyFactoryFunction() {\n    return {\n        render: () => {}\n    }\n}\n<MyComponent />; // æ­£ç¡®\n<MyFactoryFunction />; // æ­£ç¡®\n\nclass NotAValidComponent {}\nfunction NotAValidFactoryFunction() {\n    return {}\n}\n<NotAValidComponent />; // é”™è¯¯\n<NotAValidFactoryFunction />; // é”™è¯¯\n```\n\n### 20.5 å±æ€§ç±»å‹æ£€æŸ¥\n\n1. å±æ€§ç±»å‹æ£€æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯ ç¡®å®šå…ƒç´ ç±»å‹ã€‚è¿™åœ¨ `å›ºæœ‰å…ƒç´ ` å’Œ `åŸºäºå€¼çš„å…ƒç´ ` ä¹‹é—´ç¨æœ‰ä¸åŒã€‚\n2. å¯¹äºå›ºæœ‰å…ƒç´ ï¼Œè¿™æ˜¯ `JSX.IntrinsicElements` å±æ€§çš„ç±»å‹ã€‚\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        foo: {\n            bar?: boolean;\n        }\n    }\n}\n// `foo` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `{bar?: boolean}`\n<foo bar />;\n```\n\n3. å¯¹äºåŸºäºå€¼çš„å…ƒç´ ï¼Œå°±ç¨å¾®å¤æ‚äº›ã€‚å®ƒå–å†³äºå…ˆå‰ç¡®å®šçš„åœ¨å…ƒç´ å®ä¾‹ç±»å‹ä¸Šçš„æŸä¸ªå±æ€§çš„ç±»å‹ã€‚è‡³äºè¯¥ä½¿ç”¨å“ªä¸ªå±æ€§æ¥ç¡®å®šç±»å‹å–å†³äº `JSX.ElementAttributesProperty`ã€‚å®ƒåº”è¯¥ä½¿ç”¨å•ä¸€çš„å±æ€§æ¥å®šä¹‰ã€‚è¿™ä¸ªå±æ€§åä¹‹åä¼šè¢«ä½¿ç”¨ã€‚`TypeScript 2.8`ï¼Œå¦‚æœæœªæŒ‡å®š `JSX.ElementAttributesProperty`ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ `ç±»å…ƒç´ æ„é€ å‡½æ•°` æˆ– `SFC` è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ã€‚\n\n```jsx\ndeclare namespace JSX {\n  interface ElementAttributesProperty {\n      props; // æŒ‡å®šç”¨æ¥ä½¿ç”¨çš„å±æ€§å\n  }\n}\nclass MyComponent {\n  // åœ¨å…ƒç´ å®ä¾‹ä¸ŠæŒ‡å®šç±»å‹\n  props: {\n      foo?: string;\n  }\n}\n// `MyComponent` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `{foo?: string}`\n<MyComponent foo=\"bar\" />;\n```\n\n4. å…ƒç´ å±æ€§ç±»å‹ç”¨äº `JSX` é‡Œè¿›è¡Œå±æ€§çš„ç±»å‹æ£€æŸ¥ã€‚æ”¯æŒå¯é€‰å±æ€§å’Œå¿…é¡»å±æ€§\n\n```jsx\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        foo: {\n            requiredProp: string;\n            optionalProp?: number;\n        }\n    }\n}\n<foo requiredProp=\"bar\" />; // æ­£ç¡®\n<foo requiredProp=\"bar\" optionalProp={0} />; // æ­£ç¡®\n<foo />; // é”™è¯¯ï¼Œç¼ºå°‘requiredProp\n<foo requiredProp={0} />; // é”™è¯¯ï¼ŒrequiredProp åº”è¯¥æ˜¯å­—ç¬¦ä¸²\n<foo requiredProp=\"bar\" unknownProp />; // é”™è¯¯ï¼ŒunknownProp å±æ€§ä¸å­˜åœ¨\n<foo requiredProp=\"bar\" some-unknown-prop />; // æ­£ç¡®ï¼Œ`some-unknown-prop` ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦\n```\n\n> æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªå±æ€§åä¸æ˜¯ä¸ªåˆæ³•çš„ `JS` æ ‡è¯†ç¬¦(åƒ `data-\\*` å±æ€§)ï¼Œå¹¶ä¸”å®ƒæ²¡å‡ºç°åœ¨å…ƒç´ å±æ€§ç±»å‹é‡Œæ—¶ä¸ä¼šå½“ä½œä¸€ä¸ªé”™è¯¯ã€‚\n\n> å¦å¤–ï¼Œ`JSX` è¿˜ä¼šä½¿ç”¨ `JSX.IntrinsicAttributes` æ¥å£æ¥æŒ‡å®šé¢å¤–çš„å±æ€§ï¼Œè¿™äº›é¢å¤–çš„å±æ€§é€šå¸¸ä¸ä¼šè¢«ç»„ä»¶çš„ `props` æˆ– `arguments` ä½¿ç”¨ - æ¯”å¦‚ `React` é‡Œçš„ `key`ã€‚è¿˜æœ‰ï¼Œ`JSX.IntrinsicClassAttributes<T>` æ³›å‹ç±»å‹ä¹Ÿå¯ä»¥ç”¨æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™é‡Œçš„æ³›å‹å‚æ•°è¡¨ç¤ºç±»å®ä¾‹ç±»å‹ã€‚åœ¨ `React` é‡Œï¼Œå®ƒç”¨æ¥å…è®¸ `Ref<T>` ç±»å‹ä¸Šçš„ `ref` å±æ€§ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™äº›æ¥å£ä¸Šçš„æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯é€‰çš„ï¼Œé™¤éä½ æƒ³è¦ç”¨æˆ·åœ¨æ¯ä¸ª `JSX` æ ‡ç­¾ä¸Šéƒ½æä¾›ä¸€äº›å±æ€§ã€‚\n\n> å»¶å±•æ“ä½œç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨\n\n```jsx\nvar props = { requiredProp: \"bar\" }; // æ­£ç¡®\nvar badProps = {};\n<foo {...badProps} />; // é”™è¯¯\n```\n\n### 20.6 å­å­™ç±»å‹æ£€æŸ¥\n\n> ä» `TypeScript 2.3` å¼€å§‹ï¼Œæˆ‘ä»¬å¼•å…¥äº† `children` ç±»å‹æ£€æŸ¥ã€‚`children` æ˜¯å…ƒç´ å±æ€§(`attribute`)ç±»å‹çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§(`property`)ï¼Œå­ `JSXExpression` å°†ä¼šè¢«æ’å…¥åˆ°å±æ€§é‡Œã€‚ä¸ä½¿ç”¨ `JSX.ElementAttributesProperty` æ¥å†³å®š `props` åç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `JSX.ElementChildrenAttribute` æ¥å†³å®š `children` åã€‚`JSX.ElementChildrenAttribute` åº”è¯¥è¢«å£°æ˜åœ¨å•ä¸€çš„å±æ€§(`property`)é‡Œã€‚\n\n```typescript\ndeclare namespace JSX {\n  interface ElementChildrenAttribute {\n    children: {}; // specify children name to use\n  }\n}\n```\n\n> å¦‚ä¸ç‰¹æ®ŠæŒ‡å®šå­å­™çš„ç±»å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ `React typings` é‡Œçš„é»˜è®¤ç±»å‹\n\n```jsx\n<div>\n  <h1>Hello</h1>\n</div>;\n\n<div>\n  <h1>Hello</h1>\n  World\n</div>;\n\nconst CustomComp = (props) => <div>props.children</div>\n<CustomComp>\n  <div>Hello World</div>\n  {\"This is just a JS expression...\" + 1000}\n</CustomComp>\n```\n\n```jsx\ninterface PropsType {\n  children: JSX.Element;\n  name: string;\n}\nclass Component extends React.Component<PropsType, {}> {\n  render() {\n      return (\n          <h2>\n              {this.props.children}\n          </h2>\n      )\n  }\n}\n// Ok\n<Component>\n  <h1>Hello World</h1>\n</Component>\n\n// Error: children is of type JSX.Element not array of JSX.Element\n<Component>\n  <h1>Hello World</h1>\n  <h2>Hello World</h2>\n</Component>\n\n// Error: children is of type JSX.Element not array of JSX.Element or string.\n<Component>\n  <h1>Hello</h1>\n  World\n</Component>\n```\n\n### 20.7 JSX ç»“æœç±»å‹\n\n> é»˜è®¤åœ° `JSX` è¡¨è¾¾å¼ç»“æœçš„ç±»å‹ä¸º `any`ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªç±»å‹ï¼Œé€šè¿‡æŒ‡å®š `JSX.Element` æ¥å£ã€‚ç„¶è€Œï¼Œä¸èƒ½å¤Ÿä»æ¥å£é‡Œæ£€ç´¢å…ƒç´ ï¼Œå±æ€§æˆ– `JSX` çš„å­å…ƒç´ çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒæ˜¯ä¸€ä¸ªé»‘ç›’ã€‚\n\n### 20.8 åµŒå…¥çš„è¡¨è¾¾å¼\n\n> `JSX` å…è®¸ä½ ä½¿ç”¨ `{}` æ ‡ç­¾æ¥å†…åµŒè¡¨è¾¾å¼\n\n```tsx\nvar a = (\n  <div>\n    {[\"foo\", \"bar\"].map(i => (\n      <span>{i / 2}</span>\n    ))}\n  </div>\n);\n// ä¸Šé¢çš„ä»£ç äº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºä½ ä¸èƒ½ç”¨æ•°å­—æ¥é™¤ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¾“å‡ºå¦‚ä¸‹ï¼Œè‹¥ä½ ä½¿ç”¨äº† preserve é€‰é¡¹\nvar a = (\n  <div>\n    {[\"foo\", \"bar\"].map(function (i) {\n      return <span>{i / 2}</span>;\n    })}\n  </div>\n);\n```\n\n### 20.9 react æ•´åˆ\n\n> è¦æƒ³ä¸€èµ·ä½¿ç”¨ `JSX` å’Œ `React`ï¼Œä½ åº”è¯¥ä½¿ç”¨ `React` ç±»å‹å®šä¹‰ã€‚è¿™äº›ç±»å‹å£°æ˜å®šä¹‰äº† `JSX` åˆé€‚å‘½åç©ºé—´æ¥ä½¿ç”¨ `React`ã€‚\n\n```jsx\n/// <reference path=\"react.d.ts\" />\ninterface Props {\n  foo: string;\n}\nclass MyComponent extends React.Component<Props, {}> {\n  render() {\n    return <span>{this.props.foo}</span>;\n  }\n}\n<MyComponent foo=\"bar\" />; // æ­£ç¡®\n<MyComponent foo={0} />; // é”™è¯¯\n```\n\n### 20.10 å·¥å‚å‡½æ•°\n\n> `jsx`ï¼š`react` ç¼–è¯‘é€‰é¡¹ä½¿ç”¨çš„å·¥å‚å‡½æ•°æ˜¯å¯ä»¥é…ç½®çš„ã€‚å¯ä»¥ä½¿ç”¨ `jsxFactory` å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæˆ–å†…è”çš„ `@jsx` æ³¨é‡ŠæŒ‡ä»¤åœ¨æ¯ä¸ªæ–‡ä»¶ä¸Šè®¾ç½®ã€‚æ¯”å¦‚ï¼Œç»™ `createElement` è®¾ç½® `jsxFactory`ï¼Œ`<div />` ä¼šä½¿ç”¨ `createElement(\"div\")` æ¥ç”Ÿæˆï¼Œè€Œä¸æ˜¯ `React.createElement(\"div\")`ã€‚\n\n```jsx\n// æ³¨é‡ŠæŒ‡ä»¤å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼š(åœ¨ TypeScript 2.8 é‡Œ)\nimport preact = require(\"preact\");\n/* @jsx preact.h */\nconst x = <div/>;\n\n// ç”Ÿæˆ\nconst preact = require(\"preact\");\nconst x = preact.h(\"div\", null);\n```\n\n> å·¥å‚å‡½æ•°çš„é€‰æ‹©åŒæ ·ä¼šå½±å“ `JSX` å‘½åç©ºé—´çš„æŸ¥æ‰¾(ç±»å‹æ£€æŸ¥)ã€‚å¦‚æœå·¥å‚å‡½æ•°ä½¿ç”¨ `React.createElement` å®šä¹‰(é»˜è®¤)ï¼Œç¼–è¯‘å™¨ä¼šå…ˆæ£€æŸ¥ `React.JSX`ï¼Œä¹‹åæ‰æ£€æŸ¥å…¨å±€çš„ `JSX`ã€‚å¦‚æœå·¥å‚å‡½æ•°å®šä¹‰ä¸º `h`ï¼Œé‚£ä¹ˆåœ¨æ£€æŸ¥å…¨å±€çš„ `JSX` ä¹‹å‰å…ˆæ£€æŸ¥ `h.JSX`ã€‚\n\n## äºŒåä¸€ã€è£…é¥°å™¨\n\n### 21.1 ä»‹ç»\n\n> éšç€ `TypeScript` å’Œ `ES6` é‡Œå¼•å…¥äº†ç±»ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦é¢å¤–çš„ç‰¹å®šæ¥æ”¯æŒæ ‡æ³¨æˆ–ä¿®æ”¹ç±»åŠå…¶æˆå‘˜ã€‚è£…é¥°å™¨(`Decorators`)ä¸ºæˆ‘ä»¬åœ¨ç±»çš„å£°æ˜åŠæˆå‘˜ä¸Šé€šè¿‡å…ƒç¼–ç¨‹è¯­æ³•æ·»åŠ æ ‡æ³¨æä¾›äº†ä¸€ç§æ–¹å¼ã€‚`JavaScript` é‡Œçš„è£…é¥°å™¨ç›®å‰å¤„åœ¨ å»ºè®®å¾é›†çš„ç¬¬äºŒé˜¶æ®µï¼Œä½†åœ¨ `TypeScript` é‡Œå·²ä½œä¸ºä¸€é¡¹å®éªŒæ€§ç‰¹æ€§äºˆä»¥æ”¯æŒã€‚\n> æ³¨æ„ï¼šè£…é¥°å™¨æ˜¯ä¸€é¡¹å®éªŒæ€§ç‰¹æ€§ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜\n> è‹¥è¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ï¼Œä½ å¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ– `tsconfig.json` é‡Œå¯ç”¨ `experimentalDecorators` ç¼–è¯‘å™¨é€‰é¡¹ã€‚\n> å‘½ä»¤è¡Œï¼š `tsc --target ES5 --experimentalDecorators`\n\n- tsconfig.json\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES5\",\n    \"experimentalDecorators\": true\n  }\n}\n```\n\n### 21.2 è£…é¥°å™¨\n\n> è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ° `ç±»å£°æ˜`ã€`æ–¹æ³•`ã€`è®¿é—®ç¬¦`ã€`å±æ€§æˆ–å‚æ•°ä¸Š`ã€‚è£…é¥°å™¨ä½¿ç”¨ `@expression` è¿™ç§å½¢å¼ï¼Œ`expression` æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°å™¨çš„å£°æ˜ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚\n> ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ª `@sealed` è£…é¥°å™¨ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å®šä¹‰ `sealed` å‡½æ•°\n\n```typescript\nfunction sealed(target) {\n  // do something with target\n}\n```\n\n> æ³¨æ„ï¼šåé¢ç±»è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚\n\n### 21.3 è£…é¥°å™¨å·¥å‚\n\n> å¦‚æœæˆ‘ä»¬è¦å®šåˆ¶ä¸€ä¸ªä¿®é¥°å™¨å¦‚ä½•åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œæˆ‘ä»¬å¾—å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ã€‚è£…é¥°å™¨å·¥å‚å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¾›è£…é¥°å™¨åœ¨è¿è¡Œæ—¶è°ƒç”¨ã€‚\n\n- æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ï¼š\n\n```typescript\nfunction color(value: string) {\n  // è¿™æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚\n  return function (target) {\n    // è¿™æ˜¯è£…é¥°å™¨\n    // do something with \"target\" and \"value\" ...\n  };\n}\n```\n\n> æ³¨æ„ï¼šä¸‹é¢æ–¹æ³•è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚\n\n### 21.4 è£…é¥°å™¨ç»„åˆ\n\n> å¤šä¸ªè£…é¥°å™¨å¯ä»¥åŒæ—¶åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œå°±åƒä¸‹é¢çš„å®ä¾‹ï¼š\n\n1. ä¹¦å†™åœ¨åŒä¸€è¡Œï¼š\n\n```typescript\n@f @g x\n```\n\n2. ä¹¦å†™åœ¨å¤šè¡Œä¸Šï¼š\n\n```typescript\n@f\n@g\nx\n```\n\n> å½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå£°æ˜ä¸Šï¼Œå®ƒä»¬æ±‚å€¼æ–¹å¼ä¸ å¤åˆå‡½æ•° ç›¸ä¼¼ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œå½“å¤åˆ f å’Œ g æ—¶ï¼Œå¤åˆçš„ç»“æœ `\\(fâˆ˜g\\)\\(x\\)` ç­‰åŒäº `f\\(g\\(x\\)\\)`ã€‚\n\n> åŒæ ·çš„ï¼Œåœ¨ `TypeScript` é‡Œï¼Œå½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨åœ¨ä¸€ä¸ªå£°æ˜ä¸Šæ—¶ä¼šè¿›è¡Œå¦‚ä¸‹æ­¥éª¤çš„æ“ä½œï¼š `1`. ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ `2`. æ±‚å€¼çš„ç»“æœä¼šè¢«å½“ä½œå‡½æ•°ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡è¢«è°ƒç”¨ã€‚\n\n```typescript\n// å¦‚æœæˆ‘ä»¬ä½¿ç”¨ è£…é¥°å™¨å·¥å‚ çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥è§‚å¯Ÿå®ƒä»¬æ±‚å€¼çš„é¡ºåºï¼š\nfunction f() {\n  console.log(\"f(): evaluated\");\n  return function (target, prototypeKey: string, descriptor: PropertyDescriptor) {\n    console.log(\"f(): called\");\n  };\n}\nfunction g() {\n  console.log(\"g(): evaluated\");\n  return function (target, prototypeKey: string, descriptor: PropertyDescriptor) {\n    console.log(\"g(): called\");\n  };\n}\nclass C {\n  @f()\n  @g()\n  method() {}\n}\n```\n\n```typescript\n// åœ¨æ§åˆ¶å°é‡Œä¼šæ‰“å°å‡ºå¦‚ä¸‹ç»“æœï¼š\nf(): evaluated\ng(): evaluated\ng(): called\nf(): called\n```\n\n### 21.5 è£…é¥°å™¨æ±‚å€¼\n\n> ç±»ä¸­ä¸åŒå£°æ˜ä¸Šçš„è£…é¥°å™¨å°†æŒ‰ä»¥ä¸‹è§„å®šçš„é¡ºåºåº”ç”¨ï¼š\n\n- å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªå®ä¾‹æˆå‘˜ã€‚\n- å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªé™æ€æˆå‘˜ã€‚\n- å‚æ•°è£…é¥°å™¨åº”ç”¨åˆ°æ„é€ å‡½æ•°ã€‚\n- ç±»è£…é¥°å™¨åº”ç”¨åˆ°ç±»ã€‚\n\n### 21.6 ç±»è£…é¥°å™¨\n\n1.ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰è¢«å£°æ˜(ç´§é ç€ç±»å£°æ˜)ã€‚ç±»è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰ã€‚ç±»è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( `.d.ts` )ï¼Œä¹Ÿä¸èƒ½ç”¨åœ¨ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ä¸­(æ¯”å¦‚ `declare` çš„ç±»)ã€‚\n\n2. ç±»è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œç±»çš„æ„é€ å‡½æ•°ä½œä¸ºå…¶å”¯ä¸€çš„å‚æ•°ã€‚\n3. å¦‚æœç±»è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šä½¿ç”¨æä¾›çš„æ„é€ å‡½æ•°æ¥æ›¿æ¢ç±»çš„å£°æ˜ã€‚\n\n> æ³¨æ„ï¼šå¦‚æœä½ è¦è¿”å›ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°ï¼Œä½ å¿…é¡»æ³¨æ„å¤„ç†å¥½åŸæ¥çš„åŸå‹é“¾ã€‚åœ¨è¿è¡Œæ—¶çš„è£…é¥°å™¨è°ƒç”¨é€»è¾‘ä¸­ ä¸ä¼šä¸ºä½ åšè¿™äº›ã€‚\n> ä¸‹é¢æ˜¯ä½¿ç”¨ç±»è£…é¥°å™¨( `@sealed` )çš„ä¾‹å­ï¼Œåº”ç”¨åœ¨ `Greeter` ç±»ï¼š\n\n```typescript\n@sealed\nclass Greeter1 {\n  greeting: string;\n\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  greet() {\n    return \"Hello, \" + this.greeting;\n  }\n}\n\n// æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ @sealed è£…é¥°å™¨\nfunction sealed(constructor: Function) {\n  Object.seal(constructor);\n  Object.seal(constructor.prototype);\n}\n```\n\n> å½“ `@sealed` è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒå°†å¯†é—­æ­¤ç±»çš„æ„é€ å‡½æ•°å’ŒåŸå‹ã€‚(æ³¨ï¼šå‚è§ `Object.seal` )\n\n- ä¸‹é¢æ˜¯ä¸€ä¸ªé‡è½½æ„é€ å‡½æ•°çš„ä¾‹å­ï¼š\n\n```typescript\nfunction classDecorator<T extends { new (...args: any[]): {} }>(constructor: T) {\n  return class extends constructor {\n    newProperty = \"new property\";\n    hello = \"override\";\n  };\n}\n\n@classDecorator\nclass Greeter2 {\n  property = \"property\";\n  hello: string;\n\n  constructor(m: string) {\n    this.hello = m;\n  }\n}\n\nconsole.log(new Greeter2(\"world\"));\n```\n\n### 21.7 æ–¹æ³•è£…é¥°å™¨\n\n> æ–¹æ³•è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜ä¹‹å‰(ç´§é ç€æ–¹æ³•å£°æ˜)ã€‚å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ `å±æ€§æè¿°ç¬¦` ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚æ–¹æ³•è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ `.d.ts` ä¸Šï¼Œé‡è½½æˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ `declare` çš„ç±»)ä¸­ã€‚\n\n> æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `3` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—\n> 3. æˆå‘˜çš„å±æ€§ä¿®é¥°ç¬¦\n\n> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ä»£ç å°äº `ES5`ï¼Œå±æ€§æè¿°ç¬¦ å°†ä¼šæ˜¯ `undefined`ã€‚\n\n> å¦‚æœæ–¹æ³•è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ã€‚\n\n> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº `ES5`ï¼Œè¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚\n\n- ä¸‹é¢æ˜¯ä¸€ä¸ªæ–¹æ³•è£…é¥°å™¨ (`@enumerable`) çš„ä¾‹å­ï¼Œåº”ç”¨äº `Greeter` ç±»çš„æ–¹æ³•ä¸Šã€‚\n\n```typescript\nclass Greeter {\n  greeting: string;\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  @enumerable(false)\n  greet() {\n    return \"Hello, \" + this.greeting;\n  }\n}\n```\n\n- æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‡½æ•°å£°æ˜æ¥å®šä¹‰ `@enumerable` è£…é¥°å™¨ï¼š\n\n```typescript\nfunction enumerable(value: boolean) {\n  return function (target: any, property: string, descriptor: PropertyDescriptor) {\n    descriptor.enumerable = value;\n  };\n}\n```\n\n> è¿™é‡Œçš„ `@enumerable(false)` æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚ï¼Œå½“è£…é¥°å™¨ `@enumerable(false)` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šä¿®æ”¹å±æ€§æè¿°ç¬¦çš„ `enumerable` å±æ€§ã€‚\n\n### 21.8 è®¿é—®å™¨è£…é¥°å™¨\n\n> è®¿é—®å™¨è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªè®¿é—®å™¨çš„å£°æ˜ä¹‹å‰(ç´§é ç€è®¿é—®å™¨å£°æ˜)ã€‚è®¿é—®å™¨è£…é¥°å™¨ åº”ç”¨äºè®¿é—®å™¨çš„ `å±æ€§æè¿°ç¬¦` å¹¶ä¸”å¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ä¸€ä¸ªè®¿é—®å™¨çš„å®šä¹‰ã€‚è®¿é—®å™¨è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( `.d.ts` )ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ `declare` çš„ç±»)é‡Œã€‚\n\n> æ³¨æ„ï¼š`TypeScript` ä¸å…è®¸åŒæ—¶è£…é¥°ä¸€ä¸ªæˆå‘˜çš„ `get` å’Œ `set` è®¿é—®å™¨ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä¸€ä¸ªæˆå‘˜çš„æ‰€æœ‰è£…é¥°çš„å¿…é¡»åº”ç”¨åœ¨æ–‡æ¡£é¡ºåºçš„ç¬¬ä¸€ä¸ªè®¿é—®å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨è£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå±æ€§æè¿°ç¬¦æ—¶ï¼Œå®ƒè”åˆäº† `get` å’Œ `set` è®¿é—®å™¨ï¼Œè€Œä¸æ˜¯åˆ†å¼€å£°æ˜çš„ã€‚\n\n> è®¿é—®å™¨è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `3` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—\n> 3. æˆå‘˜çš„å±æ€§æè¿°ç¬¦\n\n> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº `ES5`ï¼Œ`Property Descriptor` å°†ä¼šæ˜¯ `undefined`ã€‚\n\n> å¦‚æœè®¿é—®å™¨è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ `å±æ€§æè¿°ç¬¦` æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº `ES5` è¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚\n\n- ä¸‹é¢æ˜¯ä½¿ç”¨äº†è®¿é—®å™¨è£…é¥°å™¨ (`@configurable`) çš„ä¾‹å­ï¼Œåº”ç”¨äº `Point` ç±»çš„æˆå‘˜ä¸Šã€‚\n\n```typescript\nclass Point {\n  private _x: number;\n  private _y: number;\n  constructor(x: number, y: number) {\n    this._x = x;\n    this._y = y;\n  }\n\n  @configurable(false)\n  get x() {\n    return this._x;\n  }\n\n  @configurable(false)\n  get y() {\n    return this._y;\n  }\n}\nlet p: Point = new Point(1, 2);\nconsole.log(p);\n```\n\n- æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‡½æ•°å£°æ˜æ¥å®šä¹‰ `@configurable` è£…é¥°å™¨ï¼š\n\n```typescript\nfunction configurable(value: boolean) {\n  return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    descriptor.configurable = value;\n  };\n}\n```\n\n### 21.9 å±æ€§è£…é¥°å™¨\n\n> å±æ€§è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå±æ€§å£°æ˜ä¹‹å‰(ç´§é ç€å±æ€§å£°æ˜)ã€‚å±æ€§è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ`.d.ts`ï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ `declare` çš„ç±»ï¼‰é‡Œã€‚\n\n> å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `2` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—ã€‚\n\n> æ³¨æ„ï¼š`å±æ€§æè¿°ç¬¦` ä¸ä¼šä½œä¸ºå‚æ•°ä¼ å…¥å±æ€§è£…é¥°å™¨ï¼Œè¿™ä¸ `TypeScript` æ˜¯å¦‚ä½•åˆå§‹åŒ–å±æ€§è£…é¥°å™¨æœ‰å…³ã€‚å› ä¸ºç›®å‰æ²¡æœ‰åŠæ³•åœ¨å®šä¹‰ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æˆå‘˜æ—¶æè¿°ä¸€ä¸ªå®ä¾‹å±æ€§ï¼Œå¹¶ä¸”æ²¡åŠæ³•ç›‘è§†æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•ã€‚è¿”å›å€¼ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚å› æ­¤ï¼Œå±æ€§æè¿°ç¬¦åªèƒ½ç”¨æ¥ç›‘è§†ç±»ä¸­æ˜¯å¦å£°æ˜äº†æŸä¸ªåå­—çš„å±æ€§ã€‚\n\n- æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è®°å½•è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\n\n```typescript\nclass Greeter {\n    @format(\"Hello, %s\")\n    greeting: string;\n>\n    constructor(message: string) {\n        this.greeting = message;\n    }\n>\n    greet() {\n        let formatString = getFormat(this, \"greeting\");\n        return formatString.replace(\"%s\", this.greeting);\n    }\n}\n>\nlet g: Greeter = new Greeter(\"é¼“åŠ±\");\nconsole.log(g);\n>\n// ç„¶åå®šä¹‰ @format è£…é¥°å™¨ å’Œ getFormat å‡½æ•°\nimport \"reflect-metadata\";\n>\nconst formatMetadataKey = Symbol(\"format\");\n>\nfunction format(formatString: string) {\n    return Reflect.metadata(formatMetadataKey, formatString);\n}\n>\nfunction getFormat(target: any, propertyKey: string) {\n    return Reflect.getMetadata(formatMetadataKey, target, propertyKey);\n}\n```\n\n> è¿™ä¸ª `@format(\"Hello, %s\")` è£…é¥°å™¨æ˜¯ä¸ª `è£…é¥°å™¨å·¥å‚`ã€‚å½“ `@format(\"Hello, %s\")` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ·»åŠ ä¸€æ¡è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œé€šè¿‡ `reflect-metadata` åº“é‡Œçš„ `Reflect.metadata` å‡½æ•°ã€‚å½“ `getFormat` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒè¯»å–æ ¼å¼çš„å…ƒæ•°æ®ã€‚\n\n> æ³¨æ„ï¼šè¿™ä¸ªä¾‹å­éœ€è¦ä½¿ç”¨ `reflect-metadata` åº“ã€‚æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ `reflect-metadata` åº“æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚\n\n### 21.10 å‚æ•°è£…é¥°å™¨\n\n> `å‚æ•°è£…é¥°å™¨` å£°æ˜åœ¨ä¸€ä¸ªå‚æ•°å£°æ˜ä¹‹å‰(ç´§é ç€å‚æ•°å£°æ˜)ã€‚å‚æ•°è£…é¥°å™¨åº”ç”¨äº `ç±»æ„é€ å‡½æ•°` æˆ– `æ–¹æ³•å£°æ˜`ã€‚å‚æ•°è£…é¥°å™¨ ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ï¼ˆ`.d.ts`ï¼‰ï¼Œé‡è½½æˆ–å…¶å®ƒå¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ `declare` çš„ç±»ï¼‰é‡Œã€‚\n> `å‚æ•°è£…é¥°å™¨` è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— `3` ä¸ªå‚æ•°ï¼š\n>\n> 1. å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚\n> 2. æˆå‘˜çš„åå­—\n> 3. å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„ç´¢å¼•\n\n> æ³¨æ„ï¼šå‚æ•°è£…é¥°å™¨åªèƒ½ç”¨æ¥ç›‘è§†ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯å¦è¢«ä¼ å…¥ã€‚\n\n> å‚æ•°è£…é¥°å™¨çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥\n\n- ä¸‹é¢å®šä¹‰äº†å‚æ•°è£…é¥°å™¨( `@required` )å¹¶åº”ç”¨äº `Greeter` ç±»æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ï¼š\n\n```typescript\nclass Greeter {\n  greeting: string;\n\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  @validate\n  greet(@required name: string) {\n    return \"Hello \" + name + \", \" + this.greeting;\n  }\n}\n```\n\n- ç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å®šä¹‰ `@required` å’Œ `@validate` è£…é¥°å™¨\n\n```typescript\nimport \"reflect-metadata\";\n\nconst requiredMetadataKey = Symbol(\"required\");\n\nfunction required(target: Object, propertyKey: string | symbol, parameterIndex: number) {\n  let existingRequiredParameters: number[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyKey) || [];\n  existingRequiredParameters.push(parameterIndex);\n  Reflect.defineMetadata(requiredMetadataKey, existingRequiredParameters, target, propertyKey);\n}\n\nfunction validate(target: any, propertyName: string, descriptor: TypedPropertyDescriptor<Function>) {\n  let method = descriptor.value;\n  descriptor.value = function () {\n    let requiredParameters: number[] = Reflect.getOwnMetadata(requiredMetadataKey, target, propertyName);\n    if (requiredParameters) {\n      for (let parameterIndex of requiredParameters) {\n        if (parameterIndex >= arguments.length || arguments[parameterIndex] === undefined) {\n          throw new Error(\"Missing required argument.\");\n        }\n      }\n    }\n    return method.apply(this, arguments);\n  };\n}\n```\n\n> `@required` è£…é¥°å™¨æ·»åŠ äº†å…ƒæ•°æ®å®ä½“æŠŠå‚æ•°æ ‡è®°ä¸ºå¿…é¡»çš„ã€‚\n> `@validate` è£…é¥°å™¨æŠŠ `greet` æ–¹æ³•åŒ…è£¹åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œåœ¨è°ƒç”¨åŸå…ˆçš„å‡½æ•°å‰éªŒè¯å‡½æ•°å‚æ•°ã€‚\n> `æ³¨æ„ï¼š`è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† `reflect-metadata` åº“ã€‚ æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ `reflect-metadata` åº“çš„æ›´å¤šä¿¡æ¯ã€‚\n\n### 21.11 å…ƒæ•°æ®\n\n> ä¸€éƒ¨åˆ†ä¾‹å­ä½¿ç”¨äº† `reflect-metadata` åº“æ¥æ”¯æŒå®ç°æ€§çš„ `metadata API`ã€‚è¿™ä¸ªåº“è¿˜ä¸æ˜¯ `ECMAScript\\( JavaScript \\)` æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œå½“è£…é¥°å™¨è¢« `ECMAScript` å®˜æ–¹æ ‡å‡†é‡‡çº³åï¼Œè¿™äº›æ‰©å±•ä¹Ÿå°†è¢«æ¨èç»™ `ECMAScript` ä»¥é‡‡çº³ã€‚\n\n- ä½ å¯ä»¥é€šè¿‡ `npm` å®‰è£…è¿™ä¸ªåº“\n\n```bash\nnpm i reflect-metadata --save\n```\n\n> `TypeScript` æ”¯æŒä¸ºå¸¦æœ‰è£…é¥°å™¨çš„å£°æ˜ç”Ÿæˆå…ƒæ•°æ®ã€‚ä½ éœ€è¦åœ¨ `å‘½ä»¤è¡Œ` æˆ– `tsconfig.json` é‡Œå¯ç”¨ `emitDecoratorMetadata` ç¼–è¯‘å™¨é€‰é¡¹ã€‚\n\n- å‘½ä»¤è¡Œï¼š\n\n```bash\ntsc --target ES5 --experimentalDecorators --emitDecoratorMetadata\n```\n\n- `tsconfig.json`\n\n```json\n{\n  \"compilerOptions\": {\n    \"target\": \"ES5\",\n    \"experimentalDecorators\": true,\n    \"emitDecoratorMetadata\": true\n  }\n}\n```\n\n> å½“å¯ç”¨äº†ï¼Œåªè¦ `reflect-metadata` åº“è¢«å¼•å…¥äº†ï¼Œè®¾è®¡é˜¶æ®µæ·»åŠ çš„ç±»å‹ä¿¡æ¯å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨ã€‚\n\n- å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š\n\n```typescript\nimport \"reflect-metadata\";\n\nclass Point {\n  x: number;\n  y: number;\n}\n\nclass Line {\n  private _p0: Point;\n  private _p1: Point;\n\n  @validate\n  set p0(value: Point) {\n    this._p0 = value;\n  }\n\n  get p0() {\n    return this._p0;\n  }\n\n  @validate\n  set p1(value: Point) {\n    this._p1 = value;\n  }\n\n  get p1() {\n    return this._p1;\n  }\n}\n\nfunction validate<T>(target: any, propertyKey: string, descriptor: TypedPropertyDescriptor<T>) {\n  let set = descriptor.set;\n  descriptor.set = function (value: T) {\n    let type = Reflect.getMetadata(\"design:type\", target, propertyKey);\n    if (!(value instanceof type)) {\n      throw new TypeError(\"Invalid type.\");\n    }\n    set(value);\n  };\n}\n```\n\n- `TypeScript` ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ `@Reflect.metadata` è£…é¥°å™¨æ³¨å…¥è®¾è®¡é˜¶æ®µçš„ç±»å‹ä¿¡æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒç›¸å½“äºä¸‹é¢çš„ `TypeScriptï¼š`\n\n```typescript\nclass Line1 {\n  private _p0: Point;\n  private _p1: Point;\n\n  @validate\n  @Reflect.metadata(\"design:type\", Point)\n  set p0(value: Point) {\n    this._p0 = value;\n  }\n\n  get p0() {\n    return this._p0;\n  }\n\n  @validate\n  @Reflect.metadata(\"design:type\", Point)\n  set p1(value: Point) {\n    this._p1 = value;\n  }\n\n  get p1() {\n    return this._p1;\n  }\n}\n```\n\n> æ³¨æ„ï¼š è£…é¥°å™¨å…ƒæ•°æ®æ˜¯ä¸ªå®éªŒæ€§çš„ç‰¹æ€§å¹¶ä¸”å¯èƒ½åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å‘å£°ç ´åæ€§çš„æ”¹å˜ã€‚\n\n### 21.12 Reflect-metadata åº“\n\n```typescript\nnamespace Reflect {\n    // ç”¨äºè£…é¥°å™¨\n    metadata(k, v): (target, property?) => void\n    // åœ¨å¯¹è±¡ä¸Šé¢å®šä¹‰å…ƒæ•°æ®\n    defineMetadata(k, v, o, p?): void\n    // æ˜¯å¦å­˜åœ¨å…ƒæ•°æ®\n    hasMetadata(k, o, p?): boolean\n    hasOwnMetadata(k, o, p?): boolean\n    // è·å–å…ƒæ•°æ®\n    getMetadata(k, o, p?): any\n    getOwnMetadata(k, o, p?): any\n    // è·å–æ‰€æœ‰å…ƒæ•°æ®çš„ Key\n    getMetadataKeys(o, p?): any[]\n    getOwnMetadataKeys(o, p?): any[]\n    // åˆ é™¤å…ƒæ•°æ®\n    deleteMetadata(k, o, p?): boolean\n}\n```\n\n#### 21.12.1 å®‰è£…\n\n##### Metadata Reflection API\n\n- [Detailed proposal][metadata-spec]\n\n1. Installation\n\n```bash\nnpm install reflect-metadata\n```\n\n2. Background\n\n- Decorators add the ability to augment a class and its members as the class is defined, through a declarative syntax.\n- Traceur attaches annotations to a static property on the class.\n- Languages like C# (.NET), and Java support attributes or annotations that add metadata to types, along with a reflective API for reading metadata.\n\n3. Goals\n\n- A number of use cases (Composition/Dependency Injection, Runtime Type Assertions, Reflection/Mirroring, Testing) want the ability to add additional metadata to a class in a consistent manner.\n- A consistent approach is needed for various tools and libraries to be able to reason over metadata.\n- Metadata-producing decorators (nee. \"Annotations\") need to be generally composable with mutating decorators.\n- Metadata should be available not only on an object but also through a Proxy, with related traps.\n- Defining new metadata-producing decorators should not be arduous or over-complex for a developer.\n- Metadata should be consistent with other language and runtime features of ECMAScript.\n\n4. Syntax\n\n- Declarative definition of metadata:\n\n```javascript\nclass C {\n  @Reflect.metadata(metadataKey, metadataValue)\n  method() {}\n}\n```\n\n- Imperative definition of metadata:\n\n```javascript\nReflect.defineMetadata(metadataKey, metadataValue, C.prototype, \"method\");\n```\n\n- Imperative introspection of metadata:\n\n```javascript\nlet obj = new C();\nlet metadataValue = Reflect.getMetadata(metadataKey, obj, \"method\");\n```\n\n5. Semantics\n\n- Object has a new [[Metadata]] internal property that will contain a Map whose keys are property keys (or `undefined` ) and whose values are Maps of metadata keys to metadata values.\n- Object will have a number of new internal methods for [[DefineOwnMetadata]], [[GetOwnMetadata]], [[HasOwnMetadata]], etc.\n  - These internal methods can be overridden by a Proxy to support additional traps.\n  - These internal methods will by default call a set of abstract operations to define and read metadata.\n- The Reflect object will expose the MOP operations to allow imperative access to metadata.\n- Metadata defined on class declaration _C_ is stored in _C_.[[Metadata]], with `undefined` as the key.\n- Metadata defined on static members of class declaration _C_ are stored in _C_.[[Metadata]], with the property key as the key.\n- Metadata defined on instance members of class declaration _C_ are stored in _C_.prototype.[[Metadata]], with the property key as the key.\n\n1. API\n\n```javascript\n// define metadata on an object or property\nReflect.defineMetadata(metadataKey, metadataValue, target);\nReflect.defineMetadata(metadataKey, metadataValue, target, propertyKey);\n\n// check for presence of a metadata key on the prototype chain of an object or property\nlet result = Reflect.hasMetadata(metadataKey, target);\nlet result = Reflect.hasMetadata(metadataKey, target, propertyKey);\n\n// check for presence of an own metadata key of an object or property\nlet result = Reflect.hasOwnMetadata(metadataKey, target);\nlet result = Reflect.hasOwnMetadata(metadataKey, target, propertyKey);\n\n// get metadata value of a metadata key on the prototype chain of an object or property\nlet result = Reflect.getMetadata(metadataKey, target);\nlet result = Reflect.getMetadata(metadataKey, target, propertyKey);\n\n// get metadata value of an own metadata key of an object or property\nlet result = Reflect.getOwnMetadata(metadataKey, target);\nlet result = Reflect.getOwnMetadata(metadataKey, target, propertyKey);\n\n// get all metadata keys on the prototype chain of an object or property\nlet result = Reflect.getMetadataKeys(target);\nlet result = Reflect.getMetadataKeys(target, propertyKey);\n\n// get all own metadata keys of an object or property\nlet result = Reflect.getOwnMetadataKeys(target);\nlet result = Reflect.getOwnMetadataKeys(target, propertyKey);\n\n// delete metadata from an object or property\nlet result = Reflect.deleteMetadata(metadataKey, target);\nlet result = Reflect.deleteMetadata(metadataKey, target, propertyKey);\n\n// apply metadata via a decorator to a constructor\n@Reflect.metadata(metadataKey, metadataValue)\nclass C {\n  // apply metadata via a decorator to a method (property)\n  @Reflect.metadata(metadataKey, metadataValue)\n  method() {}\n}\n```\n\n7. Alternatives\n\n- Use properties rather than a separate API.\n  - Obvious downside is that this can be a lot of code:\n\n```javascript\nfunction ParamTypes(...types) {\n  return (target, propertyKey) => {\n    const symParamTypes = Symbol.for(\"design:paramtypes\");\n    if (propertyKey === undefined) {\n      target[symParamTypes] = types;\n    } else {\n      const symProperties = Symbol.for(\"design:properties\");\n      let properties, property;\n      if (Object.prototype.hasOwnProperty.call(target, symProperties)) {\n        properties = target[symProperties];\n      } else {\n        properties = target[symProperties] = {};\n      }\n      if (Object.prototype.hasOwnProperty.call(properties, propertyKey)) {\n        property = properties[propertyKey];\n      } else {\n        property = properties[propertyKey] = {};\n      }\n      property[symParamTypes] = types;\n    }\n  };\n}\n```\n\n8. Notes\n\n- Though it may seem counterintuitive, the methods on Reflect place the parameters for the metadata key and metadata value before the target or property key. This is due to the fact that the property key is the only optional parameter in the argument list. This also makes the methods easier to curry with Function#bind. This also helps reduce the overall footprint and complexity of a metadata-producing decorator that could target both a class or a property:\n\n```javascript\nfunction ParamTypes(...types) {\n  // as propertyKey is effectively optional, its easier to use here\n  return (target, propertyKey) => {\n    Reflect.defineMetadata(\"design:paramtypes\", types, target, propertyKey);\n  };\n\n  // vs. having multiple overloads with the target and key in the front:\n  //\n  // return (target, propertyKey) => {\n  //    if (propertyKey === undefined) {\n  //      Reflect.defineMetadata(target, \"design:paramtypes\", types);\n  //    }\n  //    else {\n  //      Reflect.defineMetadata(target, propertyKey, \"design:paramtypes\", types);\n  //    }\n  // }\n  //\n  // vs. having a different methods for the class or a property:\n  //\n  // return (target, propertyKey) => {\n  //    if (propertyKey === undefined) {\n  //      Reflect.defineMetadata(target, \"design:paramtypes\", types);\n  //    }\n  //    else {\n  //      Reflect.definePropertyMetadata(target, propertyKey, \"design:paramtypes\", types);\n  //    }\n  // }\n}\n```\n\n- To enable experimental support for metadata decorators in your TypeScript project, you must add `\"experimentalDecorators\": true` to your tsconfig.json file.\n- To enable experimental support for auto-generated type metadata in your TypeScript project, you must add `\"emitDecoratorMetadata\": true` to your tsconfig.json file.\n  - Please note that auto-generated type metadata may have issues with circular or forward references for types.\n\n9. Issues\n\n- A poorly written mutating decorator for a class constructor could cause metadata to become lost if the prototype chain is not maintained. Though, not maintaining the prototype chain in a mutating decorator for a class constructor would have other negative side effects as well. [@rbuckton ](/rbuckton)\n  - This is mitigated if the mutating decorator returns a class expression that extends from the target, or returns a proxy for the decorator. [@rbuckton ](/rbuckton)\n- Metadata for a method is attached to the class (or prototype) via the property key. It would not then be available if trying to read metadata on the function of the method (e.g. \"tearing-off\" the method from the class). [@rbuckton ](/rbuckton)\n\n[Metadata-Spec]: [https://rbuckton.github.io/reflect-metadata](https://rbuckton.github.io/reflect-metadata)\n\n## äºŒåäºŒã€Mixins æ··å…¥\n\n### 22.1 ä»‹ç»\n\n> é™¤äº†ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç»§æ‰¿æ–¹å¼ï¼Œè¿˜æµè¡Œä¸€ç§é€šç”¨å¯é‡ç”¨ç»„ä»¶åˆ›å»ºç±»çš„æ–¹å¼ï¼Œå°±æ˜¯è”åˆå¦ä¸€ä¸ªç®€å•ç±»çš„ä»£ç ã€‚\n> ä½ å¯èƒ½åœ¨ `Scala` ç­‰è¯­è¨€é‡Œå¯¹ `mixins` åŠå…¶ç‰¹æ€§å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å®ƒåœ¨ `JavaScript` ä¸­ä¹Ÿæ˜¯å¾ˆæµè¡Œçš„ã€‚\n\n### 22.2 æ··å…¥ç¤ºä¾‹\n\n> ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åœ¨ `TypeScript` é‡Œä½¿ç”¨æ··å…¥ã€‚åé¢æˆ‘ä»¬è¿˜ä¼šè§£é‡Šè¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚\n\n```typescript\n// Disposable Mixin\nclass Disposable {\n  isDisposed: boolean;\n  dispose() {\n    this.isDisposed = true;\n  }\n}\n\n// Activatable Mixin\nclass Activatable {\n  isActive: boolean;\n  activate() {\n    this.isActive = true;\n  }\n  deactivate() {\n    this.isActive = false;\n  }\n}\n\nclass SmartObject implements Disposable, Activatable {\n  constructor() {\n    setInterval(() => console.log(this.isActive + \":\" + this.isDisposed), 500);\n  }\n\n  interact() {\n    this.activate();\n  }\n\n  // Disposable\n  isDisposed: boolean = false;\n  dispose: () => void;\n  // Activatable\n  isActive: boolean = false;\n  activate: () => void;\n  deactivate: () => void;\n}\n\napplyMixins(SmartObject, [Disposable, Activatable]);\nlet smartObj = new SmartObject();\nsetTimeout(() => smartObj.interact(), 1000);\n\n////////////////////////////////////////\n// In your runtime library somewhere\n////////////////////////////////////////\n\nfunction applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      derivedCtor.prototype[name] = baseCtor.prototype[name];\n    });\n  });\n}\n```\n\n### 22.3 ç†è§£è¿™ä¸ªä¾‹å­\n\n1. ä»£ç é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œå®ƒä»¬å°†åšä¸º `mixins`ã€‚å¯ä»¥çœ‹åˆ°æ¯ä¸ªç±»éƒ½åªå®šä¹‰äº†ä¸€ä¸ªç‰¹å®šçš„è¡Œä¸ºæˆ–åŠŸèƒ½ã€‚ç¨åæˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ŒåŒæ—¶å…·æœ‰è¿™ä¸¤ç§åŠŸèƒ½ã€‚\n\n```typescript\n// Disposable Mixin\nclass Disponsable {\n  isDisponsed: boolean;\n  dispose() {\n    this.isDisponsed = true;\n  }\n}\n\n// Activatable Mixin\nclass Activatable {\n  isActive: boolean;\n  activate() {\n    this.isActive = true;\n  }\n  deactivate() {\n    this.isActive = false;\n  }\n}\n```\n\n2. ä¸‹é¢åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»“åˆäº†è¿™ä¸¤ä¸ª `mixins`ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸‹å…·ä½“æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼š\n\n```typescript\nclass SmartObject implements Disposable, Activatable {}\n```\n\n3. é¦–å…ˆåº”è¯¥æ³¨æ„åˆ°çš„æ˜¯ï¼Œæ²¡ä½¿ç”¨ `extends` è€Œæ˜¯ä½¿ç”¨ `implements`ã€‚ æŠŠç±»å½“æˆäº†æ¥å£ï¼Œä»…ä½¿ç”¨ `Disposable` å’Œ `Activatable` çš„ç±»å‹è€Œéå…¶å®ç°ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨ç±»é‡Œé¢å®ç°æ¥å£ã€‚ä½†æ˜¯è¿™æ˜¯æˆ‘ä»¬åœ¨ç”¨ `mixin` æ—¶æƒ³é¿å…çš„ã€‚\n4. æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšæ¥è¾¾åˆ°ç›®çš„ï¼Œä¸ºå°†è¦ `mixin` è¿›æ¥çš„å±æ€§æ–¹æ³•åˆ›å»ºå‡ºå ä½å±æ€§ã€‚è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›æˆå‘˜åœ¨è¿è¡Œæ—¶æ˜¯å¯ç”¨çš„ã€‚ è¿™æ ·å°±èƒ½ä½¿ç”¨ `mixin` å¸¦æ¥çš„ä¾¿åˆ©ï¼Œè™½è¯´éœ€è¦æå‰å®šä¹‰ä¸€äº›å ä½å±æ€§ã€‚\n\n```typescript\n// Disposable\n  isDisposed: boolean = false;\n  dispose: () => void;\n// Activatable\n  isActive: boolean = false;\n  activate: () => void;\n  deactivate: () => void;\n```\n\n5. æœ€åï¼ŒæŠŠ `mixins` æ··å…¥å®šä¹‰çš„ç±»ï¼Œå®Œæˆå…¨éƒ¨å®ç°éƒ¨åˆ†ã€‚\n\n```typescript\napplyMixins(SmartObject, [Disposable, Activatable]);\n```\n\n6. æœ€åï¼Œåˆ›å»ºè¿™ä¸ªå¸®åŠ©å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åšæ··å…¥æ“ä½œã€‚ å®ƒä¼šéå† `mixins` ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå¹¶å¤åˆ¶åˆ°ç›®æ ‡ä¸Šå»ï¼ŒæŠŠä¹‹å‰çš„å ä½å±æ€§æ›¿æ¢æˆçœŸæ­£çš„å®ç°ä»£ç ã€‚\n\n```typescript\nfunction applyMixins(derivedCtor: any, baseCtors: any[]) {\n  baseCtors.forEach(baseCtor => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n      derivedCtor.prototype[name] = baseCtor.prototype[name];\n    });\n  });\n}\n```\n\n## äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\n\n- ä¸‰æ–œçº¿æŒ‡ä»¤æ˜¯åŒ…å«å•ä¸ª `XML` æ ‡ç­¾çš„å•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šå†…å®¹ä¼šåšä¸ºç¼–è¯‘å™¨æŒ‡ä»¤ä½¿ç”¨ã€‚\n- ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶æœ€é¡¶ç«¯ã€‚ä¸€ä¸ªä¸‰æ–œçº¿æŒ‡ä»¤çš„å‰é¢åªèƒ½å‡ºç°å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šï¼Œè¿™åŒ…æ‹¬å…¶å®ƒçš„ä¸‰æ–œçº¿æŒ‡ä»¤ã€‚å¦‚æœå®ƒä»¬å‡ºç°åœ¨ä¸€ä¸ªè¯­å¥æˆ–å£°æ˜ä¹‹åï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«å½“ä½œæ™®é€šçš„å•è¡Œæ³¨é‡Šï¼Œå¹¶ä¸”ä¸å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚\n\n```typescript\n/// <reference path=\"...\" />\n/// <reference path=\"...\" /> æŒ‡ä»¤æ˜¯ä¸‰æ–œçº¿æŒ‡ä»¤ä¸­æœ€å¸¸è§çš„ä¸€ç§ã€‚ å®ƒç”¨äºå£°æ˜æ–‡ä»¶é—´çš„ ä¾èµ–ã€‚\n```\n\n- ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–æ–‡ä»¶ã€‚\n- å½“ä½¿ç”¨ `--out` æˆ– `--outFile` æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥åšä¸ºè°ƒæ•´è¾“å‡ºå†…å®¹é¡ºåºçš„ä¸€ç§æ–¹æ³•ã€‚æ–‡ä»¶åœ¨è¾“å‡ºæ–‡ä»¶å†…å®¹ä¸­çš„ä½ç½®ä¸ç»è¿‡é¢„å¤„ç†åçš„è¾“å…¥é¡ºåºä¸€è‡´ã€‚\n\n### 23.1 é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\n\n> ç¼–è¯‘å™¨ä¼šå¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†æ¥è§£ææ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨æŒ‡ä»¤ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé¢å¤–çš„æ–‡ä»¶ä¼šåŠ åˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚\n> è¿™ä¸ªè¿‡ç¨‹ä¼šä»¥ä¸€äº›æ ¹æ–‡ä»¶å¼€å§‹ï¼›å®ƒä»¬æ˜¯åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–æ˜¯åœ¨ `tsconfig.json` ä¸­çš„ `\"files\"` åˆ—è¡¨é‡Œçš„æ–‡ä»¶ã€‚è¿™äº›æ ¹æ–‡ä»¶æŒ‰æŒ‡å®šçš„é¡ºåºè¿›è¡Œé¢„å¤„ç†ã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶è¢«åŠ å…¥åˆ—è¡¨å‰ï¼Œå®ƒåŒ…å«çš„æ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨éƒ½è¦è¢«å¤„ç†ï¼Œè¿˜æœ‰å®ƒä»¬åŒ…å«çš„ç›®æ ‡ã€‚ä¸‰æ–œçº¿å¼•ç”¨ä»¥å®ƒä»¬åœ¨æ–‡ä»¶é‡Œå‡ºç°çš„é¡ºåºï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆçš„æ–¹å¼è§£æã€‚\n> Â  ä¸€ä¸ªä¸‰æ–œçº¿å¼•ç”¨è·¯å¾„æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æ–‡ä»¶çš„ï¼Œå¦‚æœä¸æ˜¯æ ¹æ–‡ä»¶ã€‚\n\n### 23.2 é”™è¯¯\n\n> å¼•ç”¨ä¸å­˜åœ¨çš„æ–‡ä»¶ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªæ–‡ä»¶ç”¨ä¸‰æ–œçº¿æŒ‡ä»¤å¼•ç”¨è‡ªå·±ä¼šæŠ¥é”™ã€‚\n\n### 23.3 ä½¿ç”¨ `--noResolve`\n\n> å¦‚æœæŒ‡å®šäº† `--noResolve` ç¼–è¯‘é€‰é¡¹ï¼Œä¸‰æ–œçº¿æŒ‡ä»¤ä¼šè¢«å¿½ç•¥ï¼›å®ƒä»¬ä¸ä¼šå¢åŠ æ–°æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç»™å®šæ–‡ä»¶çš„é¡ºåºã€‚\n\n```typescript\n/// <reference types=\"...\" />\n```\n\n- ä¸ `/// <reference path=\"...\" />` æŒ‡ä»¤ç›¸ä¼¼ï¼Œè¿™ä¸ªæŒ‡ä»¤æ˜¯ç”¨æ¥å£°æ˜ä¾èµ–çš„ï¼›ä¸€ä¸ª `/// <reference types=\"...\" />` æŒ‡ä»¤åˆ™å£°æ˜äº†å¯¹æŸä¸ªåŒ…çš„ä¾èµ–ã€‚\n- å¯¹è¿™äº›åŒ…çš„åå­—çš„è§£æä¸åœ¨ `import` è¯­å¥é‡Œå¯¹æ¨¡å—åçš„è§£æç±»ä¼¼ã€‚å¯ä»¥ç®€å•åœ°æŠŠä¸‰æ–œçº¿ç±»å‹å¼•ç”¨æŒ‡ä»¤å½“åš `import` å£°æ˜çš„åŒ…ã€‚\n- ä¾‹å¦‚ï¼ŒæŠŠ `/// <reference types=\"node\" />`å¼•å…¥åˆ°å£°æ˜æ–‡ä»¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨äº†`@types/node/index.d.ts` é‡Œé¢å£°æ˜çš„åå­—ï¼›å¹¶ä¸”ï¼Œè¿™ä¸ªåŒ…éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä¸å£°æ˜æ–‡ä»¶ä¸€èµ·è¢«åŒ…å«è¿›æ¥ã€‚\n- ä»…å½“åœ¨ä½ éœ€è¦å†™ä¸€ä¸ª `.d.ts` æ–‡ä»¶æ—¶æ‰ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ã€‚\n- å¯¹äºé‚£äº›åœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°æ·»åŠ  `/// <reference types=\"...\" />`ï¼›å½“ä¸”ä»…å½“ç»“æœæ–‡ä»¶ä¸­ä½¿ç”¨äº†å¼•ç”¨çš„åŒ…é‡Œçš„å£°æ˜æ—¶æ‰ä¼šåœ¨ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶é‡Œæ·»åŠ  Â `/// <reference types=\"...\" />` è¯­å¥ã€‚\n- è‹¥è¦åœ¨ `.ts` æ–‡ä»¶é‡Œå£°æ˜ä¸€ä¸ªå¯¹ `@types` åŒ…çš„ä¾èµ–ï¼Œä½¿ç”¨ `--types` å‘½ä»¤è¡Œé€‰é¡¹ æˆ–åœ¨ `tsconfig.json` é‡ŒæŒ‡å®šã€‚æŸ¥çœ‹ åœ¨ `tsconfig.json` é‡Œä½¿ç”¨ `@types`ï¼Œ`typeRoots` å’Œ `types` äº†è§£è¯¦æƒ…ã€‚\n- `/// <reference no-default-lib=\"true\"/>` è¿™ä¸ªæŒ‡ä»¤æŠŠä¸€ä¸ªæ–‡ä»¶æ ‡è®°æˆé»˜è®¤åº“ã€‚ä½ ä¼šåœ¨ `lib.d.ts` æ–‡ä»¶å’Œå®ƒä¸åŒçš„å˜ä½“çš„é¡¶ç«¯çœ‹åˆ°è¿™ä¸ªæ³¨é‡Šã€‚è¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸è¦åŒ…å«è¿™ä¸ªé»˜è®¤åº“ï¼ˆæ¯”å¦‚ï¼Œ`lib.d.ts`ï¼‰ã€‚ è¿™ä¸åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ -`-noLib` ç›¸ä¼¼ã€‚\n- è¿˜è¦æ³¨æ„ï¼Œå½“ä¼ é€’äº† `--skipDefaultLibCheck` æ—¶ï¼Œç¼–è¯‘å™¨åªä¼šå¿½ç•¥æ£€æŸ¥å¸¦æœ‰ `/// <reference no-default-lib=\"true\"/>` çš„æ–‡ä»¶ã€‚\n\n### 23.4 `<amd-module />`\n\n> é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆçš„ `AMD` æ¨¡å— éƒ½æ˜¯åŒ¿åçš„ã€‚ä½†æ˜¯ï¼Œå½“ä¸€äº›å·¥å…·éœ€è¦å¤„ç†ç”Ÿæˆçš„æ¨¡å—æ—¶ä¼šäº§ç”Ÿé—®é¢˜ï¼Œæ¯”å¦‚ `r.jsã€‚amd-module` æŒ‡ä»¤å…è®¸ç»™ç¼–è¯‘å™¨ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„æ¨¡å—åï¼š\n\n- `amdModule.ts`\n\n```typescript\n/// <amd-module name=\"NamedModule\" />\nexport class C {}\n```\n\n> è¿™ä¼šå°† `NamedModule` ä¼ å…¥åˆ° `AMD define` å‡½æ•°é‡Œï¼š\n\n- `amdModule.js`\n\n```typescript\ndefine(\"NamedModule\", [\"require\", \"exports\"], function (require, exports) {\n  var C = (function () {\n    function C() {}\n    return C;\n  })();\n  exports.C = C;\n});\n```\n\n### 23.5 `<amd-dependency />`\n\n- æ³¨æ„ï¼šè¿™ä¸ªæŒ‡ä»¤è¢«åºŸå¼ƒäº†ã€‚ä½¿ç”¨ `import \"moduleName\";` è¯­å¥ä»£æ›¿ã€‚\n\n```typescript\n/// <amd-dependency path=\"x\" />\n\n// å‘Šè¯‰ç¼–è¯‘å™¨æœ‰ä¸€ä¸ªé TypeScript æ¨¡å—ä¾èµ–éœ€è¦è¢«æ³¨å…¥ï¼Œåšä¸ºç›®æ ‡æ¨¡å— require è°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚\n```\n\n- `amd-dependency` æŒ‡ä»¤ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå¯é€‰çš„ `name` å±æ€§ï¼›å®ƒå…è®¸æˆ‘ä»¬ä¸º `amd-dependency` ä¼ å…¥ä¸€ä¸ªå¯é€‰åå­—ï¼š\n\n```typescript\n/// <amd-dependency path=\"legacy/moduleA\" name=\"moduleA\"/>\ndeclare var moduleA: MyType;\nmoduleA.callStuff();\n```\n\n- ç”Ÿæˆçš„ `JavaScript` ä»£ç ï¼š\n\n```typescript\ndefine([\"require\", \"exports\", \"legacy/moduleA\"], function (require, exports, moduleA) {\n  moduleA.callStuff();\n});\n```\n\n## äºŒåå››ã€JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\n\n### 24.1 JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\n\n> `TypeScript 2.3` ä»¥åçš„ç‰ˆæœ¬æ”¯æŒä½¿ç”¨ `--checkJs` å¯¹ `.js` æ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥å’Œé”™è¯¯æç¤ºã€‚\n\n> ä½ å¯ä»¥é€šè¿‡æ·»åŠ  `// @ts-nocheck` æ³¨é‡Šæ¥å¿½ç•¥ç±»å‹æ£€æŸ¥ï¼›ç›¸åï¼Œä½ å¯ä»¥é€šè¿‡å»æ‰ `--checkJs` è®¾ç½®å¹¶æ·»åŠ ä¸€ä¸ª `// @ts-nocheck` æ³¨é‡Šæ¥é€‰æ‹©æ£€æŸ¥æŸäº› `.js` æ–‡ä»¶ã€‚ä½ è¿˜å¯ä»¥ç”¨ `// @ts-ignore` æ¥å¿½ç•¥æœ¬è¡Œçš„é”™è¯¯ã€‚å¦‚æœä½ ä½¿ç”¨äº† `tsconfig.json`ï¼Œ`JS` æ£€æŸ¥å°†éµç…§ä¸€äº›ä¸¥æ ¼æ£€æŸ¥æ ‡è®°ï¼Œå¦‚ `noImplicitAny`ï¼Œ`strictNullChecks` ç­‰ã€‚ä½†å› ä¸º `JS` æ£€æŸ¥æ˜¯ç›¸å¯¹å®½æ¾çš„ï¼Œåœ¨ä½¿ç”¨ä¸¥æ ¼æ ‡è®°æ—¶å¯èƒ½ä¼šæœ‰äº›å‡ºä¹æ„æ–™çš„æƒ…å†µã€‚\n\n- å¯¹æ¯” `.js`æ–‡ä»¶å’Œ `.ts` æ–‡ä»¶åœ¨ç±»å‹æ£€æŸ¥ä¸Šçš„å·®å¼‚ï¼Œæœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„\n\n#### (1) ç”¨ `JSDoc` ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\n\n> `.js` æ–‡ä»¶é‡Œï¼Œç±»å‹å¯ä»¥å’Œåœ¨ `.ts` æ–‡ä»¶é‡Œä¸€æ ·è¢«æ¨æ–­å‡ºæ¥ã€‚åŒæ ·åœ°ï¼Œå½“ç±»å‹ä¸èƒ½è¢«æ¨æ–­æ—¶ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ `JSDoc` æ¥æŒ‡å®šï¼Œå°±å¥½æ¯”åœ¨ `.ts` æ–‡ä»¶é‡Œé‚£æ ·ã€‚å¦‚åŒ `TypeScript`ï¼Œ`--noImplicitAny` ä¼šåœ¨ç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹çš„ä½ç½®æŠ¥é”™ã€‚ï¼ˆé™¤äº†å¯¹è±¡å­—é¢é‡çš„æƒ…å†µï¼›åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰`JSDoc` æ³¨è§£ä¿®é¥°çš„å£°æ˜ä¼šè¢«è®¾ç½®ä¸ºè¿™ä¸ªå£°æ˜çš„ç±»å‹ã€‚æ¯”å¦‚ï¼š\n\n```typescript\n/** @type {number} */\nvar x;\nx = 0; // OK\nx = false; // Error: boolean is not assignable to number\n```\n\n> ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ‰€æœ‰ `JSDoc` æ”¯æŒçš„æ¨¡å¼ï¼Œ[JSDoc æ–‡æ¡£](https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript)ã€‚\n\n#### (2) å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\n\n> `ES2015` æ²¡æä¾›å£°æ˜ç±»å±æ€§çš„æ–¹æ³•ã€‚å±æ€§æ˜¯åŠ¨æ€èµ‹å€¼çš„ï¼Œå°±åƒå¯¹è±¡å­—é¢é‡ä¸€æ ·ã€‚åœ¨ `.js` æ–‡ä»¶é‡Œï¼Œç¼–è¯‘å™¨ä»ç±»å†…éƒ¨çš„å±æ€§èµ‹å€¼è¯­å¥æ¥æ¨æ–­å±æ€§ç±»å‹ã€‚å±æ€§çš„ç±»å‹æ˜¯åœ¨æ„é€ å‡½æ•°é‡Œèµ‹çš„å€¼çš„ç±»å‹ï¼Œé™¤éå®ƒæ²¡åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰æˆ–è€…åœ¨æ„é€ å‡½æ•°é‡Œæ˜¯ `undefined` æˆ– `null`ã€‚è‹¥æ˜¯è¿™ç§æƒ…å†µï¼Œç±»å‹å°†ä¼šæ˜¯æ‰€æœ‰èµ‹å€¼çš„ç±»å‹çš„è”åˆç±»å‹ã€‚åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰çš„å±æ€§ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œç„¶è€Œé‚£äº›åœ¨æ–¹æ³•ï¼Œå­˜å–å™¨é‡Œå®šä¹‰çš„å±æ€§è¢«å½“æˆå¯é€‰çš„ã€‚\n\n```typescript\nclass C {\n  constructor() {\n    this.constructorOnly = 0;\n    this.constructorUnknown = undefined;\n  }\n  method() {\n    this.constructorOnly = false; // error, constructorOnly is a number\n    this.constructorUnknown = \"plunkbat\"; // ok, constructorUnknown is string | undefined\n    this.methodOnly = \"ok\"; // ok, but y could also be undefined\n  }\n  method2() {\n    this.methodOnly = true; // also, ok, y's type is string | boolean | undefined\n  }\n}\n```\n\n> å¦‚æœä¸€ä¸ªå±æ€§ä»æ²¡åœ¨ç±»å†…è®¾ç½®è¿‡ï¼Œå®ƒä»¬ä¼šè¢«å½“æˆæœªçŸ¥çš„ã€‚\n\n> å¦‚æœç±»çš„å±æ€§åªæ˜¯è¯»å–ç”¨çš„ï¼Œé‚£ä¹ˆå°±åœ¨æ„é€ å‡½æ•°é‡Œç”¨ `JSDoc` å£°æ˜å®ƒçš„ç±»å‹ã€‚å¦‚æœå®ƒç¨åä¼šè¢«åˆå§‹åŒ–ï¼Œä½ ç”šè‡³éƒ½ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°é‡Œç»™å®ƒèµ‹å€¼ï¼š\n\n```typescript\nclass C {\n  constructor() {\n    /** @type {name | undefined} */\n    this.prop = undefined;\n    /** @type {number | undefined} */\n    this.count;\n  }\n}\nlet c = new C();\nc.prop = 0; // Ok\nc.count = \"string\"; // Error: string is not assignable to number | undefined\n```\n\n#### (3) æ„é€ å‡½æ•°ç­‰åŒäºç±»\n\n> `ES2015` ä»¥å‰ï¼Œ`Javascript` ä½¿ç”¨æ„é€ å‡½æ•°ä»£æ›¿ç±»ã€‚ç¼–è¯‘å™¨æ”¯æŒè¿™ç§æ¨¡å¼å¹¶èƒ½å¤Ÿå°†æ„é€ å‡½æ•°è¯†åˆ«ä¸º `ES2015` çš„ç±»ã€‚å±æ€§ç±»å‹æ¨æ–­æœºåˆ¶å’Œä¸Šé¢ä»‹ç»çš„ä¸€è‡´ã€‚\n\n```typescript\nfunction C() {\n  this.constructorOnly = 0;\n  this.constructorUnknown = undefined;\n}\nC.prototype.method = function () {\n  this.constructorOnly = false; // error\n  this.constructorUnknown = \"plunkbat\"; // OK, the type is string | undefined\n};\n```\n\n#### (4) æ”¯æŒ `CommonJS` æ¨¡å—\n\n> åœ¨ `.js` æ–‡ä»¶é‡Œï¼Œ`TypeScript` èƒ½è¯†åˆ«å‡º `CommonJS` æ¨¡å—ã€‚å¯¹ `exports` å’Œ `module.exports` çš„èµ‹å€¼è¢«è¯†åˆ«ä¸ºå¯¼å‡ºå£°æ˜ã€‚ç›¸ä¼¼åœ°ï¼Œ`require` å‡½æ•°è°ƒç”¨è¢«è¯†åˆ«ä¸ºæ¨¡å—å¯¼å…¥ã€‚ä¾‹å¦‚ï¼š\n\n```typescript\n// same as `import module 'fs'`\nconst fs = require(\"fs\");\n// same as `export function readFile`\nmodule.exports.readFile = function (f) {\n  return fs.readFileSync(f);\n};\n```\n\n> å¯¹ `JavaScript` æ–‡ä»¶é‡Œæ¨¡å—è¯­æ³•çš„æ”¯æŒæ¯”åœ¨ `TypeScript` é‡Œå®½æ³›å¤šäº†ã€‚ å¤§éƒ¨åˆ†çš„èµ‹å€¼å’Œå£°æ˜æ–¹å¼éƒ½æ˜¯å…è®¸çš„ã€‚\n\n#### (5) ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\n\n```typescript\n// .js æ–‡ä»¶é‡Œçš„ç±»æ˜¯å‘½åç©ºé—´ã€‚å®ƒå¯ä»¥ç”¨äºåµŒå¥—ç±»ï¼Œæ¯”å¦‚ï¼š\nclass C {}\nC.D = class {};\n// ES2015 ä¹‹å‰çš„ä»£ç ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿé™æ€æ–¹æ³•ã€‚\nfunction Outer() {\n  this.y = 2;\n}\nOuter.Inner = function () {\n  this.yy = 2;\n};\n// å®ƒè¿˜å¯ä»¥ç”¨äºåˆ›å»ºç®€å•çš„å‘½åç©ºé—´ï¼š\nvar ns = {};\nns.C = class {};\nns.func = function () {};\n// åŒæ—¶è¿˜æ”¯æŒå…¶å®ƒçš„å˜åŒ–\n// ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼\nvar ns = (function (n) {\n  return n | {};\n})();\nns.COUNT = 1;\n\n// defaulting to global\nvar assign =\n  assign ||\n  function () {\n    // code goes here\n  };\nassign.extra = 1;\n```\n\n#### (6) å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\n\n- `.ts` æ–‡ä»¶é‡Œï¼Œç”¨å¯¹è±¡å­—é¢é‡åˆå§‹åŒ–ä¸€ä¸ªå˜é‡çš„åŒæ—¶ä¹Ÿç»™å®ƒå£°æ˜äº†ç±»å‹ã€‚ æ–°çš„æˆå‘˜ä¸èƒ½å†è¢«æ·»åŠ åˆ°å¯¹è±¡å­—é¢é‡ä¸­ã€‚è¿™ä¸ªè§„åˆ™åœ¨ `.js` æ–‡ä»¶é‡Œè¢«æ”¾å®½äº†ï¼›å¯¹è±¡å­—é¢é‡å…·æœ‰å¼€æ”¾çš„ç±»å‹ï¼Œå…è®¸æ·»åŠ å¹¶è®¿é—®åŸå…ˆæ²¡æœ‰å®šä¹‰çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š\n\n```typescript\nvar obj = { a: 1 };\nobj.b = 2; // Allowed\n```\n\n- å¯¹è±¡å­—é¢é‡çš„è¡¨ç°å°±å¥½æ¯”å…·æœ‰ä¸€ä¸ªé»˜è®¤çš„ç´¢å¼•ç­¾å `\\[x:string\\]: any`ï¼Œå®ƒä»¬å¯ä»¥è¢«å½“æˆå¼€æ”¾çš„æ˜ å°„è€Œä¸æ˜¯å°é—­çš„å¯¹è±¡ã€‚\n- ä¸å…¶å®ƒ `JS` æ£€æŸ¥è¡Œä¸ºç›¸ä¼¼ï¼Œè¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡æŒ‡å®š `JSDoc` ç±»å‹æ¥æ”¹å˜ï¼Œä¾‹å¦‚ï¼š\n\n```typescript\n/** @type {{ a: number }} */\nvar obj = { a: 1 };\nobj.b = 2; // Error, type {a: number} does not have property b\n```\n\n#### (7) null undefined å’Œ ç©ºæ•°ç»„çš„ç±»å‹æ˜¯ any æˆ– any[]\n\n> ä»»ä½•ç”¨ `null`ï¼Œ`undefined` åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ `any`ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ `null` æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ä»»ä½•ç”¨ `[]` åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ `any[]`ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ `null` æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ å”¯ä¸€çš„ä¾‹å¤–æ˜¯åƒä¸Šé¢é‚£æ ·æœ‰å¤šä¸ªåˆå§‹åŒ–å™¨çš„å±æ€§ã€‚\n\n```typescript\nfunction Foo(i = null) {\n  if (!i) i = 1;\n  var j = undefined;\n  j = 2;\n  this.l = [];\n}\nvar foo = new Foo();\nfoo.l.push(foo.i);\nfoo.l.push(\"end\");\n```\n\n#### (8) å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\n\n> ç”±äºåœ¨ `ES2015` ä¹‹å‰æ— æ³•æŒ‡å®šå¯é€‰å‚æ•°ï¼Œå› æ­¤ `.js` æ–‡ä»¶é‡Œæ‰€æœ‰å‡½æ•°å‚æ•°éƒ½è¢«å½“åšæ˜¯å¯é€‰çš„ã€‚ ä½¿ç”¨æ¯”é¢„æœŸå°‘çš„å‚æ•°è°ƒç”¨å‡½æ•°æ˜¯å…è®¸çš„ã€‚\n\n> éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨è¿‡å¤šçš„å‚æ•°è°ƒç”¨å‡½æ•°ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nfunction bar(a, b) {\n  console.log(a + \" \" + b);\n}\nbar(1); // OK, second argument considered optional\nbar(1, 2);\nbar(1, 2, 3); // Error, too many arguments\n```\n\n- ä½¿ç”¨ `JSDoc` æ³¨è§£çš„å‡½æ•°ä¼šè¢«ä»è¿™æ¡è§„åˆ™é‡Œç§»é™¤ã€‚ä½¿ç”¨ `JSDoc` å¯é€‰å‚æ•°è¯­æ³•æ¥è¡¨ç¤ºå¯é€‰æ€§ã€‚\n\n```typescript\n// æ¯”å¦‚ï¼š\n/**\n * @param {string} [somebody] - Somebody's name.\n */\nfunction sayHello(somebody) {\n  if (!somebody) {\n    somebody = \"John Doe\";\n  }\n  console.log(\"Hello \" + somebody);\n}\nsayHello();\n```\n\n#### (9) ç”± `arguments` æ¨æ–­å‡ºçš„ `var-args` å‚æ•°å£°æ˜\n\n> å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ä½“å†…æœ‰å¯¹ `arguments` çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¼šéšå¼åœ°è¢«è®¤ä¸ºå…·æœ‰ä¸€ä¸ª `var-arg` å‚æ•°ï¼ˆæ¯”å¦‚: `(...arg: any[]) =>; any)`ï¼‰ã€‚ä½¿ç”¨ `JSDoc` çš„ `var-arg` è¯­æ³•æ¥æŒ‡å®š `arguments` çš„ç±»å‹ã€‚\n\n```typescript\n/** @param {...number} args */\nfunction sum(/* numbers */) {\n  var total = 0;\n  for (var i = 0; i < arguments.length; i++) {\n    total += arguments[i];\n  }\n  return total;\n}\n```\n\n#### (10) æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º `any`\n\n> ç”±äº `JavaScript` é‡Œæ²¡æœ‰ä¸€ç§è‡ªç„¶çš„è¯­æ³•æ¥æŒ‡å®šæ³›å‹å‚æ•°ï¼Œå› æ­¤æœªæŒ‡å®šçš„å‚æ•°ç±»å‹é»˜è®¤ä¸º `any`ã€‚\n\n#### (11) åœ¨ `extends` è¯­å¥ä¸­ï¼š\n\n> ä¾‹å¦‚ï¼Œ`React.Component` è¢«å®šä¹‰æˆå…·æœ‰ä¸¤ä¸ªç±»å‹å‚æ•°ï¼Œ`Props` å’Œ `State`ã€‚ åœ¨ä¸€ä¸ª `.js` æ–‡ä»¶é‡Œï¼Œæ²¡æœ‰ä¸€ä¸ªåˆæ³•çš„æ–¹å¼åœ¨ `extends` è¯­å¥é‡ŒæŒ‡å®šå®ƒä»¬ã€‚é»˜è®¤åœ°å‚æ•°ç±»å‹ä¸º `any`ï¼š\n\n```typescript\nimport { Component } from \"react\";\n\nclass MyComponent extends Component {\n  render() {\n    this.props.b; // Allowed, since this.props is of type any\n  }\n}\n```\n\n> ä½¿ç”¨ `JSDoc` çš„ `@augments` æ¥æ˜ç¡®åœ°æŒ‡å®šç±»å‹ã€‚\n\n- ä¾‹å¦‚ï¼š\n\n```typescript\nimport { Component } from \"react\";\n/**\n * @augments {Component<{a: number}, State>}\n */\nclass MyComponent extends Component {\n  render() {\n    this.props.b; // Error: b does not exist on {a:number}\n  }\n}\n```\n\n#### (12) åœ¨ JSDoc å¼•ç”¨ä¸­\n\n```typescript\n/** @type{Array} */\nvar x = [];\n\nx.push(1); // OK\nx.push(\"string\"); // OK, x is of type Array<any>\n\n/** @type{Array.<number>} */\nvar y = [];\n\ny.push(1); // OK\ny.push(\"string\"); // Error, string is not assignable to number\n```\n\n#### (13) åœ¨å‡½æ•°è°ƒç”¨ä¸­\n\n> æ³›å‹å‡½æ•°çš„è°ƒç”¨ä½¿ç”¨ `arguments` æ¥æ¨æ–­æ³›å‹å‚æ•°ã€‚æœ‰æ—¶å€™ï¼Œè¿™ä¸ªæµç¨‹ä¸èƒ½å¤Ÿæ¨æ–­å‡ºç±»å‹ï¼Œå¤§å¤šæ˜¯å› ä¸ºç¼ºå°‘æ¨æ–­çš„æºï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å‹å‚æ•°ç±»å‹é»˜è®¤ä¸º `any`ã€‚\n\n```typescript\n// ä¾‹å¦‚ï¼š\nvar p = new Promise((resolve, reject) => {\n  reject();\n});\np; // Promise<any>;\n```\n\n### 24.2 æ”¯æŒçš„ JSDoc\n\n> é¢çš„åˆ—è¡¨åˆ—å‡ºäº†å½“å‰æ‰€æ”¯æŒçš„ `JSDoc` æ³¨è§£ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬åœ¨ `JavaScript` æ–‡ä»¶é‡Œæ·»åŠ ç±»å‹ä¿¡æ¯ã€‚ æ³¨æ„ï¼Œæ²¡æœ‰åœ¨ä¸‹é¢åˆ—å‡ºçš„æ ‡è®°ï¼ˆä¾‹å¦‚ `@async`ï¼‰éƒ½æ˜¯è¿˜ä¸æ”¯æŒçš„ã€‚\n\n```typescript\n1.  @type\n2.  @param (or @arg or @argument)\n3.  @returns (or @return)\n4.  @typedef\n5.  @callback\n6.  @template\n7.  @class (or @constructor)\n8.  @this\n9.  @extends (or @augments)\n10. @enum\n```\n\n> å®ƒä»¬ä»£è¡¨çš„æ„ä¹‰ä¸ `usejsdoc.org` ä¸Šé¢ç»™å‡ºçš„é€šå¸¸æ˜¯ä¸€è‡´çš„æˆ–è€…æ˜¯å®ƒçš„è¶…é›†ã€‚ ä¸‹é¢çš„ä»£ç æè¿°äº†å®ƒä»¬çš„åŒºåˆ«å¹¶ç»™å‡ºäº†ä¸€äº›ç¤ºä¾‹ã€‚\n\n#### (1) [@type ](/type)\n\n> å¯ä»¥ä½¿ç”¨ `@type` æ ‡è®°å¹¶å¼•ç”¨ä¸€ä¸ªç±»å‹åç§°ï¼ˆåŸå§‹ç±»å‹ï¼Œ`TypeScript` é‡Œå£°æ˜çš„ç±»å‹ï¼Œæˆ–åœ¨ `JSDoc` é‡Œ `@typedef` æ ‡è®°æŒ‡å®šçš„ï¼‰å¯ä»¥ä½¿ç”¨ä»»ä½• `TypeScript` ç±»å‹å’Œå¤§å¤šæ•° `JSDoc` ç±»å‹ã€‚\n\n```typescript\n/** @type {string} */\nvar s;\n\n/** @type {Window} */\nvar win;\n\n/** @type {PromiseLike<string>} */\nvar promisedString;\n\n// You can specify an HTML Element with DOM properties\n/** @type {HTMLElement} */\n\nvar myElement = document.querySelector(selector);\nelement.dataset.myData = \"\";\n```\n\n- `@type` å¯ä»¥æŒ‡å®šè”åˆç±»å‹â€”ä¾‹å¦‚ï¼Œ`string` å’Œ `boolean` ç±»å‹çš„è”åˆã€‚\n\n```typescript\n/** @type {{string | boolean}} */\nvar sb;\n```\n\n- æ³¨æ„ï¼šæ‹¬å·æ˜¯å¯é€‰çš„\n\n```typescript\n/** @type {string | boolean} */\nvar sb;\n```\n\n- æœ‰å¤šç§æ–¹å¼æ¥æŒ‡å®šæ•°ç»„ç±»å‹\n\n```typescript\n/** @type {number[]} */\nvar ns;\n/** @type {Array.<number>} */\nvar nds;\n/** @type {Array<number>} */\nvar nas;\n```\n\n- è¿˜å¯ä»¥æŒ‡å®šå¯¹è±¡å­—é¢é‡ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ `a(å­—ç¬¦ä¸²)` å’Œ `b(æ•°å­—)` å±æ€§çš„å¯¹è±¡ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š\n\n```typescript\n/** @type {{a: string, b: number}} */\nvar var9;\n```\n\n- å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å’Œæ•°å­—ç´¢å¼•ç­¾åæ¥æŒ‡å®š `map-like` å’Œ `array-like` çš„å¯¹è±¡ï¼Œä½¿ç”¨æ ‡å‡†çš„ `JSDoc` è¯­æ³•æˆ–è€… `TypeScript` è¯­æ³•ã€‚\n\n```typescript\n/**\n * A map-like object that maps arbitrary `string` properties to `number`s.\n *\n * @type {Object.<string, number>}\n * */\nvar stringToNumber;\n/** @type {Object.<number, object>} */\nvar arrayLike;\n```\n\n- è¿™ä¸¤ä¸ªç±»å‹ä¸ `TypeScript` é‡Œçš„ `{ [x: string]: number }` å’Œ `{ [x: number]: any }` æ˜¯ç­‰åŒçš„ã€‚ ç¼–è¯‘å™¨èƒ½è¯†åˆ«å‡ºè¿™ä¸¤ç§è¯­æ³•ã€‚\n- å¯ä»¥ä½¿ç”¨ `TypeScript` æˆ– `Closure` è¯­æ³•æŒ‡å®šå‡½æ•°ç±»å‹ã€‚\n\n```typescript\n/** @type {function(string, boolean): number} Closure syntax */\nvar sbn;\n/** @type {(s: string, b: boolean) => number} Typescript syntax */\nvar sbn2;\n```\n\n- æˆ–è€…ç›´æ¥ä½¿ç”¨æœªæŒ‡å®šçš„ `Function` ç±»å‹ï¼š\n\n```typescript\n/** @type {Function} */\nvar fn7;\n/** @type {function} */\nvar fn6;\n```\n\n- `Closure` çš„å…¶å®ƒç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š\n\n```typescript\n/** @type {*} - can be 'any' type */\nvar star;\n/** @type {?} - unknown type (same as 'any') */\nvar question;\n```\n\n#### (2) è½¬æ¢\n\n> `TypeScript` å€Ÿé‰´äº† `Closure` é‡Œçš„è½¬æ¢è¯­æ³•ã€‚åœ¨æ‹¬å·è¡¨è¾¾å¼å‰é¢ä½¿ç”¨ `@type` æ ‡è®°ï¼Œå¯ä»¥å°†ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹\n\n```typescript\n/**\n * @type {number | string}\n */\nvar numberOrString = Math.random() < 0.5 ? \"hello\" : 100;\nvar typeAssertedNumber = /** @type {number} */ numberOrString;\n```\n\n#### (3) å¯¼å…¥ç±»å‹\n\n> å¯ä»¥ä½¿ç”¨å¯¼å…¥ç±»å‹ä»å…¶å®ƒæ–‡ä»¶ä¸­å¯¼å…¥å£°æ˜ã€‚ è¿™ä¸ªè¯­æ³•æ˜¯ `TypeScript` ç‰¹æœ‰çš„ï¼Œä¸ `JSDoc` æ ‡å‡†ä¸åŒï¼š\n\n```typescript\n/**\n * @param p { import(\"./a\").Pet }\n */\nfunction walk(p) {\n  console.log(`Walking ${p.name}...`);\n}\n```\n\n> å¯¼å…¥ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ç±»å‹åˆ«åå£°æ˜ä¸­ï¼š\n\n```typescript\n/**\n * @typedef Pet { import(\"./a\").Pet }\n */\n\n/**\n * @type {Pet}\n */\nvar myPet;\nmyPet.name;\n```\n\n> å¯¼å…¥ç±»å‹å¯ä»¥ç”¨åœ¨ä»æ¨¡å—ä¸­å¾—åˆ°ä¸€ä¸ªå€¼çš„ç±»å‹ã€‚\n\n```typescript\n/**\n * @type {typeof import(\"./a\").x }\n */\nvar x = require(\"./a\").x;\n```\n\n#### (4) [@param ](/param) å’Œ [@returns ](/returns)\n\n> `@param` è¯­æ³• å’Œ `@type` ç›¸åŒï¼Œä½†å¢åŠ äº†ä¸€ä¸ªå‚æ•°åã€‚ ä½¿ç”¨ `[]` å¯ä»¥æŠŠå‚æ•°å£°æ˜ä¸ºå¯é€‰çš„ï¼š\n\n```typescript\n// Parameters may be declared in a variety of syntactic forms\n/**\n * @param {string}  p1 - A string param.\n * @param {string=} p2 - An optional param (Closure syntax)\n * @param {string} [p3] - Another optional param (JSDoc syntax).\n * @param {string} [p4=\"test\"] - An optional param with a default value\n * @return {string} This is the result\n */\nfunction stringsStringStrings(p1, p2, p3, p4) {\n  // TODO\n}\n```\n\n> å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š\n\n```typescript\n/**\n * @return {PromiseLike<string>}\n */\nfunction ps() {}\n\n/**\n * @returns {{ a: string, b: number }} - May use '@returns' as well as '@return'\n */\nfunction ab() {}\n```\n\n#### (5) @typedef, @callback, å’Œ [@param ](/param)\n\n> `@typedef` å¯ä»¥ç”¨æ¥å£°æ˜å¤æ‚ç±»å‹ã€‚å’Œ `@param` ç±»ä¼¼çš„è¯­æ³•ã€‚\n\n```typescript\n/**\n * @typedef {Object} SpecialType - creates a new type named 'SpecialType'\n * @property {string} prop1 - a string property of SpecialType\n * @property {number} prop2 - a number property of SpecialType\n * @property {number=} prop3 - an optional number property of SpecialType\n * @prop {number} [prop4] - an optional number property of SpecialType\n * @prop {number} [prop5=42] - an optional number property of SpecialType with default\n */\n/** @type {SpecialType} */\nvar specialTypeObject;\n```\n\n> å¯ä»¥åœ¨ç¬¬ä¸€è¡Œä¸Šä½¿ç”¨ `object` æˆ– `Object`ã€‚\n\n```typescript\n/**\n * @typedef {object} SpecialType1 - creates a new type named 'SpecialType'\n * @property {string} prop1 - a string property of SpecialType\n * @property {number} prop2 - a number property of SpecialType\n * @property {number=} prop3 - an optional number property of SpecialType\n */\n/** @type {SpecialType1} */\nvar specialTypeObject1;\n```\n\n> `@param` å…è®¸ä½¿ç”¨ç›¸ä¼¼çš„è¯­æ³•ã€‚ æ³¨æ„ï¼ŒåµŒå¥—çš„å±æ€§åå¿…é¡»ä½¿ç”¨å‚æ•°ååšä¸ºå‰ç¼€ï¼š\n\n```typescript\n/**\n * @param {Object} options - The shape is the same as SpecialType above\n * @param {string} options.prop1\n * @param {number} options.prop2\n * @param {number=} options.prop3\n * @param {number} [options.prop4]\n * @param {number} [options.prop5=42]\n */\nfunction special(options) {\n  return (options.prop4 || 1001) + options.prop5;\n}\n```\n\n> `@callback` ä¸ `@typedef` ç›¸ä¼¼ï¼Œä½†å®ƒæŒ‡å®šå‡½æ•°ç±»å‹è€Œä¸æ˜¯å¯¹è±¡ç±»å‹ï¼š\n\n```typescript\n/**\n * @callback Predicate\n * @param {string} data\n * @param {number} [index]\n * @returns {boolean}\n */\n/** @type {Predicate} */\nconst ok = s => !(s.length % 2);\n```\n\n> å½“ç„¶ï¼Œæ‰€æœ‰è¿™äº›ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ `TypeScript` çš„è¯­æ³• `@typedef` åœ¨ä¸€è¡Œä¸Šå£°æ˜ï¼š\n\n```typescript\n/** @typedef {{ prop1: string, prop2: string, prop3?: number }} SpecialType */\n/** @typedef {(data: string, index?: number) => boolean} Predicate */\n```\n\n#### (6) [@template ](/template)\n\n> ä½¿ç”¨ `@template` å£°æ˜æ³›å‹ï¼š\n\n```typescript\n/**\n * @template T\n * @param {T} p1 - A generic parameter that flows through to the return type\n * @return {T}\n */\nfunction id(x) {\n  return x;\n}\n```\n\n> ç”¨é€—å·æˆ–å¤šä¸ªæ ‡è®°æ¥å£°æ˜å¤šä¸ªç±»å‹å‚æ•°ï¼š\n\n```typescript\n/**\n * @template T,U,V\n * @template W,X\n */\n```\n\n> è¿˜å¯ä»¥åœ¨å‚æ•°åå‰æŒ‡å®šç±»å‹çº¦æŸã€‚åªæœ‰åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ç±»å‹å‚æ•°ä¼šè¢«çº¦æŸ:\n\n```typescript\n/**\n * @template {string} K - K must be a string or string literal\n * @template {{ serious(): string }} Seriousalizable - must have a serious method\n * @param {K} key\n * @param {Seriousalizable} object\n */\nfunction seriousalize(key, object) {\n  // ????\n}\n```\n\n#### (7) [@constructor ](/constructor)\n\n> ç¼–è¯‘å™¨é€šè¿‡ `this` å±æ€§çš„èµ‹å€¼æ¥æ¨æ–­æ„é€ å‡½æ•°, ä½†ä½ å¯ä»¥è®©æ£€æŸ¥æ›´ä¸¥æ ¼æç¤ºæ›´å‹å¥½, ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ª `@constructor` æ ‡è®°:\n\n```typescript\n/**\n * @constructor\n * @param {number} data\n */\nfunction C(data) {\n  this.size = 0;\n  this.initialize(data); // Should error, initializer expects a string\n}\n/**\n * @param {string} s\n */\nC.prototype.initialize = function (s) {\n  this.size = s.length;\n};\n\nvar c = new C(0);\nvar result = C(1); // C should only be called with new\n```\n\n> é€šè¿‡ `@constructor`, `this` å°†åœ¨æ„é€ å‡½æ•°`C`é‡Œè¢«æ£€æŸ¥ï¼Œå› æ­¤ä½ åœ¨ `initialize` æ–¹æ³•é‡Œå¾—åˆ°ä¸€ä¸ªæç¤ºï¼Œå¦‚æœä½ ä¼ å…¥ä¸€ä¸ªæ•°å­—ä½ è¿˜å°†å¾—åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºã€‚å¦‚æœä½ ç›´æ¥è°ƒç”¨`C`è€Œä¸æ˜¯æ„é€ å®ƒï¼Œä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚\n\n> ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€é‚£äº›æ—¢èƒ½æ„é€ ä¹Ÿèƒ½ç›´æ¥è°ƒç”¨çš„æ„é€ å‡½æ•°ä¸èƒ½ä½¿ç”¨ `@constructor`ã€‚\n\n#### (8) [@this ](/this)\n\n> ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¥æ¨æ–­å‡º `this` çš„ç±»å‹ã€‚ä½†ä½ å¯ä»¥ä½¿ç”¨ `@this` æ¥æ˜ç¡®æŒ‡å®šå®ƒçš„ç±»å‹ï¼š\n\n```typescript\n/**\n * @this {HTMLElement}\n * @param {*} e\n */\nfunction callbackForLater(e) {\n  this.clientHeight = parseInt(e); // should be fine!\n}\n```\n\n#### (9) [@extends ](/extends)\n\n> å½“ `JavaScript` ç±»ç»§æ‰¿äº†ä¸€ä¸ªåŸºç±», æ— å¤„æŒ‡å®šç±»å‹å‚æ•°çš„ç±»å‹, è€Œ `@extends` æ ‡è®°æä¾›äº†è¿™æ ·ä¸€ç§æ–¹å¼:\n\n```typescript\n/**\n * @template T\n * @extends {Set<T>}\n */\nclass SortableSet extends Set {\n  // ...\n}\n```\n\n> æ³¨æ„ `@extends` åªä½œç”¨äºç±»ã€‚å½“å‰ï¼Œæ— æ³•å®ç°æ„é€ å‡½æ•°ç»§æ‰¿ç±»çš„æƒ…å†µã€‚\n\n#### (10) [@enum ](/enum)\n\n> `@enum` æ ‡è®°å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡å­—é¢é‡, å®ƒçš„æˆå‘˜éƒ½æœ‰ç¡®å®šçš„ç±»å‹ã€‚ä¸åŒäº `JavaScript` é‡Œå¤§å¤šæ•°çš„å¯¹è±¡å­—é¢é‡ï¼Œå®ƒä¸å…è®¸æ·»åŠ é¢å¤–æˆå‘˜ã€‚\n\n```typescript\n/** @enum {number} */\nconst JSDocState = {\n  BeginningOfLine: 0,\n  SawAsterisk: 1,\n  SavingComments: 2\n};\n```\n\n> æ³¨æ„ `@enum` ä¸ `TypeScript` çš„ `@enum` å¤§ä¸ç›¸åŒ, å®ƒæ›´åŠ ç®€å•ã€‚ç„¶è€Œï¼Œä¸åŒäº `TypeScript` çš„æšä¸¾, `@enum` å¯ä»¥æ˜¯ä»»ä½•ç±»å‹:\n\n```typescript\n/** @enum {function(number): number} */\nconst Math = {\n  add1: n => n + 1,\n  id: n => -n,\n  sub1: n => n - 1\n};\n```\n\n#### (11) æ›´å¤šç¤ºä¾‹\n\n```tsx\nvar someObj = {\n  /**\n   * @param {string} param1 - Docs on property assignments work\n   */\n  x: function (param1) {}\n};\n\n/**\n * As do docs on variable assignments\n * @return {Window}\n */\nlet someFunc = function () {};\n\n/**\n * And class methods\n * @param {string} greeting The greeting to use\n */\nFoo.prototype.sayHi = greeting => console.log(\"Hi!\");\n\n/**\n * And arrow functions expressions\n * @param {number} x - A multiplier\n */\nlet myArrow = x => x * x;\n\n/**\n * Which means it works for stateless function components in JSX too\n * @param {{a: string, b: number}} test - Some param\n */\nvar sfc = test => <div>{test.a.charAt(0)}</div>;\n\n/**\n * A parameter can be a class constructor, using Closure syntax.\n *\n * @param {{new(...args: any[]): object}} C - The class to register\n */\nfunction registerClass(C) {}\n\n/**\n * @param {...string} p1 - A 'rest' arg (array) of strings. (treated as 'any')\n */\nfunction fn10(p1) {}\n\n/**\n * @param {...string} p1 - A 'rest' arg (array) of strings. (treated as 'any')\n */\nfunction fn9(p1) {\n  return p1.join();\n}\n```\n\n#### (12) å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\n\n> åœ¨å€¼ç©ºé—´ä¸­å°†å¯¹è±¡è§†ä¸ºç±»å‹æ˜¯ä¸å¯ä»¥çš„, é™¤éå¯¹è±¡åˆ›å»ºäº†ç±»å‹, å¦‚æ„é€ å‡½æ•°ã€‚\n\n```typescript\nfunction aNormalFunction() {}\n/**\n * @type {aNormalFunction}\n */\nvar wrong;\n/**\n * Use 'typeof' instead:\n * @type {typeof aNormalFunction}\n */\nvar right;\n```\n\n> å¯¹è±¡å­—é¢é‡å±æ€§ä¸Šçš„ `=` åç¼€ä¸èƒ½æŒ‡å®šè¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„:\n\n```typescript\n/**\n * @type {{ a: string, b: number= }}\n */\nvar wrong;\n/**\n * Use postfix question on the property name instead:\n * @type {{ a: string, b?: number }}\n */\nvar right;\n```\n\n> `Nullable` ç±»å‹åªåœ¨å¯ç”¨äº† `strictNullChecks` æ£€æŸ¥æ—¶æ‰å¯ä½œç”¨:\n\n```typescript\n/**\n * @type {?number}\n * With strictNullChecks: true -- number | null\n * With strictNullChecks: off  -- number\n */\nvar nullable;\n```\n\n> `Non-nullable` ç±»å‹æ²¡æœ‰æ„ä¹‰, ä»¥å…¶åŸç±»å‹å¯¹å¾…:\n\n```typescript\n/**\n * @type {!number}\n * Just has type number\n */\nvar normal;\n```\n\n> ä¸åŒäº `JSDoc` ç±»å‹ç³»ç»Ÿ, `TypeScript` åªå…è®¸å°†ç±»å‹æ ‡è®°ä¸ºåŒ…ä¸åŒ…å« `null`ã€‚`Non-nullable` -- å¦‚æœå¯ç”¨äº† `strictNullChecks`ï¼Œé‚£ä¹ˆ `number` æ˜¯ `énull` çš„ã€‚ å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œé‚£ä¹ˆ `number` æ˜¯å¯ä»¥ä¸º `null` çš„ã€‚\n","slug":"å‰ç«¯/TypeScript æ–‡æ¡£","published":1,"updated":"2021-04-07T07:30:04.867Z","_id":"ckn7476az003fyx7ybx8ffg98","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"ä¸€ã€-åŸºç¡€ç±»å‹\"><a href=\"#ä¸€ã€-åŸºç¡€ç±»å‹\" class=\"headerlink\" title=\"ä¸€ã€ åŸºç¡€ç±»å‹\"></a>ä¸€ã€ åŸºç¡€ç±»å‹</h2><h3 id=\"1-1-ç±»å‹æ–­è¨€\"><a href=\"#1-1-ç±»å‹æ–­è¨€\" class=\"headerlink\" title=\"1.1 ç±»å‹æ–­è¨€\"></a>1.1 ç±»å‹æ–­è¨€</h3><blockquote>\n<p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” <code>TypeScript</code> æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šçš„çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸å°½å…´ç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li><p>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼</p>\n</li>\n<li><p>ç¬¬ä¸€ç§ï¼šå°–æ‹¬å·è¯­æ³• (å½“åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨ <code>JSX</code> æ—¶ï¼Œåªæœ‰ <code>as</code> è¯­è¨€æ–­è¨€æ˜¯è¢«å…è®¸çš„)</p>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> someValue: <span class=\"built_in\">any</span> = <span class=\"string\">&quot;this is a string&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strLength: <span class=\"built_in\">number</span> = (&lt;<span class=\"built_in\">string</span>&gt;someValue).length;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬äºŒç§ï¼š<code>as</code> è¯­æ³•</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> _someValue: <span class=\"built_in\">any</span> = <span class=\"string\">&quot;this is a string&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _strLength: <span class=\"built_in\">number</span> = (_someValue <span class=\"keyword\">as</span> <span class=\"built_in\">string</span>).length;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-åŸºç¡€ç±»å‹\"><a href=\"#1-2-åŸºç¡€ç±»å‹\" class=\"headerlink\" title=\"1.2 åŸºç¡€ç±»å‹\"></a>1.2 åŸºç¡€ç±»å‹</h3><h4 id=\"1-2-1-å¸ƒå°”å€¼\"><a href=\"#1-2-1-å¸ƒå°”å€¼\" class=\"headerlink\" title=\"1.2.1 å¸ƒå°”å€¼\"></a>1.2.1 å¸ƒå°”å€¼</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isDone: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-2-æ•°å­—\"><a href=\"#1-2-2-æ•°å­—\" class=\"headerlink\" title=\"1.2.2 æ•°å­—\"></a>1.2.2 æ•°å­—</h4><blockquote>\n<p>ä¸ <code>javascript</code> ä¸€æ ·ï¼Œ<code>TypeScript</code> é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ <code>number</code>ã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œ <code>TypeScript</code> è¿˜æ”¯æŒ <code>ECMA2015</code> ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> decLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> hexLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">0xf00d</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> binaryLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">0b1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> octalLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">0o744</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-3-å­—ç¬¦ä¸²\"><a href=\"#1-2-3-å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"1.2.3 å­—ç¬¦ä¸²\"></a>1.2.3 å­—ç¬¦ä¸²</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> strName: <span class=\"built_in\">string</span> = <span class=\"string\">&quot;bob&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-4-æ•°ç»„\"><a href=\"#1-2-4-æ•°ç»„\" class=\"headerlink\" title=\"1.2.4 æ•°ç»„\"></a>1.2.4 æ•°ç»„</h4><blockquote>\n<p><code>TypeScript</code> åƒ <code>JavaScript</code> ä¸€æ ·å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ã€‚æœ‰ä¸¤ç§æ–¹æ³•å®šä¹‰æ•°ç»„ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¬¬ä¸€ç§ï¼šå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š <code>[]</code>;</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list1: <span class=\"built_in\">number</span>[] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬äºŒç§ï¼šä½¿ç”¨æ•°ç»„æ³›å‹, <code>Array&lt;å…ƒç´ ç±»å‹&gt;</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list2: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt; = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-5-å…ƒç»„-Tuple\"><a href=\"#1-2-5-å…ƒç»„-Tuple\" class=\"headerlink\" title=\"1.2.5 å…ƒç»„ Tuple\"></a>1.2.5 å…ƒç»„ Tuple</h4><ul>\n<li>å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>];</span><br><span class=\"line\">x = [<span class=\"string\">&quot;hello&quot;</span>, <span class=\"number\">10</span>]; <span class=\"comment\">// =&gt; Ok</span></span><br><span class=\"line\">x = [<span class=\"number\">10</span>, <span class=\"string\">&quot;hello&quot;</span>]; <span class=\"comment\">// =&gt; Error</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(x[<span class=\"number\">0</span>].substr(<span class=\"number\">1</span>)); <span class=\"comment\">// =&gt; Ok</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x[<span class=\"number\">1</span>].substr(<span class=\"number\">1</span>)); <span class=\"comment\">// =&gt; Error</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x[<span class=\"number\">3</span>] = <span class=\"string\">&quot;world&quot;</span>; <span class=\"comment\">// Ok, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x[<span class=\"number\">5</span>].toString()); <span class=\"comment\">// Ok, &quot;string&quot;å’Œ&quot;number&quot;éƒ½æœ‰toStringæ–¹æ³•</span></span><br><span class=\"line\">x[<span class=\"number\">6</span>] = <span class=\"literal\">true</span>; <span class=\"comment\">// Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-6-æšä¸¾\"><a href=\"#1-2-6-æšä¸¾\" class=\"headerlink\" title=\"1.2.6 æšä¸¾\"></a>1.2.6 æšä¸¾</h4><ul>\n<li><code>enum</code> ç±»å‹æ˜¯å¯¹ <code>JavaScript</code> æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚åƒ <code>C#</code> ç­‰å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color &#123;</span><br><span class=\"line\">  Red,</span><br><span class=\"line\">  Green,</span><br><span class=\"line\">  Blue</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c: Color = Color.Green;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä» <code>0</code> å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color1 &#123;</span><br><span class=\"line\">  Red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Green,</span><br><span class=\"line\">  Blue</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c1: Color1 = Color1.Green;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ–è€…å…¨éƒ¨é‡‡ç”¨èµ‹å€¼</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color2 &#123;</span><br><span class=\"line\">  Red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Green = <span class=\"number\">2</span>,</span><br><span class=\"line\">  Blue = <span class=\"number\">4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c2: Color2 = Color2.Green;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color3 &#123;</span><br><span class=\"line\">  Red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Green,</span><br><span class=\"line\">  Blue</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> colorName: <span class=\"built_in\">string</span> = Color3[<span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(colorName);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-7-Any\"><a href=\"#1-2-7-Any\" class=\"headerlink\" title=\"1.2.7 Any\"></a>1.2.7 Any</h4><ul>\n<li>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹åº“ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>any</code> ç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> notSure: <span class=\"built_in\">any</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\">notSure = <span class=\"string\">&quot;maybe a string instead&quot;</span>;</span><br><span class=\"line\">notSure = <span class=\"literal\">false</span>; <span class=\"comment\">// Ok</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åœ¨å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹å†™çš„æ—¶å€™ï¼Œ<code>any</code> ç±»å‹æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©åœ°åŒ…å«æˆ–ç§»é™¤ç±»å‹æ£€æŸ¥ã€‚ä½ å¯èƒ½è®¤ä¸º <code>Object</code> æœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒåœ¨å…¶ä»–è¯­è¨€ä¸­é‚£æ ·ã€‚ä½†æ˜¯ <code>Object</code> ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™ä»–èµ‹ä»»æ„å€¼ï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä½¿å®ƒçœŸæœ‰è¿™äº›æ–¹æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> notSure1: <span class=\"built_in\">any</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\">notSure1.ifItExists(); <span class=\"comment\">// Ok</span></span><br><span class=\"line\">notSure1.toFixed(); <span class=\"comment\">// Ok</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> prettySure: <span class=\"built_in\">Object</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"comment\">// prettySure.toFixed(); // Error, Property &#x27;toFixed&#x27; doesn&#x27;t exist on type &#x27;Object&#x27;.</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®ç±»å‹æ—¶ï¼Œ<code>any</code> ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list: <span class=\"built_in\">any</span>[] = [<span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"string\">&quot;free&quot;</span>];</span><br><span class=\"line\">list[<span class=\"number\">1</span>] = <span class=\"number\">100</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-8-Void\"><a href=\"#1-2-8-Void\" class=\"headerlink\" title=\"1.2.8 Void\"></a>1.2.8 Void</h4><ul>\n<li>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ<code>void</code> ç±»å‹åƒæ˜¯ä¸ <code>any</code> ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ <code>void</code>ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">warnUser</span>(<span class=\"params\"></span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;This is my warning message&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å£°æ˜ä¸€ä¸ª <code>void</code> ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ <code>undefined</code> å’Œ <code>null</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> unusbale: <span class=\"built_in\">void</span> = <span class=\"literal\">undefined</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-9-Null-å’Œ-Undefined\"><a href=\"#1-2-9-Null-å’Œ-Undefined\" class=\"headerlink\" title=\"1.2.9 Null å’Œ Undefined\"></a>1.2.9 Null å’Œ Undefined</h4><ul>\n<li><code>TypeScript</code> é‡Œï¼Œ<code>undefined</code> å’Œ <code>null</code> ä¸¤è€…å„æœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš <code>undefined</code> å’Œ <code>null</code>ã€‚å’Œ <code>void</code> ç›¸ä¼¼ï¼Œå®ƒä»¬æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> u: <span class=\"literal\">undefined</span> = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> n: <span class=\"literal\">null</span> = <span class=\"literal\">null</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é»˜è®¤æƒ…å†µä¸‹ <code>null</code> å’Œ <code>undefined</code> æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ <code>null</code> å’Œ <code>undefined</code> èµ‹å€¼ç»™ <code>number</code> ç±»å‹çš„å˜é‡ã€‚</li>\n<li>ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº†ä¸€ä¸ª <code>--strictNullChecks</code> æ ‡è®°ï¼Œ<code>null</code> å’Œ <code>undefined</code> åªèƒ½èµ‹å€¼ç»™ <code>void</code> å’Œå®ƒä»¬å„è‡ªã€‚è¿™èƒ½é¿å…å¾ˆå¤šå¸¸è§çš„é—®é¢˜ã€‚ä¹Ÿè®¸åœ¨æŸå¤„ä½ æƒ³ä¼ å…¥ä¸€ä¸ª <code>string</code> æˆ– <code>null</code> æˆ– <code>undefined</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ <code>string | null | undefined</code>ã€‚</li>\n</ul>\n<h4 id=\"1-2-10-Never\"><a href=\"#1-2-10-Never\" class=\"headerlink\" title=\"1.2.10 Never\"></a>1.2.10 Never</h4><ul>\n<li><code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›</li>\n<li>å˜é‡ä¹Ÿå¯èƒ½æ˜¯ <code>never</code> ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚</li>\n<li><code>never</code> ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›</li>\n</ul>\n<blockquote>\n<p>ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ <code>never</code> çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ <code>never</code> ç±»å‹(é™¤äº† <code>never</code> æœ¬èº«ä¹‹å¤–)ã€‚å³ä½¿ <code>any</code> ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ <code>never</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">error</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>): <span class=\"title\">never</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(message);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºnever</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> error(<span class=\"string\">&quot;Something failed&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">infiniteLoop</span>(<span class=\"params\"></span>): <span class=\"title\">never</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-11-Object\"><a href=\"#1-2-11-Object\" class=\"headerlink\" title=\"1.2.11 Object\"></a>1.2.11 Object</h4><ul>\n<li><code>Object</code> è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ <code>number</code>, <code>string</code>, <code>boolean</code>, <code>symbol</code>, <code>null</code> æˆ– <code>undefined</code> ä¹‹å¤–çš„ç±»å‹ã€‚</li>\n<li>ä½¿ç”¨ <code>Object</code> ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ <code>Object.create</code> è¿™æ ·çš„ <code>API</code>ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">create</span>(<span class=\"params\">o: <span class=\"built_in\">object</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">create(&#123; <span class=\"attr\">prop</span>: <span class=\"number\">0</span> &#125;); <span class=\"comment\">// Ok</span></span><br><span class=\"line\">create(<span class=\"literal\">null</span>); <span class=\"comment\">// Ok</span></span><br><span class=\"line\">create(<span class=\"number\">42</span>); <span class=\"comment\">//Error</span></span><br><span class=\"line\">create(<span class=\"string\">&quot;string&quot;</span>); <span class=\"comment\">// Error</span></span><br><span class=\"line\">create(<span class=\"literal\">false</span>); <span class=\"comment\">// Error</span></span><br><span class=\"line\">create(<span class=\"literal\">undefined</span>); <span class=\"comment\">// Error</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒã€å˜é‡å£°æ˜\"><a href=\"#äºŒã€å˜é‡å£°æ˜\" class=\"headerlink\" title=\"äºŒã€å˜é‡å£°æ˜\"></a>äºŒã€å˜é‡å£°æ˜</h2><h3 id=\"2-1-ä»‹ç»\"><a href=\"#2-1-ä»‹ç»\" class=\"headerlink\" title=\"2.1 ä»‹ç»\"></a>2.1 ä»‹ç»</h3><blockquote>\n<p><code>let</code> å’Œ <code>const</code> æ˜¯ <code>JavaScript</code> é‡Œç›¸å¯¹è¾ƒæ–°çš„å˜é‡å£°æ˜æ–¹å¼ã€‚ åƒæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ï¼Œ <code>let</code> åœ¨å¾ˆå¤šæ–¹é¢ä¸ <code>var</code> æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©å¤§å®¶é¿å…åœ¨ <code>JavaScript</code> é‡Œå¸¸è§ä¸€äº›é—®é¢˜ã€‚ <code>const</code> æ˜¯å¯¹ <code>let</code> çš„ä¸€ä¸ªå¢å¼ºï¼Œå®ƒèƒ½é˜»æ­¢å¯¹ä¸€ä¸ªå˜é‡å†æ¬¡èµ‹å€¼ã€‚<br>å› ä¸º <code>TypeScript</code> æ˜¯ <code>JavaScript</code> çš„è¶…é›†ï¼Œæ‰€ä»¥å®ƒæœ¬èº«å°±æ”¯æŒ <code>let</code> å’Œ <code>const</code> ã€‚ ä¸‹é¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜è¿™äº›æ–°çš„å£°æ˜æ–¹å¼ä»¥åŠä¸ºä»€ä¹ˆæ¨èä½¿ç”¨å®ƒä»¬æ¥ä»£æ›¿ <code>var</code>ã€‚<br>å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ <code>JavaScript</code> æ—¶æ²¡æœ‰ç‰¹åˆ«åœ¨æ„ï¼Œé‚£ä¹ˆè¿™èŠ‚å†…å®¹ä¼šå”¤èµ·ä½ çš„å›å¿†ã€‚ å¦‚æœä½ å·²ç»å¯¹ <code>var</code> å£°æ˜çš„æ€ªå¼‚ä¹‹å¤„äº†å¦‚æŒ‡æŒï¼Œé‚£ä¹ˆä½ å¯ä»¥è½»æ¾åœ°ç•¥è¿‡è¿™èŠ‚ã€‚</p>\n</blockquote>\n<h3 id=\"2-2-var-å£°æ˜\"><a href=\"#2-2-var-å£°æ˜\" class=\"headerlink\" title=\"2.2 var å£°æ˜\"></a>2.2 var å£°æ˜</h3><blockquote>\n<p>ä¸€ç›´ä»¥æ¥æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ <code>var</code> å…³é”®å­—å®šä¹‰ <code>JavaScript</code> å˜é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¤§å®¶éƒ½èƒ½ç†è§£ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸º <code>a</code> å€¼ä¸º <code>10</code> çš„å˜é‡ã€‚<br>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> message = <span class=\"string\">&quot;Hello, world!&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒå‡½æ•°å†…éƒ¨è®¿é—®ç›¸åŒçš„å˜é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> b = a + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> g = f();</span><br><span class=\"line\">g(); <span class=\"comment\">// returns 11;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ<code>g</code> å¯ä»¥è·å–åˆ° <code>f</code> å‡½æ•°é‡Œå®šä¹‰çš„ <code>a</code> å˜é‡ã€‚ æ¯å½“ <code>g</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒéƒ½å¯ä»¥è®¿é—®åˆ° <code>f</code> é‡Œçš„ <code>a</code> å˜é‡ã€‚ å³ä½¿å½“ <code>g</code> åœ¨ <code>f</code> å·²ç»æ‰§è¡Œå®Œåæ‰è¢«è°ƒç”¨ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®åŠä¿®æ”¹ <code>a</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  a = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> b = g();</span><br><span class=\"line\">  a = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> b;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f(); <span class=\"comment\">// returns 2</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-ä½œç”¨åŸŸè§„åˆ™\"><a href=\"#2-3-ä½œç”¨åŸŸè§„åˆ™\" class=\"headerlink\" title=\"2.3 ä½œç”¨åŸŸè§„åˆ™\"></a>2.3 ä½œç”¨åŸŸè§„åˆ™</h3><blockquote>\n<p>å¯¹äºç†Ÿæ‚‰å…¶å®ƒè¯­è¨€çš„äººæ¥è¯´ï¼Œ<code>var</code> å£°æ˜æœ‰äº›å¥‡æ€ªçš„ä½œç”¨åŸŸè§„åˆ™ã€‚ çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">shouldInitialize: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (shouldInitialize) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">10</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f(<span class=\"literal\">true</span>); <span class=\"comment\">// returns &#x27;10&#x27;</span></span><br><span class=\"line\">f(<span class=\"literal\">false</span>); <span class=\"comment\">// returns &#x27;undefined&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ‰äº›è¯»è€…å¯èƒ½è¦å¤šçœ‹å‡ éè¿™ä¸ªä¾‹å­ã€‚ å˜é‡ <code>x</code> æ˜¯å®šä¹‰åœ¨ <code>if</code> è¯­å¥é‡Œé¢_ï¼Œä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥åœ¨è¯­å¥çš„å¤–é¢è®¿é—®å®ƒã€‚ è¿™æ˜¯å› ä¸º <code>var</code> å£°æ˜å¯ä»¥åœ¨åŒ…å«å®ƒçš„å‡½æ•°ï¼Œæ¨¡å—ï¼Œå‘½åç©ºé—´æˆ–å…¨å±€ä½œç”¨åŸŸå†…éƒ¨ä»»ä½•ä½ç½®è¢«è®¿é—®ï¼ˆæˆ‘ä»¬åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼ŒåŒ…å«å®ƒçš„ä»£ç å—å¯¹æ­¤æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ æœ‰äº›äººç§°æ­¤ä¸º <code>var</code> ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°å‚æ•°ä¹Ÿä½¿ç”¨å‡½æ•°ä½œç”¨åŸŸã€‚<br>è¿™äº›ä½œç”¨åŸŸè§„åˆ™å¯èƒ½ä¼šå¼•å‘ä¸€äº›é”™è¯¯ã€‚ å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼Œå¤šæ¬¡å£°æ˜åŒä¸€ä¸ªå˜é‡å¹¶ä¸ä¼šæŠ¥é”™ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sumMatrix</span>(<span class=\"params\">matrix: <span class=\"built_in\">number</span>[][]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentRow = matrix[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; currentRow.length; i++) &#123;</span><br><span class=\"line\">      sum += currentRow[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå¾ˆå®¹æ˜“çœ‹å‡ºä¸€äº›é—®é¢˜ï¼Œé‡Œå±‚çš„ <code>for</code> å¾ªç¯ä¼šè¦†ç›–å˜é‡ <code>i</code>ï¼Œå› ä¸ºæ‰€æœ‰ <code>i</code> éƒ½å¼•ç”¨ç›¸åŒçš„å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ æœ‰ç»éªŒçš„å¼€å‘è€…ä»¬å¾ˆæ¸…æ¥šï¼Œè¿™äº›é—®é¢˜å¯èƒ½åœ¨ä»£ç å®¡æŸ¥æ—¶æ¼æ‰ï¼Œå¼•å‘æ— ç©·çš„éº»çƒ¦ã€‚</p>\n</blockquote>\n<h3 id=\"2-4-æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\"><a href=\"#2-4-æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\" class=\"headerlink\" title=\"2.4 æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\"></a>2.4 æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„</h3><blockquote>\n<p>å¿«é€Ÿçš„çŒœä¸€ä¸‹ä¸‹é¢çš„ä»£ç ä¼šè¿”å›ä»€ä¹ˆï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i);</span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span> * i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä»‹ç»ä¸€ä¸‹ï¼Œ<code>setTimeout</code> ä¼šåœ¨è‹¥å¹²æ¯«ç§’çš„å»¶æ—¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç­‰å¾…å…¶å®ƒä»£ç æ‰§è¡Œå®Œæ¯•ï¼‰ã€‚<br>å¥½å§ï¼Œçœ‹ä¸€ä¸‹ç»“æœï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¾ˆå¤š <code>JavaScript</code> ç¨‹åºå‘˜å¯¹è¿™ç§è¡Œä¸ºå·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å¦‚æœä½ å¾ˆä¸è§£ï¼Œä½ å¹¶ä¸æ˜¯ä¸€ä¸ªäººã€‚ å¤§å¤šæ•°äººæœŸæœ›è¾“å‡ºç»“æœæ˜¯è¿™æ ·ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æåˆ°çš„æ•è·å˜é‡å—ï¼Ÿ<br>æˆ‘ä»¬ä¼ ç»™ <code>setTimeout</code> çš„æ¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼å®é™…ä¸Šéƒ½å¼•ç”¨äº†ç›¸åŒä½œç”¨åŸŸé‡Œçš„åŒä¸€ä¸ª <code>i</code>ã€‚<br>è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ€è€ƒä¸€ä¸‹è¿™æ˜¯ä¸ºä»€ä¹ˆã€‚ <code>setTimeout</code> åœ¨è‹¥å¹²æ¯«ç§’åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯åœ¨ <code>for</code> å¾ªç¯ç»“æŸåã€‚ <code>for</code> å¾ªç¯ç»“æŸåï¼Œ<code>i</code> çš„å€¼ä¸º <code>10</code>ã€‚ æ‰€ä»¥å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šæ‰“å°å‡º <code>10ï¼</code><br>ä¸€ä¸ªé€šå¸¸çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆ<code>IIFE</code>ï¼‰æ¥æ•è·æ¯æ¬¡è¿­ä»£æ—¶ <code>i</code> çš„å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// capture the current state of &#x27;i&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\">// by invoking a function with its current value</span></span><br><span class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(i);</span><br><span class=\"line\">    &#125;, <span class=\"number\">100</span> * i);</span><br><span class=\"line\">  &#125;)(i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ç§å¥‡æ€ªçš„å½¢å¼æˆ‘ä»¬å·²ç»å¸ç©ºè§æƒ¯äº†ã€‚ å‚æ•° <code>i</code> ä¼šè¦†ç›– <code>for</code> å¾ªç¯é‡Œçš„ iï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬èµ·äº†åŒæ ·çš„åå­—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ€ä¹ˆæ”¹ <code>for</code> å¾ªç¯ä½“é‡Œçš„ä»£ç ã€‚</p>\n</blockquote>\n<h3 id=\"2-5-let-å£°æ˜\"><a href=\"#2-5-let-å£°æ˜\" class=\"headerlink\" title=\"2.5 let å£°æ˜\"></a>2.5 let å£°æ˜</h3><blockquote>\n<p>ç°åœ¨ä½ å·²ç»çŸ¥é“äº† <code>var</code> å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè¿™æ°å¥½è¯´æ˜äº†ä¸ºä»€ä¹ˆç”¨ <code>let</code> è¯­å¥æ¥å£°æ˜å˜é‡ã€‚ é™¤äº†åå­—ä¸åŒå¤–ï¼Œ let ä¸ <code>var</code> çš„å†™æ³•ä¸€è‡´ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> hello = <span class=\"string\">&quot;Hello!&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸»è¦çš„åŒºåˆ«ä¸åœ¨è¯­æ³•ä¸Šï¼Œè€Œæ˜¯è¯­ä¹‰ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šæ·±å…¥ç ”ç©¶ã€‚</p>\n</blockquote>\n<h3 id=\"2-6-å—ä½œç”¨åŸŸ\"><a href=\"#2-6-å—ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"2.6 å—ä½œç”¨åŸŸ\"></a>2.6 å—ä½œç”¨åŸŸ</h3><blockquote>\n<p>å½“ç”¨ <code>let</code> å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå®ƒä½¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸæˆ–å—ä½œç”¨åŸŸã€‚ ä¸åŒäºä½¿ç”¨ <code>var</code> å£°æ˜çš„å˜é‡é‚£æ ·å¯ä»¥åœ¨åŒ…å«å®ƒä»¬çš„å‡½æ•°å¤–è®¿é—®ï¼Œå—ä½œç”¨åŸŸå˜é‡åœ¨åŒ…å«å®ƒä»¬çš„å—æˆ– <code>for</code> å¾ªç¯ä¹‹å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">input: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (input) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Still okay to reference &#x27;a&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> b = a + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Error: &#x27;b&#x27; doesn&#x27;t exist here</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†<code>2</code>ä¸ªå˜é‡ <code>a</code> å’Œ <code>b</code> ã€‚ <code>a</code> çš„ä½œç”¨åŸŸæ˜¯ <code>f</code> å‡½æ•°ä½“å†…ï¼Œè€Œ <code>b</code> çš„ä½œç”¨åŸŸæ˜¯ <code>if</code> è¯­å¥å—é‡Œã€‚<br>åœ¨ <code>catch</code> è¯­å¥é‡Œå£°æ˜çš„å˜é‡ä¹Ÿå…·æœ‰åŒæ ·çš„ä½œç”¨åŸŸè§„åˆ™ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"string\">&quot;oh no!&quot;</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Oh well.&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error: &#x27;e&#x27; doesn&#x27;t exist here</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(e);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ‹¥æœ‰å—çº§ä½œç”¨åŸŸçš„å˜é‡çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸èƒ½åœ¨è¢«å£°æ˜ä¹‹å‰è¯»æˆ–å†™ã€‚ è™½ç„¶è¿™äº›å˜é‡å§‹ç»ˆâ€œå­˜åœ¨â€äºå®ƒä»¬çš„ä½œç”¨åŸŸé‡Œï¼Œä½†åœ¨ç›´åˆ°å£°æ˜å®ƒçš„ä»£ç ä¹‹å‰çš„åŒºåŸŸéƒ½å±äº æš‚æ—¶æ€§æ­»åŒºã€‚ å®ƒåªæ˜¯ç”¨æ¥è¯´æ˜æˆ‘ä»¬ä¸èƒ½åœ¨ <code>let</code> è¯­å¥ä¹‹å‰è®¿é—®å®ƒä»¬ï¼Œå¹¸è¿çš„æ˜¯ <code>TypeScript</code> å¯ä»¥å‘Šè¯‰æˆ‘ä»¬è¿™äº›ä¿¡æ¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a++; <span class=\"comment\">// illegal to use &#x27;a&#x27; before it&#x27;s declared;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨ä¸€ä¸ªæ‹¥æœ‰å—ä½œç”¨åŸŸå˜é‡è¢«å£°æ˜å‰è·å–å®ƒã€‚ åªæ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨å˜é‡å£°æ˜å‰å»è°ƒç”¨é‚£ä¸ªå‡½æ•°ã€‚ å¦‚æœç”Ÿæˆä»£ç ç›®æ ‡ä¸º <code>ES2015</code>ï¼Œç°ä»£çš„è¿è¡Œæ—¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼›ç„¶è€Œï¼Œç°ä»Š <code>TypeScript</code> æ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// okay to capture &#x27;a&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸èƒ½åœ¨&#x27;a&#x27;è¢«å£°æ˜å‰è°ƒç”¨&#x27;foo&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// è¿è¡Œæ—¶åº”è¯¥æŠ›å‡ºé”™è¯¯</span></span><br><span class=\"line\">foo();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…³äºæš‚æ—¶æ€§æ­»åŒºçš„æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹è¿™é‡Œ <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let\">Mozilla Developer Network.</a></p>\n</blockquote>\n<h3 id=\"2-7-é‡å®šä¹‰åŠå±è”½\"><a href=\"#2-7-é‡å®šä¹‰åŠå±è”½\" class=\"headerlink\" title=\"2.7 é‡å®šä¹‰åŠå±è”½\"></a>2.7 é‡å®šä¹‰åŠå±è”½</h3><blockquote>\n<p>æˆ‘ä»¬æè¿‡ä½¿ç”¨ <code>var</code> å£°æ˜æ—¶ï¼Œå®ƒä¸åœ¨ä¹ä½ å£°æ˜å¤šå°‘æ¬¡ï¼›ä½ åªä¼šå¾—åˆ° <code>1</code> ä¸ªã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæ‰€æœ‰ <code>x</code> çš„å£°æ˜å®é™…ä¸Šéƒ½å¼•ç”¨ä¸€ä¸ªç›¸åŒçš„ <code>x</code>ï¼Œå¹¶ä¸”è¿™æ˜¯å®Œå…¨æœ‰æ•ˆçš„ä»£ç ã€‚ è¿™ç»å¸¸ä¼šæˆä¸º<code>bug</code> çš„æ¥æºã€‚ å¥½çš„æ˜¯ï¼Œ <code>let</code> å£°æ˜å°±ä¸ä¼šè¿™ä¹ˆå®½æ¾äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"number\">20</span>; <span class=\"comment\">// é”™è¯¯ï¼Œä¸èƒ½åœ¨1ä¸ªä½œç”¨åŸŸé‡Œå¤šæ¬¡å£°æ˜`x</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶ä¸æ˜¯è¦æ±‚ä¸¤ä¸ªå‡æ˜¯å—çº§ä½œç”¨åŸŸçš„å£°æ˜ <code>TypeScript</code> æ‰ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯çš„è­¦å‘Šã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> x = <span class=\"number\">100</span>; <span class=\"comment\">// error: interferes with parameter declaration</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> x = <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">100</span>; <span class=\"comment\">// error: can&#x27;t have both declarations of &#x27;x&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶ä¸æ˜¯è¯´å—çº§ä½œç”¨åŸŸå˜é‡ä¸èƒ½ç”¨å‡½æ•°ä½œç”¨åŸŸå˜é‡æ¥å£°æ˜ã€‚ è€Œæ˜¯å—çº§ä½œç”¨åŸŸå˜é‡éœ€è¦åœ¨æ˜æ˜¾ä¸åŒçš„å—é‡Œå£°æ˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">condition, x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (condition) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> x = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f(<span class=\"literal\">false</span>, <span class=\"number\">0</span>); <span class=\"comment\">// returns 0</span></span><br><span class=\"line\">f(<span class=\"literal\">true</span>, <span class=\"number\">0</span>); <span class=\"comment\">// returns 100</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸€ä¸ªåµŒå¥—ä½œç”¨åŸŸé‡Œå¼•å…¥ä¸€ä¸ªæ–°åå­—çš„è¡Œä¸ºç§°åšå±è”½ã€‚ å®ƒæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå®ƒå¯èƒ½ä¼šä¸å°å¿ƒåœ°å¼•å…¥æ–°é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šè§£å†³ä¸€äº›é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨ç”¨ <code>let</code> é‡å†™ä¹‹å‰çš„ <code>sumMatrix</code> å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sumMatrix</span>(<span class=\"params\">matrix: <span class=\"built_in\">number</span>[][]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentRow = matrix[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; currentRow.length; i++) &#123;</span><br><span class=\"line\">      sum += currentRow[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¸ªç‰ˆæœ¬çš„å¾ªç¯èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œå› ä¸ºå†…å±‚å¾ªç¯çš„ i å¯ä»¥å±è”½æ‰å¤–å±‚å¾ªç¯çš„ <code>i</code>ã€‚<br>é€šå¸¸æ¥è®²åº”è¯¥é¿å…ä½¿ç”¨å±è”½ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å†™å‡ºæ¸…æ™°çš„ä»£ç ã€‚ åŒæ—¶ä¹Ÿæœ‰äº›åœºæ™¯é€‚åˆåˆ©ç”¨å®ƒï¼Œä½ éœ€è¦å¥½å¥½æ‰“ç®—ä¸€ä¸‹ã€‚</p>\n</blockquote>\n<h3 id=\"2-8-å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\"><a href=\"#2-8-å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\" class=\"headerlink\" title=\"2.8 å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\"></a>2.8 å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–</h3><blockquote>\n<p>åœ¨æˆ‘ä»¬æœ€åˆè°ˆåŠè·å–ç”¨ <code>var</code> å£°æ˜çš„å˜é‡æ—¶ï¼Œæˆ‘ä»¬ç®€ç•¥åœ°æ¢ç©¶äº†ä¸€ä¸‹åœ¨è·å–åˆ°äº†å˜é‡ä¹‹åå®ƒçš„è¡Œä¸ºæ˜¯æ€æ ·çš„ã€‚ ç›´è§‚åœ°è®²ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸæ—¶ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªå˜é‡çš„ ç¯å¢ƒã€‚ å°±ç®—ä½œç”¨åŸŸå†…ä»£ç å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒä¸å…¶æ•è·çš„å˜é‡ä¾ç„¶å­˜åœ¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">theCityThatAlwaysSleeps</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> getCity;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> city = <span class=\"string\">&quot;Seattle&quot;</span>;</span><br><span class=\"line\">    getCity = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> city;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> getCity();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ <code>city</code> çš„ç¯å¢ƒé‡Œè·å–åˆ°äº† <code>city</code> ï¼Œæ‰€ä»¥å°±ç®— if è¯­å¥æ‰§è¡Œç»“æŸåæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å®ƒã€‚<br>å›æƒ³ä¸€ä¸‹å‰é¢ <code>setTimeout</code> çš„ä¾‹å­ï¼Œæˆ‘ä»¬æœ€åéœ€è¦ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ¥è·å–æ¯æ¬¡ <code>for</code> å¾ªç¯è¿­ä»£é‡Œçš„çŠ¶æ€ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬åšçš„æ˜¯ä¸ºè·å–åˆ°çš„å˜é‡åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒã€‚ è¿™æ ·åšæŒºç—›è‹¦çš„ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œä½ ä¸å¿…åœ¨ <code>TypeScript</code> é‡Œè¿™æ ·åšäº†ã€‚<br>å½“ <code>let</code> å£°æ˜å‡ºç°åœ¨å¾ªç¯ä½“é‡Œæ—¶æ‹¥æœ‰å®Œå…¨ä¸åŒçš„è¡Œä¸ºã€‚ ä¸ä»…æ˜¯åœ¨å¾ªç¯é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒï¼Œè€Œæ˜¯é’ˆå¯¹ æ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºè¿™æ ·ä¸€ä¸ªæ–°ä½œç”¨åŸŸã€‚ è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶åšçš„äº‹ï¼Œæ‰€ä»¥åœ¨ <code>setTimeout</code> ä¾‹å­é‡Œæˆ‘ä»¬ä»…ä½¿ç”¨ <code>let</code> å£°æ˜å°±å¯ä»¥äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i);</span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span> * i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¼šè¾“å‡ºä¸é¢„æ–™ä¸€è‡´çš„ç»“æœï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-9-const-å£°æ˜\"><a href=\"#2-9-const-å£°æ˜\" class=\"headerlink\" title=\"2.9 const å£°æ˜\"></a>2.9 const å£°æ˜</h3><blockquote>\n<p><code>const</code> å£°æ˜æ˜¯å£°æ˜å˜é‡çš„å¦ä¸€ç§æ–¹å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numLivesForCat = <span class=\"number\">9</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒä»¬ä¸ <code>let</code> å£°æ˜ç›¸ä¼¼ï¼Œä½†æ˜¯å°±åƒå®ƒçš„åå­—æ‰€è¡¨è¾¾çš„ï¼Œå®ƒä»¬è¢«èµ‹å€¼åä¸èƒ½å†æ”¹å˜ã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒä»¬æ‹¥æœ‰ä¸ <code>let</code> ç›¸åŒçš„ä½œç”¨åŸŸè§„åˆ™ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å®ƒä»¬é‡æ–°èµ‹å€¼ã€‚<br>è¿™å¾ˆå¥½ç†è§£ï¼Œå®ƒä»¬å¼•ç”¨çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numLivesForCat = <span class=\"number\">9</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> kitty = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;Aurora&quot;</span>,</span><br><span class=\"line\">  numLives: numLivesForCat</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error</span></span><br><span class=\"line\">kitty = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;Danielle&quot;</span>,</span><br><span class=\"line\">  numLives: numLivesForCat</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// all &quot;okay&quot;</span></span><br><span class=\"line\">kitty.name = <span class=\"string\">&quot;Rory&quot;</span>;</span><br><span class=\"line\">kitty.name = <span class=\"string\">&quot;Kitty&quot;</span>;</span><br><span class=\"line\">kitty.name = <span class=\"string\">&quot;Cat&quot;</span>;</span><br><span class=\"line\">kitty.numLives--;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é™¤éä½ ä½¿ç”¨ç‰¹æ®Šçš„æ–¹æ³•å»é¿å…ï¼Œå®é™…ä¸Š <code>const</code> å˜é‡çš„å†…éƒ¨çŠ¶æ€æ˜¯å¯ä¿®æ”¹çš„ã€‚ å¹¸è¿çš„æ˜¯ï¼Œ<code>TypeScript</code> å…è®¸ä½ å°†å¯¹è±¡çš„æˆå‘˜è®¾ç½®æˆåªè¯»çš„ã€‚ æ¥å£ä¸€ç« æœ‰è¯¦ç»†è¯´æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"2-10-let-vs-const\"><a href=\"#2-10-let-vs-const\" class=\"headerlink\" title=\"2.10 let vs. const\"></a>2.10 let vs. const</h3><blockquote>\n<p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ç§ä½œç”¨åŸŸç›¸ä¼¼çš„å£°æ˜æ–¹å¼ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šé—®åˆ°åº•åº”è¯¥ä½¿ç”¨å“ªä¸ªã€‚ ä¸å¤§å¤šæ•°æ³›æ³›çš„é—®é¢˜ä¸€æ ·ï¼Œç­”æ¡ˆæ˜¯ï¼šä¾æƒ…å†µè€Œå®šã€‚<br>ä½¿ç”¨æœ€å°ç‰¹æƒåŸåˆ™ï¼Œæ‰€æœ‰å˜é‡é™¤äº†ä½ è®¡åˆ’å»ä¿®æ”¹çš„éƒ½åº”è¯¥ä½¿ç”¨ <code>const</code>ã€‚ åŸºæœ¬åŸåˆ™å°±æ˜¯å¦‚æœä¸€ä¸ªå˜é‡ä¸éœ€è¦å¯¹å®ƒå†™å…¥ï¼Œé‚£ä¹ˆå…¶å®ƒä½¿ç”¨è¿™äº›ä»£ç çš„äººä¹Ÿä¸èƒ½å¤Ÿå†™å…¥å®ƒä»¬ï¼Œå¹¶ä¸”è¦æ€è€ƒä¸ºä»€ä¹ˆä¼šéœ€è¦å¯¹è¿™äº›å˜é‡é‡æ–°èµ‹å€¼ã€‚ ä½¿ç”¨ <code>const</code> ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„æ¨æµ‹æ•°æ®çš„æµåŠ¨ã€‚<br>è·Ÿæ®ä½ çš„è‡ªå·±åˆ¤æ–­ï¼Œå¦‚æœåˆé€‚çš„è¯ï¼Œä¸å›¢é˜Ÿæˆå‘˜å•†è®®ä¸€ä¸‹ã€‚<br>è¿™ä¸ªæ‰‹å†Œå¤§éƒ¨åˆ†åœ°æ–¹éƒ½ä½¿ç”¨äº† <code>let</code> å£°æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"2-11-è§£æ„\"><a href=\"#2-11-è§£æ„\" class=\"headerlink\" title=\"2.11 è§£æ„\"></a>2.11 è§£æ„</h3><blockquote>\n<p><code>Another TypeScript</code> å·²ç»å¯ä»¥è§£æå…¶å®ƒ <code>ECMAScript 2015</code> ç‰¹æ€§äº†ã€‚ å®Œæ•´åˆ—è¡¨è¯·å‚è§ <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">the article on the Mozilla Developer Network</a>ã€‚ æœ¬ç« ï¼Œæˆ‘ä»¬å°†ç»™å‡ºä¸€ä¸ªç®€çŸ­çš„æ¦‚è¿°ã€‚</p>\n</blockquote>\n<h4 id=\"2-11-1-è§£æ„æ•°ç»„\"><a href=\"#2-11-1-è§£æ„æ•°ç»„\" class=\"headerlink\" title=\"2.11.1 è§£æ„æ•°ç»„\"></a>2.11.1 è§£æ„æ•°ç»„</h4><blockquote>\n<p>æœ€ç®€å•çš„è§£æ„è«è¿‡äºæ•°ç»„çš„è§£æ„èµ‹å€¼äº†ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> input = [<span class=\"number\">1</span>, <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> [first, second] = input;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first); <span class=\"comment\">// outputs 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(second); <span class=\"comment\">// outputs 2</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™åˆ›å»ºäº† <code>2</code> ä¸ªå‘½åå˜é‡ <code>first</code> å’Œ <code>second</code>ã€‚ ç›¸å½“äºä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ›´ä¸ºæ–¹ä¾¿ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">first = input[<span class=\"number\">0</span>];</span><br><span class=\"line\">second = input[<span class=\"number\">1</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è§£æ„ä½œç”¨äºå·²å£°æ˜çš„å˜é‡ä¼šæ›´å¥½ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// swap variables</span></span><br><span class=\"line\">[first, second] = [second, first];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½œç”¨äºå‡½æ•°å‚æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">[first, second]: [<span class=\"built_in\">number</span>, <span class=\"built_in\">number</span>]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(first);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(second);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f(input);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½ å¯ä»¥åœ¨æ•°ç»„é‡Œä½¿ç”¨ <code>...</code> è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> [first, ...rest] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first); <span class=\"comment\">// outputs 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(rest); <span class=\"comment\">// outputs [ 2, 3, 4 ]</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“ç„¶ï¼Œç”±äºæ˜¯ <code>JavaScript</code>, ä½ å¯ä»¥å¿½ç•¥ä½ ä¸å…³å¿ƒçš„å°¾éšå…ƒç´ ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> [first] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first); <span class=\"comment\">// outputs 1</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æˆ–å…¶å®ƒå…ƒç´ ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> [, second, , fourth] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-11-2-å¯¹è±¡è§£æ„\"><a href=\"#2-11-2-å¯¹è±¡è§£æ„\" class=\"headerlink\" title=\"2.11.2 å¯¹è±¡è§£æ„\"></a>2.11.2 å¯¹è±¡è§£æ„</h4><blockquote>\n<p>ä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> o = &#123;</span><br><span class=\"line\">  a: <span class=\"string\">&quot;foo&quot;</span>,</span><br><span class=\"line\">  b: <span class=\"number\">12</span>,</span><br><span class=\"line\">  c: <span class=\"string\">&quot;bar&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> &#123; a, b &#125; = o;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é€šè¿‡ <code>o.a and o.b</code> åˆ›å»ºäº† <code>a</code> å’Œ <code>b</code> ã€‚ æ³¨æ„ï¼Œå¦‚æœä½ ä¸éœ€è¦ <code>c</code> ä½ å¯ä»¥å¿½ç•¥å®ƒã€‚<br>å°±åƒæ•°ç»„è§£æ„ï¼Œä½ å¯ä»¥ç”¨æ²¡æœ‰å£°æ˜çš„èµ‹å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(&#123; a, b &#125; = &#123; <span class=\"attr\">a</span>: <span class=\"string\">&quot;baz&quot;</span>, <span class=\"attr\">b</span>: <span class=\"number\">101</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ‹¬å·å°†å®ƒæ‹¬èµ·æ¥ï¼Œå› ä¸º <code>Javascript</code> é€šå¸¸ä¼šå°†ä»¥ <code>&#123;</code> èµ·å§‹çš„è¯­å¥è§£æä¸ºä¸€ä¸ªå—ã€‚<br>ä½ å¯ä»¥åœ¨å¯¹è±¡é‡Œä½¿ç”¨ <code>...</code> è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; a, ...passthrough &#125; = o;</span><br><span class=\"line\"><span class=\"keyword\">let</span> total = passthrough.b + passthrough.c.length;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-11-3-å±æ€§é‡å‘½å\"><a href=\"#2-11-3-å±æ€§é‡å‘½å\" class=\"headerlink\" title=\"2.11.3 å±æ€§é‡å‘½å\"></a>2.11.3 å±æ€§é‡å‘½å</h4><blockquote>\n<p>ä½ ä¹Ÿå¯ä»¥ç»™å±æ€§ä»¥ä¸åŒçš„åå­—ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; <span class=\"attr\">a</span>: newName1, <span class=\"attr\">b</span>: newName2 &#125; = o;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„è¯­æ³•å¼€å§‹å˜å¾—æ··ä¹±ã€‚ ä½ å¯ä»¥å°† <code>a: newName1</code> è¯»åš â€œ<code>a</code> ä½œä¸º <code>newName1</code>â€œã€‚ æ–¹å‘æ˜¯ä»å·¦åˆ°å³ï¼Œå¥½åƒä½ å†™æˆäº†ä»¥ä¸‹æ ·å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> newName1 = o.a;</span><br><span class=\"line\"><span class=\"keyword\">let</span> newName2 = o.b;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œè¿™é‡Œçš„å†’å·ä¸æ˜¯æŒ‡ç¤ºç±»å‹çš„ã€‚ å¦‚æœä½ æƒ³æŒ‡å®šå®ƒçš„ç±»å‹ï¼Œ ä»ç„¶éœ€è¦åœ¨å…¶åå†™ä¸Šå®Œæ•´çš„æ¨¡å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; a, b &#125;: &#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b: <span class=\"built_in\">number</span> &#125; = o;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-11-4-é»˜è®¤å€¼\"><a href=\"#2-11-4-é»˜è®¤å€¼\" class=\"headerlink\" title=\"2.11.4 é»˜è®¤å€¼\"></a>2.11.4 é»˜è®¤å€¼</h4><blockquote>\n<p>é»˜è®¤å€¼å¯ä»¥è®©ä½ åœ¨å±æ€§ä¸º <code>undefined</code> æ—¶ä½¿ç”¨ç¼ºçœå€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">keepWholeObject</span>(<span class=\"params\">wholeObject: &#123; a: <span class=\"built_in\">string</span>; b?: <span class=\"built_in\">number</span> &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; a, b = <span class=\"number\">1001</span> &#125; = wholeObject;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç°åœ¨ï¼Œå³ä½¿ <code>b</code> ä¸º <code>undefined</code> ï¼Œ <code>keepWholeObject</code> å‡½æ•°çš„å˜é‡ <code>wholeObject</code> çš„å±æ€§ <code>a</code> å’Œ <code>b</code> éƒ½ä¼šæœ‰å€¼ã€‚</p>\n</blockquote>\n<h4 id=\"2-11-5-å‡½æ•°å£°æ˜\"><a href=\"#2-11-5-å‡½æ•°å£°æ˜\" class=\"headerlink\" title=\"2.11.5 å‡½æ•°å£°æ˜\"></a>2.11.5 å‡½æ•°å£°æ˜</h4><blockquote>\n<p>è§£æ„ä¹Ÿèƒ½ç”¨äºå‡½æ•°å£°æ˜ã€‚ çœ‹ä»¥ä¸‹ç®€å•çš„æƒ…å†µï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> C = &#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b?: <span class=\"built_in\">number</span> &#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">&#123; a, b &#125;: C</span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æ›´å¤šçš„æ˜¯æŒ‡å®šé»˜è®¤å€¼ï¼Œè§£æ„é»˜è®¤å€¼æœ‰äº›æ£˜æ‰‹ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦åœ¨é»˜è®¤å€¼ä¹‹å‰è®¾ç½®å…¶æ ¼å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">&#123; a = <span class=\"string\">&quot;&quot;</span>, b = <span class=\"number\">0</span> &#125; = &#123;&#125;</span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ä»£ç æ˜¯ä¸€ä¸ªç±»å‹æ¨æ–­çš„ä¾‹å­ï¼Œå°†åœ¨æœ¬æ‰‹å†Œåæ–‡ä»‹ç»ã€‚<br>å…¶æ¬¡ï¼Œä½ éœ€è¦çŸ¥é“åœ¨è§£æ„å±æ€§ä¸Šç»™äºˆä¸€ä¸ªé»˜è®¤æˆ–å¯é€‰çš„å±æ€§ç”¨æ¥æ›¿æ¢ä¸»åˆå§‹åŒ–åˆ—è¡¨ã€‚ è¦çŸ¥é“ <code>C</code> çš„å®šä¹‰æœ‰ä¸€ä¸ª <code>b</code> å¯é€‰å±æ€§ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">&#123; a, b = <span class=\"number\">0</span> &#125; = &#123; a: <span class=\"string\">&quot;&quot;</span> &#125;</span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f(&#123; <span class=\"attr\">a</span>: <span class=\"string\">&quot;yes&quot;</span> &#125;); <span class=\"comment\">// ok, default b = 0</span></span><br><span class=\"line\">f(); <span class=\"comment\">// ok, default to &#123;a: &quot;&quot;&#125;, which then defaults b = 0</span></span><br><span class=\"line\">f(&#123;&#125;); <span class=\"comment\">// error, &#x27;a&#x27; is required if you supply an argument</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¦å°å¿ƒä½¿ç”¨è§£æ„ã€‚ ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå°±ç®—æ˜¯æœ€ç®€å•çš„è§£æ„è¡¨è¾¾å¼ä¹Ÿæ˜¯éš¾ä»¥ç†è§£çš„ã€‚ å°¤å…¶å½“å­˜åœ¨æ·±å±‚åµŒå¥—è§£æ„çš„æ—¶å€™ï¼Œå°±ç®—è¿™æ—¶æ²¡æœ‰å †å åœ¨ä¸€èµ·çš„é‡å‘½åï¼Œé»˜è®¤å€¼å’Œç±»å‹æ³¨è§£ï¼Œä¹Ÿæ˜¯ä»¤äººéš¾ä»¥ç†è§£çš„ã€‚ è§£æ„è¡¨è¾¾å¼è¦å°½é‡ä¿æŒå°è€Œç®€å•ã€‚ ä½ è‡ªå·±ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è§£æ„å°†ä¼šç”Ÿæˆçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚</p>\n</blockquote>\n<h4 id=\"2-11-6-å±•å¼€\"><a href=\"#2-11-6-å±•å¼€\" class=\"headerlink\" title=\"2.11.6 å±•å¼€\"></a>2.11.6 å±•å¼€</h4><blockquote>\n<p>å±•å¼€æ“ä½œç¬¦æ­£ä¸è§£æ„ç›¸åã€‚ å®ƒå…è®¸ä½ å°†ä¸€ä¸ªæ•°ç»„å±•å¼€ä¸ºå¦ä¸€ä¸ªæ•°ç»„ï¼Œæˆ–å°†ä¸€ä¸ªå¯¹è±¡å±•å¼€ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> first = [<span class=\"number\">1</span>, <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> second = [<span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> bothPlus = [<span class=\"number\">0</span>, ...first, ...second, <span class=\"number\">5</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¼šä»¤ <code>bothPlus</code> çš„å€¼ä¸º <code>[0, 1, 2, 3, 4, 5]</code>ã€‚ å±•å¼€æ“ä½œåˆ›å»ºäº† <code>first</code> å’Œ <code>second</code> çš„ä¸€ä»½æµ…æ‹·è´ã€‚ å®ƒä»¬ä¸ä¼šè¢«å±•å¼€æ“ä½œæ‰€æ”¹å˜ã€‚<br>ä½ è¿˜å¯ä»¥å±•å¼€å¯¹è±¡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> defaults = &#123; <span class=\"attr\">food</span>: <span class=\"string\">&quot;spicy&quot;</span>, <span class=\"attr\">price</span>: <span class=\"string\">&quot;$$&quot;</span>, <span class=\"attr\">ambiance</span>: <span class=\"string\">&quot;noisy&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> search = &#123; ...defaults, <span class=\"attr\">food</span>: <span class=\"string\">&quot;rich&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>search</code> çš„å€¼ä¸º <code>&#123; food: &quot;rich&quot;, price: &quot;$$&quot;, ambiance: &quot;noisy&quot; &#125;</code>ã€‚ å¯¹è±¡çš„å±•å¼€æ¯”æ•°ç»„çš„å±•å¼€è¦å¤æ‚çš„å¤šã€‚ åƒæ•°ç»„å±•å¼€ä¸€æ ·ï¼Œå®ƒæ˜¯ä»å·¦è‡³å³è¿›è¡Œå¤„ç†ï¼Œä½†ç»“æœä»ä¸ºå¯¹è±¡ã€‚ è¿™å°±æ„å‘³ç€å‡ºç°åœ¨å±•å¼€å¯¹è±¡åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨ç»“å°¾å¤„è¿›è¡Œå±•å¼€çš„è¯ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> defaults = &#123; <span class=\"attr\">food</span>: <span class=\"string\">&quot;spicy&quot;</span>, <span class=\"attr\">price</span>: <span class=\"string\">&quot;$$&quot;</span>, <span class=\"attr\">ambiance</span>: <span class=\"string\">&quot;noisy&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> search = &#123; <span class=\"attr\">food</span>: <span class=\"string\">&quot;rich&quot;</span>, ...defaults &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é‚£ä¹ˆï¼Œ<code>defaults</code> é‡Œçš„ <code>food</code> å±æ€§ä¼šé‡å†™ <code>food: &quot;rich&quot;</code>ï¼Œåœ¨è¿™é‡Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚<br>å¯¹è±¡å±•å¼€è¿˜æœ‰å…¶å®ƒä¸€äº›æ„æƒ³ä¸åˆ°çš„é™åˆ¶ã€‚ é¦–å…ˆï¼Œå®ƒä»…åŒ…å«å¯¹è±¡ <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties\">è‡ªèº«çš„å¯æšä¸¾å±æ€§</a>ã€‚ å¤§ä½“ä¸Šæ˜¯è¯´å½“ä½ å±•å¼€ä¸€ä¸ªå¯¹è±¡å®ä¾‹æ—¶ï¼Œä½ ä¼šä¸¢å¤±å…¶æ–¹æ³•ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  p = <span class=\"number\">12</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">m</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\"><span class=\"keyword\">let</span> clone = &#123; ...c &#125;;</span><br><span class=\"line\">clone.p; <span class=\"comment\">// ok</span></span><br><span class=\"line\">clone.m(); <span class=\"comment\">// error!</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…¶æ¬¡ï¼Œ<code>TypeScript</code> ç¼–è¯‘å™¨ä¸å…è®¸å±•å¼€æ³›å‹å‡½æ•°ä¸Šçš„ç±»å‹å‚æ•°ã€‚ è¿™ä¸ªç‰¹æ€§ä¼šåœ¨ <code>TypeScript</code> çš„æœªæ¥ç‰ˆæœ¬ä¸­è€ƒè™‘å®ç°ã€‚</p>\n</blockquote>\n<h2 id=\"ä¸‰ã€æ¥å£\"><a href=\"#ä¸‰ã€æ¥å£\" class=\"headerlink\" title=\"ä¸‰ã€æ¥å£\"></a>ä¸‰ã€æ¥å£</h2><h3 id=\"3-1-å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\"><a href=\"#3-1-å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\" class=\"headerlink\" title=\"3.1 å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\"></a>3.1 å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> LabelledValue &#123;</span><br><span class=\"line\">  label: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printLabel</span>(<span class=\"params\">labelledObj: LabelledValue</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(labelledObj.label);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myObj = &#123; <span class=\"attr\">size</span>: <span class=\"number\">10</span>, <span class=\"attr\">label</span>: <span class=\"string\">&quot;size 10 Object&quot;</span> &#125;;</span><br><span class=\"line\">printLabel(myObj);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-å¯é€‰å±æ€§\"><a href=\"#3-2-å¯é€‰å±æ€§\" class=\"headerlink\" title=\"3.2 å¯é€‰å±æ€§\"></a>3.2 å¯é€‰å±æ€§</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> SquareConfig &#123;</span><br><span class=\"line\">  color?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  width?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createConfig</span>(<span class=\"params\">config: SquareConfig</span>): </span>&#123; color: <span class=\"built_in\">string</span>; area: <span class=\"built_in\">number</span> &#125; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newSquare = &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;white&quot;</span>, <span class=\"attr\">area</span>: <span class=\"number\">100</span> &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.color) &#123;</span><br><span class=\"line\">    newSquare.color = config.color;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.width) &#123;</span><br><span class=\"line\">    newSquare.area = config.width * config.width;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> newSquare;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> mySquare = createConfig(&#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;black&quot;</span>, <span class=\"attr\">width</span>: <span class=\"number\">20</span> &#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mySquare);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-åªè¯»å±æ€§\"><a href=\"#3-3-åªè¯»å±æ€§\" class=\"headerlink\" title=\"3.3 åªè¯»å±æ€§\"></a>3.3 åªè¯»å±æ€§</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Point &#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> p1: Point = &#123; <span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"attr\">y</span>: <span class=\"number\">20</span> &#125;;</span><br><span class=\"line\">p1.x = <span class=\"number\">5</span>; <span class=\"comment\">// error! å› ä¸ºå±æ€§æ˜¯åªè¯»çš„</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-4-é¢å¤–çš„å±æ€§æ£€æŸ¥\"><a href=\"#3-4-é¢å¤–çš„å±æ€§æ£€æŸ¥\" class=\"headerlink\" title=\"3.4 é¢å¤–çš„å±æ€§æ£€æŸ¥\"></a>3.4 é¢å¤–çš„å±æ€§æ£€æŸ¥</h3><blockquote>\n<p>é—®é¢˜ï¼šå°†â€ <em>å¯é€‰å±æ€§</em> â€œä¸â€ <code>option bags</code> â€œæ¨¡å¼ç›¸ç»“åˆè€Œå¼•å‘</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> SquareConfig &#123;</span><br><span class=\"line\">  color?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  width?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createConfig</span>(<span class=\"params\">config: SquareConfig</span>): </span>&#123; color: <span class=\"built_in\">string</span>; area: <span class=\"built_in\">number</span> &#125; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newSquare = &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;white&quot;</span>, <span class=\"attr\">area</span>: <span class=\"number\">100</span> &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.color) &#123;</span><br><span class=\"line\">    newSquare.color = config.color;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.width) &#123;</span><br><span class=\"line\">    newSquare.area = config.width * config.width;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> newSquare;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>let mySquare = createConfig(&#123; colour: &quot;red&quot;, width: 100 &#125;); //æŠ¥é”™</code></p>\n</blockquote>\n<ul>\n<li>è§£å†³æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨ç±»å‹æ–­è¨€</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> mySquare = createConfig(&#123; <span class=\"attr\">width</span>: <span class=\"number\">100</span>, <span class=\"attr\">opacity</span>: <span class=\"number\">0.5</span> &#125; <span class=\"keyword\">as</span> SquareConfig);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å†³æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å(æœ€ä½³æ–¹æ¡ˆ)</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> _SquareConfig &#123;</span><br><span class=\"line\">  color?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  width?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  [propName: <span class=\"built_in\">string</span>]: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å†³æ–¹æ¡ˆä¸‰ï¼šå˜é‡èµ‹å€¼</li>\n</ul>\n<h3 id=\"3-5-å‡½æ•°ç±»å‹\"><a href=\"#3-5-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5 å‡½æ•°ç±»å‹\"></a>3.5 å‡½æ•°ç±»å‹</h3><h4 id=\"3-5-1-å‡½æ•°ç±»å‹\"><a href=\"#3-5-1-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5.1 å‡½æ•°ç±»å‹\"></a>3.5.1 å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> SearchFunc &#123;</span><br><span class=\"line\">  (source: <span class=\"built_in\">string</span>, <span class=\"attr\">subString</span>: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> mySearch: SearchFunc;</span><br><span class=\"line\">mySearch = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">source: <span class=\"built_in\">string</span>, subString: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = source.search(subString);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result &gt; -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-5-2-å‡½æ•°ç±»å‹\"><a href=\"#3-5-2-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5.2 å‡½æ•°ç±»å‹\"></a>3.5.2 å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> add: <span class=\"function\">(<span class=\"params\">baseValue: <span class=\"built_in\">number</span>, increment: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">number</span> = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> add2 = (x: <span class=\"built_in\">number</span>, <span class=\"attr\">y</span>: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> x + y;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> buildNameFun: <span class=\"function\">(<span class=\"params\">fname: <span class=\"built_in\">string</span>, ...rest: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">string</span>&gt;</span>) =&gt;</span> <span class=\"built_in\">string</span> = <span class=\"function\">(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, ...restOfName: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">string</span>&gt;</span>) =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;firstName&#125;</span>, <span class=\"subst\">$&#123;restOfName.join(<span class=\"string\">&quot; &quot;</span>)&#125;</span>`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = (a: <span class=\"built_in\">number</span>, <span class=\"attr\">b</span>: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> a + b;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-5-3-å‡½æ•°ç±»å‹\"><a href=\"#3-5-3-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5.3 å‡½æ•°ç±»å‹\"></a>3.5.3 å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> func &#123;</span><br><span class=\"line\">  (x: <span class=\"built_in\">string</span>, <span class=\"attr\">y</span>: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> func: func = <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span>, y: <span class=\"built_in\">string</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x.search(y) &gt; -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-6-å¯ç´¢å¼•ç±»å‹\"><a href=\"#3-6-å¯ç´¢å¼•ç±»å‹\" class=\"headerlink\" title=\"3.6 å¯ç´¢å¼•ç±»å‹\"></a>3.6 å¯ç´¢å¼•ç±»å‹</h3><ul>\n<li>ä¾‹å¦‚ï¼š<code>a[10]</code> æˆ– <code>ageMap[&quot;daniel&quot;]</code></li>\n<li>å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª ç´¢å¼•ç­¾åï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> StringArray &#123;</span><br><span class=\"line\">  [index: <span class=\"built_in\">number</span>]: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myArray: StringArray;</span><br><span class=\"line\">myArray = [<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Fred&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> myStr: <span class=\"built_in\">string</span> = myArray[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myStr);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Ts</code> æ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸² å’Œ æ•°å­—ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"3-7-ç±»ç±»å‹\"><a href=\"#3-7-ç±»ç±»å‹\" class=\"headerlink\" title=\"3.7 ç±»ç±»å‹\"></a>3.7 ç±»ç±»å‹</h3><blockquote>\n<p>æ¥å£æè¿°äº†ç±»çš„å…¬å…±éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç±»çš„å…¬æœ‰å’Œç§æœ‰ä¸¤éƒ¨åˆ†ã€‚å®ƒä¸ä¼šå¸®ä½ æ£€æŸ¥ç±»æ˜¯å¦å…·æœ‰æŸäº›ç§æœ‰æˆå‘˜</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> ClockInterface &#123;</span><br><span class=\"line\">  currentTime: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\">  setTime(d: <span class=\"built_in\">Date</span>); <span class=\"comment\">// åœ¨æ¥å£ä¸­æè¿°çš„æ–¹æ³•</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Clock</span> <span class=\"title\">implements</span> <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  currentTime: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setTime</span>(<span class=\"params\">d: <span class=\"built_in\">Date</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// åœ¨ç±»ä¸­çš„å…·ä½“å®ç°</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.currentTime = d;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“æ“ä½œç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»æ˜¯å…·æœ‰ä¸¤ä¸ªç±»å‹çš„ï¼š<em>é™æ€éƒ¨åˆ†çš„ç±»å‹</em> å’Œ _å®ä¾‹çš„ç±»å‹_ã€‚<br>å½“ç”¨æ„é€ å™¨ç­¾åå»å®šä¹‰ä¸€ä¸ªæ¥å£å¹¶è¯•å›¾å®šä¹‰ä¸€ä¸ªç±»å»å®ç°è¿™ä¸ªæ¥å£æ—¶ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚<br>å› ä¸ºå½“ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£æ—¶ï¼Œåªå¯¹å…¶å®ä¾‹éƒ¨åˆ†è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚<code>constructor</code> å­˜åœ¨äºç±»çš„é™æ€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸åœ¨æ£€æŸ¥çš„èŒƒå›´å†…ã€‚</p>\n</blockquote>\n<ul>\n<li>å› æ­¤åº”å½“ç›´æ¥æ“ä½œ <em>ç±»çš„é™æ€éƒ¨åˆ†</em></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> err_ClockConstructor &#123;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> (hour: <span class=\"built_in\">number</span>, <span class=\"attr\">minute</span>: <span class=\"built_in\">number</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">err_Clock</span> <span class=\"title\">implements</span> <span class=\"title\">err_ClockConstructor</span> </span>&#123;</span><br><span class=\"line\">  currentTime: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢æ˜¯å®ç°å¯¹ <em>é™æ€ç±»å‹</em> çš„æ£€æŸ¥å·¥ä½œ</li>\n</ul>\n<blockquote>\n<p>å› ä¸º <code>createClock</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>ClockConstructor</code> ç±»å‹ï¼Œåœ¨ <code>createClock(AnalogClock, 7, 32)</code> é‡Œï¼Œä¼šæ£€æŸ¥ <code>AnalogClock</code> æ˜¯å¦ç¬¦åˆæ„é€ å‡½æ•°ç­¾å</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> ClockConstructor &#123;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> (hour: <span class=\"built_in\">number</span>, <span class=\"attr\">minute</span>: <span class=\"built_in\">number</span>): ClockInterface;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> ClockInterface &#123;</span><br><span class=\"line\">  tick();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createClock</span>(<span class=\"params\">ctor: ClockConstructor, hour: <span class=\"built_in\">number</span>, minute: <span class=\"built_in\">number</span></span>): <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ctor(hour, minute);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DigitalClock</span> <span class=\"title\">implements</span> <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">tick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;beep beep&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnalogClock</span> <span class=\"title\">implements</span> <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">tick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;tick tick&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> digital = createClock(DigitalClock, <span class=\"number\">12</span>, <span class=\"number\">17</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> analog = createClock(AnalogClock, <span class=\"number\">7</span>, <span class=\"number\">32</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(digital);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(analog);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-8-æ¥å£ç»§æ‰¿\"><a href=\"#3-8-æ¥å£ç»§æ‰¿\" class=\"headerlink\" title=\"3.8 æ¥å£ç»§æ‰¿\"></a>3.8 æ¥å£ç»§æ‰¿</h3><ul>\n<li>å’Œç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç›¸äº’ç»§æ‰¿ã€‚å¯ä»¥çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—é‡Œã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Shape &#123;</span><br><span class=\"line\">  color: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Square <span class=\"keyword\">extends</span> Shape &#123;</span><br><span class=\"line\">  sideLength: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> square = &lt;Square&gt;&#123;&#125;;</span><br><span class=\"line\">square.color = <span class=\"string\">&quot;blue&quot;</span>;</span><br><span class=\"line\">square.sideLength = <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œåˆ›å»ºå‡ºå¤šä¸ªæ¥å£çš„åˆæˆæ¥å£</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Shape &#123;</span><br><span class=\"line\">  color: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> PenStroke &#123;</span><br><span class=\"line\">  penWidth: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Square <span class=\"keyword\">extends</span> Shape, PenStroke &#123;</span><br><span class=\"line\">  sideLength: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> square = &lt;Square&gt;&#123;&#125;;</span><br><span class=\"line\">square.color = <span class=\"string\">&quot;blue&quot;</span>;</span><br><span class=\"line\">square.sideLength = <span class=\"number\">10</span>;</span><br><span class=\"line\">square.penWidth = <span class=\"number\">5.0</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç›®çš„: <code>=&gt;</code> çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Lamp &#123;</span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> wx &#123;</span><br><span class=\"line\">  wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  showWxNumber(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Photo <span class=\"keyword\">extends</span> Lamp, wx &#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HuaWeiPhone</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;åä¸ºæ‰‹æœº&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">wxNumber: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.wxNumber = wxNumber;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  showWxNumber(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;æˆ‘çš„å¾®ä¿¡å·ï¼š123&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> huaWeiPhone = <span class=\"keyword\">new</span> HuaWeiPhone(<span class=\"number\">12345678910</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.showWxNumber());</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.photo());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-9-æ··åˆç±»å‹\"><a href=\"#3-9-æ··åˆç±»å‹\" class=\"headerlink\" title=\"3.9 æ··åˆç±»å‹\"></a>3.9 æ··åˆç±»å‹</h3><blockquote>\n<p>ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åšä¸ºå‡½æ•°å’Œå¯¹è±¡ä½¿ç”¨ï¼Œå¹¶å¸¦æœ‰é¢å¤–çš„å±æ€§</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Counter &#123;</span><br><span class=\"line\">  (start: <span class=\"built_in\">number</span>): <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  interval: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  reset(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCounter</span>(<span class=\"params\"></span>): <span class=\"title\">Counter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> counter = &lt;Counter&gt;<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">start: <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// return start + &#x27;string&#x27;;</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  counter.interval = <span class=\"number\">123</span>;</span><br><span class=\"line\">  counter.reset = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> counter;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> c = getCounter();</span><br><span class=\"line\">c(<span class=\"number\">10</span>);</span><br><span class=\"line\">c.interval = <span class=\"number\">5.0</span>;</span><br><span class=\"line\">c.reset();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-10-æ¥å£ç»§æ‰¿ç±»\"><a href=\"#3-10-æ¥å£ç»§æ‰¿ç±»\" class=\"headerlink\" title=\"3.10 æ¥å£ç»§æ‰¿ç±»\"></a>3.10 æ¥å£ç»§æ‰¿ç±»</h3><ol>\n<li>å½“æ¥å£ç»§æ‰¿äº†ä¸€ä¸ªç±»ç±»å‹æ—¶ï¼Œå®ƒä¼šç»§æ‰¿ç±»çš„æˆå‘˜ä½†ä¸åŒ…æ‹¬å…¶å®ç°ã€‚</li>\n<li>å°±å¥½åƒæ¥å£å£°æ˜äº†æ‰€æœ‰ç±»ä¸­å­˜åœ¨çš„æˆå‘˜ï¼Œä½†å¹¶æ²¡æœ‰æä¾›å…·ä½“å®ç°ä¸€æ ·ã€‚</li>\n<li>æ¥å£åŒæ ·ä¼šç»§æ‰¿åˆ°ç±»çš„ <code>private</code> å’Œ <code>protected</code> æˆå‘˜ã€‚</li>\n<li>è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢«è¿™ä¸ªç±»æˆ–å…¶å­ç±»æ‰€å®ç°( <code>implement</code> )ã€‚</li>\n<li>å½“ä½ æœ‰ä¸€ä¸ªåºå¤§çš„ç»§æ‰¿æ¥å£æ—¶è¿™å¾ˆæœ‰ç”¨ï¼Œä½†è¦æŒ‡å‡ºçš„æ˜¯ä½ çš„ä»£ç åªåœ¨å­ç±»æ‹¥æœ‰ç‰¹å®šå±æ€§æ—¶èµ·ä½œç”¨ã€‚è¿™ä¸ªå­ç±»é™¤äº†ç»§æ‰¿è‡³åŸºç±»å¤–ä¸åŸºç±»æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Control</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> state: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> SelectableControl <span class=\"keyword\">extends</span> Control &#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span> <span class=\"keyword\">extends</span> <span class=\"title\">Control</span> <span class=\"title\">implements</span> <span class=\"title\">SelectableControl</span> </span>&#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TextBox</span> <span class=\"keyword\">extends</span> <span class=\"title\">Control</span> </span>&#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é”™è¯¯ï¼š&quot;Image&quot;ç±»å‹ç¼ºå°‘&quot;state&quot;å±æ€§</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Image</span> <span class=\"title\">implements</span> <span class=\"title\">SelectableControl</span> </span>&#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Location</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>SelectableControl</code> åŒ…å«äº† <code>Control</code> çš„æ‰€æœ‰æˆå‘˜ã€‚åŒ…æ‹¬ç§æœ‰æˆå‘˜ <code>state</code>ã€‚å› ä¸º <code>state</code> æ˜¯ç§æœ‰æˆå‘˜ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿæ˜¯ <code>Control</code> çš„å­ç±»ä»¬æ‰èƒ½å®ç° <code>SelectableControl</code> æ¥å£ï¼Œå› ä¸ºåªæœ‰ <code>Control</code> çš„å­ç±»æ‰èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå£°æ˜äº <code>Control</code> çš„ç§æœ‰æˆå‘˜ <code>state</code>ï¼Œè¿™å¯¹ç§æœ‰æˆå‘˜çš„å…¼å®¹æ€§æ˜¯å¿…éœ€çš„ã€‚<br>åœ¨ <code>Control</code> ç±»å†…éƒ¨ï¼Œæ˜¯å…è®¸é€šè¿‡ <code>SelectableControl</code> çš„å®ä¾‹æ¥è®¿é—®ç§æœ‰æˆå‘˜ <code>state</code> çš„ã€‚å®é™…ä¸Šï¼Œ<code>SelectableControl</code> æ¥å£å’Œæ‹¥æœ‰ <code>select</code> æ–¹æ³•çš„ <code>Control</code> ç±»æ˜¯ä¸€æ ·çš„ã€‚<code>Button</code> å’Œ <code>TextBox</code> ç±»æ˜¯ <code>SelectableControl</code> çš„å­ç±»(å› ä¸ºå®ƒä»¬éƒ½ç»§æ‰¿è‡ª <code>Control</code> å¹¶æœ‰ <code>select</code> æ–¹æ³•ï¼Œä½† <code>Image</code> å’Œ <code>Location</code> ç±»å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚)</p>\n</blockquote>\n<h3 id=\"3-11-æ¥å£ç»§æ‰¿æ¥å£\"><a href=\"#3-11-æ¥å£ç»§æ‰¿æ¥å£\" class=\"headerlink\" title=\"3.11 æ¥å£ç»§æ‰¿æ¥å£\"></a>3.11 æ¥å£ç»§æ‰¿æ¥å£</h3><blockquote>\n<p>ç›®çš„: <code>=&gt;</code> çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Lamp &#123;</span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> wx &#123;</span><br><span class=\"line\">  wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  showWxNumber(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Photo <span class=\"keyword\">extends</span> Lamp, wx &#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HuaWeiPhone</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;åä¸ºæ‰‹æœº&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOn</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOff</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">wxNumber: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.wxNumber = wxNumber;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">showWxNumber</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;æˆ‘çš„å¾®ä¿¡å·æ˜¯ï¼š123&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> huaWeiPhone = <span class=\"keyword\">new</span> HuaWeiPhone(<span class=\"number\">13100970071</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.showWxNumber());</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.photo());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-12-ç±»æ¥å£å®ç°\"><a href=\"#3-12-ç±»æ¥å£å®ç°\" class=\"headerlink\" title=\"3.12 ç±»æ¥å£å®ç°\"></a>3.12 ç±»æ¥å£å®ç°</h3><blockquote>\n<p>æ‰‹æœºç±»æ˜¯ä¸€ä¸ªå¤§ç±»<br>åä¸ºæ˜¯æ‰‹æœºç±»ä¸‹çš„ä¸€ä¸ªç±»<br>åä¸ºæ‰‹æœºæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½ï¼Œç…§ç›¸æœºä¹Ÿæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½<br>å› æ­¤åä¸ºæ‰‹æœºå’Œç…§ç›¸æœºçš„å…¬å…±ç‰¹æ€§å°±æ˜¯æ‹ç…§å’Œé—ªå…‰ç¯<br>æ‰€ä»¥é€šè¿‡å…³é”®å­— <code>implements</code> æ¥æ ‡è¯†æå–å‡ºæ¥çš„æ¥å£</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‹ç…§</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Photo &#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// é—ªå…‰ç¯</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Lamp &#123;</span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Phone</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HuaWei</span> <span class=\"keyword\">extends</span> <span class=\"title\">Phone</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span>, <span class=\"title\">Lamp</span> </span>&#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;åä¸ºæ‹ç…§&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOn</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOff</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DigitalCamera</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span>, <span class=\"title\">Lamp</span> </span>&#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;ç…§ç›¸æœºæ‹ç…§&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOn</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOff</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å››ã€ç±»\"><a href=\"#å››ã€ç±»\" class=\"headerlink\" title=\"å››ã€ç±»\"></a>å››ã€ç±»</h2><h3 id=\"4-1-åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\"><a href=\"#4-1-åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\" class=\"headerlink\" title=\"4.1 åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\"></a>4.1 åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Gretter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> gretting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.gretting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.gretting&#125;</span>`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> gretter: Gretter = <span class=\"keyword\">new</span> Gretter(<span class=\"string\">&quot;world!&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gretter);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-ç»§æ‰¿\"><a href=\"#4-2-ç»§æ‰¿\" class=\"headerlink\" title=\"4.2 ç»§æ‰¿\"></a>4.2 ç»§æ‰¿</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters: <span class=\"built_in\">number</span> = <span class=\"number\">0</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> moved <span class=\"subst\">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Snake</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters = <span class=\"number\">5</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Slithering...&quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.move(distanceInMeters);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Horse</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters = <span class=\"number\">45</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Galloping&quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.move(distanceInMeters);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> sam = <span class=\"keyword\">new</span> Snake(<span class=\"string\">&quot;Sammy the Python&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> tom: Animal = <span class=\"keyword\">new</span> Horse(<span class=\"string\">&quot;Tommy the Palomino&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">sam.move();</span><br><span class=\"line\">tom.move(<span class=\"number\">34</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-3-public-å…³é”®å­—\"><a href=\"#4-3-public-å…³é”®å­—\" class=\"headerlink\" title=\"4.3 public å…³é”®å­—\"></a>4.3 public å…³é”®å­—</h3><blockquote>\n<p>é»˜è®¤ä¸º <code>public</code><br>åœ¨ <code>TypeScript</code> ä¸­,æˆå‘˜éƒ½é»˜è®¤ä¸º <code>public</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal_public</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> moved <span class=\"subst\">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-4-private-å…³é”®å­—\"><a href=\"#4-4-private-å…³é”®å­—\" class=\"headerlink\" title=\"4.4 private å…³é”®å­—\"></a>4.4 private å…³é”®å­—</h3><blockquote>\n<p>ç†è§£ <code>private</code></p>\n<ol>\n<li>å½“æˆå‘˜è¢«æ ‡è®°æˆ <code>private</code> æ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®</li>\n<li>å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª <code>private</code> æˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª <code>private</code> æˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal_private</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> cat = <span class=\"keyword\">new</span> Animal_private(<span class=\"string\">&quot;Cat&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cat.name; // é”™è¯¯ï¼š&#x27;name&#x27;æ˜¯ç§æœ‰çš„</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal_private_1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Rhino</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal_private_1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(<span class=\"string\">&quot;Rhino&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = <span class=\"keyword\">new</span> Animal_private_1(<span class=\"string\">&quot;Goat&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> rhino = <span class=\"keyword\">new</span> Rhino();</span><br><span class=\"line\"><span class=\"keyword\">let</span> employee = <span class=\"keyword\">new</span> Employee(<span class=\"string\">&quot;Bob&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">animal = rhino;</span><br><span class=\"line\"><span class=\"comment\">// animal = employee; //é”™è¯¯ï¼šAnimalä¸Employeeä¸å…¼å®¹</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-5-protected-å…³é”®å­—\"><a href=\"#4-5-protected-å…³é”®å­—\" class=\"headerlink\" title=\"4.5 protected å…³é”®å­—\"></a>4.5 protected å…³é”®å­—</h3><ul>\n<li>ç†è§£ <code>protected</code></li>\n</ul>\n<blockquote>\n<p><code>protected</code> ä¿®é¥°ç¬¦ä¸ <code>private</code> ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼Œ<code>protected</code> æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Employee</span> <span class=\"keyword\">extends</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> department: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span>, department: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.department = department;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">getElevatorPitch</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, my name is <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> and I work in <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.department&#125;</span>`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> howard = <span class=\"keyword\">new</span> _Employee(<span class=\"string\">&quot;Howard&quot;</span>, <span class=\"string\">&quot;Sales&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(howard.getElevatorPitch());</span><br><span class=\"line\"><span class=\"comment\">// console.log(howard.name); // é”™è¯¯ï¼Œå› ä¸º name æ— æ³•åœ¨å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ <code>protected</code></li>\n</ul>\n<blockquote>\n<p>è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ã€‚ä½†æ˜¯èƒ½è¢«ç»§æ‰¿ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">__Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// __Employee èƒ½å¤Ÿç»§æ‰¿ Person</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">__Employee</span> <span class=\"keyword\">extends</span> <span class=\"title\">__Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> department: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span>, department: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.department = department;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">getElevatorPitch</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, my name is <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> and I work in <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.department&#125;</span>.`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> __howard = <span class=\"keyword\">new</span> __Employee(<span class=\"string\">&quot;Howard&quot;</span>, <span class=\"string\">&quot;Sales&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// let __join = new __Person(&quot;John&quot;);// é”™è¯¯ï¼š&#x27;Person&#x27;çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-6-readonly-ä¿®é¥°ç¬¦\"><a href=\"#4-6-readonly-ä¿®é¥°ç¬¦\" class=\"headerlink\" title=\"4.6 readonly ä¿®é¥°ç¬¦\"></a>4.6 readonly ä¿®é¥°ç¬¦</h3><ul>\n<li>ä½ å¯ä»¥ä½¿ç”¨ <code>readonly</code> å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Octopus</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> numberOfLegs: <span class=\"built_in\">number</span> = <span class=\"number\">8</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> dad = <span class=\"keyword\">new</span> Octopus(<span class=\"string\">&quot;Man with the 8 strong legs&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// dad.name = &quot;Man with the 3-piece suit&quot;;// é”™è¯¯ï¼Œnameæ˜¯åªè¯»çš„</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å‚æ•°å±æ€§</li>\n</ul>\n<blockquote>\n<ol>\n<li>å‚æ•°å±æ€§å¯ä»¥æ–¹ä¾¿åœ°è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜ã€‚</li>\n<li>å‚æ•°å±æ€§é€šè¿‡ç»™æ„é€ å‡½æ•°å‚æ•°å‰é¢æ·»åŠ ä¸€ä¸ªè®¿é—®é™å®šç¬¦æ¥å£°æ˜ã€‚</li>\n<li>ä½¿ç”¨ <code>private</code> é™å®šä¸€ä¸ªå‚æ•°å±æ€§ä¼šå£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼›å¯¹äº <code>public</code> å’Œ <code>protected</code> æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Octopus</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> numberOfLegs: <span class=\"built_in\">number</span> = <span class=\"number\">9</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">readonly</span> name: <span class=\"built_in\">string</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-7-å­˜å–å™¨-get-amp-set\"><a href=\"#4-7-å­˜å–å™¨-get-amp-set\" class=\"headerlink\" title=\"4.7 å­˜å–å™¨ get &amp; set\"></a>4.7 å­˜å–å™¨ get &amp; set</h3><blockquote>\n<p>å­˜å–å™¨ æ”¯æŒ <code>es5+</code>ï¼Œä¸æ”¯æŒ <code>es3</code></p>\n</blockquote>\n<ol>\n<li><code>TypeScript</code> æ”¯æŒé€šè¿‡ <code>getters/setters</code> æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚</li>\n<li>æ²¡æœ‰å­˜å–å™¨çš„ä¾‹å­</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Employee</span> </span>&#123;</span><br><span class=\"line\">  fullName: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _employee = <span class=\"keyword\">new</span> _Employee();</span><br><span class=\"line\">_employee.fullName = <span class=\"string\">&quot;Bob Smith&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (_employee.fullName) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(_employee.fullName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æ‹¥æœ‰å­˜å–å™¨çš„ä¾‹å­</li>\n</ol>\n<blockquote>\n<ol>\n<li>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹å¯†ç ï¼Œæ¥éªŒè¯ä¸€ä¸‹å­˜å–å™¨æ˜¯å¦æ˜¯å·¥ä½œçš„ã€‚å½“å¯†ç ä¸å¯¹æ—¶ï¼Œä¼šæç¤ºæˆ‘ä»¬æ²¡æœ‰æƒé™å»ä¿®æ”¹å‘˜å·¥ã€‚</li>\n<li>åªå¸¦æœ‰ <code>get</code> ä¸å¸¦æœ‰ <code>set</code> çš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º <code>readonly</code>ã€‚</li>\n<li>è¿™åœ¨ä»ä»£ç ç”Ÿæˆ <code>.d.ts</code> æ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> passcode = <span class=\"string\">&quot;secret passcode&quot;</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _fullName: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">fullName</span>(): <span class=\"title\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._fullName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">fullName</span>(<span class=\"params\">newName: <span class=\"built_in\">string</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (passcode &amp;&amp; passcode === <span class=\"string\">&quot;secret passcode&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>._fullName = newName;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Error: Unauthorized update of employee!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> employee = <span class=\"keyword\">new</span> Employee();</span><br><span class=\"line\">employee.fullName = <span class=\"string\">&quot;Bob smith&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (employee.fullName) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(employee.fullName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-8-é™æ€å±æ€§\"><a href=\"#4-8-é™æ€å±æ€§\" class=\"headerlink\" title=\"4.8 é™æ€å±æ€§\"></a>4.8 é™æ€å±æ€§</h3><blockquote>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Šã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Gird</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> origin = &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">calculateDistanceFromOrigin</span>(<span class=\"params\">point: &#123; x: <span class=\"built_in\">number</span>; y: <span class=\"built_in\">number</span> &#125;</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xDist = point.x - Gird.origin.x;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yDist = point.y - Gird.origin.y;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.sqrt(xDist * xDist + yDist * yDist) / <span class=\"built_in\">this</span>.scale;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">public</span> scale: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Gird.origin.x);</span><br><span class=\"line\"><span class=\"keyword\">let</span> grid1 = <span class=\"keyword\">new</span> Gird(<span class=\"number\">1.0</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> gird2 = <span class=\"keyword\">new</span> Gird(<span class=\"number\">5.0</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(grid1.calculateDistanceFromOrigin(&#123; <span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"attr\">y</span>: <span class=\"number\">10</span> &#125;));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gird2.calculateDistanceFromOrigin(&#123; <span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"attr\">y</span>: <span class=\"number\">10</span> &#125;));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-9-æŠ½è±¡ç±»\"><a href=\"#4-9-æŠ½è±¡ç±»\" class=\"headerlink\" title=\"4.9 æŠ½è±¡ç±»\"></a>4.9 æŠ½è±¡ç±»</h3><ol>\n<li>æŠ½è±¡ç±»ä½œä¸ºå…¶ä»–æ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚</li>\n<li>ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚</li>\n<li><code>abstract</code> å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> makeSound(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  move(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;roaming the earth ...&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚</li>\n<li>æŠ½è±¡æ–¹æ³•çš„è¯­æ³•äºæ¥å£æ–¹æ³•ç›¸ä¼¼ï¼ŒäºŒè€…éƒ½æ˜¯å®šä¹‰æ–¹æ³•ç­¾åä½†ä¸åŒ…å«æ–¹æ³•ä½“ã€‚ç„¶è€ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å« <code>abstract</code> å…³é”®å­—å¹¶ä¸”å¯ä»¥åŒ…å«è®¿é—®ä¿®é¥°ç¬¦</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Department</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">public</span> name: <span class=\"built_in\">string</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">  printName(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`Department name: <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> printMeeting(): <span class=\"built_in\">void</span>; <span class=\"comment\">// å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountingDepartment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Department</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(<span class=\"string\">&quot;Accounting and Auditing&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  printMeeting(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;The Accounting Department meets each Monday at 10am.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  generateReports(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Generating accounting reports...&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> department: Department; <span class=\"comment\">// å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»çš„å¼•ç”¨</span></span><br><span class=\"line\"><span class=\"comment\">// department = new Departmemnt(); // é”™è¯¯ï¼Œä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹</span></span><br><span class=\"line\">department = <span class=\"keyword\">new</span> AccountingDepartment(); <span class=\"comment\">// å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼</span></span><br><span class=\"line\">department.printName();</span><br><span class=\"line\">department.printMeeting();</span><br><span class=\"line\"><span class=\"comment\">// department.generateReports(); // é”™è¯¯ï¼Œæ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-10-é«˜çº§æŠ€å·§-æ„é€ å‡½æ•°\"><a href=\"#4-10-é«˜çº§æŠ€å·§-æ„é€ å‡½æ•°\" class=\"headerlink\" title=\"4.10 é«˜çº§æŠ€å·§(æ„é€ å‡½æ•°)\"></a>4.10 é«˜çº§æŠ€å·§(æ„é€ å‡½æ•°)</h3><blockquote>\n<p>å½“åœ¨ <code>TypeScript</code> é‡Œå£°æ˜äº†ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šå£°æ˜äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆå°±æ˜¯ç±»çš„å®ä¾‹ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello,&quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> greeter: Greeter; <span class=\"comment\">// =&gt;æ„æ€ï¼šGreeterç±»çš„å®ä¾‹çš„ç±»å‹æ˜¯Greeter</span></span><br><span class=\"line\">greeter = <span class=\"keyword\">new</span> Greeter(<span class=\"string\">&quot;world&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(greeter.greet());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥è®¤ä¸ºç±»å…·æœ‰ <em>å®ä¾‹éƒ¨åˆ†</em> ä¸ <em>é™æ€éƒ¨åˆ†</em></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Greeter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> standardGreeting = <span class=\"string\">&quot;Hello, there&quot;</span>;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.greeting) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello,&quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> _Greeter.standardGreeting;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _greeter: _Greeter;</span><br><span class=\"line\">_greeter = <span class=\"keyword\">new</span> _Greeter();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(_greeter.greet());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ­¤å¤„åˆ›å»ºäº†ä¸€ä¸ª <code>greeterMaker</code> çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¿å­˜äº†è¿™ä¸ª <em>ç±»</em> æˆ–è€…è¯´ä¿å­˜äº† _ç±»æ„é€ å‡½æ•°_ã€‚ç„¶åä½¿ç”¨ <code>typeof _Greeter</code>ï¼Œæ„æ€æ˜¯å– <code>Greeter</code> ç±»çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ç±»å‹ã€‚æˆ–è€…æ›´ç¡®åˆ‡çš„è¯´ï¼Œâ€å‘Šè¯‰æˆ‘ <code>Greeter</code> æ ‡è¯†ç¬¦çš„ç±»å‹â€ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹åŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> _greeterMaker: <span class=\"keyword\">typeof</span> _Greeter = _Greeter;</span><br><span class=\"line\">_greeterMaker.standardGreeting = <span class=\"string\">&quot;Hey there!&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _greeter2: _Greeter = <span class=\"keyword\">new</span> _greeterMaker();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(_greeter2.greet());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-11-é«˜çº§æŠ€å·§-æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨\"><a href=\"#4-11-é«˜çº§æŠ€å·§-æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨\" class=\"headerlink\" title=\"4.11 é«˜çº§æŠ€å·§(æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨)\"></a>4.11 é«˜çº§æŠ€å·§(æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨)</h3><blockquote>\n<p>ç±»å®šä¹‰ä¼šåˆ›å»ºä¸¤ä¸ªä¸œè¥¿ï¼š<em>ç±»çš„å®ä¾‹ç±»å‹</em> å’Œ _ä¸€ä¸ªæ„é€ å‡½æ•°_ã€‚<br>å› ä¸ºç±»å¯ä»¥åˆ›å»ºå‡ºç±»å‹ï¼Œæ‰€ä»¥èƒ½å¤Ÿåœ¨å…è®¸ä½¿ç”¨æ¥å£çš„åœ°æ–¹ä½¿ç”¨ç±»</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Point3d <span class=\"keyword\">extends</span> Point &#123;</span><br><span class=\"line\">  z: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> point3d: Point3d = &#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>, <span class=\"attr\">z</span>: <span class=\"number\">4</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äº”ã€å‡½æ•°\"><a href=\"#äº”ã€å‡½æ•°\" class=\"headerlink\" title=\"äº”ã€å‡½æ•°\"></a>äº”ã€å‡½æ•°</h2><h3 id=\"5-1-ä»‹ç»\"><a href=\"#5-1-ä»‹ç»\" class=\"headerlink\" title=\"5.1 ä»‹ç»\"></a>5.1 ä»‹ç»</h3><blockquote>\n<p>å‡½æ•°æ˜¯ <code>JavaScript</code> åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚å®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ï¼Œæ¨¡æ‹Ÿå±‚ï¼Œä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ï¼Œå‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰ è¡Œä¸ºçš„åœ°æ–¹ã€‚<code>TypeScript</code> ä¸º <code>JavaScript</code> å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„ä½¿ç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"5-2-å‡½æ•°ç±»å‹\"><a href=\"#5-2-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"5.2 å‡½æ•°ç±»å‹\"></a>5.2 å‡½æ•°ç±»å‹</h3><h4 id=\"5-2-1-ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\"><a href=\"#5-2-1-ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\" class=\"headerlink\" title=\"5.2.1 ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\"></a>5.2.1 ä¸ºå‡½æ•°å®šä¹‰ç±»å‹</h4><blockquote>\n<p>æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå‚æ•°æ·»åŠ ç±»å‹ä¹‹åå†ä¸ºå‡½æ•°æœ¬èº«æ·»åŠ è¿”å›å€¼ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>TypeScript</code> èƒ½å¤Ÿæ ¹æ®è¿”å›è¯­å¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸çœç•¥å®ƒã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myAdd = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5-2-2-ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\"><a href=\"#5-2-2-ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"5.2.2 ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\"></a>5.2.2 ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myAdd1: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">number</span> = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å‡½æ•°ç±»å‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<em>å‚æ•°ç±»å‹</em> å’Œ _è¿”å›å€¼ç±»å‹_ã€‚å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æ˜¯éœ€è¦çš„ã€‚æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>åªè¦å‚æ•°ç±»å‹æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„å‡½æ•°ç±»å‹ï¼Œè€Œä¸åœ¨ä¹å‚æ•°åæ˜¯å¦æ­£ç¡®ã€‚</li>\n<li>ç¬¬äºŒéƒ¨åˆ†æ˜¯è¿”å›å€¼ç±»å‹ã€‚å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹é—´ä½¿ç”¨ <code>=&gt;</code> ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚ å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸º <code>void</code>,è€Œä¸èƒ½ç•™ç©ºã€‚</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>å‡½æ•°çš„ç±»å‹åªæ˜¯ç”±å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç»„æˆçš„ã€‚å‡½æ•°ä¸­ä½¿ç”¨çš„æ•è·å˜é‡ä¸ä¼šä½“ç°åœ¨ç±»å‹é‡Œã€‚å®é™…ä¸Šï¼Œè¿™äº›å˜é‡æ˜¯å‡½æ•°çš„éšè—çŠ¶æ€å¹¶ä¸æ˜¯ç»„æˆ <code>API</code> çš„ä¸€éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myAdd2: <span class=\"function\">(<span class=\"params\">baseValue: <span class=\"built_in\">number</span>, increment: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">number</span> = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5-2-3-æ¨æ–­ç±»å‹\"><a href=\"#5-2-3-æ¨æ–­ç±»å‹\" class=\"headerlink\" title=\"5.2.3 æ¨æ–­ç±»å‹\"></a>5.2.3 æ¨æ–­ç±»å‹</h4><blockquote>\n<p>åœ¨å°è¯•ä¸‹é¢è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹ã€‚è¿™å«åšï¼šâ€æŒ‰ä¸Šä¸‹æ–‡å½’ç±»â€ï¼Œæ˜¯ç±»å‹æ¨è®ºçš„ä¸€ç§ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä¸ºç¨‹åºæŒ‡å®šç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// myAdd has the full function type</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myAdd3 = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123; <span class=\"keyword\">return</span> x + y &#125;;</span><br><span class=\"line\"><span class=\"comment\">// The parameters `x` and `y` have the type number</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myAdd4: (baseValue: <span class=\"built_in\">number</span>, <span class=\"attr\">increment</span>: <span class=\"built_in\">number</span>) =<span class=\"built_in\">number</span> = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x, y</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-3-å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\"><a href=\"#5-3-å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\" class=\"headerlink\" title=\"5.3 å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\"></a>5.3 å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</h3><blockquote>\n<p><code>TypeScript</code> é‡Œçš„æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æ˜¯å¿…é¡»çš„ã€‚è¿™ä¸æ˜¯æŒ‡ä¸èƒ½ä¼ é€’ <code>null</code> æˆ– <code>undefined</code> ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯è¯´ç¼–è¯‘å™¨æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºæ¯ä¸ªå‚æ•°éƒ½ä¼ å…¥äº†å€¼ã€‚ç¼–è¯‘å™¨è¿˜ä¼šå‡è®¾åªæœ‰è¿™äº›å‚æ•°ä¼šè¢«ä¼ é€’è¿›å‡½æ•°ã€‚</p>\n</blockquote>\n<ol>\n<li>ç®€çŸ­åœ°è¯´ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¸ªæ•°å¿…é¡»ä¸å‡½æ•°æœŸæœ›çš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, lastName: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// let result1 =  buildName(&quot;Bob&quot;); // error</span></span><br><span class=\"line\"><span class=\"comment\">// let result2 = buildName(&quot;Bob&quot;, &quot;Jack&quot;, &quot;Sr.&quot;); // error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result3 = buildName(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><code>JavaScript</code>é‡Œï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä¼ å¯ä¸ä¼ ã€‚æ²¡ä¼ å‚çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯ <code>undefined</code>ã€‚åœ¨ <code>TypeScript</code> é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°æ—è¾¹ä½¿ç”¨ <code>?</code> å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚</li>\n<li>æ³¨æ„ï¼šå¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…é€‰å‚æ•°åé¢ï¼Œä¸èƒ½æ”¾åœ¨å‰é¢</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName1</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, lastName?: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (lastName) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> firstName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> result_1 = buildName1(<span class=\"string\">&quot;Bob&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result_2 = buildName1(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// let result_3 = buildName1(&quot;Bob&quot;, &quot;Jack&quot;, &quot;Sr.&quot;); // error</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>å¯ä»¥è®¾ç½®é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°</li>\n<li>åœ¨æ‰€æœ‰å¿…é¡»å‚æ•°åé¢çš„å¸¦é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸å¯é€‰å‚æ•°ä¸€æ ·ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥çœç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯é€‰å‚æ•°ä¸æœ«å°¾çš„é»˜è®¤å‚æ•°å…±äº«å‚æ•°ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName2</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, lastName = <span class=\"string\">&quot;Smith&quot;</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>ä¸æ™®é€šå¯é€‰å‚æ•°å‚æ•°ä¸åŒçš„æ˜¯ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°ä¸éœ€è¦æ”¾åœ¨å¿…é¡»å‚æ•°çš„åé¢ã€‚å¦‚æœå¸¦é»˜è®¤å€¼çš„å‚æ•°å‡ºç°åœ¨å¿…é¡»å‚æ•°çš„å‰é¢ï¼Œç”¨æˆ·å¿…é¡»æ˜ç¡®çš„ä¼ å…¥ <code>undefined</code> å€¼æ¥è·å¾—é»˜è®¤å€¼ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName3</span>(<span class=\"params\">firstName = <span class=\"string\">&quot;Will&quot;</span>, lastName: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// let result__1 = buildName3(&quot;Bob&quot;); // error</span></span><br><span class=\"line\"><span class=\"comment\">// let result__2 = buildName3(&quot;Bob&quot;, &quot;Jack&quot;, &quot;Sr.&quot;); // error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result__3 = buildName3(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result__4 = buildName3(<span class=\"literal\">undefined</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-4-å‰©ä½™å‚æ•°\"><a href=\"#5-4-å‰©ä½™å‚æ•°\" class=\"headerlink\" title=\"5.4 å‰©ä½™å‚æ•°\"></a>5.4 å‰©ä½™å‚æ•°</h3><blockquote>\n<p>å¿…è¦å‚æ•°ï¼Œé»˜è®¤å‚æ•° å’Œ å¯é€‰å‚æ•° æœ‰ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬è¡¨ç¤ºæŸä¸€ä¸ªå‚æ•°ã€‚æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ è¿›æ¥ã€‚åœ¨ <code>JavaScript</code> é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>arguments</code> æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œ</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, ...restOfName: <span class=\"built_in\">string</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + restOfName.join(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> employeeName = buildName(<span class=\"string\">&quot;Jose&quot;</span>, <span class=\"string\">&quot;Smith&quot;</span>, <span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Alice&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å‰©ä½™å‚æ•°ä¼šè¢«å½“ä½œä¸ªæ•°ä¸é™çš„å¯é€‰å‚æ•°ã€‚å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»ºå‚æ•°æ•°ç»„ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å·åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName1</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, ...restOfName: <span class=\"built_in\">string</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + restOfName.join(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> buildNameFun: <span class=\"function\">(<span class=\"params\">fName: <span class=\"built_in\">string</span>, ...rest: <span class=\"built_in\">string</span>[]</span>) =&gt;</span> <span class=\"built_in\">string</span> = buildName1;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>this</code> å‚æ•°ã€‚åœ¨ä½¿ç”¨äº† <code>--noImplicitThis</code> æ ‡è®°ä¹‹åï¼Œ<code>this</code> ç±»å‹å¯èƒ½ä¼šæ˜¯ <code>any</code>ã€‚æ­¤æ—¶éœ€è¦æä¾›ä¸€ä¸ªæ˜¾ç¤ºçš„ <code>this</code> å‚æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Card &#123;</span><br><span class=\"line\">  suit: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  card: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Deck &#123;</span><br><span class=\"line\">  suits: <span class=\"built_in\">string</span>[];</span><br><span class=\"line\">  cards: <span class=\"built_in\">number</span>[];</span><br><span class=\"line\"></span><br><span class=\"line\">  createCardPicker(<span class=\"built_in\">this</span>: Deck): <span class=\"function\">() =&gt;</span> Card;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> deck: Deck = &#123;</span><br><span class=\"line\">  suits: [<span class=\"string\">&quot;hearts&quot;</span>, <span class=\"string\">&quot;spades&quot;</span>, <span class=\"string\">&quot;clubs&quot;</span>, <span class=\"string\">&quot;diamonds&quot;</span>],</span><br><span class=\"line\">  cards: <span class=\"built_in\">Array</span>(<span class=\"number\">52</span>),</span><br><span class=\"line\">  createCardPicker(): <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">this</span>: Deck</span>) =&gt;</span> Card &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> pickedCard = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">52</span>);</span><br><span class=\"line\">      <span class=\"keyword\">let</span> pickedSuit = <span class=\"built_in\">Math</span>.floor(pickedCard / <span class=\"number\">13</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">suit</span>: <span class=\"built_in\">this</span>.suits[pickedSuit], <span class=\"attr\">card</span>: pickedCard % <span class=\"number\">13</span> &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> cardPicker = deck.createCardPicker();</span><br><span class=\"line\"><span class=\"keyword\">let</span> pickedCard = cardPicker();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`card: <span class=\"subst\">$&#123;pickedCard.card&#125;</span> of <span class=\"subst\">$&#123;pickedCard.suit&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å…­ã€æ³›å‹\"><a href=\"#å…­ã€æ³›å‹\" class=\"headerlink\" title=\"å…­ã€æ³›å‹\"></a>å…­ã€æ³›å‹</h2><h3 id=\"6-1-ä»‹ç»\"><a href=\"#6-1-ä»‹ç»\" class=\"headerlink\" title=\"6.1 ä»‹ç»\"></a>6.1 ä»‹ç»</h3><blockquote>\n<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ <code>API</code>ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚<br>åœ¨åƒ <code>C#</code> å’Œ <code>Java</code> è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>æ³›å‹</code> æ¥åˆ›å»ºå¯é‡ç”¨ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚<br>é™¤äº†æ³›å‹æ¥å£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºæ³›å‹ç±»ã€‚æ³¨æ„ï¼Œæ— æ³•åˆ›å»ºæ³›å‹æšä¸¾å’Œæ³›å‹å‘½åç©ºé—´ã€‚</p>\n</blockquote>\n<h3 id=\"6-2-æ³›å‹ä¹‹-hello-world\"><a href=\"#6-2-æ³›å‹ä¹‹-hello-world\" class=\"headerlink\" title=\"6.2 æ³›å‹ä¹‹ hello world\"></a>6.2 æ³›å‹ä¹‹ hello world</h3><blockquote>\n<p>åˆ›å»ºä¸€ä¸ª <code>identity</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä»»ä½•ä¼ å…¥å®ƒçš„å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœä¸ä½¿ç”¨æ³›å‹ï¼Œå‡½æ•°å¯èƒ½æ˜¯ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity</span>(<span class=\"params\">arg: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>any</code> ç±»å‹å®šä¹‰å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ä¼ å…¥çš„ç±»å‹ä¸è¿”å›çš„ç±»å‹ä¸ç›¸åŒã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity1</span>(<span class=\"params\">arg: <span class=\"built_in\">any</span></span>): <span class=\"title\">any</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿è¿”å›å€¼çš„ç±»å‹ä¸ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚</p>\n</blockquote>\n<ul>\n<li>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»å‹å˜é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œåªèƒ½ç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity2</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨æ–¹å¼ä¸€ï¼šä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç±»å‹å‚æ•°</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> output = identity2&lt;<span class=\"built_in\">string</span>&gt;(<span class=\"string\">&quot;myString&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨æ–¹å¼äºŒ(æ›´æ™®é)ï¼šåˆ©ç”¨äº†ç±»å‹æ¨è®º-å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®š <code>T</code> çš„ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> output2 = identity2(<span class=\"string\">&quot;myString&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-3-ä½¿ç”¨æ³›å‹å˜é‡\"><a href=\"#6-3-ä½¿ç”¨æ³›å‹å˜é‡\" class=\"headerlink\" title=\"6.3 ä½¿ç”¨æ³›å‹å˜é‡\"></a>6.3 ä½¿ç”¨æ³›å‹å˜é‡</h3><blockquote>\n<p>ä½¿ç”¨æ³›å‹åˆ›å»ºåƒ <code>identity</code> è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨è¦æ±‚ä½ åœ¨å‡½æ•°ä½“å¿…é¡»æ­£ç¡®çš„ä½¿ç”¨è¿™ä¸ªé€šç”¨çš„ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œä½ å¿…é¡»æŠŠè¿™äº›å‚æ•°å½“ä½œæ˜¯ä»»æ„æˆ–æ‰€æœ‰ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœæˆ‘ä»¬æƒ³æ‰“å°å‡º <code>arg</code> çš„é•¿åº¦ï¼Œä¹Ÿè®¸ä¼šè¿™æ ·åšã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length); <span class=\"comment\">// é”™è¯¯ï¼ŒT ç±»å‹ä¹Ÿè®¸ä¸ä¼šæœ‰.lengthå±æ€§</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœæˆ‘ä»¬åƒæ“ä½œ <code>T</code> ç±»å‹çš„æ•°ç»„</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T[]</span>): <span class=\"title\">T</span>[] </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity2</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: <span class=\"built_in\">Array</span>&lt;T&gt;</span>): <span class=\"title\">Array</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-4-æ³›å‹ç±»å‹-æ³›å‹æ¥å£\"><a href=\"#6-4-æ³›å‹ç±»å‹-æ³›å‹æ¥å£\" class=\"headerlink\" title=\"6.4 æ³›å‹ç±»å‹(æ³›å‹æ¥å£)\"></a>6.4 æ³›å‹ç±»å‹(æ³›å‹æ¥å£)</h3><ol>\n<li>æ³›å‹å‡½æ•°çš„ç±»å‹å’Œéæ³›å‹å‡½æ•°çš„ç±»å‹ä¸€æ ·ï¼Œé¦–å…ˆåˆ—å‡ºç±»å‹å‚æ•°ï¼Œç±»ä¼¼äºå‡½æ•°å£°æ˜ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity: &lt;T&gt;<span class=\"function\">(<span class=\"params\">arg: T</span>) =&gt;</span> T = identity;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºç±»å‹ä¸­çš„æ³›å‹ç±»å‹å‚æ•°ä½¿ç”¨ä¸åŒçš„åç§°ï¼Œåªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity1</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity1: &lt;U&gt;<span class=\"function\">(<span class=\"params\">arg: U</span>) =&gt;</span> U = identity;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰è°ƒç”¨ç­¾åçš„å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰æ³›å‹å‡½æ•°ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity2</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity2: &#123; &lt;T&gt;(arg: T): T &#125; = identity;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>è¿™å¼•å¯¼æˆ‘ä»¬å»å†™ç¬¬ä¸€ä¸ªæ³›å‹æ¥å£äº†ã€‚æˆ‘ä»¬æŠŠä¸Šé¢ä¾‹å­é‡Œçš„å¯¹è±¡å­—é¢é‡æ‹¿å‡ºæ¥åšä¸ºä¸€ä¸ªæ¥å£ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> GenericIdentityFn &#123;</span><br><span class=\"line\">  &lt;T&gt;(arg: T): T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity3</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity3: GenericIdentityFn = identity3;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>æˆ‘ä»¬å¯èƒ½æƒ³æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹(æ¯”å¦‚ï¼š<code>Dictionary&lt;string&gt;</code> è€Œä¸åªæ˜¯ <code>Dictionary</code>)ã€‚è¿™æ ·æ¥å£é‡Œçš„å…¶å®ƒæˆå‘˜ä¹Ÿèƒ½çŸ¥é“è¿™ä¸ªå‚æ•°çš„ç±»å‹äº†ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> _GenericIdentityFn&lt;T&gt; &#123;</span><br><span class=\"line\">  (arg: T): T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_identity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> _myIdentity: _GenericIdentityFn&lt;<span class=\"built_in\">number</span>&gt; = _identity;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹åšäº†å°‘è®¸æ”¹åŠ¨ã€‚ä¸å†æè¿°æ³›å‹å‡½æ•°ï¼Œè€Œæ˜¯æŠŠéæ³›å‹å‡½æ•°ç­¾åä½œä¸ºæ³›å‹ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>GenericIdentityFn</code> çš„æ—¶å€™ï¼Œè¿˜å¾—ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹(è¿™é‡Œæ˜¯ï¼š<code>number</code>)ï¼Œä»è€Œé”å®šä¹‹åä»£ç é‡Œä½¿ç”¨çš„ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºæè¿°å“ªéƒ¨åˆ†ç±»å‹å±äºæ³›å‹éƒ¨åˆ†æ¥è¯´ï¼Œç†è§£ä½•æ—¶æŠŠå‚æ•° â€œæ”¾åœ¨è°ƒç”¨ç­¾åé‡Œâ€ å’Œä½•æ—¶ â€œæ”¾åœ¨æ¥å£ä¸Šâ€ æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p>\n</blockquote>\n<h3 id=\"6-5-æ³›å‹ç±»\"><a href=\"#6-5-æ³›å‹ç±»\" class=\"headerlink\" title=\"6.5 æ³›å‹ç±»\"></a>6.5 æ³›å‹ç±»</h3><blockquote>\n<p>æ³›å‹ç±»å’Œæ³›å‹æ¥å£å·®ä¸å¤šã€‚æ³›å‹ç±»ä½¿ç”¨ <code>&lt;&gt;</code> æ‹¬èµ·æ³›å‹ç±»å‹ï¼Œè·Ÿåœ¨ç±»ååé¢ã€‚ç±»åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé™æ€éƒ¨åˆ† å’Œ å®ä¾‹éƒ¨åˆ†ã€‚æ³›å‹ç±»æŒ‡çš„æ˜¯å®ä¾‹éƒ¨åˆ†çš„ç±»å‹ï¼Œæ‰€ä»¥ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>enericNumber</code> ç±»çš„ä½¿ç”¨æ˜¯éå¸¸ç›´è§‚çš„ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå»é™åˆ¶å®ƒåªèƒ½ä½¿ç”¨ <code>number</code> ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–å…¶å®ƒæ›´å¤æ‚çš„ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GenericNumber</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  zeroValue: T;</span><br><span class=\"line\">  add: <span class=\"function\">(<span class=\"params\">x: T, y: T</span>) =&gt;</span> T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myGenericNumber = <span class=\"keyword\">new</span> GenericNumber&lt;<span class=\"built_in\">number</span>&gt;();</span><br><span class=\"line\">myGenericNumber.zeroValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">myGenericNumber.add = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> stringNumeric = <span class=\"keyword\">new</span> GenericNumber&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">stringNumeric.zeroValue = <span class=\"string\">&quot; &quot;</span>;</span><br><span class=\"line\">stringNumeric.add = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(stringNumeric.add(stringNumeric.zeroValue, <span class=\"string\">&quot;test&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-6-æ³›å‹çº¦æŸ\"><a href=\"#6-6-æ³›å‹çº¦æŸ\" class=\"headerlink\" title=\"6.6 æ³›å‹çº¦æŸ\"></a>6.6 æ³›å‹çº¦æŸ</h3><blockquote>\n<p>æˆ‘ä»¬åº”è¯¥è®°å¾—ä¹‹å‰çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™æƒ³è¦æ“ä½œæŸç±»å‹çš„ä¸€ç»„å€¼ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ç»„å€¼å…·æœ‰ä»€ä¹ˆæ ·çš„å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨ <code>loggingIdentity</code> ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®¿é—® <code>arg</code> çš„ <code>length</code> å±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å¹¶ä¸èƒ½è¯æ˜æ¯ç§ç±»å‹éƒ½æœ‰ length å±æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç›¸æ¯”ä¸æ“ä½œ <code>any</code> æ‰€æœ‰ç±»å‹ï¼Œæˆ‘ä»¬æƒ³è¦é™åˆ¶å‡½æ•°å»å¤„ç†ä»»æ„å¸¦æœ‰ <code>.length</code> å±æ€§çš„æ‰€æœ‰ç±»å‹ã€‚åªè¦ä¼ å…¥çš„ç±»å‹æœ‰è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±å…è®¸ï¼Œå°±æ˜¯è¯´è‡³å°‘åŒ…å«è¿™ä¸€å±æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ—å‡ºå¯¹äº <code>T</code> çš„çº¦æŸè¦æ±‚ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å« <code>.length</code> å±æ€§çš„æ¥å£ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£å’Œ <code>extends</code> å…³é”®å­—æ¥å®ç°çº¦æŸã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Lengthwise &#123;</span><br><span class=\"line\">  length: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">Lengthwise</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ­¤æ—¶è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸã€‚å› æ­¤å®ƒä¸å†é€‚ç”¨äºä»»æ„ç±»å‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loggingIdentity(<span class=\"number\">3</span>); <span class=\"comment\">// error</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«çš„å±æ€§ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loggingIdentity(&#123; <span class=\"attr\">length</span>: <span class=\"number\">10</span>, <span class=\"attr\">value</span>: <span class=\"number\">3</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-7-åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\"><a href=\"#6-7-åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\" class=\"headerlink\" title=\"6.7 åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\"></a>6.7 åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°</h3><blockquote>\n<p>ä½ å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¸”å®ƒè¢«å¦ä¸€ä¸ªç±»å‹å‚æ•°æ‰€çº¦æŸã€‚ä¾‹å¦‚ï¼Œç°åœ¨æˆ‘ä»¬éœ€æƒ³è¦ç”¨å±æ€§åä»å¯¹è±¡é‡Œè·å–è¿™ä¸ªå±æ€§ã€‚å¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸ªå±æ€§å­˜åœ¨äºå¯¹è±¡ <code>obj</code> ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸¤ä¸ªç±»å‹ä¹‹é—´ä½¿ç”¨çº¦æŸã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getProperty</span>&lt;<span class=\"title\">T</span>, <span class=\"title\">K</span> <span class=\"title\">extends</span> <span class=\"title\">keyof</span> <span class=\"title\">T</span>&gt;(<span class=\"params\">obj: T, key: K</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj[key];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>, <span class=\"attr\">c</span>: <span class=\"number\">3</span>, <span class=\"attr\">d</span>: <span class=\"number\">4</span> &#125;;</span><br><span class=\"line\">getProperty(x, <span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">getProperty(x, <span class=\"string\">&quot;m&quot;</span>); <span class=\"comment\">// error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-8-åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\"><a href=\"#6-8-åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\" class=\"headerlink\" title=\"6.8 åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\"></a>6.8 åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹</h3><blockquote>\n<p>åœ¨ <code>TypeScript</code> ä½¿ç”¨æ³›å‹åˆ›å»ºå·¥å‚å‡½æ•°æ—¶ï¼Œéœ€è¦å¼•ç”¨æ„é€ å‡½æ•°çš„ç±»ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">create</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">c: &#123; <span class=\"keyword\">new</span> (): T &#125;</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> c();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­ï¼Œä½¿ç”¨åŸå‹å±æ€§æ¨æ–­å¹¶çº¦æŸæ„é€ å‡½æ•°ä¸ç±»å®ä¾‹çš„å…³ç³»ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BeeKeeper</span> </span>&#123;</span><br><span class=\"line\">  hasMask: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZooKeeper</span> </span>&#123;</span><br><span class=\"line\">  nameTag: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  numLegs: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bee</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  keeper: BeeKeeper;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lion</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  keeper: ZooKeeper;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createInstance</span>&lt;<span class=\"title\">A</span> <span class=\"title\">extends</span> <span class=\"title\">Animal</span>&gt;(<span class=\"params\">c: <span class=\"keyword\">new</span> () =&gt; A</span>): <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> c();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">createInstance(Lion).keeper.nameTag;</span><br><span class=\"line\">createInstance(Bee).keeper.hasMask;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-9-å¤šä¸ªç±»å‹å˜é‡\"><a href=\"#6-9-å¤šä¸ªç±»å‹å˜é‡\" class=\"headerlink\" title=\"6.9 å¤šä¸ªç±»å‹å˜é‡\"></a>6.9 å¤šä¸ªç±»å‹å˜é‡</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">info</span>&lt;<span class=\"title\">S</span>, <span class=\"title\">N</span>&gt;(<span class=\"params\">name: S, age: N</span>): [<span class=\"title\">S</span>, <span class=\"title\">N</span>] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [name, age];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(info(<span class=\"string\">&quot;pr&quot;</span>, <span class=\"number\">10</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(info&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>&gt;(<span class=\"string\">&quot;pr&quot;</span>, <span class=\"number\">18</span>));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸ƒã€æšä¸¾\"><a href=\"#ä¸ƒã€æšä¸¾\" class=\"headerlink\" title=\"ä¸ƒã€æšä¸¾\"></a>ä¸ƒã€æšä¸¾</h2><h3 id=\"7-1-ä»‹ç»\"><a href=\"#7-1-ä»‹ç»\" class=\"headerlink\" title=\"7.1 ä»‹ç»\"></a>7.1 ä»‹ç»</h3><blockquote>\n<p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦æœ‰åå­—çš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚<code>TypeScript</code> æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚</p>\n</blockquote>\n<h3 id=\"7-2-æ•°å­—æšä¸¾\"><a href=\"#7-2-æ•°å­—æšä¸¾\" class=\"headerlink\" title=\"7.2 æ•°å­—æšä¸¾\"></a>7.2 æ•°å­—æšä¸¾</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Direction &#123;</span><br><span class=\"line\">  Up = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Down,</span><br><span class=\"line\">  Left,</span><br><span class=\"line\">  Right</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œ<code>Up</code>ä½¿ç”¨åˆå§‹åŒ–ä¸º <code>1</code>ï¼Œå…¶ä½™æˆå‘˜ä¼šä» <code>1</code> å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚ æ¢å¥è¯è¯´ï¼Œ<code>Direction.Up</code> çš„å€¼ä¸º <code>1</code>ï¼Œ<code>Down</code> å€¼ä¸º <code>2</code>ï¼Œ<code>Left</code> å€¼ä¸º <code>3</code>ï¼Œ<code>Right</code> å€¼ä¸º <code>4</code>ã€‚</p>\n</blockquote>\n<ol>\n<li>æˆ‘ä»¬è¿˜å¯ä»¥å®Œå…¨ä¸ä½¿ç”¨åˆå§‹åŒ–å™¨</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Direction2 &#123;</span><br><span class=\"line\">  Up,</span><br><span class=\"line\">  Down,</span><br><span class=\"line\">  Left,</span><br><span class=\"line\">  Right</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç°åœ¨ï¼Œ<code>Up</code> çš„å€¼ä¸º <code>0</code>ï¼Œ<code>Down</code> çš„å€¼ä¸º <code>1</code> ç­‰ç­‰ã€‚ å½“æˆ‘ä»¬ä¸åœ¨ä¹æˆå‘˜çš„å€¼çš„æ—¶å€™ï¼Œè¿™ç§è‡ªå¢é•¿çš„è¡Œä¸ºæ˜¯å¾ˆæœ‰ç”¨å¤„çš„ï¼Œä½†æ˜¯è¦æ³¨æ„æ¯ä¸ªæšä¸¾æˆå‘˜çš„å€¼éƒ½æ˜¯ä¸åŒçš„ã€‚</p>\n</blockquote>\n<ol start=\"2\">\n<li>ä½¿ç”¨æšä¸¾å¾ˆç®€å•ï¼šé€šè¿‡æšä¸¾çš„å±æ€§æ¥è®¿é—®æšä¸¾æˆå‘˜ï¼Œå’Œæšä¸¾çš„åå­—æ¥è®¿é—®æšä¸¾ç±»å‹ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> _Response &#123;</span><br><span class=\"line\">  No = <span class=\"number\">0</span>,</span><br><span class=\"line\">  Yes = <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">respond</span>(<span class=\"params\">recipient: <span class=\"built_in\">string</span>, message: _Response</span>): <span class=\"title\">void</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">respond(<span class=\"string\">&quot;Princess Caroline&quot;</span>, _Response.Yes);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æ•°å­—æšä¸¾å¯ä»¥è¢«æ··å…¥åˆ°è®¡ç®—è¿‡çš„å’Œå¸¸é‡æˆå‘˜ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚</li>\n</ol>\n<blockquote>\n<p>ç®€çŸ­åœ°è¯´ï¼Œä¸å¸¦åˆå§‹åŒ–å™¨çš„æšä¸¾æˆ–è€…è¢«æ”¾åœ¨ç¬¬ä¸€çš„ä½ç½®ï¼Œæˆ–è€…è¢«æ”¾åœ¨ä½¿ç”¨äº†æ•°å­—å¸¸é‡æˆ–å…¶å®ƒå¸¸é‡åˆå§‹åŒ–äº†çš„æšä¸¾åé¢ã€‚æ¢å¥è¯è¯´ï¼Œä¸‹é¢çš„æƒ…å†µæ˜¯ä¸è¢«å…è®¸çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  A = getSomeValue(),</span><br><span class=\"line\">  B <span class=\"comment\">// error! &#x27;A&#x27; is not constant-initialized, so &#x27;B&#x27; needs an initializer</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-3-å­—ç¬¦ä¸²æšä¸¾\"><a href=\"#7-3-å­—ç¬¦ä¸²æšä¸¾\" class=\"headerlink\" title=\"7.3 å­—ç¬¦ä¸²æšä¸¾\"></a>7.3 å­—ç¬¦ä¸²æšä¸¾</h3><blockquote>\n<p>å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„è¿è¡Œæ—¶çš„å·®åˆ«ã€‚åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Direction &#123;</span><br><span class=\"line\">  Up = <span class=\"string\">&quot;UP&quot;</span>,</span><br><span class=\"line\">  Down = <span class=\"string\">&quot;DOWN&quot;</span>,</span><br><span class=\"line\">  Left = <span class=\"string\">&quot;LEFT&quot;</span>,</span><br><span class=\"line\">  Right = <span class=\"string\">&quot;RIGHT&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„ - å®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼ˆå°½ç®¡åå‘æ˜ å°„ä¼šæœ‰æ‰€å¸®åŠ©ï¼‰ï¼Œå­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚</p>\n</blockquote>\n<h3 id=\"7-4-å¼‚æ„æšä¸¾\"><a href=\"#7-4-å¼‚æ„æšä¸¾\" class=\"headerlink\" title=\"7.4 å¼‚æ„æšä¸¾\"></a>7.4 å¼‚æ„æšä¸¾</h3><blockquote>\n<p>ä»æŠ€æœ¯çš„è§’åº¦æ¥è¯´ï¼Œæšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜ï¼Œä½†æ˜¯ä½ ä¼¼ä¹å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> BooleanLikeHeterogeneousEnum &#123;</span><br><span class=\"line\">  No = <span class=\"number\">0</span>,</span><br><span class=\"line\">  Yes = <span class=\"string\">&quot;YES&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é™¤éä½ çœŸçš„æƒ³è¦åˆ©ç”¨ <code>JavaScript</code> è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œå¦åˆ™æˆ‘ä»¬ä¸å»ºè®®è¿™æ ·åšã€‚</p>\n</blockquote>\n<h3 id=\"7-5-è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\"><a href=\"#7-5-è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\" class=\"headerlink\" title=\"7.5 è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\"></a>7.5 è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜</h3><blockquote>\n<p>æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒå¯ä»¥æ˜¯å¸¸é‡æˆ–è®¡ç®—å‡ºæ¥çš„ã€‚å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œæšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯å¸¸é‡</p>\n</blockquote>\n<ol>\n<li>å®ƒæ˜¯æšä¸¾çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸”æ²¡æœ‰åˆå§‹åŒ–å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹å®ƒè¢«èµ‹äºˆå€¼ <code>0</code>ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  X</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>å®ƒä¸å¸¦æœ‰åˆå§‹åŒ–å™¨ä¸”å®ƒä¹‹å‰çš„æšä¸¾æˆå‘˜æ˜¯ä¸€ä¸ªæ•°å­—å¸¸é‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰æšä¸¾æˆå‘˜çš„å€¼ä¸ºå®ƒä¸Šä¸€ä¸ªæšä¸¾æˆå‘˜çš„å€¼åŠ  <code>1</code>ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E1 &#123;</span><br><span class=\"line\">  X,</span><br><span class=\"line\">  Y,</span><br><span class=\"line\">  Z</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">enum</span> E2 &#123;</span><br><span class=\"line\">  A = <span class=\"number\">1</span>,</span><br><span class=\"line\">  B,</span><br><span class=\"line\">  C</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æšä¸¾æˆå‘˜ä½¿ç”¨ å¸¸é‡æšä¸¾è¡¨è¾¾å¼è¿›è¡Œåˆå§‹åŒ–ã€‚å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ˜¯ TypeScript è¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚</li>\n</ol>\n<blockquote>\n<p>å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼š</p>\n<ol>\n<li>ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰</li>\n<li>ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰</li>\n<li>å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼</li>\n<li>ä¸€å…ƒè¿ç®—ç¬¦ +ï¼Œ-ï¼Œï½ å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼</li>\n<li>å¸¸é‡æšä¸¾è¡¨è¾¾å¼ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ <code>+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%ï¼Œ&lt;&lt;ï¼Œ&gt;&gt;ï¼Œ&gt;&gt;&gt;ï¼Œ&amp;ï¼Œ|ï¼Œ^</code> çš„æ“ä½œå¯¹è±¡</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>è‹¥å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸º <code>NaN</code> æˆ– <code>Infinity</code>ï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ‰€æœ‰å…¶å®ƒæƒ…å†µçš„æšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯éœ€è¦è®¡ç®—å¾—å‡ºçš„å€¼</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> FileAccess &#123;</span><br><span class=\"line\">  <span class=\"comment\">// constant numbers</span></span><br><span class=\"line\">  None,</span><br><span class=\"line\">  Read = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">1</span>,</span><br><span class=\"line\">  White = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">2</span>,</span><br><span class=\"line\">  ReadWhite = Read | White,</span><br><span class=\"line\">  <span class=\"comment\">// computed number</span></span><br><span class=\"line\">  G = <span class=\"string\">&quot;123&quot;</span>.length</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-6-è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\"><a href=\"#7-6-è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\" class=\"headerlink\" title=\"7.6 è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\"></a>7.6 è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹</h3><blockquote>\n<p>å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„éè®¡ç®—çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å­é›†ï¼šå­—é¢é‡æšä¸¾æˆå‘˜ã€‚å­—é¢é‡æšä¸¾æˆå‘˜æ˜¯æŒ‡ä¸å¸¦æœ‰åˆå§‹å€¼çš„å¸¸é‡æšä¸¾æˆå‘˜ï¼Œæˆ–è€…æ˜¯è¢«åˆå§‹åŒ–ä¸ºï¼š</p>\n<ol>\n<li>ä»»ä½•å­—ç¬¦ä¸²å­—é¢é‡(ä¾‹å¦‚ï¼š<code>&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;</code>)</li>\n<li>ä»»ä½•æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š<code>1, 100</code>)</li>\n<li>åº”ç”¨äº†ä¸€å…ƒ - ç¬¦å·çš„æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š<code>-1, -100</code>) å½“æ‰€æœ‰æšä¸¾æˆå‘˜éƒ½æ‹¥æœ‰å­—é¢é‡æšä¸¾å€¼æ—¶ï¼Œå®ƒå°±æœ‰äº†ä¸€ç§ç‰¹æ®Šçš„å«ä¹‰ã€‚</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>é¦–å…ˆï¼Œæšä¸¾æˆå‘˜æˆä¸ºäº†ç±»å‹ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æŸäº›æˆå‘˜åªèƒ½æ˜¯æšä¸¾æˆå‘˜çš„å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> ShapeKind &#123;</span><br><span class=\"line\">  Circle,</span><br><span class=\"line\">  Square</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Circle &#123;</span><br><span class=\"line\">  kind: ShapeKind.Circle;</span><br><span class=\"line\">  radius: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Square &#123;</span><br><span class=\"line\">  kind: ShapeKind.Square;</span><br><span class=\"line\">  sideLength: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> c: Circle = &#123;</span><br><span class=\"line\">  kind: ShapeKind.Square, <span class=\"comment\">// error</span></span><br><span class=\"line\">  radius: <span class=\"number\">100</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦ä¸€ä¸ªå˜åŒ–æ˜¯æšä¸¾ç±»å‹æœ¬èº«å˜æˆäº†æ¯ä¸ªæšä¸¾æˆå‘˜çš„è”åˆã€‚è™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®º è”åˆç±»å‹ ã€‚ä½†ä½ åªè¦çŸ¥é“é€šè¿‡è”åˆæšä¸¾ï¼Œç±»å‹ç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå®ƒå¯ä»¥çŸ¥é“æšä¸¾é‡Œçš„å€¼çš„é›†åˆã€‚å› æ­¤ï¼Œ<code>TypeScript</code> èƒ½å¤Ÿæ•è·åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™çŠ¯çš„æ„šè ¢çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  Foo,</span><br><span class=\"line\">  Bar</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">x: E</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x !== E.Foo || x !== E.Bar) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// // Error! Operator &#x27;!==&#x27; cannot be applied to types &#x27;E.Foo&#x27; and &#x27;E.Bar&#x27;.</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å…ˆæ£€æŸ¥ <code>x</code> æ˜¯å¦ä¸æ˜¯ <code>E.Foo</code>ã€‚ å¦‚æœé€šè¿‡äº†è¿™ä¸ªæ£€æŸ¥ï¼Œç„¶å <code>||</code> ä¼šå‘ç”ŸçŸ­è·¯æ•ˆæœï¼Œ<br><code>if</code> è¯­å¥ä½“é‡Œçš„å†…å®¹ä¼šè¢«æ‰§è¡Œã€‚ ç„¶è€Œï¼Œè¿™ä¸ªæ£€æŸ¥æ²¡æœ‰é€šè¿‡ï¼Œé‚£ä¹ˆ x åˆ™åªèƒ½ä¸º <code>E.Foo</code>ï¼Œå› æ­¤æ²¡ç†ç”±å†å»æ£€æŸ¥å®ƒæ˜¯å¦ä¸º <code>E.Bar</code>ã€‚</p>\n</blockquote>\n<h3 id=\"7-7-è¿è¡Œæ—¶çš„æšä¸¾\"><a href=\"#7-7-è¿è¡Œæ—¶çš„æšä¸¾\" class=\"headerlink\" title=\"7.7 è¿è¡Œæ—¶çš„æšä¸¾\"></a>7.7 è¿è¡Œæ—¶çš„æšä¸¾</h3><ul>\n<li>æšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  X,</span><br><span class=\"line\">  Y,</span><br><span class=\"line\">  Z</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯ä»¥ä¼ é€’ç»™å‡½æ•°ä¹ˆï¼Ÿ</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">obj: &#123; X: <span class=\"built_in\">number</span> &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj.X;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ²¡é—®é¢˜ï¼Œå› ä¸º <code>&quot;E&quot;</code> åŒ…å«ä¸€ä¸ªæ•°å€¼å‹å±æ€§ <code>&quot;X&quot;</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">f(E);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-8-ç¼–è¯‘æ—¶çš„æšä¸¾\"><a href=\"#7-8-ç¼–è¯‘æ—¶çš„æšä¸¾\" class=\"headerlink\" title=\"7.8 ç¼–è¯‘æ—¶çš„æšä¸¾\"></a>7.8 ç¼–è¯‘æ—¶çš„æšä¸¾</h3><blockquote>\n<p>å°½ç®¡ä¸€ä¸ªæšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ï¼Œä½† <code>keyof</code> å…³é”®å­—çš„è¡Œä¸ºä¸å…¶ä½œç”¨åœ¨å¯¹è±¡ä¸Šæ—¶æœ‰æ‰€ä¸åŒã€‚åº”è¯¥ä½¿ç”¨ <code>keyof</code> <code>typeof</code> æ¥è·å–ä¸€ä¸ªè¡¨ç¤ºæšä¸¾é‡Œæ‰€æœ‰å­—ç¬¦ä¸² <code>key</code> çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> LogLevel &#123;</span><br><span class=\"line\">  ERROR,</span><br><span class=\"line\">  WARN,</span><br><span class=\"line\">  INFO,</span><br><span class=\"line\">  DEBUG</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç­‰åŒäºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> LogLevelStrings = <span class=\"string\">&quot;ERROR&quot;</span> | <span class=\"string\">&quot;WARN&quot;</span> | <span class=\"string\">&quot;INFO&quot;</span> | <span class=\"string\">&quot;DEBUG&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> LogLevelStrings = keyof <span class=\"keyword\">typeof</span> LogLevel;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printImportant</span>(<span class=\"params\">key: LogLevelStrings, message: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> num = LogLevel[key];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (num &lt;= LogLevel.WARN) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Level key is: &quot;</span>, key);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Level value is: &quot;</span>, num);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Level message is &quot;</span>, message);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">printImportant(<span class=\"string\">&quot;ERROR&quot;</span>, <span class=\"string\">&quot;This is a message&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-9-åå‘æ˜ å°„\"><a href=\"#7-9-åå‘æ˜ å°„\" class=\"headerlink\" title=\"7.9 åå‘æ˜ å°„\"></a>7.9 åå‘æ˜ å°„</h3><blockquote>\n<p>é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§åä½œä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº†åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­—ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> _Enum &#123;</span><br><span class=\"line\">  A</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _a = _Enum.A;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _nameOfA = _Enum[_a]; <span class=\"comment\">// &quot;A&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>TypeScript</code> å¯èƒ½ä¼šå°†è¿™æ®µä»£ç ç¼–è¯‘ä¸ºä¸‹é¢çš„ <code>JavaScript</code>ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Enum;</span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">Enum</span>) </span>&#123;</span><br><span class=\"line\">  Enum[(Enum[<span class=\"string\">&quot;A&quot;</span>] = <span class=\"number\">0</span>)] = <span class=\"string\">&quot;A&quot;</span>;</span><br><span class=\"line\">&#125;)(Enum || (Enum = &#123;&#125;));</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = Enum.A;</span><br><span class=\"line\"><span class=\"keyword\">var</span> nameOfA = Enum[a]; <span class=\"comment\">// &quot;A&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œæšä¸¾ç±»å‹è¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ­£å‘æ˜ å°„ï¼ˆ<code>name -&gt; value</code>ï¼‰å’Œåå‘æ˜ å°„ï¼ˆ<code>value -&gt; name</code>ï¼‰ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¼•ç”¨æšä¸¾æˆå‘˜æ€»ä¼šç”Ÿæˆä¸ºå¯¹å±æ€§è®¿é—®å¹¶ä¸”æ°¸è¿œä¹Ÿä¸ä¼šå†…è”ä»£ç ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è¦æ³¨æ„çš„æ˜¯ä¸ä¼šä¸ºå­—ç¬¦ä¸²æšä¸¾æˆå‘˜ç”Ÿæˆåå‘æ˜ å°„ã€‚</p>\n</blockquote>\n<h3 id=\"7-10-const-æšä¸¾\"><a href=\"#7-10-const-æšä¸¾\" class=\"headerlink\" title=\"7.10 const æšä¸¾\"></a>7.10 const æšä¸¾</h3><blockquote>\n<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚ä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>const</code> æšä¸¾ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ <code>const</code> ä¿®é¥°ç¬¦æ¥å®šä¹‰ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">enum</span> Enum &#123;</span><br><span class=\"line\">  A = <span class=\"number\">1</span>,</span><br><span class=\"line\">  B = A * <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¸¸é‡æšä¸¾åªèƒ½ä½¿ç”¨å¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒäºå¸¸è§„çš„æšä¸¾ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«åˆ é™¤ã€‚å¸¸é‡æšä¸¾æˆå‘˜åœ¨ä½¿ç”¨çš„åœ°æ–¹ä¼šè¢«å†…è”è¿›æ¥ã€‚ ä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºï¼Œå¸¸é‡æšä¸¾ä¸å…è®¸åŒ…å«è®¡ç®—æˆå‘˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">enum</span> Directions &#123;</span><br><span class=\"line\">  Up,</span><br><span class=\"line\">  Down,</span><br><span class=\"line\">  Left,</span><br><span class=\"line\">  Right</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];</span><br><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆåçš„ä»£ç ä¸ºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> directions1 = [<span class=\"number\">0</span> <span class=\"comment\">/* Up */</span>, <span class=\"number\">1</span> <span class=\"comment\">/* Down */</span>, <span class=\"number\">2</span> <span class=\"comment\">/* Left */</span>, <span class=\"number\">3</span> <span class=\"comment\">/* Right */</span>];</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-11-å¤–éƒ¨æšä¸¾\"><a href=\"#7-11-å¤–éƒ¨æšä¸¾\" class=\"headerlink\" title=\"7.11 å¤–éƒ¨æšä¸¾\"></a>7.11 å¤–éƒ¨æšä¸¾</h3><blockquote>\n<p>å¤–éƒ¨æšä¸¾ ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">enum</span> Enum &#123;</span><br><span class=\"line\">  A = <span class=\"number\">1</span>,</span><br><span class=\"line\">  B,</span><br><span class=\"line\">  C = <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¤–éƒ¨æšä¸¾ å’Œ éå¤–éƒ¨æšä¸¾ ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼Œåœ¨æ­£å¸¸çš„æšä¸¾é‡Œï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•çš„æˆå‘˜è¢«å½“æˆå¸¸é‡æˆå‘˜ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºéå¸¸é‡çš„å¤–éƒ¨æšä¸¾è€Œè¨€ï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•æ—¶è¢«å½“åšéœ€è¦ç»è¿‡è®¡ç®—çš„ã€‚</p>\n</blockquote>\n<h2 id=\"å…«ã€ç±»å‹åˆ«å\"><a href=\"#å…«ã€ç±»å‹åˆ«å\" class=\"headerlink\" title=\"å…«ã€ç±»å‹åˆ«å\"></a>å…«ã€ç±»å‹åˆ«å</h2><h3 id=\"8-1-ç±»å‹åˆ«å\"><a href=\"#8-1-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"8.1 ç±»å‹åˆ«å\"></a>8.1 ç±»å‹åˆ«å</h3><ol>\n<li>åˆ›å»ºåˆ«åéœ€è¦ä½¿ç”¨å…³é”®å­— <code>type</code></li>\n<li>ä½¿ç”¨åˆ«åé€šå¸¸ç”¨åœ¨æœ‰ è”åˆç±»å‹ çš„åœºæ™¯ä¸‹</li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šä¸è¦æ··æ·†äº† <code>TypeScript</code> ä¸­çš„ <code>=&gt;</code>; å’Œ <code>ES6</code> ä¸­çš„ <code>=&gt;</code> åœ¨ <code>TypeScript</code> çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ<code>=&gt;</code> ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ã€‚(å·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‰©èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹)ï¼›åœ¨ <code>ES6</code> ä¸­ï¼Œ<code>=&gt;</code> å«åšç®­å¤´å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Name = <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> ShowName = <span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NameOrShowName = Name | ShowName;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getName = <span class=\"function\">(<span class=\"params\">name: NameOrShowName</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> name === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> name();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> showName = <span class=\"function\">() =&gt;</span> <span class=\"string\">&quot;pr is a boy&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(getName(<span class=\"string\">&quot;pr&quot;</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(getName(showName()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-2-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"><a href=\"#8-2-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"8.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"></a>8.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> EventNames = <span class=\"string\">&quot;click&quot;</span> | <span class=\"string\">&quot;scroll&quot;</span> | <span class=\"string\">&quot;mousemove&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> handleEvent: <span class=\"function\">(<span class=\"params\">a: Element, b: EventNames</span>) =&gt;</span> <span class=\"built_in\">string</span> = <span class=\"function\">(<span class=\"params\">ele: Element, event: EventNames</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;ele&#125;</span> <span class=\"subst\">$&#123;event&#125;</span>`</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">handleEvent(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;header&quot;</span>), <span class=\"string\">&quot;scroll&quot;</span>);</span><br><span class=\"line\">handleEvent(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;footer&quot;</span>), <span class=\"string\">&quot;click&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¹ã€ç±»å‹æ¨è®º\"><a href=\"#ä¹ã€ç±»å‹æ¨è®º\" class=\"headerlink\" title=\"ä¹ã€ç±»å‹æ¨è®º\"></a>ä¹ã€ç±»å‹æ¨è®º</h2><h3 id=\"9-1-åŸºç¡€\"><a href=\"#9-1-åŸºç¡€\" class=\"headerlink\" title=\"9.1 åŸºç¡€\"></a>9.1 åŸºç¡€</h3><blockquote>\n<p>åœ¨ <code>TypeScript</code> é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å˜é‡ <code>x</code> çš„ç±»å‹è¢«æ¨æ–­ä¸ºæ•°å­—ã€‚è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç±»å‹æ¨è®ºæ˜¯ç›´æ¥äº†å½“åœ°ã€‚</p>\n</blockquote>\n<h3 id=\"9-2-æœ€ä½³é€šç”¨ç±»å‹\"><a href=\"#9-2-æœ€ä½³é€šç”¨ç±»å‹\" class=\"headerlink\" title=\"9.2 æœ€ä½³é€šç”¨ç±»å‹\"></a>9.2 æœ€ä½³é€šç”¨ç±»å‹</h3><blockquote>\n<p>å½“éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"literal\">null</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºäº†æ¨æ–­ <code>x</code> çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©: <code>number</code> å’Œ <code>null</code>ã€‚è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ç›¸åŒçš„é€šç”¨ç±»å‹ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> zoo = [<span class=\"keyword\">new</span> Rhino(), <span class=\"keyword\">new</span> Elephant(), <span class=\"keyword\">new</span> Snake()];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®© <code>zoo</code> è¢«æ¨æ–­ä¸º <code>Animal[]</code> ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯ <code>Animal</code> ç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºäº†æ›´æ­£ï¼Œå½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> zoo: Animal[] = [<span class=\"keyword\">new</span> Rhino(), <span class=\"keyword\">new</span> Elephant(), <span class=\"keyword\">new</span> Snake()];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³é€šç”¨ç±»å‹çš„è¯ï¼Œç±»å‹æ¨æ–­çš„ç»“æœä¸ºè”åˆæ•°ç»„ç±»å‹ï¼Œ<code>(Rhino | Elephant | Snake)[]</code>ã€‚</p>\n</blockquote>\n<h3 id=\"9-3-ä¸Šä¸‹æ–‡å½’ç±»\"><a href=\"#9-3-ä¸Šä¸‹æ–‡å½’ç±»\" class=\"headerlink\" title=\"9.3 ä¸Šä¸‹æ–‡å½’ç±»\"></a>9.3 ä¸Šä¸‹æ–‡å½’ç±»</h3><ol>\n<li><code>TypeScript</code> ç±»å‹æ¨è®ºä¹Ÿå¯èƒ½æŒ‰ç…§ç›¸åçš„æ–¹å‘è¿›è¡Œï¼Œè¿™è¢«å«åšâ€ä¸Šä¸‹æ–‡å½’ç±»â€ã€‚æŒ‰ä¸Šä¸‹æ–‡å½’ç±»ä¼šå‘ç”Ÿåœ¨è¡¨è¾¾å¼ç±»å‹ä¸æ‰€å¤„çš„ä½ç½®ç›¸å…³æ—¶ã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>TypeScript</code> ç±»å‹æ£€æŸ¥å™¨ä¼šä½¿ç”¨ <code>Window.onmousedown</code> å‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚æ‰€ä»¥å®ƒèƒ½å¤Ÿæ¨æ–­å‡º <code>mouseEvent</code> å‚æ•°çš„ç±»å‹ä¸­åŒ…å«äº† <code>button</code> å±æ€§è€Œä¸åŒ…å« <code>kangaroo</code> å±æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onmousedown = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">mouseEvent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(mouseEvent.button); <span class=\"comment\">// &lt;- Ok</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(mouseEvent.kangaroo); <span class=\"comment\">// &lt;- error</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><code>TypeScript</code> è¿˜èƒ½å¤Ÿå¾ˆå¥½åœ°æ¨æ–­å‡ºå…¶å®ƒä¸Šä¸‹æ–‡ä¸­çš„ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onscroll = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">uiEvent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(uiEvent.button); <span class=\"comment\">// Error</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„å‡½æ•°è¢«èµ‹ç»™ <code>window.onscroll``ï¼ŒTypeScript</code> èƒ½å¤ŸçŸ¥é“ <code>uiEvent</code> æ˜¯ <code>UIEvent</code>ï¼Œè€Œä¸æ˜¯ <code>MouseEventã€‚UIEvent</code> å¯¹è±¡ä¸åŒ…å« <code>button</code> å±æ€§ï¼Œå› æ­¤ <code>TypeScript</code> ä¼šæŠ¥é”™ã€‚</p>\n</blockquote>\n<ol>\n<li>å¦‚æœè¿™ä¸ªå‡½æ•°ä¸æ˜¯åœ¨ä¸Šä¸‹æ–‡å½’ç±»çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹å°†éšå¼çš„æˆä¸º <code>any</code> ç±»å‹ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæŠ¥é”™(é™¤éä½ å¼€å¯äº† <code>--noImplicitAny</code> é€‰é¡¹)</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handler = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">uiEvent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(uiEvent.button); <span class=\"comment\">// &lt;- Ok</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç¡®åœ°ä¸ºå‡½æ•°å‚æ•°ç±»å‹èµ‹å€¼æ¥è¦†å†™ä¸Šä¸‹æ–‡ç±»å‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onscroll = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">uiEvent: <span class=\"built_in\">any</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(uiEvent.button); <span class=\"comment\">// &lt;- Now, no error is given</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†è¿™æ®µä»£ç ä¼šæ‰“å° <code>undefined</code>ï¼Œå› ä¸º <code>uiEvent</code> å¹¶ä¸åŒ…å« <code>button</code> å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸Šä¸‹æ–‡å½’ç±»ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚é€šå¸¸åŒ…å«å‡½æ•°çš„å‚æ•°ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜å’Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createZoo</span>(<span class=\"params\"></span>): <span class=\"title\">Animal</span>[] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [<span class=\"keyword\">new</span> Rhino(), <span class=\"keyword\">new</span> Elephant(), <span class=\"keyword\">new</span> Snake()];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œæœ€ä½³é€šç”¨ç±»å‹æœ‰ <code>4</code> ä¸ªå€™é€‰è€…ï¼š<code>Animal, Rhino, Elephant, Snake</code>ã€‚å½“ç„¶ï¼Œ<code>Animal</code> ä¼šè¢«ä½œä¸ºæœ€ä½³é€šç”¨ç±»å‹ã€‚</p>\n</blockquote>\n<h2 id=\"åã€ç±»å‹å…¼å®¹æ€§\"><a href=\"#åã€ç±»å‹å…¼å®¹æ€§\" class=\"headerlink\" title=\"åã€ç±»å‹å…¼å®¹æ€§\"></a>åã€ç±»å‹å…¼å®¹æ€§</h2><h3 id=\"10-1-ä»‹ç»\"><a href=\"#10-1-ä»‹ç»\" class=\"headerlink\" title=\"10.1 ä»‹ç»\"></a>10.1 ä»‹ç»</h3><blockquote>\n<p><code>TypeScript</code> é‡Œçš„å…¼å®¹æ€§æ˜¯åŸºäºç»“æ„å­ç±»å‹çš„ã€‚ç»“æ„ç±»å‹æ˜¯ä¸€ç§åªä½¿ç”¨å…¶æˆå‘˜æ¥æè¿°ç±»å‹çš„æ–¹å¼ã€‚å®ƒæ­£å¥½ä¸åä¹‰( <code>nominal</code> )ç±»å‹å½¢æˆå¯¹æ¯”ã€‚(è¯‘è€…æ³¨ï¼šåœ¨åŸºäºåä¹‰ç±»å‹çš„ç±»å‹ç³»ç»Ÿä¸­ï¼Œæ•°æ®ç±»å‹çš„å…¼å®¹æ€§æˆ–ç­‰ä»·æ€§æ˜¯é€šè¿‡æ˜ç¡®çš„å£°æ˜/æˆ–ç±»å‹çš„åç§°æ¥å†³å®šçš„ã€‚è¿™ä¸ç»“æ„æ€§ç±»å‹ç³»ç»Ÿä¸åŒï¼Œå®ƒæ˜¯åŸºäºç±»å‹çš„ç»„æˆç»“æ„ï¼Œä¸”ä¸è¦æ±‚æ˜ç¡®åœ°å£°æ˜ã€‚)çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Named &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> p: Named;</span><br><span class=\"line\"><span class=\"comment\">// Ok, because of structural typing</span></span><br><span class=\"line\">p = <span class=\"keyword\">new</span> Person();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä½¿ç”¨åŸºäºåä¹‰ç±»å‹çš„æ–­è¨€ï¼Œæ¯”å¦‚ <code>C#</code> æˆ– <code>Java</code> ä¸­ï¼Œè¿™æ®µä»£ç ä¼šæŠ¥é”™ï¼Œ å› ä¸º <code>Person</code> ç±»æ²¡æœ‰æ˜ç¡®è¯´æ˜å…¶å®ç°äº† <code>Named</code> æ¥å£ã€‚<br><code>TypeScript</code> çš„ç»“æ„æ€§å­ç±»å‹æ˜¯æ ¹æ® <code>JavaScript</code> ä»£ç çš„å…¸å‹å†™æ³•æ¥è®¾è®¡çš„ã€‚ å› ä¸º <code>JavaScript</code> é‡Œå¹¿æ³›åœ°ä½¿ç”¨åŒ¿åå¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°è¡¨è¾¾å¼å’Œå¯¹è±¡å­—é¢é‡ï¼Œ æ‰€ä»¥ä½¿ç”¨ç»“æ„ç±»å‹ç³»ç»Ÿæ¥æè¿°è¿™äº›ç±»å‹æ¯”ä½¿ç”¨åä¹‰ç±»å‹ç³»ç»Ÿæ›´å¥½ã€‚</p>\n</blockquote>\n<h3 id=\"10-2-å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\"><a href=\"#10-2-å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"10.2 å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\"></a>10.2 å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹</h3><blockquote>\n<p><code>TypeScript</code> çš„ç±»å‹ç³»ç»Ÿå…è®¸æŸäº›åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®è®¤å…¶å®‰å…¨æ€§çš„æ“ä½œã€‚å½“ä¸€ä¸ªç±»å‹ç³»ç»Ÿå…·æ­¤å±æ€§æ—¶ï¼Œè¢«å½“åšæ˜¯â€œä¸å¯é â€çš„ã€‚TypeScript å…è®¸è¿™ç§ä¸å¯é è¡Œä¸ºçš„å‘ç”Ÿæ˜¯ç»è¿‡ä»”ç»†è€ƒè™‘çš„ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šè§£é‡Šä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µå’Œå…¶æœ‰åˆ©çš„ä¸€é¢ã€‚</p>\n</blockquote>\n<h3 id=\"10-3-å¼€å§‹\"><a href=\"#10-3-å¼€å§‹\" class=\"headerlink\" title=\"10.3 å¼€å§‹\"></a>10.3 å¼€å§‹</h3><ul>\n<li><code>TypeScript</code> ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„åŸºæœ¬è§„åˆ™æ˜¯ï¼Œå¦‚æœ <code>x</code> è¦å…¼å®¹ <code>y</code>ï¼Œé‚£ä¹ˆ <code>y</code> è‡³å°‘å…·æœ‰ä¸ <code>x</code> ç›¸åŒçš„å±æ€§ã€‚æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Named &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> x: Named;</span><br><span class=\"line\"><span class=\"comment\">// y&#x27;s inferred type is &#123; name: string; location: string &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> y = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;Alice&quot;</span>, <span class=\"attr\">location</span>: <span class=\"string\">&quot;Seattle&quot;</span> &#125;;</span><br><span class=\"line\">x = y;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œè¦æ£€æŸ¥ <code>y</code> æ˜¯å¦èƒ½èµ‹å€¼ç»™ <code>x</code>ï¼Œç¼–è¯‘å™¨æ£€æŸ¥ <code>x</code> ä¸­çš„æ¯ä¸ªå±æ€§ï¼Œçœ‹æ˜¯å¦èƒ½åœ¨ <code>y</code> ä¸­ä¹Ÿæ‰¾åˆ°å¯¹åº”å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>y</code> å¿…é¡»åŒ…å«åå­—æ˜¯ <code>name</code> çš„ <code>string</code> ç±»å‹æˆå‘˜ã€‚<code>y</code> æ»¡è¶³æ¡ä»¶ï¼Œå› æ­¤èµ‹å€¼æ­£ç¡®ã€‚</p>\n</blockquote>\n<ul>\n<li>æ£€æŸ¥å‡½æ•°å‚æ•°æ—¶ä½¿ç”¨ç›¸åŒçš„è§„åˆ™</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">greet</span>(<span class=\"params\">n: Named</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello, &quot;</span> + n.name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">greet(y); <span class=\"comment\">// OK</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œ<code>y</code> æœ‰ä¸ªé¢å¤–çš„ <code>location</code> å±æ€§ï¼Œä½†è¿™ä¸ä¼šå¼•å‘é”™è¯¯ã€‚<br>åªæœ‰ç›®æ ‡ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ <code>Named</code>ï¼‰çš„æˆå‘˜ä¼šè¢«ä¸€ä¸€æ£€æŸ¥æ˜¯å¦å…¼å®¹ã€‚<br>è¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹æ˜¯é€’å½’è¿›è¡Œçš„ï¼Œæ£€æŸ¥æ¯ä¸ªæˆå‘˜åŠå­æˆå‘˜ã€‚</p>\n</blockquote>\n<h3 id=\"10-4-æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\"><a href=\"#10-4-æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\" class=\"headerlink\" title=\"10.4 æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\"></a>10.4 æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°</h3><ol>\n<li>ç›¸å¯¹æ¥è®²ï¼Œåœ¨æ¯”è¾ƒåŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹çš„æ—¶å€™æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œé—®é¢˜æ˜¯å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå‡½æ•°æ˜¯å…¼å®¹çš„ã€‚</li>\n</ol>\n<ul>\n<li>ä¸‹é¢æˆ‘ä»¬ä»ä¸¤ä¸ªç®€å•çš„å‡½æ•°å…¥æ‰‹ï¼Œå®ƒä»¬ä»…æ˜¯å‚æ•°åˆ—è¡¨ç•¥æœ‰ä¸åŒï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"function\">(<span class=\"params\">a: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> y = <span class=\"function\">(<span class=\"params\">b: <span class=\"built_in\">number</span>, s: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">y = x; <span class=\"comment\">// &lt;- Ok</span></span><br><span class=\"line\"><span class=\"comment\">// x = y; // &lt;- Error</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¦æŸ¥çœ‹ <code>x</code> æ˜¯å¦èƒ½èµ‹å€¼ç»™ <code>y</code>ï¼Œé¦–å…ˆçœ‹å®ƒä»¬çš„å‚æ•°åˆ—è¡¨ã€‚ <code>x</code> çš„æ¯ä¸ªå‚æ•°å¿…é¡»èƒ½åœ¨ <code>y</code> é‡Œæ‰¾åˆ°å¯¹åº”ç±»å‹çš„å‚æ•°ã€‚æ³¨æ„çš„æ˜¯å‚æ•°çš„åå­—ç›¸åŒä¸å¦æ— æ‰€è°“ï¼Œåªçœ‹å®ƒä»¬çš„ç±»å‹ã€‚ è¿™é‡Œï¼Œ<code>x</code> çš„æ¯ä¸ªå‚æ•°åœ¨ <code>y</code> ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„å‚æ•°ï¼Œæ‰€ä»¥å…è®¸èµ‹å€¼ã€‚ç¬¬äºŒä¸ªèµ‹å€¼é”™è¯¯ï¼Œå› ä¸º <code>y</code> æœ‰ä¸ªå¿…éœ€çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ <code>x</code> å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸å…è®¸èµ‹å€¼ã€‚<br>ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆå…è®¸å¿½ç•¥å‚æ•°ï¼Œåƒä¾‹å­ <code>y = x</code> ä¸­é‚£æ ·ã€‚ åŸå› æ˜¯å¿½ç•¥é¢å¤–çš„å‚æ•°åœ¨ <code>JavaScript</code> é‡Œæ˜¯å¾ˆå¸¸è§çš„ã€‚<br>ä¾‹å¦‚ï¼Œ<code>Array.forEach</code> ç»™å›è°ƒå‡½æ•°ä¼  <code>3</code> ä¸ªå‚æ•°ï¼šæ•°ç»„å…ƒç´ ï¼Œç´¢å¼• å’Œ æ•´ä¸ªæ•°ç»„ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä¼ å…¥ä¸€ä¸ªåªä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> items = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"comment\">// Don&#x27;t force these extra arguments</span></span><br><span class=\"line\">items.forEach(<span class=\"function\">(<span class=\"params\">item, index, array</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(item));</span><br><span class=\"line\"><span class=\"comment\">// Should be Ok</span></span><br><span class=\"line\">items.forEach(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> <span class=\"built_in\">console</span>.log(item));</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>ä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•å¤„ç†è¿”å›å€¼ç±»å‹ï¼Œåˆ›å»ºä¸¤ä¸ªä»…æ˜¯è¿”å›å€¼ç±»å‹ä¸åŒçš„å‡½æ•°ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x1 = <span class=\"function\">() =&gt;</span> (&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;Alice&quot;</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">let</span> y1 = <span class=\"function\">() =&gt;</span> (&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;Alice&quot;</span>, <span class=\"attr\">location</span>: <span class=\"string\">&quot;Seattle&quot;</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">x1 = y1; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">y1 = x1; <span class=\"comment\">// Error, because x() lacks a location property</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>ç±»å‹ç³»ç»Ÿå¼ºåˆ¶æºå‡½æ•°çš„è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ç›®æ ‡å‡½æ•°è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚</li>\n</ol>\n<h3 id=\"10-5-å‡½æ•°å‚æ•°åŒå‘åå˜\"><a href=\"#10-5-å‡½æ•°å‚æ•°åŒå‘åå˜\" class=\"headerlink\" title=\"10.5 å‡½æ•°å‚æ•°åŒå‘åå˜\"></a>10.5 å‡½æ•°å‚æ•°åŒå‘åå˜</h3><blockquote>\n<p>å½“æ¯”è¾ƒå‡½æ•°å‚æ•°ç±»å‹æ—¶ï¼Œåªæœ‰å½“æºå‡½æ•°å‚æ•°èƒ½å¤Ÿèµ‹å€¼ç»™ç›®æ ‡å‡½æ•°æˆ–è€…åè¿‡æ¥æ—¶æ‰èƒ½èµ‹å€¼æˆåŠŸã€‚è¿™æ˜¯ä¸ç¨³å®šçš„ï¼Œå› ä¸ºè°ƒç”¨è€…å¯èƒ½ä¼ å…¥äº†ä¸€ä¸ªå…·æœ‰æ›´ç²¾ç¡®ç±»å‹ä¿¡æ¯çš„å‡½æ•°ï¼Œä½†æ˜¯è°ƒç”¨è¿™ä¸ªä¼ å…¥çš„å‡½æ•°çš„æ—¶å€™å´ä½¿ç”¨äº†ä¸æ˜¯é‚£ä¹ˆç²¾ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œè¿™æå°‘ä¼šå‘å£°é”™è¯¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®ç°å¾ˆå¤š <code>JavaScript</code> é‡Œçš„å¸¸è§æ¨¡å¼ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> EventType &#123;</span><br><span class=\"line\">  Mouse,</span><br><span class=\"line\">  Keyboard</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Event &#123;</span><br><span class=\"line\">  timestamp: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> MouseEvent <span class=\"keyword\">extends</span> Event &#123;</span><br><span class=\"line\">  x1: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  y1: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> keyEvent <span class=\"keyword\">extends</span> Event &#123;</span><br><span class=\"line\">  keyCode: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">listenEvent</span>(<span class=\"params\">eventType: EventType, handler: (n: Event) =&gt; <span class=\"built_in\">void</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* â€¦â€¦ */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Unsound, but useful and common ä¸å®Œæ•´ï¼Œä½†æ˜¯å¸¸ç”¨å¸¸è§</span></span><br><span class=\"line\">listenEvent(EventType.Mouse, <span class=\"function\">(<span class=\"params\">e: MouseEvent</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;e.x1&#125;</span>,<span class=\"subst\">$&#123;e.y1&#125;</span>`</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Undesirable alternatives in presence of soundness å®Œæ•´ä½†æ˜¯ä¸å—æ¬¢è¿</span></span><br><span class=\"line\">listenEvent(EventType.Mouse, <span class=\"function\">(<span class=\"params\">e: Event</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;(&lt;MouseEvent&gt;e).x1&#125;</span>,<span class=\"subst\">$&#123;(&lt;MouseEvent&gt;e).y1&#125;</span>`</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">listenEvent(EventType.Mouse, &lt;<span class=\"function\">(<span class=\"params\">e: Event</span>) =&gt;</span> <span class=\"built_in\">void</span>&gt;(<span class=\"function\">(<span class=\"params\">e: MouseEvent</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;e.x1&#125;</span>,<span class=\"subst\">$&#123;e.y1&#125;</span>`</span>)));</span><br><span class=\"line\"><span class=\"comment\">// Still disallowed (clear error). Type safety enforced for wholly incompatible types</span></span><br><span class=\"line\"><span class=\"comment\">// ä»ç„¶ä¸å…è®¸ï¼ˆæ¸…é™¤é”™è¯¯ï¼‰ã€‚å®Œå…¨ä¸å…¼å®¹ç±»å‹æ‰€å¼ºåˆ¶è§„å®šçš„ç±»å‹å®‰å…¨</span></span><br><span class=\"line\"><span class=\"comment\">// listenEvent(EventType.Mouse, (e: number) =&gt; console.log(e));</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-6-å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\"><a href=\"#10-6-å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\" class=\"headerlink\" title=\"10.6 å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\"></a>10.6 å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°</h3><ol>\n<li>æ¯”è¾ƒå‡½æ•°å…¼å®¹æ€§çš„æ—¶å€™ï¼Œå¯é€‰å‚æ•°ä¸å¿…é¡»å‚æ•°æ˜¯å¯äº’æ¢çš„ã€‚æºç±»å‹ä¸Šæœ‰é¢å¤–çš„å¯é€‰å‚æ•°ä¸æ˜¯é”™è¯¯ï¼Œç›®æ ‡ç±»å‹çš„å¯é€‰å‚æ•°åœ¨æºç±»å‹é‡Œæ²¡æœ‰å¯¹åº”çš„å‚æ•°ä¹Ÿä¸æ˜¯é”™è¯¯ã€‚</li>\n<li>å½“ä¸€ä¸ªå‡½æ•°æœ‰å‰©ä½™å‚æ•°æ—¶ï¼Œå®ƒè¢«å½“åšæ— é™ä¸ªå¯é€‰å‚æ•°ã€‚</li>\n<li>è¿™å¯¹äºç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¨³å®šçš„ï¼Œä½†ä»è¿è¡Œæ—¶çš„è§’åº¦æ¥çœ‹ï¼Œå¯é€‰å‚æ•°ä¸€èˆ¬æ¥è¯´æ˜¯ä¸å¼ºåˆ¶çš„ï¼Œå› ä¸ºå¯¹äºå¤§å¤šæ•°å‡½æ•°æ¥è¯´ç›¸å½“äºä¼ é€’äº†ä¸€äº› undefined ã€‚</li>\n</ol>\n<blockquote>\n<p>æœ‰ä¸€ä¸ªå¥½çš„ä¾‹å­ï¼Œå¸¸è§çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å¹¶ç”¨å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯å¯é¢„çŸ¥çš„å‚æ•° ä½†å¯¹ç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¡®å®šçš„å‚æ•°æ¥è°ƒç”¨ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">invokeLater</span>(<span class=\"params\">args: <span class=\"built_in\">any</span>[], callback: (...args: <span class=\"built_in\">any</span>[]) =&gt; <span class=\"built_in\">void</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... Invoke callback with &#x27;args&#x27; ... é€šè¿‡argsè°ƒç”¨callback */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Unsound - invokeLater &quot;might&quot; provide any number of arguments</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸å¥å…¨çš„æ˜¯ - è¢«è°ƒç”¨æ—¶å€™å¯èƒ½ä¼šæä¾›ä»»æ„æ•°é‡çš„å‚æ•°</span></span><br><span class=\"line\">invokeLater([<span class=\"number\">1</span>, <span class=\"number\">2</span>], <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(x + <span class=\"string\">&quot;,&quot;</span> + y));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Confusing (x and y are actually required) and unrecoverable</span></span><br><span class=\"line\"><span class=\"comment\">// ä»¤æˆ‘ä»¬å›°æƒ‘(æ˜¯å¦éœ€è¦ x å’Œ y) å¹¶ä¸” ä¸å¯æ¢å¤</span></span><br><span class=\"line\">invokeLater([<span class=\"number\">1</span>, <span class=\"number\">2</span>], <span class=\"function\">(<span class=\"params\">x?, y?</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(x + <span class=\"string\">&quot;,&quot;</span> + y));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-7-å‡½æ•°é‡è½½\"><a href=\"#10-7-å‡½æ•°é‡è½½\" class=\"headerlink\" title=\"10.7 å‡½æ•°é‡è½½\"></a>10.7 å‡½æ•°é‡è½½</h3><blockquote>\n<p>å¯¹äºæœ‰é‡è½½çš„å‡½æ•°ï¼Œæºå‡½æ•°çš„æ¯ä¸ªé‡è½½éƒ½è¦åœ¨ç›®æ ‡å‡½æ•°ä¸Šæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°ç­¾åã€‚è¿™ç¡®ä¿äº†ç›®æ ‡å‡½æ•°å¯ä»¥åœ¨æ‰€æœ‰æºå‡½æ•°å¯è°ƒç”¨çš„åœ°æ–¹è°ƒç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"10-8-æšä¸¾\"><a href=\"#10-8-æšä¸¾\" class=\"headerlink\" title=\"10.8 æšä¸¾\"></a>10.8 æšä¸¾</h3><blockquote>\n<p>æšä¸¾ç±»å‹ä¸æ•°å­—ç±»å‹å…¼å®¹ï¼Œå¹¶ä¸”æ•°å­—ç±»å‹ä¸æšä¸¾ç±»å‹å…¼å®¹ã€‚ä¸åŒæšä¸¾ç±»å‹ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Status &#123;</span><br><span class=\"line\">  Ready,</span><br><span class=\"line\">  Waiting</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">enum</span> Color &#123;</span><br><span class=\"line\">  Red,</span><br><span class=\"line\">  Blue,</span><br><span class=\"line\">  Green</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> _status = Status.Ready;</span><br><span class=\"line\"><span class=\"comment\">// _status = Color.Green; // Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-9-ç±»\"><a href=\"#10-9-ç±»\" class=\"headerlink\" title=\"10.9 ç±»\"></a>10.9 ç±»</h3><blockquote>\n<p>ç±»ä¸å¯¹è±¡å­—é¢é‡å’Œæ¥å£å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼šç±»çš„é™æ€éƒ¨åˆ†å’Œå®ä¾‹éƒ¨åˆ†çš„ç±»å‹ã€‚æ¯”è¾ƒä¸¤ä¸ªç±»ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œåªæœ‰å®ä¾‹çš„æˆå‘˜ä¼šè¢«æ¯”è¾ƒã€‚é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ä¸åœ¨æ¯”è¾ƒçš„èŒƒå›´å†…ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  feet: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span>, numFeet: <span class=\"built_in\">number</span>, c: <span class=\"built_in\">boolean</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Size</span> </span>&#123;</span><br><span class=\"line\">  feet: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">numFeet: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a: Animal;</span><br><span class=\"line\"><span class=\"keyword\">let</span> s: Size;</span><br><span class=\"line\">a = s; <span class=\"comment\">//Ok</span></span><br><span class=\"line\">s = a; <span class=\"comment\">//Ok</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*  */</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-10-ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\"><a href=\"#10-10-ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\" class=\"headerlink\" title=\"10.10 ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\"></a>10.10 ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜</h3><blockquote>\n<p>ç±»çš„ç§æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜ä¼šå½±å“å…¼å®¹æ€§ã€‚ å½“æ£€æŸ¥ç±»å®ä¾‹çš„å…¼å®¹æ—¶ï¼Œå¦‚æœç›®æ ‡ç±»å‹åŒ…å«ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆæºç±»å‹å¿…é¡»åŒ…å«æ¥è‡ªåŒä¸€ä¸ªç±»çš„è¿™ä¸ªç§æœ‰æˆå‘˜ã€‚åŒæ ·åœ°ï¼Œè¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äºåŒ…å«å—ä¿æŠ¤æˆå‘˜å®ä¾‹çš„ç±»å‹æ£€æŸ¥ã€‚ è¿™å…è®¸å­ç±»èµ‹å€¼ç»™çˆ¶ç±»ï¼Œä½†æ˜¯ä¸èƒ½èµ‹å€¼ç»™å…¶å®ƒæœ‰åŒæ ·ç±»å‹çš„ç±»ã€‚</p>\n</blockquote>\n<h3 id=\"10-11-æ³›å‹\"><a href=\"#10-11-æ³›å‹\" class=\"headerlink\" title=\"10.11 æ³›å‹\"></a>10.11 æ³›å‹</h3><blockquote>\n<p>å› ä¸º <code>TypeScript</code> æ˜¯ç»“æ„æ€§çš„ç±»å‹ç³»ç»Ÿï¼Œç±»å‹å‚æ•°åªå½±å“ä½¿ç”¨å…¶åšä¸ºç±»å‹ä¸€éƒ¨åˆ†çš„ç»“æœç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Empty&lt;T&gt; &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> x: Empty&lt;<span class=\"built_in\">number</span>&gt;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> y: Empty&lt;<span class=\"built_in\">string</span>&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">x = y; <span class=\"comment\">// Ok, because y matches structure of x</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢ä»£ç é‡Œï¼Œ<code>x</code> å’Œ <code>y</code> æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬çš„ç»“æ„ä½¿ç”¨ç±»å‹å‚æ•°æ—¶ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p>\n</blockquote>\n<ul>\n<li>æŠŠè¿™ä¸ªä¾‹å­æ”¹å˜ä¸€ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªæˆå‘˜ï¼Œå°±èƒ½çœ‹å‡ºæ˜¯å¦‚ä½•å·¥ä½œçš„äº†ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> NotEmpty&lt;T&gt; &#123;</span><br><span class=\"line\">  data: T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> x1: NotEmpty&lt;<span class=\"built_in\">number</span>&gt;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> y1: NotEmpty&lt;<span class=\"built_in\">string</span>&gt;;</span><br><span class=\"line\">x1 = y1; <span class=\"comment\">// Errorï¼Œbecause x and y are not compatible</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨è¿™é‡Œï¼Œæ³›å‹ç±»å‹åœ¨ä½¿ç”¨æ—¶å°±å¥½æ¯”ä¸æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºæ²¡æŒ‡å®šæ³›å‹ç±»å‹çš„æ³›å‹å‚æ•°æ—¶ï¼Œä¼šæŠŠæ‰€æœ‰æ³›å‹å‚æ•°å½“æˆ <code>any</code> æ¯”è¾ƒã€‚ç„¶åç”¨ç»“æœç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå°±åƒä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> identity = <span class=\"function\"><span class=\"keyword\">function</span> &lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">x: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> reverse = <span class=\"function\"><span class=\"keyword\">function</span> &lt;<span class=\"title\">U</span>&gt;(<span class=\"params\">y: U</span>): <span class=\"title\">U</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">identity = reverse; <span class=\"comment\">// Ok, because (x: any) =&gt; any matches (y: any) =&gt; any</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-12-é«˜çº§ä¸»é¢˜\"><a href=\"#10-12-é«˜çº§ä¸»é¢˜\" class=\"headerlink\" title=\"10.12 é«˜çº§ä¸»é¢˜\"></a>10.12 é«˜çº§ä¸»é¢˜</h3><ul>\n<li>å­ç±»å‹å’Œèµ‹å€¼</li>\n</ul>\n<blockquote>\n<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†â€å…¼å®¹æ€§â€ï¼Œå®ƒåœ¨è¯­è¨€è§„èŒƒé‡Œæ²¡æœ‰å®šä¹‰ï¼Œåœ¨ <code>TypeScript</code> é‡Œï¼Œæœ‰ä¸¤ç§å…¼å®¹æ€§ï¼šå­ç±»å‹ å’Œ èµ‹å€¼ã€‚å®ƒä»¬çš„ä¸åŒç‚¹åœ¨äºï¼šèµ‹å€¼æ‰©å±•äº†å­ç±»å‹å…¼å®¹æ€§ï¼Œå¢åŠ äº†ä¸€äº›è§„åˆ™ï¼Œå…è®¸å’Œ <code>any</code> æ¥å›èµ‹å€¼ï¼Œä»¥åŠ enum å’Œå¯¹åº”æ•°å­—å€¼ä¹‹é—´çš„æ¥å›èµ‹å€¼ã€‚<br>è¯­è¨€é‡Œçš„ä¸åŒåœ°æ–¹åˆ†åˆ«ä½¿ç”¨äº†å®ƒä»¬ä¹‹ä¸­çš„æœºåˆ¶ã€‚å®é™…ä¸Šï¼Œç±»å‹å…¼å®¹æ€§æ˜¯ç”±èµ‹å€¼å…¼å®¹æ€§æ¥æ§åˆ¶çš„ï¼Œå³ä½¿åœ¨ <code>implements</code> å’Œ <code>extends</code> è¯­å¥ä¹Ÿä¸ä¾‹å¤–ã€‚</p>\n</blockquote>\n<h2 id=\"åä¸€ã€é«˜çº§ç±»å‹\"><a href=\"#åä¸€ã€é«˜çº§ç±»å‹\" class=\"headerlink\" title=\"åä¸€ã€é«˜çº§ç±»å‹\"></a>åä¸€ã€é«˜çº§ç±»å‹</h2><h3 id=\"11-1-äº¤å‰ç±»å‹\"><a href=\"#11-1-äº¤å‰ç±»å‹\" class=\"headerlink\" title=\"11.1 äº¤å‰ç±»å‹\"></a>11.1 äº¤å‰ç±»å‹</h3><blockquote>\n<p>äº¤å‰ç±»å‹ æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œ<code>Person &amp; Serializable &amp; Loggable</code> åŒæ—¶æ˜¯ <code>Person</code> å’Œ <code>Serializable</code> å’Œ <code>Loggable</code>ã€‚å°±æ˜¯è¯´è¿™ä¸ªç±»å‹çš„å¯¹è±¡åŒæ—¶æ‹¥æœ‰äº†è¿™ä¸‰ç§ç±»å‹çš„æˆå‘˜ã€‚<br>æˆ‘ä»¬å¤§å¤šæ•°æ˜¯åœ¨æ··å…¥( <code>mixins</code> )æˆ–å…¶å®ƒä¸é€‚åˆå…¸å‹é¢å‘å¯¹è±¡æ¨¡å‹çš„åœ°æ–¹çœ‹åˆ°äº¤å‰ç±»å‹çš„ä½¿ç”¨ã€‚(åœ¨ <code>JavaScript</code> é‡Œå‘ç”Ÿè¿™ç§æƒ…å†µçš„åœºåˆå¾ˆå¤šï¼)</p>\n</blockquote>\n<h4 id=\"11-1-1-ReadOnly-çš„å®ç°\"><a href=\"#11-1-1-ReadOnly-çš„å®ç°\" class=\"headerlink\" title=\"11.1.1 ReadOnly çš„å®ç°\"></a>11.1.1 <code>ReadOnly</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> ReadOnly&lt;T&gt; = &#123;</span><br><span class=\"line\">    readOnly [P <span class=\"keyword\">in</span> keyof T]: T[P];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-1-2-Partial-çš„å®ç°\"><a href=\"#11-1-2-Partial-çš„å®ç°\" class=\"headerlink\" title=\"11.1.2 Partial çš„å®ç°\"></a>11.1.2 <code>Partial</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Partial&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-1-3-Pick-çš„å®ç°\"><a href=\"#11-1-3-Pick-çš„å®ç°\" class=\"headerlink\" title=\"11.1.3 Pick çš„å®ç°\"></a>11.1.3 <code>Pick</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Pick&lt;T, K <span class=\"keyword\">extends</span> keyof T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T[P];</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-1-4-Record-çš„å®ç°\"><a href=\"#11-1-4-Record-çš„å®ç°\" class=\"headerlink\" title=\"11.1.4 Record çš„å®ç°\"></a>11.1.4 <code>Record</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Record&lt;K <span class=\"keyword\">extends</span> <span class=\"built_in\">string</span>, T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢æ˜¯å¦‚ä½•åˆ›å»ºæ··å…¥çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­(<code>&quot;target&quot;: &quot;es5&quot;</code>):</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend</span>&lt;<span class=\"title\">First</span>, <span class=\"title\">Second</span>&gt;(<span class=\"params\">first: First, second: Second</span>): <span class=\"title\">First</span> &amp; <span class=\"title\">Second</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> result: Partial&lt;First &amp; Second&gt;= &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> prop <span class=\"keyword\">in</span> first) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (first.hasOwnProperty(prop)) &#123;</span><br><span class=\"line\">            (&lt;First&gt;result)[prop] = first[prop];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> prop <span class=\"keyword\">in</span> second) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (second.hasOwnProperty(prop)) &#123;</span><br><span class=\"line\">            (&lt;Second&gt;result)[prop] = second[prop];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">First</span> &amp; <span class=\"attr\">Second</span>&gt;</span>result;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">&gt;</span></span><br><span class=\"line\"><span class=\"xml\">class Person &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    constructor(public name: string) &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    &#125;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">interface Loggable &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    log(name: string): void;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">class ConsoleLogger implements Loggable &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    log(name) &#123;</span></span><br><span class=\"line\"><span class=\"xml\">        console.log(`Hello, I&#x27;m $&#123;name&#125;`)</span></span><br><span class=\"line\"><span class=\"xml\">    &#125;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">const jim = extend(new Person(&quot;Jim&quot;), ConsoleLogger.prototype);</span></span><br><span class=\"line\"><span class=\"xml\">let c = jim.log(jim.name);</span></span><br><span class=\"line\"><span class=\"xml\">console.log(c);</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-2-è”åˆç±»å‹\"><a href=\"#11-2-è”åˆç±»å‹\" class=\"headerlink\" title=\"11.2 è”åˆç±»å‹\"></a>11.2 è”åˆç±»å‹</h3><blockquote>\n<p>è”åˆç±»å‹ å’Œ äº¤å‰ç±»å‹ å¾ˆæœ‰å…³è”ï¼Œä½†æ˜¯ä½¿ç”¨ä¸Šå´å®Œå…¨ä¸åŒã€‚å¶å°”ä½ ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªä»£ç åº“å¸Œæœ›ä¼ å…¥ <code>number</code> æˆ– <code>string</code> ç±»å‹çš„å‚æ•°ã€‚ä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Takes a string and adds &quot;padding&quot; to the left.</span></span><br><span class=\"line\"><span class=\"comment\"> * If &#x27;padding&#x27; is a string, then &#x27;padding&#x27; is appended to the left side.</span></span><br><span class=\"line\"><span class=\"comment\"> * If &#x27;padding&#x27; is a number, then that number of spaces is added to the left side.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">padLeft</span>(<span class=\"params\">value: <span class=\"built_in\">string</span>, padding: <span class=\"built_in\">any</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(padding + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>) + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> padding + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Expected string or number, got &#x27;<span class=\"subst\">$&#123;padding&#125;</span>&#x27;.`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">padLeft(<span class=\"string\">&quot;Hello World&quot;</span>, <span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>padLeft</code> å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œ<code>padding</code> å‚æ•°çš„ç±»å‹æŒ‡å®šæˆäº† <code>any</code>ã€‚è¿™å°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ—¢ä¸æ˜¯ <code>number</code> ä¹Ÿä¸æ˜¯ <code>string</code> ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯ <code>TypeScript</code> å´ä¸ä¼šæŠ¥é”™ã€‚</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> indentedString = padLeft(<span class=\"string\">&quot;Hello World&quot;</span>, <span class=\"literal\">true</span>); <span class=\"comment\">// ç¼–è¯‘é˜¶æ®µé€šè¿‡ï¼Œè¿è¡Œæ—¶æŠ¥é”™ã€‚</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;  åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€é‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†è¿™ä¸¤ç§ç±»å‹æŠ½è±¡æˆæœ‰å±‚çº§çš„ç±»å‹ã€‚è¿™ä¹ˆåšæ˜¾ç„¶æ˜¯éå¸¸æ¸…æ™°çš„ï¼Œä½†åŒæ—¶ä¹Ÿå­˜åœ¨äº†è¿‡åº¦è®¾è®¡ã€‚&#96;padLeft&#96; åŸå§‹ç‰ˆæœ¬çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯å…è®¸æˆ‘ä»¬ä¼ å…¥åŸå§‹ç±»å‹ã€‚è¿™æ ·åšçš„è¯ä½¿ç”¨èµ·æ¥æ—¢ç®€å•åˆæ–¹ä¾¿ã€‚å¦‚æœæˆ‘ä»¬å°±æ˜¯æƒ³ä½¿ç”¨å·²ç»å­˜åœ¨çš„å‡½æ•°çš„è¯ï¼Œè¿™ç§æ–°çš„æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚ä»£æ›¿ &#96;any&#96;ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ è”åˆç±»å‹ ä½œä¸º &#96;padding&#96; çš„å‚æ•°ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * Takes a string and adds &quot;padding&quot; to the left.</span><br><span class=\"line\"> * If &#39;padding&#39; is a string, then &#39;padding&#39; is appended to the left side.</span><br><span class=\"line\"> * If &#39;padding&#39; is a number, then that number of spaces is added to the left side.</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function padLeft1(value: string, padding: string | number) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; let indentedString1 &#x3D; padLeft1(&quot;Hello world&quot;, true); &#x2F;&#x2F; errors during compilation</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è”åˆç±»å‹ è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚æˆ‘ä»¬ä½¿ç”¨ç«–çº¿(<code>|</code>)åˆ†éš”æ¯ä¸ªç±»å‹ï¼Œæ‰€ä»¥ <code>number | string | boolean</code> è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½æ˜¯ <code>number</code>, <code>string</code>, <code>boolean</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Bird &#123;</span><br><span class=\"line\">  fly();</span><br><span class=\"line\"></span><br><span class=\"line\">  lagEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Fish &#123;</span><br><span class=\"line\">  swim();</span><br><span class=\"line\"></span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSmallPet</span>(<span class=\"params\"></span>): <span class=\"title\">Fish</span> | <span class=\"title\">Bird</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> pet = getSmallPet();</span><br><span class=\"line\">pet.layEggs(); <span class=\"comment\">// &lt;- ok</span></span><br><span class=\"line\"><span class=\"comment\">// pet.swim(); // &lt;- errors</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„è”åˆç±»å‹å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ä½ å¾ˆå®¹æ˜“å°±ä¹ æƒ¯äº†ã€‚å¦‚æœä¸€ä¸ªå€¼çš„ç±»å‹æ˜¯ <code>A | B</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®å®šçš„æ˜¯å®ƒåŒ…å«äº† <code>A</code> å’Œ <code>B</code> ä¸­å…±æœ‰çš„æˆå‘˜ã€‚è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>Bird</code> å…·æœ‰ä¸€ä¸ª <code>fly</code> æˆå‘˜ã€‚æˆ‘ä»¬ä¸èƒ½ç¡®å®šä¸€ä¸ª <code>Bird | Fish</code> ç±»å‹çš„å˜é‡æ˜¯å¦æœ‰ <code>fly</code> æ–¹æ³•ã€‚å¦‚æœå˜é‡åœ¨è¿è¡Œæ—¶æ˜¯ <code>Fish</code> ç±»å‹ï¼Œé‚£ä¹ˆè°ƒç”¨ <code>pet.fly()</code> å°±å‡ºé”™äº†ã€‚</p>\n</blockquote>\n<h3 id=\"11-3-ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\"><a href=\"#11-3-ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\" class=\"headerlink\" title=\"11.3 ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\"></a>11.3 ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†</h3><blockquote>\n<p>è”åˆç±»å‹é€‚ç”¨äºé‚£äº›å€¼å¯ä»¥ä¸ºä¸åŒç±»å‹çš„æƒ…å†µã€‚ä½†å½“æˆ‘ä»¬æƒ³ç¡®åˆ‡åœ°äº†è§£æ˜¯å¦ä¸º <code>Fish</code> æ—¶æ€ä¹ˆåŠï¼Ÿ<code>JavaScript</code> é‡Œå¸¸ç”¨æ¥åŒºåˆ† <code>2</code> ä¸ªå¯èƒ½å€¼çš„æ–¹æ³•æ˜¯æ£€æŸ¥æˆå‘˜æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¹‹å‰æåŠçš„ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®è”åˆç±»å‹ä¸­å…±åŒæ‹¥æœ‰çš„æˆå‘˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Fish &#123;</span><br><span class=\"line\">  swim();</span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Bird &#123;</span><br><span class=\"line\">  fly();</span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSmallPet</span>(<span class=\"params\"></span>): <span class=\"title\">Fish</span> | <span class=\"title\">Bird</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> pet = getSmallPet();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¯ä¸€ä¸ªè®¿é—®çš„æˆå‘˜éƒ½ä¼šæŠ¥é”™</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (pet.swim) &#123;</span><br><span class=\"line\">  pet.swim();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (pet.fly) &#123;</span><br><span class=\"line\">  pet.fly();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºäº†è®©è¿™æ®µä»£ç å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> ((&lt;Fish&gt;pet).swim) &#123;</span><br><span class=\"line\">  (&lt;Fish&gt;pet).swim();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((&lt;Bird&gt;pet).fly) &#123;</span><br><span class=\"line\">  (&lt;Bird&gt;pet).fly();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-4-ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\"><a href=\"#11-4-ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\" class=\"headerlink\" title=\"11.4 ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\"></a>11.4 ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«</h3><blockquote>\n<p>è¿™é‡Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸å¾—ä¸å¤šæ¬¡ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚å‡è‹¥æˆ‘ä»¬ä¸€æ—¦æ£€æŸ¥è¿‡ç±»å‹ï¼Œå°±èƒ½åœ¨ä¹‹åçš„æ¯ä¸ªåˆ†æ”¯é‡Œæ¸…æ¥šåœ°çŸ¥é“ <code>pet</code> çš„ç±»å‹çš„è¯å°±å¥½äº†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>TypeScript</code> é‡Œçš„ç±»å‹å®ˆå«æœºåˆ¶è®©å®ƒæˆä¸ºäº†ç°å®ã€‚ç±»å‹å®ˆå«å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚è¦æƒ³å®šä¹‰ä¸€ä¸ªç±»å‹å®ˆå«ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»å‹è°“è¯ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Fish &#123;</span><br><span class=\"line\">  swim();</span><br><span class=\"line\"></span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Bird &#123;</span><br><span class=\"line\">  fly();</span><br><span class=\"line\"></span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isFish</span>(<span class=\"params\">pet: Fish | Bird</span>): <span class=\"title\">pet</span> <span class=\"title\">is</span> <span class=\"title\">Fish</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (&lt;Fish&gt;pet).swim !== <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>pet is Fish</code> å°±æ˜¯ç±»å‹è°“è¯ã€‚è°“è¯ä¸º <code>parameterName is Type</code> è¿™ç§å½¢å¼ï¼Œ <code>parameterName</code> å¿…é¡»æ˜¯æ¥è‡ªäºå½“å‰å‡½æ•°ç­¾åé‡Œçš„ä¸€ä¸ªå‚æ•°åã€‚<br>æ¯å½“ä½¿ç”¨ä¸€äº›å˜é‡è°ƒç”¨ <code>isFish</code> <code>æ—¶ï¼ŒTypeScript</code> ä¼šå°†å˜é‡ç¼©å‡ä¸ºé‚£ä¸ªå…·ä½“çš„ç±»å‹ï¼Œåªè¦è¿™ä¸ªç±»å‹ä¸å˜é‡çš„åŸå§‹ç±»å‹æ˜¯å…¼å®¹çš„<br><code>swim</code> å’Œ <code>fly</code> çš„è°ƒç”¨éƒ½æ²¡æœ‰é—®é¢˜äº†</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (isFish(pet)) &#123;</span><br><span class=\"line\">  pet.swim();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  pet.fly();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>TypeScript</code> ä¸ä»…çŸ¥é“åœ¨ <code>if</code> åˆ†æ”¯é‡Œ <code>pet</code> æ˜¯ <code>Fish</code> ç±»å‹ï¼›å®ƒè¿˜æ¸…æ¥šåœ¨ <code>else</code> åˆ†ä¹‹é‡Œï¼Œä¸€å®šä¸æ˜¯ <code>Fish</code> ç±»å‹ï¼Œä¸€å®šæ˜¯ Bird ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"11-5-typeof-ç±»å‹å®ˆå«\"><a href=\"#11-5-typeof-ç±»å‹å®ˆå«\" class=\"headerlink\" title=\"11.5 typeof ç±»å‹å®ˆå«\"></a>11.5 typeof ç±»å‹å®ˆå«</h3><blockquote>\n<p>ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è”åˆç±»å‹ä¹¦å†™ <code>padLeft</code> ä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ©ç”¨ç±»å‹æ–­è¨€æ¥å†™ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isNumber</span>(<span class=\"params\">x: <span class=\"built_in\">any</span></span>): <span class=\"title\">x</span> <span class=\"title\">is</span> <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> x === <span class=\"string\">&quot;number&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isString</span>(<span class=\"params\">x: <span class=\"built_in\">any</span></span>): <span class=\"title\">x</span> <span class=\"title\">is</span> <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> x === <span class=\"string\">&quot;string&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">padLeft</span>(<span class=\"params\">value: <span class=\"built_in\">string</span>, padding: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isNumber(padding)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(padding + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>) + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isString(padding)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> padding + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Expected string or number, go <span class=\"subst\">$&#123;padding&#125;</span>.`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç„¶è€Œï¼Œå¿…é¡»è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯åŸå§‹ç±»å‹ï¼Œè¿™å¤ªç—›è‹¦äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¿…å°† <code>typeof x === &quot;number&quot;</code> æŠ½è±¡æˆä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸º <code>TypeScript</code> å¯ä»¥å°†å®ƒè¯†åˆ«ä¸ºä¸€ä¸ªç±»å‹å®ˆå«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œæ£€æŸ¥ç±»å‹äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">newPadLeft</span>(<span class=\"params\">value: <span class=\"built_in\">string</span>, padding: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(padding + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>) + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> padding + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Expected string or number, go <span class=\"subst\">$&#123;padding&#125;</span>.`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™äº› <code>typeof</code> ç±»å‹å®ˆå«åªæœ‰ä¸¤ç§å½¢å¼èƒ½è¢«è¯†åˆ«ï¼š<code>typeof v === &quot;typename&quot;</code> å’Œ <code>typeof v !== &quot;typename&quot;</code>, <code>&quot;typename&quot;</code> å¿…é¡»æ˜¯ <code>&quot;number&quot;</code>, <code>&quot;string&quot;</code>, <code>&quot;boolean&quot;</code> æˆ– <code>&quot;symbol&quot;</code>ã€‚ä½†æ˜¯ <code>TypeScript</code> å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹å®ˆå«ã€‚</p>\n</blockquote>\n<h3 id=\"11-6-instanceof-ç±»å‹å®ˆå«\"><a href=\"#11-6-instanceof-ç±»å‹å®ˆå«\" class=\"headerlink\" title=\"11.6 instanceof ç±»å‹å®ˆå«\"></a>11.6 instanceof ç±»å‹å®ˆå«</h3><blockquote>\n<p><code>instanceof</code> ç±»å‹å®ˆå«æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥ç»†åŒ–ç±»å‹çš„ä¸€ç§æ–¹å¼ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å€Ÿé‰´ä¸€ä¸‹ä¹‹å‰å­—ç¬¦ä¸²å¡«å……çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Padder &#123;</span><br><span class=\"line\">  getPaddingString(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SpaceRepeatingPadder</span> <span class=\"title\">implements</span> <span class=\"title\">Padder</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> numSpaces: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">getPaddingString</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(<span class=\"built_in\">this</span>.numSpaces + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StringPadder</span> <span class=\"title\">implements</span> <span class=\"title\">Padder</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> value: <span class=\"built_in\">string</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">getPaddingString</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRandomPadder</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.random() &lt; <span class=\"number\">0.5</span> ? <span class=\"keyword\">new</span> SpaceRepeatingPadder(<span class=\"number\">4</span>) : <span class=\"keyword\">new</span> StringPadder(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç±»å‹ä¸º SpaceRepeatingPadder | StringPadder</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> padder: Padder = getRandomPadder();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (padder <span class=\"keyword\">instanceof</span> SpaceRepeatingPadder) &#123;</span><br><span class=\"line\">  padder; <span class=\"comment\">// ç±»å‹ç»†åŒ–ä¸º &#x27;SpaceRepeatingPadder&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (padder <span class=\"keyword\">instanceof</span> StringPadder) &#123;</span><br><span class=\"line\">  padder; <span class=\"comment\">// ç±»å‹ç»†åŒ–ä¸º &#x27;StringPadder&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>instanceof</code> çš„å³ä¾§è¦æ±‚æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ<code>TypeScript</code> å°†ç»†åŒ–ä¸º:</p>\n</blockquote>\n<ol>\n<li>æ­¤æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§çš„ç±»å‹ï¼Œå¦‚æœå®ƒçš„ç±»å‹ä¸ä¸º <code>any</code> çš„è¯</li>\n<li>æ ‡ç­¾ç­¾åæ‰€è¿”å›çš„ç±»å‹çš„è”åˆ</li>\n</ol>\n<blockquote>\n<p>ä»¥æ­¤é¡ºåºã€‚</p>\n</blockquote>\n<h3 id=\"11-7-å¯ä¸º-null-çš„ç±»å‹\"><a href=\"#11-7-å¯ä¸º-null-çš„ç±»å‹\" class=\"headerlink\" title=\"11.7 å¯ä¸º null çš„ç±»å‹\"></a>11.7 å¯ä¸º null çš„ç±»å‹</h3><blockquote>\n<p><code>TypeScript</code> å…·æœ‰ä¸¤ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œ<code>null</code> å’Œ <code>undefined</code> ï¼Œå®ƒä»¬åˆ†åˆ«å…·æœ‰å€¼ <code>null</code> å’Œ <code>undefined</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å‹æ£€æŸ¥å™¨ä¼šè®¤ä¸º <code>null</code> å’Œ <code>undefined</code> å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚<code>null</code> å’Œ <code>undefined</code> æ˜¯æ‰€æœ‰å…¶å®ƒç±»å‹çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚è¿™æ„å‘³ç€ï¼Œä½ é˜»æ­¢ä¸äº†å°†å®ƒä»¬èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œå°±ç®—æ˜¯ä½ æƒ³è¦é˜»æ­¢è¿™ç§æƒ…å†µä¹Ÿä¸è¡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>--strictNullChecks</code> æ ‡è®°å¯ä»¥è§£å†³æ­¤é”™è¯¯ï¼šå½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åŒ…å« <code>null</code> æˆ– <code>undefined</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ˜ç¡®çš„åŒ…å«å®ƒä»¬ï¼š```typescript<br>let s = â€œfooâ€;<br>s = null; // â€“strictNullChecks æ¨¡å¼ä¸‹ é”™è¯¯ï¼Œ â€˜nullâ€™ ä¸èƒ½èµ‹å€¼ç»™ â€˜stringâ€™<br>let sn: string | null = â€œbarâ€;<br>sn = null; // Ok<br>sn = undefined; // â€“strictNullChecks æ¨¡å¼ä¸‹ error, å› ä¸ºâ€™undefinedâ€™ä¸èƒ½èµ‹å€¼ç»™â€™string | nullâ€™</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;  æ³¨æ„ï¼šæŒ‰ç…§ &#96;JavaScript&#96; &#96;çš„è¯­ä¹‰ï¼ŒTypeScript&#96; ä¼šæŠŠ &#96;null&#96; å’Œ &#96;undefined&#96; åŒºåˆ«å¯¹å¾…ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; &#96;string | null&#96;ï¼Œ&#96;string | undefined&#96; å’Œ &#96;string | undefined | null&#96; æ˜¯ä¸åŒçš„ç±»å‹ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">### 11.8 å¯é€‰å‚æ•°å’Œå¯é€‰å±æ€§</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">- ä½¿ç”¨äº† &#96;--strictNullChecks&#96; ï¼Œå¯é€‰å‚æ•°ä¼šè¢«è‡ªåŠ¨åœ°åŠ ä¸Š &#96;| undefined&#96;:</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">function f(x: number, y?: number) &#123;</span><br><span class=\"line\">    return x + (y || 0);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f(1, 2);</span><br><span class=\"line\">f(1);</span><br><span class=\"line\">f(1, undefined);</span><br><span class=\"line\">f(1, null); &#x2F;&#x2F; error, &#39;null&#39; is not assignable to &#39;number | undefined&#39;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯é€‰å±æ€§ä¹Ÿä¼šæœ‰åŒæ ·çš„å¤„ç†</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  a: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  b?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">c.a = <span class=\"number\">12</span>;</span><br><span class=\"line\">c.a = <span class=\"literal\">undefined</span>; <span class=\"comment\">// error, &#x27;undefined&#x27; is not assignable to &#x27;number&#x27;</span></span><br><span class=\"line\">c.b = <span class=\"number\">13</span>;</span><br><span class=\"line\">c.b = <span class=\"literal\">undefined</span>; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">c.b = <span class=\"literal\">null</span>; <span class=\"comment\">// error, &#x27;null&#x27; is not assignable to &#x27;number | undefined&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-9-ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\"><a href=\"#11-9-ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\" class=\"headerlink\" title=\"11.9 ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\"></a>11.9 ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€</h3><blockquote>\n<p>ç”±äºå¯ä»¥ä¸º <code>null</code> çš„ç±»å‹æ˜¯é€šè¿‡è”åˆç±»å‹å®ç°ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ç±»å‹å®ˆå«æ¥å»é™¤ <code>null</code>ã€‚å¹¸è¿åœ°æ˜¯è¿™ä¸åœ¨ <code>JavaScript</code> é‡Œå†™çš„ä»£ç ä¸€è‡´ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">sn: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sn == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;default&quot;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sn;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå¾ˆæ˜æ˜¾åœ°å»é™¤äº† <code>null</code>, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ­è·¯è¿ç®—ç¬¦:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>(<span class=\"params\">sn: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sn || <span class=\"string\">&quot;default&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿå»é™¤ <code>null</code> æˆ– <code>undefined</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ‰‹åŠ¨å»é™¤ã€‚è¯­æ³•æ˜¯æ·»åŠ  <code>!</code> åç¼€ï¼š<code>identifier!</code> ä» <code>identifier</code> çš„ç±»å‹é‡Œå»é™¤äº† <code>null</code> å’Œ <code>undefined</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">broken</span>(<span class=\"params\">name: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postfix</span>(<span class=\"params\">epihet: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name.charAt(<span class=\"number\">0</span>) + <span class=\"string\">&quot;. the&quot;</span> + epihet; <span class=\"comment\">// error, &#x27;name&#x27; is possibly null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  name = name || <span class=\"string\">&quot;Bob&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> postfix(<span class=\"string\">&quot;great&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fixed</span>(<span class=\"params\">name: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postfix</span>(<span class=\"params\">epihet: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name!.charAt(<span class=\"number\">0</span>) + <span class=\"string\">&quot;. the&quot;</span> + epihet; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  name = name || <span class=\"string\">&quot;Bob&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> postfix(<span class=\"string\">&quot;great&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ¬ä¾‹ä½¿ç”¨äº†åµŒå¥—å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•å»é™¤åµŒå¥—å‡½æ•°çš„ <code>null</code> (é™¤éæ˜¯ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)ã€‚å› ä¸ºå®ƒæ— æ³•è·Ÿè¸ªæ‰€æœ‰å¯¹åµŒå¥—å‡½æ•°çš„è°ƒç”¨ï¼Œå°¤å…¶æ˜¯ä½ å°†å†…å±‚å‡½æ•°ä½œä¸ºå¤–å±‚å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœæ— æ³•çŸ¥é“å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå°±æ— æ³•çŸ¥é“è°ƒç”¨æ—¶ <code>name</code> çš„ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"11-10-ç±»å‹åˆ«å\"><a href=\"#11-10-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"11.10 ç±»å‹åˆ«å\"></a>11.10 ç±»å‹åˆ«å</h3><ol>\n<li>ç±»å‹åˆ«åä¼šç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚ç±»å‹åˆ«åæœ‰æ—¶å’Œæ¥å£å¾ˆåƒï¼Œä½†æ˜¯å¯ä»¥ä½œç”¨äº åŸå§‹å€¼ï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ ä»¥åŠå…¶å®ƒä»»ä½•ä½ éœ€è¦æ‰‹å†™çš„ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Name = <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NameResolver = <span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NameOrResolver = Name | NameResolver;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\">n: NameOrResolver</span>): <span class=\"title\">Name</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> n === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> n();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>èµ·åˆ«åä¸ä¼šæ–°å»ºä¸€ä¸ªç±»å‹ - å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°åå­—æ¥å¼•ç”¨é‚£ä¸ªç±»å‹ã€‚</li>\n</ol>\n<p>3.ç»™åŸå§‹ç±»å‹èµ·åˆ«åé€šå¸¸æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå°½ç®¡å¯ä»¥ä½œä¸ºæ–‡æ¡£çš„ä¸€ç§å½¢å¼ä½¿ç”¨ã€‚</p>\n<ol start=\"4\">\n<li>åŒæ¥å£ä¸€æ ·ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ˜¯æ³›å‹ - æˆ‘ä»¬å¯ä»¥æ·»åŠ ç±»å‹å‚æ•°å¹¶ä¸”åœ¨åˆ«åå£°æ˜çš„å³ä¾§ä¼ å…¥ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Container&lt;T&gt; = &#123; <span class=\"attr\">value</span>: T &#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥åœ¨å±æ€§é‡Œå¼•ç”¨è‡ªå·±ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Tree&lt;T&gt; = &#123;</span><br><span class=\"line\">  value: T;</span><br><span class=\"line\">  left: Tree&lt;T&gt;;</span><br><span class=\"line\">  right: Tree&lt;T&gt;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>ä¸äº¤å‰ç±»å‹ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºä¸€äº›ååˆ†ç¨€å¥‡å¤æ€ªçš„ç±»å‹</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> LinkedList&lt;T&gt; = T &amp; &#123; <span class=\"attr\">next</span>: LinkedList&lt;T&gt; &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Person &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> people: LinkedList&lt;Person&gt;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.name;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.next.name;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.next.next.name;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.next.next.next.name;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç„¶è€Œï¼Œç±»å‹åˆ«åä¸èƒ½å‡ºç°åœ¨å£°æ˜å³ä¾§çš„ä»»ä½•åœ°æ–¹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// type Yikes = Array&lt;Yikes&gt;; // error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-11-æ¥å£-vs-ç±»å‹åˆ«å\"><a href=\"#11-11-æ¥å£-vs-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"11.11 æ¥å£ vs ç±»å‹åˆ«å\"></a>11.11 æ¥å£ vs ç±»å‹åˆ«å</h3><blockquote>\n<p>åƒæˆ‘ä»¬æåˆ°çš„ï¼Œç±»å‹åˆ«åå¯ä»¥åƒæ¥å£ä¸€æ ·ï¼›ç„¶è€Œï¼Œä»æœ‰ä¸€äº›ç»†å¾®å·®åˆ«ã€‚</p>\n</blockquote>\n<ol>\n<li>æ¥å£åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼Œå¯ä»¥åœ¨å…¶å®ƒä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ç±»å‹åˆ«åå¹¶ä¸åˆ›å»ºæ–°åå­— - æ¯”å¦‚ï¼Œé”™è¯¯ä¿¡æ¯å°±ä¸ä¼šä½¿ç”¨åˆ«åã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‡Œï¼Œåœ¨ç¼–è¯‘å™¨ä¸­å°†é¼ æ ‡æ‚¬åœåœ¨ <code>interfaced</code> ä¸Šï¼Œæ˜¾ç¤ºå®ƒè¿”å›çš„æ˜¯ <code>Interface</code>ï¼Œä½†æ‚¬åœåœ¨ <code>aliased</code> ä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„å´æ˜¯å¯¹è±¡å­—é¢é‡ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Alias = &#123; <span class=\"attr\">num</span>: <span class=\"built_in\">number</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Interface &#123;</span><br><span class=\"line\">  num: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">aliased</span>(<span class=\"params\">arg: Alias</span>): <span class=\"title\">Alias</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interfaced</span>(<span class=\"params\">arg: Interface</span>): <span class=\"title\">Interface</span></span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>å¦ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ç±»å‹åˆ«åä¸èƒ½è¢« <code>extends</code> å’Œ <code>implements</code> (è‡ªå·±ä¹Ÿä¸èƒ½ <code>extends</code> å’Œ <code>implements</code> å…¶å®ƒç±»å‹)ã€‚å› ä¸º è½¯ä»¶ä¸­çš„å¯¹è±¡åº”è¯¥å¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹æ˜¯å°é—­çš„ï¼Œä½ åº”è¯¥å°½é‡å»ä½¿ç”¨æ¥å£ä»£æ›¿ç±»å‹åˆ«åã€‚</li>\n<li>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æ— æ³•é€šè¿‡æ¥å£æ¥æè¿°ä¸€ä¸ªç±»å‹å¹¶ä¸”éœ€è¦ä½¿ç”¨ è”åˆç±»å‹ æˆ– å…ƒç»„ç±»å‹ï¼Œè¿™æ—¶é€šå¸¸ä¼šä½¿ç”¨ç±»å‹åˆ«åã€‚</li>\n</ol>\n<h3 id=\"11-12-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"><a href=\"#11-12-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"11.12 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"></a>11.12 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹</h3><blockquote>\n<p>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å…è®¸ä½ æŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»çš„å›ºå®šå€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å¯ä»¥ä¸è”åˆç±»å‹ï¼Œç±»å‹å®ˆå«å’Œç±»å‹åˆ«åå¾ˆå¥½çš„é…åˆã€‚é€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥å®ç°ç±»ä¼¼æšä¸¾ç±»å‹çš„å­—ç¬¦ä¸²ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Easing = <span class=\"string\">&quot;ease-in&quot;</span> | <span class=\"string\">&quot;ease-out&quot;</span> | <span class=\"string\">&quot;ease-in-out&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UIElement</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">animate</span>(<span class=\"params\">dx: <span class=\"built_in\">number</span>, dy: <span class=\"built_in\">number</span>, easing: Easing</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (easing === <span class=\"string\">&quot;ease-in&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (easing === <span class=\"string\">&quot;ease-out&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (easing === <span class=\"string\">&quot;ease-in-out&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// error! should not pass null or undefined.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> button = <span class=\"keyword\">new</span> UIElement();</span><br><span class=\"line\">button.animate(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"string\">&quot;ease-in&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// button.animate(0, 0,&quot;uneasy&quot;); // error: &quot;uneasy&quot; is not allowed here</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½ åªèƒ½ä»ä¸‰ç§å…è®¸çš„å­—ç¬¦ä¸­é€‰æ‹©å…¶ä¸€æ¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä¼ å…¥å…¶å®ƒå€¼åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Argument of type &#x27;&quot;uneasy&quot;&#x27; is not assignable to parameter of type &#x27;&quot;ease-in&quot; | &quot;ease-out&quot; | &quot;ease-in-out&quot;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è¿˜å¯ä»¥ç”¨äºåŒºåˆ†å‡½æ•°é‡è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span>(<span class=\"params\">tagName: <span class=\"string\">&quot;img&quot;</span></span>): <span class=\"title\">HTMLImageElement</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createELement</span>(<span class=\"params\">tagName: <span class=\"string\">&quot;input&quot;</span></span>): <span class=\"title\">HTMLInputElement</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// ... more overloads ...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span>(<span class=\"params\">tagName: <span class=\"string\">&quot;string&quot;</span></span>): <span class=\"title\">Element</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... code goes here ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-13-æ•°å­—å­—é¢é‡ç±»å‹\"><a href=\"#11-13-æ•°å­—å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"11.13 æ•°å­—å­—é¢é‡ç±»å‹\"></a>11.13 æ•°å­—å­—é¢é‡ç±»å‹</h3><ul>\n<li><code>TypeScript</code> è¿˜å…·æœ‰æ•°å­—å­—é¢é‡ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rollDice</span>(<span class=\"params\"></span>): 1 | 2 | 3 | 4 | 5 | 6 </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¾ˆå°‘ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼Œä½†å®ƒä»¬å¯ä»¥ç”¨åœ¨ç¼©å°èŒƒå›´è°ƒè¯• <code>bug</code> çš„æ—¶å€™ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\">x: <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x !== <span class=\"number\">1</span> || x !== <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ~~~~~~</span></span><br><span class=\"line\">    <span class=\"comment\">// Operator &#x27;!==&#x27; cannot be applied to types &#x27;1&#x27; and &#x27;2&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¢å¥è¯è¯´ï¼Œå½“ <code>x</code> ä¸ <code>2</code> è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒçš„å€¼å¿…é¡»ä¸º <code>1</code>ï¼Œè¿™å°±æ„å‘³ç€ä¸Šé¢çš„æ¯”è¾ƒæ£€æŸ¥æ˜¯éæ³•çš„ã€‚</p>\n</blockquote>\n<h3 id=\"11-14-æšä¸¾æˆå‘˜ç±»å‹\"><a href=\"#11-14-æšä¸¾æˆå‘˜ç±»å‹\" class=\"headerlink\" title=\"11.14 æšä¸¾æˆå‘˜ç±»å‹\"></a>11.14 æšä¸¾æˆå‘˜ç±»å‹</h3><blockquote>\n<p>å¦‚æˆ‘ä»¬åœ¨æšä¸¾ä¸€èŠ‚é‡Œæåˆ°çš„ï¼Œå½“æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½æ˜¯ç”¨å­—é¢é‡åˆå§‹åŒ–çš„æ—¶å€™æšä¸¾æˆå‘˜æ˜¯å…·æœ‰ç±»å‹çš„ã€‚åœ¨æˆ‘ä»¬è°ˆåŠâ€œå•ä¾‹ç±»å‹â€çš„æ—¶å€™ï¼Œå¤šæ•°æ˜¯æŒ‡ æšä¸¾æˆå‘˜ç±»å‹ å’Œ æ•°å­—/å­—ç¬¦ä¸² å­—é¢é‡ç±»å‹ï¼Œå°½ç®¡å¤§å¤šæ•°ç”¨æˆ·ä¼šäº’æ¢ä½¿ç”¨â€œå•ä¾‹ç±»å‹â€å’Œâ€œå­—é¢é‡ç±»å‹â€ã€‚</p>\n</blockquote>\n<h3 id=\"11-15-å¯è¾¨è¯†è”åˆ\"><a href=\"#11-15-å¯è¾¨è¯†è”åˆ\" class=\"headerlink\" title=\"11.15 å¯è¾¨è¯†è”åˆ\"></a>11.15 å¯è¾¨è¯†è”åˆ</h3><blockquote>\n<p>ä½ å¯ä»¥åˆå¹¶ å•ä¾‹ç±»å‹ï¼Œè”åˆç±»å‹ï¼Œç±»å‹å®ˆå« å’Œ ç±»å‹åˆ«å æ¥åˆ›å»ºä¸€ä¸ªå«åš å¯è¾¨è¯†è”åˆ çš„é«˜çº§æ¨¡å¼ï¼Œå®ƒä¹Ÿç§°ä½œ æ ‡ç­¾è”åˆ æˆ– ä»£æ•°æ•°æ®ç±»å‹ã€‚å¯è¾¨è¯†è”åˆ åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆæœ‰ç”¨å¤„ã€‚ä¸€äº›è¯­è¨€ä¼šè‡ªåŠ¨åœ°ä¸ºä½ è¾¨è¯†è”åˆï¼›è€Œ <code>TypeScript</code> åˆ™åŸºäºå·²æœ‰çš„ <code>JavaScript</code> æ¨¡å¼ï¼Œã€‚å®ƒå…·æœ‰ <code>3</code> ä¸ªè¦ç´ ï¼š</p>\n</blockquote>\n<ol>\n<li>å…·æœ‰æ™®é€šçš„å•ä¾‹ç±»å‹å±æ€§ - å¯è¾¨è¯†çš„ç‰¹å¾</li>\n<li>ä¸€ä¸ªç±»å‹åˆ«ååŒ…å«äº†é‚£äº›ç±»å‹çš„è”åˆ - è”åˆã€‚</li>\n<li>æ­¤å±æ€§ä¸Šçš„ç±»å‹å®ˆå«</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Square &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;square&quot;</span>;</span><br><span class=\"line\">  size: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Rectangle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;rectangle&quot;</span>;</span><br><span class=\"line\">  width: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  height: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Circle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;circle&quot;</span>;</span><br><span class=\"line\">  radius: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é¦–å…ˆæˆ‘ä»¬å£°æ˜äº†å°†è¦è”åˆçš„æ¥å£ã€‚æ¯ä¸ªæ¥å£éƒ½æœ‰ <code>kind</code> å±æ€§ä½†æœ‰ä¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€‚<code>kind</code> å±æ€§ç§°ä½œ å¯è¾¨è¯†çš„ç‰¹å¾æˆ–æ ‡ç­¾ã€‚å…¶å®ƒçš„å±æ€§åˆ™ç‰¹å®šäºå„ä¸ªæ¥å£ã€‚æ³¨æ„ï¼Œç›®å‰å„ä¸ªæ¥å£é—´æ˜¯æ²¡æœ‰è”ç³»çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æˆ‘ä»¬å°†å®ƒä»¬è”åˆåˆ°ä¸€èµ·ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Shape = Square | Rectangle | Circle;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å¯è¾¨è¯†è”åˆ</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area</span>(<span class=\"params\">s: Shape</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.width * s.height;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> areaSquare = area(&#123; <span class=\"attr\">kind</span>: <span class=\"string\">&quot;square&quot;</span>, <span class=\"attr\">size</span>: <span class=\"number\">12</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">let</span> areaRectangle = area(&#123; <span class=\"attr\">kind</span>: <span class=\"string\">&quot;rectangle&quot;</span>, <span class=\"attr\">width</span>: <span class=\"number\">14</span>, <span class=\"attr\">height</span>: <span class=\"number\">13</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">let</span> areaCircle = area(&#123; <span class=\"attr\">kind</span>: <span class=\"string\">&quot;circle&quot;</span>, <span class=\"attr\">radius</span>: <span class=\"number\">5</span> &#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(areaSquare, areaRectangle, areaCircle);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-16-å®Œæ•´æ€§æ£€æŸ¥\"><a href=\"#11-16-å®Œæ•´æ€§æ£€æŸ¥\" class=\"headerlink\" title=\"11.16 å®Œæ•´æ€§æ£€æŸ¥\"></a>11.16 å®Œæ•´æ€§æ£€æŸ¥</h3><blockquote>\n<p>å½“æ²¡æœ‰æ¶µç›–æ‰€æœ‰ å¯è¾¨è¯†è”åˆ çš„å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©ç¼–è¯‘å™¨å¯ä»¥é€šçŸ¥æˆ‘ä»¬ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ äº† <code>Triangle</code> å’Œ <code>Shape</code>ï¼Œæˆ‘ä»¬åŒæ—¶è¿˜éœ€è¦æ›´æ–° <code>area</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Square &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;square&quot;</span>;</span><br><span class=\"line\">  size: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Rectangle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;rectangle&quot;</span>;</span><br><span class=\"line\">  width: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  height: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Circle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;circle&quot;</span>;</span><br><span class=\"line\">  radius: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// interface Triangle &#123; kind: &quot;triangle&quot;, bottom: number, height: number &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Shape = Square | Rectangle | Circle;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area</span>(<span class=\"params\">s: Shape</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.width * s.height;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// should error here - we didn&#x27;t handle case &quot;triangle&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ã€‚</li>\n</ul>\n<ol>\n<li>é¦–å…ˆæ˜¯å¯ç”¨ <code>--strictNullChecks</code> å¹¶ä¸”æŒ‡å®šä¸€ä¸ªè¿”å›å€¼ç±»å‹:</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area1</span>(<span class=\"params\">s: Shape</span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.height * s.width;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› ä¸º <code>switch</code> æ²¡æœ‰åŒ…å«æ‰€æœ‰æƒ…å†µï¼Œæ‰€ä»¥ <code>TypeScript</code> è®¤ä¸ºè¿™ä¸ªå‡½æ•°æœ‰æ—¶å€™ä¼šè¿”å› <code>undefined</code>ã€‚å¦‚æœä½ æ˜ç¡®åœ°æŒ‡å®šäº†è¿”å›å€¼ç±»å‹ä¸º <code>number</code>ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®é™…ä¸Šè¿”å›å€¼ç±»å‹ä¸º <code>number | undefined</code>ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨äº›å¾®å¦™ä¹‹å¤„ä¸” <code>--strictNullChecks</code> å¯¹æ—§ä»£ç æ”¯æŒä¸å¥½ã€‚</p>\n</blockquote>\n<ol start=\"2\">\n<li>ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨ <code>never</code> ç±»å‹ï¼Œç¼–è¯‘å™¨ç”¨å®ƒæ¥è¿›è¡Œå®Œæ•´æ€§æ£€æŸ¥</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">assertNever</span>(<span class=\"params\">x: <span class=\"built_in\">never</span></span>): <span class=\"title\">never</span> </span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;Unexpected object: &quot;</span> + x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area2</span>(<span class=\"params\">s: Shape</span>) </span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">     <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> s.width * s.height;</span><br><span class=\"line\">     <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">     <span class=\"keyword\">default</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> assertNever(s); <span class=\"comment\">// error here if there are missing cases</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œï¼Œ<code>assertNever</code> æ£€æŸ¥ <code>s</code> æ˜¯å¦ä¸º <code>never</code> ç±»å‹ - å³ä¸ºé™¤å»æ‰€æœ‰å¯èƒ½æƒ…å†µåå‰©ä¸‹çš„ç±»å‹ã€‚å¦‚æœä½ å¿˜è®°äº†æŸä¸ª <code>case</code>ï¼Œé‚£ä¹ˆ <code>s</code> å°†å…·æœ‰ä¸€ä¸ªçœŸå®çš„ç±»å‹å¹¶ä¸”ä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚è¿™ç§æ–¹å¼éœ€è¦ä½ å®šä¹‰ä¸€ä¸ªé¢å¤–çš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨ä½ å¿˜è®°æŸä¸ª <code>case</code> çš„æ—¶å€™ä¹Ÿæ›´åŠ æ˜æ˜¾ã€‚</p>\n</blockquote>\n<h3 id=\"11-17-å¤šæ€çš„-this-ç±»å‹\"><a href=\"#11-17-å¤šæ€çš„-this-ç±»å‹\" class=\"headerlink\" title=\"11.17 å¤šæ€çš„ this ç±»å‹\"></a>11.17 å¤šæ€çš„ this ç±»å‹</h3><blockquote>\n<p>å¤šæ€çš„ <code>this</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯æŸä¸ªåŒ…å«ç±»æˆ–æ¥å£çš„å­ç±»å‹ã€‚è¿™è¢«ç§°ä½œæ˜¯ <code>F-bounded</code> å¤šæ€æ€§ã€‚å®ƒèƒ½å¾ˆå®¹æ˜“çš„è¡¨ç°è¿è´¯æ¥å£é—´çš„ç»§æ‰¿ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼Œåœ¨è®¡ç®—å™¨çš„ä¾‹å­é‡Œï¼Œåœ¨æ¯ä¸ªæ“ä½œä¹‹åéƒ½è¿”å› <code>this</code> ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BasicCalculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">protected</span> value: <span class=\"built_in\">number</span> = <span class=\"number\">0</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> currentValue(): <span class=\"built_in\">number</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> add(operand: <span class=\"built_in\">number</span>): <span class=\"built_in\">this</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.value += operand;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> multiply(operand: <span class=\"built_in\">number</span>): <span class=\"built_in\">this</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.value *= operand;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//...other operations go here...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> v = <span class=\"keyword\">new</span> BasicCalculator(<span class=\"number\">2</span>).multiply(<span class=\"number\">5</span>).add(<span class=\"number\">1</span>).currentValue();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(v);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”±äºè¿™ä¸ªç±»ä½¿ç”¨äº† <code>this</code> ç±»å‹ï¼Œä½ å¯ä»¥ç»§æ‰¿å®ƒï¼Œæ–°çš„ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼Œä¸éœ€è¦åšä»»ä½•æ”¹å˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ScientificCalculator</span> <span class=\"keyword\">extends</span> <span class=\"title\">BasicCalculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">value = <span class=\"number\">0</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(value);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">sin</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.value = <span class=\"built_in\">Math</span>.sin(<span class=\"built_in\">this</span>.value);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ... other operations go here ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> v1 = <span class=\"keyword\">new</span> ScientificCalculator(<span class=\"number\">2</span>).multiply(<span class=\"number\">5</span>).sin().add(<span class=\"number\">1</span>).currentValue();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(v1);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰ <code>this</code> ç±»å‹ï¼Œ<code>ScientificCalculator</code> å°±ä¸èƒ½å¤Ÿåœ¨ç»§æ‰¿ <code>BasicCalculator</code> çš„åŒæ—¶è¿˜ä¿æŒæ¥å£çš„è¿è´¯æ€§ã€‚<code>multiply</code> å°†ä¼šè¿”å› <code>BasicCalculator</code>ï¼Œå®ƒå¹¶æ²¡æœ‰ <code>sin</code> æ–¹æ³•ã€‚ç„¶è€Œï¼Œä½¿ç”¨ <code>this</code> ç±»å‹ï¼Œ<code>multiply</code> ä¼šè¿”å› <code>this</code>ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ <code>ScientificCalculator</code>ã€‚</p>\n</blockquote>\n<h3 id=\"11-18-ç´¢å¼•ç±»å‹\"><a href=\"#11-18-ç´¢å¼•ç±»å‹\" class=\"headerlink\" title=\"11.18 ç´¢å¼•ç±»å‹\"></a>11.18 ç´¢å¼•ç±»å‹</h3><blockquote>\n<p>ä½¿ç”¨ç´¢å¼•ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿæ£€æŸ¥ä½¿ç”¨äº†åŠ¨æ€å±æ€§åçš„ä»£ç ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„ <code>JavaScript</code> æ¨¡å¼æ˜¯ä»å¯¹è±¡ä¸­é€‰å–å±æ€§çš„å­é›†ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">js_pluck</span>(<span class=\"params\">o, names</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> names.map(<span class=\"function\"><span class=\"params\">n</span> =&gt;</span> o[n]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨æ­¤å‡½æ•°ï¼Œé€šè¿‡ ç´¢å¼•ç±»å‹æŸ¥è¯¢å’Œ ç´¢å¼•è®¿é—® æ“ä½œç¬¦ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pluck</span>&lt;<span class=\"title\">T</span>, <span class=\"title\">K</span> <span class=\"title\">extends</span> <span class=\"title\">keyof</span> <span class=\"title\">T</span>&gt;(<span class=\"params\">o: T, names: K[]</span>): <span class=\"title\">T</span>[<span class=\"title\">K</span>][] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> names.map(<span class=\"function\"><span class=\"params\">n</span> =&gt;</span> o[n]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Person &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  age: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> person: Person = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;Jarid&quot;</span>,</span><br><span class=\"line\">  age: <span class=\"number\">35</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strings: <span class=\"built_in\">string</span>[] = pluck(person, [<span class=\"string\">&quot;name&quot;</span>]);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(strings);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ <code>name</code> æ˜¯å¦çœŸçš„æ˜¯ <code>Person</code> çš„ä¸€ä¸ªå±æ€§ã€‚æœ¬ä¾‹è¿˜å¼•å…¥äº†å‡ ä¸ªæ–°çš„ç±»å‹æ“ä½œç¬¦ã€‚</p>\n</blockquote>\n<h4 id=\"11-18-1-é¦–å…ˆæ˜¯-keyof-Tï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\"><a href=\"#11-18-1-é¦–å…ˆæ˜¯-keyof-Tï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\" class=\"headerlink\" title=\"11.18.1 é¦–å…ˆæ˜¯ keyof Tï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\"></a>11.18.1 é¦–å…ˆæ˜¯ <code>keyof T</code>ï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚</h4><blockquote>\n<p>å¯¹äºä»»ä½•ç±»å‹ <code>T</code> ï¼Œ<code>keyof T</code> çš„ç»“æœä¸º <code>T</code> ä¸Šå·²çŸ¥çš„å…¬å…±å±æ€§åçš„è”åˆã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> personProps: keyof Person; <span class=\"comment\">// &#x27;name&#x27; | &#x27;age&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>keyof Person</code> æ˜¯å®Œå…¨å¯ä»¥ä¸ <code>&#39;name&#39; \\| &#39;age&#39;</code> äº’ç›¸æ›¿æ¢çš„ã€‚ä¸åŒçš„æ˜¯å¦‚æœä½ æ·»åŠ äº†å…¶å®ƒçš„å±æ€§åˆ° <code>Person</code>, ä¾‹å¦‚ <code>address: string</code>ï¼Œé‚£ä¹ˆ<code>keyof Person</code> ä¼šè‡ªåŠ¨å˜ä¸º <code>&#39;name&#39; | &#39;age&#39; | &#39;address&#39;</code>ã€‚ä½ å¯ä»¥åƒ <code>pluck</code> å‡½æ•°è¿™ç±»ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ <code>keyof</code> ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ä¹‹å‰ä½ å¹¶ä¸æ¸…æ¥šå¯èƒ½å‡ºç°çš„å±æ€§åã€‚ä½†ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ä½ æ˜¯å¦ä¼ å…¥äº†æ­£ç¡®çš„å±æ€§åç»™ <code>pluck</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// pluck(person, [&#x27;age&#x27;, &#x27;unknown&#x27;]); // error, &#x27;unknown&#x27; is not in &#x27;name&#x27; | &#x27;age&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-18-2-ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯-T-K-ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\"><a href=\"#11-18-2-ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯-T-K-ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\" class=\"headerlink\" title=\"11.18.2 ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯ T[K], ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\"></a>11.18.2 ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯ <code>T[K]</code>, ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚</h4><blockquote>\n<p>åœ¨è¿™é‡Œï¼Œç±»å‹è¯­æ³•ååº”äº†è¡¨è¾¾å¼è¯­æ³•ã€‚è¿™æ„å‘³ç€ <code>person[&#39;name&#39;]</code> å…·æœ‰ç±»å‹ <code>Person[&#39;name&#39;]</code> â€“ åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œåˆ™ä¸º <code>string</code> ç±»å‹ã€‚ç„¶è€Œï¼Œå°±åƒç´¢å¼•ç±»å‹æŸ¥è¯¢ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨æ™®é€šçš„ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ <code>T[K]</code>ï¼Œè¿™æ­£æ˜¯å®ƒçš„å¼ºå¤§æ‰€åœ¨ã€‚ä½ åªè¦ç¡®ä¿ç±»å‹å˜é‡ <code>K extends keyof T</code> å°±å¯ä»¥äº†ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ä¸‹é¢ <code>getProperty</code> å‡½æ•°çš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getProperty</span>&lt;<span class=\"title\">T</span>, <span class=\"title\">K</span> <span class=\"title\">extends</span> <span class=\"title\">keyof</span> <span class=\"title\">T</span>&gt;(<span class=\"params\">o: T, name: K</span>): <span class=\"title\">T</span>[<span class=\"title\">K</span>] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> o[name]; <span class=\"comment\">// o[name] is of type T[K]</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>getProperty</code> é‡Œçš„ <code>o: T</code> å’Œ <code>name: K</code>ï¼Œæ„å‘³ç€ <code>o[name]: T[K]</code>ã€‚å½“ä½ è¿”å› <code>T[K]</code> çš„ç»“æœï¼Œ</p>\n</blockquote>\n<blockquote>\n<p>ç¼–è¯‘å™¨ä¼šæ˜¯å®ä¾‹åŒ–é”®çš„çœŸå®ç±»å‹ï¼Œå› æ­¤ <code>getProperty</code> çš„è¿”å›å€¼ç±»å‹ä¼šéšç€ä½ éœ€è¦çš„å±æ€§æ”¹å˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> _name: <span class=\"built_in\">string</span> = getProperty(person, <span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> _age: <span class=\"built_in\">number</span> = getProperty(person, <span class=\"string\">&quot;age&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// let unknown = getProperty(person, &quot;unknown&quot;); // error, &#x27;unknown&#x27; is not in &#x27;name&#x27; | &#x27;age&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(_name, <span class=\"string\">&quot; &quot;</span>, _age);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-19-ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\"><a href=\"#11-19-ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\" class=\"headerlink\" title=\"11.19 ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\"></a>11.19 ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å</h3><blockquote>\n<p><code>keyof</code> å’Œ <code>T[K]</code> ä¸å­—ç¬¦ä¸²ç´¢å¼•ç­¾åè¿›è¡Œäº¤äº’ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²ç´¢å¼•ç­¾åçš„ç±»å‹ï¼Œé‚£ä¹ˆ <code>keyof T</code> ä¼šæ˜¯ <code>string</code>ã€‚å¹¶ä¸” <code>T[string]</code> ä¸ºç´¢å¼•ç­¾åçš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Dictionary&lt;T&gt; &#123;</span><br><span class=\"line\">  [key: <span class=\"built_in\">string</span>]: T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> keys: keyof Dictionary&lt;<span class=\"built_in\">number</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> value: Dictionary&lt;<span class=\"built_in\">number</span>&gt;[<span class=\"string\">&quot;foo&quot;</span>]; <span class=\"comment\">// number</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-20-æ˜ å°„ç±»å‹\"><a href=\"#11-20-æ˜ å°„ç±»å‹\" class=\"headerlink\" title=\"11.20 æ˜ å°„ç±»å‹\"></a>11.20 æ˜ å°„ç±»å‹</h3><ul>\n<li>ä¸€ä¸ªå¸¸è§çš„ä»»åŠ¡æ˜¯å°†ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹æ¯ä¸ªå±æ€§éƒ½å˜ä¸ºå¯é€‰çš„ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PersonPartial &#123;</span><br><span class=\"line\">  name?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  age?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ–è€…æˆ‘ä»¬åªæƒ³è¦ä¸€ä¸ªåªè¯»ç‰ˆæœ¬</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PersonReadonly &#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> age: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™åœ¨ <code>JavaScript</code> é‡Œç»å¸¸å‡ºç°ã€‚<code>TypeScript</code> æä¾›äº†ä»æ—§ç±»å‹ä¸­åˆ›å»ºæ–°ç±»å‹çš„ä¸€ç§æ–¹å¼ <code>--</code> æ˜ å°„ç±»å‹ã€‚åœ¨æ˜ å°„ç±»å‹é‡Œï¼Œæ–°ç±»å‹ä»¥ç›¸åŒçš„å½¢å¼å»è½¬æ¢æ—§ç±»å‹é‡Œæ¯ä¸ªå±æ€§ã€‚å‡å¦‚ï¼Œä½ å¯ä»¥ä»¤æ¯ä¸ªå±æ€§æˆä¸º <code>readonly</code> ç±»å‹æˆ–å¯é€‰çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Readonly&lt;T&gt; = &#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> [P <span class=\"keyword\">in</span> keyof T]: T[P];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Partial&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åƒä¸‹é¢è¿™æ ·ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Person &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> PersonPartial = Partial;</span><br><span class=\"line\"><span class=\"keyword\">type</span> PersonReadonly = Readonly;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¯­æ³•æè¿°çš„æ˜¯ç±»å‹è€Œéæˆå‘˜ã€‚è‹¥æƒ³æ·»åŠ é¢å¤–çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ äº¤å‰ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>è¿™æ ·ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> PartialWithNewMember&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">&#125; &amp; &#123; <span class=\"attr\">newMember</span>: <span class=\"built_in\">boolean</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸è¦è¿™æ ·ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> PartialWithNewMember&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">  newMember: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢æ¥çœ‹çœ‹æœ€ç®€å•çš„æ˜ å°„ç±»å‹å’Œå®ƒçš„ç»„æˆéƒ¨åˆ†</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Keys = <span class=\"string\">&quot;option1&quot;</span> | <span class=\"string\">&quot;option2&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Flags = &#123; [K <span class=\"keyword\">in</span> Keys]: <span class=\"built_in\">boolean</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒçš„è¯­æ³•ä¸ç´¢å¼•ç­¾åçš„è¯­æ³•ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨äº† <code>for...in</code>ã€‚å…·æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>\n</blockquote>\n<ol>\n<li>ç±»å‹å˜é‡ <code>K</code>ï¼Œå®ƒä¼šä¾æ¬¡ç»‘å®šåˆ°æ¯ä¸ªå±æ€§ã€‚</li>\n<li>å­—ç¬¦ä¸²å­—é¢é‡è”åˆçš„ <code>Keys</code>ï¼Œå®ƒåŒ…å«äº†è¦è¿­ä»£çš„å±æ€§åçš„é›†åˆã€‚</li>\n<li>å±æ€§çš„ç»“æœç±»å‹ã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­é‡Œï¼Œ<code>Keys</code> æ˜¯ç¡¬ç¼–ç çš„å±æ€§åˆ—è¡¨å¹¶ä¸”å±æ€§ç±»å‹æ°¸è¿œæ˜¯ <code>boolean</code>ï¼Œå› æ­¤è¿™ä¸ªæ˜ å°„ç±»å‹</p>\n</blockquote>\n<ul>\n<li>ç­‰åŒäºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> _FLags = &#123;</span><br><span class=\"line\">  option1: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  option2: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨çœŸæ­£çš„åº”ç”¨é‡Œï¼Œå¯èƒ½ä¸åŒäºä¸Šé¢çš„ <code>Readonly</code> æˆ– <code>Partial</code>ã€‚å®ƒä»¬ä¼šåŸºäºä¸€äº›å·²å­˜åœ¨çš„ç±»å‹ï¼Œä¸”æŒ‰ç…§ä¸€å®šçš„æ–¹å¼è½¬æ¢å­—æ®µã€‚è¿™å°±æ˜¯ <code>keyof</code> å’Œ <code>ç´¢å¼•è®¿é—®ç±»å‹</code> è¦åšçš„äº‹æƒ…ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> NullablePerson = &#123; [P <span class=\"keyword\">in</span> keyof Person]: Person[P] | <span class=\"literal\">null</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> PartialPerson = &#123; [P <span class=\"keyword\">in</span> keyof Person]?: Person[P] &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹æ˜¯å¯ä»¥æœ‰ä¸€äº›é€šç”¨ç‰ˆæœ¬ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Nullable&lt;T&gt; = &#123; [P <span class=\"keyword\">in</span> keyof T]: T[P] | <span class=\"literal\">null</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Partial1&lt;T&gt; = &#123; [P <span class=\"keyword\">in</span> keyof T]?: T[P] &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨è¿™äº›ä¾‹å­é‡Œï¼Œå±æ€§åˆ—è¡¨æ˜¯ <code>keyof T</code> ä¸”ç»“æœç±»å‹æ˜¯ <code>T[P]</code> çš„å˜ä½“ã€‚è¿™æ˜¯ä½¿ç”¨é€šç”¨æ˜ å°„ç±»å‹çš„ä¸€ä¸ªå¥½æ¨¡ç‰ˆã€‚å› ä¸ºè¿™ç±»è½¬æ¢æ˜¯åŒæ€çš„ï¼Œæ˜ å°„åªä½œç”¨äº <code>T</code> çš„å±æ€§è€Œæ²¡æœ‰å…¶å®ƒçš„ã€‚ç¼–è¯‘å™¨çŸ¥é“åœ¨æ·»åŠ ä»»ä½•æ–°å±æ€§ä¹‹å‰å¯ä»¥æ‹·è´æ‰€æœ‰å­˜åœ¨çš„å±æ€§ä¿®é¥°ç¬¦ã€‚å‡å¦‚ï¼Œå‡è®¾ <code>Person.name</code> æ˜¯åªè¯»çš„ï¼Œé‚£ä¹ˆ <code>Partial1&lt;Person&gt;.name</code> ä¹Ÿå°†æ˜¯åªè¯»çš„ä¸”ä¸ºå¯é€‰çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œ<code>T[P]</code> è¢«åŒ…è£…åœ¨ <code>Proxy&lt;T&gt;</code> ç±»é‡Œï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> <span class=\"built_in\">Proxy</span>&lt;T&gt; = &#123;</span><br><span class=\"line\">  get(): T;</span><br><span class=\"line\">  set(value: T): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Proxify&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]: <span class=\"built_in\">Proxy</span>&lt;T[P]&gt;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxify</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">o: T</span>): <span class=\"title\">Proxify</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...wrap proxies</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> proxyProps = proxify(props);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>Readonly&lt;T&gt;</code> å’Œ <code>Partial&lt;T&gt;</code> ç”¨å¤„ä¸å°ï¼Œå› æ­¤å®ƒä»¬äº <code>pick</code> å’Œ <code>Record</code> ä¸€åŒè¢«åŒ…å«è¿›äº† <code>TypeScript</code> çš„æ ‡å‡†åº“é‡Œï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Pick&lt;T, K <span class=\"keyword\">extends</span> keyof T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T[P];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Record&lt;K <span class=\"keyword\">extends</span> keyof <span class=\"built_in\">any</span>, T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Readonly</code>, <code>Partial</code> å’Œ <code>Pick</code> æ˜¯åŒæ€çš„ï¼Œä½† <code>Record</code> ä¸æ˜¯ã€‚å› ä¸º <code>Record</code> å¹¶ä¸éœ€è¦è¾“å…¥ç±»å‹æ¥æ‹·è´å±æ€§ï¼Œæ‰€ä»¥å®ƒä¸å±äºåŒæ€ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> ThreeStringProps = Record&lt;<span class=\"string\">&quot;prop1&quot;</span> | <span class=\"string\">&quot;prop2&quot;</span> | <span class=\"string\">&quot;prop3&quot;</span>, <span class=\"built_in\">string</span>&gt;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>éåŒæ€ç±»å‹æœ¬è´¨ä¸Šä¼šåˆ›å»ºæ–°çš„å±æ€§ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šä»å®ƒå¤„æ‹·è´å±æ€§ä¿®é¥°ç¬¦ã€‚</p>\n</blockquote>\n<h3 id=\"11-21-ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\"><a href=\"#11-21-ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\" class=\"headerlink\" title=\"11.21 ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\"></a>11.21 ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­</h3><blockquote>\n<p>ç°åœ¨ä½ äº†è§£äº†å¦‚ä½•åŒ…è£…ä¸€ä¸ªç±»å‹çš„å±æ€§ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ‹†åŒ…ã€‚å…¶å®è¿™ä¹Ÿéå¸¸å®¹æ˜“ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Proxify&lt;T&gt; = &#123;</span><br><span class=\"line\">  get(): T;</span><br><span class=\"line\">  set(value: T): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unproxify</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">t: Proxify&lt;T&gt;</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = &#123;&#125; <span class=\"keyword\">as</span> T;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> k <span class=\"keyword\">in</span> t) &#123;</span><br><span class=\"line\">    result[k] = t[k].get();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// let originalProps = unproxify(proxyProps);</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„è¿™ä¸ªæ‹†åŒ…æ¨æ–­åªé€‚ç”¨äºåŒæ€çš„æ˜ å°„ç±»å‹ã€‚å¦‚æœæ˜ å°„ç±»å‹ä¸æ˜¯åŒæ€çš„ï¼Œé‚£ä¹ˆéœ€è¦ç»™æ‹†åŒ…å‡½æ•°ä¸€ä¸ªæ˜ç¡®çš„ç±»å‹å‚æ•°ã€‚</p>\n</blockquote>\n<h3 id=\"11-22-æœ‰æ¡ä»¶ç±»å‹\"><a href=\"#11-22-æœ‰æ¡ä»¶ç±»å‹\" class=\"headerlink\" title=\"11.22 æœ‰æ¡ä»¶ç±»å‹\"></a>11.22 æœ‰æ¡ä»¶ç±»å‹</h3><blockquote>\n<p><code>TypeScript 2.8</code> å¼•å…¥äº†æœ‰æ¡ä»¶ç±»å‹ï¼Œå®ƒèƒ½å¤Ÿè¡¨ç¤ºéç»Ÿä¸€çš„ç±»å‹ã€‚æœ‰æ¡ä»¶çš„ç±»å‹ä¼šä»¥ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç±»å‹å…³ç³»æ£€æµ‹ï¼Œä»è€Œåœ¨ä¸¤ç§ç±»å‹ä¸­é€‰æ‹©å…¶ä¸€ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">T <span class=\"keyword\">extends</span> U ? X : Y</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ç±»å‹æ„æ€æ˜¯ï¼šè‹¥ <code>T</code> èƒ½å¤Ÿèµ‹å€¼ç»™ <code>U</code>ï¼Œé‚£ä¹ˆç±»å‹æ˜¯ <code>X</code>ï¼Œå¦åˆ™ä¸º <code>Y</code></p>\n</blockquote>\n<blockquote>\n<p>æœ‰æ¡ä»¶çš„ç±»å‹ <code>T extends U ? X : Y</code> æˆ–è€…è§£æä¸º <code>X</code>ï¼Œæˆ–è€…è§£æä¸º <code>Y</code>ï¼Œå†æˆ–è€…å»¶è¿Ÿè§£æï¼Œå› ä¸ºå®ƒå¯èƒ½ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡ã€‚è‹¥ <code>T</code> æˆ– <code>U</code> åŒ…å«ç±»å‹å‚æ•°ï¼Œé‚£ä¹ˆæ˜¯å¦è§£æä¸º <code>X</code> æˆ– <code>Y</code> æˆ–æ¨è¿Ÿï¼Œå–å†³äºç±»å‹ç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®š <code>T</code> æ€»æ˜¯å¯ä»¥èµ‹å€¼ç»™ <code>U</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€äº›ç±»å‹å¯ä»¥è¢«ç«‹å³è§£æçš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">boolean</span>&gt;(<span class=\"params\">x: T</span>): <span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">true</span> ? <span class=\"title\">string</span> : <span class=\"title\">number</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Type is &#x27;string&#x27; | &#x27;number&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> x = f(<span class=\"built_in\">Math</span>.random() &lt; <span class=\"number\">0.5</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦å¤–ä¸€ä¸ªä¾‹å­æ¶‰åŠ <code>TypeName</code> ç±»å‹åˆ«åï¼Œå®ƒä½¿ç”¨äº†åµŒå¥—äº†æœ‰æ¡ä»¶ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> TypeName&lt;T&gt; = T <span class=\"keyword\">extends</span> <span class=\"built_in\">string</span> ? <span class=\"string\">&quot;string&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"built_in\">number</span> ? <span class=\"string\">&quot;number&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"built_in\">boolean</span> ? <span class=\"string\">&quot;boolean&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"literal\">undefined</span> ? <span class=\"string\">&quot;undefined&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"built_in\">Function</span> ? <span class=\"string\">&quot;function&quot;</span> : <span class=\"string\">&quot;object&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T0 = TypeName&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// &quot;string&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T1 = TypeName&lt;<span class=\"string\">&quot;a&quot;</span>&gt;; <span class=\"comment\">// &quot;string&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T2 = TypeName&lt;<span class=\"literal\">true</span>&gt;; <span class=\"comment\">// &quot;boolean&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T3 = TypeName&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>&gt;; <span class=\"comment\">// &quot;function&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T4 = TypeName&lt;<span class=\"built_in\">string</span>[]&gt;; <span class=\"comment\">// &quot;object&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€ä¸ªæœ‰æ¡ä»¶ç±»å‹è¢«æ¨è¿Ÿè§£æçš„ä¾‹å­</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Foo &#123;</span><br><span class=\"line\">  propA: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  propB: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">x: T</span>): <span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">Foo</span> ? <span class=\"title\">string</span> : <span class=\"title\">number</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>&lt;<span class=\"title\">U</span>&gt;(<span class=\"params\">x: U</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Has type &#x27;U extends Foo ? string : number&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = f(x);</span><br><span class=\"line\">  <span class=\"comment\">// This assignment is allowed though!</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> b: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> = a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œï¼Œ<code>a</code> å˜é‡å«æœ‰æœªç¡®å®šçš„æœ‰æ¡ä»¶ç±»å‹ã€‚å½“æœ‰å¦ä¸€æ®µä»£ç è°ƒç”¨ <code>foo</code>ï¼Œå®ƒä¼šç”¨å…¶å®ƒç±»å‹æ›¿æ¢ <code>U</code>ï¼Œ<code>TypeScript</code> å°†é‡æ–°è®¡ç®—æœ‰æ¡ä»¶ç±»å‹ï¼Œå†³å®šå®ƒæ˜¯å¦å¯ä»¥é€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ‰æ¡ä»¶ç±»å‹èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œåªè¦æœ‰æ¡ä»¶ç±»å‹çš„æ¯ä¸ªåˆ†æ”¯ï¼Œéƒ½å¯ä»¥èµ‹å€¼ç»™ç›®æ ‡ç±»å‹ã€‚å› æ­¤åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>U extends Foo ? string : number</code> èµ‹å€¼ç»™ <code>string | number</code>ï¼Œå› ä¸ºä¸ç®¡è¿™ä¸ªæœ‰æ¡ä»¶ç±»å‹æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆï¼Œå®ƒåªèƒ½æ˜¯ <code>string | number</code>ã€‚</p>\n</blockquote>\n<h3 id=\"11-23-åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\"><a href=\"#11-23-åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\" class=\"headerlink\" title=\"11.23 åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\"></a>11.23 åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹</h3><blockquote>\n<p>å¦‚æœæœ‰æ¡ä»¶ç±»å‹é‡Œå¾…æ£€æŸ¥çš„ç±»å‹æ˜¯ <code>naked type parameter</code> ï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¢«ç§°ä¸ºâ€åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹â€ã€‚åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹åœ¨å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆ†å‘æˆè”åˆç±»å‹ã€‚ä¾‹å¦‚ï¼šå®ä¾‹åŒ– <code>T extends U ? X : Y</code>ï¼Œ<code>T</code> çš„ç±»å‹ä¸º <code>A | B | C</code>ï¼Œä¼šè¢«è§£æä¸º <code>(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š```typescript<br>type TypeName<T> =<br>T extends string ? â€œstringâ€ :<br>T extends number ? â€œnumberâ€ :<br>T extends boolean ? â€œbooleanâ€ :<br>T extends undefined ? â€œundefinedâ€ :<br>T extends Function ? â€œfunctionâ€ : â€œobjectâ€;<br>type T10 = TypeName&lt;string | (() =&gt; void)&gt;; // â€œstringâ€ | â€œfunctionâ€<br>type T11 = TypeName&lt;string | string[] | undefined&gt;; // â€œstringâ€ | â€œobjectâ€ | â€œundefinedâ€<br>type T12 = TypeName&lt;string[] | number[]&gt;; // â€œobjectâ€</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;  åœ¨ &#96;T extends U ? X : Y&#96; çš„å®ä¾‹åŒ–é‡Œï¼Œå¯¹ &#96;T&#96; çš„å¼•ç”¨è¢«è§£æä¸ºè”åˆç±»å‹çš„ä¸€éƒ¨åˆ†(æ¯”å¦‚ï¼Œ&#96;T&#96; æŒ‡å‘æŸä¸€å•ä¸ªéƒ¨åˆ†ï¼Œåœ¨æœ‰æ¡ä»¶ç±»å‹åˆ†å¸ƒåˆ°è”åˆç±»å‹ä¹‹å)ã€‚æ­¤å¤–ï¼Œåœ¨ &#96;X&#96; å†…å¯¹ &#96;T&#96; çš„å¼•ç”¨æœ‰ä¸€ä¸ªé™„åŠ çš„ç±»å‹å‚æ•°çº¦æŸ &#96;U&#96;(ä¾‹å¦‚ï¼Œ&#96;T&#96; è¢«å½“æˆåœ¨ &#96;X&#96; å†…å¯èµ‹å€¼ç»™ &#96;U&#96;)ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">- ä¾‹å­ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">type BoxedValue&lt;T&gt; &#x3D; &#123; value: T &#125;;</span><br><span class=\"line\">type BoxedArray&lt;T&gt; &#x3D; &#123; array: T[] &#125;;</span><br><span class=\"line\">type Boxed&lt;T&gt; &#x3D; T extends any[] ? BoxedArray&lt;T[number]&gt; : BoxedValue&lt;T&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">type T20 &#x3D; Boxed&lt;string&gt;; &#x2F;&#x2F; BoxedValue&lt;string&gt;;</span><br><span class=\"line\">type T21 &#x3D; Boxed&lt;number[]&gt;; &#x2F;&#x2F; BoxedArray&lt;number&gt;;</span><br><span class=\"line\">type T22 &#x3D; Boxed&lt;string | number[]&gt;; &#x2F;&#x2F; BoxedValue&lt;string&gt; | BoxedArray&lt;number&gt;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-23-1-æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\"><a href=\"#11-23-1-æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\" class=\"headerlink\" title=\"11.23.1 æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\"></a>11.23.1 æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Diff&lt;T, U&gt; = T <span class=\"keyword\">extends</span> U ? <span class=\"built_in\">never</span> : T; <span class=\"comment\">// Remove types from T that are assignable to U(ä» T ä¸­åˆ é™¤å¯åˆ†é…ç»™ U çš„ç±»å‹)</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Filter&lt;T, U&gt; = T <span class=\"keyword\">extends</span> U ? T : <span class=\"built_in\">never</span>; <span class=\"comment\">// Remove types from T that are not assignable to U(ä» T ä¸­åˆ é™¤ä¸å¯èµ‹å€¼ç»™ U çš„ç±»å‹)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T30 = Diff&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;b&quot; | &quot;d&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T31 = Filter&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;a&quot; | &quot;c&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T32 = Diff&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T33 = Filter&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// () =&gt; void</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> _NonNullable&lt;T&gt; = Diff&lt;T, <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// Remove null and undefined from T</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T34 = _NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T35 = _NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">string</span>[] | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | string[]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">x: T, y: _NonNullable&lt;T&gt;</span>) </span>&#123;</span><br><span class=\"line\">  x = y; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">  <span class=\"comment\">// y = x ;// Error</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f2</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">string</span> | <span class=\"title\">undefined</span>&gt;(<span class=\"params\">x: T, y: _NonNullable&lt;T&gt;</span>) </span>&#123;</span><br><span class=\"line\">  x = y; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">  <span class=\"comment\">// y = x; //Error</span></span><br><span class=\"line\">  <span class=\"comment\">// let s1: string = x; // Error</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> s2: <span class=\"built_in\">string</span> = y; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-23-2-æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\"><a href=\"#11-23-2-æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\" class=\"headerlink\" title=\"11.23.2 æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\"></a>11.23.2 æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> FunctionPropertyNames&lt;T&gt; = &#123; [K <span class=\"keyword\">in</span> keyof T]: T[K] <span class=\"keyword\">extends</span> <span class=\"built_in\">Function</span> ? K : <span class=\"built_in\">never</span> &#125;[keyof T];</span><br><span class=\"line\"><span class=\"keyword\">type</span> FunctionProperties&lt;T&gt; = Pick&lt;T, FunctionPropertyNames&lt;T&gt;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NonFunctionPropertyNames&lt;T&gt; = &#123; [K <span class=\"keyword\">in</span> keyof T]: T[K] <span class=\"keyword\">extends</span> <span class=\"built_in\">Function</span> ? <span class=\"built_in\">never</span> : K &#125;[keyof T];</span><br><span class=\"line\"><span class=\"keyword\">type</span> NonFunctionProperties&lt;T&gt; = Pick&lt;T, NonFunctionPropertyNames&lt;T&gt;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Part &#123;</span><br><span class=\"line\">  id: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  subparts: Part[];</span><br><span class=\"line\">  updatePart(newName: <span class=\"built_in\">string</span>): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T40 = FunctionPropertyNames&lt;Part&gt;; <span class=\"comment\">// &quot;updatePart&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T41 = NonFunctionPropertyNames&lt;Part&gt;; <span class=\"comment\">// &quot;id&quot; | &quot;name&quot; | &quot;subparts&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T42 = FunctionProperties&lt;Part&gt;; <span class=\"comment\">// &#123; updatePart(newName: string): void &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T43 = NonFunctionProperties&lt;Part&gt;; <span class=\"comment\">// &#123; id: number, name: string, suparts: Part[] &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-23-3-ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\"><a href=\"#11-23-3-ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\" class=\"headerlink\" title=\"11.23.3 ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\"></a>11.23.3 ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚</h4><ul>\n<li>æ¯”å¦‚ä¸‹é¢çš„é”™è¯¯ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// type ElementType&lt;T&gt; = T extends any[] ? ElementType&lt;T[number]&gt;: T; // Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-24-æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\"><a href=\"#11-24-æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\" class=\"headerlink\" title=\"11.24 æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\"></a>11.24 æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­</h3><blockquote>\n<p>ç°åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ <code>extends</code> å­è¯­å¥ä¸­ï¼Œå…è®¸å‡ºç° <code>infer</code> å£°æ˜ï¼Œå®ƒä¼šå¼•å…¥ä¸€ä¸ªå¾…æ¨æ–­çš„ç±»å‹å˜é‡ã€‚è¿™ä¸ªæ¨æ–­çš„ç±»å‹å˜é‡å¯ä»¥åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ <code>true</code> åˆ†æ”¯ä¸­è¢«å¼•ç”¨ã€‚å…è®¸å‡ºç°å¤šä¸ªåŒç±»å‹å˜é‡çš„ <code>infer</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¾‹å¦‚ï¼šä¸‹é¢ä»£ç ä¼šæå–å‡½æ•°ç±»å‹çš„è¿”å›å€¼</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> _ReturnType&lt;T&gt; = T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>[]) =&gt; infer R ? R : <span class=\"built_in\">any</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ‰æ¡ä»¶ç±»å‹ å¯ä»¥åµŒå¥—æ¥æ„æˆä¸€ç³»åˆ—çš„åŒ¹é…æ¨¡å¼ï¼ŒæŒ‰é¡ºåºè¿›è¡Œæ±‚å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Unpacked&lt;T&gt; = T <span class=\"keyword\">extends</span> (infer U)[] ? U : T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>[]) =&gt; infer U ? U : T <span class=\"keyword\">extends</span> <span class=\"built_in\">Promise</span>&lt;infer U&gt; ? U : T;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T0 = Unpacked&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T1 = Unpacked&lt;<span class=\"built_in\">string</span>[]&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T2 = Unpacked&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T3 = Unpacked&lt;<span class=\"built_in\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt;&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T4 = Unpacked&lt;<span class=\"built_in\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt;[]&gt;; <span class=\"comment\">// Promise&lt;string&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T5 = Unpacked&lt;Unpacked&lt;<span class=\"built_in\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt;[]&gt;&gt;; <span class=\"comment\">// string</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢çš„ä¾‹å­è§£é‡Šäº†åœ¨åå˜ä½ç½®ä¸Šï¼ŒåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºè”åˆç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Foo&lt;T&gt; = T <span class=\"keyword\">extends</span> &#123; <span class=\"attr\">a</span>: infer U; b: infer U &#125; ? U : <span class=\"built_in\">never</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> T10 = Foo&lt;&#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b: <span class=\"built_in\">string</span> &#125;&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T11 = Foo&lt;&#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b: <span class=\"built_in\">number</span> &#125;&gt;; <span class=\"comment\">// string | number</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç›¸ä¼¼åœ°ï¼Œåœ¨æŠ—å˜ä½ç½®ä¸ŠåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºäº¤å‰ç±»å‹ï¼š</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Bar&lt;T&gt; = T <span class=\"keyword\">extends</span> &#123; <span class=\"attr\">a</span>: <span class=\"function\">(<span class=\"params\">x: infer U</span>) =&gt;</span> <span class=\"built_in\">void</span>; b: <span class=\"function\">(<span class=\"params\">x: infer U</span>) =&gt;</span> <span class=\"built_in\">void</span> &#125; ? U : <span class=\"built_in\">never</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> T20 = Bar&lt;&#123; <span class=\"attr\">a</span>: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>; b: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span> &#125;&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T21 = Bar&lt;&#123; <span class=\"attr\">a</span>: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>; b: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">void</span> &#125;&gt;; <span class=\"comment\">// string &amp; number</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; å½“æ¨æ–­å…·æœ‰å¤šä¸ªè°ƒç”¨ç­¾å(ä¾‹å¦‚å‡½æ•°é‡è½½ç±»å‹)çš„ç±»å‹æ—¶ï¼Œç”¨æœ€åçš„ç­¾å(å¤§æ¦‚æ˜¯æœ€è‡ªç”±çš„åŒ…å«æ‰€æœ‰æƒ…å†µçš„ç­¾å) è¿›è¡Œæ¨æ–­ã€‚æ— æ³•æ ¹æ®å‚æ•°ç±»å‹åˆ—è¡¨æ¥è¿›è¡Œè§£æé‡è½½ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">declare function foo(x: string): number;</span><br><span class=\"line\">declare function foo(x: number): string;</span><br><span class=\"line\">declare function foo(x: string | number): string | number;</span><br><span class=\"line\"></span><br><span class=\"line\">type T30 &#x3D; ReturnType&lt;typeof foo&gt;; &#x2F;&#x2F; string | number</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ— æ³•åœ¨æ­£å¸¸ç±»å‹å‚æ•°çš„çº¦æŸå­è¯­å¥ä¸­ä½¿ç”¨ <code>infer</code> å£°æ˜ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// type ReturnType1&lt;T extends (...args: any[]) =&gt; infer R&gt; = R; // Error</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†æ˜¯ï¼Œå¯ä»¥è¿™æ ·è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œåœ¨çº¦æŸé‡Œåˆ æ‰ç±»å‹å˜é‡ï¼Œç”¨ æœ‰æ¡ä»¶ç±»å‹ æ¥æ›¿æ¢ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> AnyFunction = <span class=\"function\">(<span class=\"params\">...args: <span class=\"built_in\">any</span>[]</span>) =&gt;</span> <span class=\"built_in\">any</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> ReturnType2&lt;T <span class=\"keyword\">extends</span> AnyFunction&gt; = T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>[]) =&gt; infer R ? R : <span class=\"built_in\">any</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®é™…ä¸Šï¼Œå°±æ˜¯ <code>ReturnType</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> __ReturnType&lt;T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>) =&gt; <span class=\"built_in\">any</span>&gt; = T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>) =&gt; infer R ? R : <span class=\"built_in\">never</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-25-é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\"><a href=\"#11-25-é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\" class=\"headerlink\" title=\"11.25 é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\"></a>11.25 é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹</h3><blockquote>\n<p><code>TypeScript 2.8</code> åœ¨ <code>lib.d.ts</code> é‡Œå¢åŠ äº†ä¸€äº›é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹</p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>Exclude&lt;T, U&gt;</code> â€“ ä» <code>T</code> ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹</li>\n<li><code>Extract&lt;T, U&gt;</code> â€“ æå– <code>T</code> ä¸­å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹</li>\n<li><code>NonNullable&lt;T&gt;</code> â€“ ä» <code>T</code> ä¸­å‰”é™¤ <code>null</code> å’Œ <code>undefined</code></li>\n<li><code>ReturnType&lt;T&gt;</code> â€“ è·å–å‡½æ•°è¿”å›å€¼ç±»å‹</li>\n<li><code>InstanceType&lt;T&gt;</code> â€“ è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹</li>\n</ol>\n</blockquote>\n<ul>\n<li><code>Example</code>:</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T00 = Exclude&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;b&quot; | &quot;d&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T01 = Extract&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;a&quot; | &quot;c&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T02 = Exclude&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// &quot;string&quot; | &quot;number&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T03 = Extract&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// () =&gt; void</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T04 = NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T05 = NonNullable&lt;(<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>) | <span class=\"built_in\">string</span>[] | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// (() =&gt; string) | string[]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: s &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  x = <span class=\"number\">0</span>;</span><br><span class=\"line\">  y = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T10 = ReturnType&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T11 = ReturnType&lt;<span class=\"function\">(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>&gt;; <span class=\"comment\">// void</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T12 = ReturnType&lt;&lt;T&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// &#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T13 = ReturnType&lt;&lt;T <span class=\"keyword\">extends</span> U, U <span class=\"keyword\">extends</span> <span class=\"built_in\">number</span>[]&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// number[]</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T14 = ReturnType&lt;<span class=\"keyword\">typeof</span> f1&gt;; <span class=\"comment\">// &#123; a: number, b: string &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T15 = ReturnType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T16 = ReturnType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"comment\">// type T17 = ReturnType&lt;string&gt;; // Error</span></span><br><span class=\"line\"><span class=\"comment\">// type T18 = ReturnType&lt;Function&gt;; // Error</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T20 = InstanceType&lt;<span class=\"keyword\">typeof</span> C&gt;; <span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T21 = InstanceType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T22 = InstanceType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"comment\">// type T23 = InstanceType&lt;string&gt;; // Error</span></span><br><span class=\"line\"><span class=\"comment\">// type T24 = InstanceType&lt;Function&gt;; // Error</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼š<code>Exclude</code> ç±»å‹æ˜¯å»ºè®®çš„ <code>Diff</code> ç±»å‹çš„ä¸€ç§å®ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Exclude</code> è¿™ä¸ªåå­—æ˜¯ä¸ºäº†é¿å…ç ´åå·²ç»å®šä¹‰äº†çš„ <code>Diff</code> çš„ä»£ç ï¼Œå¹¶ä¸”æˆ‘ä»¬æ„Ÿè§‰è¿™ä¸ªåå­—èƒ½æ›´å¥½åœ°è¡¨è¾¾ç±»å‹çš„è¯­ä¹‰ã€‚æˆ‘ä»¬æ²¡æœ‰å¢åŠ  <code>Omit&lt;T, K&gt;</code> ç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å¾ˆå®¹æ˜“çš„ç”¨ <code>Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;</code> æ¥è¡¨ç¤º</p>\n</blockquote>\n<h2 id=\"åäºŒã€å®ç”¨å·¥å…·ç±»å‹\"><a href=\"#åäºŒã€å®ç”¨å·¥å…·ç±»å‹\" class=\"headerlink\" title=\"åäºŒã€å®ç”¨å·¥å…·ç±»å‹\"></a>åäºŒã€å®ç”¨å·¥å…·ç±»å‹</h2><blockquote>\n<p><code>TypeScript</code> æä¾›ä¸€äº›å·¥å…·ç±»å‹æ¥å¸®åŠ©å¸¸è§çš„ç±»å‹è½¬æ¢ã€‚è¿™äº›ç±»å‹æ˜¯å…¨å±€å¯è§çš„ã€‚</p>\n</blockquote>\n<h3 id=\"12-1-Partial-å±€éƒ¨çš„\"><a href=\"#12-1-Partial-å±€éƒ¨çš„\" class=\"headerlink\" title=\"12.1 Partial å±€éƒ¨çš„\"></a>12.1 Partial å±€éƒ¨çš„</h3><blockquote>\n<p>æ„é€ ç±»å‹ <code>T</code>, å¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®æˆå¯é€‰çš„ï¼Œå®ƒçš„è¿”å›ç±»å‹è¡¨ç¤ºè¾“å…¥ç±»å‹çš„æ‰€æœ‰å­ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PartialTodo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  description: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateTodo</span>(<span class=\"params\">todo: PartialTodo, fieldsToUpdate: Partial&lt;PartialTodo&gt;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; ...todo, ...fieldsToUpdate &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> partialTodo1 = &#123;</span><br><span class=\"line\">  title: <span class=\"string\">&quot;organize desk&quot;</span>,</span><br><span class=\"line\">  description: <span class=\"string\">&quot;clear clutter&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> partialTodo2 = updateTodo(partialTodo1, &#123;</span><br><span class=\"line\">  description: <span class=\"string\">&quot;throw out trash&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-2-Readonly-åªè¯»çš„\"><a href=\"#12-2-Readonly-åªè¯»çš„\" class=\"headerlink\" title=\"12.2 Readonly åªè¯»çš„\"></a>12.2 Readonly åªè¯»çš„</h3><blockquote>\n<p>æ„é€ ç±»å‹ T<strong>ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸º</strong> readonly<strong>ï¼Œä¹Ÿå°±æ˜¯è¯´æ„é€ å‡ºçš„ç±»å‹çš„å±æ€§ä¸èƒ½è¢«å†æ¬¡èµ‹å€¼</strong></p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> ReadonlyTodo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> readonlyTodo: Readonly&lt;ReadonlyTodo&gt; = &#123;</span><br><span class=\"line\">  title: <span class=\"string\">&quot;Delete inactive users&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">readonlyTodo.title = <span class=\"string\">&quot;Hello&quot;</span>; <span class=\"comment\">// Error: cannot reassign a readonly property</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Object.freeze</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">freeze</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">obj: T</span>): <span class=\"title\">Readonly</span>&lt;<span class=\"title\">T</span>&gt;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-3-Record-lt-T-K-gt-è®°å½•\"><a href=\"#12-3-Record-lt-T-K-gt-è®°å½•\" class=\"headerlink\" title=\"12.3 Record&lt;T, K&gt; è®°å½•\"></a>12.3 Record&lt;T, K&gt; è®°å½•</h3><blockquote>\n<p>æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹ä¸º <code>K</code>ï¼Œå±æ€§å€¼çš„ç±»å‹ä¸º <code>T</code>ã€‚è¿™ä¸ªå·¥å…·å¯ç”¨æ¥å°†æŸä¸ªç±»å‹çš„å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ä¸Šã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PageInfo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Page = <span class=\"string\">&quot;home&quot;</span> | <span class=\"string\">&quot;about&quot;</span> | <span class=\"string\">&quot;contact&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> x: Record&lt;Page, PageInfo&gt; = &#123;</span><br><span class=\"line\">  about: &#123; <span class=\"attr\">title</span>: <span class=\"string\">&quot;about&quot;</span> &#125;,</span><br><span class=\"line\">  contact: &#123; <span class=\"attr\">title</span>: <span class=\"string\">&quot;concat&quot;</span> &#125;,</span><br><span class=\"line\">  home: &#123; <span class=\"attr\">title</span>: <span class=\"string\">&quot;home&quot;</span> &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-4-Pick-lt-T-K-gt-æŒ‘é€‰\"><a href=\"#12-4-Pick-lt-T-K-gt-æŒ‘é€‰\" class=\"headerlink\" title=\"12.4 Pick&lt;T, K&gt; æŒ‘é€‰\"></a>12.4 Pick&lt;T, K&gt; æŒ‘é€‰</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­æŒ‘é€‰éƒ¨åˆ†å±æ€§ <code>K</code> æ¥æ„é€ ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PickTodo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  description: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  completed: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> TodoPreview = Pick&lt;PickTodo, <span class=\"string\">&quot;title&quot;</span> | <span class=\"string\">&quot;completed&quot;</span>&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> pickTodo: TodoPreview = &#123;</span><br><span class=\"line\">  title: <span class=\"string\">&quot;Clean room&quot;</span>,</span><br><span class=\"line\">  completed: <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-5-Exclude-lt-T-U-gt-å‰”é™¤\"><a href=\"#12-5-Exclude-lt-T-U-gt-å‰”é™¤\" class=\"headerlink\" title=\"12.5 Exclude&lt;T, U&gt; å‰”é™¤\"></a>12.5 Exclude&lt;T, U&gt; å‰”é™¤</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­å‰”é™¤æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„å±æ€§ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T0 = Exclude&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;a&quot;</span>&gt;; <span class=\"comment\">// &quot;b&quot; | &quot;c&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T1 = Exclude&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span>&gt;; <span class=\"comment\">// &quot;c&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T2 = Exclude&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// string | number</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-6-Extract-lt-T-U-gt-æå–\"><a href=\"#12-6-Extract-lt-T-U-gt-æå–\" class=\"headerlink\" title=\"12.6 Extract&lt;T, U&gt; æå–\"></a>12.6 Extract&lt;T, U&gt; æå–</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­æå–æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T01 = Extract&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;a&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T02 = Extract&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// () =&gt; void</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-7-NonNullable\"><a href=\"#12-7-NonNullable\" class=\"headerlink\" title=\"12.7 NonNullable\"></a>12.7 NonNullable</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­å‰”é™¤ <code>null</code> å’Œ <code>undefined</code>ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T10 = NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T11 = NonNullable&lt;<span class=\"built_in\">string</span>[] | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string[]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-8-ReturnType-è¿”å›å€¼ç±»å‹\"><a href=\"#12-8-ReturnType-è¿”å›å€¼ç±»å‹\" class=\"headerlink\" title=\"12.8 ReturnType è¿”å›å€¼ç±»å‹\"></a>12.8 ReturnType è¿”å›å€¼ç±»å‹</h3><blockquote>\n<p>ç”±å‡½æ•°ç±»å‹ <code>T</code> çš„è¿”å›å€¼ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: s &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T0 = ReturnType&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T1 = ReturnType&lt;<span class=\"function\">(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>&gt;; <span class=\"comment\">// void</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T2 = ReturnType&lt;&lt;T&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// &#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T3 = ReturnType&lt;&lt;T <span class=\"keyword\">extends</span> U, U <span class=\"keyword\">extends</span> <span class=\"built_in\">number</span>[]&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// number[]</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T4 = ReturnType&lt;<span class=\"keyword\">typeof</span> f1&gt;; <span class=\"comment\">// &#123; a: number, b: string &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T5 = ReturnType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T6 = ReturnType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T7 = ReturnType&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// Error</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T8 = ReturnType&lt;<span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-9-InstanceType-æ„é€ å‡½æ•°-å®ä¾‹ç±»å‹\"><a href=\"#12-9-InstanceType-æ„é€ å‡½æ•°-å®ä¾‹ç±»å‹\" class=\"headerlink\" title=\"12.9 InstanceType æ„é€ å‡½æ•° å®ä¾‹ç±»å‹\"></a>12.9 InstanceType æ„é€ å‡½æ•° å®ä¾‹ç±»å‹</h3><blockquote>\n<p>ç”±æ„é€ å‡½æ•°ç±»å‹ <code>T</code> çš„å®ä¾‹ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  x = <span class=\"number\">0</span>;</span><br><span class=\"line\">  y = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T01 = InstanceType&lt;<span class=\"keyword\">typeof</span> C&gt;; <span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T02 = InstanceType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T03 = InstanceType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T04 = InstanceType&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// Error</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T05 = InstanceType&lt;<span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-10-Required\"><a href=\"#12-10-Required\" class=\"headerlink\" title=\"12.10 Required\"></a>12.10 Required</h3><blockquote>\n<p>æ„é€ ä¸€ä¸ªç±»å‹ï¼Œä½¿ç±»å‹ <code>T</code> çš„æ‰€æœ‰å±æ€§ä¸º <code>required</code></p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Props &#123;</span><br><span class=\"line\">  a?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  b?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj: Props = &#123; <span class=\"attr\">a</span>: <span class=\"number\">5</span> &#125;; <span class=\"comment\">// Ok</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj2: Required&lt;Props&gt; = &#123; <span class=\"attr\">a</span>: <span class=\"number\">5</span> &#125;; <span class=\"comment\">// Error, property &#x27;b&#x27; missing</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-11-ThisType-this\"><a href=\"#12-11-ThisType-this\" class=\"headerlink\" title=\"12.11 ThisType this\"></a>12.11 ThisType this</h3><blockquote>\n<p>è¿™ä¸ªå·¥å…·ä¸ä¼šè¿”å›ä¸€ä¸ªè½¬æ¢åçš„ç±»å‹ã€‚å®ƒä½œä¸ºä¸Šä¸‹æ–‡çš„ <code>this</code> ç±»å‹çš„ä¸€ä¸ªæ ‡è®°ã€‚<br>æ³¨æ„ï¼šè‹¥æƒ³è¦ä½¿ç”¨æ­¤ç±»å‹ï¼Œå¿…é¡»å¯ç”¨ <code>--noImplicitThis</code></p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Compile with --noImplicitThis</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> ObjectDescriptor&lt;D, M&gt; = &#123;</span><br><span class=\"line\">  data?: D;</span><br><span class=\"line\">  methods?: M &amp; ThisType&lt;D &amp; M&gt;; <span class=\"comment\">// Type of &#x27;this&#x27; in methods is D &amp; M</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeObject</span>&lt;<span class=\"title\">D</span>, <span class=\"title\">M</span>&gt;(<span class=\"params\">desc: ObjectDescriptor&lt;D, M&gt;</span>): <span class=\"title\">D</span> &amp; <span class=\"title\">M</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data: <span class=\"built_in\">object</span> = desc.data || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> methods: <span class=\"built_in\">object</span> = desc.methods || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; ...data, ...methods &#125; <span class=\"keyword\">as</span> D &amp; M;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> _obj = makeObject(&#123;</span><br><span class=\"line\">  data: &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span> &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">moveBy</span>(<span class=\"params\">dx: <span class=\"built_in\">number</span>, dy: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.x += dx; <span class=\"comment\">// Strongly typed this</span></span><br><span class=\"line\">      <span class=\"built_in\">this</span>.y += dy; <span class=\"comment\">// Strongly typed this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">_obj.x = <span class=\"number\">10</span>;</span><br><span class=\"line\">_obj.y = <span class=\"number\">10</span>;</span><br><span class=\"line\">_obj.moveBy(<span class=\"number\">5</span>, <span class=\"number\">5</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>makeObject</code> å‚æ•°é‡Œçš„ <code>methods</code> å¯¹è±¡å…·æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡ç±»å‹ <code>ThisType&lt;D &amp; M&gt;</code>ï¼Œå› æ­¤ <code>methods</code> å¯¹è±¡çš„æ–¹æ³•é‡Œ this çš„ç±»å‹ä¸º <code>&#123; x: number, y: number &#125; &amp; &#123; moveBy(dx: number, dy: number): number &#125;</code>ã€‚<br>åœ¨ <code>lib.d.ts</code> é‡Œï¼Œ<code>ThisType&lt;T&gt;</code> æ ‡è¯†æ¥å£æ˜¯ä¸ªç®€å•çš„ç©ºæ¥å£å£°æ˜ã€‚é™¤äº†åœ¨è¢«è¯†åˆ«ä¸ºå¯¹è±¡å­—é¢é‡çš„ä¸Šä¸‹æ–‡ç±»å‹ä¹‹å¤–ï¼Œè¿™ä¸ªæ¥å£ä¸ä¸€èˆ¬çš„ç©ºæ¥å£æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p>\n</blockquote>\n<h2 id=\"åä¸‰ã€Symbols\"><a href=\"#åä¸‰ã€Symbols\" class=\"headerlink\" title=\"åä¸‰ã€Symbols\"></a>åä¸‰ã€Symbols</h2><blockquote>\n<p>ä»‹ç»ï¼šè‡ª <code>ECMAScript 2015</code> èµ·ï¼Œ<code>symbol</code> æˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ï¼Œå°±åƒ <code>number</code> å’Œ <code>string</code> ä¸€æ ·ã€‚</p>\n</blockquote>\n<h3 id=\"13-1-symbol-ç±»å‹çš„å€¼æ˜¯é€šè¿‡-Symbol-æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\"><a href=\"#13-1-symbol-ç±»å‹çš„å€¼æ˜¯é€šè¿‡-Symbol-æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\" class=\"headerlink\" title=\"13.1 symbol ç±»å‹çš„å€¼æ˜¯é€šè¿‡ Symbol æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\"></a>13.1 <code>symbol</code> ç±»å‹çš„å€¼æ˜¯é€šè¿‡ <code>Symbol</code> æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sym1 = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> sym2 = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>); <span class=\"comment\">// å¯é€‰çš„å­—ç¬¦ä¸² key</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-2-Symbols-æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\"><a href=\"#13-2-Symbols-æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\" class=\"headerlink\" title=\"13.2 Symbols æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\"></a>13.2 <code>Symbols</code> æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sym3 = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> sym4 = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>);</span><br><span class=\"line\">sym3 === sym4; <span class=\"comment\">// false symbols æ˜¯å”¯ä¸€çš„</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-3-åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols-ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\"><a href=\"#13-3-åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols-ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\" class=\"headerlink\" title=\"13.3 åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\"></a>13.3 åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œ<code>symbols</code> ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> sym = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  [sym]: <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj[sym]); <span class=\"comment\">// &quot;value&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-4-Symbols-ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\"><a href=\"#13-4-Symbols-ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\" class=\"headerlink\" title=\"13.4 Symbols ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\"></a>13.4 <code>Symbols</code> ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getClassNameSymbol = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  [getClassNameSymbol]() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;C&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\"><span class=\"keyword\">let</span> className = c[getClassNameSymbol](); <span class=\"comment\">// &quot;C&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-5-ä¼—æ‰€å‘¨çŸ¥çš„-Symbols\"><a href=\"#13-5-ä¼—æ‰€å‘¨çŸ¥çš„-Symbols\" class=\"headerlink\" title=\"13.5 ä¼—æ‰€å‘¨çŸ¥çš„ Symbols\"></a>13.5 ä¼—æ‰€å‘¨çŸ¥çš„ <code>Symbols</code></h3><blockquote>\n<p>é™¤äº†ç”¨æˆ·å®šä¹‰çš„ <code>Symbols</code>ï¼Œè¿˜æœ‰ä¸€äº›å·²ç»ä¼—æ‰€å‘¨çŸ¥çš„å†…ç½® <code>symbols</code>ã€‚å†…ç½® <code>symbols</code> ç”¨æ¥è¡¨ç¤ºè¯­è¨€å†…éƒ¨çš„è¡Œä¸ºã€‚<br>ä»¥ä¸‹ä¸ºè¿™äº› <code>symbols</code> çš„åˆ—è¡¨ï¼š</p>\n</blockquote>\n<ul>\n<li><code>Symbol.hasInstance</code></li>\n</ul>\n<blockquote>\n<p>è¯¥æ–¹æ³•ä¼šè¢« <code>instanceof</code> è¿ç®—ç¬¦è°ƒç”¨ã€‚æ„é€ å™¨å¯¹è±¡ç”¨æ¥è¯†åˆ«ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å…¶å®ä¾‹ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.isConcatSpreadable</code></li>\n</ul>\n<blockquote>\n<p>å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ <code>Array.prototype.concat</code> æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ•°ç»„å…ƒç´ æ˜¯å¦å¯å±•å¼€ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.iterator</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>for-of</code> è¯­å¥è°ƒç”¨ï¼Œã€‚è¿”å›å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨</p>\n</blockquote>\n<ul>\n<li><code>Symbol.match</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.match</code> è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²</p>\n</blockquote>\n<ul>\n<li><code>Symbol.replace</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.replac</code>e è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­åŒ¹é…çš„å­ä¸²ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.search</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.search</code> è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼è¿”å›è¢«åŒ¹é…éƒ¨åˆ†åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.species</code></li>\n</ul>\n<blockquote>\n<p>å‡½æ•°å€¼ï¼Œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.split</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.split</code> è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åˆ†å‰²å­—ç¬¦ä¸²ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.toPrimitive</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>ToPrimitive</code> æŠ½è±¡æ“ä½œè°ƒç”¨ã€‚æŠŠå¯¹è±¡è½¬æ¢ä¸ºç›¸åº”çš„åŸå§‹å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.toStringTag</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢«å†…ç½®æ–¹æ³• <code>Object.prototype.toString</code> è°ƒç”¨ã€‚è¿”å›åˆ›å»ºå¯¹è±¡æ—¶é»˜è®¤çš„å­—ç¬¦ä¸²æè¿°ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.unscopables</code></li>\n</ul>\n<blockquote>\n<p>å¯¹è±¡ï¼Œå®ƒè‡ªå·±æ‹¥æœ‰çš„å±æ€§ä¼šè¢« <code>with</code> ä½œç”¨åŸŸæ’é™¤åœ¨å¤–ã€‚</p>\n</blockquote>\n<h2 id=\"åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\"><a href=\"#åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\" class=\"headerlink\" title=\"åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\"></a>åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</h2><ul>\n<li>å¯è¿­ä»£æ€§</li>\n</ul>\n<blockquote>\n<p>å½“ä¸€ä¸ªå¯¹è±¡å®ç°äº† <code>Symbol.iterator</code> å±æ€§æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯å¯è¿­ä»£çš„ã€‚ä¸€äº›å†…ç½®çš„ç±»å‹å¦‚ <code>Array</code>ï¼Œ<code>Map</code>ï¼Œ<code>Set</code>ï¼Œ<code>String</code>ï¼Œ<code>Int32Array</code>ï¼Œ<code>Uint32Array</code> ç­‰éƒ½å·²ç»å®ç°äº†å„è‡ªçš„ <code>Symbol.iterator</code>ã€‚å¯¹è±¡ä¸Šçš„ <code>Symbol.iterator</code> å‡½æ•°è´Ÿè´£è¿”å›ä¾›è¿­ä»£çš„å€¼ã€‚</p>\n</blockquote>\n<h3 id=\"14-1-for-â€¦-of-è¯­å¥\"><a href=\"#14-1-for-â€¦-of-è¯­å¥\" class=\"headerlink\" title=\"14.1 for â€¦ of è¯­å¥\"></a>14.1 for â€¦ of è¯­å¥</h3><blockquote>\n<p><code>for ... of</code> ä¼šéå†å¯è¿­ä»£å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡ä¸Šçš„ <code>Symbol.iterator</code> æ–¹æ³•ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯åœ¨æ•°ç»„ä¸Šä½¿ç”¨ <code>for ... of</code> çš„ç®€å•ä¾‹å­</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> someArray = [<span class=\"number\">1</span>, <span class=\"string\">&quot;string&quot;</span>, <span class=\"literal\">false</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> entry <span class=\"keyword\">of</span> someArray) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(entry); <span class=\"comment\">// 1, &quot;string&quot;, false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-2-for-â€¦-of-Vs-for-â€¦-in-è¯­å¥\"><a href=\"#14-2-for-â€¦-of-Vs-for-â€¦-in-è¯­å¥\" class=\"headerlink\" title=\"14.2 for â€¦ of Vs for â€¦ in è¯­å¥\"></a>14.2 for â€¦ of Vs for â€¦ in è¯­å¥</h3><blockquote>\n<p><code>for ... of</code> å’Œ <code>for ... in</code> å‡å¯è¿­ä»£ä¸€ä¸ªåˆ—è¡¨ï¼›ä½†æ˜¯ç”¨äºè¿­ä»£çš„å€¼å´ä¸åŒï¼Œ<code>for ... in</code> è¿­ä»£çš„æ˜¯å¯¹è±¡çš„ <code>é”®</code> çš„åˆ—è¡¨ï¼Œè€Œ <code>for ... of</code> åˆ™è¿­ä»£å¯¹è±¡çš„é”®å¯¹åº”çš„å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list = [<span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> list) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// &quot;0&quot; &quot;1&quot; &quot;2&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> list) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// &quot;4&quot; &quot;5&quot; &quot;6&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ <code>for ... in</code> å¯ä»¥æ“ä½œä»»ä½•å¯¹è±¡ï¼›å®ƒæä¾›äº†æŸ¥çœ‹å¯¹è±¡å±æ€§çš„ä¸€ç§æ–¹æ³•ã€‚ä½†æ˜¯ <code>for ... of</code> å…³æ³¨äºè¿­ä»£å¯¹è±¡çš„å€¼ã€‚å†…ç½®å¯¹è±¡ <code>Map</code> å’Œ <code>Set</code> å·²ç»å®ç°äº† <code>Symbol.iterator</code> æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥è®¿é—®å®ƒä»¬ä¿å­˜çš„å€¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> pets = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([<span class=\"string\">&quot;Cat&quot;</span>, <span class=\"string\">&quot;Dog&quot;</span>, <span class=\"string\">&quot;Hamster&quot;</span>]);</span><br><span class=\"line\">pets[<span class=\"string\">&quot;species&quot;</span>] = <span class=\"string\">&quot;mammals&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> pet <span class=\"keyword\">in</span> pets) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pet);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> pet <span class=\"keyword\">of</span> pets) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pet); <span class=\"comment\">// &quot;Cat&quot;, &quot;Dog&quot;, &quot;Hamster&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-3-ä»£ç ç”Ÿæˆç›®æ ‡ä¸º-ES5-å’Œ-ES3\"><a href=\"#14-3-ä»£ç ç”Ÿæˆç›®æ ‡ä¸º-ES5-å’Œ-ES3\" class=\"headerlink\" title=\"14.3 ä»£ç ç”Ÿæˆç›®æ ‡ä¸º ES5 å’Œ ES3\"></a>14.3 ä»£ç ç”Ÿæˆç›®æ ‡ä¸º <code>ES5</code> å’Œ <code>ES3</code></h3><blockquote>\n<p>å½“ç”Ÿæˆç›®æ ‡ä¸º <code>ES5</code> æˆ– <code>ES3</code>ï¼Œè¿­ä»£å™¨åªå…è®¸åœ¨ <code>Array</code> ç±»å‹ä¸Šä½¿ç”¨ã€‚åœ¨éæ•°ç»„å€¼ä¸Šä½¿ç”¨ <code>for ... of</code> è¯­å¥ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå°±ç®—è¿™äº›éæ•°ç»„å€¼å·²ç»å®ç°äº† <code>Symbol.iterator</code> å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç®€å•çš„ <code>for</code> å¾ªç¯åšä¸º <code>for ... of</code> å¾ªç¯ï¼Œæ¯”å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> numbers = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> num <span class=\"keyword\">of</span> numbers) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(num);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆçš„ä»£ç ä¸ºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"built_in\">number</span> = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> _i = <span class=\"number\">0</span>; _i &lt; numbers.length; _i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> num = numbers[_i];</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(num);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-4-ç›®æ ‡ä¸º-ECMAScript-2015-æˆ–æ›´é«˜\"><a href=\"#14-4-ç›®æ ‡ä¸º-ECMAScript-2015-æˆ–æ›´é«˜\" class=\"headerlink\" title=\"14.4 ç›®æ ‡ä¸º ECMAScript 2015 æˆ–æ›´é«˜\"></a>14.4 ç›®æ ‡ä¸º <code>ECMAScript 2015</code> æˆ–æ›´é«˜</h3><blockquote>\n<p>å½“ç›®æ ‡ä¸ºå…¼å®¹ <code>ECMAScript 2015</code> çš„å¼•æ“æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”å¼•æ“çš„ <code>for ... of</code> å†…ç½®è¿­ä»£å™¨å®ç°æ–¹å¼ã€‚</p>\n</blockquote>\n<h2 id=\"åäº”ã€æ¨¡å—\"><a href=\"#åäº”ã€æ¨¡å—\" class=\"headerlink\" title=\"åäº”ã€æ¨¡å—\"></a>åäº”ã€æ¨¡å—</h2><h3 id=\"15-1-å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\"><a href=\"#15-1-å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\" class=\"headerlink\" title=\"15.1 å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\"></a>15.1 å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜</h3><blockquote>\n<p>è¯·åŠ¡å¿…æ³¨æ„ä¸€ç‚¹ï¼š<code>TypeScript 1.5</code> é‡Œæœ¯è¯­åå·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚â€<code>å†…éƒ¨æ¨¡å—</code>â€œ ç°åœ¨è¢«ç§°ä½œ â€œ<code>å‘½åç©ºé—´</code>â€œã€‚â€<code>å¤–éƒ¨æ¨¡å—</code>â€œ ç°åœ¨åˆ™ç®€ç§°ä¸º â€œ<code>æ¨¡å—</code>â€œã€‚è¿™æ˜¯ä¸ºäº†ä¸ <code>ECMAScript 2015</code> é‡Œçš„æœ¯è¯­ä¿æŒå·²ä¸€è‡´ï¼Œ (ä¹Ÿå°±æ˜¯è¯´ <code>module X</code> { ç›¸å½“äºç°åœ¨æ¨èçš„å†™æ³• <code>namespace X</code> })</p>\n</blockquote>\n<h3 id=\"15-2-ä»‹ç»\"><a href=\"#15-2-ä»‹ç»\" class=\"headerlink\" title=\"15.2 ä»‹ç»\"></a>15.2 ä»‹ç»</h3><ol>\n<li>ä» <code>ECMAScript 2015</code> å¼€å§‹ï¼Œ<code>JavaScript</code> å¼•å…¥äº†æ¨¡å—çš„æ¦‚å¿µã€‚<code>TypeScript</code> ä¹Ÿæ²¿ç”¨è¿™ä¸ªæ¦‚å¿µã€‚</li>\n<li>æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼›è¿™æ„å‘³ç€å®šä¹‰åœ¨ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ç­‰ç­‰åœ¨æ¨¡å—å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨ <code>export</code> å½¢å¼ä¹‹ä¸€å¯¼å‡ºå®ƒä»¬ã€‚ç›¸åï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶å®ƒæ¨¡å—å¯¼å‡ºçš„ <code>å˜é‡</code>ï¼Œ<code>å‡½æ•°</code>ï¼Œ<code>ç±»</code>ï¼Œ<code>æ¥å£</code> ç­‰çš„æ—¶å€™ï¼Œä½ å¿…é¡»è¦å¯¼å…¥å®ƒä»¬ï¼Œå¯ä»¥ä½¿ç”¨ <code>import</code> å½¢å¼ä¹‹ä¸€ã€‚</li>\n<li>æ¨¡å—æ˜¯è‡ªå£°æ˜çš„ï¼›ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡åœ¨æ–‡ä»¶çº§åˆ«ä¸Šä½¿ç”¨ <code>import</code> å’Œ <code>exports</code> å»ºç«‹çš„ã€‚</li>\n<li>æ¨¡å—ä½¿ç”¨æ¨¡å—åŠ è½½å™¨å»å¯¼å…¥å…¶å®ƒçš„æ¨¡å—ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ¨¡å—åŠ è½½å™¨çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œæ­¤æ¨¡å—ä»£ç å‰å»æŸ¥æ‰¾å¹¶æ‰§è¡Œè¿™ä¸ªæ¨¡å—çš„æ‰€æœ‰ä¾èµ–ã€‚å¤§å®¶æœ€ç†ŸçŸ¥çš„ <code>JavaScript</code> æ¨¡å—åŠ è½½å™¨æ˜¯æœåŠ¡ä¸ <code>Node.js</code> çš„ <code>CommonJS</code> å’Œ æœåŠ¡äº <code>Web</code> åº”ç”¨çš„ <code>Require.js</code>ã€‚</li>\n<li><code>TypeScript</code> å’Œ <code>ECMAScript 2015</code> ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ <code>import</code> æˆ–è€… <code>export</code> çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ <code>import</code> æˆ–è€… <code>export</code> å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å°†è¢«è§†ä¸ºå…¨å±€å¯è§çš„ (å› æ­¤å¯¹æ¨¡å—ä¹Ÿæ˜¯å¯è§çš„)ã€‚</li>\n</ol>\n<h3 id=\"15-3-å¯¼å‡º\"><a href=\"#15-3-å¯¼å‡º\" class=\"headerlink\" title=\"15.3 å¯¼å‡º\"></a>15.3 å¯¼å‡º</h3><h4 id=\"15-3-1-å¯¼å‡ºå£°æ˜\"><a href=\"#15-3-1-å¯¼å‡ºå£°æ˜\" class=\"headerlink\" title=\"15.3.1. å¯¼å‡ºå£°æ˜\"></a>15.3.1. å¯¼å‡ºå£°æ˜</h4><blockquote>\n<p>ä»»ä½•å£°æ˜( æ¯”å¦‚ <code>å˜é‡</code>ï¼Œ<code>å‡½æ•°</code>ï¼Œ<code>ç±»</code>ï¼Œ<code>ç±»å‹åˆ«å</code> æˆ– <code>æ¥å£</code> )éƒ½èƒ½å¤Ÿé€šè¿‡æ·»åŠ  <code>export</code> å…³é”®å­—æ¥å¯¼å‡ºã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> numberRegexp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegexp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-3-2-å¯¼å‡ºè¯­å¥\"><a href=\"#15-3-2-å¯¼å‡ºè¯­å¥\" class=\"headerlink\" title=\"15.3.2 å¯¼å‡ºè¯­å¥\"></a>15.3.2 å¯¼å‡ºè¯­å¥</h4><blockquote>\n<p>å¯¼å‡ºè¯­å¥å¾ˆä¾¿åˆ©ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å¯¼å‡ºçš„éƒ¨åˆ†é‡å‘½åï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¿™æ ·æ”¹å†™ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator1</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegexp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ZipCodeValidator1 &#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ZipCodeValidator1 <span class=\"keyword\">as</span> mainValidator &#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-3-3-é‡æ–°å¯¼å‡º\"><a href=\"#15-3-3-é‡æ–°å¯¼å‡º\" class=\"headerlink\" title=\"15.3.3 é‡æ–°å¯¼å‡º\"></a>15.3.3 é‡æ–°å¯¼å‡º</h4><blockquote>\n<p>æˆ‘ä»¬ç»å¸¸ä¼šå»æ‰©å±•å…¶å®ƒæ¨¡å—ï¼Œå¹¶ä¸”åªå¯¼å‡ºé‚£ä¸ªæ¨¡å—çš„é‚£éƒ¨åˆ†å†…å®¹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é‡æ–°å¯¼å‡ºåŠŸèƒ½å¹¶ä¸ä¼šåœ¨å½“å‰æ¨¡å—å¯¼å…¥é‚£ä¸ªæ¨¡å—æˆ–å®šä¹‰ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ParseIntBasedZipCodeValidator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">isAcceptable</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; <span class=\"built_in\">parseInt</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¯¼å‡ºåŸå…ˆçš„éªŒè¯å™¨ä½†åšäº†é‡å‘½å</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> RegExpBasedZipCodeValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æˆ–è€…ä¸€ä¸ªæ¨¡å—å¯ä»¥åŒ…è£¹å¤šä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒä»¬å¯¼å‡ºçš„å†…å®¹è”åˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡è¯­æ³•ï¼š<code>export * from &quot;module&quot;</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> <span class=\"string\">&quot;./StringValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> <span class=\"string\">&quot;./LetterOnlyValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-4-å¯¼å…¥\"><a href=\"#15-4-å¯¼å…¥\" class=\"headerlink\" title=\"15.4 å¯¼å…¥\"></a>15.4 å¯¼å…¥</h3><blockquote>\n<p>æ¨¡å—çš„å¯¼å…¥æ“ä½œä¸å¯¼å‡ºä¸€æ ·ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ <code>import</code> å½¢å¼ä¹‹ä¸€æ¥å¯¼å…¥å…¶å®ƒæ¨¡å—ä¸­çš„å¯¼å‡ºå†…å®¹ã€‚</p>\n</blockquote>\n<h4 id=\"15-4-1-å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\"><a href=\"#15-4-1-å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\" class=\"headerlink\" title=\"15.4.1 å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\"></a>15.4.1 å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥å¯¹å¯¼å…¥å†…å®¹é‡å‘½å</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> ZCV &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> ZCV();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-4-2-å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\"><a href=\"#15-4-2-å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\" class=\"headerlink\" title=\"15.4.2 å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\"></a>15.4.2 å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> validator <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> validator.ZipCodeValidator();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-4-3-å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\"><a href=\"#15-4-3-å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\" class=\"headerlink\" title=\"15.4.3 å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\"></a>15.4.3 å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—</h4><blockquote>\n<p>å°½ç®¡ä¸æ¨èè¿™ä¹ˆåšï¼Œä¸€äº›æ¨¡å—ä¼šè®¾ç½®ä¸€äº›å…¨å±€çŠ¶æ€ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚è¿™äº›æ¨¡å—å¯èƒ½æ²¡æœ‰ä»»ä½•çš„å¯¼å‡ºæˆ–ç”¨æˆ·æ ¹æœ¬</p>\n</blockquote>\n<blockquote>\n<p>å°±ä¸å…³æ³¨å®ƒçš„å¯¼å‡ºã€‚ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥å¯¼å…¥è¿™äº›æ¨¡å—ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./my-module.js&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-5-é»˜è®¤å¯¼å‡º\"><a href=\"#15-5-é»˜è®¤å¯¼å‡º\" class=\"headerlink\" title=\"15.5 é»˜è®¤å¯¼å‡º\"></a>15.5 é»˜è®¤å¯¼å‡º</h3><blockquote>\n<p>æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥æœ‰ä¸€ä¸ª <code>default</code> å¯¼å‡ºã€‚é»˜è®¤å¯¼å‡ºä½¿ç”¨ <code>default</code> å…³é”®å­—æ ‡è®°ï¼›å¹¶ä¸”ä¸€ä¸ªæ¨¡å—åªèƒ½å¤Ÿæœ‰ä¸€ä¸ª <code>default</code> å¯¼å‡ºã€‚éœ€è¦ä½¿ç”¨ ä¸€ç§ç‰¹æ®Šçš„å¯¼å…¥å½¢å¼æ¥å¯¼å…¥ <code>default</code> å¯¼å‡ºã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>default</code> å¯¼å‡ºååˆ†ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œåƒ <code>JQuery</code> è¿™æ ·çš„ç±»åº“å¯èƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡º <code>jQuery</code> æˆ– <code>$</code>ï¼Œå¹¶ä¸”æˆ‘ä»¬åŸºæœ¬ä¸Šä¹Ÿä¼šä½¿ç”¨åŒæ ·çš„åå­— <code>jQuery</code> æˆ– <code>$</code> å¯¼å‡º <code>JQuery</code>ã€‚</p>\n</blockquote>\n<ul>\n<li><code>JQuery.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">let</span> $: JQuery;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> $;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>App.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&quot;JQuery&quot;</span>;</span><br><span class=\"line\">$(<span class=\"string\">&quot;button.continue&quot;</span>).html(<span class=\"string\">&quot;Next step ...&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç±»å’Œå‡½æ•°å£°æ˜å¯ä»¥ç›´æ¥è¢«æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºã€‚æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºçš„ç±»å’Œå‡½æ•°çš„åå­—æ˜¯å¯ä»¥çœç•¥çš„ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">isAcceptable</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; ZipCodeValidator.numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> validator <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> validator();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>æˆ–è€…</code></p>\n</blockquote>\n<ul>\n<li><code>StaticZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> validate <span class=\"keyword\">from</span> <span class=\"string\">&quot;./StaticZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">// use function validate</span></span><br><span class=\"line\">strings.forEach(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; <span class=\"subst\">$&#123;validate(s)&#125;</span> ? &quot; matches&quot; : &quot; does not match&quot;`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>default</code> å¯¼å‡ºä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå€¼</p>\n</blockquote>\n<ul>\n<li><code>OneTwoThree.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"string\">&quot;123&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Log.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> num <span class=\"keyword\">from</span> <span class=\"string\">&quot;./OneTwoThree&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num); <span class=\"comment\">// 123</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>export =</code> å’Œ <code>import = require()</code></p>\n</blockquote>\n<ol>\n<li><code>CommonJS</code> å’Œ <code>AMD</code> çš„ç¯å¢ƒé‡Œéƒ½æœ‰ä¸€ä¸ª <code>exports</code> å˜é‡ï¼Œè¿™ä¸ªå˜é‡åŒ…å«äº†ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºå†…å®¹ã€‚</li>\n<li><code>CommonJS</code> å’Œ <code>AMD</code> çš„ <code>exports</code> éƒ½å¯ä»¥è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µä¸‹å…¶ä½œç”¨å°±ç±»ä¼¼äº es6 è¯­æ³•é‡Œçš„é»˜è®¤å¯¼å‡ºï¼Œå³ <code>export default</code> è¯­æ³•äº†ã€‚è™½ç„¶ä½œç”¨ç›¸ä¼¼ï¼Œä½†æ˜¯ <code>export default</code> è¯­æ³•å¹¶ä¸èƒ½å…¼å®¹ <code>CommonJS</code> å’Œ <code>AMD</code> çš„ <code>exports</code>ã€‚</li>\n<li>ä¸ºäº†æ”¯æŒ <code>CommonJS</code> å’Œ <code>AMD</code> çš„ <code>exports</code>ï¼Œ<code>TypeScript</code> æä¾›äº† <code>export =</code> è¯­æ³•ã€‚</li>\n<li><code>export =</code> è¯­æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚è¿™é‡Œçš„å¯¹è±¡ä¸€è¯æŒ‡çš„æ˜¯ç±»ï¼Œæ¥å£ï¼Œå‘½åç©ºé—´ï¼Œå‡½æ•°æˆ–æšä¸¾ã€‚</li>\n<li>è‹¥ä½¿ç”¨ <code>export =</code> å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <code>TypeScript</code> çš„ç‰¹å®šè¯­æ³• <code>import module = require(&#39;module&#39;)</code> æ¥å¯¼å…¥æ­¤æ¨¡å—ã€‚</li>\n</ol>\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">isAcceptable</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> = ZipCodeValidator; <span class=\"comment\">// é‡ç‚¹</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zip = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>); <span class=\"comment\">// é‡ç‚¹</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98502&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> validator = <span class=\"keyword\">new</span> zip();</span><br><span class=\"line\">strings.forEach(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; - <span class=\"subst\">$&#123;validator.isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-6-ç”Ÿæˆæ¨¡å—ä»£ç \"><a href=\"#15-6-ç”Ÿæˆæ¨¡å—ä»£ç \" class=\"headerlink\" title=\"15.6 ç”Ÿæˆæ¨¡å—ä»£ç \"></a>15.6 ç”Ÿæˆæ¨¡å—ä»£ç </h3><blockquote>\n<p>æ ¹æ®ç¼–è¯‘æ—¶æŒ‡å®šçš„æ¨¡å—ç›®æ ‡å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”çš„ä¾› <code>Node.js\\(CommonJS\\)ï¼ŒRequire.js\\(AMD\\)</code>ï¼Œ<code>UMD</code>ï¼Œ<code>SystemJS</code> æˆ– <code>ECMAScript 2015 native module\\(ES6\\)</code> æ¨¡å—åŠ è½½ç³»ç»Ÿä½¿ç”¨çš„ä»£ç ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æƒ³è¦äº†è§£ç”Ÿæˆä»£ç ä¸­ <code>define</code>ï¼Œ<code>require</code> å’Œ <code>register</code> çš„æ„ä¹‰ï¼Œéœ€è¦å‚è€ƒç›¸åº”çš„æ¨¡å—åŠ è½½å™¨çš„æ–‡æ¡£ã€‚</p>\n</blockquote>\n<ul>\n<li><code>SimpleModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> m = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mod&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> t = m.something + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>AMD / RequireJS SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>, <span class=\"string\">&quot;./mod&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span>, mod_1</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">exports</span>.t = mod_1.something + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>CommonJS / Node SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> mod_1 = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./mod&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.t = mod_1.something + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>UMD SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">factory</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span> === <span class=\"string\">&quot;object&quot;</span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span>.exports === <span class=\"string\">&quot;object&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> v = factory(<span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (v !== <span class=\"literal\">undefined</span>) <span class=\"built_in\">module</span>.exports = v;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">&quot;function&quot;</span> &amp;&amp; define.amd) &#123;</span><br><span class=\"line\">    define([<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>, <span class=\"string\">&quot;./mod&quot;</span>], factory);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> mod_1 = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./mod&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exports</span>.t = mod_1.something + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>System SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.register([<span class=\"string\">&quot;./mod&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">exports_1</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> mod_1;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    setters: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">mod_1_1</span>) </span>&#123;</span><br><span class=\"line\">        mod_1 = mod_1_1;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    execute: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      exports_1(<span class=\"string\">&quot;t&quot;</span>, (t = mod_1.something + <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Native ECMAScript 2015 modules SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; something &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./mod&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> t = something + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-7-ç®€å•ç¤ºä¾‹\"><a href=\"#15-7-ç®€å•ç¤ºä¾‹\" class=\"headerlink\" title=\"15.7 ç®€å•ç¤ºä¾‹\"></a>15.7 ç®€å•ç¤ºä¾‹</h3><blockquote>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥æ•´ç†ä¸€ä¸‹å‰é¢çš„éªŒè¯å™¨å®ç°ï¼Œæ¯ä¸ªæ¨¡å—åªæœ‰ä¸€ä¸ªå‘½åçš„å¯¼å‡ºã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºäº†ç¼–è¯‘ï¼Œæˆ‘ä»¬å¿…é¡»è¦åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šä¸€ä¸ªæ¨¡å—ç›®æ ‡ã€‚å¯¹äº <code>Node.js</code> æ¥è¯´ï¼Œä½¿ç”¨ <code>--module commonjs</code>ï¼›å¯¹äº <code>Require.js</code> æ¥è¯´ï¼Œä½¿ç”¨ <code>--module amd</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc --<span class=\"built_in\">module</span> commonjs Test.ts</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¼–è¯‘å®Œæˆåï¼Œæ¯ä¸ªæ¨¡å—ä¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ <code>.js</code> æ–‡ä»¶ã€‚å¥½æ¯”ä½¿ç”¨äº† <code>reference</code> æ ‡ç­¾ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ® <code>import</code> è¯­å¥ç¼–è¯‘ç›¸åº”çš„æ–‡ä»¶ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Validation.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>LetterOnlyValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StringValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Validation&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> lettersRegExp = <span class=\"regexp\">/^[A-Za-z]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> lettersRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StringValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Validation&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StringValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Validation&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; LetterOnlyValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./LetterOnlyValidator&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Some samples to try</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Validators to use</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP code&quot;</span>] = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters only&quot;</span>] = <span class=\"keyword\">new</span> LetterOnlyValidator();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Show whether each string passed each validator</span></span><br><span class=\"line\">strings.forEach(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; - <span class=\"subst\">$&#123;validators[name].isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> <span class=\"subst\">$&#123;name&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-8-å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\"><a href=\"#15-8-å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\" class=\"headerlink\" title=\"15.8 å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\"></a>15.8 å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯</h3><ol>\n<li>æœ‰æ—¶å€™ï¼Œä½ åªæƒ³åœ¨æŸç§æ¡ä»¶ä¸‹æ‰åŠ è½½æŸä¸ªæ¨¡å—ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®ç°å®ƒå’Œå…¶å®ƒçš„é«˜çº§åŠ è½½åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨æ¨¡å—åŠ è½½å™¨å¹¶ä¸”ä¿è¯ç±»å‹å®Œå…¨ã€‚</li>\n<li>ç¼–è¯‘å™¨ä¼šæ£€æµ‹æ˜¯å¦æ¯ä¸ªæ¨¡å—éƒ½ä¼šåœ¨ç”Ÿæˆçš„ <code>JavaScript</code> ä¸­ç”¨åˆ°ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—æ ‡è¯†ç¬¦åªåœ¨ç±»å‹æ³¨è§£éƒ¨åˆ†ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œå…¨æ²¡æœ‰åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ï¼Œå°±ä¸ä¼šç”Ÿæˆ <code>require</code> è¿™ä¸ªæ¨¡å—çš„ä»£ç ã€‚çœç•¥æ‰æ²¡æœ‰ç”¨åˆ°çš„å¼•ç”¨å¯¹æ€§èƒ½æå‡æ˜¯å¾ˆæœ‰ç›Šçš„ï¼Œå¹¶åŒæ—¶æä¾›äº†é€‰æ‹©æ€§åŠ è½½æ¨¡å—çš„èƒ½åŠ›ã€‚</li>\n<li>è¿™ç§æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ <code>import id = require(&quot;...&quot;)</code> è¯­å¥å¯ä»¥è®©æˆ‘ä»¬è®¿é—®æ¨¡å—å¯¼å‡ºçš„ç±»å‹ã€‚æ¨¡å—åŠ è½½å™¨ä¼šè¢«åŠ¨æ€è°ƒç”¨(é€šè¿‡ <code>require</code>)ï¼Œå°±åƒä¸‹é¢çš„ <code>if</code> ä»£ç å—é‡Œé‚£æ ·ã€‚å®ƒåˆ©ç”¨äº†çœç•¥å¼•ç”¨çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æ¨¡å—åªåœ¨è¢«éœ€è¦æ—¶åŠ è½½ã€‚ä¸ºäº†è®©è¿™ä¸ªæ¨¡å—å·¥ä½œï¼Œä¸€å®šè¦æ³¨æ„ <code>import</code> å®šä¹‰çš„æ ‡è¯†ç¬¦åªèƒ½åœ¨è¡¨ç¤ºç±»å‹å¤„ä½¿ç”¨(ä¸èƒ½åœ¨ä¼šè½¬æ¢æˆ <code>JavaScript</code> çš„åœ°æ–¹ã€‚)</li>\n<li>ä¸ºäº†ç¡®ä¿ç±»å‹å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>typeof</code> å…³é”®å­—ã€‚<code>typeof</code> å…³é”®å­—ï¼Œå½“åœ¨è¡¨ç¤ºç±»å‹çš„åœ°æ–¹ä½¿ç”¨æ—¶ï¼Œä¼šå¾—å‡ºä¸€ä¸ªç±»å‹å€¼ï¼Œè¿™é‡Œå°±è¡¨ç¤ºæ¨¡å—çš„ç±»å‹ã€‚</li>\n</ol>\n<ul>\n<li><code>ç¤ºä¾‹ 1</code>. <code>Node.js</code> é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">require</span>(<span class=\"params\">moduleName: <span class=\"built_in\">string</span></span>): <span class=\"title\">any</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> Zip &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (needZipValidator) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ZipCodeValidator: <span class=\"keyword\">typeof</span> Zip = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> validator = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (validator.isAcceptable(<span class=\"string\">&quot;...&quot;</span>)) &#123;</span><br><span class=\"line\">    /!* ... *!/;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ç¤ºä¾‹ 2</code>. <code>require.js</code> é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">require</span>(<span class=\"params\">moduleNames: <span class=\"built_in\">string</span>[], onLoad: (...args: <span class=\"built_in\">any</span>[]) =&gt; <span class=\"built_in\">void</span></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Zip <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (needZipValidator) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">require</span>([<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>], <span class=\"function\">(<span class=\"params\">ZipCodeValidator: <span class=\"keyword\">typeof</span> Zip</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> validator = <span class=\"keyword\">new</span> ZipCodeValidator.ZipCodeValidator();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (validator.isAcceptable(<span class=\"string\">&quot;...&quot;</span>)) &#123;</span><br><span class=\"line\">      /!* ... *!/;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ç¤ºä¾‹ 3</code>. <code>System.js</code> é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">const</span> System: <span class=\"built_in\">any</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> Zip &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (needZipValidator) &#123;</span><br><span class=\"line\">  System.import(<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>).then(<span class=\"function\">(<span class=\"params\">ZipCodeValidator: <span class=\"keyword\">typeof</span> Zip</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x.isAcceptable(<span class=\"string\">&quot;...&quot;</span>)) &#123;</span><br><span class=\"line\">      /!*...*!/;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-9-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\"><a href=\"#15-9-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\" class=\"headerlink\" title=\"15.9 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\"></a>15.9 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“</h3><blockquote>\n<p>è¦æƒ³æè¿°é <code>TypeScript</code> ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“æ‰€æš´éœ²çš„ <code>API</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æˆ‘ä»¬å«å®ƒå£°æ˜å› ä¸ºå®ƒä¸æ˜¯â€™å¤–éƒ¨ç¨‹åºâ€™çš„å…·ä½“å®ç°ï¼Œå®ƒä»¬é€šå¸¸æ˜¯åœ¨ <code>.d.ts</code> æ–‡ä»¶é‡Œå®šä¹‰çš„ã€‚ç±»ä¼¼äº <code>C/C++</code> é‡Œçš„ <code>.h</code> æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h4 id=\"15-9-1-å¤–éƒ¨æ¨¡å—\"><a href=\"#15-9-1-å¤–éƒ¨æ¨¡å—\" class=\"headerlink\" title=\"15.9.1 å¤–éƒ¨æ¨¡å—\"></a>15.9.1 å¤–éƒ¨æ¨¡å—</h4><blockquote>\n<p>åœ¨ <code>Node.js</code> é‡Œå¤§éƒ¨åˆ†å·¥ä½œæ˜¯é€šè¿‡åŠ è½½ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—å®ç°çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¡¶çº§çš„ <code>export</code> å£°æ˜æ¥ä¸ºæ¯ä¸ªæ¨¡å—éƒ½å®šä¹‰ä¸€ä¸ª <code>.d.ts</code> æ–‡ä»¶ï¼Œä½†æœ€å¥½è¿˜æ˜¯å†™åœ¨ä¸€ä¸ªå¤§çš„ <code>.d.ts</code> æ–‡ä»¶é‡Œã€‚æˆ‘ä»¬ä½¿ç”¨ä¸æ„é€ ä¸€ä¸ªå¤–éƒ¨å‘½åç©ºé—´ç›¸ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨ <code>module</code> å…³é”®å­—å¹¶ä¸”æŠŠåå­—ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œæ–¹ä¾¿ä¹‹å <code>import</code>ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ä¾‹å¦‚ï¼š</code></li>\n<li><code>node.d.ts(simplified except)</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;url&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Url &#123;</span><br><span class=\"line\">    protocol?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    hostname?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    pathname?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parse</span>(<span class=\"params\">urlStr: <span class=\"built_in\">string</span>, parseQueryString?, slashesDenoteHost?</span>): <span class=\"title\">Url</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;path&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">normalize</span>(<span class=\"params\">p: <span class=\"built_in\">string</span></span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">join</span>(<span class=\"params\">...paths: <span class=\"built_in\">any</span>[]</span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">let</span> sep: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ <code>/// &lt;reference&gt; node.d.ts</code> å¹¶ä¸”ä½¿ç”¨ <code>import url = require(&#39;url&#39;)</code>ï¼›æˆ– <code>import * as URl from &quot;url&quot;</code> åŠ è½½æ¨¡å—ã€‚`</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;node.d.ts&quot;&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> URL <span class=\"keyword\">from</span> <span class=\"string\">&quot;url&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myUrl = URL.parse(<span class=\"string\">&quot;http://www.typescriptlang.org&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-9-2-å¤–éƒ¨æ¨¡å—ç®€å†™\"><a href=\"#15-9-2-å¤–éƒ¨æ¨¡å—ç®€å†™\" class=\"headerlink\" title=\"15.9.2 å¤–éƒ¨æ¨¡å—ç®€å†™\"></a>15.9.2 å¤–éƒ¨æ¨¡å—ç®€å†™</h4><blockquote>\n<p>å‡å¦‚ä½ ä¸æƒ³åœ¨ä½¿ç”¨ä¸€ä¸ªæ–°æ¨¡å—ä¹‹å‰èŠ±æ—¶é—´å»ç¼–å†™å£°æ˜ï¼Œä½ å¯ä»¥é‡‡ç”¨å£°æ˜çš„ç®€å†™å½¢å¼ä»¥ä¾¿èƒ½å¤Ÿå¿«é€Ÿä½¿ç”¨å®ƒã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>declarations.d.ts</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;hot-new-module&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç®€å†™æ¨¡å—é‡Œæ‰€æœ‰å¯¼å‡ºç±»å‹å°†æ˜¯ <code>any</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> x, &#123; y &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;hot-new-module&quot;</span>;</span><br><span class=\"line\">x(y);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-9-3-æ¨¡å—å£°æ˜é€šé…ç¬¦\"><a href=\"#15-9-3-æ¨¡å—å£°æ˜é€šé…ç¬¦\" class=\"headerlink\" title=\"15.9.3 æ¨¡å—å£°æ˜é€šé…ç¬¦\"></a>15.9.3 æ¨¡å—å£°æ˜é€šé…ç¬¦</h4><blockquote>\n<p>æŸäº›æ¨¡å—åŠ è½½å™¨å¦‚ <code>SystemJS</code> å’Œ <code>AMD</code> æ”¯æŒå¯¼å…¥é <code>JavaScript</code> å†…å®¹ã€‚å®ƒä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªå‰ç¼€æˆ–åç¼€æ¥è¡¨ç¤ºç‰¹æ®Šçš„åŠ è½½è¯­æ³•ï¼Œæ¨¡å—å£°æ˜é€šé…ç¬¦å¯ä»¥ç”¨æ¥è¡¨ç¤ºè¿™äº›æƒ…å†µã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;*!text&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> content;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>some do it the other way around</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;json!*&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> value: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> value;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç°åœ¨ä½ å¯ä»¥å°±å¯¼å…¥åŒ¹é… <code>&quot;!text&quot;</code> æˆ– <code>&quot;json!&quot;</code> çš„å†…å®¹äº†ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> fileContent <span class=\"keyword\">from</span> <span class=\"string\">&quot;./xyz.txt!txt&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> data <span class=\"keyword\">from</span> <span class=\"string\">&quot;json!http://example.com/data.json&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(data, fileContent);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-9-4-UMD-æ¨¡å—\"><a href=\"#15-9-4-UMD-æ¨¡å—\" class=\"headerlink\" title=\"15.9.4 UMD æ¨¡å—\"></a>15.9.4 <code>UMD</code> æ¨¡å—</h4><blockquote>\n<p>æœ‰äº›æ¨¡å—è¢«è®¾è®¡æˆå…¼å®¹å¤šä¸ªæ¨¡å—åŠ è½½å™¨ï¼Œæˆ–è€…ä¸ä½¿ç”¨æ¨¡å—åŠ è½½å™¨(å…¨å±€å˜é‡)ã€‚å®ƒä»¬ä»¥ <code>UMD</code> æ¨¡å—ä¸ºä»£è¡¨ã€‚è¿™äº›åº“å¯ä»¥é€šè¿‡å¯¼å…¥çš„å½¢å¼æˆ–å…¨å±€å˜é‡çš„å½¢å¼è®¿é—®ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ä¾‹å¦‚ï¼š</code></li>\n<li><code>math-lib.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isPrime</span>(<span class=\"params\">x: <span class=\"built_in\">number</span></span>): <span class=\"title\">boolean</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">as</span> <span class=\"keyword\">namespace</span> mathLib;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¹‹åï¼Œè¿™ä¸ªåº“å¯ä»¥åœ¨æŸä¸ªæ¨¡å—é‡Œé€šè¿‡å¯¼å…¥æ¥ä½¿ç”¨:</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; isPrime &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;math-lib&quot;</span>;</span><br><span class=\"line\">isPrime(<span class=\"number\">2</span>);</span><br><span class=\"line\">mathLib.isPrime(<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®ƒåŒæ ·å¯ä»¥é€šè¿‡å…¨å±€å˜é‡çš„å½¢å¼ä½¿ç”¨ï¼Œä½†åªèƒ½åœ¨æŸä¸ªè„šæœ¬(æŒ‡ä¸å¸¦æœ‰æ¨¡å—å¯¼å…¥æˆ–å¯¼å‡ºçš„è„šæœ¬æ–‡ä»¶)é‡Œã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mathLib.isPrime(<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-10-åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\"><a href=\"#15-10-åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\" class=\"headerlink\" title=\"15.10 åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\"></a>15.10 åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼</h3><h4 id=\"15-10-1-å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\"><a href=\"#15-10-1-å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\" class=\"headerlink\" title=\"15.10.1 å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\"></a>15.10.1 å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º</h4><ol>\n<li>ç”¨æˆ·åº”è¯¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ä½ æ¨¡å—å¯¼å‡ºçš„å†…å®¹ã€‚åµŒå¥—å±‚æ¬¡è¿‡å¤šä¼šå˜å¾—éš¾ä»¥å¤„ç†ï¼Œå› æ­¤ä»”ç»†è€ƒè™‘ä¸€ä¸‹å¦‚ä½•ç»„ç»‡ä½ çš„ä»£ç ã€‚</li>\n<li>ä»ä½ çš„æ¨¡å—ä¸­å¯¼å‡ºä¸€ä¸ªå‘½åç©ºé—´å°±æ˜¯ä¸€ä¸ªå¢åŠ åµŒå¥—çš„ä¾‹å­ã€‚è™½ç„¶å‘½åç©ºé—´æœ‰æ—¶å€™æœ‰å®ƒä»¬çš„ç”¨å¤„ï¼Œåœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™å®ƒä»¬é¢å¤–åœ°å¢åŠ äº†ä¸€å±‚ã€‚è¿™å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å¾ˆä¸æ–¹ä¾¿çš„å¹¶ä¸”é€šå¸¸æ˜¯å¤šä½™çš„ã€‚</li>\n<li>å¯¼å‡ºç±»çš„é™æ€æ–¹æ³•ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ - è¿™ä¸ªç±»æœ¬èº«å°±å¢åŠ äº†ä¸€å±‚åµŒå¥—ã€‚é™¤éå®ƒèƒ½æ–¹ä¾¿åœ°è¡¨è¿°æˆ–ä¾¿äºæ¸…æ™°ä½¿ç”¨ï¼Œå¦åˆ™è¯·è€ƒè™‘ç›´æ¥å¯¼å‡ºä¸€ä¸ªè¾…åŠ©æ–¹æ³•ã€‚</li>\n</ol>\n<h4 id=\"15-10-2-å¦‚æœä»…å¯¼å‡ºå•ä¸ª-class-æˆ–-functionï¼Œä½¿ç”¨-export-default\"><a href=\"#15-10-2-å¦‚æœä»…å¯¼å‡ºå•ä¸ª-class-æˆ–-functionï¼Œä½¿ç”¨-export-default\" class=\"headerlink\" title=\"15.10.2 å¦‚æœä»…å¯¼å‡ºå•ä¸ª class æˆ– functionï¼Œä½¿ç”¨ export default\"></a>15.10.2 å¦‚æœä»…å¯¼å‡ºå•ä¸ª <code>class</code> æˆ– <code>function</code>ï¼Œä½¿ç”¨ <code>export default</code></h4><blockquote>\n<p>å°±åƒâ€ <code>åœ¨é¡¶å±‚å¯¼å‡º</code> â€œå¸®åŠ©å‡å°‘ç”¨æˆ·ä½¿ç”¨çš„éš¾åº¦ï¼Œä¸€ä¸ªé»˜è®¤çš„å¯¼å‡ºä¹Ÿèƒ½èµ·åˆ°è¿™ä¸ªæ•ˆæœã€‚å¦‚æœä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸ºäº†å¯¼å‡ºç‰¹å®šçš„å†…å®¹ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€‚è¿™ä¼šä»¤æ¨¡å—çš„å¯¼å…¥å’Œä½¿ç”¨å˜å¾—äº›è®¸ç®€å•ï¼Œæ¯”å¦‚ï¼š</p>\n</blockquote>\n<ul>\n<li><code>MyClass.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SomeType</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    /!* ... *!/;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>MyFunc.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getThing</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;thing&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Consumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> t <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyClass&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> f <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyFunc&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"keyword\">new</span> t();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(f());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¹ç”¨æˆ·æ¥è¯´è¿™æ˜¯æœ€ç†æƒ³çš„ã€‚ä»–ä»¬å¯ä»¥éšæ„å‘½åå¯¼å…¥æ¨¡å—çš„ç±»å‹ (æœ¬ä¾‹ä¸º <code>t</code> ) å¹¶ä¸”ä¸éœ€è¦å¤šä½™çš„ ( <code>.</code> ) æ¥æ‰¾åˆ°ç›¸å…³å¯¹è±¡ã€‚</p>\n</blockquote>\n<h4 id=\"15-10-3-å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\"><a href=\"#15-10-3-å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\" class=\"headerlink\" title=\"15.10.3 å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\"></a>15.10.3 å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º</h4><ul>\n<li><code>MyThings.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SomeType</span> </span>&#123;/!*...*!/&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">someFunc</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/*...*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-4-ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™-æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\"><a href=\"#15-10-4-ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™-æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\" class=\"headerlink\" title=\"15.10.4 (ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™)æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\"></a>15.10.4 (ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™)æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚</h4><ul>\n<li><code>Consumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; SomeType, someFunc &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyThings&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"keyword\">new</span> SomeType();</span><br><span class=\"line\"><span class=\"keyword\">let</span> y = someFunc();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-5-ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\"><a href=\"#15-10-5-ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\" class=\"headerlink\" title=\"15.10.5 ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\"></a>15.10.5 ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™</h4><ul>\n<li><code>MyLargeModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Flower</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Consumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> myLargeModule <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyLargeModule.ts&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"keyword\">new</span> myLargeModule.Dog();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-6-ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\"><a href=\"#15-10-6-ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\" class=\"headerlink\" title=\"15.10.6 ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\"></a>15.10.6 ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•</h4><blockquote>\n<p>ä½ å¯èƒ½ç»å¸¸éœ€è¦æ‰©å±•ä¸€ä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚<code>JS</code> é‡Œå¸¸ç”¨çš„ä¸€ä¸ªæ¨¡å¼æ˜¯ <code>JQuery</code> é‚£æ ·å»æ‰©å±•åŸå¯¹è±¡ã€‚å¦‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ï¼Œæ¨¡å—ä¸ä¼šåƒå…¨å±€å‘½åç©ºé—´é‚£æ ·å»åˆå¹¶ã€‚æ¨èçš„æ–¹æ¡ˆæ˜¯ ä¸è¦å»æ”¹å˜åŸæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¯¼å‡ºä¸€ä¸ªæ–°çš„å®ä½“æ¥æä¾›æ–°çš„åŠŸèƒ½ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾ <code>Calculator.ts</code> æ¨¡å—é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨å®ç°ã€‚è¿™ä¸ªæ¨¡å—åŒæ ·æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¼ å…¥ä¸€ç³»åˆ—è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶åœ¨æœ€åç»™å‡ºç»“æœã€‚</p>\n</blockquote>\n<ul>\n<li><code>Calculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> current = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> memory = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> operator: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">processDigit</span>(<span class=\"params\">digit: <span class=\"built_in\">string</span>, currentValue: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (digit &gt;= <span class=\"string\">&quot;0&quot;</span> &amp;&amp; digit &lt;= <span class=\"string\">&quot;9&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> currentValue * <span class=\"number\">10</span> + (digit.charCodeAt(<span class=\"number\">0</span>) - <span class=\"string\">&quot;0&quot;</span>.charCodeAt(<span class=\"number\">0</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">processOperator</span>(<span class=\"params\">operator: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"string\">&quot;+&quot;</span>, <span class=\"string\">&quot;-&quot;</span>, <span class=\"string\">&quot;*&quot;</span>, <span class=\"string\">&quot;/&quot;</span>].indexOf(operator) &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> operator;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> evaluateOperator(operator: <span class=\"built_in\">string</span>, <span class=\"attr\">left</span>: <span class=\"built_in\">number</span>, <span class=\"attr\">right</span>: <span class=\"built_in\">number</span>): <span class=\"built_in\">number</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (<span class=\"built_in\">this</span>.operator) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;+&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left + right;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;-&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left - right;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;*&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left * right;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;/&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left / right;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"title\">evaluate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.operator) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.memory = <span class=\"built_in\">this</span>.evaluateOperator(<span class=\"built_in\">this</span>.operator, <span class=\"built_in\">this</span>.memory, <span class=\"built_in\">this</span>.current);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.memory = <span class=\"built_in\">this</span>.current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.current = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">handleChar</span>(<span class=\"params\">char: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">&quot;=&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.evaluate();</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> value = Calculator.processDigit(char, <span class=\"built_in\">this</span>.current);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (value !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.current = value;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> value = Calculator.processOperator(char);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">this</span>.evaluate();</span><br><span class=\"line\">          <span class=\"built_in\">this</span>.operator = value;</span><br><span class=\"line\">          <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Unsupported input: &#x27;<span class=\"subst\">$&#123;char&#125;</span>&#x27;`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.memory;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">c: Calculator, input: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; input.length; i++) &#123;</span><br><span class=\"line\">    c.handleChar(input[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`result of &#x27;<span class=\"subst\">$&#123;input&#125;</span>&#x27; is &#x27;<span class=\"subst\">$&#123;c.getResult()&#125;</span>&#x27;`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢ä½¿ç”¨å¯¼å‡ºçš„ <code>test</code> å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨</li>\n<li><code>TestCalculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Calculator, test &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Calculator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> Calculator();</span><br><span class=\"line\">test(c, <span class=\"string\">&quot;1+2*33/11=&quot;</span>); <span class=\"comment\">// prints 9</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç°åœ¨æ‰©å±•å®ƒï¼Œæ·»åŠ æ”¯æŒè¾“å…¥å…¶å®ƒè¿›åˆ¶(åè¿›åˆ¶ä»¥å¤–)ã€‚</li>\n<li><code>ProgrammerCalculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Calculator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Calculator&quot;</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProgrammerCalculator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> digits = [<span class=\"string\">&quot;0&quot;</span>, <span class=\"string\">&quot;1&quot;</span>, <span class=\"string\">&quot;2&quot;</span>, <span class=\"string\">&quot;3&quot;</span>, <span class=\"string\">&quot;4&quot;</span>, <span class=\"string\">&quot;5&quot;</span>, <span class=\"string\">&quot;6&quot;</span>, <span class=\"string\">&quot;7&quot;</span>, <span class=\"string\">&quot;8&quot;</span>, <span class=\"string\">&quot;9&quot;</span>, <span class=\"string\">&quot;A&quot;</span>, <span class=\"string\">&quot;B&quot;</span>, <span class=\"string\">&quot;C&quot;</span>, <span class=\"string\">&quot;D&quot;</span>, <span class=\"string\">&quot;E&quot;</span>, <span class=\"string\">&quot;F&quot;</span>];</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">public</span> base: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> maxBase = ProgrammerCalculator.digits.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (base &lt;= <span class=\"number\">0</span> || base &gt; maxBase) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`base has to be within 0 to <span class=\"subst\">$&#123;maxBase&#125;</span> inclusive`</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"title\">processDigit</span>(<span class=\"params\">digit: <span class=\"built_in\">string</span>, currentValue: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ProgrammerCalculator.digits.indexOf(digit) &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> currentValue * <span class=\"built_in\">this</span>.base + ProgrammerCalculator.digits.indexOf(digit);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ProgrammerCalculator <span class=\"keyword\">as</span> Calculator &#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; test &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Calculator&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ–°çš„ <code>ProgrammerCalculator</code> æ¨¡å—å¯¼å‡ºçš„ API ä¸åŸå…ˆçš„ <code>Calculator</code> æ¨¡å—å¾ˆç›¸ä¼¼ï¼Œä½†å´æ²¡æœ‰æ”¹å˜åŸæ¨¡å—é‡Œçš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<ul>\n<li><code>TestProgrammerCalculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Calculator, test &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ProgrammerCalculator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> Calculator(<span class=\"number\">2</span>);</span><br><span class=\"line\">test(c, <span class=\"string\">&quot;001+010=&quot;</span>); <span class=\"comment\">// prints 3</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-7-æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\"><a href=\"#15-10-7-æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\" class=\"headerlink\" title=\"15.10.7 æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\"></a>15.10.7 æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´</h4><blockquote>\n<p>å½“åˆæ¬¡è¿›å…¥åŸºäºæ¨¡å—çš„å¼€å‘æ¨¡å¼æ—¶ï¼Œå¯èƒ½æ€»ä¼šæ§åˆ¶ä¸ä½è¦å°†å¯¼å‡ºåŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚æ¨¡å—å…·æœ‰å…¶è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”åªæœ‰å¯¼å‡ºçš„å£°æ˜æ‰ä¼šåœ¨æ¨¡å—å¤–éƒ¨å¯è§ã€‚è®°ä½è¿™ç‚¹ï¼Œå‘½åç©ºé—´åœ¨ä½¿ç”¨æ¨¡å—æ—¶å‡ ä¹æ²¡ä»€ä¹ˆä»·å€¼ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨ç»„ç»‡æ–¹é¢ï¼Œå‘½åç©ºé—´å¯¹äºåœ¨å…¨å±€ä½œç”¨åŸŸå†…å¯¹é€»è¾‘ä¸Šç›¸å…³çš„å¯¹è±¡å’Œç±»å‹åˆ†ç»„æ˜¯å¾ˆä¾¿åˆ©çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>C\\#</code> é‡Œï¼Œä½ ä¼šä» <code>System.Collections</code> é‡Œæ‰¾åˆ°æ‰€æœ‰é›†åˆçš„ç±»å‹ã€‚é€šè¿‡å°†ç±»å‹æœ‰å±‚æ¬¡åœ°ç»„ç»‡åœ¨å‘½åç©ºé—´é‡Œï¼Œå¯ä»¥æ–¹ä¾¿ç”¨æˆ·æ‰¾åˆ°ä¸ä½¿ç”¨é‚£äº›ç±»å‹ã€‚ç„¶è€Œï¼Œæ¨¡å—æœ¬èº«å·²ç»å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸­ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚æˆ‘ä»¬å¿…é¡»é€šè¿‡è·¯å¾„å’Œæ–‡ä»¶åæ‰¾åˆ°å®ƒä»¬ï¼Œè¿™å·²ç»æä¾›äº†ä¸€ç§é€»è¾‘ä¸Šçš„ç»„ç»‡å½¢å¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»º <code>/collections/generic/</code> æ–‡ä»¶å¤¹ï¼ŒæŠŠç›¸åº”æ¨¡å—æ”¾åœ¨è¿™é‡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‘½åç©ºé—´å¯¹è§£å†³å…¨å±€ä½œç”¨åŸŸé‡Œå‘½åå†²çªæ¥è¯´æ˜¯å¾ˆé‡è¦çš„ã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ª <code>My.Application.Customer.AddFrom</code> å’Œ <code>My.Application.Order.AddForm</code> <code>--</code> ä¸¤ä¸ªç±»å‹çš„åå­—ç›¸åŒï¼Œä½†å‘½åç©ºé—´ä¸åŒã€‚ç„¶è€Œï¼Œè¿™å¯¹äºæ¨¡å—æ¥è¯´å´ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚åœ¨ä¸€ä¸ªæ¨¡å—é‡Œï¼Œæ²¡æœ‰ç†ç”±ä¸¤ä¸ªå¯¹è±¡æ‹¥æœ‰åŒä¸€ä¸ªåå­—ã€‚ä»æ¨¡å—çš„ä½¿ç”¨è§’åº¦æ¥è¯´ï¼Œä½¿ç”¨è€…ä¼šæŒ‘å‡ºå®ƒä»¬ç”¨æ¥å¼•ç”¨æ¨¡å—çš„åå­—ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ç†ç”±å‘å£°é‡åçš„æƒ…å†µã€‚</p>\n</blockquote>\n<h4 id=\"15-10-8-å±é™©ä¿¡å·\"><a href=\"#15-10-8-å±é™©ä¿¡å·\" class=\"headerlink\" title=\"15.10.8 å±é™©ä¿¡å·\"></a>15.10.8 å±é™©ä¿¡å·</h4><blockquote>\n<p>ä»¥ä¸‹å‡ä¸ºæ¨¡å—ç»“æ„ä¸Šçš„å±é™©ä¿¡å·ã€‚é‡æ–°æ£€æŸ¥ä»¥ç¡®ä¿ä½ æ²¡æœ‰åœ¨å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚</p>\n</blockquote>\n<ol>\n<li>æ–‡ä»¶çš„é¡¶å±‚å£°æ˜æ˜¯ <code>export namespace Foo &#123;...&#125;</code> ( åˆ é™¤ <code>Foo</code> å¹¶æŠŠæ‰€æœ‰å†…å®¹å‘ä¸Šå±‚ç§»åŠ¨ä¸€å±‚)</li>\n<li>æ–‡ä»¶åªæœ‰ä¸€ä¸ª <code>export class</code> æˆ– <code>export function</code> (è€ƒè™‘ä½¿ç”¨ <code>export default</code>)</li>\n<li>å¤šä¸ªæ–‡ä»¶çš„é¡¶å±‚å…·æœ‰åŒæ ·çš„ <code>export namespace Foo</code> {( ä¸è¦ä»¥ä¸ºè¿™äº›ä¼šåˆå¹¶åˆ°ä¸€ä¸ª <code>Foo</code> ä¸­! )}</li>\n</ol>\n<h2 id=\"åå…­ã€å‘½åç©ºé—´\"><a href=\"#åå…­ã€å‘½åç©ºé—´\" class=\"headerlink\" title=\"åå…­ã€å‘½åç©ºé—´\"></a>åå…­ã€å‘½åç©ºé—´</h2><h3 id=\"16-1-ä»‹ç»\"><a href=\"#16-1-ä»‹ç»\" class=\"headerlink\" title=\"16.1 ä»‹ç»\"></a>16.1 ä»‹ç»</h3><blockquote>\n<p>è¿™ç¯‡æ–‡ç« æè¿°äº†å¦‚ä½•åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨å‘½åç©ºé—´(ä¹‹å‰å«åšâ€å†…éƒ¨æ¨¡å—â€)æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚å°±åƒæˆ‘ä»¬åœ¨æœ¯è¯­è¯´æ˜é‡Œæåˆ°çš„é‚£æ ·ï¼Œ<code>&quot;å†…éƒ¨æ¨¡å—&quot;</code> ç°åœ¨å«åš <code>&quot;å‘½åç©ºé—´&quot;</code>ã€‚å¦å¤–ï¼Œä»»ä½•ä½¿ç”¨ <code>module</code> å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå†…éƒ¨æ¨¡å—çš„åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨ <code>namespace</code> å…³é”®å­—æ¥æ›¿æ¢ã€‚è¿™å°±é¿å…äº†è®©æ–°çš„ä½¿ç”¨è€…è¢«ç›¸ä¼¼çš„åç§°æ‰€è¿·æƒ‘ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ç¬¬ä¸€æ­¥</code></li>\n</ul>\n<blockquote>\n<p>æˆ‘ä»¬å…ˆæ¥å†™ä¸€æ®µç¨‹åºå¹¶å°†åœ¨æ•´ç¯‡æ–‡ç« ä¸­éƒ½ä½¿ç”¨è¿™ä¸ªä¾‹å­ã€‚æˆ‘ä»¬å®šä¹‰å‡ ä¸ªç®€å•çš„å­—ç¬¦ä¸²éªŒè¯å™¨ï¼Œ</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾ä½ ä¼šä½¿ç”¨å®ƒä»¬æ¥éªŒè¯è¡¨å•é‡Œçš„ç”¨æˆ·è¾“å…¥æˆ–éªŒè¯å¤–éƒ¨æ•°æ®ã€‚</p>\n</blockquote>\n<ul>\n<li><code>æ‰€æœ‰éªŒè¯å™¨éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œ</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> letterRegExp = <span class=\"regexp\">/^[A-Za-z]$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> letterRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP code&quot;</span>] = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters Only&quot;</span>] = <span class=\"keyword\">new</span> LetterOnlyValidator();</span><br><span class=\"line\"><span class=\"comment\">// show whether each string passed each validator</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> s <span class=\"keyword\">of</span> strings) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> isMatch = validators[name].isAcceptable(s);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&#x27;<span class=\"subst\">$&#123;s&#125;</span>&#x27; <span class=\"subst\">$&#123;isMatch ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> &#x27;<span class=\"subst\">$&#123;name&#125;</span>&#x27;.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"16-2-å‘½åç©ºé—´\"><a href=\"#16-2-å‘½åç©ºé—´\" class=\"headerlink\" title=\"16.2 å‘½åç©ºé—´\"></a>16.2 å‘½åç©ºé—´</h3><blockquote>\n<p>éšç€æ›´å¤šéªŒè¯å™¨çš„åŠ å…¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ‰‹æ®µæ¥ç»„ç»‡ä»£ç ï¼Œä»¥ä¾¿äºåœ¨è®°å½•å®ƒä»¬ç±»å‹çš„åŒæ—¶è¿˜ä¸ç”¨æ‹…å¿ƒä¸å…¶å®ƒå¯¹è±¡äº§ç”Ÿå‘½åå†²çªã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŠŠéªŒè¯å™¨åŒ…è£¹åˆ°ä¸€ä¸ªå‘½åç©ºé—´é‡Œå†…ï¼Œè€Œä¸æ˜¯æŠŠå®ƒä»¬æ”¾åœ¨å…¨å±€ç©ºé—´ä¸‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸‹é¢çš„ä¾‹å­é‡Œï¼ŒæŠŠæ‰€æœ‰ä¸éªŒè¯å™¨ç›¸å…³çš„ç±»å‹éƒ½æ”¾åˆ°ä¸€ä¸ªå«åš <code>Validation</code> çš„å‘½åç©ºé—´é‡Œã€‚å› ä¸ºæˆ‘ä»¬æƒ³è®©è¿™äº›æ¥å£å’Œç±»åœ¨å‘½åç©ºé—´ä¹‹å¤–ä¹Ÿæ˜¯å¯è®¿é—®çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>export</code>ã€‚ç›¸åçš„ï¼Œå˜é‡ <code>LetterRegExp</code> å’Œ <code>numberRegExp</code> æ˜¯å®ç°çš„ç»†èŠ‚ï¼Œä¸éœ€è¦å¯¼å‡ºï¼Œå› æ­¤å®ƒä»¬åœ¨å‘½åç©ºé—´å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚åœ¨æ–‡ä»¶æœ«å°¾çš„æµ‹è¯•ä»£ç é‡Œï¼Œç”±äºæ˜¯åœ¨å‘½åç©ºé—´ä¹‹å¤–è®¿é—®çš„ï¼Œå› æ­¤éœ€è¦é™å®šç±»å‹çš„åç§°ï¼Œæ¯”å¦‚ <code>Validation.LettersOnlyValidator</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨å‘½åç©ºé—´çš„éªŒè¯å™¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> LetterRegExp = <span class=\"regexp\">/^[A-Za-z]+$/</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> LetterRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: Validation.StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP Code&quot;</span>] = <span class=\"keyword\">new</span> Validation.ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters Only&quot;</span>] = <span class=\"keyword\">new</span> Validation.LetterOnlyValidator();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> s <span class=\"keyword\">of</span> strings) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&#x27;<span class=\"subst\">$&#123;s&#125;</span>&#x27; <span class=\"subst\">$&#123;validators[name].isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> &#x27;<span class=\"subst\">$&#123;name&#125;</span>&#x27;.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"16-3-åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\"><a href=\"#16-3-åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\" class=\"headerlink\" title=\"16.3 åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\"></a>16.3 åˆ†ç¦»åˆ°å¤šæ–‡ä»¶</h3><blockquote>\n<p>å½“åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ä»¥æ–¹ä¾¿ç»´æŠ¤ã€‚</p>\n</blockquote>\n<h4 id=\"16-3-1-å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\"><a href=\"#16-3-1-å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\" class=\"headerlink\" title=\"16.3.1 å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\"></a>16.3.1 å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´</h4><blockquote>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ <code>Validation</code> å‘½åç©ºé—´åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚å°½ç®¡æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼Œå®ƒä»¬ä»æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å¦‚åŒå®ƒä»¬åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€æ ·ã€‚å› ä¸ºä¸åŒæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ å…¥äº†å¼•ç”¨æ ‡ç­¾æ¥å‘Šè¯‰ç¼–è¯‘å™¨æ–‡ä»¶ä¹‹é—´çš„å…³è”ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Validation.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>LetterOnlyValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;;</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> lettersRegExp = <span class=\"regexp\">/^[A-Za-z]+$/</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LettersOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> lettersRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;LettersOnlyValidator.ts&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;ZipCodeValidator.ts&quot; /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Some samples to try</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Validators to use</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: Validation.StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP code&quot;</span>] = <span class=\"keyword\">new</span> Validation.ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters only&quot;</span>] = <span class=\"keyword\">new</span> Validation.LettersOnlyValidator();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Show whether each string passed each validator</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> s <span class=\"keyword\">of</span> strings) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; - <span class=\"subst\">$&#123;validators[name].isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> <span class=\"subst\">$&#123;name&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“æ¶‰åŠåˆ°å¤šæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æ‰€æœ‰ç¼–è¯‘åçš„ä»£ç éƒ½è¢«åŠ è½½äº†ã€‚æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼ã€‚</p>\n</blockquote>\n<ol>\n<li>ç¬¬ä¸€ç§æ–¹å¼ï¼ŒæŠŠæ‰€æœ‰çš„è¾“å…¥æ–‡ä»¶ç¼–è¯‘ä¸ºä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ <code>--outFile</code> æ ‡è®°ï¼š <code>tsc --outFile sample.js Test.ts</code> ç¼–è¯‘å™¨ä¼šæ ¹æ®æºç é‡Œçš„å¼•ç”¨æ ‡ç­¾è‡ªåŠ¨åœ°å¯¹è¾“å‡ºè¿›è¡Œæ’åºã€‚ä½ ä¹Ÿå¯ä»¥å•ç‹¬åœ°æŒ‡å®šæ¯ä¸ªæ–‡ä»¶ã€‚ <code>tsc --outFile sample.js Validation.ts LetterOnlyValidator.ts ZipCodeValidator.ts Test.ts</code></li>\n<li>ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¯ä¸€ä¸ªæ–‡ä»¶(é»˜è®¤æ–¹å¼)ï¼Œé‚£ä¹ˆæ¯ä¸ªæºæ–‡ä»¶éƒ½ä¼šå¯¹åº”ç”Ÿæˆä¸€ä¸ª <code>JavaScript</code> æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨é¡µé¢ä¸Šé€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŠŠæ‰€æœ‰ç”Ÿæˆçš„ <code>JavaScript</code> æ–‡ä»¶æŒ‰æ­£ç¡®çš„é¡ºåºå¼•è¿›æ¥ï¼Œæ¯”å¦‚ï¼š</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyTestPage.html (excerpt)</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;Validation.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;LettersOnlyValidator.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;ZipCodeValidator.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;Test.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"16-4-åˆ«å\"><a href=\"#16-4-åˆ«å\" class=\"headerlink\" title=\"16.4 åˆ«å\"></a>16.4 åˆ«å</h3><blockquote>\n<p>å¦ä¸€ç§ç®€åŒ–å‘½åç©ºé—´æ“ä½œçš„æ–¹æ³•æ˜¯ç”¨ <code>import q = x.y.z</code> ç»™å¸¸ç”¨çš„å¯¹è±¡èµ·ä¸€ä¸ªçŸ­çš„åå­—ã€‚ä¸è¦ä¸ç”¨æ¥åŠ è½½æ¨¡å—çš„ <code>import x = require(&#39;name&#39;)</code> è¯­æ³•å¼„æ··äº†ï¼Œè¿™é‡Œçš„è¯­æ³•æ˜¯ä¸ºæŒ‡å®šçš„ç¬¦å·åˆ›å»ºä¸€ä¸ªåˆ«åã€‚ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ä¸ºä»»æ„æ ‡è¯†ç¬¦åˆ›å»ºåˆ«åï¼Œä¹ŸåŒ…æ‹¬å¯¼å…¥çš„æ¨¡å—ä¸­çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Shapes &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">namespace</span> Polygons &#123;</span><br><span class=\"line\">    <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Triangle</span> </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Square</span> </span>&#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Polygons = Shapes.Polygons;</span><br><span class=\"line\"><span class=\"keyword\">let</span> sq = <span class=\"keyword\">new</span> Polygons.Square(); <span class=\"comment\">// Same as &quot;new Shapes.Polygons.Square()&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ <code>require</code> å…³é”®å­—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å¯¼å…¥ç¬¦å·çš„é™å®šåèµ‹å€¼ã€‚è¿™ä¸ä½¿ç”¨ <code>var</code> ç›¸ä¼¼ï¼Œä½†å®ƒè¿˜é€‚ç”¨äºç±»å‹å’Œå¯¼å…¥çš„å…·æœ‰å‘½åç©ºé—´å«ä¹‰çš„ç¬¦å·ã€‚é‡è¦çš„æ˜¯ï¼Œå¯¹äºå€¼æ¥è®²ï¼Œ<code>import</code> ä¼šç”Ÿæˆä¸åŸå§‹ç¬¦å·ä¸åŒçš„å¼•ç”¨ï¼Œæ‰€ä»¥æ”¹å˜åˆ«åçš„ <code>var</code> å€¼å¹¶ä¸ä¼šå½±å“åŸå§‹å˜é‡çš„å€¼ã€‚</p>\n</blockquote>\n<h3 id=\"16-5-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\"><a href=\"#16-5-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\" class=\"headerlink\" title=\"16.5 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\"></a>16.5 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“</h3><blockquote>\n<p>ä¸ºäº†æè¿°ä¸æ˜¯ç”¨ <code>TypeScript</code> ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“å¯¼å‡ºçš„ <code>API</code>ã€‚ç”±äºå¤§éƒ¨åˆ†ç¨‹åºåº“åªæä¾›å°‘æ•°çš„é¡¶çº§å¯¹è±¡ï¼Œå‘½åç©ºé—´æ˜¯ç”¨æ¥è¡¨ç¤ºå®ƒä»¬çš„ä¸€ä¸ªå¥½åŠæ³•ã€‚æˆ‘ä»¬ç§°å…¶ä¸ºå£°æ˜æ˜¯å› ä¸ºå®ƒä¸æ˜¯å¤–éƒ¨ç¨‹åºçš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ <code>.d.ts</code> é‡Œå†™è¿™äº›å£°æ˜ã€‚å¦‚æœä½ ç†Ÿæ‚‰ <code>C/C+</code>+ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œ <code>.h</code> æ–‡ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¤–éƒ¨å‘½åç©ºé—´ (<code>declare namespace =&gt;</code>; å£°æ˜å…¨å±€å¯¹è±¡)</p>\n</blockquote>\n<blockquote>\n<p>æµè¡Œçš„ç¨‹åºåº“ <code>D3</code> åœ¨å…¨å±€å¯¹è±¡ <code>d3</code> é‡Œå®šä¹‰å®ƒçš„åŠŸèƒ½ã€‚å› ä¸ºè¿™ä¸ªåº“é€šè¿‡ä¸€ä¸ª<code>&lt;script&gt;</code> æ ‡ç­¾åŠ è½½ (ä¸æ˜¯é€šè¿‡æ¨¡å—åŠ è½½å™¨)ï¼Œå®ƒçš„å£°æ˜æ–‡ä»¶ä½¿ç”¨å†…éƒ¨æ¨¡å—æ¥å®šä¹‰å®ƒçš„ç±»å‹ã€‚ä¸ºäº†è®© <code>TypeScript</code> ç¼–è¯‘å™¨è¯†åˆ«å®ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤–éƒ¨å‘½åç©ºé—´å£°æ˜ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™</li>\n<li><code>D3.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">namespace</span> D3 &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Selectors &#123;</span><br><span class=\"line\">    select: &#123;</span><br><span class=\"line\">      (selector: <span class=\"built_in\">string</span>): Selection;</span><br><span class=\"line\">      (element: EventTarget): Selection;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Event &#123;</span><br><span class=\"line\">    x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">    y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Base <span class=\"keyword\">extends</span> Selectors &#123;</span><br><span class=\"line\">    event: Event;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">var</span> d3: D3.Base;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\"><a href=\"#åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\" class=\"headerlink\" title=\"åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\"></a>åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—</h2><h3 id=\"17-1-ä»‹ç»\"><a href=\"#17-1-ä»‹ç»\" class=\"headerlink\" title=\"17.1 ä»‹ç»\"></a>17.1 ä»‹ç»</h3><blockquote>\n<p>è¿™ç¯‡æ–‡ç« å°†æ¦‚æ‹¬ä»‹ç»åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨æ¨¡å—ä¸å‘½åç©ºé—´æ¥ç»„ç»‡ä»£ç çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿä¼šè°ˆåŠå‘½åç©ºé—´å’Œæ¨¡å—çš„é«˜çº§ä½¿ç”¨åœºæ™¯ï¼Œå’Œåœ¨ä½¿ç”¨å®ƒä»¬çš„è¿‡ç¨‹ä¸­å¸¸è§çš„é™·é˜±ã€‚</p>\n</blockquote>\n<h3 id=\"17-2-ä½¿ç”¨å‘½åç©ºé—´\"><a href=\"#17-2-ä½¿ç”¨å‘½åç©ºé—´\" class=\"headerlink\" title=\"17.2 ä½¿ç”¨å‘½åç©ºé—´\"></a>17.2 ä½¿ç”¨å‘½åç©ºé—´</h3><blockquote>\n<p>å‘½åç©ºé—´æ˜¯ä½äºå…¨å±€å‘½åç©ºé—´ä¸‹çš„ä¸€ä¸ªæ™®é€šçš„å¸¦æœ‰åå­—çš„ <code>JavaScript</code> å¯¹è±¡ã€‚è¿™ä»¤å‘½åç©ºé—´ååˆ†å®¹æ˜“ä½¿ç”¨ã€‚å®ƒä»¬å¯ä»¥åœ¨å¤šæ–‡ä»¶ä¸­åŒæ—¶ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ <code>--outFile</code> ç»“åˆåœ¨ä¸€èµ·ã€‚å‘½åç©ºé—´æ˜¯å¸®ä½ ç»„ç»‡ <code>Web</code> åº”ç”¨ä¸é”™çš„æ–¹å¼ï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰ä¾èµ–éƒ½æ”¾åœ¨ <code>HTML</code> é¡µé¢çš„ <code>&lt;script&gt;</code> æ ‡ç­¾é‡Œã€‚ä½†å°±åƒå…¶å®ƒçš„å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ä¸€æ ·ï¼Œå®ƒå¾ˆéš¾å»è¯†åˆ«ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚</p>\n</blockquote>\n<h3 id=\"17-3-ä½¿ç”¨æ¨¡å—\"><a href=\"#17-3-ä½¿ç”¨æ¨¡å—\" class=\"headerlink\" title=\"17.3 ä½¿ç”¨æ¨¡å—\"></a>17.3 ä½¿ç”¨æ¨¡å—</h3><ol>\n<li>åƒå‘½åç©ºé—´ä¸€æ ·ï¼Œæ¨¡å—å¯ä»¥åŒ…å«ä»£ç å’Œå£°æ˜ã€‚ä¸åŒçš„æ¨¡å—å¯ä»¥å£°æ˜å®ƒçš„ä¾èµ–ã€‚</li>\n<li>æ¨¡å—ä¼šæŠŠä¾èµ–æ·»åŠ åˆ°æ¨¡å—åŠ è½½å™¨ä¸Š(åƒæ˜¯ <code>CommonJS</code> / <code>RequireJS</code>)ã€‚å¯¹äºå°å‹çš„ JS åº”ç”¨æ¥è¯´å¯èƒ½æ²¡å¿…è¦ï¼Œä½†æ˜¯å¯¹äºå¤§å‹åº”ç”¨ï¼Œè¿™ä¸€ç‚¹ç‚¹çš„èŠ±è´¹ä¼šå¸¦æ¥é•¿ä¹…çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ä¸Šçš„ä¾¿åˆ©ã€‚æ¨¡å—ä¹Ÿæä¾›äº†æ›´å¥½çš„ä»£ç é‡ç”¨ï¼Œæ›´å¼ºçš„å°é—­æ€§ä»¥åŠæ›´å¥½çš„ä½¿ç”¨å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚</li>\n<li>å¯¹äº <code>Node.js</code> åº”ç”¨æ¥è¯´ï¼Œæ¨¡å—æ˜¯é»˜è®¤å¹¶æ¨èçš„ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚</li>\n<li>ä» <code>ECMAScript 2015</code> å¼€å§‹ï¼Œæ¨¡å—æˆä¸ºäº†è¯­è¨€å†…ç½®çš„éƒ¨åˆ†ï¼Œåº”è¯¥ä¼šè¢«æ‰€æœ‰æ­£å¸¸çš„è§£é‡Šå¼•æ“æ‰€æ”¯æŒã€‚</li>\n</ol>\n<blockquote>\n<p>å› æ­¤ï¼Œå¯¹äºæ–°é¡¹ç›®æ¥è¯´æ¨èä½¿ç”¨æ¨¡å—ä½œä¸ºç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚</p>\n</blockquote>\n<h3 id=\"17-4-å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\"><a href=\"#17-4-å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\" class=\"headerlink\" title=\"17.4 å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\"></a>17.4 å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±</h3><blockquote>\n<p>è¿™éƒ¨åˆ†æˆ‘ä»¬ä¼šæè¿°å¸¸è§çš„å‘½åç©ºé—´å’Œæ¨¡å—çš„ä½¿ç”¨é™·é˜±å’Œå¦‚ä½•å…¶é¿å…å®ƒä»¬ã€‚</p>\n</blockquote>\n<h4 id=\"17-4-1-å¯¹æ¨¡å—ä½¿ç”¨-lt-reference-gt\"><a href=\"#17-4-1-å¯¹æ¨¡å—ä½¿ç”¨-lt-reference-gt\" class=\"headerlink\" title=\"17.4.1 å¯¹æ¨¡å—ä½¿ç”¨ /// &lt;reference&gt;\"></a>17.4.1 å¯¹æ¨¡å—ä½¿ç”¨ <code>/// &lt;reference&gt;</code></h4><blockquote>\n<p>ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯ä½¿ç”¨ <code>/// &lt;reference&gt;</code> å¼•ç”¨æ¨¡å—æ–‡ä»¶ï¼Œåº”è¯¥ä½¿ç”¨ <code>import</code>ã€‚è¦ç†è§£è¿™ä¹‹é—´çš„å·®åˆ«ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥å¼„æ¸…ç¼–è¯‘å™¨æ˜¯å¦‚ä½•æ ¹æ® <code>import</code> è·¯å¾„(ä¾‹å¦‚ï¼š<code>import x from &quot;...&quot;</code>ï¼›æˆ– <code>import x = require(&quot;...&quot;)</code> é‡Œé¢çš„ <code>...</code>ï¼Œç­‰ç­‰)æ¥å®šä½æ¨¡å—çš„ç±»å‹ä¿¡æ¯çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç¼–è¯‘å™¨é¦–å…ˆå°è¯•å»æŸ¥æ‰¾ç›¸åº”è·¯å¾„ä¸‹çš„ <code>.ts</code>ï¼Œ<code>.tsx</code> å†æˆ–è€… <code>.d.ts</code>ã€‚å¦‚æœè¿™äº›æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå®ƒä»¬æ˜¯åœ¨ <code>.d.ts</code> æ–‡ä»¶é‡Œå£°æ˜çš„ã€‚</p>\n</blockquote>\n<ul>\n<li><code>myModules.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// In a .d.ts file or .ts file that is not a module</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;SomeModule&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>myOtherModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;myModules.d.ts&quot;&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> m <span class=\"keyword\">from</span> <span class=\"string\">&quot;SomeModule&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„å¼•ç”¨æ ‡ç­¾æŒ‡å®šäº†å¤–æ¥æ¨¡å—çš„ä½ç½®ã€‚è¿™å°±æ˜¯ä¸€äº› <code>TypeScript</code> ä¾‹å­ä¸­å¼•ç”¨ <code>node.d.ts</code> çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<h4 id=\"17-4-2-ä¸å¿…è¦çš„å‘½åç©ºé—´\"><a href=\"#17-4-2-ä¸å¿…è¦çš„å‘½åç©ºé—´\" class=\"headerlink\" title=\"17.4.2 ä¸å¿…è¦çš„å‘½åç©ºé—´\"></a>17.4.2 ä¸å¿…è¦çš„å‘½åç©ºé—´</h4><blockquote>\n<p>å¦‚æœä½ æƒ³æŠŠå‘½åç©ºé—´è½¬æ¢ä¸ºæ¨¡å—ï¼Œå®ƒå¯èƒ½ä¼šåƒä¸‹é¢è¿™ä¸ªæ–‡ä»¶ä¸€æ ·ã€‚</p>\n</blockquote>\n<ul>\n<li><code>shapes.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">namespace</span> Shapes &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Triangle</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Square</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é¡¶å±‚çš„æ¨¡å— <code>Shapes</code> åŒ…è£¹äº† <code>Triangle</code> å’Œ <code>Square</code>ã€‚å¯¹äºä½¿ç”¨å®ƒçš„äººæ¥è¯´è¿™æ˜¯ä»¤äººè¿·æƒ‘å’Œè®¨åŒçš„ã€‚</p>\n</blockquote>\n<ul>\n<li><code>shapeConsumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> shapes <span class=\"keyword\">from</span> <span class=\"string\">&quot;./shapes&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> t = <span class=\"keyword\">new</span> shapes.Shapes.Triangle(); <span class=\"comment\">// shapes.Shapes?</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>TypeScript</code> é‡Œæ¨¡å—çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä¸åŒçš„æ¨¡å—æ°¸è¿œä¹Ÿä¸ä¼šåœ¨ç›¸åŒçš„ä½œç”¨åŸŸå†…ä½¿ç”¨ç›¸åŒçš„åå­—ã€‚å› ä¸ºä½¿ç”¨æ¨¡å—çš„äººä¼šä¸ºå®ƒä»¬å‘½åï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦æŠŠå¯¼å‡ºçš„ç¬¦å·åŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚å†æ¬¡é‡ç”³ï¼Œä¸åº”è¯¥å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚ä½¿ç”¨å‘½åç©ºé—´æ˜¯ä¸ºäº†æä¾›é€»è¾‘åˆ†ç»„å’Œé¿å…å‘½åå†²çªã€‚æ¨¡å—æ–‡ä»¶æœ¬èº«å·²ç»æ˜¯ä¸€ä¸ªé€»è¾‘åˆ†ç»„ï¼Œå¹¶ä¸”å®ƒçš„åå­—æ˜¯ç”±å¯¼å…¥è¿™ä¸ªæ¨¡å—çš„ä»£ç æŒ‡å®šï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ä¸ºå¯¼å‡ºçš„å¯¹è±¡å¢åŠ é¢å¤–çš„æ¨¡å—å±‚ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯æ”¹è¿›çš„ä¾‹å­ï¼š</li>\n<li><code>shape.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Triangle</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Square</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>shapeConsumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> shapes <span class=\"keyword\">from</span> <span class=\"string\">&quot;./shapes&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> t = <span class=\"keyword\">new</span> shapes.Triangle();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"17-4-3-æ¨¡å—çš„å–èˆ\"><a href=\"#17-4-3-æ¨¡å—çš„å–èˆ\" class=\"headerlink\" title=\"17.4.3 æ¨¡å—çš„å–èˆ\"></a>17.4.3 æ¨¡å—çš„å–èˆ</h4><blockquote>\n<p>å°±åƒæ¯ä¸ª <code>JS</code> æ–‡ä»¶å¯¹åº”ä¸€ä¸ªæ¨¡å—ä¸€æ ·ï¼Œ<code>TypeScript</code> é‡Œæ¨¡å—æ–‡ä»¶ä¸ç”Ÿæˆçš„ <code>JS</code> æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚è¿™ä¼šäº§ç”Ÿä¸€ç§å½±å“ï¼Œæ ¹æ®ä½ æŒ‡å®šçš„ç›®æ ‡æ¨¡å—ç³»ç»Ÿçš„ä¸åŒï¼Œä½ å¯èƒ½æ— æ³•è¿æ¥å¤šä¸ªæ¨¡å—æºæ–‡ä»¶ã€‚ä¾‹å¦‚å½“ç›®æ ‡æ¨¡å—ç³»ç»Ÿä¸º <code>commonjs</code> æˆ– <code>umd</code> æ—¶ï¼Œæ— æ³•ä½¿ç”¨ <code>outFile</code> é€‰é¡¹ï¼Œä½†æ˜¯ <code>TypeScript 1.8</code> ä»¥ä¸Šçš„ç‰ˆæœ¬èƒ½å¤Ÿä½¿ç”¨ <code>outFile</code> å½“ç›®æ ‡ä¸º <code>amd</code> æˆ– <code>system</code>ã€‚</p>\n</blockquote>\n<h2 id=\"åå…«ã€æ¨¡å—è§£æ\"><a href=\"#åå…«ã€æ¨¡å—è§£æ\" class=\"headerlink\" title=\"åå…«ã€æ¨¡å—è§£æ\"></a>åå…«ã€æ¨¡å—è§£æ</h2><h3 id=\"18-1-è¯´æ˜\"><a href=\"#18-1-è¯´æ˜\" class=\"headerlink\" title=\"18.1 è¯´æ˜\"></a>18.1 è¯´æ˜</h3><ol>\n<li>æ¨¡å—è§£ææ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨æŸ¥æ‰¾å¯¼å…¥æ¨¡å—å†…å®¹æ—¶æ‰€éµå¾ªçš„æµç¨‹ã€‚å‡è®¾æœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ <code>import &#123; a &#125; from &quot;moduleA&quot;</code>; ä¸ºäº†å»æ£€æŸ¥ä»»ä½•å¯¹ <code>a</code> çš„ä½¿ç”¨ï¼Œç¼–è¯‘å™¨éœ€è¦å‡†ç¡®çš„çŸ¥é“å®ƒè¡¨ç¤ºä»€ä¹ˆï¼Œå¹¶ä¸”éœ€è¦æ£€æŸ¥å®ƒçš„å®šä¹‰ <code>moduleA</code>ã€‚</li>\n<li>è¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæœ‰ä¸ªç–‘é—®â€œ <code>moduleA</code> çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿâ€ è¿™å¬ä¸Šå»å¾ˆç®€å•ï¼Œä½† moduleA å¯èƒ½åœ¨ä½ å†™çš„æŸä¸ª .ts/.tsx æ–‡ä»¶é‡Œæˆ–è€…åœ¨ä½ çš„ä»£ç æ‰€ä¾èµ–çš„ <code>.d.ts</code> é‡Œã€‚</li>\n<li>é¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½è¡¨ç¤ºå¯¼å…¥æ¨¡å—çš„æ–‡ä»¶ã€‚ç¼–è¯‘å™¨ä¼šéµå¾ªä»¥ä¸‹äºŒç§ç­–ç•¥ä¹‹ä¸€ï¼š <code>Classic</code> æˆ– <code>Node</code>ã€‚è¿™äº›ç­–ç•¥ä¼šå‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾ <code>moduleA</code>ã€‚</li>\n<li>å¦‚æœä¸Šé¢çš„è§£æå¤±è´¥äº†å¹¶ä¸”æ¨¡å—åæ˜¯éç›¸å¯¹çš„ï¼ˆä¸”æ˜¯åœ¨â€ <code>moduleA</code> â€œçš„æƒ…å†µä¸‹ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½ä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°éç›¸å¯¹å¯¼å…¥ã€‚</li>\n</ol>\n<p><code>5</code>. æœ€åï¼Œå¦‚æœç¼–è¯‘å™¨è¿˜æ˜¯ä¸èƒ½è§£æè¿™ä¸ªæ¨¡å—ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸ªé”™è¯¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé”™è¯¯å¯èƒ½ä¸º <code>error TS2307: Cannot find module &#39;moduleA&#39;.</code></p>\n<h3 id=\"18-2-ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥\"><a href=\"#18-2-ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥\" class=\"headerlink\" title=\"18.2 ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥\"></a>18.2 ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥</h3><blockquote>\n<p>æ ¹æ®æ¨¡å—å¼•ç”¨æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯éç›¸å¯¹çš„ï¼Œæ¨¡å—å¯¼å…¥ä¼šä»¥ä¸åŒçš„æ–¹å¼è§£æã€‚</p>\n</blockquote>\n<ol>\n<li>ç›¸å¯¹å¯¼å…¥æ˜¯ä»¥ <code>/ï¼Œ./</code> æˆ– <code>../</code> å¼€å¤´çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Entry <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/Entry&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Default &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../constants/http&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;/mod&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>æ‰€æœ‰å…¶å®ƒå½¢å¼çš„å¯¼å…¥è¢«å½“ä½œéç›¸å¯¹çš„ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&quot;JQuery&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@angular/core&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç›¸å¯¹å¯¼å…¥åœ¨è§£ææ—¶æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶ï¼Œå¹¶ä¸èƒ½è§£æä¸ºä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚ä½ åº”è¯¥ä¸ºä½ è‡ªå·±å†™çš„æ¨¡å—ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œè¿™æ ·èƒ½ç¡®ä¿å®ƒä»¬åœ¨è¿è¡Œæ—¶çš„ç›¸å¯¹ä½ç½®ã€‚</p>\n</blockquote>\n<blockquote>\n<p>éç›¸å¯¹æ¨¡å—çš„å¯¼å…¥å¯ä»¥ç›¸å¯¹äº baseUrl æˆ– é€šè¿‡ä¸‹æ–‡ä¼šè®²åˆ°çš„è·¯å¾„æ˜ å°„æ¥è§£æã€‚å®ƒä»¬è¿˜å¯ä»¥è¢«è§£ææˆ å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä½¿ç”¨éç›¸å¯¹è·¯å¾„æ¥å¯¼å…¥ä½ çš„å¤–éƒ¨ä¾èµ–ã€‚</p>\n</blockquote>\n<h3 id=\"18-3-æ¨¡å—è§£æç­–ç•¥\"><a href=\"#18-3-æ¨¡å—è§£æç­–ç•¥\" class=\"headerlink\" title=\"18.3 æ¨¡å—è§£æç­–ç•¥\"></a>18.3 æ¨¡å—è§£æç­–ç•¥</h3><blockquote>\n<p>å…±æœ‰ä¸¤ç§å¯ç”¨çš„æ¨¡å—è§£æç­–ç•¥ï¼š<code>Node</code> å’Œ <code>Classic</code>ã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>--moduleResolution</code> æ ‡è®°æ¥æŒ‡å®šä½¿ç”¨å“ªç§æ¨¡å—è§£æç­–ç•¥ã€‚è‹¥æœªæŒ‡å®šï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨äº† -<code>-module AMD \\| System \\| ES2015</code> æ—¶çš„é»˜è®¤å€¼ä¸º <code>Classic</code>ï¼Œå…¶å®ƒæƒ…å†µæ—¶åˆ™ä¸º <code>Node</code>ã€‚</p>\n</blockquote>\n<h4 id=\"18-3-1-Classic\"><a href=\"#18-3-1-Classic\" class=\"headerlink\" title=\"18.3.1 Classic\"></a>18.3.1 Classic</h4><blockquote>\n<p>è¿™ç§ç­–ç•¥åœ¨ä»¥å‰æ˜¯ <code>TypeScript</code> é»˜è®¤çš„è§£æç­–ç•¥ã€‚ ç°åœ¨ï¼Œå®ƒå­˜åœ¨çš„ç†ç”±ä¸»è¦æ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç›¸å¯¹å¯¼å…¥çš„æ¨¡å—æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶è¿›è¡Œè§£æçš„ã€‚ å› æ­¤ <code>/root/src/folder/A.ts</code> æ–‡ä»¶é‡Œçš„ <code>import &#123; b &#125; from &quot;./moduleB&quot;</code> ä¼šä½¿ç”¨ä¸‹é¢çš„æŸ¥æ‰¾æµç¨‹ï¼š</p>\n</blockquote>\n<ol>\n<li>/root/src/folder/moduleB.ts``</li>\n<li>/root/src/folder/moduleB.d.ts``</li>\n</ol>\n<blockquote>\n<p>å¯¹äºéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ï¼Œç¼–è¯‘å™¨åˆ™ä¼šä»åŒ…å«å¯¼å…¥æ–‡ä»¶çš„ç›®å½•å¼€å§‹ä¾æ¬¡å‘ä¸Šçº§ç›®å½•éå†ï¼Œå°è¯•å®šä½åŒ¹é…çš„å£°æ˜æ–‡ä»¶ã€‚</p>\n</blockquote>\n<ul>\n<li><code>æ¯”å¦‚ï¼š</code></li>\n</ul>\n<blockquote>\n<p>æœ‰ä¸€ä¸ªå¯¹ <code>moduleB</code> çš„éç›¸å¯¹å¯¼å…¥ <code>import &#123; b &#125; from &quot;moduleB&quot;</code>ï¼Œå®ƒæ˜¯åœ¨ <code>/root/src/folder/A.ts</code> æ–‡ä»¶é‡Œï¼Œä¼šä»¥å¦‚ä¸‹çš„æ–¹å¼æ¥å®šä½â€<code>moduleB</code>â€œï¼š</p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>/root/src/folder/moduleB.ts</code></li>\n<li><code>/root/src/folder/moduleB.d.ts</code></li>\n<li><code>/root/src/moduleB.ts</code></li>\n<li><code>/root/src/moduleB.d.ts</code></li>\n<li><code>/root/moduleB.ts</code></li>\n<li><code>/root/moduleB.d.ts</code></li>\n<li><code>/moduleB.ts</code></li>\n<li><code>/moduleB.d.ts</code></li>\n</ol>\n</blockquote>\n<h4 id=\"18-3-2-Node\"><a href=\"#18-3-2-Node\" class=\"headerlink\" title=\"18.3.2 Node\"></a>18.3.2 Node</h4><blockquote>\n<p>è¿™ä¸ªè§£æç­–ç•¥è¯•å›¾åœ¨è¿è¡Œæ—¶æ¨¡ä»¿ <code>Node.js</code> æ¨¡å—è§£ææœºåˆ¶ã€‚å®Œæ•´çš„ <code>Node.js</code> è§£æç®—æ³•å¯ä»¥åœ¨ <code>Node.js module documentation</code> æ‰¾åˆ°ã€‚</p>\n</blockquote>\n<ul>\n<li>Node.js å¦‚ä½•è§£ææ¨¡å—</li>\n</ul>\n<blockquote>\n<p>ä¸ºäº†ç†è§£ <code>TypeScript</code> ç¼–è¯‘ä¾ç…§çš„è§£ææ­¥éª¤ï¼Œå…ˆå¼„æ˜ç™½<code>Node.js</code>æ¨¡å—æ˜¯éå¸¸é‡è¦çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é€šå¸¸ï¼Œåœ¨ <code>Node.js</code> é‡Œå¯¼å…¥æ˜¯é€šè¿‡ <code>require</code> å‡½æ•°è°ƒç”¨è¿›è¡Œçš„ã€‚ <code>Node.js</code> ä¼šæ ¹æ® <code>require</code> æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯éç›¸å¯¹è·¯å¾„åšå‡ºä¸åŒçš„è¡Œä¸ºã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç›¸å¯¹è·¯å¾„å¾ˆç®€å•ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä¸º <code>/root/src/moduleA.js</code>ï¼ŒåŒ…å«äº†ä¸€ä¸ªå¯¼å…¥ <code>var x = require(&quot;./moduleB&quot;)</code>;</p>\n</blockquote>\n<ul>\n<li>Node.js ä»¥ä¸‹é¢çš„é¡ºåºè§£æè¿™ä¸ªå¯¼å…¥</li>\n</ul>\n<ol>\n<li>æ£€æŸ¥ <code>/root/src/moduleB.js</code> æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</li>\n<li>æ£€æŸ¥ <code>/root/src/moduleB</code> ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª <code>package.json</code> æ–‡ä»¶ï¼Œä¸” <code>package.json</code> æ–‡ä»¶æŒ‡å®šäº†ä¸€ä¸ªâ€<code>main</code>â€œæ¨¡å—ã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œå¦‚æœ <code>Node.js</code> å‘ç°æ–‡ä»¶ <code>/root/src/moduleB/package.json</code> åŒ…å«äº† <code>&#123; &quot;main&quot;: &quot;lib/mainModule.js&quot; &#125;</code>ï¼Œé‚£ä¹ˆ <code>Node.js</code> ä¼šå¼•ç”¨ <code>/root/src/moduleB/lib/mainModule.js</code>ã€‚</p>\n</blockquote>\n<ol start=\"3\">\n<li>æ£€æŸ¥ <code>/root/src/moduleB</code> ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª <code>index.js</code> æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šè¢«éšå¼åœ°å½“ä½œé‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„â€<code>main</code>â€œæ¨¡å—ã€‚</li>\n</ol>\n<p>ä½ å¯ä»¥é˜…è¯» <code>Node.js</code> æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š<a href=\"https://nodejs.org/api/modules.html#modules_file_modules\">file modules</a> å’Œ <a href=\"https://nodejs.org/api/modules.html#modules_folders_as_modules\">folder modules</a>ã€‚</p>\n<blockquote>\n<p>ä½†æ˜¯ï¼Œéç›¸å¯¹æ¨¡å—åçš„è§£ææ˜¯ä¸ªå®Œå…¨ä¸åŒçš„è¿‡ç¨‹ã€‚<code>Node</code> ä¼šåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶å¤¹ <code>node\\_modules</code> é‡ŒæŸ¥æ‰¾ä½ çš„æ¨¡å—ã€‚<code>node\\_modules</code> å¯èƒ½ä¸å½“å‰æ–‡ä»¶åœ¨åŒä¸€çº§ç›®å½•ä¸‹ï¼Œæˆ–è€…åœ¨ä¸Šå±‚ç›®å½•é‡Œã€‚<code>Node</code> ä¼šå‘ä¸Šçº§ç›®å½•éå†ï¼ŒæŸ¥æ‰¾æ¯ä¸ª <code>node\\_modules</code>ç›´åˆ°å®ƒæ‰¾åˆ°è¦åŠ è½½çš„æ¨¡å—ã€‚<br>è¿˜æ˜¯ç”¨ä¸Šé¢ä¾‹å­ï¼Œä½†å‡è®¾ <code>/root/src/moduleA.js</code> é‡Œä½¿ç”¨çš„æ˜¯éç›¸å¯¹è·¯å¾„å¯¼å…¥ <code>var x = require(&quot;moduleB&quot;)</code>;</p>\n</blockquote>\n<ul>\n<li><code>Node</code> åˆ™ä¼šä»¥ä¸‹é¢çš„é¡ºåºå»è§£æ <code>moduleB</code>ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªåŒ¹é…ä¸Šã€‚</li>\n</ul>\n<blockquote>\n<p>1.<code>/root/src/node_modules/moduleB.js</code> 2.<code>/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;main&quot;å±æ€§)</code> 3.<code>/root/src/node_modules/moduleB/index.js</code> 4.<code>/root/node_modules/moduleB.js</code> 5.<code>/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;main&quot;å±æ€§)</code> 6.<code>/root/node_modules/moduleB/index.js</code> 7.<code>/node_modules/moduleB.js</code> 8.<code>/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;main&quot;å±æ€§)</code> 9.<code>/node_modules/moduleB/index.js</code></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ <code>Node.js</code> åœ¨æ­¥éª¤ï¼ˆ<code>4</code>ï¼‰å’Œï¼ˆ<code>7</code>ï¼‰ä¼šå‘ä¸Šè·³ä¸€çº§ç›®å½•ã€‚<br>ä½ å¯ä»¥é˜…è¯» <code>Node.js</code> æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š<a href=\"https://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders\">loading modules from node_modules</a>ã€‚</p>\n</blockquote>\n<ul>\n<li>TypeScript å¦‚ä½•è§£ææ¨¡å—</li>\n</ul>\n<blockquote>\n<p><code>TypeScript</code> æ˜¯æ¨¡ä»¿ <code>Node.js</code> è¿è¡Œæ—¶çš„è§£æç­–ç•¥æ¥åœ¨ç¼–è¯‘é˜¶æ®µå®šä½æ¨¡å—å®šä¹‰æ–‡ä»¶ã€‚å› æ­¤ï¼Œ<code>TypeScript</code> åœ¨ <code>Node</code> è§£æé€»è¾‘åŸºç¡€ä¸Šå¢åŠ äº† TypeScript æºæ–‡ä»¶çš„æ‰©å±•åï¼ˆ <code>.ts</code>ï¼Œ<code>.tsx</code> å’Œ <code>.d.ts</code>ï¼‰ã€‚åŒæ—¶ï¼Œ<code>TypeScript</code> åœ¨ <code>package.json</code> é‡Œä½¿ç”¨å­—æ®µâ€<code>types</code>â€œæ¥è¡¨ç¤ºç±»ä¼¼â€<code>main</code>â€œçš„æ„ä¹‰ <code>-</code> ç¼–è¯‘å™¨ä¼šä½¿ç”¨å®ƒæ¥æ‰¾åˆ°è¦ä½¿ç”¨çš„â€<code>main</code>â€œå®šä¹‰æ–‡ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ <code>import &#123; b &#125; from &quot;./moduleB&quot;</code> åœ¨ <code>/root/src/moduleA.ts</code> é‡Œï¼Œä¼šä»¥ä¸‹é¢çš„æµç¨‹æ¥å®šä½ <code>&quot;./moduleB&quot;</code> ï¼š</p>\n<ol>\n<li><code>/root/src/moduleB.ts</code></li>\n<li><code>/root/src/moduleB.tsx</code></li>\n<li><code>/root/src/moduleB.d.ts</code></li>\n<li><code>/root/src/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/root/src/moduleB/index.ts</code></li>\n<li><code>/root/src/moduleB/index.tsx</code></li>\n<li><code>/root/src/moduleB/index.d.ts</code></li>\n</ol>\n</blockquote>\n<blockquote>\n<p>å›æƒ³ä¸€ä¸‹ <code>Node.js</code> å…ˆæŸ¥æ‰¾ <code>moduleB.js</code> æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„ <code>package.json</code>ï¼Œå†ä¹‹åæ˜¯ <code>index.js</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç±»ä¼¼åœ°ï¼Œéç›¸å¯¹çš„å¯¼å…¥ä¼šéµå¾ª <code>Node.js</code> çš„è§£æé€»è¾‘ï¼Œé¦–å…ˆæŸ¥æ‰¾æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„æ–‡ä»¶å¤¹ã€‚å› æ­¤ <code>/root/src/moduleA.ts</code> ä»¶é‡Œçš„ <code>import &#123; b &#125; from &quot;moduleB&quot;</code> ä¼šä»¥ä¸‹é¢çš„æŸ¥æ‰¾é¡ºåºè§£æï¼š</p>\n<ol>\n<li><code>/root/src/node_modules/moduleB.ts</code></li>\n<li><code>/root/src/node_modules/moduleB.tsx</code></li>\n<li><code>/root/src/node_modules/moduleB.d.ts</code></li>\n<li><code>/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/root/src/node_modules/moduleB/index.ts</code></li>\n<li><code>/root/src/node_modules/moduleB/index.tsx</code></li>\n<li><code>/root/src/node_modules/moduleB/index.d.ts</code></li>\n<li><code>/root/node_modules/moduleB.ts</code></li>\n<li><code>/root/node_modules/moduleB.tsx</code></li>\n<li><code>/root/node_modules/moduleB.d.ts</code></li>\n<li><code>/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/root/node_modules/moduleB/index.ts</code></li>\n<li><code>/root/node_modules/moduleB/index.tsx</code></li>\n<li><code>/root/node_modules/moduleB/index.d.ts</code></li>\n<li><code>/node_modules/moduleB.ts</code></li>\n<li><code>/node_modules/moduleB.tsx</code></li>\n<li><code>/node_modules/moduleB.d.ts</code></li>\n<li><code>/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/node_modules/moduleB/index.ts</code></li>\n<li><code>/node_modules/moduleB/index.tsx</code></li>\n<li><code>/node_modules/moduleB/index.d.ts</code></li>\n</ol>\n</blockquote>\n<blockquote>\n<p>ä¸è¦è¢«è¿™é‡Œæ­¥éª¤çš„æ•°é‡å“åˆ° <code>-</code> <code>TypeScript</code> åªæ˜¯åœ¨æ­¥éª¤ï¼ˆ<code>8</code>ï¼‰å’Œï¼ˆ<code>15</code>ï¼‰å‘ä¸Šè·³äº†ä¸¤æ¬¡ç›®å½•ã€‚ è¿™å¹¶ä¸æ¯” <code>Node.js</code> é‡Œçš„æµç¨‹å¤æ‚ã€‚</p>\n</blockquote>\n<h3 id=\"18-4-é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\"><a href=\"#18-4-é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\" class=\"headerlink\" title=\"18.4 é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\"></a>18.4 é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°</h3><blockquote>\n<ol>\n<li>æœ‰æ—¶å·¥ç¨‹æºç ç»“æ„ä¸è¾“å‡ºç»“æ„ä¸åŒã€‚ é€šå¸¸æ˜¯è¦ç»è¿‡ä¸€ç³»ç»Ÿçš„æ„å»ºæ­¥éª¤æœ€åç”Ÿæˆè¾“å‡ºã€‚ å®ƒä»¬åŒ…æ‹¬å°† <code>.ts</code> ç¼–è¯‘æˆ <code>.js</code>ï¼Œå°†ä¸åŒä½ç½®çš„ä¾èµ–æ‹·è´è‡³ä¸€ä¸ªè¾“å‡ºä½ç½®ã€‚ æœ€ç»ˆç»“æœå°±æ˜¯è¿è¡Œæ—¶çš„æ¨¡å—åä¸åŒ…å«å®ƒä»¬å£°æ˜çš„æºæ–‡ä»¶é‡Œçš„æ¨¡å—åä¸åŒã€‚ æˆ–è€…æœ€ç»ˆè¾“å‡ºæ–‡ä»¶é‡Œçš„æ¨¡å—è·¯å¾„ä¸ç¼–è¯‘æ—¶çš„æºæ–‡ä»¶è·¯å¾„ä¸åŒäº†ã€‚</li>\n<li><code>TypeScript</code> ç¼–è¯‘å™¨æœ‰ä¸€äº›é¢å¤–çš„æ ‡è®°ç”¨æ¥é€šçŸ¥ç¼–è¯‘å™¨åœ¨æºç ç¼–è¯‘æˆæœ€ç»ˆè¾“å‡ºçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†å“ªä¸ªè½¬æ¢ã€‚</li>\n<li>æœ‰ä¸€ç‚¹è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œè¿™äº›è½¬æ¢æ“ä½œï¼›å®ƒåªæ˜¯åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æŒ‡å¯¼æ¨¡å—çš„å¯¼å…¥ã€‚</li>\n</ol>\n</blockquote>\n<ul>\n<li><code>Base URL</code></li>\n</ul>\n<blockquote>\n<p>åœ¨åˆ©ç”¨ <code>AMD</code> æ¨¡å—åŠ è½½å™¨çš„åº”ç”¨é‡Œä½¿ç”¨ <code>baseUrl</code> æ˜¯å¸¸è§åšæ³•ï¼Œå®ƒè¦æ±‚åœ¨è¿è¡Œæ—¶æ¨¡å—éƒ½è¢«æ”¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚è¿™äº›æ¨¡å—çš„æºç å¯ä»¥åœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œä½†æ˜¯æ„å»ºè„šæœ¬ä¼šå°†å®ƒä»¬é›†ä¸­åˆ°ä¸€èµ·ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¾ç½® <code>baseUrl</code> æ¥å‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾æ¨¡å—ã€‚ æ‰€æœ‰ <code>éç›¸å¯¹æ¨¡å—</code> å¯¼å…¥éƒ½ä¼šè¢«å½“åšç›¸å¯¹äº <code>baseUrl</code>ã€‚</p>\n</blockquote>\n<ul>\n<li><code>baseUrl</code> çš„å€¼ç”±ä»¥ä¸‹ä¸¤è€…ä¹‹ä¸€å†³å®šï¼š</li>\n</ul>\n<blockquote>\n<ol>\n<li>å‘½ä»¤è¡Œä¸­ <code>baseUrl</code> çš„å€¼ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºå½“å‰è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰</li>\n<li><code>tsconfig.json</code>é‡Œçš„ <code>baseUrl</code> å±æ€§ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºâ€˜<code>tsconfig.json</code>â€™è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ä¸ä¼šè¢«è®¾ç½®çš„ <code>baseUrl</code> æ‰€å½±å“ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒä»¬çš„æ–‡ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é˜…è¯»æ›´å¤šå…³äº <code>baseUrl</code> çš„ä¿¡æ¯ <a href=\"https://requirejs.org/docs/api.html#config-baseUrl\">RequireJS</a> å’Œ <a href=\"https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#baseurl\"><code>SystemJS</code></a>ã€‚</p>\n</blockquote>\n<h3 id=\"18-5-è·¯å¾„æ˜ å°„\"><a href=\"#18-5-è·¯å¾„æ˜ å°„\" class=\"headerlink\" title=\"18.5 è·¯å¾„æ˜ å°„\"></a>18.5 è·¯å¾„æ˜ å°„</h3><blockquote>\n<p>æœ‰æ—¶æ¨¡å—ä¸æ˜¯ç›´æ¥æ”¾åœ¨ <code>baseUrl</code> ä¸‹é¢ã€‚ æ¯”å¦‚ï¼Œå……åˆ† â€œ<code>jquery</code>â€œæ¨¡å—åœ°å¯¼å…¥ï¼Œåœ¨è¿è¡Œæ—¶å¯èƒ½è¢«è§£é‡Šä¸ºâ€<code>node\\_modules/jquery/dist/jquery.slim.min.js</code>â€œã€‚ åŠ è½½å™¨ä½¿ç”¨æ˜ å°„é…ç½®æ¥å°†æ¨¡å—åæ˜ å°„åˆ°è¿è¡Œæ—¶çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹ <a href=\"https://requirejs.org/docs/api.html#config-paths\">RequireJs documentation</a> å’Œ <a href=\"https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#paths\">SystemJS documentation</a>ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>TypeScript</code> ç¼–è¯‘å™¨é€šè¿‡ä½¿ç”¨ <code>tsconfig.json</code> æ–‡ä»¶é‡Œçš„ â€œ<code>paths</code>â€œ æ¥æ”¯æŒè¿™æ ·çš„å£°æ˜æ˜ å°„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•æŒ‡å®š <code>jquery</code> çš„â€<code>paths</code>â€œçš„ä¾‹å­ã€‚</p>\n</blockquote>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;.&quot;</span>, <span class=\"comment\">// This must be specified if &quot;paths&quot; is.</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;paths&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;jquery&quot;</span>: [<span class=\"string\">&quot;node_modules/jquery/dist/jquery&quot;</span>] <span class=\"comment\">// æ­¤å¤„æ˜ å°„æ˜¯ç›¸å¯¹äº&quot;baseUrl&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¯·æ³¨æ„â€<code>paths</code>â€œæ˜¯ç›¸å¯¹äºâ€<code>baseUrl</code>â€œè¿›è¡Œè§£æã€‚ å¦‚æœ â€œ<code>baseUrl</code>â€œ è¢«è®¾ç½®æˆäº†é™¤â€<code>.</code>â€œå¤–çš„å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ <code>tsconfig.json</code> æ‰€åœ¨çš„ç›®å½•ï¼Œé‚£ä¹ˆæ˜ å°„å¿…é¡»è¦åšç›¸åº”çš„æ”¹å˜ã€‚å¦‚æœä½ åœ¨ä¸Šä¾‹ä¸­è®¾ç½®äº† <code>&quot;baseUrl&quot;: &quot;./src&quot;</code>ï¼Œé‚£ä¹ˆ <code>jquery</code> åº”è¯¥æ˜ å°„åˆ° <code>&quot;../node\\_modules/jquery/dist/jquery&quot;</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é€šè¿‡â€<code>paths</code>â€œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå¤æ‚çš„æ˜ å°„ï¼ŒåŒ…æ‹¬æŒ‡å®šå¤šä¸ªå›é€€ä½ç½®ã€‚ å‡è®¾åœ¨ä¸€ä¸ªå·¥ç¨‹é…ç½®é‡Œï¼Œæœ‰ä¸€äº›æ¨¡å—ä½äºä¸€å¤„ï¼Œè€Œå…¶å®ƒçš„åˆ™åœ¨å¦ä¸ªçš„ä½ç½®ã€‚ æ„å»ºè¿‡ç¨‹ä¼šå°†å®ƒä»¬é›†ä¸­è‡³ä¸€å¤„ã€‚ å·¥ç¨‹ç»“æ„å¯èƒ½å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">projectRoot</span><br><span class=\"line\">â”œâ”€â”€ folder1</span><br><span class=\"line\">â”‚   â”œâ”€â”€ file1.ts (imports <span class=\"string\">&#x27;folder1/file2&#x27;</span> and <span class=\"string\">&#x27;folder2/file3&#x27;</span>)</span><br><span class=\"line\">â”‚   â””â”€â”€ file2.ts</span><br><span class=\"line\">â”œâ”€â”€ generated</span><br><span class=\"line\">â”‚   â”œâ”€â”€ folder1</span><br><span class=\"line\">â”‚   â””â”€â”€ folder2</span><br><span class=\"line\">â”‚       â””â”€â”€ file3.ts</span><br><span class=\"line\">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç›¸åº”çš„ <code>tsconfig.json</code> æ–‡ä»¶å¦‚ä¸‹ï¼š</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;.&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;paths&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;*&quot;</span>: [<span class=\"string\">&quot;*&quot;</span>, <span class=\"string\">&quot;generated/*&quot;</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒå‘Šè¯‰ç¼–è¯‘å™¨æ‰€æœ‰åŒ¹é… <code>&quot;\\*&quot;</code>ï¼ˆæ‰€æœ‰çš„å€¼ï¼‰æ¨¡å¼çš„æ¨¡å—å¯¼å…¥ä¼šåœ¨ä»¥ä¸‹ä¸¤ä¸ªä½ç½®æŸ¥æ‰¾ï¼š</p>\n<ol>\n<li><code>&quot;\\*&quot;</code>ï¼š è¡¨ç¤ºåå­—ä¸å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æ˜ å°„ä¸º Â <code>=&gt;</code> <code>/</code></li>\n<li>â€œ<code>generated/</code>â€œè¡¨ç¤ºæ¨¡å—åæ·»åŠ äº†â€œ<code>generated</code>â€å‰ç¼€ï¼Œæ‰€ä»¥æ˜ å°„ä¸º <code>&lt;moduleName&gt; =&gt; &lt;baseUrl&gt;/generated/&lt;moduleName&gt;</code></li>\n</ol>\n</blockquote>\n<ul>\n<li><code>æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œç¼–è¯‘å™¨å°†ä¼šå¦‚ä¸‹å°è¯•è§£æè¿™ä¸¤ä¸ªå¯¼å…¥ï¼š</code></li>\n</ul>\n<blockquote>\n<p>(i). å¯¼å…¥<code>&#39;folder1/file2&#39;</code></p>\n<ol>\n<li>åŒ¹é… <code>&#39;\\*&#39;</code> æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚</li>\n<li>å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š<code>&#39;\\*&#39; -&gt; folder1/file2</code>ã€‚</li>\n<li>æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ <code>baseUrl</code> åˆå¹¶ <code>-&gt; projectRoot/folder1/file2.ts</code>ã€‚</li>\n<li>æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚</li>\n</ol>\n<p>(ii). å¯¼å…¥<code>&#39;folder2/file3&#39;</code></p>\n<ol>\n<li>åŒ¹é… <code>&#39;\\*&#39;</code> æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚</li>\n<li>å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š<code>&#39;\\*&#39; -&gt; folder2/file3</code>ã€‚</li>\n<li>æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ <code>baseUrl</code> åˆå¹¶ <code>-&gt; projectRoot/folder2/file3.ts</code>ã€‚</li>\n<li>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè·³åˆ°ç¬¬äºŒä¸ªæ›¿æ¢ã€‚</li>\n<li>ç¬¬äºŒä¸ªæ›¿æ¢ï¼š<code>&#39;generated/&#39; -&gt; generated/folder2/file3</code>ã€‚</li>\n<li>æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ <code>baseUrl</code> åˆå¹¶ <code>-&amp;gt; projectRoot/generated/folder2/file3.ts</code>ã€‚</li>\n<li>æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚</li>\n</ol>\n</blockquote>\n<ul>\n<li>åˆ©ç”¨ <code>rootDirs</code> æŒ‡å®šè™šæ‹Ÿç›®å½•</li>\n</ul>\n<blockquote>\n<p>æœ‰æ—¶å¤šä¸ªç›®å½•ä¸‹çš„å·¥ç¨‹æºæ–‡ä»¶åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œåˆå¹¶æ”¾åœ¨æŸä¸ªè¾“å‡ºç›®å½•ä¸‹ã€‚ è¿™å¯ä»¥çœ‹åšä¸€äº›æºç›®å½•åˆ›å»ºäº†ä¸€ä¸ªâ€œè™šæ‹Ÿâ€ç›®å½•ã€‚ åˆ©ç”¨ <code>rootDirs</code>ï¼Œå¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆè¿™ä¸ªè™šæ‹Ÿç›®å½•çš„ <code>roots</code>ï¼› å› æ­¤ç¼–è¯‘å™¨å¯ä»¥åœ¨â€œè™šæ‹Ÿâ€ç›®å½•ä¸‹è§£æç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå°±å¥½åƒå®ƒä»¬è¢«åˆå¹¶åœ¨äº†ä¸€èµ·ä¸€æ ·ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ¯”å¦‚ï¼Œæœ‰ä¸‹é¢çš„å·¥ç¨‹ç»“æ„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">src</span><br><span class=\"line\"> â””â”€â”€ views</span><br><span class=\"line\">     â””â”€â”€ view1.ts (imports <span class=\"string\">&#x27;./template1&#x27;</span>)</span><br><span class=\"line\">     â””â”€â”€ view2.ts</span><br><span class=\"line\"></span><br><span class=\"line\"> generated</span><br><span class=\"line\"> â””â”€â”€ templates</span><br><span class=\"line\">         â””â”€â”€ views</span><br><span class=\"line\">             â””â”€â”€ template1.ts (imports <span class=\"string\">&#x27;./view2&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>src/views</code> é‡Œçš„æ–‡ä»¶æ˜¯ç”¨äºæ§åˆ¶ UI çš„ç”¨æˆ·ä»£ç ã€‚ <code>generated/templates</code> æ˜¯ <code>UI</code> æ¨¡ç‰ˆï¼Œåœ¨æ„å»ºæ—¶é€šè¿‡æ¨¡ç‰ˆç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆã€‚æ„å»ºä¸­çš„ä¸€æ­¥ä¼šå°† <code>/src/views</code> å’Œ <code>/generated/templates/views</code> çš„è¾“å‡ºæ‹·è´åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ åœ¨è¿è¡Œæ—¶ï¼Œè§†å›¾å¯ä»¥å‡è®¾å®ƒçš„æ¨¡ç‰ˆä¸å®ƒåŒåœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ <code>&quot;./template&quot;</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯ä»¥ä½¿ç”¨â€<code>rootDirs</code>â€œæ¥å‘Šè¯‰ç¼–è¯‘å™¨ã€‚â€<code>rootDirs</code>â€œæŒ‡å®šäº†ä¸€ä¸ª <code>roots</code> åˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œçš„å†…å®¹ä¼šåœ¨è¿è¡Œæ—¶è¢«åˆå¹¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å› æ­¤ï¼Œé’ˆå¯¹è¿™ä¸ªä¾‹å­ï¼Œ <code>tsconfig.json</code> å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;rootDirs&quot;</span>: [<span class=\"string\">&quot;src/views&quot;</span>, <span class=\"string\">&quot;generated/templates/views&quot;</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¯å½“ç¼–è¯‘å™¨åœ¨æŸä¸€ <code>rootDirs</code> çš„å­ç›®å½•ä¸‹å‘ç°äº†ç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå®ƒå°±ä¼šå°è¯•ä»æ¯ä¸€ä¸ª <code>rootDirs</code> ä¸­å¯¼å…¥ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>rootDirs</code> çš„çµæ´»æ€§ä¸ä»…ä»…å±€é™äºå…¶æŒ‡å®šäº†è¦åœ¨é€»è¾‘ä¸Šåˆå¹¶çš„ç‰©ç†ç›®å½•åˆ—è¡¨ã€‚å®ƒæä¾›çš„æ•°ç»„å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„ä»»ä½•åå­—çš„ç›®å½•ï¼Œä¸è®ºå®ƒä»¬æ˜¯å¦å­˜åœ¨ã€‚è¿™å…è®¸ç¼–è¯‘å™¨ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å¤„ç†å¤æ‚æ†ç»‘( <code>bundles</code> )å’Œè¿è¡Œæ—¶çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ¡ä»¶å¼•å…¥å’Œå·¥ç¨‹ç‰¹å®šçš„åŠ è½½å™¨æ’ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¾æƒ³è¿™æ ·ä¸€ä¸ªå›½é™…åŒ–çš„åœºæ™¯ï¼Œæ„å»ºå·¥å…·è‡ªåŠ¨æ’å…¥ç‰¹å®šçš„è·¯å¾„è®°å·æ¥ç”Ÿæˆé’ˆå¯¹ä¸åŒåŒºåŸŸçš„æ†ç»‘ï¼Œæ¯”å¦‚å°† <code>\\#&#123;locale&#125;</code> åšä¸ºç›¸å¯¹æ¨¡å—è·¯å¾„ <code>./\\#&#123;locale&#125;/messages</code> çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªå‡å®šçš„è®¾ç½®ä¸‹ï¼Œå·¥å…·ä¼šæšä¸¾æ”¯æŒçš„åŒºåŸŸï¼Œå°†æŠ½åƒçš„è·¯å¾„æ˜ å°„æˆ <code>./zh/messages</code>ï¼Œ<code>./de/messages</code> ç­‰ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾æ¯ä¸ªæ¨¡å—éƒ½ä¼šå¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚æ¯”å¦‚ <code>./zh/messages</code> å¯èƒ½åŒ…å«ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> [<span class=\"string\">&quot;æ‚¨å¥½å—&quot;</span>, <span class=\"string\">&quot;å¾ˆé«˜å…´è®¤è¯†ä½ &quot;</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åˆ©ç”¨ <code>rootDirs</code> æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨äº†è§£è¿™ä¸ªæ˜ å°„å…³ç³»ï¼Œä»è€Œä¹Ÿå…è®¸ç¼–è¯‘å™¨èƒ½å¤Ÿå®‰å…¨åœ°è§£æ <code>./\\#&#123;locale&#125;/messages</code>ï¼Œå°±ç®—è¿™ä¸ªç›®å½•æ°¸è¿œéƒ½ä¸å­˜åœ¨ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ä¸‹é¢çš„ <code>tsconfig.json</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;rootDirs&quot;</span>: [<span class=\"string\">&quot;src/zh&quot;</span>, <span class=\"string\">&quot;src/de&quot;</span>, <span class=\"string\">&quot;src/#&#123;locale&#125;&quot;</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¼–è¯‘å™¨ç°åœ¨å¯ä»¥å°† <code>import messages from &#39;./#&#123;locale&#125;/messages&#39;</code> è§£æä¸º <code>import messages from &#39;./zh/messages&#39;</code> ç”¨åšå·¥å…·æ”¯æŒçš„ç›®çš„ï¼Œå¹¶å…è®¸åœ¨å¼€å‘æ—¶ä¸å¿…äº†è§£åŒºåŸŸä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"18-6-è·Ÿè¸ªæ¨¡å—è§£æ\"><a href=\"#18-6-è·Ÿè¸ªæ¨¡å—è§£æ\" class=\"headerlink\" title=\"18.6 è·Ÿè¸ªæ¨¡å—è§£æ\"></a>18.6 è·Ÿè¸ªæ¨¡å—è§£æ</h3><blockquote>\n<p>å¦‚ä¹‹å‰è®¨è®ºï¼Œç¼–è¯‘å™¨åœ¨è§£ææ¨¡å—æ—¶å¯èƒ½è®¿é—®å½“å‰æ–‡ä»¶å¤¹å¤–çš„æ–‡ä»¶ã€‚ è¿™ä¼šå¯¼è‡´å¾ˆéš¾è¯Šæ–­æ¨¡å—ä¸ºä»€ä¹ˆæ²¡æœ‰è¢«è§£æï¼Œæˆ–è§£æåˆ°äº†é”™è¯¯çš„ä½ç½®ã€‚ é€šè¿‡ <code>--traceResolution</code> å¯ç”¨ç¼–è¯‘å™¨çš„æ¨¡å—è§£æè·Ÿè¸ªï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬åœ¨æ¨¡å—è§£æè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨äº† <code>typescript</code> æ¨¡å—çš„ç®€å•åº”ç”¨ã€‚<code>app.ts</code> é‡Œæœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¼å…¥ <code>import * as ts from &quot;typescript&quot;</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">â”‚   tsconfig.json</span><br><span class=\"line\">â”œâ”€â”€â”€node_modules</span><br><span class=\"line\">â”‚   â””â”€â”€â”€typescript</span><br><span class=\"line\">â”‚       â””â”€â”€â”€lib</span><br><span class=\"line\">â”‚               typescript.d.ts</span><br><span class=\"line\">â””â”€â”€â”€src</span><br><span class=\"line\">        app.ts</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>--traceResolution</code> è°ƒç”¨ç¼–è¯‘å™¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc --traceResolution</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">======== Resolving <span class=\"built_in\">module</span> <span class=\"string\">&#x27;typescript&#x27;</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;src/app.ts&#x27;</span>. ========</span><br><span class=\"line\">Module resolution kind is not specified, using <span class=\"string\">&#x27;NodeJs&#x27;</span>.</span><br><span class=\"line\">Loading <span class=\"built_in\">module</span> <span class=\"string\">&#x27;typescript&#x27;</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;node_modules&#x27;</span> folder.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript.ts&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript.tsx&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript.d.ts&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript/package.json&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript.ts&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript.tsx&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript.d.ts&#x27;</span> does not exist.</span><br><span class=\"line\">Found <span class=\"string\">&#x27;package.json&#x27;</span> at <span class=\"string\">&#x27;node_modules/typescript/package.json&#x27;</span>.</span><br><span class=\"line\"><span class=\"string\">&#x27;package.json&#x27;</span> has <span class=\"string\">&#x27;types&#x27;</span> field <span class=\"string\">&#x27;./lib/typescript.d.ts&#x27;</span> that references <span class=\"string\">&#x27;node_modules/typescript/lib/typescript.d.ts&#x27;</span>.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript/lib/typescript.d.ts&#x27;</span> exist - use it <span class=\"keyword\">as</span> a <span class=\"built_in\">module</span> resolution result.</span><br><span class=\"line\">======== Module name <span class=\"string\">&#x27;typescript&#x27;</span> was successfully resolved to <span class=\"string\">&#x27;node_modules/typescript/lib/typescript.d.ts&#x27;</span>. ========</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>éœ€è¦ç•™æ„çš„åœ°æ–¹ï¼š</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>å¯¼å…¥çš„åå­—åŠä½ç½® <code>======== Resolving module &#39;typescript&#39; from &#39;src/app.ts&#39;. ========</code></li>\n<li>ç¼–è¯‘å™¨ä½¿ç”¨çš„ç­–ç•¥ <code>Module resolution kind is not specified, using &#39;NodeJs&#39;.</code></li>\n<li>ä» <code>npm</code> åŠ è½½ <code>types</code> <code>&#39;package.json&#39; has &#39;types&#39; field &#39;./lib/typescript.d.ts&#39; that references &#39;node\\_modules/typescript/lib/typescript.d.ts&#39;.</code></li>\n<li>æœ€ç»ˆç»“æœ <code>======== Module name &#39;typescript&#39; was successfully resolved to &#39;node\\_modules/typescript/lib/typescript.d.ts&#39;. ========</code></li>\n</ol>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨ <code>--noResolve</code></li>\n</ul>\n<blockquote>\n<p>æ­£å¸¸æ¥è®²ç¼–è¯‘å™¨ä¼šåœ¨å¼€å§‹ç¼–è¯‘ä¹‹å‰è§£ææ¨¡å—å¯¼å…¥ã€‚ æ¯å½“å®ƒæˆåŠŸåœ°è§£æäº†å¯¹ä¸€ä¸ªæ–‡ä»¶ <code>import</code>ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ä¼šåŠ åˆ°ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œï¼Œä»¥ä¾›ç¼–è¯‘å™¨ç¨åå¤„ç†ã€‚<code>--noResolve</code> ç¼–è¯‘é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦æ·»åŠ ä»»ä½•ä¸æ˜¯åœ¨å‘½ä»¤è¡Œä¸Šä¼ å…¥çš„æ–‡ä»¶åˆ°ç¼–è¯‘åˆ—è¡¨ã€‚ ç¼–è¯‘å™¨ä»ç„¶ä¼šå°è¯•è§£ææ¨¡å—ï¼Œä½†æ˜¯åªè¦æ²¡æœ‰æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šè¢«åŒ…å«åœ¨å†…ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>æ¯”å¦‚</code>:</p>\n</blockquote>\n<ul>\n<li><code>app.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> A <span class=\"keyword\">from</span> <span class=\"string\">&quot;moduleA&quot;</span>; <span class=\"comment\">// OK, moduleA passed on the command-line</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> B <span class=\"keyword\">from</span> <span class=\"string\">&quot;moduleB&quot;</span>; <span class=\"comment\">// Error TS2307: Cannot find module &#x27;moduleB&#x27;.</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc app.ts moduleA.ts --noResolve</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>--noResolve</code> ç¼–è¯‘ <code>app.ts</code>ï¼š</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>å¯èƒ½æ­£ç¡®æ‰¾åˆ° <code>moduleA</code>ï¼Œå› ä¸ºå®ƒåœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šäº†ã€‚</li>\n<li>æ‰¾ä¸åˆ° <code>moduleB</code>ï¼Œå› ä¸ºæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸Šä¼ é€’ã€‚</li>\n</ol>\n</blockquote>\n<h3 id=\"18-7-å¸¸è§é—®é¢˜\"><a href=\"#18-7-å¸¸è§é—®é¢˜\" class=\"headerlink\" title=\"18.7 å¸¸è§é—®é¢˜\"></a>18.7 å¸¸è§é—®é¢˜</h3><ul>\n<li>ä¸ºä»€ä¹ˆåœ¨ <code>exclude</code> åˆ—è¡¨é‡Œçš„æ¨¡å—è¿˜ä¼šè¢«ç¼–è¯‘å™¨ä½¿ç”¨</li>\n</ul>\n<blockquote>\n<p><code>tsconfig.json</code> å°†æ–‡ä»¶å¤¹è½¬å˜ä¸€ä¸ªâ€œå·¥ç¨‹â€ å¦‚æœä¸æŒ‡å®šä»»ä½• â€œ<code>exclude</code>â€ æˆ– â€œ<code>files</code>â€ï¼Œæ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬ <code>tsconfig.json</code> å’Œ æ‰€æœ‰çš„å­ç›®å½• éƒ½ä¼šåœ¨ç¼–è¯‘åˆ—è¡¨é‡Œã€‚ å¦‚æœä½ æƒ³åˆ©ç”¨ â€œ<code>exclude</code>â€æ’é™¤æŸäº›æ–‡ä»¶ï¼Œç”šè‡³ä½ æƒ³æŒ‡å®šæ‰€æœ‰è¦ç¼–è¯‘çš„æ–‡ä»¶åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨â€œ<code>files</code>â€ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æœ‰äº›æ˜¯è¢« <code>tsconfig.json</code> è‡ªåŠ¨åŠ å…¥çš„ã€‚ å®ƒä¸ä¼šæ¶‰åŠåˆ°ä¸Šé¢è®¨è®ºçš„æ¨¡å—è§£æã€‚ å¦‚æœç¼–è¯‘å™¨è¯†åˆ«å‡ºä¸€ä¸ªæ–‡ä»¶æ˜¯æ¨¡å—å¯¼å…¥ç›®æ ‡ï¼Œå®ƒå°±ä¼šåŠ åˆ°ç¼–è¯‘åˆ—è¡¨é‡Œï¼Œä¸ç®¡å®ƒæ˜¯å¦è¢«æ’é™¤äº†ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å› æ­¤ï¼Œè¦ä»ç¼–è¯‘åˆ—è¡¨ä¸­æ’é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ éœ€è¦åœ¨æ’é™¤å®ƒçš„åŒæ—¶ï¼Œè¿˜è¦æ’é™¤æ‰€æœ‰å¯¹å®ƒè¿›è¡Œ <code>import</code> æˆ–ä½¿ç”¨äº† <code>/// &lt;reference path=&quot;...&quot; /&gt;</code> æŒ‡ä»¤çš„æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h2 id=\"åä¹ã€å£°æ˜åˆå¹¶\"><a href=\"#åä¹ã€å£°æ˜åˆå¹¶\" class=\"headerlink\" title=\"åä¹ã€å£°æ˜åˆå¹¶\"></a>åä¹ã€å£°æ˜åˆå¹¶</h2><h3 id=\"19-1-ä»‹ç»\"><a href=\"#19-1-ä»‹ç»\" class=\"headerlink\" title=\"19.1 ä»‹ç»\"></a>19.1 ä»‹ç»</h3><blockquote>\n<p><code>TypeScript</code> ä¸­æœ‰äº›ç‹¬ç‰¹çš„æ¦‚å¿µå¯ä»¥åœ¨ç±»å‹å±‚é¢ä¸Šæè¿° <code>JavaScript</code> å¯¹è±¡çš„æ¨¡å‹ã€‚è¿™å…¶ä¸­å°¤å…¶ç‹¬ç‰¹çš„ä¸€ä¸ªä¾‹å­ â€œå£°æ˜åˆå¹¶â€ çš„æ¦‚å¿µã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œå°†æœ‰åŠ©äºæ“ä½œç°æœ‰çš„ <code>JavaScript</code> ä»£ç ã€‚åŒæ—¶ï¼Œä¹Ÿä¼šæœ‰åŠ©äºç†è§£æ›´å¤šé«˜çº§æŠ½è±¡çš„æ¦‚å¿µã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹æœ¬æ–‡ä»¶æ¥è®²ï¼Œâ€<code>å£°æ˜åˆå¹¶</code>â€œ æ˜¯æŒ‡ç¼–è¯‘å™¨å°†é’ˆå¯¹åŒä¸€ä¸ªåå­—çš„ä¸¤ä¸ªç‹¬ç«‹å£°æ˜åˆå¹¶ä¸ºå•ä¸€å£°æ˜ã€‚åˆå¹¶åçš„å£°æ˜åŒæ—¶æ‹¥æœ‰åŸå…ˆä¸¤ä¸ªå£°æ˜çš„ç‰¹æ€§ã€‚ä»»ä½•æ•°é‡çš„å£°æ˜éƒ½å¯è¢«åˆå¹¶ï¼›ä¸å±€é™äºä¸¤ä¸ªå£°æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"19-2-åŸºç¡€æ¦‚å¿µ\"><a href=\"#19-2-åŸºç¡€æ¦‚å¿µ\" class=\"headerlink\" title=\"19.2 åŸºç¡€æ¦‚å¿µ\"></a>19.2 åŸºç¡€æ¦‚å¿µ</h3><blockquote>\n<p><code>TypeScript</code> ä¸­çš„å£°æ˜ä¼šåˆ›å»ºä»¥ä¸‹ä¸‰ç§å®ä½“ä¹‹ä¸€ï¼š<code>å‘½åç©ºé—´</code>ï¼Œ<code>ç±»å‹</code> æˆ– <code>å€¼</code>ã€‚åˆ›å»ºå‘½åç©ºé—´çš„å£°æ˜ä¼šæ–°å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒåŒ…å«äº†ç”¨(.)ç¬¦å·æ¥è®¿é—®æ—¶ä½¿ç”¨çš„åå­—ã€‚åˆ›å»ºç±»å‹çš„å£°æ˜æ˜¯ï¼šç”¨å£°æ˜çš„æ¨¡å‹åˆ›å»ºä¸€ä¸ªç±»å‹å¹¶ç»‘å®šåˆ°ç»™å®šçš„åå­—ä¸Šã€‚<br>æœ€åï¼Œåˆ›å»ºå€¼çš„å£°æ˜ä¼šåˆ›å»ºåœ¨ <code>JavaScript</code> è¾“å‡ºä¸­çœ‹åˆ°çš„å€¼ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Declaration Type</th>\n<th align=\"left\">Namespace</th>\n<th align=\"left\">Type</th>\n<th align=\"left\">Value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><code>Namespace</code></td>\n<td align=\"left\">X</td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Class</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Enum</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Interface</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>Type Alias</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>Function</code></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Variable</code></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>ç†è§£æ¯ä¸ªå£°æ˜åˆ›å»ºäº†ä»€ä¹ˆï¼Œæœ‰åŠ©äºç†è§£å½“å£°æ˜åˆå¹¶æ—¶ï¼Œæœ‰å“ªäº›ä¸œè¥¿è¢«åˆå¹¶äº†ã€‚</p>\n</blockquote>\n<h3 id=\"19-3-åˆå¹¶æ¥å£\"><a href=\"#19-3-åˆå¹¶æ¥å£\" class=\"headerlink\" title=\"19.3 åˆå¹¶æ¥å£\"></a>19.3 åˆå¹¶æ¥å£</h3><blockquote>\n<p>æœ€ç®€å•æœ€å¸¸è§çš„å£°æ˜åˆå¹¶ç±»å‹æ˜¯æ¥å£åˆå¹¶ã€‚ä»æ ¹æœ¬ä¸Šè¯´ï¼Œåˆå¹¶çš„æœºåˆ¶æ˜¯æŠŠåŒæ–¹çš„æˆå‘˜æ”¾åˆ°ä¸€ä¸ªåŒåçš„æ¥å£é‡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Box &#123;</span><br><span class=\"line\">  height: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  width: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Box &#123;</span><br><span class=\"line\">  scale: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> box: Box = &#123; <span class=\"attr\">height</span>: <span class=\"number\">5</span>, <span class=\"attr\">width</span>: <span class=\"number\">6</span>, <span class=\"attr\">scale</span>: <span class=\"number\">10</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¥å£çš„éå‡½æ•°æˆå‘˜åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚å¦‚æœå®ƒä»¬ä¸æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå®ƒä»¬å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ã€‚å¦‚æœä¸¤ä¸ªæ¥å£ä¸­åŒæ—¶å£°æ˜äº†åŒåçš„éå‡½æ•°æˆå‘˜ä¸”å®ƒä»¬çš„ç±»å‹ä¸åŒï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºå‡½æ•°æˆå‘˜ï¼Œæ¯ä¸ªåŒåå‡½æ•°å£°æ˜éƒ½ä¼šè¢«å½“æˆè¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªé‡è½½ã€‚åŒæ—¶éœ€è¦æ³¨æ„ï¼Œå½“æ¥å£ <code>A</code> ä¸åæ¥çš„æ¥å£ <code>A</code> åˆå¹¶æ—¶ï¼Œåé¢çš„æ¥å£å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Animal): Animal;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Sheep): Sheep;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Dog): Dog;</span><br><span class=\"line\">  clone(animal: Cat): Cat;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è¿™ä¸‰ä¸ªæ¥å£åˆå¹¶æˆä¸€ä¸ªå£°æ˜ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Dog): Dog;</span><br><span class=\"line\">  clone(animal: Cat): Cat;</span><br><span class=\"line\">  clone(animal: Sheep): Sheep;</span><br><span class=\"line\">  clone(animal: Animal): Animal;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„æ¯ç»„æ¥å£é‡Œçš„å£°æ˜é¡ºåºä¿æŒä¸å˜ï¼Œä½†å„ç»„æ¥å£ä¹‹é—´çš„é¡ºåºæ˜¯åæ¥çš„æ¥å£é‡è½½å‡ºç°åœ¨é å‰çš„ä½ç½®ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è¿™ä¸ªè§„åˆ™æœ‰ä¸€ä¸ªä¾‹å¤–æ˜¯å½“å‡ºç°ç‰¹æ®Šçš„å‡½æ•°ç­¾åæ—¶ã€‚å¦‚æœç­¾åé‡Œæœ‰ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯å•ä¸€çš„å­—ç¬¦ä¸²å­—é¢é‡(æ¯”å¦‚ï¼Œä¸æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„è”åˆç±»å‹)ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«æå‡åˆ°é‡è½½åˆ—è¡¨çš„æœ€é¡¶ç«¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯”å¦‚ï¼Œä¸‹é¢çš„æ¥å£ä¼šåˆå¹¶åˆ°ä¸€èµ·</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">any</span>): ELement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;div&quot;</span>): HTMLDivElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;span&quot;</span>): HTMLSpanElement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">string</span>): HTMLElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;canvas&quot;</span>): HTMLCanvasElement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// åˆå¹¶åçš„ Document å°†ä¼šåƒä¸‹é¢è¿™æ ·:</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;canvas&quot;</span>): HTMLCanvasElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;div&quot;</span>): HTMLDivElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;span&quot;</span>): HTMLSpanElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">string</span>): HTMLElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">any</span>): Element;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"19-4-åˆå¹¶å‘½åç©ºé—´\"><a href=\"#19-4-åˆå¹¶å‘½åç©ºé—´\" class=\"headerlink\" title=\"19.4 åˆå¹¶å‘½åç©ºé—´\"></a>19.4 åˆå¹¶å‘½åç©ºé—´</h3><ol>\n<li>ä¸æ¥å£ç›¸ä¼¼ï¼ŒåŒåçš„å‘½åç©ºé—´ä¹Ÿä¼šåˆå¹¶å…¶æˆå‘˜ã€‚å‘½åç©ºé—´ä¼šåˆ›å»ºå‡ºå‘½åç©ºé—´å’Œå€¼ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸¤è€…éƒ½æ˜¯æ€ä¹ˆåˆå¹¶çš„ã€‚</li>\n<li>å¯¹äºå‘½åç©ºé—´çš„åˆå¹¶ï¼Œæ¨¡å—å¯¼å‡ºçš„åŒåæ¥å£è¿›è¡Œåˆå¹¶ï¼Œæ„æˆå•ä¸€å‘½åç©ºé—´å†…å«åˆå¹¶åçš„æ¥å£ã€‚</li>\n<li>å¯¹äºå‘½åç©ºé—´é‡Œå€¼çš„åˆå¹¶ï¼Œå¦‚æœå½“å‰å·²ç»å­˜åœ¨ç»™å®šåå­—çš„å‘½åç©ºé—´ï¼Œé‚£ä¹ˆåæ¥çš„å‘½åç©ºé—´çš„å¯¼å‡ºæˆå‘˜ä¼šè¢«åŠ åˆ°å·²ç»å­˜åœ¨çš„é‚£ä¸ªæ¨¡å—é‡Œã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Animals å£°æ˜åˆå¹¶ç¤ºä¾‹ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animals &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Zebra</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animals &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Legged &#123;</span><br><span class=\"line\">    numberOfLegs: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animals &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Legged &#123;</span><br><span class=\"line\">    numberOfLegs: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Zebra</span> </span>&#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é™¤äº†è¿™äº›åˆå¹¶å¤–ï¼Œä½ è¿˜éœ€è¦äº†è§£éå¯¼å‡ºæˆå‘˜æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚éå¯¼å‡ºæˆå‘˜ä»…åœ¨å…¶åŸæœ‰çš„(åˆå¹¶å‰çš„)å‘½åç©ºé—´å†…å¯è§ã€‚è¿™å°±æ˜¯è¯´åˆå¹¶ä¹‹åï¼Œä»å…¶å®ƒå‘½åç©ºé—´åˆå¹¶è¿›æ¥çš„æˆå‘˜æ— æ³•è®¿é—®éå¯¼å‡ºæˆå‘˜ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æä¾›äº†æ¸…æ™°çš„è¯´æ˜ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Animal &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> haveMuscles = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">animalsHaveMuscles</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> haveMuscles;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animal &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doAnimalsHaveMuscles</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> haveMuscles; <span class=\"comment\">// // Error, because haveMuscles is not accessible here</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› ä¸º <code>haveMuscles</code> å¹¶æ²¡æœ‰å¯¼å‡ºï¼Œåªæœ‰ <code>animalsHaveMuscles</code> å‡½æ•°å…±äº«äº†åŸå§‹æœªåˆå¹¶çš„å‘½åç©ºé—´å¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡ã€‚<br><code>doAnimalsHaveMuscles</code> å‡½æ•°è™½æ˜¯åˆå¹¶å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯è®¿é—®ä¸äº†æœªå¯¼å‡ºçš„æˆå‘˜ã€‚</p>\n</blockquote>\n<h3 id=\"19-5-å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\"><a href=\"#19-5-å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\" class=\"headerlink\" title=\"19.5 å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\"></a>19.5 å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶</h3><blockquote>\n<p>å‘½åç©ºé—´å¯ä»¥ä¸å…¶å®ƒç±»å‹çš„å£°æ˜åˆå¹¶ã€‚åªè¦å‘½åç©ºé—´çš„å®šä¹‰ç¬¦åˆå°†è¦åˆå¹¶ç±»å‹çš„å®šä¹‰ã€‚åˆå¹¶ç»“æœåŒ…å«ä¸¤è€…çš„å£°æ˜ç±»å‹ã€‚<br><code>TypeScript</code> ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å»å®ç°ä¸€äº› <code>JavaScript</code> é‡Œçš„è®¾è®¡æ¨¡å¼ã€‚</p>\n</blockquote>\n<h4 id=\"19-5-1-åˆå¹¶å‘½åç©ºé—´å’Œç±»\"><a href=\"#19-5-1-åˆå¹¶å‘½åç©ºé—´å’Œç±»\" class=\"headerlink\" title=\"19.5.1 åˆå¹¶å‘½åç©ºé—´å’Œç±»\"></a>19.5.1 åˆå¹¶å‘½åç©ºé—´å’Œç±»</h4><blockquote>\n<p>è¿™è®©æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºå†…éƒ¨ç±»</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Album</span> </span>&#123;</span><br><span class=\"line\">  label: Album.AlbumLabel;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Album &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AlbumLabel</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>åˆå¹¶è§„åˆ™</code> ä¸ä¸Šé¢ <code>åˆå¹¶å‘½åç©ºé—´</code> å°èŠ‚é‡Œè®²çš„è§„åˆ™ä¸€è‡´ï¼Œæˆ‘ä»¬å¿…é¡»å¯¼å‡º <code>AlbumLabel</code> ç±»ï¼Œå¥½è®©åˆå¹¶çš„ç±»èƒ½è®¿é—®ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>åˆå¹¶ç»“æœ</code>æ˜¯ä¸€ä¸ªç±»å¹¶å¸¦æœ‰ä¸€ä¸ªå†…éƒ¨ç±»ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ä¸ºç±»å¢åŠ ä¸€äº›é™æ€å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é™¤äº†å†…éƒ¨ç±»çš„æ¨¡å¼ï¼Œä½ åœ¨ <code>JavaScript</code> é‡Œï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ç¨åæ‰©å±•å®ƒå¢åŠ ä¸€äº›å±æ€§ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚<code>TypeScript</code> ä½¿ç”¨å£°æ˜åˆå¹¶æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„å¹¶ä¿è¯ç±»å‹å®‰å…¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildLabel</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> buildLabel.prefix + name + buildLabel.suffix;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> buildLabel &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">let</span> suffix = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">let</span> prefix = <span class=\"string\">&quot;Hello, &quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(buildLabel(<span class=\"string\">&quot;Sam Smith&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›¸ä¼¼çš„ï¼Œå‘½åç©ºé—´å¯ä»¥ç”¨æ¥æ‰©å±•æšä¸¾ç±»å‹</span></span><br><span class=\"line\"><span class=\"built_in\">enum</span> Color &#123;</span><br><span class=\"line\">  red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  green = <span class=\"number\">2</span>,</span><br><span class=\"line\">  blue = <span class=\"number\">4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Color &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mixColor</span>(<span class=\"params\">colorName: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;yellow&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.red + Color.green;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;white&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.red + Color.green + Color.blue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;magenta&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.red + Color.blue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;cyan&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.green + Color.blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"19-5-2-éæ³•çš„åˆå¹¶\"><a href=\"#19-5-2-éæ³•çš„åˆå¹¶\" class=\"headerlink\" title=\"19.5.2 éæ³•çš„åˆå¹¶\"></a>19.5.2 éæ³•çš„åˆå¹¶</h4><blockquote>\n<p><code>TypeScript</code> å¹¶éå…è®¸æ‰€æœ‰çš„åˆå¹¶ã€‚ç›®å‰ï¼Œç±»ä¸èƒ½ä¸å…¶å®ƒç±»æˆ–å˜é‡åˆå¹¶ã€‚æƒ³è¦äº†è§£å¦‚ä½•æ¨¡ä»¿ç±»çš„åˆå¹¶ï¼Œè¯·å‚ç…§ <a href=\"https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/Mixins%E6%B7%B7%E5%85%A5/README.md\">TypeScript æ··å…¥</a>ã€‚</p>\n</blockquote>\n<h3 id=\"19-6-æ¨¡å—æ‰©å±•\"><a href=\"#19-6-æ¨¡å—æ‰©å±•\" class=\"headerlink\" title=\"19.6 æ¨¡å—æ‰©å±•\"></a>19.6 æ¨¡å—æ‰©å±•</h3><blockquote>\n<p>è™½ç„¶ <code>JavaScript</code> ä¸æ”¯æŒåˆå¹¶ï¼Œä½†ä½ å¯ä»¥ä¸ºå¯¼å…¥çš„å¯¹è±¡æ‰“è¡¥ä¸ä»¥æ›´æ–°å®ƒä»¬ã€‚</p>\n</blockquote>\n<ul>\n<li>è®©æˆ‘ä»¬è€ƒå¯Ÿä¸€ä¸‹è¿™ä¸ªç©å…·æ€§çš„ç¤ºä¾‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// observable.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observable</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... implementation left as an exercise for the reader...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// map.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./observable&quot;</span>;</span><br><span class=\"line\">Observable.prototype.map = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... another exercise for the reader</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒä¹Ÿå¯ä»¥å¾ˆå¥½åœ°å·¥ä½œåœ¨ <code>TypeScript</code> ä¸­ï¼Œä½†ç¼–è¯‘å™¨å¯¹ <code>Observable.prototype.map</code> ä¸€æ— æ‰€çŸ¥ã€‚ä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ¨¡å—æ¥å°†å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// observable.ts stays the same</span></span><br><span class=\"line\"><span class=\"comment\">// map.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./observable&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;./observable&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> Observable&lt;T&gt; &#123;</span><br><span class=\"line\">    map&lt;U&gt;(f: <span class=\"function\">(<span class=\"params\">x: T</span>) =&gt;</span> U): Observable&lt;U&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Observable.prototype.map = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">f</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... another exercise for the reader</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// consumer.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./observable&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./map&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> o: Observable&lt;<span class=\"built_in\">number</span>&gt;;</span><br><span class=\"line\">o.map(<span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x.toFixed());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¨¡å—åçš„è§£æå’Œç”¨ <code>import / export</code> è§£ææ¨¡å—æ ‡è¯†ç¬¦çš„æ–¹å¼æ˜¯ä¸€è‡´çš„ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ <a href=\"https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/%E6%A8%A1%E5%9D%97/README.md\">Modules</a>ã€‚å½“è¿™äº›å£°æ˜åœ¨æ‰©å±•ä¸­åˆå¹¶æ—¶ï¼Œå°±å¥½åƒåœ¨åŸå§‹ä½ç½®è¢«å£°æ˜äº†ä¸€æ ·ã€‚ ä½†æ˜¯ï¼Œä½ ä¸èƒ½åœ¨æ‰©å±•ä¸­å£°æ˜æ–°çš„é¡¶çº§å£°æ˜(ä»…å¯ä»¥æ‰©å±•æ¨¡å—ä¸­å·²ç»å­˜åœ¨çš„å£°æ˜)ã€‚</p>\n</blockquote>\n<h3 id=\"19-7-å…¨å±€æ‰©å±•\"><a href=\"#19-7-å…¨å±€æ‰©å±•\" class=\"headerlink\" title=\"19.7 å…¨å±€æ‰©å±•\"></a>19.7 å…¨å±€æ‰©å±•</h3><blockquote>\n<p>ä½ ä¹Ÿå¯ä»¥åœ¨æ¨¡å—å†…éƒ¨æ·»åŠ å£°æ˜åˆ°å…¨å±€ä½œç”¨åŸŸä¸­</p>\n</blockquote>\n<blockquote>\n<p><code>observable.ts</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observable</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... still no implementation ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">global</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> Array&lt;T&gt; &#123;</span><br><span class=\"line\">    toObservable(): Observable&lt;T&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.toObservable = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…¨å±€æ‰©å±•å’Œä¸æ¨¡å—æ‰©å±•çš„è¡Œä¸ºå’Œé™åˆ¶æ˜¯ç›¸åŒçš„ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒåã€JSX\"><a href=\"#äºŒåã€JSX\" class=\"headerlink\" title=\"äºŒåã€JSX\"></a>äºŒåã€JSX</h2><h3 id=\"20-1-ä»‹ç»\"><a href=\"#20-1-ä»‹ç»\" class=\"headerlink\" title=\"20.1 ä»‹ç»\"></a>20.1 ä»‹ç»</h3><blockquote>\n<p><code>JSX</code> æ˜¯ä¸€ç§åµŒå…¥å¼çš„ç±»ä¼¼ <code>XML</code> çš„è¯­æ³•ã€‚å®ƒå¯ä»¥è¢«è½¬æ¢æˆåˆæ³•çš„ <code>JavaScript</code>ï¼Œå°½ç®¡è½¬æ¢çš„è¯­ä¹‰æ˜¯æ ¹æ®ä¸åŒçš„å®ç°è€Œå®šçš„ã€‚<br><code>JSX</code> å›  <code>React</code> æ¡†æ¶è€Œæµè¡Œï¼Œä½†ä¹Ÿå­˜åœ¨å…¶å®ƒçš„å®ç°ã€‚<code>TypeScript</code> æ”¯æŒå†…åµŒï¼Œç±»å‹æ£€æŸ¥ä»¥åŠå°† <code>JSX</code> ç›´æ¥ç¼–è¯‘ä¸º JavaScriptã€‚</p>\n</blockquote>\n<h3 id=\"20-2-åŸºæœ¬ç”¨æ³•\"><a href=\"#20-2-åŸºæœ¬ç”¨æ³•\" class=\"headerlink\" title=\"20.2 åŸºæœ¬ç”¨æ³•\"></a>20.2 åŸºæœ¬ç”¨æ³•</h3><ul>\n<li>æƒ³è¦ä½¿ç”¨ <code>JSX</code> å¿…é¡»åšä¸¤ä»¶äº‹ï¼š</li>\n</ul>\n<blockquote>\n<ol>\n<li>ç»™æ–‡ä»¶ä¸€ä¸ª <code>.tsx</code> æ‰©å±•å</li>\n<li>å¯ç”¨ <code>jsx</code> é€‰é¡¹</li>\n</ol>\n</blockquote>\n<ul>\n<li><code>TypeScript</code> å…·æœ‰ä¸‰ç§ <code>JSX</code> æ¨¡å¼ï¼š<code>preserve</code>, <code>react</code> å’Œ <code>react-native</code>ã€‚è¿™äº›æ¨¡å¼åªåœ¨ä»£ç ç”Ÿæˆé˜¶æ®µèµ·ä½œç”¨ - ç±»å‹æ£€æŸ¥å¹¶ä¸å—å½±å“ã€‚</li>\n</ul>\n<blockquote>\n<ol>\n<li>åœ¨ <code>preserve</code> æ¨¡å¼ä¸‹ç”Ÿæˆä»£ç ä¸­ä¼šä¿ç•™ <code>JSX</code> ä»¥ä¾›åç»­çš„è½¬æ¢æ“ä½œä½¿ç”¨( <code>æ¯”å¦‚ï¼šBabel</code> )ã€‚å¦å¤–ï¼Œè¾“å‡ºæ–‡ä»¶ä¼šå¸¦æœ‰ <code>.jsx</code> æ‰©å±•åã€‚</li>\n<li><code>react</code> æ¨¡å¼ä¼šç”Ÿæˆ <code>React.createElement</code>ï¼Œåœ¨ä½¿ç”¨å‰ä¸éœ€è¦å†è¿›è¡Œè½¬æ¢æ“ä½œäº†ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åä¸º <code>.js</code>ã€‚</li>\n<li><code>react-native</code> ç›¸å½“äº <code>preserve</code>ï¼Œå®ƒä¹Ÿä¿ç•™äº†æ‰€æœ‰çš„ <code>JSX</code>ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åæ˜¯ <code>.js</code>ã€‚</li>\n</ol>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">æ¨¡å¼</th>\n<th align=\"left\">è¾“å…¥</th>\n<th align=\"left\">è¾“å‡º</th>\n<th align=\"left\">è¾“å‡ºæ–‡ä»¶æ‰©å±•å</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">preserve</td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>.js</code></td>\n</tr>\n<tr>\n<td align=\"left\">react</td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>React.createElement(&quot;div&quot;)</code></td>\n<td align=\"left\"><code>.js</code></td>\n</tr>\n<tr>\n<td align=\"left\">react-native</td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>.js</code></td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>ä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ <code>--jsx</code> æ ‡è®°æˆ– <code>tsconfig.json</code> é‡Œçš„é€‰é¡¹æ¥æŒ‡å®šæ¨¡å¼ã€‚<br>æ³¨æ„ï¼š<code>React</code> æ ‡è¯†ç¬¦æ˜¯å†™æ­»çš„ç¡¬ç¼–ç ï¼Œæ‰€ä»¥ä½ å¿…é¡»ä¿è¯ <code>React</code>ï¼ˆå¤§å†™çš„<code>R</code>ï¼‰æ˜¯å¯ç”¨çš„ã€‚</p>\n</blockquote>\n<h3 id=\"20-3-as-æ“ä½œç¬¦\"><a href=\"#20-3-as-æ“ä½œç¬¦\" class=\"headerlink\" title=\"20.3 as æ“ä½œç¬¦\"></a>20.3 as æ“ä½œç¬¦</h3><blockquote>\n<p>å›æƒ³ä¸€ä¸‹æ€ä¹ˆå†™ç±»å‹æ–­è¨€</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> foo = &lt;foo&gt;bar;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œæ–­è¨€ <code>bar</code> å˜é‡æ˜¯ <code>foo</code> ç±»å‹çš„ã€‚ å› ä¸º <code>TypeScript</code> ä¹Ÿä½¿ç”¨å°–æ‹¬å·æ¥è¡¨ç¤ºç±»å‹æ–­è¨€ï¼Œåœ¨ç»“åˆ <code>JSX</code> çš„è¯­æ³•åå°†å¸¦æ¥è§£æä¸Šçš„å›°éš¾ã€‚å› æ­¤ï¼Œ<code>TypeScript</code> åœ¨ <code>.tsx</code> æ–‡ä»¶é‡Œç¦ç”¨äº†ä½¿ç”¨å°–æ‹¬å·çš„ç±»å‹æ–­è¨€ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç”±äºä¸èƒ½å¤Ÿåœ¨ <code>.tsx</code> æ–‡ä»¶é‡Œä½¿ç”¨ä¸Šè¿°è¯­æ³•ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹æ–­è¨€æ“ä½œç¬¦ï¼š<code>as</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨ <code>as</code> æ“ä½œç¬¦æ”¹å†™ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> foo = bar <span class=\"keyword\">as</span> foo;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>as</code> æ“ä½œç¬¦åœ¨ <code>.ts</code> å’Œ <code>.tsx</code> é‡Œéƒ½å¯ç”¨ï¼Œå¹¶ä¸”ä¸å°–æ‹¬å·ç±»å‹æ–­è¨€è¡Œä¸ºæ˜¯ç­‰ä»·çš„ã€‚</p>\n</blockquote>\n<h3 id=\"20-4-ç±»å‹æ£€æŸ¥\"><a href=\"#20-4-ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"20.4 ç±»å‹æ£€æŸ¥\"></a>20.4 ç±»å‹æ£€æŸ¥</h3><blockquote>\n<p>ä¸ºäº†ç†è§£ <code>JSX</code> çš„ç±»å‹æ£€æŸ¥ï¼Œä½ å¿…é¡»é¦–å…ˆç†è§£ <code>å›ºæœ‰å…ƒç´ </code> ä¸ <code>åŸºäºå€¼çš„å…ƒç´ </code> ä¹‹é—´çš„åŒºåˆ«ã€‚å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª <code>JSX</code> è¡¨è¾¾å¼ <code>&lt;expr /&gt;</code>ï¼Œ<code>expr</code> å¯èƒ½å¼•ç”¨ç¯å¢ƒè‡ªå¸¦çš„æŸäº›ä¸œè¥¿(æ¯”å¦‚ï¼Œåœ¨ <code>DOM</code> ç¯å¢ƒé‡Œçš„ <code>div</code> æˆ– <code>span</code>)æˆ–è€…æ˜¯ä½ è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚è¿™æ˜¯éå¸¸é‡è¦çš„ã€‚åŸå› æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š</p>\n</blockquote>\n<ol>\n<li>å¯¹äº <code>React</code>ï¼Œå›ºæœ‰å…ƒç´ ä¼šç”Ÿæˆå­—ç¬¦ä¸² (<code>React.createElement(&quot;div&quot;)</code> )ï¼Œç„¶åç”±ä½ è‡ªå®šä¹‰çš„ç»„ä»¶å´ä¸ä¼šç”Ÿæˆ( <code>React.createElement(MyComponent)</code>)ã€‚</li>\n<li>ä¼ å…¥ <code>JSX</code> å…ƒç´ é‡Œçš„å±æ€§ç±»å‹çš„æŸ¥æ‰¾æ–¹å¼ä¸åŒã€‚å›ºæœ‰å…ƒç´ æ€»ä»¥ä¸€ä¸ªå°å†™å­—æ¯å¼€å¤´ï¼ŒåŸºäºå€¼çš„å…ƒç´ æ€»æ˜¯ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´ã€‚</li>\n</ol>\n<h4 id=\"20-4-1-å›ºæœ‰å…ƒç´ \"><a href=\"#20-4-1-å›ºæœ‰å…ƒç´ \" class=\"headerlink\" title=\"20.4.1 å›ºæœ‰å…ƒç´ \"></a>20.4.1 å›ºæœ‰å…ƒç´ </h4><blockquote>\n<p>å›ºæœ‰å…ƒç´ ä½¿ç”¨ç‰¹æ®Šçš„æ¥å£ <code>JSX.IntrinsicElements</code> æ¥æŸ¥æ‰¾ã€‚é»˜è®¤åœ°ï¼Œå¦‚æœè¿™ä¸ªæ¥å£æ²¡æœ‰æŒ‡å®šï¼Œä¼šå…¨éƒ¨é€šè¿‡ï¼Œä¸å¯¹å›ºæœ‰å…ƒç´ è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ç„¶è€Œï¼Œå¦‚æœè¿™ä¸ªæ¥å£å­˜åœ¨ï¼Œé‚£ä¹ˆå›ºæœ‰å…ƒç´ çš„åå­—éœ€è¦åœ¨ <code>JSX.IntrinsicElements</code> æ¥å£çš„å±æ€§é‡ŒæŸ¥æ‰¾ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        foo: any;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;foo /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;bar /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œ``æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯<code>ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæ²¡åœ¨ JSX.IntrinsicElements</code> é‡ŒæŒ‡å®šã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šä½ ä¹Ÿå¯ä»¥åœ¨ <code>JSX.IntrinsicElements</code> ä¸ŠæŒ‡å®šä¸€ä¸ªç”¨æ¥æ•è·æ‰€æœ‰å­—ç¬¦ä¸²ç´¢å¼•ï¼š</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        [elemName: string]: any;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"20-4-2-åŸºäºå€¼çš„å…ƒç´ \"><a href=\"#20-4-2-åŸºäºå€¼çš„å…ƒç´ \" class=\"headerlink\" title=\"20.4.2 åŸºäºå€¼çš„å…ƒç´ \"></a>20.4.2 åŸºäºå€¼çš„å…ƒç´ </h4><blockquote>\n<p>åŸºäºå€¼çš„å…ƒç´ ä¼šç®€å•çš„åœ¨å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸé‡ŒæŒ‰æ ‡è¯†ç¬¦æŸ¥æ‰¾ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> MyComponent <span class=\"keyword\">from</span> <span class=\"string\">&quot;./myComponent&quot;</span>;</span><br><span class=\"line\">&lt;MyComponent /&gt; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;SomeOtherComponent /&gt; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰åŸºäºå€¼çš„å…ƒç´ ï¼š</p>\n<ol>\n<li>æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ (<code>SFC</code>)</li>\n<li>ç±»ç»„ä»¶</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>ç”±äºè¿™ä¸¤ç§åŸºäºå€¼çš„å…ƒç´ åœ¨ <code>JSX</code> è¡¨è¾¾å¼é‡Œæ— æ³•åŒºåˆ†ï¼Œå› æ­¤ <code>TypeScript</code> é¦–å…ˆä¼šå°è¯•å°†è¡¨è¾¾å¼ä½œä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶è¿›è¡Œè§£æã€‚å¦‚æœè§£ææˆåŠŸï¼Œé‚£ä¹ˆ <code>TypeScript</code> å°±å®Œæˆäº†è¡¨è¾¾å¼åˆ°å…¶å£°æ˜çš„è§£ææ“ä½œã€‚å¦‚æœæŒ‰ç…§æ— çŠ¶æ€å‡½æ•°ç»„ä»¶è§£æå¤±è´¥ï¼Œé‚£ä¹ˆ <code>TypeScript</code> ä¼šç»§ç»­å°è¯•ä»¥ç±»ç»„ä»¶çš„å½¢å¼è¿›è¡Œè§£æã€‚å¦‚æœä¾æ—§å¤±è´¥ï¼Œé‚£ä¹ˆå°†è¾“å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<h5 id=\"1-æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\"><a href=\"#1-æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\" class=\"headerlink\" title=\"(1) æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\"></a>(1) æ— çŠ¶æ€å‡½æ•°ç»„ä»¶</h5><blockquote>\n<p>æ­£å¦‚å…¶åï¼Œç»„ä»¶è¢«å®šä¹‰æˆ <code>JavaScript</code> å‡½æ•°ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code> å¯¹è±¡ã€‚<code>TypeScript</code> ä¼šå¼ºåˆ¶å®ƒçš„è¿”å›å€¼å¯ä»¥èµ‹å€¼ç»™ <code>JSX.Element</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interface FooProp &#123;</span><br><span class=\"line\">    name: string;</span><br><span class=\"line\">    X: number;</span><br><span class=\"line\">    Y: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">declare <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AnotherComponent</span>(<span class=\"params\">prop: &#123; name: string &#125;</span>)</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ComponentFoo</span>(<span class=\"params\">prop: FooProp</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">AnotherComponent</span> <span class=\"attr\">name</span>=<span class=\"string\">&#123;prop.name&#125;</span> /&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = <span class=\"function\">(<span class=\"params\">prop: &#123; value: string &#125;, context: &#123; color: string &#125;</span>) =&gt;</span> &lt;button&gt;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”±äºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶æ˜¯ç®€å•çš„ <code>JavaScript</code> å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å‡½æ•°é‡è½½ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interface ClickableProps &#123;</span><br><span class=\"line\">    children: JSX.Element[] | JSX.Element;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface HomeProps <span class=\"keyword\">extends</span> ClickableProps &#123;</span><br><span class=\"line\">    home: JSX.Element;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface SlideProps <span class=\"keyword\">extends</span> ClickableProps &#123;</span><br><span class=\"line\">    side: JSX.Element | string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MainButton</span>(<span class=\"params\">prop: HomeProps</span>): <span class=\"title\">JSX</span>.<span class=\"title\">Element</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MainButton</span>(<span class=\"params\">prop: SlideProps</span>): <span class=\"title\">JSX</span>.<span class=\"title\">Element</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-ç±»ç»„ä»¶\"><a href=\"#2-ç±»ç»„ä»¶\" class=\"headerlink\" title=\"(2) ç±»ç»„ä»¶\"></a>(2) ç±»ç»„ä»¶</h5><blockquote>\n<ol>\n<li>æˆ‘ä»¬å¯ä»¥å®šä¹‰ç±»ç»„ä»¶çš„ç±»å‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é¦–å…ˆæœ€å¥½å¼„æ‡‚ä¸¤ä¸ªæ–°çš„æœ¯è¯­ï¼š<code>å…ƒç´ ç±»çš„ç±»å‹</code> å’Œ <code>å…ƒç´ å®ä¾‹çš„ç±»å‹</code>ã€‚</li>\n<li>ç°åœ¨æœ‰ <code>&lt;Expr /&gt;</code>ï¼Œå…ƒç´ ç±»çš„ç±»å‹ä¸º <code>Expr</code> çš„ç±»å‹ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå¦‚æœ <code>MyComponent</code> æ˜¯ <code>ES6</code> çš„ç±»ï¼Œé‚£ä¹ˆç±»ç±»å‹å°±æ˜¯ç±»çš„æ„é€ å‡½æ•°å’Œé™æ€éƒ¨åˆ†ã€‚å¦‚æœ <code>MyComponent</code> æ˜¯ä¸ªå·¥å‚å‡½æ•°ï¼Œç±»ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°ã€‚</li>\n<li>ä¸€æ—¦å»ºç«‹èµ·äº†ç±»ç±»å‹ï¼Œå®ä¾‹ç±»å‹ç”±æ„é€ å™¨æˆ–è°ƒç”¨ç­¾å(å¦‚æœå­˜åœ¨çš„è¯)çš„è¿”å›å€¼çš„è”åˆæ„æˆã€‚å†æ¬¡è¯´æ˜ï¼Œåœ¨ <code>ES6</code> ç±»çš„æƒ…å†µä¸‹ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªç±»çš„å®ä¾‹çš„ç±»å‹ï¼Œå¹¶ä¸”å¦‚æœæ˜¯å·¥å‚å‡½æ•°ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°è¿”å›å€¼ç±»å‹ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨æ„é€ ç­¾å</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myComponent = <span class=\"keyword\">new</span> MyComponent();</span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ ç±»çš„ç±»å‹ =&gt; MyComponent;</span></span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ å®ä¾‹çš„ç±»å‹ =&gt; &#123; render: () =&gt; void &#125;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyFactoryFunction</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    render: <span class=\"function\">() =&gt;</span> &#123;&#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨è°ƒç”¨ç­¾å</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myComponent = MyFactoryFunction();</span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ ç±»çš„ç±»å‹ =&gt; FactoryFunction</span></span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ å®ä¾‹çš„ç±»å‹ =&gt; &#123; render: () =&gt; void &#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…ƒç´ çš„å®ä¾‹ç±»å‹å¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå¿…é¡»èµ‹å€¼ç»™ <code>JSX.ElementClass</code> æˆ– <code>æŠ›å‡ºä¸€ä¸ªé”™è¯¯</code>ã€‚é»˜è®¤çš„ <code>JSX.ElementClass</code> ä¸º <code>&#123;&#125;</code>ï¼Œä½†æ˜¯å®ƒå¯ä»¥è¢«æ‰©å±•ç”¨æ¥é™åˆ¶ <code>JSX</code> çš„ç±»å‹ä»¥ç¬¦åˆç›¸åº”çš„æ¥å£ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface ElementClass &#123;</span><br><span class=\"line\">        render: any</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyFactoryFunction</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        render: <span class=\"function\">() =&gt;</span> &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;MyComponent /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;MyFactoryFunction /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NotAValidComponent</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">NotAValidFactoryFunction</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;NotAValidComponent /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br><span class=\"line\">&lt;NotAValidFactoryFunction /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-5-å±æ€§ç±»å‹æ£€æŸ¥\"><a href=\"#20-5-å±æ€§ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"20.5 å±æ€§ç±»å‹æ£€æŸ¥\"></a>20.5 å±æ€§ç±»å‹æ£€æŸ¥</h3><ol>\n<li>å±æ€§ç±»å‹æ£€æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯ ç¡®å®šå…ƒç´ ç±»å‹ã€‚è¿™åœ¨ <code>å›ºæœ‰å…ƒç´ </code> å’Œ <code>åŸºäºå€¼çš„å…ƒç´ </code> ä¹‹é—´ç¨æœ‰ä¸åŒã€‚</li>\n<li>å¯¹äºå›ºæœ‰å…ƒç´ ï¼Œè¿™æ˜¯ <code>JSX.IntrinsicElements</code> å±æ€§çš„ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        foo: &#123;</span><br><span class=\"line\">            bar?: boolean;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// `foo` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `&#123;bar?: boolean&#125;`</span></span><br><span class=\"line\">&lt;foo bar /&gt;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>å¯¹äºåŸºäºå€¼çš„å…ƒç´ ï¼Œå°±ç¨å¾®å¤æ‚äº›ã€‚å®ƒå–å†³äºå…ˆå‰ç¡®å®šçš„åœ¨å…ƒç´ å®ä¾‹ç±»å‹ä¸Šçš„æŸä¸ªå±æ€§çš„ç±»å‹ã€‚è‡³äºè¯¥ä½¿ç”¨å“ªä¸ªå±æ€§æ¥ç¡®å®šç±»å‹å–å†³äº <code>JSX.ElementAttributesProperty</code>ã€‚å®ƒåº”è¯¥ä½¿ç”¨å•ä¸€çš„å±æ€§æ¥å®šä¹‰ã€‚è¿™ä¸ªå±æ€§åä¹‹åä¼šè¢«ä½¿ç”¨ã€‚<code>TypeScript 2.8</code>ï¼Œå¦‚æœæœªæŒ‡å®š <code>JSX.ElementAttributesProperty</code>ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ <code>ç±»å…ƒç´ æ„é€ å‡½æ•°</code> æˆ– <code>SFC</code> è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">  interface ElementAttributesProperty &#123;</span><br><span class=\"line\">      props; <span class=\"comment\">// æŒ‡å®šç”¨æ¥ä½¿ç”¨çš„å±æ€§å</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// åœ¨å…ƒç´ å®ä¾‹ä¸ŠæŒ‡å®šç±»å‹</span></span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">      foo?: string;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// `MyComponent` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `&#123;foo?: string&#125;`</span></span><br><span class=\"line\">&lt;MyComponent foo=<span class=\"string\">&quot;bar&quot;</span> /&gt;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>å…ƒç´ å±æ€§ç±»å‹ç”¨äº <code>JSX</code> é‡Œè¿›è¡Œå±æ€§çš„ç±»å‹æ£€æŸ¥ã€‚æ”¯æŒå¯é€‰å±æ€§å’Œå¿…é¡»å±æ€§</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        foo: &#123;</span><br><span class=\"line\">            requiredProp: string;</span><br><span class=\"line\">            optionalProp?: number;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> optionalProp=&#123;<span class=\"number\">0</span>&#125; /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;foo /&gt;; <span class=\"comment\">// é”™è¯¯ï¼Œç¼ºå°‘requiredProp</span></span><br><span class=\"line\">&lt;foo requiredProp=&#123;<span class=\"number\">0</span>&#125; /&gt;; <span class=\"comment\">// é”™è¯¯ï¼ŒrequiredProp åº”è¯¥æ˜¯å­—ç¬¦ä¸²</span></span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> unknownProp /&gt;; <span class=\"comment\">// é”™è¯¯ï¼ŒunknownProp å±æ€§ä¸å­˜åœ¨</span></span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> some-unknown-prop /&gt;; <span class=\"comment\">// æ­£ç¡®ï¼Œ`some-unknown-prop` ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªå±æ€§åä¸æ˜¯ä¸ªåˆæ³•çš„ <code>JS</code> æ ‡è¯†ç¬¦(åƒ <code>data-\\*</code> å±æ€§)ï¼Œå¹¶ä¸”å®ƒæ²¡å‡ºç°åœ¨å…ƒç´ å±æ€§ç±»å‹é‡Œæ—¶ä¸ä¼šå½“ä½œä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦å¤–ï¼Œ<code>JSX</code> è¿˜ä¼šä½¿ç”¨ <code>JSX.IntrinsicAttributes</code> æ¥å£æ¥æŒ‡å®šé¢å¤–çš„å±æ€§ï¼Œè¿™äº›é¢å¤–çš„å±æ€§é€šå¸¸ä¸ä¼šè¢«ç»„ä»¶çš„ <code>props</code> æˆ– <code>arguments</code> ä½¿ç”¨ - æ¯”å¦‚ <code>React</code> é‡Œçš„ <code>key</code>ã€‚è¿˜æœ‰ï¼Œ<code>JSX.IntrinsicClassAttributes&lt;T&gt;</code> æ³›å‹ç±»å‹ä¹Ÿå¯ä»¥ç”¨æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™é‡Œçš„æ³›å‹å‚æ•°è¡¨ç¤ºç±»å®ä¾‹ç±»å‹ã€‚åœ¨ <code>React</code> é‡Œï¼Œå®ƒç”¨æ¥å…è®¸ <code>Ref&lt;T&gt;</code> ç±»å‹ä¸Šçš„ <code>ref</code> å±æ€§ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™äº›æ¥å£ä¸Šçš„æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯é€‰çš„ï¼Œé™¤éä½ æƒ³è¦ç”¨æˆ·åœ¨æ¯ä¸ª <code>JSX</code> æ ‡ç­¾ä¸Šéƒ½æä¾›ä¸€äº›å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å»¶å±•æ“ä½œç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> props = &#123; <span class=\"attr\">requiredProp</span>: <span class=\"string\">&quot;bar&quot;</span> &#125;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> badProps = &#123;&#125;;</span><br><span class=\"line\">&lt;foo &#123;...badProps&#125; /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-6-å­å­™ç±»å‹æ£€æŸ¥\"><a href=\"#20-6-å­å­™ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"20.6 å­å­™ç±»å‹æ£€æŸ¥\"></a>20.6 å­å­™ç±»å‹æ£€æŸ¥</h3><blockquote>\n<p>ä» <code>TypeScript 2.3</code> å¼€å§‹ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>children</code> ç±»å‹æ£€æŸ¥ã€‚<code>children</code> æ˜¯å…ƒç´ å±æ€§(<code>attribute</code>)ç±»å‹çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§(<code>property</code>)ï¼Œå­ <code>JSXExpression</code> å°†ä¼šè¢«æ’å…¥åˆ°å±æ€§é‡Œã€‚ä¸ä½¿ç”¨ <code>JSX.ElementAttributesProperty</code> æ¥å†³å®š <code>props</code> åç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>JSX.ElementChildrenAttribute</code> æ¥å†³å®š <code>children</code> åã€‚<code>JSX.ElementChildrenAttribute</code> åº”è¯¥è¢«å£°æ˜åœ¨å•ä¸€çš„å±æ€§(<code>property</code>)é‡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">namespace</span> JSX &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> ElementChildrenAttribute &#123;</span><br><span class=\"line\">    children: &#123;&#125;; <span class=\"comment\">// specify children name to use</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚ä¸ç‰¹æ®ŠæŒ‡å®šå­å­™çš„ç±»å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>React typings</code> é‡Œçš„é»˜è®¤ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">&lt;/div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">  World</span><br><span class=\"line\">&lt;/div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CustomComp = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>props.children<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;CustomComp&gt;</span><br><span class=\"line\">  &lt;div&gt;Hello World&lt;/div&gt;</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;This is just a JS expression...&quot;</span> + <span class=\"number\">1000</span>&#125;</span><br><span class=\"line\">&lt;/CustomComp&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interface PropsType &#123;</span><br><span class=\"line\">  children: JSX.Element;</span><br><span class=\"line\">  name: string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span>&lt;<span class=\"title\">PropsType</span>, </span>&#123;&#125;&gt; &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">          &lt;h2&gt;</span><br><span class=\"line\">              &#123;<span class=\"built_in\">this</span>.props.children&#125;</span><br><span class=\"line\">          &lt;/h2&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Ok</span></span><br><span class=\"line\">&lt;Component&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class=\"line\">&lt;/Component&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error: children is of type JSX.Element not array of JSX.Element</span></span><br><span class=\"line\">&lt;Component&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class=\"line\">  &lt;h2&gt;Hello World&lt;/h2&gt;</span><br><span class=\"line\">&lt;/Component&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error: children is of type JSX.Element not array of JSX.Element or string.</span></span><br><span class=\"line\">&lt;Component&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">  World</span><br><span class=\"line\">&lt;/Component&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-7-JSX-ç»“æœç±»å‹\"><a href=\"#20-7-JSX-ç»“æœç±»å‹\" class=\"headerlink\" title=\"20.7 JSX ç»“æœç±»å‹\"></a>20.7 JSX ç»“æœç±»å‹</h3><blockquote>\n<p>é»˜è®¤åœ° <code>JSX</code> è¡¨è¾¾å¼ç»“æœçš„ç±»å‹ä¸º <code>any</code>ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªç±»å‹ï¼Œé€šè¿‡æŒ‡å®š <code>JSX.Element</code> æ¥å£ã€‚ç„¶è€Œï¼Œä¸èƒ½å¤Ÿä»æ¥å£é‡Œæ£€ç´¢å…ƒç´ ï¼Œå±æ€§æˆ– <code>JSX</code> çš„å­å…ƒç´ çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒæ˜¯ä¸€ä¸ªé»‘ç›’ã€‚</p>\n</blockquote>\n<h3 id=\"20-8-åµŒå…¥çš„è¡¨è¾¾å¼\"><a href=\"#20-8-åµŒå…¥çš„è¡¨è¾¾å¼\" class=\"headerlink\" title=\"20.8 åµŒå…¥çš„è¡¨è¾¾å¼\"></a>20.8 åµŒå…¥çš„è¡¨è¾¾å¼</h3><blockquote>\n<p><code>JSX</code> å…è®¸ä½ ä½¿ç”¨ <code>&#123;&#125;</code> æ ‡ç­¾æ¥å†…åµŒè¡¨è¾¾å¼</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a &#x3D; (</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &#123;[&quot;foo&quot;, &quot;bar&quot;].map(i &#x3D;&gt; (</span><br><span class=\"line\">      &lt;span&gt;&#123;i &#x2F; 2&#125;&lt;&#x2F;span&gt;</span><br><span class=\"line\">    ))&#125;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">);</span><br><span class=\"line\">&#x2F;&#x2F; ä¸Šé¢çš„ä»£ç äº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºä½ ä¸èƒ½ç”¨æ•°å­—æ¥é™¤ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¾“å‡ºå¦‚ä¸‹ï¼Œè‹¥ä½ ä½¿ç”¨äº† preserve é€‰é¡¹</span><br><span class=\"line\">var a &#x3D; (</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &#123;[&quot;foo&quot;, &quot;bar&quot;].map(function (i) &#123;</span><br><span class=\"line\">      return &lt;span&gt;&#123;i &#x2F; 2&#125;&lt;&#x2F;span&gt;;</span><br><span class=\"line\">    &#125;)&#125;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-9-react-æ•´åˆ\"><a href=\"#20-9-react-æ•´åˆ\" class=\"headerlink\" title=\"20.9 react æ•´åˆ\"></a>20.9 react æ•´åˆ</h3><blockquote>\n<p>è¦æƒ³ä¸€èµ·ä½¿ç”¨ <code>JSX</code> å’Œ <code>React</code>ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>React</code> ç±»å‹å®šä¹‰ã€‚è¿™äº›ç±»å‹å£°æ˜å®šä¹‰äº† <code>JSX</code> åˆé€‚å‘½åç©ºé—´æ¥ä½¿ç”¨ <code>React</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;react.d.ts&quot; /&gt;</span></span><br><span class=\"line\">interface Props &#123;</span><br><span class=\"line\">  foo: string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span>&lt;<span class=\"title\">Props</span>, </span>&#123;&#125;&gt; &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;this.props.foo&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;MyComponent foo=<span class=\"string\">&quot;bar&quot;</span> /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;MyComponent foo=&#123;<span class=\"number\">0</span>&#125; /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-10-å·¥å‚å‡½æ•°\"><a href=\"#20-10-å·¥å‚å‡½æ•°\" class=\"headerlink\" title=\"20.10 å·¥å‚å‡½æ•°\"></a>20.10 å·¥å‚å‡½æ•°</h3><blockquote>\n<p><code>jsx</code>ï¼š<code>react</code> ç¼–è¯‘é€‰é¡¹ä½¿ç”¨çš„å·¥å‚å‡½æ•°æ˜¯å¯ä»¥é…ç½®çš„ã€‚å¯ä»¥ä½¿ç”¨ <code>jsxFactory</code> å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæˆ–å†…è”çš„ <code>@jsx</code> æ³¨é‡ŠæŒ‡ä»¤åœ¨æ¯ä¸ªæ–‡ä»¶ä¸Šè®¾ç½®ã€‚æ¯”å¦‚ï¼Œç»™ <code>createElement</code> è®¾ç½® <code>jsxFactory</code>ï¼Œ<code>&lt;div /&gt;</code> ä¼šä½¿ç”¨ <code>createElement(&quot;div&quot;)</code> æ¥ç”Ÿæˆï¼Œè€Œä¸æ˜¯ <code>React.createElement(&quot;div&quot;)</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ³¨é‡ŠæŒ‡ä»¤å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼š(åœ¨ TypeScript 2.8 é‡Œ)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> preact = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;preact&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">/* @jsx preact.h */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> x = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>/&gt;</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆ</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> preact = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;preact&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> x = preact.h(<span class=\"string\">&quot;div&quot;</span>, <span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å·¥å‚å‡½æ•°çš„é€‰æ‹©åŒæ ·ä¼šå½±å“ <code>JSX</code> å‘½åç©ºé—´çš„æŸ¥æ‰¾(ç±»å‹æ£€æŸ¥)ã€‚å¦‚æœå·¥å‚å‡½æ•°ä½¿ç”¨ <code>React.createElement</code> å®šä¹‰(é»˜è®¤)ï¼Œç¼–è¯‘å™¨ä¼šå…ˆæ£€æŸ¥ <code>React.JSX</code>ï¼Œä¹‹åæ‰æ£€æŸ¥å…¨å±€çš„ <code>JSX</code>ã€‚å¦‚æœå·¥å‚å‡½æ•°å®šä¹‰ä¸º <code>h</code>ï¼Œé‚£ä¹ˆåœ¨æ£€æŸ¥å…¨å±€çš„ <code>JSX</code> ä¹‹å‰å…ˆæ£€æŸ¥ <code>h.JSX</code>ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒåä¸€ã€è£…é¥°å™¨\"><a href=\"#äºŒåä¸€ã€è£…é¥°å™¨\" class=\"headerlink\" title=\"äºŒåä¸€ã€è£…é¥°å™¨\"></a>äºŒåä¸€ã€è£…é¥°å™¨</h2><h3 id=\"21-1-ä»‹ç»\"><a href=\"#21-1-ä»‹ç»\" class=\"headerlink\" title=\"21.1 ä»‹ç»\"></a>21.1 ä»‹ç»</h3><blockquote>\n<p>éšç€ <code>TypeScript</code> å’Œ <code>ES6</code> é‡Œå¼•å…¥äº†ç±»ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦é¢å¤–çš„ç‰¹å®šæ¥æ”¯æŒæ ‡æ³¨æˆ–ä¿®æ”¹ç±»åŠå…¶æˆå‘˜ã€‚è£…é¥°å™¨(<code>Decorators</code>)ä¸ºæˆ‘ä»¬åœ¨ç±»çš„å£°æ˜åŠæˆå‘˜ä¸Šé€šè¿‡å…ƒç¼–ç¨‹è¯­æ³•æ·»åŠ æ ‡æ³¨æä¾›äº†ä¸€ç§æ–¹å¼ã€‚<code>JavaScript</code> é‡Œçš„è£…é¥°å™¨ç›®å‰å¤„åœ¨ å»ºè®®å¾é›†çš„ç¬¬äºŒé˜¶æ®µï¼Œä½†åœ¨ <code>TypeScript</code> é‡Œå·²ä½œä¸ºä¸€é¡¹å®éªŒæ€§ç‰¹æ€§äºˆä»¥æ”¯æŒã€‚<br>æ³¨æ„ï¼šè£…é¥°å™¨æ˜¯ä¸€é¡¹å®éªŒæ€§ç‰¹æ€§ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜<br>è‹¥è¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ï¼Œä½ å¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ– <code>tsconfig.json</code> é‡Œå¯ç”¨ <code>experimentalDecorators</code> ç¼–è¯‘å™¨é€‰é¡¹ã€‚<br>å‘½ä»¤è¡Œï¼š <code>tsc --target ES5 --experimentalDecorators</code></p>\n</blockquote>\n<ul>\n<li>tsconfig.json</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;target&quot;</span>: <span class=\"string\">&quot;ES5&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;experimentalDecorators&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-2-è£…é¥°å™¨\"><a href=\"#21-2-è£…é¥°å™¨\" class=\"headerlink\" title=\"21.2 è£…é¥°å™¨\"></a>21.2 è£…é¥°å™¨</h3><blockquote>\n<p>è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ° <code>ç±»å£°æ˜</code>ã€<code>æ–¹æ³•</code>ã€<code>è®¿é—®ç¬¦</code>ã€<code>å±æ€§æˆ–å‚æ•°ä¸Š</code>ã€‚è£…é¥°å™¨ä½¿ç”¨ <code>@expression</code> è¿™ç§å½¢å¼ï¼Œ<code>expression</code> æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°å™¨çš„å£°æ˜ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚<br>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ª <code>@sealed</code> è£…é¥°å™¨ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å®šä¹‰ <code>sealed</code> å‡½æ•°</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sealed</span>(<span class=\"params\">target</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// do something with target</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šåé¢ç±»è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚</p>\n</blockquote>\n<h3 id=\"21-3-è£…é¥°å™¨å·¥å‚\"><a href=\"#21-3-è£…é¥°å™¨å·¥å‚\" class=\"headerlink\" title=\"21.3 è£…é¥°å™¨å·¥å‚\"></a>21.3 è£…é¥°å™¨å·¥å‚</h3><blockquote>\n<p>å¦‚æœæˆ‘ä»¬è¦å®šåˆ¶ä¸€ä¸ªä¿®é¥°å™¨å¦‚ä½•åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œæˆ‘ä»¬å¾—å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ã€‚è£…é¥°å™¨å·¥å‚å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¾›è£…é¥°å™¨åœ¨è¿è¡Œæ—¶è°ƒç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">color</span>(<span class=\"params\">value: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// è¿™æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™æ˜¯è£…é¥°å™¨</span></span><br><span class=\"line\">    <span class=\"comment\">// do something with &quot;target&quot; and &quot;value&quot; ...</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šä¸‹é¢æ–¹æ³•è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚</p>\n</blockquote>\n<h3 id=\"21-4-è£…é¥°å™¨ç»„åˆ\"><a href=\"#21-4-è£…é¥°å™¨ç»„åˆ\" class=\"headerlink\" title=\"21.4 è£…é¥°å™¨ç»„åˆ\"></a>21.4 è£…é¥°å™¨ç»„åˆ</h3><blockquote>\n<p>å¤šä¸ªè£…é¥°å™¨å¯ä»¥åŒæ—¶åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œå°±åƒä¸‹é¢çš„å®ä¾‹ï¼š</p>\n</blockquote>\n<ol>\n<li>ä¹¦å†™åœ¨åŒä¸€è¡Œï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@f</span> <span class=\"meta\">@g</span> x</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>ä¹¦å†™åœ¨å¤šè¡Œä¸Šï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@f</span></span><br><span class=\"line\"><span class=\"meta\">@g</span></span><br><span class=\"line\">x</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå£°æ˜ä¸Šï¼Œå®ƒä»¬æ±‚å€¼æ–¹å¼ä¸ å¤åˆå‡½æ•° ç›¸ä¼¼ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œå½“å¤åˆ f å’Œ g æ—¶ï¼Œå¤åˆçš„ç»“æœ <code>\\(fâˆ˜g\\)\\(x\\)</code> ç­‰åŒäº <code>f\\(g\\(x\\)\\)</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åŒæ ·çš„ï¼Œåœ¨ <code>TypeScript</code> é‡Œï¼Œå½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨åœ¨ä¸€ä¸ªå£°æ˜ä¸Šæ—¶ä¼šè¿›è¡Œå¦‚ä¸‹æ­¥éª¤çš„æ“ä½œï¼š <code>1</code>. ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ <code>2</code>. æ±‚å€¼çš„ç»“æœä¼šè¢«å½“ä½œå‡½æ•°ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡è¢«è°ƒç”¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚æœæˆ‘ä»¬ä½¿ç”¨ è£…é¥°å™¨å·¥å‚ çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥è§‚å¯Ÿå®ƒä»¬æ±‚å€¼çš„é¡ºåºï¼š</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;f(): evaluated&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, prototypeKey: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;f(): called&quot;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;g(): evaluated&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, prototypeKey: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;g(): called&quot;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@f</span>()</span><br><span class=\"line\">  <span class=\"meta\">@g</span>()</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åœ¨æ§åˆ¶å°é‡Œä¼šæ‰“å°å‡ºå¦‚ä¸‹ç»“æœï¼š</span></span><br><span class=\"line\">f(): evaluated</span><br><span class=\"line\">g(): evaluated</span><br><span class=\"line\">g(): called</span><br><span class=\"line\">f(): called</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-5-è£…é¥°å™¨æ±‚å€¼\"><a href=\"#21-5-è£…é¥°å™¨æ±‚å€¼\" class=\"headerlink\" title=\"21.5 è£…é¥°å™¨æ±‚å€¼\"></a>21.5 è£…é¥°å™¨æ±‚å€¼</h3><blockquote>\n<p>ç±»ä¸­ä¸åŒå£°æ˜ä¸Šçš„è£…é¥°å™¨å°†æŒ‰ä»¥ä¸‹è§„å®šçš„é¡ºåºåº”ç”¨ï¼š</p>\n</blockquote>\n<ul>\n<li>å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªå®ä¾‹æˆå‘˜ã€‚</li>\n<li>å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªé™æ€æˆå‘˜ã€‚</li>\n<li>å‚æ•°è£…é¥°å™¨åº”ç”¨åˆ°æ„é€ å‡½æ•°ã€‚</li>\n<li>ç±»è£…é¥°å™¨åº”ç”¨åˆ°ç±»ã€‚</li>\n</ul>\n<h3 id=\"21-6-ç±»è£…é¥°å™¨\"><a href=\"#21-6-ç±»è£…é¥°å™¨\" class=\"headerlink\" title=\"21.6 ç±»è£…é¥°å™¨\"></a>21.6 ç±»è£…é¥°å™¨</h3><p>1.ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰è¢«å£°æ˜(ç´§é ç€ç±»å£°æ˜)ã€‚ç±»è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰ã€‚ç±»è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( <code>.d.ts</code> )ï¼Œä¹Ÿä¸èƒ½ç”¨åœ¨ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ä¸­(æ¯”å¦‚ <code>declare</code> çš„ç±»)ã€‚</p>\n<ol start=\"2\">\n<li>ç±»è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œç±»çš„æ„é€ å‡½æ•°ä½œä¸ºå…¶å”¯ä¸€çš„å‚æ•°ã€‚</li>\n<li>å¦‚æœç±»è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šä½¿ç”¨æä¾›çš„æ„é€ å‡½æ•°æ¥æ›¿æ¢ç±»çš„å£°æ˜ã€‚</li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä½ è¦è¿”å›ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°ï¼Œä½ å¿…é¡»æ³¨æ„å¤„ç†å¥½åŸæ¥çš„åŸå‹é“¾ã€‚åœ¨è¿è¡Œæ—¶çš„è£…é¥°å™¨è°ƒç”¨é€»è¾‘ä¸­ ä¸ä¼šä¸ºä½ åšè¿™äº›ã€‚<br>ä¸‹é¢æ˜¯ä½¿ç”¨ç±»è£…é¥°å™¨( <code>@sealed</code> )çš„ä¾‹å­ï¼Œåº”ç”¨åœ¨ <code>Greeter</code> ç±»ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@sealed</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter1</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello, &quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ @sealed è£…é¥°å™¨</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sealed</span>(<span class=\"params\">constructor: <span class=\"built_in\">Function</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.seal(<span class=\"title\">constructor</span>);</span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.seal(<span class=\"title\">constructor</span>.<span class=\"title\">prototype</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“ <code>@sealed</code> è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒå°†å¯†é—­æ­¤ç±»çš„æ„é€ å‡½æ•°å’ŒåŸå‹ã€‚(æ³¨ï¼šå‚è§ <code>Object.seal</code> )</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€ä¸ªé‡è½½æ„é€ å‡½æ•°çš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">classDecorator</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> </span>&#123; <span class=\"keyword\">new</span> (...args: <span class=\"built_in\">any</span>[]): &#123;&#125; &#125;&gt;(<span class=\"title\">constructor</span>: <span class=\"title\">T</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"keyword\">extends</span> <span class=\"title\">constructor</span> </span>&#123;</span><br><span class=\"line\">    newProperty = <span class=\"string\">&quot;new property&quot;</span>;</span><br><span class=\"line\">    hello = <span class=\"string\">&quot;override&quot;</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@classDecorator</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter2</span> </span>&#123;</span><br><span class=\"line\">  property = <span class=\"string\">&quot;property&quot;</span>;</span><br><span class=\"line\">  hello: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">m: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.hello = m;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> Greeter2(<span class=\"string\">&quot;world&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-7-æ–¹æ³•è£…é¥°å™¨\"><a href=\"#21-7-æ–¹æ³•è£…é¥°å™¨\" class=\"headerlink\" title=\"21.7 æ–¹æ³•è£…é¥°å™¨\"></a>21.7 æ–¹æ³•è£…é¥°å™¨</h3><blockquote>\n<p>æ–¹æ³•è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜ä¹‹å‰(ç´§é ç€æ–¹æ³•å£°æ˜)ã€‚å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ <code>å±æ€§æè¿°ç¬¦</code> ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚æ–¹æ³•è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ <code>.d.ts</code> ä¸Šï¼Œé‡è½½æˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ <code>declare</code> çš„ç±»)ä¸­ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>3</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—</li>\n<li>æˆå‘˜çš„å±æ€§ä¿®é¥°ç¬¦</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ä»£ç å°äº <code>ES5</code>ï¼Œå±æ€§æè¿°ç¬¦ å°†ä¼šæ˜¯ <code>undefined</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœæ–¹æ³•è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº <code>ES5</code>ï¼Œè¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€ä¸ªæ–¹æ³•è£…é¥°å™¨ (<code>@enumerable</code>) çš„ä¾‹å­ï¼Œåº”ç”¨äº <code>Greeter</code> ç±»çš„æ–¹æ³•ä¸Šã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@enumerable</span>(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello, &quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‡½æ•°å£°æ˜æ¥å®šä¹‰ <code>@enumerable</code> è£…é¥°å™¨ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumerable</span>(<span class=\"params\">value: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target: <span class=\"built_in\">any</span>, property: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    descriptor.enumerable = value;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„ <code>@enumerable(false)</code> æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚ï¼Œå½“è£…é¥°å™¨ <code>@enumerable(false)</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šä¿®æ”¹å±æ€§æè¿°ç¬¦çš„ <code>enumerable</code> å±æ€§ã€‚</p>\n</blockquote>\n<h3 id=\"21-8-è®¿é—®å™¨è£…é¥°å™¨\"><a href=\"#21-8-è®¿é—®å™¨è£…é¥°å™¨\" class=\"headerlink\" title=\"21.8 è®¿é—®å™¨è£…é¥°å™¨\"></a>21.8 è®¿é—®å™¨è£…é¥°å™¨</h3><blockquote>\n<p>è®¿é—®å™¨è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªè®¿é—®å™¨çš„å£°æ˜ä¹‹å‰(ç´§é ç€è®¿é—®å™¨å£°æ˜)ã€‚è®¿é—®å™¨è£…é¥°å™¨ åº”ç”¨äºè®¿é—®å™¨çš„ <code>å±æ€§æè¿°ç¬¦</code> å¹¶ä¸”å¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ä¸€ä¸ªè®¿é—®å™¨çš„å®šä¹‰ã€‚è®¿é—®å™¨è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( <code>.d.ts</code> )ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ <code>declare</code> çš„ç±»)é‡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼š<code>TypeScript</code> ä¸å…è®¸åŒæ—¶è£…é¥°ä¸€ä¸ªæˆå‘˜çš„ <code>get</code> å’Œ <code>set</code> è®¿é—®å™¨ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä¸€ä¸ªæˆå‘˜çš„æ‰€æœ‰è£…é¥°çš„å¿…é¡»åº”ç”¨åœ¨æ–‡æ¡£é¡ºåºçš„ç¬¬ä¸€ä¸ªè®¿é—®å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨è£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå±æ€§æè¿°ç¬¦æ—¶ï¼Œå®ƒè”åˆäº† <code>get</code> å’Œ <code>set</code> è®¿é—®å™¨ï¼Œè€Œä¸æ˜¯åˆ†å¼€å£°æ˜çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¿é—®å™¨è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>3</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—</li>\n<li>æˆå‘˜çš„å±æ€§æè¿°ç¬¦</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº <code>ES5</code>ï¼Œ<code>Property Descriptor</code> å°†ä¼šæ˜¯ <code>undefined</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœè®¿é—®å™¨è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ <code>å±æ€§æè¿°ç¬¦</code> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº <code>ES5</code> è¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä½¿ç”¨äº†è®¿é—®å™¨è£…é¥°å™¨ (<code>@configurable</code>) çš„ä¾‹å­ï¼Œåº”ç”¨äº <code>Point</code> ç±»çš„æˆå‘˜ä¸Šã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._x = x;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._y = y;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@configurable</span>(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">x</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@configurable</span>(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">y</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._y;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> p: Point = <span class=\"keyword\">new</span> Point(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‡½æ•°å£°æ˜æ¥å®šä¹‰ <code>@configurable</code> è£…é¥°å™¨ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">configurable</span>(<span class=\"params\">value: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyKey: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    descriptor.configurable = value;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-9-å±æ€§è£…é¥°å™¨\"><a href=\"#21-9-å±æ€§è£…é¥°å™¨\" class=\"headerlink\" title=\"21.9 å±æ€§è£…é¥°å™¨\"></a>21.9 å±æ€§è£…é¥°å™¨</h3><blockquote>\n<p>å±æ€§è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå±æ€§å£°æ˜ä¹‹å‰(ç´§é ç€å±æ€§å£°æ˜)ã€‚å±æ€§è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ<code>.d.ts</code>ï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ <code>declare</code> çš„ç±»ï¼‰é‡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p>å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>2</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—ã€‚</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼š<code>å±æ€§æè¿°ç¬¦</code> ä¸ä¼šä½œä¸ºå‚æ•°ä¼ å…¥å±æ€§è£…é¥°å™¨ï¼Œè¿™ä¸ <code>TypeScript</code> æ˜¯å¦‚ä½•åˆå§‹åŒ–å±æ€§è£…é¥°å™¨æœ‰å…³ã€‚å› ä¸ºç›®å‰æ²¡æœ‰åŠæ³•åœ¨å®šä¹‰ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æˆå‘˜æ—¶æè¿°ä¸€ä¸ªå®ä¾‹å±æ€§ï¼Œå¹¶ä¸”æ²¡åŠæ³•ç›‘è§†æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•ã€‚è¿”å›å€¼ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚å› æ­¤ï¼Œå±æ€§æè¿°ç¬¦åªèƒ½ç”¨æ¥ç›‘è§†ç±»ä¸­æ˜¯å¦å£°æ˜äº†æŸä¸ªåå­—çš„å±æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è®°å½•è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@format</span>(<span class=\"string\">&quot;Hello, %s&quot;</span>)</span><br><span class=\"line\">    greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> formatString = getFormat(<span class=\"built_in\">this</span>, <span class=\"string\">&quot;greeting&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> formatString.replace(<span class=\"string\">&quot;%s&quot;</span>, <span class=\"built_in\">this</span>.greeting);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"keyword\">let</span> g: Greeter = <span class=\"keyword\">new</span> Greeter(<span class=\"string\">&quot;é¼“åŠ±&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(g);</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"comment\">// ç„¶åå®šä¹‰ @format è£…é¥°å™¨ å’Œ getFormat å‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;reflect-metadata&quot;</span>;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"keyword\">const</span> formatMetadataKey = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;format&quot;</span>);</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">format</span>(<span class=\"params\">formatString: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Reflect</span>.metadata(formatMetadataKey, formatString);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFormat</span>(<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyKey: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Reflect</span>.getMetadata(formatMetadataKey, target, propertyKey);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¸ª <code>@format(&quot;Hello, %s&quot;)</code> è£…é¥°å™¨æ˜¯ä¸ª <code>è£…é¥°å™¨å·¥å‚</code>ã€‚å½“ <code>@format(&quot;Hello, %s&quot;)</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ·»åŠ ä¸€æ¡è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œé€šè¿‡ <code>reflect-metadata</code> åº“é‡Œçš„ <code>Reflect.metadata</code> å‡½æ•°ã€‚å½“ <code>getFormat</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒè¯»å–æ ¼å¼çš„å…ƒæ•°æ®ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šè¿™ä¸ªä¾‹å­éœ€è¦ä½¿ç”¨ <code>reflect-metadata</code> åº“ã€‚æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ <code>reflect-metadata</code> åº“æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"21-10-å‚æ•°è£…é¥°å™¨\"><a href=\"#21-10-å‚æ•°è£…é¥°å™¨\" class=\"headerlink\" title=\"21.10 å‚æ•°è£…é¥°å™¨\"></a>21.10 å‚æ•°è£…é¥°å™¨</h3><blockquote>\n<p><code>å‚æ•°è£…é¥°å™¨</code> å£°æ˜åœ¨ä¸€ä¸ªå‚æ•°å£°æ˜ä¹‹å‰(ç´§é ç€å‚æ•°å£°æ˜)ã€‚å‚æ•°è£…é¥°å™¨åº”ç”¨äº <code>ç±»æ„é€ å‡½æ•°</code> æˆ– <code>æ–¹æ³•å£°æ˜</code>ã€‚å‚æ•°è£…é¥°å™¨ ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ï¼ˆ<code>.d.ts</code>ï¼‰ï¼Œé‡è½½æˆ–å…¶å®ƒå¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ <code>declare</code> çš„ç±»ï¼‰é‡Œã€‚<br><code>å‚æ•°è£…é¥°å™¨</code> è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>3</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—</li>\n<li>å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„ç´¢å¼•</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå‚æ•°è£…é¥°å™¨åªèƒ½ç”¨æ¥ç›‘è§†ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯å¦è¢«ä¼ å…¥ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‚æ•°è£…é¥°å™¨çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢å®šä¹‰äº†å‚æ•°è£…é¥°å™¨( <code>@required</code> )å¹¶åº”ç”¨äº <code>Greeter</code> ç±»æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"><span class=\"meta\">@required</span> name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello &quot;</span> + name + <span class=\"string\">&quot;, &quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å®šä¹‰ <code>@required</code> å’Œ <code>@validate</code> è£…é¥°å™¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;reflect-metadata&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> requiredMetadataKey = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;required&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">required</span>(<span class=\"params\">target: <span class=\"built_in\">Object</span>, propertyKey: <span class=\"built_in\">string</span> | symbol, parameterIndex: <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> existingRequiredParameters: <span class=\"built_in\">number</span>[] = <span class=\"built_in\">Reflect</span>.getOwnMetadata(requiredMetadataKey, target, propertyKey) || [];</span><br><span class=\"line\">  existingRequiredParameters.push(parameterIndex);</span><br><span class=\"line\">  <span class=\"built_in\">Reflect</span>.defineMetadata(requiredMetadataKey, existingRequiredParameters, target, propertyKey);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">validate</span>(<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyName: <span class=\"built_in\">string</span>, descriptor: TypedPropertyDescriptor&lt;<span class=\"built_in\">Function</span>&gt;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> method = descriptor.value;</span><br><span class=\"line\">  descriptor.value = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> requiredParameters: <span class=\"built_in\">number</span>[] = <span class=\"built_in\">Reflect</span>.getOwnMetadata(requiredMetadataKey, target, propertyName);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (requiredParameters) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> parameterIndex <span class=\"keyword\">of</span> requiredParameters) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (parameterIndex &gt;= <span class=\"built_in\">arguments</span>.length || <span class=\"built_in\">arguments</span>[parameterIndex] === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;Missing required argument.&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> method.apply(<span class=\"built_in\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>@required</code> è£…é¥°å™¨æ·»åŠ äº†å…ƒæ•°æ®å®ä½“æŠŠå‚æ•°æ ‡è®°ä¸ºå¿…é¡»çš„ã€‚<br><code>@validate</code> è£…é¥°å™¨æŠŠ <code>greet</code> æ–¹æ³•åŒ…è£¹åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œåœ¨è°ƒç”¨åŸå…ˆçš„å‡½æ•°å‰éªŒè¯å‡½æ•°å‚æ•°ã€‚<br><code>æ³¨æ„ï¼š</code>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† <code>reflect-metadata</code> åº“ã€‚ æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ <code>reflect-metadata</code> åº“çš„æ›´å¤šä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"21-11-å…ƒæ•°æ®\"><a href=\"#21-11-å…ƒæ•°æ®\" class=\"headerlink\" title=\"21.11 å…ƒæ•°æ®\"></a>21.11 å…ƒæ•°æ®</h3><blockquote>\n<p>ä¸€éƒ¨åˆ†ä¾‹å­ä½¿ç”¨äº† <code>reflect-metadata</code> åº“æ¥æ”¯æŒå®ç°æ€§çš„ <code>metadata API</code>ã€‚è¿™ä¸ªåº“è¿˜ä¸æ˜¯ <code>ECMAScript\\( JavaScript \\)</code> æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œå½“è£…é¥°å™¨è¢« <code>ECMAScript</code> å®˜æ–¹æ ‡å‡†é‡‡çº³åï¼Œè¿™äº›æ‰©å±•ä¹Ÿå°†è¢«æ¨èç»™ <code>ECMAScript</code> ä»¥é‡‡çº³ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½ å¯ä»¥é€šè¿‡ <code>npm</code> å®‰è£…è¿™ä¸ªåº“</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i reflect-metadata --save</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>TypeScript</code> æ”¯æŒä¸ºå¸¦æœ‰è£…é¥°å™¨çš„å£°æ˜ç”Ÿæˆå…ƒæ•°æ®ã€‚ä½ éœ€è¦åœ¨ <code>å‘½ä»¤è¡Œ</code> æˆ– <code>tsconfig.json</code> é‡Œå¯ç”¨ <code>emitDecoratorMetadata</code> ç¼–è¯‘å™¨é€‰é¡¹ã€‚</p>\n</blockquote>\n<ul>\n<li>å‘½ä»¤è¡Œï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc --target ES5 --experimentalDecorators --emitDecoratorMetadata</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>tsconfig.json</code></li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;target&quot;</span>: <span class=\"string\">&quot;ES5&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;experimentalDecorators&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;emitDecoratorMetadata&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“å¯ç”¨äº†ï¼Œåªè¦ <code>reflect-metadata</code> åº“è¢«å¼•å…¥äº†ï¼Œè®¾è®¡é˜¶æ®µæ·»åŠ çš„ç±»å‹ä¿¡æ¯å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;reflect-metadata&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Line</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p0: Point;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p1: Point;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p0</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p0 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p0</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p1</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p1 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p1</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">validate</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyKey: <span class=\"built_in\">string</span>, descriptor: TypedPropertyDescriptor&lt;T&gt;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> set = descriptor.set;</span><br><span class=\"line\">  descriptor.set = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value: T</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"keyword\">type</span> = <span class=\"built_in\">Reflect</span>.getMetadata(<span class=\"string\">&quot;design:type&quot;</span>, target, propertyKey);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(value <span class=\"keyword\">instanceof</span> <span class=\"keyword\">type</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">&quot;Invalid type.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    set(value);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>TypeScript</code> ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ <code>@Reflect.metadata</code> è£…é¥°å™¨æ³¨å…¥è®¾è®¡é˜¶æ®µçš„ç±»å‹ä¿¡æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒç›¸å½“äºä¸‹é¢çš„ <code>TypeScriptï¼š</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Line1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p0: Point;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p1: Point;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"meta\">@Reflect</span>.metadata(<span class=\"string\">&quot;design:type&quot;</span>, Point)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p0</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p0 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p0</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"meta\">@Reflect</span>.metadata(<span class=\"string\">&quot;design:type&quot;</span>, Point)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p1</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p1 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p1</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼š è£…é¥°å™¨å…ƒæ•°æ®æ˜¯ä¸ªå®éªŒæ€§çš„ç‰¹æ€§å¹¶ä¸”å¯èƒ½åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å‘å£°ç ´åæ€§çš„æ”¹å˜ã€‚</p>\n</blockquote>\n<h3 id=\"21-12-Reflect-metadata-åº“\"><a href=\"#21-12-Reflect-metadata-åº“\" class=\"headerlink\" title=\"21.12 Reflect-metadata åº“\"></a>21.12 Reflect-metadata åº“</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Reflect &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç”¨äºè£…é¥°å™¨</span></span><br><span class=\"line\">    metadata(k, v): <span class=\"function\">(<span class=\"params\">target, property?</span>) =&gt;</span> <span class=\"built_in\">void</span></span><br><span class=\"line\">    <span class=\"comment\">// åœ¨å¯¹è±¡ä¸Šé¢å®šä¹‰å…ƒæ•°æ®</span></span><br><span class=\"line\">    defineMetadata(k, v, o, p?): <span class=\"built_in\">void</span></span><br><span class=\"line\">    <span class=\"comment\">// æ˜¯å¦å­˜åœ¨å…ƒæ•°æ®</span></span><br><span class=\"line\">    hasMetadata(k, o, p?): <span class=\"built_in\">boolean</span></span><br><span class=\"line\">    hasOwnMetadata(k, o, p?): <span class=\"built_in\">boolean</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–å…ƒæ•°æ®</span></span><br><span class=\"line\">    getMetadata(k, o, p?): <span class=\"built_in\">any</span></span><br><span class=\"line\">    getOwnMetadata(k, o, p?): <span class=\"built_in\">any</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–æ‰€æœ‰å…ƒæ•°æ®çš„ Key</span></span><br><span class=\"line\">    getMetadataKeys(o, p?): <span class=\"built_in\">any</span>[]</span><br><span class=\"line\">    getOwnMetadataKeys(o, p?): <span class=\"built_in\">any</span>[]</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤å…ƒæ•°æ®</span></span><br><span class=\"line\">    deleteMetadata(k, o, p?): <span class=\"built_in\">boolean</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"21-12-1-å®‰è£…\"><a href=\"#21-12-1-å®‰è£…\" class=\"headerlink\" title=\"21.12.1 å®‰è£…\"></a>21.12.1 å®‰è£…</h4><h5 id=\"Metadata-Reflection-API\"><a href=\"#Metadata-Reflection-API\" class=\"headerlink\" title=\"Metadata Reflection API\"></a>Metadata Reflection API</h5><ul>\n<li><a href=\"%5Bhttps://rbuckton.github.io/reflect-metadata%5D(https://rbuckton.github.io/reflect-metadata)\">Detailed proposal</a></li>\n</ul>\n<ol>\n<li>Installation</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install reflect-metadata</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Background</li>\n</ol>\n<ul>\n<li>Decorators add the ability to augment a class and its members as the class is defined, through a declarative syntax.</li>\n<li>Traceur attaches annotations to a static property on the class.</li>\n<li>Languages like C# (.NET), and Java support attributes or annotations that add metadata to types, along with a reflective API for reading metadata.</li>\n</ul>\n<ol start=\"3\">\n<li>Goals</li>\n</ol>\n<ul>\n<li>A number of use cases (Composition/Dependency Injection, Runtime Type Assertions, Reflection/Mirroring, Testing) want the ability to add additional metadata to a class in a consistent manner.</li>\n<li>A consistent approach is needed for various tools and libraries to be able to reason over metadata.</li>\n<li>Metadata-producing decorators (nee. â€œAnnotationsâ€) need to be generally composable with mutating decorators.</li>\n<li>Metadata should be available not only on an object but also through a Proxy, with related traps.</li>\n<li>Defining new metadata-producing decorators should not be arduous or over-complex for a developer.</li>\n<li>Metadata should be consistent with other language and runtime features of ECMAScript.</li>\n</ul>\n<ol start=\"4\">\n<li>Syntax</li>\n</ol>\n<ul>\n<li>Declarative definition of metadata:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  @<span class=\"built_in\">Reflect</span>.metadata(metadataKey, metadataValue)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Imperative definition of metadata:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Reflect</span>.defineMetadata(metadataKey, metadataValue, C.prototype, <span class=\"string\">&quot;method&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Imperative introspection of metadata:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\"><span class=\"keyword\">let</span> metadataValue = <span class=\"built_in\">Reflect</span>.getMetadata(metadataKey, obj, <span class=\"string\">&quot;method&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>Semantics</li>\n</ol>\n<ul>\n<li>Object has a new [[Metadata]] internal property that will contain a Map whose keys are property keys (or <code>undefined</code> ) and whose values are Maps of metadata keys to metadata values.</li>\n<li>Object will have a number of new internal methods for [[DefineOwnMetadata]], [[GetOwnMetadata]], [[HasOwnMetadata]], etc.<ul>\n<li>These internal methods can be overridden by a Proxy to support additional traps.</li>\n<li>These internal methods will by default call a set of abstract operations to define and read metadata.</li>\n</ul>\n</li>\n<li>The Reflect object will expose the MOP operations to allow imperative access to metadata.</li>\n<li>Metadata defined on class declaration <em>C</em> is stored in <em>C</em>.[[Metadata]], with <code>undefined</code> as the key.</li>\n<li>Metadata defined on static members of class declaration <em>C</em> are stored in <em>C</em>.[[Metadata]], with the property key as the key.</li>\n<li>Metadata defined on instance members of class declaration <em>C</em> are stored in <em>C</em>.prototype.[[Metadata]], with the property key as the key.</li>\n</ul>\n<ol>\n<li>API</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// define metadata on an object or property</span></span><br><span class=\"line\"><span class=\"built_in\">Reflect</span>.defineMetadata(metadataKey, metadataValue, target);</span><br><span class=\"line\"><span class=\"built_in\">Reflect</span>.defineMetadata(metadataKey, metadataValue, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// check for presence of a metadata key on the prototype chain of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// check for presence of an own metadata key of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasOwnMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasOwnMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get metadata value of a metadata key on the prototype chain of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get metadata value of an own metadata key of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get all metadata keys on the prototype chain of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadataKeys(target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadataKeys(target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get all own metadata keys of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadataKeys(target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadataKeys(target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// delete metadata from an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.deleteMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.deleteMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// apply metadata via a decorator to a constructor</span></span><br><span class=\"line\">@<span class=\"built_in\">Reflect</span>.metadata(metadataKey, metadataValue)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// apply metadata via a decorator to a method (property)</span></span><br><span class=\"line\">  @<span class=\"built_in\">Reflect</span>.metadata(metadataKey, metadataValue)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"7\">\n<li>Alternatives</li>\n</ol>\n<ul>\n<li>Use properties rather than a separate API.<ul>\n<li>Obvious downside is that this can be a lot of code:</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ParamTypes</span>(<span class=\"params\">...types</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">target, propertyKey</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> symParamTypes = <span class=\"built_in\">Symbol</span>.for(<span class=\"string\">&quot;design:paramtypes&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (propertyKey === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">      target[symParamTypes] = types;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> symProperties = <span class=\"built_in\">Symbol</span>.for(<span class=\"string\">&quot;design:properties&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">let</span> properties, property;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(target, symProperties)) &#123;</span><br><span class=\"line\">        properties = target[symProperties];</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        properties = target[symProperties] = &#123;&#125;;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(properties, propertyKey)) &#123;</span><br><span class=\"line\">        property = properties[propertyKey];</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        property = properties[propertyKey] = &#123;&#125;;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      property[symParamTypes] = types;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li>Notes</li>\n</ol>\n<ul>\n<li>Though it may seem counterintuitive, the methods on Reflect place the parameters for the metadata key and metadata value before the target or property key. This is due to the fact that the property key is the only optional parameter in the argument list. This also makes the methods easier to curry with Function#bind. This also helps reduce the overall footprint and complexity of a metadata-producing decorator that could target both a class or a property:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ParamTypes</span>(<span class=\"params\">...types</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// as propertyKey is effectively optional, its easier to use here</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">target, propertyKey</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Reflect</span>.defineMetadata(<span class=\"string\">&quot;design:paramtypes&quot;</span>, types, target, propertyKey);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// vs. having multiple overloads with the target and key in the front:</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">// return (target, propertyKey) =&gt; &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//    if (propertyKey === undefined) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.defineMetadata(target, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//    else &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.defineMetadata(target, propertyKey, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">// vs. having a different methods for the class or a property:</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">// return (target, propertyKey) =&gt; &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//    if (propertyKey === undefined) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.defineMetadata(target, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//    else &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.definePropertyMetadata(target, propertyKey, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>To enable experimental support for metadata decorators in your TypeScript project, you must add <code>&quot;experimentalDecorators&quot;: true</code> to your tsconfig.json file.</li>\n<li>To enable experimental support for auto-generated type metadata in your TypeScript project, you must add <code>&quot;emitDecoratorMetadata&quot;: true</code> to your tsconfig.json file.<ul>\n<li>Please note that auto-generated type metadata may have issues with circular or forward references for types.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"9\">\n<li>Issues</li>\n</ol>\n<ul>\n<li>A poorly written mutating decorator for a class constructor could cause metadata to become lost if the prototype chain is not maintained. Though, not maintaining the prototype chain in a mutating decorator for a class constructor would have other negative side effects as well. <a href=\"/rbuckton\">@rbuckton </a><ul>\n<li>This is mitigated if the mutating decorator returns a class expression that extends from the target, or returns a proxy for the decorator. <a href=\"/rbuckton\">@rbuckton </a></li>\n</ul>\n</li>\n<li>Metadata for a method is attached to the class (or prototype) via the property key. It would not then be available if trying to read metadata on the function of the method (e.g. â€œtearing-offâ€ the method from the class). <a href=\"/rbuckton\">@rbuckton </a></li>\n</ul>\n<h2 id=\"äºŒåäºŒã€Mixins-æ··å…¥\"><a href=\"#äºŒåäºŒã€Mixins-æ··å…¥\" class=\"headerlink\" title=\"äºŒåäºŒã€Mixins æ··å…¥\"></a>äºŒåäºŒã€Mixins æ··å…¥</h2><h3 id=\"22-1-ä»‹ç»\"><a href=\"#22-1-ä»‹ç»\" class=\"headerlink\" title=\"22.1 ä»‹ç»\"></a>22.1 ä»‹ç»</h3><blockquote>\n<p>é™¤äº†ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç»§æ‰¿æ–¹å¼ï¼Œè¿˜æµè¡Œä¸€ç§é€šç”¨å¯é‡ç”¨ç»„ä»¶åˆ›å»ºç±»çš„æ–¹å¼ï¼Œå°±æ˜¯è”åˆå¦ä¸€ä¸ªç®€å•ç±»çš„ä»£ç ã€‚<br>ä½ å¯èƒ½åœ¨ <code>Scala</code> ç­‰è¯­è¨€é‡Œå¯¹ <code>mixins</code> åŠå…¶ç‰¹æ€§å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å®ƒåœ¨ <code>JavaScript</code> ä¸­ä¹Ÿæ˜¯å¾ˆæµè¡Œçš„ã€‚</p>\n</blockquote>\n<h3 id=\"22-2-æ··å…¥ç¤ºä¾‹\"><a href=\"#22-2-æ··å…¥ç¤ºä¾‹\" class=\"headerlink\" title=\"22.2 æ··å…¥ç¤ºä¾‹\"></a>22.2 æ··å…¥ç¤ºä¾‹</h3><blockquote>\n<p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨æ··å…¥ã€‚åé¢æˆ‘ä»¬è¿˜ä¼šè§£é‡Šè¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Disposable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Disposable</span> </span>&#123;</span><br><span class=\"line\">  isDisposed: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">dispose</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isDisposed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Activatable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Activatable</span> </span>&#123;</span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">activate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">deactivate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmartObject</span> <span class=\"title\">implements</span> <span class=\"title\">Disposable</span>, <span class=\"title\">Activatable</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.isActive + <span class=\"string\">&quot;:&quot;</span> + <span class=\"built_in\">this</span>.isDisposed), <span class=\"number\">500</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">interact</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.activate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Disposable</span></span><br><span class=\"line\">  isDisposed: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  dispose: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  <span class=\"comment\">// Activatable</span></span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  activate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  deactivate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">applyMixins(SmartObject, [Disposable, Activatable]);</span><br><span class=\"line\"><span class=\"keyword\">let</span> smartObj = <span class=\"keyword\">new</span> SmartObject();</span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> smartObj.interact(), <span class=\"number\">1000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">////////////////////////////////////////</span></span><br><span class=\"line\"><span class=\"comment\">// In your runtime library somewhere</span></span><br><span class=\"line\"><span class=\"comment\">////////////////////////////////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMixins</span>(<span class=\"params\">derivedCtor: <span class=\"built_in\">any</span>, baseCtors: <span class=\"built_in\">any</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  baseCtors.forEach(<span class=\"function\"><span class=\"params\">baseCtor</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.getOwnPropertyNames(baseCtor.prototype).forEach(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">      derivedCtor.prototype[name] = baseCtor.prototype[name];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"22-3-ç†è§£è¿™ä¸ªä¾‹å­\"><a href=\"#22-3-ç†è§£è¿™ä¸ªä¾‹å­\" class=\"headerlink\" title=\"22.3 ç†è§£è¿™ä¸ªä¾‹å­\"></a>22.3 ç†è§£è¿™ä¸ªä¾‹å­</h3><ol>\n<li>ä»£ç é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œå®ƒä»¬å°†åšä¸º <code>mixins</code>ã€‚å¯ä»¥çœ‹åˆ°æ¯ä¸ªç±»éƒ½åªå®šä¹‰äº†ä¸€ä¸ªç‰¹å®šçš„è¡Œä¸ºæˆ–åŠŸèƒ½ã€‚ç¨åæˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ŒåŒæ—¶å…·æœ‰è¿™ä¸¤ç§åŠŸèƒ½ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Disposable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Disponsable</span> </span>&#123;</span><br><span class=\"line\">  isDisponsed: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">dispose</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isDisponsed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Activatable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Activatable</span> </span>&#123;</span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">activate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">deactivate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>ä¸‹é¢åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»“åˆäº†è¿™ä¸¤ä¸ª <code>mixins</code>ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸‹å…·ä½“æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmartObject</span> <span class=\"title\">implements</span> <span class=\"title\">Disposable</span>, <span class=\"title\">Activatable</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>é¦–å…ˆåº”è¯¥æ³¨æ„åˆ°çš„æ˜¯ï¼Œæ²¡ä½¿ç”¨ <code>extends</code> è€Œæ˜¯ä½¿ç”¨ <code>implements</code>ã€‚ æŠŠç±»å½“æˆäº†æ¥å£ï¼Œä»…ä½¿ç”¨ <code>Disposable</code> å’Œ <code>Activatable</code> çš„ç±»å‹è€Œéå…¶å®ç°ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨ç±»é‡Œé¢å®ç°æ¥å£ã€‚ä½†æ˜¯è¿™æ˜¯æˆ‘ä»¬åœ¨ç”¨ <code>mixin</code> æ—¶æƒ³é¿å…çš„ã€‚</li>\n<li>æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšæ¥è¾¾åˆ°ç›®çš„ï¼Œä¸ºå°†è¦ <code>mixin</code> è¿›æ¥çš„å±æ€§æ–¹æ³•åˆ›å»ºå‡ºå ä½å±æ€§ã€‚è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›æˆå‘˜åœ¨è¿è¡Œæ—¶æ˜¯å¯ç”¨çš„ã€‚ è¿™æ ·å°±èƒ½ä½¿ç”¨ <code>mixin</code> å¸¦æ¥çš„ä¾¿åˆ©ï¼Œè™½è¯´éœ€è¦æå‰å®šä¹‰ä¸€äº›å ä½å±æ€§ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Disposable</span></span><br><span class=\"line\">  isDisposed: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  dispose: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\"><span class=\"comment\">// Activatable</span></span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  activate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  deactivate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>æœ€åï¼ŒæŠŠ <code>mixins</code> æ··å…¥å®šä¹‰çš„ç±»ï¼Œå®Œæˆå…¨éƒ¨å®ç°éƒ¨åˆ†ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyMixins(SmartObject, [Disposable, Activatable]);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>æœ€åï¼Œåˆ›å»ºè¿™ä¸ªå¸®åŠ©å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åšæ··å…¥æ“ä½œã€‚ å®ƒä¼šéå† <code>mixins</code> ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå¹¶å¤åˆ¶åˆ°ç›®æ ‡ä¸Šå»ï¼ŒæŠŠä¹‹å‰çš„å ä½å±æ€§æ›¿æ¢æˆçœŸæ­£çš„å®ç°ä»£ç ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMixins</span>(<span class=\"params\">derivedCtor: <span class=\"built_in\">any</span>, baseCtors: <span class=\"built_in\">any</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  baseCtors.forEach(<span class=\"function\"><span class=\"params\">baseCtor</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.getOwnPropertyNames(baseCtor.prototype).forEach(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">      derivedCtor.prototype[name] = baseCtor.prototype[name];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\"><a href=\"#äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\" class=\"headerlink\" title=\"äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\"></a>äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤</h2><ul>\n<li>ä¸‰æ–œçº¿æŒ‡ä»¤æ˜¯åŒ…å«å•ä¸ª <code>XML</code> æ ‡ç­¾çš„å•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šå†…å®¹ä¼šåšä¸ºç¼–è¯‘å™¨æŒ‡ä»¤ä½¿ç”¨ã€‚</li>\n<li>ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶æœ€é¡¶ç«¯ã€‚ä¸€ä¸ªä¸‰æ–œçº¿æŒ‡ä»¤çš„å‰é¢åªèƒ½å‡ºç°å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šï¼Œè¿™åŒ…æ‹¬å…¶å®ƒçš„ä¸‰æ–œçº¿æŒ‡ä»¤ã€‚å¦‚æœå®ƒä»¬å‡ºç°åœ¨ä¸€ä¸ªè¯­å¥æˆ–å£°æ˜ä¹‹åï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«å½“ä½œæ™®é€šçš„å•è¡Œæ³¨é‡Šï¼Œå¹¶ä¸”ä¸å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;...&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;...&quot; /&gt; æŒ‡ä»¤æ˜¯ä¸‰æ–œçº¿æŒ‡ä»¤ä¸­æœ€å¸¸è§çš„ä¸€ç§ã€‚ å®ƒç”¨äºå£°æ˜æ–‡ä»¶é—´çš„ ä¾èµ–ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–æ–‡ä»¶ã€‚</li>\n<li>å½“ä½¿ç”¨ <code>--out</code> æˆ– <code>--outFile</code> æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥åšä¸ºè°ƒæ•´è¾“å‡ºå†…å®¹é¡ºåºçš„ä¸€ç§æ–¹æ³•ã€‚æ–‡ä»¶åœ¨è¾“å‡ºæ–‡ä»¶å†…å®¹ä¸­çš„ä½ç½®ä¸ç»è¿‡é¢„å¤„ç†åçš„è¾“å…¥é¡ºåºä¸€è‡´ã€‚</li>\n</ul>\n<h3 id=\"23-1-é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\"><a href=\"#23-1-é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\" class=\"headerlink\" title=\"23.1 é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\"></a>23.1 é¢„å¤„ç†è¾“å…¥æ–‡ä»¶</h3><blockquote>\n<p>ç¼–è¯‘å™¨ä¼šå¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†æ¥è§£ææ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨æŒ‡ä»¤ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé¢å¤–çš„æ–‡ä»¶ä¼šåŠ åˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚<br>è¿™ä¸ªè¿‡ç¨‹ä¼šä»¥ä¸€äº›æ ¹æ–‡ä»¶å¼€å§‹ï¼›å®ƒä»¬æ˜¯åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–æ˜¯åœ¨ <code>tsconfig.json</code> ä¸­çš„ <code>&quot;files&quot;</code> åˆ—è¡¨é‡Œçš„æ–‡ä»¶ã€‚è¿™äº›æ ¹æ–‡ä»¶æŒ‰æŒ‡å®šçš„é¡ºåºè¿›è¡Œé¢„å¤„ç†ã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶è¢«åŠ å…¥åˆ—è¡¨å‰ï¼Œå®ƒåŒ…å«çš„æ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨éƒ½è¦è¢«å¤„ç†ï¼Œè¿˜æœ‰å®ƒä»¬åŒ…å«çš„ç›®æ ‡ã€‚ä¸‰æ–œçº¿å¼•ç”¨ä»¥å®ƒä»¬åœ¨æ–‡ä»¶é‡Œå‡ºç°çš„é¡ºåºï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆçš„æ–¹å¼è§£æã€‚<br>Â  ä¸€ä¸ªä¸‰æ–œçº¿å¼•ç”¨è·¯å¾„æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æ–‡ä»¶çš„ï¼Œå¦‚æœä¸æ˜¯æ ¹æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h3 id=\"23-2-é”™è¯¯\"><a href=\"#23-2-é”™è¯¯\" class=\"headerlink\" title=\"23.2 é”™è¯¯\"></a>23.2 é”™è¯¯</h3><blockquote>\n<p>å¼•ç”¨ä¸å­˜åœ¨çš„æ–‡ä»¶ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªæ–‡ä»¶ç”¨ä¸‰æ–œçº¿æŒ‡ä»¤å¼•ç”¨è‡ªå·±ä¼šæŠ¥é”™ã€‚</p>\n</blockquote>\n<h3 id=\"23-3-ä½¿ç”¨-noResolve\"><a href=\"#23-3-ä½¿ç”¨-noResolve\" class=\"headerlink\" title=\"23.3 ä½¿ç”¨ --noResolve\"></a>23.3 ä½¿ç”¨ <code>--noResolve</code></h3><blockquote>\n<p>å¦‚æœæŒ‡å®šäº† <code>--noResolve</code> ç¼–è¯‘é€‰é¡¹ï¼Œä¸‰æ–œçº¿æŒ‡ä»¤ä¼šè¢«å¿½ç•¥ï¼›å®ƒä»¬ä¸ä¼šå¢åŠ æ–°æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç»™å®šæ–‡ä»¶çš„é¡ºåºã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference types=&quot;...&quot; /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸ <code>/// &lt;reference path=&quot;...&quot; /&gt;</code> æŒ‡ä»¤ç›¸ä¼¼ï¼Œè¿™ä¸ªæŒ‡ä»¤æ˜¯ç”¨æ¥å£°æ˜ä¾èµ–çš„ï¼›ä¸€ä¸ª <code>/// &lt;reference types=&quot;...&quot; /&gt;</code> æŒ‡ä»¤åˆ™å£°æ˜äº†å¯¹æŸä¸ªåŒ…çš„ä¾èµ–ã€‚</li>\n<li>å¯¹è¿™äº›åŒ…çš„åå­—çš„è§£æä¸åœ¨ <code>import</code> è¯­å¥é‡Œå¯¹æ¨¡å—åçš„è§£æç±»ä¼¼ã€‚å¯ä»¥ç®€å•åœ°æŠŠä¸‰æ–œçº¿ç±»å‹å¼•ç”¨æŒ‡ä»¤å½“åš <code>import</code> å£°æ˜çš„åŒ…ã€‚</li>\n<li>ä¾‹å¦‚ï¼ŒæŠŠ <code>/// &lt;reference types=&quot;node&quot; /&gt;</code>å¼•å…¥åˆ°å£°æ˜æ–‡ä»¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨äº†<code>@types/node/index.d.ts</code> é‡Œé¢å£°æ˜çš„åå­—ï¼›å¹¶ä¸”ï¼Œè¿™ä¸ªåŒ…éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä¸å£°æ˜æ–‡ä»¶ä¸€èµ·è¢«åŒ…å«è¿›æ¥ã€‚</li>\n<li>ä»…å½“åœ¨ä½ éœ€è¦å†™ä¸€ä¸ª <code>.d.ts</code> æ–‡ä»¶æ—¶æ‰ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ã€‚</li>\n<li>å¯¹äºé‚£äº›åœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°æ·»åŠ  <code>/// &lt;reference types=&quot;...&quot; /&gt;</code>ï¼›å½“ä¸”ä»…å½“ç»“æœæ–‡ä»¶ä¸­ä½¿ç”¨äº†å¼•ç”¨çš„åŒ…é‡Œçš„å£°æ˜æ—¶æ‰ä¼šåœ¨ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶é‡Œæ·»åŠ  Â <code>/// &lt;reference types=&quot;...&quot; /&gt;</code> è¯­å¥ã€‚</li>\n<li>è‹¥è¦åœ¨ <code>.ts</code> æ–‡ä»¶é‡Œå£°æ˜ä¸€ä¸ªå¯¹ <code>@types</code> åŒ…çš„ä¾èµ–ï¼Œä½¿ç”¨ <code>--types</code> å‘½ä»¤è¡Œé€‰é¡¹ æˆ–åœ¨ <code>tsconfig.json</code> é‡ŒæŒ‡å®šã€‚æŸ¥çœ‹ åœ¨ <code>tsconfig.json</code> é‡Œä½¿ç”¨ <code>@types</code>ï¼Œ<code>typeRoots</code> å’Œ <code>types</code> äº†è§£è¯¦æƒ…ã€‚</li>\n<li><code>/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</code> è¿™ä¸ªæŒ‡ä»¤æŠŠä¸€ä¸ªæ–‡ä»¶æ ‡è®°æˆé»˜è®¤åº“ã€‚ä½ ä¼šåœ¨ <code>lib.d.ts</code> æ–‡ä»¶å’Œå®ƒä¸åŒçš„å˜ä½“çš„é¡¶ç«¯çœ‹åˆ°è¿™ä¸ªæ³¨é‡Šã€‚è¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸è¦åŒ…å«è¿™ä¸ªé»˜è®¤åº“ï¼ˆæ¯”å¦‚ï¼Œ<code>lib.d.ts</code>ï¼‰ã€‚ è¿™ä¸åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ -<code>-noLib</code> ç›¸ä¼¼ã€‚</li>\n<li>è¿˜è¦æ³¨æ„ï¼Œå½“ä¼ é€’äº† <code>--skipDefaultLibCheck</code> æ—¶ï¼Œç¼–è¯‘å™¨åªä¼šå¿½ç•¥æ£€æŸ¥å¸¦æœ‰ <code>/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</code> çš„æ–‡ä»¶ã€‚</li>\n</ul>\n<h3 id=\"23-4-lt-amd-module-gt\"><a href=\"#23-4-lt-amd-module-gt\" class=\"headerlink\" title=\"23.4 &lt;amd-module /&gt;\"></a>23.4 <code>&lt;amd-module /&gt;</code></h3><blockquote>\n<p>é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆçš„ <code>AMD</code> æ¨¡å— éƒ½æ˜¯åŒ¿åçš„ã€‚ä½†æ˜¯ï¼Œå½“ä¸€äº›å·¥å…·éœ€è¦å¤„ç†ç”Ÿæˆçš„æ¨¡å—æ—¶ä¼šäº§ç”Ÿé—®é¢˜ï¼Œæ¯”å¦‚ <code>r.jsã€‚amd-module</code> æŒ‡ä»¤å…è®¸ç»™ç¼–è¯‘å™¨ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„æ¨¡å—åï¼š</p>\n</blockquote>\n<ul>\n<li><code>amdModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;amd-module name=&quot;NamedModule&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¼šå°† <code>NamedModule</code> ä¼ å…¥åˆ° <code>AMD define</code> å‡½æ•°é‡Œï¼š</p>\n</blockquote>\n<ul>\n<li><code>amdModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(<span class=\"string\">&quot;NamedModule&quot;</span>, [<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> C = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">  &#125;)();</span><br><span class=\"line\">  <span class=\"built_in\">exports</span>.C = C;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"23-5-lt-amd-dependency-gt\"><a href=\"#23-5-lt-amd-dependency-gt\" class=\"headerlink\" title=\"23.5 &lt;amd-dependency /&gt;\"></a>23.5 <code>&lt;amd-dependency /&gt;</code></h3><ul>\n<li>æ³¨æ„ï¼šè¿™ä¸ªæŒ‡ä»¤è¢«åºŸå¼ƒäº†ã€‚ä½¿ç”¨ <code>import &quot;moduleName&quot;;</code> è¯­å¥ä»£æ›¿ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;amd-dependency path=&quot;x&quot; /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å‘Šè¯‰ç¼–è¯‘å™¨æœ‰ä¸€ä¸ªé TypeScript æ¨¡å—ä¾èµ–éœ€è¦è¢«æ³¨å…¥ï¼Œåšä¸ºç›®æ ‡æ¨¡å— require è°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>amd-dependency</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå¯é€‰çš„ <code>name</code> å±æ€§ï¼›å®ƒå…è®¸æˆ‘ä»¬ä¸º <code>amd-dependency</code> ä¼ å…¥ä¸€ä¸ªå¯é€‰åå­—ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;amd-dependency path=&quot;legacy/moduleA&quot; name=&quot;moduleA&quot;/&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">var</span> moduleA: MyType;</span><br><span class=\"line\">moduleA.callStuff();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç”Ÿæˆçš„ <code>JavaScript</code> ä»£ç ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>, <span class=\"string\">&quot;legacy/moduleA&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span>, moduleA</span>) </span>&#123;</span><br><span class=\"line\">  moduleA.callStuff();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒåå››ã€JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\"><a href=\"#äºŒåå››ã€JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"äºŒåå››ã€JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\"></a>äºŒåå››ã€JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥</h2><h3 id=\"24-1-JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\"><a href=\"#24-1-JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"24.1 JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\"></a>24.1 JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥</h3><blockquote>\n<p><code>TypeScript 2.3</code> ä»¥åçš„ç‰ˆæœ¬æ”¯æŒä½¿ç”¨ <code>--checkJs</code> å¯¹ <code>.js</code> æ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥å’Œé”™è¯¯æç¤ºã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä½ å¯ä»¥é€šè¿‡æ·»åŠ  <code>// @ts-nocheck</code> æ³¨é‡Šæ¥å¿½ç•¥ç±»å‹æ£€æŸ¥ï¼›ç›¸åï¼Œä½ å¯ä»¥é€šè¿‡å»æ‰ <code>--checkJs</code> è®¾ç½®å¹¶æ·»åŠ ä¸€ä¸ª <code>// @ts-nocheck</code> æ³¨é‡Šæ¥é€‰æ‹©æ£€æŸ¥æŸäº› <code>.js</code> æ–‡ä»¶ã€‚ä½ è¿˜å¯ä»¥ç”¨ <code>// @ts-ignore</code> æ¥å¿½ç•¥æœ¬è¡Œçš„é”™è¯¯ã€‚å¦‚æœä½ ä½¿ç”¨äº† <code>tsconfig.json</code>ï¼Œ<code>JS</code> æ£€æŸ¥å°†éµç…§ä¸€äº›ä¸¥æ ¼æ£€æŸ¥æ ‡è®°ï¼Œå¦‚ <code>noImplicitAny</code>ï¼Œ<code>strictNullChecks</code> ç­‰ã€‚ä½†å› ä¸º <code>JS</code> æ£€æŸ¥æ˜¯ç›¸å¯¹å®½æ¾çš„ï¼Œåœ¨ä½¿ç”¨ä¸¥æ ¼æ ‡è®°æ—¶å¯èƒ½ä¼šæœ‰äº›å‡ºä¹æ„æ–™çš„æƒ…å†µã€‚</p>\n</blockquote>\n<ul>\n<li>å¯¹æ¯” <code>.js</code>æ–‡ä»¶å’Œ <code>.ts</code> æ–‡ä»¶åœ¨ç±»å‹æ£€æŸ¥ä¸Šçš„å·®å¼‚ï¼Œæœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„</li>\n</ul>\n<h4 id=\"1-ç”¨-JSDoc-ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\"><a href=\"#1-ç”¨-JSDoc-ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\" class=\"headerlink\" title=\"(1) ç”¨ JSDoc ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\"></a>(1) ç”¨ <code>JSDoc</code> ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯</h4><blockquote>\n<p><code>.js</code> æ–‡ä»¶é‡Œï¼Œç±»å‹å¯ä»¥å’Œåœ¨ <code>.ts</code> æ–‡ä»¶é‡Œä¸€æ ·è¢«æ¨æ–­å‡ºæ¥ã€‚åŒæ ·åœ°ï¼Œå½“ç±»å‹ä¸èƒ½è¢«æ¨æ–­æ—¶ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ <code>JSDoc</code> æ¥æŒ‡å®šï¼Œå°±å¥½æ¯”åœ¨ <code>.ts</code> æ–‡ä»¶é‡Œé‚£æ ·ã€‚å¦‚åŒ <code>TypeScript</code>ï¼Œ<code>--noImplicitAny</code> ä¼šåœ¨ç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹çš„ä½ç½®æŠ¥é”™ã€‚ï¼ˆé™¤äº†å¯¹è±¡å­—é¢é‡çš„æƒ…å†µï¼›åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰<code>JSDoc</code> æ³¨è§£ä¿®é¥°çš„å£°æ˜ä¼šè¢«è®¾ç½®ä¸ºè¿™ä¸ªå£°æ˜çš„ç±»å‹ã€‚æ¯”å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x;</span><br><span class=\"line\">x = <span class=\"number\">0</span>; <span class=\"comment\">// OK</span></span><br><span class=\"line\">x = <span class=\"literal\">false</span>; <span class=\"comment\">// Error: boolean is not assignable to number</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ‰€æœ‰ <code>JSDoc</code> æ”¯æŒçš„æ¨¡å¼ï¼Œ<a href=\"https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript\">JSDoc æ–‡æ¡£</a>ã€‚</p>\n</blockquote>\n<h4 id=\"2-å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\"><a href=\"#2-å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\" class=\"headerlink\" title=\"(2) å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\"></a>(2) å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥</h4><blockquote>\n<p><code>ES2015</code> æ²¡æä¾›å£°æ˜ç±»å±æ€§çš„æ–¹æ³•ã€‚å±æ€§æ˜¯åŠ¨æ€èµ‹å€¼çš„ï¼Œå°±åƒå¯¹è±¡å­—é¢é‡ä¸€æ ·ã€‚åœ¨ <code>.js</code> æ–‡ä»¶é‡Œï¼Œç¼–è¯‘å™¨ä»ç±»å†…éƒ¨çš„å±æ€§èµ‹å€¼è¯­å¥æ¥æ¨æ–­å±æ€§ç±»å‹ã€‚å±æ€§çš„ç±»å‹æ˜¯åœ¨æ„é€ å‡½æ•°é‡Œèµ‹çš„å€¼çš„ç±»å‹ï¼Œé™¤éå®ƒæ²¡åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰æˆ–è€…åœ¨æ„é€ å‡½æ•°é‡Œæ˜¯ <code>undefined</code> æˆ– <code>null</code>ã€‚è‹¥æ˜¯è¿™ç§æƒ…å†µï¼Œç±»å‹å°†ä¼šæ˜¯æ‰€æœ‰èµ‹å€¼çš„ç±»å‹çš„è”åˆç±»å‹ã€‚åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰çš„å±æ€§ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œç„¶è€Œé‚£äº›åœ¨æ–¹æ³•ï¼Œå­˜å–å™¨é‡Œå®šä¹‰çš„å±æ€§è¢«å½“æˆå¯é€‰çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorOnly = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorOnly = <span class=\"literal\">false</span>; <span class=\"comment\">// error, constructorOnly is a number</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"string\">&quot;plunkbat&quot;</span>; <span class=\"comment\">// ok, constructorUnknown is string | undefined</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.methodOnly = <span class=\"string\">&quot;ok&quot;</span>; <span class=\"comment\">// ok, but y could also be undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method2</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.methodOnly = <span class=\"literal\">true</span>; <span class=\"comment\">// also, ok, y&#x27;s type is string | boolean | undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœä¸€ä¸ªå±æ€§ä»æ²¡åœ¨ç±»å†…è®¾ç½®è¿‡ï¼Œå®ƒä»¬ä¼šè¢«å½“æˆæœªçŸ¥çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœç±»çš„å±æ€§åªæ˜¯è¯»å–ç”¨çš„ï¼Œé‚£ä¹ˆå°±åœ¨æ„é€ å‡½æ•°é‡Œç”¨ <code>JSDoc</code> å£°æ˜å®ƒçš„ç±»å‹ã€‚å¦‚æœå®ƒç¨åä¼šè¢«åˆå§‹åŒ–ï¼Œä½ ç”šè‡³éƒ½ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°é‡Œç»™å®ƒèµ‹å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;name | undefined&#125;</span> </span>*/</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.prop = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number | undefined&#125;</span> </span>*/</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.count;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">c.prop = <span class=\"number\">0</span>; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">c.count = <span class=\"string\">&quot;string&quot;</span>; <span class=\"comment\">// Error: string is not assignable to number | undefined</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-æ„é€ å‡½æ•°ç­‰åŒäºç±»\"><a href=\"#3-æ„é€ å‡½æ•°ç­‰åŒäºç±»\" class=\"headerlink\" title=\"(3) æ„é€ å‡½æ•°ç­‰åŒäºç±»\"></a>(3) æ„é€ å‡½æ•°ç­‰åŒäºç±»</h4><blockquote>\n<p><code>ES2015</code> ä»¥å‰ï¼Œ<code>Javascript</code> ä½¿ç”¨æ„é€ å‡½æ•°ä»£æ›¿ç±»ã€‚ç¼–è¯‘å™¨æ”¯æŒè¿™ç§æ¨¡å¼å¹¶èƒ½å¤Ÿå°†æ„é€ å‡½æ•°è¯†åˆ«ä¸º <code>ES2015</code> çš„ç±»ã€‚å±æ€§ç±»å‹æ¨æ–­æœºåˆ¶å’Œä¸Šé¢ä»‹ç»çš„ä¸€è‡´ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorOnly = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">C.prototype.method = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorOnly = <span class=\"literal\">false</span>; <span class=\"comment\">// error</span></span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"string\">&quot;plunkbat&quot;</span>; <span class=\"comment\">// OK, the type is string | undefined</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-æ”¯æŒ-CommonJS-æ¨¡å—\"><a href=\"#4-æ”¯æŒ-CommonJS-æ¨¡å—\" class=\"headerlink\" title=\"(4) æ”¯æŒ CommonJS æ¨¡å—\"></a>(4) æ”¯æŒ <code>CommonJS</code> æ¨¡å—</h4><blockquote>\n<p>åœ¨ <code>.js</code> æ–‡ä»¶é‡Œï¼Œ<code>TypeScript</code> èƒ½è¯†åˆ«å‡º <code>CommonJS</code> æ¨¡å—ã€‚å¯¹ <code>exports</code> å’Œ <code>module.exports</code> çš„èµ‹å€¼è¢«è¯†åˆ«ä¸ºå¯¼å‡ºå£°æ˜ã€‚ç›¸ä¼¼åœ°ï¼Œ<code>require</code> å‡½æ•°è°ƒç”¨è¢«è¯†åˆ«ä¸ºæ¨¡å—å¯¼å…¥ã€‚ä¾‹å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// same as `import module &#x27;fs&#x27;`</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// same as `export function readFile`</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.readFile = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">f</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fs.readFileSync(f);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¹ <code>JavaScript</code> æ–‡ä»¶é‡Œæ¨¡å—è¯­æ³•çš„æ”¯æŒæ¯”åœ¨ <code>TypeScript</code> é‡Œå®½æ³›å¤šäº†ã€‚ å¤§éƒ¨åˆ†çš„èµ‹å€¼å’Œå£°æ˜æ–¹å¼éƒ½æ˜¯å…è®¸çš„ã€‚</p>\n</blockquote>\n<h4 id=\"5-ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\"><a href=\"#5-ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\" class=\"headerlink\" title=\"(5) ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\"></a>(5) ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .js æ–‡ä»¶é‡Œçš„ç±»æ˜¯å‘½åç©ºé—´ã€‚å®ƒå¯ä»¥ç”¨äºåµŒå¥—ç±»ï¼Œæ¯”å¦‚ï¼š</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;&#125;</span><br><span class=\"line\">C.D = <span class=\"class\"><span class=\"keyword\">class</span> </span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// ES2015 ä¹‹å‰çš„ä»£ç ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿé™æ€æ–¹æ³•ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Outer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.y = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Outer.Inner = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.yy = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å®ƒè¿˜å¯ä»¥ç”¨äºåˆ›å»ºç®€å•çš„å‘½åç©ºé—´ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ns = &#123;&#125;;</span><br><span class=\"line\">ns.C = <span class=\"class\"><span class=\"keyword\">class</span> </span>&#123;&#125;;</span><br><span class=\"line\">ns.func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// åŒæ—¶è¿˜æ”¯æŒå…¶å®ƒçš„å˜åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">// ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ns = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n | &#123;&#125;;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\">ns.COUNT = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// defaulting to global</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> assign =</span><br><span class=\"line\">  assign ||</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// code goes here</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">assign.extra = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6-å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\"><a href=\"#6-å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\" class=\"headerlink\" title=\"(6) å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\"></a>(6) å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„</h4><ul>\n<li><code>.ts</code> æ–‡ä»¶é‡Œï¼Œç”¨å¯¹è±¡å­—é¢é‡åˆå§‹åŒ–ä¸€ä¸ªå˜é‡çš„åŒæ—¶ä¹Ÿç»™å®ƒå£°æ˜äº†ç±»å‹ã€‚ æ–°çš„æˆå‘˜ä¸èƒ½å†è¢«æ·»åŠ åˆ°å¯¹è±¡å­—é¢é‡ä¸­ã€‚è¿™ä¸ªè§„åˆ™åœ¨ <code>.js</code> æ–‡ä»¶é‡Œè¢«æ”¾å®½äº†ï¼›å¯¹è±¡å­—é¢é‡å…·æœ‰å¼€æ”¾çš„ç±»å‹ï¼Œå…è®¸æ·»åŠ å¹¶è®¿é—®åŸå…ˆæ²¡æœ‰å®šä¹‰çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">obj.b = <span class=\"number\">2</span>; <span class=\"comment\">// Allowed</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯¹è±¡å­—é¢é‡çš„è¡¨ç°å°±å¥½æ¯”å…·æœ‰ä¸€ä¸ªé»˜è®¤çš„ç´¢å¼•ç­¾å <code>\\[x:string\\]: any</code>ï¼Œå®ƒä»¬å¯ä»¥è¢«å½“æˆå¼€æ”¾çš„æ˜ å°„è€Œä¸æ˜¯å°é—­çš„å¯¹è±¡ã€‚</li>\n<li>ä¸å…¶å®ƒ <code>JS</code> æ£€æŸ¥è¡Œä¸ºç›¸ä¼¼ï¼Œè¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡æŒ‡å®š <code>JSDoc</code> ç±»å‹æ¥æ”¹å˜ï¼Œä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;&#123; a: number &#125;</span></span>&#125; */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">obj.b = <span class=\"number\">2</span>; <span class=\"comment\">// Error, type &#123;a: number&#125; does not have property b</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-null-undefined-å’Œ-ç©ºæ•°ç»„çš„ç±»å‹æ˜¯-any-æˆ–-any\"><a href=\"#7-null-undefined-å’Œ-ç©ºæ•°ç»„çš„ç±»å‹æ˜¯-any-æˆ–-any\" class=\"headerlink\" title=\"(7) null undefined å’Œ ç©ºæ•°ç»„çš„ç±»å‹æ˜¯ any æˆ– any[]\"></a>(7) null undefined å’Œ ç©ºæ•°ç»„çš„ç±»å‹æ˜¯ any æˆ– any[]</h4><blockquote>\n<p>ä»»ä½•ç”¨ <code>null</code>ï¼Œ<code>undefined</code> åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ <code>any</code>ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ <code>null</code> æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ä»»ä½•ç”¨ <code>[]</code> åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ <code>any[]</code>ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ <code>null</code> æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ å”¯ä¸€çš„ä¾‹å¤–æ˜¯åƒä¸Šé¢é‚£æ ·æœ‰å¤šä¸ªåˆå§‹åŒ–å™¨çš„å±æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\">i = <span class=\"literal\">null</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!i) i = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> j = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  j = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.l = [];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> foo = <span class=\"keyword\">new</span> Foo();</span><br><span class=\"line\">foo.l.push(foo.i);</span><br><span class=\"line\">foo.l.push(<span class=\"string\">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"8-å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\"><a href=\"#8-å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\" class=\"headerlink\" title=\"(8) å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\"></a>(8) å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„</h4><blockquote>\n<p>ç”±äºåœ¨ <code>ES2015</code> ä¹‹å‰æ— æ³•æŒ‡å®šå¯é€‰å‚æ•°ï¼Œå› æ­¤ <code>.js</code> æ–‡ä»¶é‡Œæ‰€æœ‰å‡½æ•°å‚æ•°éƒ½è¢«å½“åšæ˜¯å¯é€‰çš„ã€‚ ä½¿ç”¨æ¯”é¢„æœŸå°‘çš„å‚æ•°è°ƒç”¨å‡½æ•°æ˜¯å…è®¸çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨è¿‡å¤šçš„å‚æ•°è°ƒç”¨å‡½æ•°ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a + <span class=\"string\">&quot; &quot;</span> + b);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">bar(<span class=\"number\">1</span>); <span class=\"comment\">// OK, second argument considered optional</span></span><br><span class=\"line\">bar(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">bar(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>); <span class=\"comment\">// Error, too many arguments</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>JSDoc</code> æ³¨è§£çš„å‡½æ•°ä¼šè¢«ä»è¿™æ¡è§„åˆ™é‡Œç§»é™¤ã€‚ä½¿ç”¨ <code>JSDoc</code> å¯é€‰å‚æ•°è¯­æ³•æ¥è¡¨ç¤ºå¯é€‰æ€§ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯”å¦‚ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>[somebody] - Somebody&#x27;s name.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\">somebody</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!somebody) &#123;</span><br><span class=\"line\">    somebody = <span class=\"string\">&quot;John Doe&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello &quot;</span> + somebody);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">sayHello();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"9-ç”±-arguments-æ¨æ–­å‡ºçš„-var-args-å‚æ•°å£°æ˜\"><a href=\"#9-ç”±-arguments-æ¨æ–­å‡ºçš„-var-args-å‚æ•°å£°æ˜\" class=\"headerlink\" title=\"(9) ç”± arguments æ¨æ–­å‡ºçš„ var-args å‚æ•°å£°æ˜\"></a>(9) ç”± <code>arguments</code> æ¨æ–­å‡ºçš„ <code>var-args</code> å‚æ•°å£°æ˜</h4><blockquote>\n<p>å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ä½“å†…æœ‰å¯¹ <code>arguments</code> çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¼šéšå¼åœ°è¢«è®¤ä¸ºå…·æœ‰ä¸€ä¸ª <code>var-arg</code> å‚æ•°ï¼ˆæ¯”å¦‚: <code>(...arg: any[]) =&gt;; any)</code>ï¼‰ã€‚ä½¿ç”¨ <code>JSDoc</code> çš„ <code>var-arg</code> è¯­æ³•æ¥æŒ‡å®š <code>arguments</code> çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@param <span class=\"type\">&#123;...number&#125;</span> </span>args */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\"><span class=\"comment\">/* numbers */</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> total = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">arguments</span>.length; i++) &#123;</span><br><span class=\"line\">    total += <span class=\"built_in\">arguments</span>[i];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> total;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"10-æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º-any\"><a href=\"#10-æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º-any\" class=\"headerlink\" title=\"(10) æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º any\"></a>(10) æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º <code>any</code></h4><blockquote>\n<p>ç”±äº <code>JavaScript</code> é‡Œæ²¡æœ‰ä¸€ç§è‡ªç„¶çš„è¯­æ³•æ¥æŒ‡å®šæ³›å‹å‚æ•°ï¼Œå› æ­¤æœªæŒ‡å®šçš„å‚æ•°ç±»å‹é»˜è®¤ä¸º <code>any</code>ã€‚</p>\n</blockquote>\n<h4 id=\"11-åœ¨-extends-è¯­å¥ä¸­ï¼š\"><a href=\"#11-åœ¨-extends-è¯­å¥ä¸­ï¼š\" class=\"headerlink\" title=\"(11) åœ¨ extends è¯­å¥ä¸­ï¼š\"></a>(11) åœ¨ <code>extends</code> è¯­å¥ä¸­ï¼š</h4><blockquote>\n<p>ä¾‹å¦‚ï¼Œ<code>React.Component</code> è¢«å®šä¹‰æˆå…·æœ‰ä¸¤ä¸ªç±»å‹å‚æ•°ï¼Œ<code>Props</code> å’Œ <code>State</code>ã€‚ åœ¨ä¸€ä¸ª <code>.js</code> æ–‡ä»¶é‡Œï¼Œæ²¡æœ‰ä¸€ä¸ªåˆæ³•çš„æ–¹å¼åœ¨ <code>extends</code> è¯­å¥é‡ŒæŒ‡å®šå®ƒä»¬ã€‚é»˜è®¤åœ°å‚æ•°ç±»å‹ä¸º <code>any</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.props.b; <span class=\"comment\">// Allowed, since this.props is of type any</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>JSDoc</code> çš„ <code>@augments</code> æ¥æ˜ç¡®åœ°æŒ‡å®šç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@augments <span class=\"type\">&#123;Component&lt;&#123;a: number&#125;</span></span>, State&gt;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.props.b; <span class=\"comment\">// Error: b does not exist on &#123;a:number&#125;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"12-åœ¨-JSDoc-å¼•ç”¨ä¸­\"><a href=\"#12-åœ¨-JSDoc-å¼•ç”¨ä¸­\" class=\"headerlink\" title=\"(12) åœ¨ JSDoc å¼•ç”¨ä¸­\"></a>(12) åœ¨ JSDoc å¼•ç”¨ä¸­</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type<span class=\"type\">&#123;Array&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x = [];</span><br><span class=\"line\"></span><br><span class=\"line\">x.push(<span class=\"number\">1</span>); <span class=\"comment\">// OK</span></span><br><span class=\"line\">x.push(<span class=\"string\">&quot;string&quot;</span>); <span class=\"comment\">// OK, x is of type Array&lt;any&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type<span class=\"type\">&#123;Array.&lt;number&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> y = [];</span><br><span class=\"line\"></span><br><span class=\"line\">y.push(<span class=\"number\">1</span>); <span class=\"comment\">// OK</span></span><br><span class=\"line\">y.push(<span class=\"string\">&quot;string&quot;</span>); <span class=\"comment\">// Error, string is not assignable to number</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"13-åœ¨å‡½æ•°è°ƒç”¨ä¸­\"><a href=\"#13-åœ¨å‡½æ•°è°ƒç”¨ä¸­\" class=\"headerlink\" title=\"(13) åœ¨å‡½æ•°è°ƒç”¨ä¸­\"></a>(13) åœ¨å‡½æ•°è°ƒç”¨ä¸­</h4><blockquote>\n<p>æ³›å‹å‡½æ•°çš„è°ƒç”¨ä½¿ç”¨ <code>arguments</code> æ¥æ¨æ–­æ³›å‹å‚æ•°ã€‚æœ‰æ—¶å€™ï¼Œè¿™ä¸ªæµç¨‹ä¸èƒ½å¤Ÿæ¨æ–­å‡ºç±»å‹ï¼Œå¤§å¤šæ˜¯å› ä¸ºç¼ºå°‘æ¨æ–­çš„æºï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å‹å‚æ•°ç±»å‹é»˜è®¤ä¸º <code>any</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä¾‹å¦‚ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  reject();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">p; <span class=\"comment\">// Promise&lt;any&gt;;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"24-2-æ”¯æŒçš„-JSDoc\"><a href=\"#24-2-æ”¯æŒçš„-JSDoc\" class=\"headerlink\" title=\"24.2 æ”¯æŒçš„ JSDoc\"></a>24.2 æ”¯æŒçš„ JSDoc</h3><blockquote>\n<p>é¢çš„åˆ—è¡¨åˆ—å‡ºäº†å½“å‰æ‰€æ”¯æŒçš„ <code>JSDoc</code> æ³¨è§£ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬åœ¨ <code>JavaScript</code> æ–‡ä»¶é‡Œæ·»åŠ ç±»å‹ä¿¡æ¯ã€‚ æ³¨æ„ï¼Œæ²¡æœ‰åœ¨ä¸‹é¢åˆ—å‡ºçš„æ ‡è®°ï¼ˆä¾‹å¦‚ <code>@async</code>ï¼‰éƒ½æ˜¯è¿˜ä¸æ”¯æŒçš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span>  <span class=\"meta\">@type</span></span><br><span class=\"line\"><span class=\"number\">2.</span>  <span class=\"meta\">@param</span> (or <span class=\"meta\">@arg</span> or <span class=\"meta\">@argument</span>)</span><br><span class=\"line\"><span class=\"number\">3.</span>  <span class=\"meta\">@returns</span> (or <span class=\"meta\">@return</span>)</span><br><span class=\"line\"><span class=\"number\">4.</span>  <span class=\"meta\">@typedef</span></span><br><span class=\"line\"><span class=\"number\">5.</span>  <span class=\"meta\">@callback</span></span><br><span class=\"line\"><span class=\"number\">6.</span>  <span class=\"meta\">@template</span></span><br><span class=\"line\"><span class=\"number\">7.</span>  <span class=\"meta\">@class</span> (or <span class=\"meta\">@constructor</span>)</span><br><span class=\"line\"><span class=\"number\">8.</span>  <span class=\"meta\">@this</span></span><br><span class=\"line\"><span class=\"number\">9.</span>  <span class=\"meta\">@extends</span> (or <span class=\"meta\">@augments</span>)</span><br><span class=\"line\"><span class=\"number\">10.</span> <span class=\"meta\">@enum</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒä»¬ä»£è¡¨çš„æ„ä¹‰ä¸ <code>usejsdoc.org</code> ä¸Šé¢ç»™å‡ºçš„é€šå¸¸æ˜¯ä¸€è‡´çš„æˆ–è€…æ˜¯å®ƒçš„è¶…é›†ã€‚ ä¸‹é¢çš„ä»£ç æè¿°äº†å®ƒä»¬çš„åŒºåˆ«å¹¶ç»™å‡ºäº†ä¸€äº›ç¤ºä¾‹ã€‚</p>\n</blockquote>\n<h4 id=\"1-type\"><a href=\"#1-type\" class=\"headerlink\" title=\"(1) @type \"></a>(1) <a href=\"/type\">@type </a></h4><blockquote>\n<p>å¯ä»¥ä½¿ç”¨ <code>@type</code> æ ‡è®°å¹¶å¼•ç”¨ä¸€ä¸ªç±»å‹åç§°ï¼ˆåŸå§‹ç±»å‹ï¼Œ<code>TypeScript</code> é‡Œå£°æ˜çš„ç±»å‹ï¼Œæˆ–åœ¨ <code>JSDoc</code> é‡Œ <code>@typedef</code> æ ‡è®°æŒ‡å®šçš„ï¼‰å¯ä»¥ä½¿ç”¨ä»»ä½• <code>TypeScript</code> ç±»å‹å’Œå¤§å¤šæ•° <code>JSDoc</code> ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;string&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> s;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Window&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> win;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;PromiseLike&lt;string&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> promisedString;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// You can specify an HTML Element with DOM properties</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;HTMLElement&#125;</span> </span>*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> myElement = <span class=\"built_in\">document</span>.querySelector(selector);</span><br><span class=\"line\">element.dataset.myData = <span class=\"string\">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>@type</code> å¯ä»¥æŒ‡å®šè”åˆç±»å‹â€”ä¾‹å¦‚ï¼Œ<code>string</code> å’Œ <code>boolean</code> ç±»å‹çš„è”åˆã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;&#123;string | boolean&#125;</span></span>&#125; */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sb;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ³¨æ„ï¼šæ‹¬å·æ˜¯å¯é€‰çš„</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;string | boolean&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sb;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æœ‰å¤šç§æ–¹å¼æ¥æŒ‡å®šæ•°ç»„ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number[]&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ns;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Array.&lt;number&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nds;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Array&lt;number&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nas;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿˜å¯ä»¥æŒ‡å®šå¯¹è±¡å­—é¢é‡ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ <code>a(å­—ç¬¦ä¸²)</code> å’Œ <code>b(æ•°å­—)</code> å±æ€§çš„å¯¹è±¡ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;&#123;a: string, b: number&#125;</span></span>&#125; */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> var9;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å’Œæ•°å­—ç´¢å¼•ç­¾åæ¥æŒ‡å®š <code>map-like</code> å’Œ <code>array-like</code> çš„å¯¹è±¡ï¼Œä½¿ç”¨æ ‡å‡†çš„ <code>JSDoc</code> è¯­æ³•æˆ–è€… <code>TypeScript</code> è¯­æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A map-like object that maps arbitrary `string` properties to `number`s.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;Object.&lt;string, number&gt;&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> stringToNumber;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Object.&lt;number, object&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arrayLike;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™ä¸¤ä¸ªç±»å‹ä¸ <code>TypeScript</code> é‡Œçš„ <code>&#123; [x: string]: number &#125;</code> å’Œ <code>&#123; [x: number]: any &#125;</code> æ˜¯ç­‰åŒçš„ã€‚ ç¼–è¯‘å™¨èƒ½è¯†åˆ«å‡ºè¿™ä¸¤ç§è¯­æ³•ã€‚</li>\n<li>å¯ä»¥ä½¿ç”¨ <code>TypeScript</code> æˆ– <code>Closure</code> è¯­æ³•æŒ‡å®šå‡½æ•°ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;function(string, boolean): number&#125;</span> </span>Closure syntax */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sbn;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;(s: string, b: boolean) =&gt; number&#125;</span> </span>Typescript syntax */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sbn2;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ–è€…ç›´æ¥ä½¿ç”¨æœªæŒ‡å®šçš„ <code>Function</code> ç±»å‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Function&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn7;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;function&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn6;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Closure</code> çš„å…¶å®ƒç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;*&#125;</span> </span>- can be &#x27;any&#x27; type */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> star;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;?&#125;</span> </span>- unknown type (same as &#x27;any&#x27;) */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> question;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-è½¬æ¢\"><a href=\"#2-è½¬æ¢\" class=\"headerlink\" title=\"(2) è½¬æ¢\"></a>(2) è½¬æ¢</h4><blockquote>\n<p><code>TypeScript</code> å€Ÿé‰´äº† <code>Closure</code> é‡Œçš„è½¬æ¢è¯­æ³•ã€‚åœ¨æ‹¬å·è¡¨è¾¾å¼å‰é¢ä½¿ç”¨ <code>@type</code> æ ‡è®°ï¼Œå¯ä»¥å°†ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;number | string&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> numberOrString = <span class=\"built_in\">Math</span>.random() &lt; <span class=\"number\">0.5</span> ? <span class=\"string\">&quot;hello&quot;</span> : <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> typeAssertedNumber = <span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number&#125;</span> </span>*/</span> numberOrString;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-å¯¼å…¥ç±»å‹\"><a href=\"#3-å¯¼å…¥ç±»å‹\" class=\"headerlink\" title=\"(3) å¯¼å…¥ç±»å‹\"></a>(3) å¯¼å…¥ç±»å‹</h4><blockquote>\n<p>å¯ä»¥ä½¿ç”¨å¯¼å…¥ç±»å‹ä»å…¶å®ƒæ–‡ä»¶ä¸­å¯¼å…¥å£°æ˜ã€‚ è¿™ä¸ªè¯­æ³•æ˜¯ <code>TypeScript</code> ç‰¹æœ‰çš„ï¼Œä¸ <code>JSDoc</code> æ ‡å‡†ä¸åŒï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param </span>p &#123; import(&quot;./a&quot;).Pet &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">walk</span>(<span class=\"params\">p</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Walking <span class=\"subst\">$&#123;p.name&#125;</span>...`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å…¥ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ç±»å‹åˆ«åå£°æ˜ä¸­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@typedef </span>Pet &#123; import(&quot;./a&quot;).Pet &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;Pet&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myPet;</span><br><span class=\"line\">myPet.name;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å…¥ç±»å‹å¯ä»¥ç”¨åœ¨ä»æ¨¡å—ä¸­å¾—åˆ°ä¸€ä¸ªå€¼çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;typeof import(&quot;./a&quot;).x &#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./a&quot;</span>).x;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-param-å’Œ-returns\"><a href=\"#4-param-å’Œ-returns\" class=\"headerlink\" title=\"(4) @param  å’Œ @returns \"></a>(4) <a href=\"/param\">@param </a> å’Œ <a href=\"/returns\">@returns </a></h4><blockquote>\n<p><code>@param</code> è¯­æ³• å’Œ <code>@type</code> ç›¸åŒï¼Œä½†å¢åŠ äº†ä¸€ä¸ªå‚æ•°åã€‚ ä½¿ç”¨ <code>[]</code> å¯ä»¥æŠŠå‚æ•°å£°æ˜ä¸ºå¯é€‰çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Parameters may be declared in a variety of syntactic forms</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span>  <span class=\"variable\">p1</span></span> - A string param.</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string=&#125;</span> <span class=\"variable\">p2</span></span> - An optional param (Closure syntax)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>[p3] - Another optional param (JSDoc syntax).</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>[p4=&quot;test&quot;] - An optional param with a default value</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;string&#125;</span> </span>This is the result</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stringsStringStrings</span>(<span class=\"params\">p1, p2, p3, p4</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// TODO</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;PromiseLike&lt;string&gt;&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ps</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@returns <span class=\"type\">&#123;&#123; a: string, b: number &#125;</span></span>&#125; - May use &#x27;<span class=\"doctag\">@returns</span>&#x27; as well as &#x27;<span class=\"doctag\">@return</span>&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ab</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5-typedef-callback-å’Œ-param\"><a href=\"#5-typedef-callback-å’Œ-param\" class=\"headerlink\" title=\"(5) @typedef, @callback, å’Œ @param \"></a>(5) @typedef, @callback, å’Œ <a href=\"/param\">@param </a></h4><blockquote>\n<p><code>@typedef</code> å¯ä»¥ç”¨æ¥å£°æ˜å¤æ‚ç±»å‹ã€‚å’Œ <code>@param</code> ç±»ä¼¼çš„è¯­æ³•ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@typedef <span class=\"type\">&#123;Object&#125;</span> <span class=\"variable\">SpecialType</span></span> - creates a new type named &#x27;SpecialType&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">prop1</span></span> - a string property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number&#125;</span> <span class=\"variable\">prop2</span></span> - a number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number=&#125;</span> <span class=\"variable\">prop3</span></span> - an optional number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@prop <span class=\"type\">&#123;number&#125;</span> </span>[prop4] - an optional number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@prop <span class=\"type\">&#123;number&#125;</span> </span>[prop5=42] - an optional number property of SpecialType with default</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;SpecialType&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> specialTypeObject;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥åœ¨ç¬¬ä¸€è¡Œä¸Šä½¿ç”¨ <code>object</code> æˆ– <code>Object</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@typedef <span class=\"type\">&#123;object&#125;</span> <span class=\"variable\">SpecialType1</span></span> - creates a new type named &#x27;SpecialType&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">prop1</span></span> - a string property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number&#125;</span> <span class=\"variable\">prop2</span></span> - a number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number=&#125;</span> <span class=\"variable\">prop3</span></span> - an optional number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;SpecialType1&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> specialTypeObject1;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>@param</code> å…è®¸ä½¿ç”¨ç›¸ä¼¼çš„è¯­æ³•ã€‚ æ³¨æ„ï¼ŒåµŒå¥—çš„å±æ€§åå¿…é¡»ä½¿ç”¨å‚æ•°ååšä¸ºå‰ç¼€ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;Object&#125;</span> <span class=\"variable\">options</span></span> - The shape is the same as SpecialType above</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>options.prop1</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>options.prop2</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number=&#125;</span> </span>options.prop3</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>[options.prop4]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>[options.prop5=42]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">special</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (options.prop4 || <span class=\"number\">1001</span>) + options.prop5;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>@callback</code> ä¸ <code>@typedef</code> ç›¸ä¼¼ï¼Œä½†å®ƒæŒ‡å®šå‡½æ•°ç±»å‹è€Œä¸æ˜¯å¯¹è±¡ç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@callback <span class=\"variable\">Predicate</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">data</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>[index]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@returns <span class=\"type\">&#123;boolean&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Predicate&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ok = <span class=\"function\"><span class=\"params\">s</span> =&gt;</span> !(s.length % <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“ç„¶ï¼Œæ‰€æœ‰è¿™äº›ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ <code>TypeScript</code> çš„è¯­æ³• <code>@typedef</code> åœ¨ä¸€è¡Œä¸Šå£°æ˜ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@typedef <span class=\"type\">&#123;&#123; prop1: string, prop2: string, prop3?: number &#125;</span></span>&#125; SpecialType */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@typedef <span class=\"type\">&#123;(data: string, index?: number) =&gt; boolean&#125;</span> </span>Predicate */</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6-template\"><a href=\"#6-template\" class=\"headerlink\" title=\"(6) @template \"></a>(6) <a href=\"/template\">@template </a></h4><blockquote>\n<p>ä½¿ç”¨ <code>@template</code> å£°æ˜æ³›å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"variable\">T</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;T&#125;</span> <span class=\"variable\">p1</span></span> - A generic parameter that flows through to the return type</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;T&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">id</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”¨é€—å·æˆ–å¤šä¸ªæ ‡è®°æ¥å£°æ˜å¤šä¸ªç±»å‹å‚æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template </span>T,U,V</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template </span>W,X</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿˜å¯ä»¥åœ¨å‚æ•°åå‰æŒ‡å®šç±»å‹çº¦æŸã€‚åªæœ‰åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ç±»å‹å‚æ•°ä¼šè¢«çº¦æŸ:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">K</span></span> - K must be a string or string literal</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"type\">&#123;&#123; serious(): string &#125;</span></span>&#125; Seriousalizable - must have a serious method</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;K&#125;</span> <span class=\"variable\">key</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;Seriousalizable&#125;</span> <span class=\"variable\">object</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">seriousalize</span>(<span class=\"params\">key, <span class=\"built_in\">object</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ????</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-constructor\"><a href=\"#7-constructor\" class=\"headerlink\" title=\"(7) @constructor \"></a>(7) <a href=\"/constructor\">@constructor </a></h4><blockquote>\n<p>ç¼–è¯‘å™¨é€šè¿‡ <code>this</code> å±æ€§çš„èµ‹å€¼æ¥æ¨æ–­æ„é€ å‡½æ•°, ä½†ä½ å¯ä»¥è®©æ£€æŸ¥æ›´ä¸¥æ ¼æç¤ºæ›´å‹å¥½, ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>@constructor</code> æ ‡è®°:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@constructor</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> <span class=\"variable\">data</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.initialize(data); <span class=\"comment\">// Should error, initializer expects a string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">s</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">C.prototype.initialize = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.size = s.length;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> c = <span class=\"keyword\">new</span> C(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = C(<span class=\"number\">1</span>); <span class=\"comment\">// C should only be called with new</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é€šè¿‡ <code>@constructor</code>, <code>this</code> å°†åœ¨æ„é€ å‡½æ•°<code>C</code>é‡Œè¢«æ£€æŸ¥ï¼Œå› æ­¤ä½ åœ¨ <code>initialize</code> æ–¹æ³•é‡Œå¾—åˆ°ä¸€ä¸ªæç¤ºï¼Œå¦‚æœä½ ä¼ å…¥ä¸€ä¸ªæ•°å­—ä½ è¿˜å°†å¾—åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºã€‚å¦‚æœä½ ç›´æ¥è°ƒç”¨<code>C</code>è€Œä¸æ˜¯æ„é€ å®ƒï¼Œä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€é‚£äº›æ—¢èƒ½æ„é€ ä¹Ÿèƒ½ç›´æ¥è°ƒç”¨çš„æ„é€ å‡½æ•°ä¸èƒ½ä½¿ç”¨ <code>@constructor</code>ã€‚</p>\n</blockquote>\n<h4 id=\"8-this\"><a href=\"#8-this\" class=\"headerlink\" title=\"(8) @this \"></a>(8) <a href=\"/this\">@this </a></h4><blockquote>\n<p>ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¥æ¨æ–­å‡º <code>this</code> çš„ç±»å‹ã€‚ä½†ä½ å¯ä»¥ä½¿ç”¨ <code>@this</code> æ¥æ˜ç¡®æŒ‡å®šå®ƒçš„ç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@this <span class=\"type\">&#123;HTMLElement&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> <span class=\"variable\">e</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">callbackForLater</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.clientHeight = <span class=\"built_in\">parseInt</span>(e); <span class=\"comment\">// should be fine!</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"9-extends\"><a href=\"#9-extends\" class=\"headerlink\" title=\"(9) @extends \"></a>(9) <a href=\"/extends\">@extends </a></h4><blockquote>\n<p>å½“ <code>JavaScript</code> ç±»ç»§æ‰¿äº†ä¸€ä¸ªåŸºç±», æ— å¤„æŒ‡å®šç±»å‹å‚æ•°çš„ç±»å‹, è€Œ <code>@extends</code> æ ‡è®°æä¾›äº†è¿™æ ·ä¸€ç§æ–¹å¼:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"variable\">T</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@extends <span class=\"type\">&#123;Set&lt;T&gt;&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SortableSet</span> <span class=\"keyword\">extends</span> <span class=\"title\">Set</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>@extends</code> åªä½œç”¨äºç±»ã€‚å½“å‰ï¼Œæ— æ³•å®ç°æ„é€ å‡½æ•°ç»§æ‰¿ç±»çš„æƒ…å†µã€‚</p>\n</blockquote>\n<h4 id=\"10-enum\"><a href=\"#10-enum\" class=\"headerlink\" title=\"(10) @enum \"></a>(10) <a href=\"/enum\">@enum </a></h4><blockquote>\n<p><code>@enum</code> æ ‡è®°å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡å­—é¢é‡, å®ƒçš„æˆå‘˜éƒ½æœ‰ç¡®å®šçš„ç±»å‹ã€‚ä¸åŒäº <code>JavaScript</code> é‡Œå¤§å¤šæ•°çš„å¯¹è±¡å­—é¢é‡ï¼Œå®ƒä¸å…è®¸æ·»åŠ é¢å¤–æˆå‘˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@enum <span class=\"type\">&#123;number&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> JSDocState = &#123;</span><br><span class=\"line\">  BeginningOfLine: <span class=\"number\">0</span>,</span><br><span class=\"line\">  SawAsterisk: <span class=\"number\">1</span>,</span><br><span class=\"line\">  SavingComments: <span class=\"number\">2</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>@enum</code> ä¸ <code>TypeScript</code> çš„ <code>@enum</code> å¤§ä¸ç›¸åŒ, å®ƒæ›´åŠ ç®€å•ã€‚ç„¶è€Œï¼Œä¸åŒäº <code>TypeScript</code> çš„æšä¸¾, <code>@enum</code> å¯ä»¥æ˜¯ä»»ä½•ç±»å‹:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@enum <span class=\"type\">&#123;function(number): number&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">Math</span> = &#123;</span><br><span class=\"line\">  add1: <span class=\"function\"><span class=\"params\">n</span> =&gt;</span> n + <span class=\"number\">1</span>,</span><br><span class=\"line\">  id: <span class=\"function\"><span class=\"params\">n</span> =&gt;</span> -n,</span><br><span class=\"line\">  sub1: <span class=\"function\"><span class=\"params\">n</span> =&gt;</span> n - <span class=\"number\">1</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-æ›´å¤šç¤ºä¾‹\"><a href=\"#11-æ›´å¤šç¤ºä¾‹\" class=\"headerlink\" title=\"(11) æ›´å¤šç¤ºä¾‹\"></a>(11) æ›´å¤šç¤ºä¾‹</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var someObj &#x3D; &#123;</span><br><span class=\"line\">  &#x2F;**</span><br><span class=\"line\">   * @param &#123;string&#125; param1 - Docs on property assignments work</span><br><span class=\"line\">   *&#x2F;</span><br><span class=\"line\">  x: function (param1) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * As do docs on variable assignments</span><br><span class=\"line\"> * @return &#123;Window&#125;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">let someFunc &#x3D; function () &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * And class methods</span><br><span class=\"line\"> * @param &#123;string&#125; greeting The greeting to use</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">Foo.prototype.sayHi &#x3D; greeting &#x3D;&gt; console.log(&quot;Hi!&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * And arrow functions expressions</span><br><span class=\"line\"> * @param &#123;number&#125; x - A multiplier</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">let myArrow &#x3D; x &#x3D;&gt; x * x;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * Which means it works for stateless function components in JSX too</span><br><span class=\"line\"> * @param &#123;&#123;a: string, b: number&#125;&#125; test - Some param</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var sfc &#x3D; test &#x3D;&gt; &lt;div&gt;&#123;test.a.charAt(0)&#125;&lt;&#x2F;div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * A parameter can be a class constructor, using Closure syntax.</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * @param &#123;&#123;new(...args: any[]): object&#125;&#125; C - The class to register</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function registerClass(C) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;...string&#125; p1 - A &#39;rest&#39; arg (array) of strings. (treated as &#39;any&#39;)</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function fn10(p1) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;...string&#125; p1 - A &#39;rest&#39; arg (array) of strings. (treated as &#39;any&#39;)</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function fn9(p1) &#123;</span><br><span class=\"line\">  return p1.join();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"12-å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\"><a href=\"#12-å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\" class=\"headerlink\" title=\"(12) å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\"></a>(12) å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼</h4><blockquote>\n<p>åœ¨å€¼ç©ºé—´ä¸­å°†å¯¹è±¡è§†ä¸ºç±»å‹æ˜¯ä¸å¯ä»¥çš„, é™¤éå¯¹è±¡åˆ›å»ºäº†ç±»å‹, å¦‚æ„é€ å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">aNormalFunction</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;aNormalFunction&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> wrong;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Use &#x27;typeof&#x27; instead:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;typeof aNormalFunction&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> right;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¹è±¡å­—é¢é‡å±æ€§ä¸Šçš„ <code>=</code> åç¼€ä¸èƒ½æŒ‡å®šè¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;&#123; a: string, b: number= &#125;</span></span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> wrong;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Use postfix question on the property name instead:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;&#123; a: string, b?: number &#125;</span></span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> right;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Nullable</code> ç±»å‹åªåœ¨å¯ç”¨äº† <code>strictNullChecks</code> æ£€æŸ¥æ—¶æ‰å¯ä½œç”¨:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;?number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * With strictNullChecks: true -- number | null</span></span><br><span class=\"line\"><span class=\"comment\"> * With strictNullChecks: off  -- number</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nullable;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Non-nullable</code> ç±»å‹æ²¡æœ‰æ„ä¹‰, ä»¥å…¶åŸç±»å‹å¯¹å¾…:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;!number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * Just has type number</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> normal;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸åŒäº <code>JSDoc</code> ç±»å‹ç³»ç»Ÿ, <code>TypeScript</code> åªå…è®¸å°†ç±»å‹æ ‡è®°ä¸ºåŒ…ä¸åŒ…å« <code>null</code>ã€‚<code>Non-nullable</code> â€“ å¦‚æœå¯ç”¨äº† <code>strictNullChecks</code>ï¼Œé‚£ä¹ˆ <code>number</code> æ˜¯ <code>énull</code> çš„ã€‚ å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œé‚£ä¹ˆ <code>number</code> æ˜¯å¯ä»¥ä¸º <code>null</code> çš„ã€‚</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"ä¸€ã€-åŸºç¡€ç±»å‹\"><a href=\"#ä¸€ã€-åŸºç¡€ç±»å‹\" class=\"headerlink\" title=\"ä¸€ã€ åŸºç¡€ç±»å‹\"></a>ä¸€ã€ åŸºç¡€ç±»å‹</h2><h3 id=\"1-1-ç±»å‹æ–­è¨€\"><a href=\"#1-1-ç±»å‹æ–­è¨€\" class=\"headerlink\" title=\"1.1 ç±»å‹æ–­è¨€\"></a>1.1 ç±»å‹æ–­è¨€</h3><blockquote>\n<p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” <code>TypeScript</code> æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šçš„çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚ç±»å‹æ–­è¨€å¥½æ¯”å…¶å®ƒè¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸å°½å…´ç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li><p>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼</p>\n</li>\n<li><p>ç¬¬ä¸€ç§ï¼šå°–æ‹¬å·è¯­æ³• (å½“åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨ <code>JSX</code> æ—¶ï¼Œåªæœ‰ <code>as</code> è¯­è¨€æ–­è¨€æ˜¯è¢«å…è®¸çš„)</p>\n</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> someValue: <span class=\"built_in\">any</span> = <span class=\"string\">&quot;this is a string&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strLength: <span class=\"built_in\">number</span> = (&lt;<span class=\"built_in\">string</span>&gt;someValue).length;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬äºŒç§ï¼š<code>as</code> è¯­æ³•</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> _someValue: <span class=\"built_in\">any</span> = <span class=\"string\">&quot;this is a string&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _strLength: <span class=\"built_in\">number</span> = (_someValue <span class=\"keyword\">as</span> <span class=\"built_in\">string</span>).length;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"1-2-åŸºç¡€ç±»å‹\"><a href=\"#1-2-åŸºç¡€ç±»å‹\" class=\"headerlink\" title=\"1.2 åŸºç¡€ç±»å‹\"></a>1.2 åŸºç¡€ç±»å‹</h3><h4 id=\"1-2-1-å¸ƒå°”å€¼\"><a href=\"#1-2-1-å¸ƒå°”å€¼\" class=\"headerlink\" title=\"1.2.1 å¸ƒå°”å€¼\"></a>1.2.1 å¸ƒå°”å€¼</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> isDone: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-2-æ•°å­—\"><a href=\"#1-2-2-æ•°å­—\" class=\"headerlink\" title=\"1.2.2 æ•°å­—\"></a>1.2.2 æ•°å­—</h4><blockquote>\n<p>ä¸ <code>javascript</code> ä¸€æ ·ï¼Œ<code>TypeScript</code> é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯æµ®ç‚¹æ•°ã€‚è¿™äº›æµ®ç‚¹æ•°çš„ç±»å‹æ˜¯ <code>number</code>ã€‚ é™¤äº†æ”¯æŒåè¿›åˆ¶å’Œåå…­è¿›åˆ¶å­—é¢é‡ï¼Œ <code>TypeScript</code> è¿˜æ”¯æŒ <code>ECMA2015</code> ä¸­å¼•å…¥çš„äºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶å­—é¢é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> decLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> hexLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">0xf00d</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> binaryLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">0b1010</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> octalLiteral: <span class=\"built_in\">number</span> = <span class=\"number\">0o744</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-3-å­—ç¬¦ä¸²\"><a href=\"#1-2-3-å­—ç¬¦ä¸²\" class=\"headerlink\" title=\"1.2.3 å­—ç¬¦ä¸²\"></a>1.2.3 å­—ç¬¦ä¸²</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> strName: <span class=\"built_in\">string</span> = <span class=\"string\">&quot;bob&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-4-æ•°ç»„\"><a href=\"#1-2-4-æ•°ç»„\" class=\"headerlink\" title=\"1.2.4 æ•°ç»„\"></a>1.2.4 æ•°ç»„</h4><blockquote>\n<p><code>TypeScript</code> åƒ <code>JavaScript</code> ä¸€æ ·å¯ä»¥æ“ä½œæ•°ç»„å…ƒç´ ã€‚æœ‰ä¸¤ç§æ–¹æ³•å®šä¹‰æ•°ç»„ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¬¬ä¸€ç§ï¼šå¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š <code>[]</code>;</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list1: <span class=\"built_in\">number</span>[] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç¬¬äºŒç§ï¼šä½¿ç”¨æ•°ç»„æ³›å‹, <code>Array&lt;å…ƒç´ ç±»å‹&gt;</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list2: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">number</span>&gt; = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-5-å…ƒç»„-Tuple\"><a href=\"#1-2-5-å…ƒç»„-Tuple\" class=\"headerlink\" title=\"1.2.5 å…ƒç»„ Tuple\"></a>1.2.5 å…ƒç»„ Tuple</h4><ul>\n<li>å…ƒç»„ç±»å‹å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x: [<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>];</span><br><span class=\"line\">x = [<span class=\"string\">&quot;hello&quot;</span>, <span class=\"number\">10</span>]; <span class=\"comment\">// =&gt; Ok</span></span><br><span class=\"line\">x = [<span class=\"number\">10</span>, <span class=\"string\">&quot;hello&quot;</span>]; <span class=\"comment\">// =&gt; Error</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“è®¿é—®ä¸€ä¸ªå·²çŸ¥ç´¢å¼•çš„å…ƒç´ ï¼Œä¼šå¾—åˆ°æ­£ç¡®çš„ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">console</span>.log(x[<span class=\"number\">0</span>].substr(<span class=\"number\">1</span>)); <span class=\"comment\">// =&gt; Ok</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x[<span class=\"number\">1</span>].substr(<span class=\"number\">1</span>)); <span class=\"comment\">// =&gt; Error</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“è®¿é—®ä¸€ä¸ªè¶Šç•Œçš„å…ƒç´ ï¼Œä¼šä½¿ç”¨è”åˆç±»å‹æ›¿ä»£</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">x[<span class=\"number\">3</span>] = <span class=\"string\">&quot;world&quot;</span>; <span class=\"comment\">// Ok, å­—ç¬¦ä¸²å¯ä»¥èµ‹å€¼ç»™(string | number)ç±»å‹</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(x[<span class=\"number\">5</span>].toString()); <span class=\"comment\">// Ok, &quot;string&quot;å’Œ&quot;number&quot;éƒ½æœ‰toStringæ–¹æ³•</span></span><br><span class=\"line\">x[<span class=\"number\">6</span>] = <span class=\"literal\">true</span>; <span class=\"comment\">// Error, å¸ƒå°”ä¸æ˜¯(string | number)ç±»å‹</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-6-æšä¸¾\"><a href=\"#1-2-6-æšä¸¾\" class=\"headerlink\" title=\"1.2.6 æšä¸¾\"></a>1.2.6 æšä¸¾</h4><ul>\n<li><code>enum</code> ç±»å‹æ˜¯å¯¹ <code>JavaScript</code> æ ‡å‡†æ•°æ®ç±»å‹çš„ä¸€ä¸ªè¡¥å……ã€‚åƒ <code>C#</code> ç­‰å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä½¿ç”¨æšä¸¾ç±»å‹å¯ä»¥ä¸ºä¸€ç»„æ•°å€¼èµ‹äºˆå‹å¥½çš„åå­—</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color &#123;</span><br><span class=\"line\">  Red,</span><br><span class=\"line\">  Green,</span><br><span class=\"line\">  Blue</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c: Color = Color.Green;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œä» <code>0</code> å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color1 &#123;</span><br><span class=\"line\">  Red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Green,</span><br><span class=\"line\">  Blue</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c1: Color1 = Color1.Green;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ–è€…å…¨éƒ¨é‡‡ç”¨èµ‹å€¼</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color2 &#123;</span><br><span class=\"line\">  Red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Green = <span class=\"number\">2</span>,</span><br><span class=\"line\">  Blue = <span class=\"number\">4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c2: Color2 = Color2.Green;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æšä¸¾ç±»å‹æä¾›çš„ä¸€ä¸ªä¾¿åˆ©æ˜¯ä½ å¯ä»¥ç”±æšä¸¾çš„å€¼å¾—åˆ°å®ƒçš„åå­—ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Color3 &#123;</span><br><span class=\"line\">  Red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Green,</span><br><span class=\"line\">  Blue</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> colorName: <span class=\"built_in\">string</span> = Color3[<span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(colorName);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-7-Any\"><a href=\"#1-2-7-Any\" class=\"headerlink\" title=\"1.2.7 Any\"></a>1.2.7 Any</h4><ul>\n<li>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹ã€‚è¿™äº›å€¼å¯èƒ½æ¥è‡ªäºåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–ç¬¬ä¸‰æ–¹åº“ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>any</code> ç±»å‹æ¥æ ‡è®°è¿™äº›å˜é‡</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> notSure: <span class=\"built_in\">any</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\">notSure = <span class=\"string\">&quot;maybe a string instead&quot;</span>;</span><br><span class=\"line\">notSure = <span class=\"literal\">false</span>; <span class=\"comment\">// Ok</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åœ¨å¯¹ç°æœ‰ä»£ç è¿›è¡Œæ”¹å†™çš„æ—¶å€™ï¼Œ<code>any</code> ç±»å‹æ˜¯ååˆ†æœ‰ç”¨çš„ï¼Œå®ƒå…è®¸ä½ åœ¨ç¼–è¯‘æ—¶å¯é€‰æ‹©åœ°åŒ…å«æˆ–ç§»é™¤ç±»å‹æ£€æŸ¥ã€‚ä½ å¯èƒ½è®¤ä¸º <code>Object</code> æœ‰ç›¸ä¼¼çš„ä½œç”¨ï¼Œå°±åƒåœ¨å…¶ä»–è¯­è¨€ä¸­é‚£æ ·ã€‚ä½†æ˜¯ <code>Object</code> ç±»å‹çš„å˜é‡åªæ˜¯å…è®¸ä½ ç»™ä»–èµ‹ä»»æ„å€¼ï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿåœ¨å®ƒä¸Šé¢è°ƒç”¨ä»»æ„çš„æ–¹æ³•ï¼Œå³ä½¿å®ƒçœŸæœ‰è¿™äº›æ–¹æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> notSure1: <span class=\"built_in\">any</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\">notSure1.ifItExists(); <span class=\"comment\">// Ok</span></span><br><span class=\"line\">notSure1.toFixed(); <span class=\"comment\">// Ok</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> prettySure: <span class=\"built_in\">Object</span> = <span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"comment\">// prettySure.toFixed(); // Error, Property &#x27;toFixed&#x27; doesn&#x27;t exist on type &#x27;Object&#x27;.</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å½“ä½ åªçŸ¥é“ä¸€éƒ¨åˆ†æ•°æ®ç±»å‹æ—¶ï¼Œ<code>any</code> ç±»å‹ä¹Ÿæ˜¯æœ‰ç”¨çš„ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list: <span class=\"built_in\">any</span>[] = [<span class=\"number\">1</span>, <span class=\"literal\">true</span>, <span class=\"string\">&quot;free&quot;</span>];</span><br><span class=\"line\">list[<span class=\"number\">1</span>] = <span class=\"number\">100</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-8-Void\"><a href=\"#1-2-8-Void\" class=\"headerlink\" title=\"1.2.8 Void\"></a>1.2.8 Void</h4><ul>\n<li>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ<code>void</code> ç±»å‹åƒæ˜¯ä¸ <code>any</code> ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ <code>void</code>ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">warnUser</span>(<span class=\"params\"></span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;This is my warning message&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å£°æ˜ä¸€ä¸ª <code>void</code> ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆå¤§ç”¨ï¼Œå› ä¸ºä½ åªèƒ½ä¸ºå®ƒèµ‹äºˆ <code>undefined</code> å’Œ <code>null</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> unusbale: <span class=\"built_in\">void</span> = <span class=\"literal\">undefined</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-9-Null-å’Œ-Undefined\"><a href=\"#1-2-9-Null-å’Œ-Undefined\" class=\"headerlink\" title=\"1.2.9 Null å’Œ Undefined\"></a>1.2.9 Null å’Œ Undefined</h4><ul>\n<li><code>TypeScript</code> é‡Œï¼Œ<code>undefined</code> å’Œ <code>null</code> ä¸¤è€…å„æœ‰è‡ªå·±çš„ç±»å‹åˆ†åˆ«å«åš <code>undefined</code> å’Œ <code>null</code>ã€‚å’Œ <code>void</code> ç›¸ä¼¼ï¼Œå®ƒä»¬æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> u: <span class=\"literal\">undefined</span> = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> n: <span class=\"literal\">null</span> = <span class=\"literal\">null</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>é»˜è®¤æƒ…å†µä¸‹ <code>null</code> å’Œ <code>undefined</code> æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ <code>null</code> å’Œ <code>undefined</code> èµ‹å€¼ç»™ <code>number</code> ç±»å‹çš„å˜é‡ã€‚</li>\n<li>ç„¶è€Œï¼Œå½“ä½ æŒ‡å®šäº†ä¸€ä¸ª <code>--strictNullChecks</code> æ ‡è®°ï¼Œ<code>null</code> å’Œ <code>undefined</code> åªèƒ½èµ‹å€¼ç»™ <code>void</code> å’Œå®ƒä»¬å„è‡ªã€‚è¿™èƒ½é¿å…å¾ˆå¤šå¸¸è§çš„é—®é¢˜ã€‚ä¹Ÿè®¸åœ¨æŸå¤„ä½ æƒ³ä¼ å…¥ä¸€ä¸ª <code>string</code> æˆ– <code>null</code> æˆ– <code>undefined</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹ <code>string | null | undefined</code>ã€‚</li>\n</ul>\n<h4 id=\"1-2-10-Never\"><a href=\"#1-2-10-Never\" class=\"headerlink\" title=\"1.2.10 Never\"></a>1.2.10 Never</h4><ul>\n<li><code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼š<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ï¼›</li>\n<li>å˜é‡ä¹Ÿå¯èƒ½æ˜¯ <code>never</code> ç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚</li>\n<li><code>never</code> ç±»å‹æ˜¯ä»»ä½•ç±»å‹çš„å­ç±»å‹ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ï¼›</li>\n</ul>\n<blockquote>\n<p>ç„¶è€Œï¼Œæ²¡æœ‰ç±»å‹æ˜¯ <code>never</code> çš„å­ç±»å‹æˆ–å¯ä»¥èµ‹å€¼ç»™ <code>never</code> ç±»å‹(é™¤äº† <code>never</code> æœ¬èº«ä¹‹å¤–)ã€‚å³ä½¿ <code>any</code> ä¹Ÿä¸å¯ä»¥èµ‹å€¼ç»™ <code>never</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">error</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>): <span class=\"title\">never</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(message);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºnever</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fail</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> error(<span class=\"string\">&quot;Something failed&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è¿”å› never çš„å‡½æ•°å¿…é¡»å­˜åœ¨æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">infiniteLoop</span>(<span class=\"params\"></span>): <span class=\"title\">never</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (<span class=\"literal\">true</span>) &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"1-2-11-Object\"><a href=\"#1-2-11-Object\" class=\"headerlink\" title=\"1.2.11 Object\"></a>1.2.11 Object</h4><ul>\n<li><code>Object</code> è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ <code>number</code>, <code>string</code>, <code>boolean</code>, <code>symbol</code>, <code>null</code> æˆ– <code>undefined</code> ä¹‹å¤–çš„ç±»å‹ã€‚</li>\n<li>ä½¿ç”¨ <code>Object</code> ç±»å‹ï¼Œå°±å¯ä»¥æ›´å¥½çš„è¡¨ç¤ºåƒ <code>Object.create</code> è¿™æ ·çš„ <code>API</code>ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">create</span>(<span class=\"params\">o: <span class=\"built_in\">object</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\">create(&#123; <span class=\"attr\">prop</span>: <span class=\"number\">0</span> &#125;); <span class=\"comment\">// Ok</span></span><br><span class=\"line\">create(<span class=\"literal\">null</span>); <span class=\"comment\">// Ok</span></span><br><span class=\"line\">create(<span class=\"number\">42</span>); <span class=\"comment\">//Error</span></span><br><span class=\"line\">create(<span class=\"string\">&quot;string&quot;</span>); <span class=\"comment\">// Error</span></span><br><span class=\"line\">create(<span class=\"literal\">false</span>); <span class=\"comment\">// Error</span></span><br><span class=\"line\">create(<span class=\"literal\">undefined</span>); <span class=\"comment\">// Error</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒã€å˜é‡å£°æ˜\"><a href=\"#äºŒã€å˜é‡å£°æ˜\" class=\"headerlink\" title=\"äºŒã€å˜é‡å£°æ˜\"></a>äºŒã€å˜é‡å£°æ˜</h2><h3 id=\"2-1-ä»‹ç»\"><a href=\"#2-1-ä»‹ç»\" class=\"headerlink\" title=\"2.1 ä»‹ç»\"></a>2.1 ä»‹ç»</h3><blockquote>\n<p><code>let</code> å’Œ <code>const</code> æ˜¯ <code>JavaScript</code> é‡Œç›¸å¯¹è¾ƒæ–°çš„å˜é‡å£°æ˜æ–¹å¼ã€‚ åƒæˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ï¼Œ <code>let</code> åœ¨å¾ˆå¤šæ–¹é¢ä¸ <code>var</code> æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯å¯ä»¥å¸®åŠ©å¤§å®¶é¿å…åœ¨ <code>JavaScript</code> é‡Œå¸¸è§ä¸€äº›é—®é¢˜ã€‚ <code>const</code> æ˜¯å¯¹ <code>let</code> çš„ä¸€ä¸ªå¢å¼ºï¼Œå®ƒèƒ½é˜»æ­¢å¯¹ä¸€ä¸ªå˜é‡å†æ¬¡èµ‹å€¼ã€‚<br>å› ä¸º <code>TypeScript</code> æ˜¯ <code>JavaScript</code> çš„è¶…é›†ï¼Œæ‰€ä»¥å®ƒæœ¬èº«å°±æ”¯æŒ <code>let</code> å’Œ <code>const</code> ã€‚ ä¸‹é¢æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜è¿™äº›æ–°çš„å£°æ˜æ–¹å¼ä»¥åŠä¸ºä»€ä¹ˆæ¨èä½¿ç”¨å®ƒä»¬æ¥ä»£æ›¿ <code>var</code>ã€‚<br>å¦‚æœä½ ä¹‹å‰ä½¿ç”¨ <code>JavaScript</code> æ—¶æ²¡æœ‰ç‰¹åˆ«åœ¨æ„ï¼Œé‚£ä¹ˆè¿™èŠ‚å†…å®¹ä¼šå”¤èµ·ä½ çš„å›å¿†ã€‚ å¦‚æœä½ å·²ç»å¯¹ <code>var</code> å£°æ˜çš„æ€ªå¼‚ä¹‹å¤„äº†å¦‚æŒ‡æŒï¼Œé‚£ä¹ˆä½ å¯ä»¥è½»æ¾åœ°ç•¥è¿‡è¿™èŠ‚ã€‚</p>\n</blockquote>\n<h3 id=\"2-2-var-å£°æ˜\"><a href=\"#2-2-var-å£°æ˜\" class=\"headerlink\" title=\"2.2 var å£°æ˜\"></a>2.2 var å£°æ˜</h3><blockquote>\n<p>ä¸€ç›´ä»¥æ¥æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ <code>var</code> å…³é”®å­—å®šä¹‰ <code>JavaScript</code> å˜é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¤§å®¶éƒ½èƒ½ç†è§£ï¼Œè¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåä¸º <code>a</code> å€¼ä¸º <code>10</code> çš„å˜é‡ã€‚<br>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> message = <span class=\"string\">&quot;Hello, world!&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> message;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶ä¸”æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å…¶å®ƒå‡½æ•°å†…éƒ¨è®¿é—®ç›¸åŒçš„å˜é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> b = a + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> g = f();</span><br><span class=\"line\">g(); <span class=\"comment\">// returns 11;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œ<code>g</code> å¯ä»¥è·å–åˆ° <code>f</code> å‡½æ•°é‡Œå®šä¹‰çš„ <code>a</code> å˜é‡ã€‚ æ¯å½“ <code>g</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒéƒ½å¯ä»¥è®¿é—®åˆ° <code>f</code> é‡Œçš„ <code>a</code> å˜é‡ã€‚ å³ä½¿å½“ <code>g</code> åœ¨ <code>f</code> å·²ç»æ‰§è¡Œå®Œåæ‰è¢«è°ƒç”¨ï¼Œå®ƒä»ç„¶å¯ä»¥è®¿é—®åŠä¿®æ”¹ <code>a</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> a = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  a = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> b = g();</span><br><span class=\"line\">  a = <span class=\"number\">3</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> b;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f(); <span class=\"comment\">// returns 2</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-ä½œç”¨åŸŸè§„åˆ™\"><a href=\"#2-3-ä½œç”¨åŸŸè§„åˆ™\" class=\"headerlink\" title=\"2.3 ä½œç”¨åŸŸè§„åˆ™\"></a>2.3 ä½œç”¨åŸŸè§„åˆ™</h3><blockquote>\n<p>å¯¹äºç†Ÿæ‚‰å…¶å®ƒè¯­è¨€çš„äººæ¥è¯´ï¼Œ<code>var</code> å£°æ˜æœ‰äº›å¥‡æ€ªçš„ä½œç”¨åŸŸè§„åˆ™ã€‚ çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">shouldInitialize: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (shouldInitialize) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"number\">10</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f(<span class=\"literal\">true</span>); <span class=\"comment\">// returns &#x27;10&#x27;</span></span><br><span class=\"line\">f(<span class=\"literal\">false</span>); <span class=\"comment\">// returns &#x27;undefined&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ‰äº›è¯»è€…å¯èƒ½è¦å¤šçœ‹å‡ éè¿™ä¸ªä¾‹å­ã€‚ å˜é‡ <code>x</code> æ˜¯å®šä¹‰åœ¨ <code>if</code> è¯­å¥é‡Œé¢_ï¼Œä½†æ˜¯æˆ‘ä»¬å´å¯ä»¥åœ¨è¯­å¥çš„å¤–é¢è®¿é—®å®ƒã€‚ è¿™æ˜¯å› ä¸º <code>var</code> å£°æ˜å¯ä»¥åœ¨åŒ…å«å®ƒçš„å‡½æ•°ï¼Œæ¨¡å—ï¼Œå‘½åç©ºé—´æˆ–å…¨å±€ä½œç”¨åŸŸå†…éƒ¨ä»»ä½•ä½ç½®è¢«è®¿é—®ï¼ˆæˆ‘ä»¬åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼ŒåŒ…å«å®ƒçš„ä»£ç å—å¯¹æ­¤æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ æœ‰äº›äººç§°æ­¤ä¸º <code>var</code> ä½œç”¨åŸŸæˆ–å‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°å‚æ•°ä¹Ÿä½¿ç”¨å‡½æ•°ä½œç”¨åŸŸã€‚<br>è¿™äº›ä½œç”¨åŸŸè§„åˆ™å¯èƒ½ä¼šå¼•å‘ä¸€äº›é”™è¯¯ã€‚ å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼Œå¤šæ¬¡å£°æ˜åŒä¸€ä¸ªå˜é‡å¹¶ä¸ä¼šæŠ¥é”™ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sumMatrix</span>(<span class=\"params\">matrix: <span class=\"built_in\">number</span>[][]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentRow = matrix[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; currentRow.length; i++) &#123;</span><br><span class=\"line\">      sum += currentRow[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå¾ˆå®¹æ˜“çœ‹å‡ºä¸€äº›é—®é¢˜ï¼Œé‡Œå±‚çš„ <code>for</code> å¾ªç¯ä¼šè¦†ç›–å˜é‡ <code>i</code>ï¼Œå› ä¸ºæ‰€æœ‰ <code>i</code> éƒ½å¼•ç”¨ç›¸åŒçš„å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡ã€‚ æœ‰ç»éªŒçš„å¼€å‘è€…ä»¬å¾ˆæ¸…æ¥šï¼Œè¿™äº›é—®é¢˜å¯èƒ½åœ¨ä»£ç å®¡æŸ¥æ—¶æ¼æ‰ï¼Œå¼•å‘æ— ç©·çš„éº»çƒ¦ã€‚</p>\n</blockquote>\n<h3 id=\"2-4-æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\"><a href=\"#2-4-æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\" class=\"headerlink\" title=\"2.4 æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„\"></a>2.4 æ•è·å˜é‡æ€ªå¼‚ä¹‹å¤„</h3><blockquote>\n<p>å¿«é€Ÿçš„çŒœä¸€ä¸‹ä¸‹é¢çš„ä»£ç ä¼šè¿”å›ä»€ä¹ˆï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i);</span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span> * i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä»‹ç»ä¸€ä¸‹ï¼Œ<code>setTimeout</code> ä¼šåœ¨è‹¥å¹²æ¯«ç§’çš„å»¶æ—¶åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç­‰å¾…å…¶å®ƒä»£ç æ‰§è¡Œå®Œæ¯•ï¼‰ã€‚<br>å¥½å§ï¼Œçœ‹ä¸€ä¸‹ç»“æœï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¾ˆå¤š <code>JavaScript</code> ç¨‹åºå‘˜å¯¹è¿™ç§è¡Œä¸ºå·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å¦‚æœä½ å¾ˆä¸è§£ï¼Œä½ å¹¶ä¸æ˜¯ä¸€ä¸ªäººã€‚ å¤§å¤šæ•°äººæœŸæœ›è¾“å‡ºç»“æœæ˜¯è¿™æ ·ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æåˆ°çš„æ•è·å˜é‡å—ï¼Ÿ<br>æˆ‘ä»¬ä¼ ç»™ <code>setTimeout</code> çš„æ¯ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼å®é™…ä¸Šéƒ½å¼•ç”¨äº†ç›¸åŒä½œç”¨åŸŸé‡Œçš„åŒä¸€ä¸ª <code>i</code>ã€‚<br>è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ€è€ƒä¸€ä¸‹è¿™æ˜¯ä¸ºä»€ä¹ˆã€‚ <code>setTimeout</code> åœ¨è‹¥å¹²æ¯«ç§’åæ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æ˜¯åœ¨ <code>for</code> å¾ªç¯ç»“æŸåã€‚ <code>for</code> å¾ªç¯ç»“æŸåï¼Œ<code>i</code> çš„å€¼ä¸º <code>10</code>ã€‚ æ‰€ä»¥å½“å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šæ‰“å°å‡º <code>10ï¼</code><br>ä¸€ä¸ªé€šå¸¸çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ï¼ˆ<code>IIFE</code>ï¼‰æ¥æ•è·æ¯æ¬¡è¿­ä»£æ—¶ <code>i</code> çš„å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// capture the current state of &#x27;i&#x27;</span></span><br><span class=\"line\">  <span class=\"comment\">// by invoking a function with its current value</span></span><br><span class=\"line\">  (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">i</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(i);</span><br><span class=\"line\">    &#125;, <span class=\"number\">100</span> * i);</span><br><span class=\"line\">  &#125;)(i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ç§å¥‡æ€ªçš„å½¢å¼æˆ‘ä»¬å·²ç»å¸ç©ºè§æƒ¯äº†ã€‚ å‚æ•° <code>i</code> ä¼šè¦†ç›– <code>for</code> å¾ªç¯é‡Œçš„ iï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬èµ·äº†åŒæ ·çš„åå­—ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ç”¨æ€ä¹ˆæ”¹ <code>for</code> å¾ªç¯ä½“é‡Œçš„ä»£ç ã€‚</p>\n</blockquote>\n<h3 id=\"2-5-let-å£°æ˜\"><a href=\"#2-5-let-å£°æ˜\" class=\"headerlink\" title=\"2.5 let å£°æ˜\"></a>2.5 let å£°æ˜</h3><blockquote>\n<p>ç°åœ¨ä½ å·²ç»çŸ¥é“äº† <code>var</code> å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œè¿™æ°å¥½è¯´æ˜äº†ä¸ºä»€ä¹ˆç”¨ <code>let</code> è¯­å¥æ¥å£°æ˜å˜é‡ã€‚ é™¤äº†åå­—ä¸åŒå¤–ï¼Œ let ä¸ <code>var</code> çš„å†™æ³•ä¸€è‡´ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> hello = <span class=\"string\">&quot;Hello!&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸»è¦çš„åŒºåˆ«ä¸åœ¨è¯­æ³•ä¸Šï¼Œè€Œæ˜¯è¯­ä¹‰ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šæ·±å…¥ç ”ç©¶ã€‚</p>\n</blockquote>\n<h3 id=\"2-6-å—ä½œç”¨åŸŸ\"><a href=\"#2-6-å—ä½œç”¨åŸŸ\" class=\"headerlink\" title=\"2.6 å—ä½œç”¨åŸŸ\"></a>2.6 å—ä½œç”¨åŸŸ</h3><blockquote>\n<p>å½“ç”¨ <code>let</code> å£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå®ƒä½¿ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸæˆ–å—ä½œç”¨åŸŸã€‚ ä¸åŒäºä½¿ç”¨ <code>var</code> å£°æ˜çš„å˜é‡é‚£æ ·å¯ä»¥åœ¨åŒ…å«å®ƒä»¬çš„å‡½æ•°å¤–è®¿é—®ï¼Œå—ä½œç”¨åŸŸå˜é‡åœ¨åŒ…å«å®ƒä»¬çš„å—æˆ– <code>for</code> å¾ªç¯ä¹‹å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">input: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (input) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Still okay to reference &#x27;a&#x27;</span></span><br><span class=\"line\">    <span class=\"keyword\">let</span> b = a + <span class=\"number\">1</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Error: &#x27;b&#x27; doesn&#x27;t exist here</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> b;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†<code>2</code>ä¸ªå˜é‡ <code>a</code> å’Œ <code>b</code> ã€‚ <code>a</code> çš„ä½œç”¨åŸŸæ˜¯ <code>f</code> å‡½æ•°ä½“å†…ï¼Œè€Œ <code>b</code> çš„ä½œç”¨åŸŸæ˜¯ <code>if</code> è¯­å¥å—é‡Œã€‚<br>åœ¨ <code>catch</code> è¯­å¥é‡Œå£°æ˜çš„å˜é‡ä¹Ÿå…·æœ‰åŒæ ·çš„ä½œç”¨åŸŸè§„åˆ™ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"string\">&quot;oh no!&quot;</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Oh well.&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error: &#x27;e&#x27; doesn&#x27;t exist here</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(e);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ‹¥æœ‰å—çº§ä½œç”¨åŸŸçš„å˜é‡çš„å¦ä¸€ä¸ªç‰¹ç‚¹æ˜¯ï¼Œå®ƒä»¬ä¸èƒ½åœ¨è¢«å£°æ˜ä¹‹å‰è¯»æˆ–å†™ã€‚ è™½ç„¶è¿™äº›å˜é‡å§‹ç»ˆâ€œå­˜åœ¨â€äºå®ƒä»¬çš„ä½œç”¨åŸŸé‡Œï¼Œä½†åœ¨ç›´åˆ°å£°æ˜å®ƒçš„ä»£ç ä¹‹å‰çš„åŒºåŸŸéƒ½å±äº æš‚æ—¶æ€§æ­»åŒºã€‚ å®ƒåªæ˜¯ç”¨æ¥è¯´æ˜æˆ‘ä»¬ä¸èƒ½åœ¨ <code>let</code> è¯­å¥ä¹‹å‰è®¿é—®å®ƒä»¬ï¼Œå¹¸è¿çš„æ˜¯ <code>TypeScript</code> å¯ä»¥å‘Šè¯‰æˆ‘ä»¬è¿™äº›ä¿¡æ¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a++; <span class=\"comment\">// illegal to use &#x27;a&#x27; before it&#x27;s declared;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> a;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨ä¸€ä¸ªæ‹¥æœ‰å—ä½œç”¨åŸŸå˜é‡è¢«å£°æ˜å‰è·å–å®ƒã€‚ åªæ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨å˜é‡å£°æ˜å‰å»è°ƒç”¨é‚£ä¸ªå‡½æ•°ã€‚ å¦‚æœç”Ÿæˆä»£ç ç›®æ ‡ä¸º <code>ES2015</code>ï¼Œç°ä»£çš„è¿è¡Œæ—¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼›ç„¶è€Œï¼Œç°ä»Š <code>TypeScript</code> æ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// okay to capture &#x27;a&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸èƒ½åœ¨&#x27;a&#x27;è¢«å£°æ˜å‰è°ƒç”¨&#x27;foo&#x27;</span></span><br><span class=\"line\"><span class=\"comment\">// è¿è¡Œæ—¶åº”è¯¥æŠ›å‡ºé”™è¯¯</span></span><br><span class=\"line\">foo();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…³äºæš‚æ—¶æ€§æ­»åŒºçš„æ›´å¤šä¿¡æ¯ï¼ŒæŸ¥çœ‹è¿™é‡Œ <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#Temporal_dead_zone_and_errors_with_let\">Mozilla Developer Network.</a></p>\n</blockquote>\n<h3 id=\"2-7-é‡å®šä¹‰åŠå±è”½\"><a href=\"#2-7-é‡å®šä¹‰åŠå±è”½\" class=\"headerlink\" title=\"2.7 é‡å®šä¹‰åŠå±è”½\"></a>2.7 é‡å®šä¹‰åŠå±è”½</h3><blockquote>\n<p>æˆ‘ä»¬æè¿‡ä½¿ç”¨ <code>var</code> å£°æ˜æ—¶ï¼Œå®ƒä¸åœ¨ä¹ä½ å£°æ˜å¤šå°‘æ¬¡ï¼›ä½ åªä¼šå¾—åˆ° <code>1</code> ä¸ªã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæ‰€æœ‰ <code>x</code> çš„å£°æ˜å®é™…ä¸Šéƒ½å¼•ç”¨ä¸€ä¸ªç›¸åŒçš„ <code>x</code>ï¼Œå¹¶ä¸”è¿™æ˜¯å®Œå…¨æœ‰æ•ˆçš„ä»£ç ã€‚ è¿™ç»å¸¸ä¼šæˆä¸º<code>bug</code> çš„æ¥æºã€‚ å¥½çš„æ˜¯ï¼Œ <code>let</code> å£°æ˜å°±ä¸ä¼šè¿™ä¹ˆå®½æ¾äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"number\">10</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"number\">20</span>; <span class=\"comment\">// é”™è¯¯ï¼Œä¸èƒ½åœ¨1ä¸ªä½œç”¨åŸŸé‡Œå¤šæ¬¡å£°æ˜`x</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶ä¸æ˜¯è¦æ±‚ä¸¤ä¸ªå‡æ˜¯å—çº§ä½œç”¨åŸŸçš„å£°æ˜ <code>TypeScript</code> æ‰ä¼šç»™å‡ºä¸€ä¸ªé”™è¯¯çš„è­¦å‘Šã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> x = <span class=\"number\">100</span>; <span class=\"comment\">// error: interferes with parameter declaration</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> x = <span class=\"number\">100</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> x = <span class=\"number\">100</span>; <span class=\"comment\">// error: can&#x27;t have both declarations of &#x27;x&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¹¶ä¸æ˜¯è¯´å—çº§ä½œç”¨åŸŸå˜é‡ä¸èƒ½ç”¨å‡½æ•°ä½œç”¨åŸŸå˜é‡æ¥å£°æ˜ã€‚ è€Œæ˜¯å—çº§ä½œç”¨åŸŸå˜é‡éœ€è¦åœ¨æ˜æ˜¾ä¸åŒçš„å—é‡Œå£°æ˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">condition, x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (condition) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> x = <span class=\"number\">100</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">f(<span class=\"literal\">false</span>, <span class=\"number\">0</span>); <span class=\"comment\">// returns 0</span></span><br><span class=\"line\">f(<span class=\"literal\">true</span>, <span class=\"number\">0</span>); <span class=\"comment\">// returns 100</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸€ä¸ªåµŒå¥—ä½œç”¨åŸŸé‡Œå¼•å…¥ä¸€ä¸ªæ–°åå­—çš„è¡Œä¸ºç§°åšå±è”½ã€‚ å®ƒæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå®ƒå¯èƒ½ä¼šä¸å°å¿ƒåœ°å¼•å…¥æ–°é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½ä¼šè§£å†³ä¸€äº›é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨ç”¨ <code>let</code> é‡å†™ä¹‹å‰çš„ <code>sumMatrix</code> å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sumMatrix</span>(<span class=\"params\">matrix: <span class=\"built_in\">number</span>[][]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; matrix.length; i++) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> currentRow = matrix[i];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; currentRow.length; i++) &#123;</span><br><span class=\"line\">      sum += currentRow[i];</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sum;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¸ªç‰ˆæœ¬çš„å¾ªç¯èƒ½å¾—åˆ°æ­£ç¡®çš„ç»“æœï¼Œå› ä¸ºå†…å±‚å¾ªç¯çš„ i å¯ä»¥å±è”½æ‰å¤–å±‚å¾ªç¯çš„ <code>i</code>ã€‚<br>é€šå¸¸æ¥è®²åº”è¯¥é¿å…ä½¿ç”¨å±è”½ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å†™å‡ºæ¸…æ™°çš„ä»£ç ã€‚ åŒæ—¶ä¹Ÿæœ‰äº›åœºæ™¯é€‚åˆåˆ©ç”¨å®ƒï¼Œä½ éœ€è¦å¥½å¥½æ‰“ç®—ä¸€ä¸‹ã€‚</p>\n</blockquote>\n<h3 id=\"2-8-å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\"><a href=\"#2-8-å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\" class=\"headerlink\" title=\"2.8 å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–\"></a>2.8 å—çº§ä½œç”¨åŸŸå˜é‡çš„è·å–</h3><blockquote>\n<p>åœ¨æˆ‘ä»¬æœ€åˆè°ˆåŠè·å–ç”¨ <code>var</code> å£°æ˜çš„å˜é‡æ—¶ï¼Œæˆ‘ä»¬ç®€ç•¥åœ°æ¢ç©¶äº†ä¸€ä¸‹åœ¨è·å–åˆ°äº†å˜é‡ä¹‹åå®ƒçš„è¡Œä¸ºæ˜¯æ€æ ·çš„ã€‚ ç›´è§‚åœ°è®²ï¼Œæ¯æ¬¡è¿›å…¥ä¸€ä¸ªä½œç”¨åŸŸæ—¶ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªå˜é‡çš„ ç¯å¢ƒã€‚ å°±ç®—ä½œç”¨åŸŸå†…ä»£ç å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œè¿™ä¸ªç¯å¢ƒä¸å…¶æ•è·çš„å˜é‡ä¾ç„¶å­˜åœ¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">theCityThatAlwaysSleeps</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> getCity;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"literal\">true</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> city = <span class=\"string\">&quot;Seattle&quot;</span>;</span><br><span class=\"line\">    getCity = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> city;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> getCity();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ <code>city</code> çš„ç¯å¢ƒé‡Œè·å–åˆ°äº† <code>city</code> ï¼Œæ‰€ä»¥å°±ç®— if è¯­å¥æ‰§è¡Œç»“æŸåæˆ‘ä»¬ä»ç„¶å¯ä»¥è®¿é—®å®ƒã€‚<br>å›æƒ³ä¸€ä¸‹å‰é¢ <code>setTimeout</code> çš„ä¾‹å­ï¼Œæˆ‘ä»¬æœ€åéœ€è¦ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ¥è·å–æ¯æ¬¡ <code>for</code> å¾ªç¯è¿­ä»£é‡Œçš„çŠ¶æ€ã€‚ å®é™…ä¸Šï¼Œæˆ‘ä»¬åšçš„æ˜¯ä¸ºè·å–åˆ°çš„å˜é‡åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒã€‚ è¿™æ ·åšæŒºç—›è‹¦çš„ï¼Œä½†æ˜¯å¹¸è¿çš„æ˜¯ï¼Œä½ ä¸å¿…åœ¨ <code>TypeScript</code> é‡Œè¿™æ ·åšäº†ã€‚<br>å½“ <code>let</code> å£°æ˜å‡ºç°åœ¨å¾ªç¯ä½“é‡Œæ—¶æ‹¥æœ‰å®Œå…¨ä¸åŒçš„è¡Œä¸ºã€‚ ä¸ä»…æ˜¯åœ¨å¾ªç¯é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°çš„å˜é‡ç¯å¢ƒï¼Œè€Œæ˜¯é’ˆå¯¹ æ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºè¿™æ ·ä¸€ä¸ªæ–°ä½œç”¨åŸŸã€‚ è¿™å°±æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶åšçš„äº‹ï¼Œæ‰€ä»¥åœ¨ <code>setTimeout</code> ä¾‹å­é‡Œæˆ‘ä»¬ä»…ä½¿ç”¨ <code>let</code> å£°æ˜å°±å¯ä»¥äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(i);</span><br><span class=\"line\">  &#125;, <span class=\"number\">100</span> * i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¼šè¾“å‡ºä¸é¢„æ–™ä¸€è‡´çš„ç»“æœï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"number\">1</span>;</span><br><span class=\"line\"><span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"number\">3</span>;</span><br><span class=\"line\"><span class=\"number\">4</span>;</span><br><span class=\"line\"><span class=\"number\">5</span>;</span><br><span class=\"line\"><span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"number\">7</span>;</span><br><span class=\"line\"><span class=\"number\">8</span>;</span><br><span class=\"line\"><span class=\"number\">9</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-9-const-å£°æ˜\"><a href=\"#2-9-const-å£°æ˜\" class=\"headerlink\" title=\"2.9 const å£°æ˜\"></a>2.9 const å£°æ˜</h3><blockquote>\n<p><code>const</code> å£°æ˜æ˜¯å£°æ˜å˜é‡çš„å¦ä¸€ç§æ–¹å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numLivesForCat = <span class=\"number\">9</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒä»¬ä¸ <code>let</code> å£°æ˜ç›¸ä¼¼ï¼Œä½†æ˜¯å°±åƒå®ƒçš„åå­—æ‰€è¡¨è¾¾çš„ï¼Œå®ƒä»¬è¢«èµ‹å€¼åä¸èƒ½å†æ”¹å˜ã€‚ æ¢å¥è¯è¯´ï¼Œå®ƒä»¬æ‹¥æœ‰ä¸ <code>let</code> ç›¸åŒçš„ä½œç”¨åŸŸè§„åˆ™ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å®ƒä»¬é‡æ–°èµ‹å€¼ã€‚<br>è¿™å¾ˆå¥½ç†è§£ï¼Œå®ƒä»¬å¼•ç”¨çš„å€¼æ˜¯ä¸å¯å˜çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numLivesForCat = <span class=\"number\">9</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> kitty = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;Aurora&quot;</span>,</span><br><span class=\"line\">  numLives: numLivesForCat</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error</span></span><br><span class=\"line\">kitty = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;Danielle&quot;</span>,</span><br><span class=\"line\">  numLives: numLivesForCat</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// all &quot;okay&quot;</span></span><br><span class=\"line\">kitty.name = <span class=\"string\">&quot;Rory&quot;</span>;</span><br><span class=\"line\">kitty.name = <span class=\"string\">&quot;Kitty&quot;</span>;</span><br><span class=\"line\">kitty.name = <span class=\"string\">&quot;Cat&quot;</span>;</span><br><span class=\"line\">kitty.numLives--;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é™¤éä½ ä½¿ç”¨ç‰¹æ®Šçš„æ–¹æ³•å»é¿å…ï¼Œå®é™…ä¸Š <code>const</code> å˜é‡çš„å†…éƒ¨çŠ¶æ€æ˜¯å¯ä¿®æ”¹çš„ã€‚ å¹¸è¿çš„æ˜¯ï¼Œ<code>TypeScript</code> å…è®¸ä½ å°†å¯¹è±¡çš„æˆå‘˜è®¾ç½®æˆåªè¯»çš„ã€‚ æ¥å£ä¸€ç« æœ‰è¯¦ç»†è¯´æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"2-10-let-vs-const\"><a href=\"#2-10-let-vs-const\" class=\"headerlink\" title=\"2.10 let vs. const\"></a>2.10 let vs. const</h3><blockquote>\n<p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ç§ä½œç”¨åŸŸç›¸ä¼¼çš„å£°æ˜æ–¹å¼ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šé—®åˆ°åº•åº”è¯¥ä½¿ç”¨å“ªä¸ªã€‚ ä¸å¤§å¤šæ•°æ³›æ³›çš„é—®é¢˜ä¸€æ ·ï¼Œç­”æ¡ˆæ˜¯ï¼šä¾æƒ…å†µè€Œå®šã€‚<br>ä½¿ç”¨æœ€å°ç‰¹æƒåŸåˆ™ï¼Œæ‰€æœ‰å˜é‡é™¤äº†ä½ è®¡åˆ’å»ä¿®æ”¹çš„éƒ½åº”è¯¥ä½¿ç”¨ <code>const</code>ã€‚ åŸºæœ¬åŸåˆ™å°±æ˜¯å¦‚æœä¸€ä¸ªå˜é‡ä¸éœ€è¦å¯¹å®ƒå†™å…¥ï¼Œé‚£ä¹ˆå…¶å®ƒä½¿ç”¨è¿™äº›ä»£ç çš„äººä¹Ÿä¸èƒ½å¤Ÿå†™å…¥å®ƒä»¬ï¼Œå¹¶ä¸”è¦æ€è€ƒä¸ºä»€ä¹ˆä¼šéœ€è¦å¯¹è¿™äº›å˜é‡é‡æ–°èµ‹å€¼ã€‚ ä½¿ç”¨ <code>const</code> ä¹Ÿå¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“çš„æ¨æµ‹æ•°æ®çš„æµåŠ¨ã€‚<br>è·Ÿæ®ä½ çš„è‡ªå·±åˆ¤æ–­ï¼Œå¦‚æœåˆé€‚çš„è¯ï¼Œä¸å›¢é˜Ÿæˆå‘˜å•†è®®ä¸€ä¸‹ã€‚<br>è¿™ä¸ªæ‰‹å†Œå¤§éƒ¨åˆ†åœ°æ–¹éƒ½ä½¿ç”¨äº† <code>let</code> å£°æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"2-11-è§£æ„\"><a href=\"#2-11-è§£æ„\" class=\"headerlink\" title=\"2.11 è§£æ„\"></a>2.11 è§£æ„</h3><blockquote>\n<p><code>Another TypeScript</code> å·²ç»å¯ä»¥è§£æå…¶å®ƒ <code>ECMAScript 2015</code> ç‰¹æ€§äº†ã€‚ å®Œæ•´åˆ—è¡¨è¯·å‚è§ <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment\">the article on the Mozilla Developer Network</a>ã€‚ æœ¬ç« ï¼Œæˆ‘ä»¬å°†ç»™å‡ºä¸€ä¸ªç®€çŸ­çš„æ¦‚è¿°ã€‚</p>\n</blockquote>\n<h4 id=\"2-11-1-è§£æ„æ•°ç»„\"><a href=\"#2-11-1-è§£æ„æ•°ç»„\" class=\"headerlink\" title=\"2.11.1 è§£æ„æ•°ç»„\"></a>2.11.1 è§£æ„æ•°ç»„</h4><blockquote>\n<p>æœ€ç®€å•çš„è§£æ„è«è¿‡äºæ•°ç»„çš„è§£æ„èµ‹å€¼äº†ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> input = [<span class=\"number\">1</span>, <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> [first, second] = input;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first); <span class=\"comment\">// outputs 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(second); <span class=\"comment\">// outputs 2</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™åˆ›å»ºäº† <code>2</code> ä¸ªå‘½åå˜é‡ <code>first</code> å’Œ <code>second</code>ã€‚ ç›¸å½“äºä½¿ç”¨äº†ç´¢å¼•ï¼Œä½†æ›´ä¸ºæ–¹ä¾¿ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">first = input[<span class=\"number\">0</span>];</span><br><span class=\"line\">second = input[<span class=\"number\">1</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è§£æ„ä½œç”¨äºå·²å£°æ˜çš„å˜é‡ä¼šæ›´å¥½ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// swap variables</span></span><br><span class=\"line\">[first, second] = [second, first];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½œç”¨äºå‡½æ•°å‚æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">[first, second]: [<span class=\"built_in\">number</span>, <span class=\"built_in\">number</span>]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(first);</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(second);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f(input);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½ å¯ä»¥åœ¨æ•°ç»„é‡Œä½¿ç”¨ <code>...</code> è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> [first, ...rest] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first); <span class=\"comment\">// outputs 1</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(rest); <span class=\"comment\">// outputs [ 2, 3, 4 ]</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“ç„¶ï¼Œç”±äºæ˜¯ <code>JavaScript</code>, ä½ å¯ä»¥å¿½ç•¥ä½ ä¸å…³å¿ƒçš„å°¾éšå…ƒç´ ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> [first] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(first); <span class=\"comment\">// outputs 1</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æˆ–å…¶å®ƒå…ƒç´ ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> [, second, , fourth] = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-11-2-å¯¹è±¡è§£æ„\"><a href=\"#2-11-2-å¯¹è±¡è§£æ„\" class=\"headerlink\" title=\"2.11.2 å¯¹è±¡è§£æ„\"></a>2.11.2 å¯¹è±¡è§£æ„</h4><blockquote>\n<p>ä½ ä¹Ÿå¯ä»¥è§£æ„å¯¹è±¡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> o = &#123;</span><br><span class=\"line\">  a: <span class=\"string\">&quot;foo&quot;</span>,</span><br><span class=\"line\">  b: <span class=\"number\">12</span>,</span><br><span class=\"line\">  c: <span class=\"string\">&quot;bar&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> &#123; a, b &#125; = o;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é€šè¿‡ <code>o.a and o.b</code> åˆ›å»ºäº† <code>a</code> å’Œ <code>b</code> ã€‚ æ³¨æ„ï¼Œå¦‚æœä½ ä¸éœ€è¦ <code>c</code> ä½ å¯ä»¥å¿½ç•¥å®ƒã€‚<br>å°±åƒæ•°ç»„è§£æ„ï¼Œä½ å¯ä»¥ç”¨æ²¡æœ‰å£°æ˜çš„èµ‹å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(&#123; a, b &#125; = &#123; <span class=\"attr\">a</span>: <span class=\"string\">&quot;baz&quot;</span>, <span class=\"attr\">b</span>: <span class=\"number\">101</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨æ‹¬å·å°†å®ƒæ‹¬èµ·æ¥ï¼Œå› ä¸º <code>Javascript</code> é€šå¸¸ä¼šå°†ä»¥ <code>&#123;</code> èµ·å§‹çš„è¯­å¥è§£æä¸ºä¸€ä¸ªå—ã€‚<br>ä½ å¯ä»¥åœ¨å¯¹è±¡é‡Œä½¿ç”¨ <code>...</code> è¯­æ³•åˆ›å»ºå‰©ä½™å˜é‡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; a, ...passthrough &#125; = o;</span><br><span class=\"line\"><span class=\"keyword\">let</span> total = passthrough.b + passthrough.c.length;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-11-3-å±æ€§é‡å‘½å\"><a href=\"#2-11-3-å±æ€§é‡å‘½å\" class=\"headerlink\" title=\"2.11.3 å±æ€§é‡å‘½å\"></a>2.11.3 å±æ€§é‡å‘½å</h4><blockquote>\n<p>ä½ ä¹Ÿå¯ä»¥ç»™å±æ€§ä»¥ä¸åŒçš„åå­—ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; <span class=\"attr\">a</span>: newName1, <span class=\"attr\">b</span>: newName2 &#125; = o;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„è¯­æ³•å¼€å§‹å˜å¾—æ··ä¹±ã€‚ ä½ å¯ä»¥å°† <code>a: newName1</code> è¯»åš â€œ<code>a</code> ä½œä¸º <code>newName1</code>â€œã€‚ æ–¹å‘æ˜¯ä»å·¦åˆ°å³ï¼Œå¥½åƒä½ å†™æˆäº†ä»¥ä¸‹æ ·å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> newName1 = o.a;</span><br><span class=\"line\"><span class=\"keyword\">let</span> newName2 = o.b;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œè¿™é‡Œçš„å†’å·ä¸æ˜¯æŒ‡ç¤ºç±»å‹çš„ã€‚ å¦‚æœä½ æƒ³æŒ‡å®šå®ƒçš„ç±»å‹ï¼Œ ä»ç„¶éœ€è¦åœ¨å…¶åå†™ä¸Šå®Œæ•´çš„æ¨¡å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> &#123; a, b &#125;: &#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b: <span class=\"built_in\">number</span> &#125; = o;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-11-4-é»˜è®¤å€¼\"><a href=\"#2-11-4-é»˜è®¤å€¼\" class=\"headerlink\" title=\"2.11.4 é»˜è®¤å€¼\"></a>2.11.4 é»˜è®¤å€¼</h4><blockquote>\n<p>é»˜è®¤å€¼å¯ä»¥è®©ä½ åœ¨å±æ€§ä¸º <code>undefined</code> æ—¶ä½¿ç”¨ç¼ºçœå€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">keepWholeObject</span>(<span class=\"params\">wholeObject: &#123; a: <span class=\"built_in\">string</span>; b?: <span class=\"built_in\">number</span> &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> &#123; a, b = <span class=\"number\">1001</span> &#125; = wholeObject;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç°åœ¨ï¼Œå³ä½¿ <code>b</code> ä¸º <code>undefined</code> ï¼Œ <code>keepWholeObject</code> å‡½æ•°çš„å˜é‡ <code>wholeObject</code> çš„å±æ€§ <code>a</code> å’Œ <code>b</code> éƒ½ä¼šæœ‰å€¼ã€‚</p>\n</blockquote>\n<h4 id=\"2-11-5-å‡½æ•°å£°æ˜\"><a href=\"#2-11-5-å‡½æ•°å£°æ˜\" class=\"headerlink\" title=\"2.11.5 å‡½æ•°å£°æ˜\"></a>2.11.5 å‡½æ•°å£°æ˜</h4><blockquote>\n<p>è§£æ„ä¹Ÿèƒ½ç”¨äºå‡½æ•°å£°æ˜ã€‚ çœ‹ä»¥ä¸‹ç®€å•çš„æƒ…å†µï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> C = &#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b?: <span class=\"built_in\">number</span> &#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">&#123; a, b &#125;: C</span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æ›´å¤šçš„æ˜¯æŒ‡å®šé»˜è®¤å€¼ï¼Œè§£æ„é»˜è®¤å€¼æœ‰äº›æ£˜æ‰‹ã€‚ é¦–å…ˆï¼Œä½ éœ€è¦åœ¨é»˜è®¤å€¼ä¹‹å‰è®¾ç½®å…¶æ ¼å¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">&#123; a = <span class=\"string\">&quot;&quot;</span>, b = <span class=\"number\">0</span> &#125; = &#123;&#125;</span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ä»£ç æ˜¯ä¸€ä¸ªç±»å‹æ¨æ–­çš„ä¾‹å­ï¼Œå°†åœ¨æœ¬æ‰‹å†Œåæ–‡ä»‹ç»ã€‚<br>å…¶æ¬¡ï¼Œä½ éœ€è¦çŸ¥é“åœ¨è§£æ„å±æ€§ä¸Šç»™äºˆä¸€ä¸ªé»˜è®¤æˆ–å¯é€‰çš„å±æ€§ç”¨æ¥æ›¿æ¢ä¸»åˆå§‹åŒ–åˆ—è¡¨ã€‚ è¦çŸ¥é“ <code>C</code> çš„å®šä¹‰æœ‰ä¸€ä¸ª <code>b</code> å¯é€‰å±æ€§ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">&#123; a, b = <span class=\"number\">0</span> &#125; = &#123; a: <span class=\"string\">&quot;&quot;</span> &#125;</span>): <span class=\"title\">void</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f(&#123; <span class=\"attr\">a</span>: <span class=\"string\">&quot;yes&quot;</span> &#125;); <span class=\"comment\">// ok, default b = 0</span></span><br><span class=\"line\">f(); <span class=\"comment\">// ok, default to &#123;a: &quot;&quot;&#125;, which then defaults b = 0</span></span><br><span class=\"line\">f(&#123;&#125;); <span class=\"comment\">// error, &#x27;a&#x27; is required if you supply an argument</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¦å°å¿ƒä½¿ç”¨è§£æ„ã€‚ ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå°±ç®—æ˜¯æœ€ç®€å•çš„è§£æ„è¡¨è¾¾å¼ä¹Ÿæ˜¯éš¾ä»¥ç†è§£çš„ã€‚ å°¤å…¶å½“å­˜åœ¨æ·±å±‚åµŒå¥—è§£æ„çš„æ—¶å€™ï¼Œå°±ç®—è¿™æ—¶æ²¡æœ‰å †å åœ¨ä¸€èµ·çš„é‡å‘½åï¼Œé»˜è®¤å€¼å’Œç±»å‹æ³¨è§£ï¼Œä¹Ÿæ˜¯ä»¤äººéš¾ä»¥ç†è§£çš„ã€‚ è§£æ„è¡¨è¾¾å¼è¦å°½é‡ä¿æŒå°è€Œç®€å•ã€‚ ä½ è‡ªå·±ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨è§£æ„å°†ä¼šç”Ÿæˆçš„èµ‹å€¼è¡¨è¾¾å¼ã€‚</p>\n</blockquote>\n<h4 id=\"2-11-6-å±•å¼€\"><a href=\"#2-11-6-å±•å¼€\" class=\"headerlink\" title=\"2.11.6 å±•å¼€\"></a>2.11.6 å±•å¼€</h4><blockquote>\n<p>å±•å¼€æ“ä½œç¬¦æ­£ä¸è§£æ„ç›¸åã€‚ å®ƒå…è®¸ä½ å°†ä¸€ä¸ªæ•°ç»„å±•å¼€ä¸ºå¦ä¸€ä¸ªæ•°ç»„ï¼Œæˆ–å°†ä¸€ä¸ªå¯¹è±¡å±•å¼€ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ã€‚ ä¾‹å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> first = [<span class=\"number\">1</span>, <span class=\"number\">2</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> second = [<span class=\"number\">3</span>, <span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> bothPlus = [<span class=\"number\">0</span>, ...first, ...second, <span class=\"number\">5</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¼šä»¤ <code>bothPlus</code> çš„å€¼ä¸º <code>[0, 1, 2, 3, 4, 5]</code>ã€‚ å±•å¼€æ“ä½œåˆ›å»ºäº† <code>first</code> å’Œ <code>second</code> çš„ä¸€ä»½æµ…æ‹·è´ã€‚ å®ƒä»¬ä¸ä¼šè¢«å±•å¼€æ“ä½œæ‰€æ”¹å˜ã€‚<br>ä½ è¿˜å¯ä»¥å±•å¼€å¯¹è±¡ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> defaults = &#123; <span class=\"attr\">food</span>: <span class=\"string\">&quot;spicy&quot;</span>, <span class=\"attr\">price</span>: <span class=\"string\">&quot;$$&quot;</span>, <span class=\"attr\">ambiance</span>: <span class=\"string\">&quot;noisy&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> search = &#123; ...defaults, <span class=\"attr\">food</span>: <span class=\"string\">&quot;rich&quot;</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>search</code> çš„å€¼ä¸º <code>&#123; food: &quot;rich&quot;, price: &quot;$$&quot;, ambiance: &quot;noisy&quot; &#125;</code>ã€‚ å¯¹è±¡çš„å±•å¼€æ¯”æ•°ç»„çš„å±•å¼€è¦å¤æ‚çš„å¤šã€‚ åƒæ•°ç»„å±•å¼€ä¸€æ ·ï¼Œå®ƒæ˜¯ä»å·¦è‡³å³è¿›è¡Œå¤„ç†ï¼Œä½†ç»“æœä»ä¸ºå¯¹è±¡ã€‚ è¿™å°±æ„å‘³ç€å‡ºç°åœ¨å±•å¼€å¯¹è±¡åé¢çš„å±æ€§ä¼šè¦†ç›–å‰é¢çš„å±æ€§ã€‚ å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨ç»“å°¾å¤„è¿›è¡Œå±•å¼€çš„è¯ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> defaults = &#123; <span class=\"attr\">food</span>: <span class=\"string\">&quot;spicy&quot;</span>, <span class=\"attr\">price</span>: <span class=\"string\">&quot;$$&quot;</span>, <span class=\"attr\">ambiance</span>: <span class=\"string\">&quot;noisy&quot;</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> search = &#123; <span class=\"attr\">food</span>: <span class=\"string\">&quot;rich&quot;</span>, ...defaults &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é‚£ä¹ˆï¼Œ<code>defaults</code> é‡Œçš„ <code>food</code> å±æ€§ä¼šé‡å†™ <code>food: &quot;rich&quot;</code>ï¼Œåœ¨è¿™é‡Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚<br>å¯¹è±¡å±•å¼€è¿˜æœ‰å…¶å®ƒä¸€äº›æ„æƒ³ä¸åˆ°çš„é™åˆ¶ã€‚ é¦–å…ˆï¼Œå®ƒä»…åŒ…å«å¯¹è±¡ <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties\">è‡ªèº«çš„å¯æšä¸¾å±æ€§</a>ã€‚ å¤§ä½“ä¸Šæ˜¯è¯´å½“ä½ å±•å¼€ä¸€ä¸ªå¯¹è±¡å®ä¾‹æ—¶ï¼Œä½ ä¼šä¸¢å¤±å…¶æ–¹æ³•ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  p = <span class=\"number\">12</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">m</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\"><span class=\"keyword\">let</span> clone = &#123; ...c &#125;;</span><br><span class=\"line\">clone.p; <span class=\"comment\">// ok</span></span><br><span class=\"line\">clone.m(); <span class=\"comment\">// error!</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…¶æ¬¡ï¼Œ<code>TypeScript</code> ç¼–è¯‘å™¨ä¸å…è®¸å±•å¼€æ³›å‹å‡½æ•°ä¸Šçš„ç±»å‹å‚æ•°ã€‚ è¿™ä¸ªç‰¹æ€§ä¼šåœ¨ <code>TypeScript</code> çš„æœªæ¥ç‰ˆæœ¬ä¸­è€ƒè™‘å®ç°ã€‚</p>\n</blockquote>\n<h2 id=\"ä¸‰ã€æ¥å£\"><a href=\"#ä¸‰ã€æ¥å£\" class=\"headerlink\" title=\"ä¸‰ã€æ¥å£\"></a>ä¸‰ã€æ¥å£</h2><h3 id=\"3-1-å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\"><a href=\"#3-1-å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\" class=\"headerlink\" title=\"3.1 å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£\"></a>3.1 å®ç°ä¸€ä¸ªç®€å•çš„æ¥å£</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> LabelledValue &#123;</span><br><span class=\"line\">  label: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printLabel</span>(<span class=\"params\">labelledObj: LabelledValue</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(labelledObj.label);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myObj = &#123; <span class=\"attr\">size</span>: <span class=\"number\">10</span>, <span class=\"attr\">label</span>: <span class=\"string\">&quot;size 10 Object&quot;</span> &#125;;</span><br><span class=\"line\">printLabel(myObj);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-å¯é€‰å±æ€§\"><a href=\"#3-2-å¯é€‰å±æ€§\" class=\"headerlink\" title=\"3.2 å¯é€‰å±æ€§\"></a>3.2 å¯é€‰å±æ€§</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> SquareConfig &#123;</span><br><span class=\"line\">  color?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  width?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createConfig</span>(<span class=\"params\">config: SquareConfig</span>): </span>&#123; color: <span class=\"built_in\">string</span>; area: <span class=\"built_in\">number</span> &#125; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newSquare = &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;white&quot;</span>, <span class=\"attr\">area</span>: <span class=\"number\">100</span> &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.color) &#123;</span><br><span class=\"line\">    newSquare.color = config.color;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.width) &#123;</span><br><span class=\"line\">    newSquare.area = config.width * config.width;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> newSquare;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> mySquare = createConfig(&#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;black&quot;</span>, <span class=\"attr\">width</span>: <span class=\"number\">20</span> &#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(mySquare);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-åªè¯»å±æ€§\"><a href=\"#3-3-åªè¯»å±æ€§\" class=\"headerlink\" title=\"3.3 åªè¯»å±æ€§\"></a>3.3 åªè¯»å±æ€§</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Point &#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> p1: Point = &#123; <span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"attr\">y</span>: <span class=\"number\">20</span> &#125;;</span><br><span class=\"line\">p1.x = <span class=\"number\">5</span>; <span class=\"comment\">// error! å› ä¸ºå±æ€§æ˜¯åªè¯»çš„</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-4-é¢å¤–çš„å±æ€§æ£€æŸ¥\"><a href=\"#3-4-é¢å¤–çš„å±æ€§æ£€æŸ¥\" class=\"headerlink\" title=\"3.4 é¢å¤–çš„å±æ€§æ£€æŸ¥\"></a>3.4 é¢å¤–çš„å±æ€§æ£€æŸ¥</h3><blockquote>\n<p>é—®é¢˜ï¼šå°†â€ <em>å¯é€‰å±æ€§</em> â€œä¸â€ <code>option bags</code> â€œæ¨¡å¼ç›¸ç»“åˆè€Œå¼•å‘</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> SquareConfig &#123;</span><br><span class=\"line\">  color?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  width?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createConfig</span>(<span class=\"params\">config: SquareConfig</span>): </span>&#123; color: <span class=\"built_in\">string</span>; area: <span class=\"built_in\">number</span> &#125; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> newSquare = &#123; <span class=\"attr\">color</span>: <span class=\"string\">&quot;white&quot;</span>, <span class=\"attr\">area</span>: <span class=\"number\">100</span> &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.color) &#123;</span><br><span class=\"line\">    newSquare.color = config.color;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (config.width) &#123;</span><br><span class=\"line\">    newSquare.area = config.width * config.width;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> newSquare;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>let mySquare = createConfig(&#123; colour: &quot;red&quot;, width: 100 &#125;); //æŠ¥é”™</code></p>\n</blockquote>\n<ul>\n<li>è§£å†³æ–¹æ¡ˆä¸€ï¼šé‡‡ç”¨ç±»å‹æ–­è¨€</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> mySquare = createConfig(&#123; <span class=\"attr\">width</span>: <span class=\"number\">100</span>, <span class=\"attr\">opacity</span>: <span class=\"number\">0.5</span> &#125; <span class=\"keyword\">as</span> SquareConfig);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å†³æ–¹æ¡ˆäºŒï¼šé‡‡ç”¨æ·»åŠ ä¸€ä¸ªå­—ç¬¦ä¸²ç´¢å¼•ç­¾å(æœ€ä½³æ–¹æ¡ˆ)</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> _SquareConfig &#123;</span><br><span class=\"line\">  color?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  width?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  [propName: <span class=\"built_in\">string</span>]: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è§£å†³æ–¹æ¡ˆä¸‰ï¼šå˜é‡èµ‹å€¼</li>\n</ul>\n<h3 id=\"3-5-å‡½æ•°ç±»å‹\"><a href=\"#3-5-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5 å‡½æ•°ç±»å‹\"></a>3.5 å‡½æ•°ç±»å‹</h3><h4 id=\"3-5-1-å‡½æ•°ç±»å‹\"><a href=\"#3-5-1-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5.1 å‡½æ•°ç±»å‹\"></a>3.5.1 å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> SearchFunc &#123;</span><br><span class=\"line\">  (source: <span class=\"built_in\">string</span>, <span class=\"attr\">subString</span>: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> mySearch: SearchFunc;</span><br><span class=\"line\">mySearch = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">source: <span class=\"built_in\">string</span>, subString: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = source.search(subString);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result &gt; -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-5-2-å‡½æ•°ç±»å‹\"><a href=\"#3-5-2-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5.2 å‡½æ•°ç±»å‹\"></a>3.5.2 å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> add: <span class=\"function\">(<span class=\"params\">baseValue: <span class=\"built_in\">number</span>, increment: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">number</span> = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> add2 = (x: <span class=\"built_in\">number</span>, <span class=\"attr\">y</span>: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> x + y;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> buildNameFun: <span class=\"function\">(<span class=\"params\">fname: <span class=\"built_in\">string</span>, ...rest: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">string</span>&gt;</span>) =&gt;</span> <span class=\"built_in\">string</span> = <span class=\"function\">(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, ...restOfName: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">string</span>&gt;</span>) =&gt;</span> <span class=\"string\">`<span class=\"subst\">$&#123;firstName&#125;</span>, <span class=\"subst\">$&#123;restOfName.join(<span class=\"string\">&quot; &quot;</span>)&#125;</span>`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> fn = (a: <span class=\"built_in\">number</span>, <span class=\"attr\">b</span>: <span class=\"built_in\">number</span>): <span class=\"function\"><span class=\"params\">number</span> =&gt;</span> a + b;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-5-3-å‡½æ•°ç±»å‹\"><a href=\"#3-5-3-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"3.5.3 å‡½æ•°ç±»å‹\"></a>3.5.3 å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> func &#123;</span><br><span class=\"line\">  (x: <span class=\"built_in\">string</span>, <span class=\"attr\">y</span>: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> func: func = <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span>, y: <span class=\"built_in\">string</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x.search(y) &gt; -<span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-6-å¯ç´¢å¼•ç±»å‹\"><a href=\"#3-6-å¯ç´¢å¼•ç±»å‹\" class=\"headerlink\" title=\"3.6 å¯ç´¢å¼•ç±»å‹\"></a>3.6 å¯ç´¢å¼•ç±»å‹</h3><ul>\n<li>ä¾‹å¦‚ï¼š<code>a[10]</code> æˆ– <code>ageMap[&quot;daniel&quot;]</code></li>\n<li>å¯ç´¢å¼•ç±»å‹å…·æœ‰ä¸€ä¸ª ç´¢å¼•ç­¾åï¼Œå®ƒæè¿°äº†å¯¹è±¡ç´¢å¼•çš„ç±»å‹ï¼Œè¿˜æœ‰ç›¸åº”çš„ç´¢å¼•è¿”å›å€¼ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> StringArray &#123;</span><br><span class=\"line\">  [index: <span class=\"built_in\">number</span>]: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myArray: StringArray;</span><br><span class=\"line\">myArray = [<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Fred&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> myStr: <span class=\"built_in\">string</span> = myArray[<span class=\"number\">0</span>];</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(myStr);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Ts</code> æ”¯æŒä¸¤ç§ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸² å’Œ æ•°å­—ã€‚å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§ç±»å‹çš„ç´¢å¼•ï¼Œä½†æ•°å­—ç´¢å¼•çš„è¿”å›å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç´¢å¼•è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"3-7-ç±»ç±»å‹\"><a href=\"#3-7-ç±»ç±»å‹\" class=\"headerlink\" title=\"3.7 ç±»ç±»å‹\"></a>3.7 ç±»ç±»å‹</h3><blockquote>\n<p>æ¥å£æè¿°äº†ç±»çš„å…¬å…±éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯ç±»çš„å…¬æœ‰å’Œç§æœ‰ä¸¤éƒ¨åˆ†ã€‚å®ƒä¸ä¼šå¸®ä½ æ£€æŸ¥ç±»æ˜¯å¦å…·æœ‰æŸäº›ç§æœ‰æˆå‘˜</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> ClockInterface &#123;</span><br><span class=\"line\">  currentTime: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\">  setTime(d: <span class=\"built_in\">Date</span>); <span class=\"comment\">// åœ¨æ¥å£ä¸­æè¿°çš„æ–¹æ³•</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Clock</span> <span class=\"title\">implements</span> <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  currentTime: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">setTime</span>(<span class=\"params\">d: <span class=\"built_in\">Date</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// åœ¨ç±»ä¸­çš„å…·ä½“å®ç°</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.currentTime = d;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“æ“ä½œç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»æ˜¯å…·æœ‰ä¸¤ä¸ªç±»å‹çš„ï¼š<em>é™æ€éƒ¨åˆ†çš„ç±»å‹</em> å’Œ _å®ä¾‹çš„ç±»å‹_ã€‚<br>å½“ç”¨æ„é€ å™¨ç­¾åå»å®šä¹‰ä¸€ä¸ªæ¥å£å¹¶è¯•å›¾å®šä¹‰ä¸€ä¸ªç±»å»å®ç°è¿™ä¸ªæ¥å£æ—¶ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚<br>å› ä¸ºå½“ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæ¥å£æ—¶ï¼Œåªå¯¹å…¶å®ä¾‹éƒ¨åˆ†è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚<code>constructor</code> å­˜åœ¨äºç±»çš„é™æ€éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¸åœ¨æ£€æŸ¥çš„èŒƒå›´å†…ã€‚</p>\n</blockquote>\n<ul>\n<li>å› æ­¤åº”å½“ç›´æ¥æ“ä½œ <em>ç±»çš„é™æ€éƒ¨åˆ†</em></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> err_ClockConstructor &#123;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> (hour: <span class=\"built_in\">number</span>, <span class=\"attr\">minute</span>: <span class=\"built_in\">number</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">err_Clock</span> <span class=\"title\">implements</span> <span class=\"title\">err_ClockConstructor</span> </span>&#123;</span><br><span class=\"line\">  currentTime: <span class=\"built_in\">Date</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢æ˜¯å®ç°å¯¹ <em>é™æ€ç±»å‹</em> çš„æ£€æŸ¥å·¥ä½œ</li>\n</ul>\n<blockquote>\n<p>å› ä¸º <code>createClock</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>ClockConstructor</code> ç±»å‹ï¼Œåœ¨ <code>createClock(AnalogClock, 7, 32)</code> é‡Œï¼Œä¼šæ£€æŸ¥ <code>AnalogClock</code> æ˜¯å¦ç¬¦åˆæ„é€ å‡½æ•°ç­¾å</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> ClockConstructor &#123;</span><br><span class=\"line\">  <span class=\"keyword\">new</span> (hour: <span class=\"built_in\">number</span>, <span class=\"attr\">minute</span>: <span class=\"built_in\">number</span>): ClockInterface;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> ClockInterface &#123;</span><br><span class=\"line\">  tick();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createClock</span>(<span class=\"params\">ctor: ClockConstructor, hour: <span class=\"built_in\">number</span>, minute: <span class=\"built_in\">number</span></span>): <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> ctor(hour, minute);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DigitalClock</span> <span class=\"title\">implements</span> <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">tick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;beep beep&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AnalogClock</span> <span class=\"title\">implements</span> <span class=\"title\">ClockInterface</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">h: <span class=\"built_in\">number</span>, m: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">tick</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;tick tick&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> digital = createClock(DigitalClock, <span class=\"number\">12</span>, <span class=\"number\">17</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> analog = createClock(AnalogClock, <span class=\"number\">7</span>, <span class=\"number\">32</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(digital);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(analog);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-8-æ¥å£ç»§æ‰¿\"><a href=\"#3-8-æ¥å£ç»§æ‰¿\" class=\"headerlink\" title=\"3.8 æ¥å£ç»§æ‰¿\"></a>3.8 æ¥å£ç»§æ‰¿</h3><ul>\n<li>å’Œç±»ä¸€æ ·ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç›¸äº’ç»§æ‰¿ã€‚å¯ä»¥çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—é‡Œã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Shape &#123;</span><br><span class=\"line\">  color: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Square <span class=\"keyword\">extends</span> Shape &#123;</span><br><span class=\"line\">  sideLength: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> square = &lt;Square&gt;&#123;&#125;;</span><br><span class=\"line\">square.color = <span class=\"string\">&quot;blue&quot;</span>;</span><br><span class=\"line\">square.sideLength = <span class=\"number\">10</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œåˆ›å»ºå‡ºå¤šä¸ªæ¥å£çš„åˆæˆæ¥å£</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Shape &#123;</span><br><span class=\"line\">  color: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> PenStroke &#123;</span><br><span class=\"line\">  penWidth: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Square <span class=\"keyword\">extends</span> Shape, PenStroke &#123;</span><br><span class=\"line\">  sideLength: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> square = &lt;Square&gt;&#123;&#125;;</span><br><span class=\"line\">square.color = <span class=\"string\">&quot;blue&quot;</span>;</span><br><span class=\"line\">square.sideLength = <span class=\"number\">10</span>;</span><br><span class=\"line\">square.penWidth = <span class=\"number\">5.0</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç›®çš„: <code>=&gt;</code> çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Lamp &#123;</span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> wx &#123;</span><br><span class=\"line\">  wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  showWxNumber(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Photo <span class=\"keyword\">extends</span> Lamp, wx &#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HuaWeiPhone</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;åä¸ºæ‰‹æœº&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">wxNumber: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.wxNumber = wxNumber;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  showWxNumber(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;æˆ‘çš„å¾®ä¿¡å·ï¼š123&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> huaWeiPhone = <span class=\"keyword\">new</span> HuaWeiPhone(<span class=\"number\">12345678910</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.showWxNumber());</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.photo());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-9-æ··åˆç±»å‹\"><a href=\"#3-9-æ··åˆç±»å‹\" class=\"headerlink\" title=\"3.9 æ··åˆç±»å‹\"></a>3.9 æ··åˆç±»å‹</h3><blockquote>\n<p>ä¸€ä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åšä¸ºå‡½æ•°å’Œå¯¹è±¡ä½¿ç”¨ï¼Œå¹¶å¸¦æœ‰é¢å¤–çš„å±æ€§</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Counter &#123;</span><br><span class=\"line\">  (start: <span class=\"built_in\">number</span>): <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  interval: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  reset(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getCounter</span>(<span class=\"params\"></span>): <span class=\"title\">Counter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> counter = &lt;Counter&gt;<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">start: <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// return start + &#x27;string&#x27;;</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  counter.interval = <span class=\"number\">123</span>;</span><br><span class=\"line\">  counter.reset = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> counter;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> c = getCounter();</span><br><span class=\"line\">c(<span class=\"number\">10</span>);</span><br><span class=\"line\">c.interval = <span class=\"number\">5.0</span>;</span><br><span class=\"line\">c.reset();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-10-æ¥å£ç»§æ‰¿ç±»\"><a href=\"#3-10-æ¥å£ç»§æ‰¿ç±»\" class=\"headerlink\" title=\"3.10 æ¥å£ç»§æ‰¿ç±»\"></a>3.10 æ¥å£ç»§æ‰¿ç±»</h3><ol>\n<li>å½“æ¥å£ç»§æ‰¿äº†ä¸€ä¸ªç±»ç±»å‹æ—¶ï¼Œå®ƒä¼šç»§æ‰¿ç±»çš„æˆå‘˜ä½†ä¸åŒ…æ‹¬å…¶å®ç°ã€‚</li>\n<li>å°±å¥½åƒæ¥å£å£°æ˜äº†æ‰€æœ‰ç±»ä¸­å­˜åœ¨çš„æˆå‘˜ï¼Œä½†å¹¶æ²¡æœ‰æä¾›å…·ä½“å®ç°ä¸€æ ·ã€‚</li>\n<li>æ¥å£åŒæ ·ä¼šç»§æ‰¿åˆ°ç±»çš„ <code>private</code> å’Œ <code>protected</code> æˆå‘˜ã€‚</li>\n<li>è¿™æ„å‘³ç€å½“ä½ åˆ›å»ºäº†ä¸€ä¸ªæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æˆ–å—ä¿æŠ¤çš„æˆå‘˜çš„ç±»æ—¶ï¼Œè¿™ä¸ªæ¥å£ç±»å‹åªèƒ½è¢«è¿™ä¸ªç±»æˆ–å…¶å­ç±»æ‰€å®ç°( <code>implement</code> )ã€‚</li>\n<li>å½“ä½ æœ‰ä¸€ä¸ªåºå¤§çš„ç»§æ‰¿æ¥å£æ—¶è¿™å¾ˆæœ‰ç”¨ï¼Œä½†è¦æŒ‡å‡ºçš„æ˜¯ä½ çš„ä»£ç åªåœ¨å­ç±»æ‹¥æœ‰ç‰¹å®šå±æ€§æ—¶èµ·ä½œç”¨ã€‚è¿™ä¸ªå­ç±»é™¤äº†ç»§æ‰¿è‡³åŸºç±»å¤–ä¸åŸºç±»æ²¡æœ‰ä»»ä½•å…³ç³»ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Control</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> state: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> SelectableControl <span class=\"keyword\">extends</span> Control &#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Button</span> <span class=\"keyword\">extends</span> <span class=\"title\">Control</span> <span class=\"title\">implements</span> <span class=\"title\">SelectableControl</span> </span>&#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TextBox</span> <span class=\"keyword\">extends</span> <span class=\"title\">Control</span> </span>&#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// é”™è¯¯ï¼š&quot;Image&quot;ç±»å‹ç¼ºå°‘&quot;state&quot;å±æ€§</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Image</span> <span class=\"title\">implements</span> <span class=\"title\">SelectableControl</span> </span>&#123;</span><br><span class=\"line\">  select(): <span class=\"built_in\">void</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Location</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>SelectableControl</code> åŒ…å«äº† <code>Control</code> çš„æ‰€æœ‰æˆå‘˜ã€‚åŒ…æ‹¬ç§æœ‰æˆå‘˜ <code>state</code>ã€‚å› ä¸º <code>state</code> æ˜¯ç§æœ‰æˆå‘˜ï¼Œæ‰€ä»¥åªèƒ½å¤Ÿæ˜¯ <code>Control</code> çš„å­ç±»ä»¬æ‰èƒ½å®ç° <code>SelectableControl</code> æ¥å£ï¼Œå› ä¸ºåªæœ‰ <code>Control</code> çš„å­ç±»æ‰èƒ½å¤Ÿæ‹¥æœ‰ä¸€ä¸ªå£°æ˜äº <code>Control</code> çš„ç§æœ‰æˆå‘˜ <code>state</code>ï¼Œè¿™å¯¹ç§æœ‰æˆå‘˜çš„å…¼å®¹æ€§æ˜¯å¿…éœ€çš„ã€‚<br>åœ¨ <code>Control</code> ç±»å†…éƒ¨ï¼Œæ˜¯å…è®¸é€šè¿‡ <code>SelectableControl</code> çš„å®ä¾‹æ¥è®¿é—®ç§æœ‰æˆå‘˜ <code>state</code> çš„ã€‚å®é™…ä¸Šï¼Œ<code>SelectableControl</code> æ¥å£å’Œæ‹¥æœ‰ <code>select</code> æ–¹æ³•çš„ <code>Control</code> ç±»æ˜¯ä¸€æ ·çš„ã€‚<code>Button</code> å’Œ <code>TextBox</code> ç±»æ˜¯ <code>SelectableControl</code> çš„å­ç±»(å› ä¸ºå®ƒä»¬éƒ½ç»§æ‰¿è‡ª <code>Control</code> å¹¶æœ‰ <code>select</code> æ–¹æ³•ï¼Œä½† <code>Image</code> å’Œ <code>Location</code> ç±»å¹¶ä¸æ˜¯è¿™æ ·çš„ã€‚)</p>\n</blockquote>\n<h3 id=\"3-11-æ¥å£ç»§æ‰¿æ¥å£\"><a href=\"#3-11-æ¥å£ç»§æ‰¿æ¥å£\" class=\"headerlink\" title=\"3.11 æ¥å£ç»§æ‰¿æ¥å£\"></a>3.11 æ¥å£ç»§æ‰¿æ¥å£</h3><blockquote>\n<p>ç›®çš„: <code>=&gt;</code> çµæ´»åœ°å°†æ¥å£åˆ†å‰²åˆ°å¯é‡ç”¨çš„æ¨¡å—ä¸­</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Lamp &#123;</span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> wx &#123;</span><br><span class=\"line\">  wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  showWxNumber(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Photo <span class=\"keyword\">extends</span> Lamp, wx &#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HuaWeiPhone</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> wxNumber: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;åä¸ºæ‰‹æœº&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOn</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOff</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">wxNumber: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.wxNumber = wxNumber;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">showWxNumber</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;æˆ‘çš„å¾®ä¿¡å·æ˜¯ï¼š123&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> huaWeiPhone = <span class=\"keyword\">new</span> HuaWeiPhone(<span class=\"number\">13100970071</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.showWxNumber());</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(huaWeiPhone.photo());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-12-ç±»æ¥å£å®ç°\"><a href=\"#3-12-ç±»æ¥å£å®ç°\" class=\"headerlink\" title=\"3.12 ç±»æ¥å£å®ç°\"></a>3.12 ç±»æ¥å£å®ç°</h3><blockquote>\n<p>æ‰‹æœºç±»æ˜¯ä¸€ä¸ªå¤§ç±»<br>åä¸ºæ˜¯æ‰‹æœºç±»ä¸‹çš„ä¸€ä¸ªç±»<br>åä¸ºæ‰‹æœºæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½ï¼Œç…§ç›¸æœºä¹Ÿæœ‰æ‹ç…§å’Œé—ªå…‰ç¯åŠŸèƒ½<br>å› æ­¤åä¸ºæ‰‹æœºå’Œç…§ç›¸æœºçš„å…¬å…±ç‰¹æ€§å°±æ˜¯æ‹ç…§å’Œé—ªå…‰ç¯<br>æ‰€ä»¥é€šè¿‡å…³é”®å­— <code>implements</code> æ¥æ ‡è¯†æå–å‡ºæ¥çš„æ¥å£</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ‹ç…§</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Photo &#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// é—ªå…‰ç¯</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Lamp &#123;</span><br><span class=\"line\">  lampOn(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  lampOff(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Phone</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">HuaWei</span> <span class=\"keyword\">extends</span> <span class=\"title\">Phone</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span>, <span class=\"title\">Lamp</span> </span>&#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;åä¸ºæ‹ç…§&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOn</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOff</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DigitalCamera</span> <span class=\"title\">implements</span> <span class=\"title\">Photo</span>, <span class=\"title\">Lamp</span> </span>&#123;</span><br><span class=\"line\">  photo(): <span class=\"built_in\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;ç…§ç›¸æœºæ‹ç…§&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOn</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">lampOff</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å››ã€ç±»\"><a href=\"#å››ã€ç±»\" class=\"headerlink\" title=\"å››ã€ç±»\"></a>å››ã€ç±»</h2><h3 id=\"4-1-åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\"><a href=\"#4-1-åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\" class=\"headerlink\" title=\"4.1 åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»\"></a>4.1 åˆ›å»ºä¸€ä¸ªåŸºæœ¬ç±»</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Gretter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> gretting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.gretting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.gretting&#125;</span>`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> gretter: Gretter = <span class=\"keyword\">new</span> Gretter(<span class=\"string\">&quot;world!&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gretter);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-2-ç»§æ‰¿\"><a href=\"#4-2-ç»§æ‰¿\" class=\"headerlink\" title=\"4.2 ç»§æ‰¿\"></a>4.2 ç»§æ‰¿</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters: <span class=\"built_in\">number</span> = <span class=\"number\">0</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> moved <span class=\"subst\">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Snake</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters = <span class=\"number\">5</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Slithering...&quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.move(distanceInMeters);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Horse</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters = <span class=\"number\">45</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Galloping&quot;</span>);</span><br><span class=\"line\">    <span class=\"built_in\">super</span>.move(distanceInMeters);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> sam = <span class=\"keyword\">new</span> Snake(<span class=\"string\">&quot;Sammy the Python&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> tom: Animal = <span class=\"keyword\">new</span> Horse(<span class=\"string\">&quot;Tommy the Palomino&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">sam.move();</span><br><span class=\"line\">tom.move(<span class=\"number\">34</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-3-public-å…³é”®å­—\"><a href=\"#4-3-public-å…³é”®å­—\" class=\"headerlink\" title=\"4.3 public å…³é”®å­—\"></a>4.3 public å…³é”®å­—</h3><blockquote>\n<p>é»˜è®¤ä¸º <code>public</code><br>åœ¨ <code>TypeScript</code> ä¸­,æˆå‘˜éƒ½é»˜è®¤ä¸º <code>public</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal_public</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">move</span>(<span class=\"params\">distanceInMeters: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> moved <span class=\"subst\">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-4-private-å…³é”®å­—\"><a href=\"#4-4-private-å…³é”®å­—\" class=\"headerlink\" title=\"4.4 private å…³é”®å­—\"></a>4.4 private å…³é”®å­—</h3><blockquote>\n<p>ç†è§£ <code>private</code></p>\n<ol>\n<li>å½“æˆå‘˜è¢«æ ‡è®°æˆ <code>private</code> æ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®</li>\n<li>å¦‚æœå…¶ä¸­ä¸€ä¸ªç±»å‹é‡ŒåŒ…å«ä¸€ä¸ª <code>private</code> æˆå‘˜ï¼Œé‚£ä¹ˆåªæœ‰å½“å¦å¤–ä¸€ä¸ªç±»å‹ä¸­ä¹Ÿå­˜åœ¨è¿™æ ·ä¸€ä¸ª <code>private</code> æˆå‘˜ï¼Œ å¹¶ä¸”å®ƒä»¬éƒ½æ˜¯æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºè¿™ä¸¤ä¸ªç±»å‹æ˜¯å…¼å®¹çš„ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal_private</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> cat = <span class=\"keyword\">new</span> Animal_private(<span class=\"string\">&quot;Cat&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// cat.name; // é”™è¯¯ï¼š&#x27;name&#x27;æ˜¯ç§æœ‰çš„</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal_private_1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Rhino</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal_private_1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(<span class=\"string\">&quot;Rhino&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> animal = <span class=\"keyword\">new</span> Animal_private_1(<span class=\"string\">&quot;Goat&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> rhino = <span class=\"keyword\">new</span> Rhino();</span><br><span class=\"line\"><span class=\"keyword\">let</span> employee = <span class=\"keyword\">new</span> Employee(<span class=\"string\">&quot;Bob&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">animal = rhino;</span><br><span class=\"line\"><span class=\"comment\">// animal = employee; //é”™è¯¯ï¼šAnimalä¸Employeeä¸å…¼å®¹</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-5-protected-å…³é”®å­—\"><a href=\"#4-5-protected-å…³é”®å­—\" class=\"headerlink\" title=\"4.5 protected å…³é”®å­—\"></a>4.5 protected å…³é”®å­—</h3><ul>\n<li>ç†è§£ <code>protected</code></li>\n</ul>\n<blockquote>\n<p><code>protected</code> ä¿®é¥°ç¬¦ä¸ <code>private</code> ä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼Œ<code>protected</code> æˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Employee</span> <span class=\"keyword\">extends</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> department: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span>, department: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.department = department;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">getElevatorPitch</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, my name is <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> and I work in <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.department&#125;</span>`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> howard = <span class=\"keyword\">new</span> _Employee(<span class=\"string\">&quot;Howard&quot;</span>, <span class=\"string\">&quot;Sales&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(howard.getElevatorPitch());</span><br><span class=\"line\"><span class=\"comment\">// console.log(howard.name); // é”™è¯¯ï¼Œå› ä¸º name æ— æ³•åœ¨å¤–éƒ¨è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ <code>protected</code></li>\n</ul>\n<blockquote>\n<p>è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ã€‚ä½†æ˜¯èƒ½è¢«ç»§æ‰¿ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">__Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// __Employee èƒ½å¤Ÿç»§æ‰¿ Person</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">__Employee</span> <span class=\"keyword\">extends</span> <span class=\"title\">__Person</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> department: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span>, department: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(name);</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.department = department;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">getElevatorPitch</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">`Hello, my name is <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span> and I work in <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.department&#125;</span>.`</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> __howard = <span class=\"keyword\">new</span> __Employee(<span class=\"string\">&quot;Howard&quot;</span>, <span class=\"string\">&quot;Sales&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// let __join = new __Person(&quot;John&quot;);// é”™è¯¯ï¼š&#x27;Person&#x27;çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-6-readonly-ä¿®é¥°ç¬¦\"><a href=\"#4-6-readonly-ä¿®é¥°ç¬¦\" class=\"headerlink\" title=\"4.6 readonly ä¿®é¥°ç¬¦\"></a>4.6 readonly ä¿®é¥°ç¬¦</h3><ul>\n<li>ä½ å¯ä»¥ä½¿ç”¨ <code>readonly</code> å…³é”®å­—å°†å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚åªè¯»å±æ€§å¿…é¡»åœ¨å£°æ˜æ—¶æˆ–æ„é€ å‡½æ•°é‡Œè¢«åˆå§‹åŒ–</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Octopus</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> numberOfLegs: <span class=\"built_in\">number</span> = <span class=\"number\">8</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">theName: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.name = theName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> dad = <span class=\"keyword\">new</span> Octopus(<span class=\"string\">&quot;Man with the 8 strong legs&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// dad.name = &quot;Man with the 3-piece suit&quot;;// é”™è¯¯ï¼Œnameæ˜¯åªè¯»çš„</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å‚æ•°å±æ€§</li>\n</ul>\n<blockquote>\n<ol>\n<li>å‚æ•°å±æ€§å¯ä»¥æ–¹ä¾¿åœ°è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°æ–¹å®šä¹‰å¹¶åˆå§‹åŒ–ä¸€ä¸ªæˆå‘˜ã€‚</li>\n<li>å‚æ•°å±æ€§é€šè¿‡ç»™æ„é€ å‡½æ•°å‚æ•°å‰é¢æ·»åŠ ä¸€ä¸ªè®¿é—®é™å®šç¬¦æ¥å£°æ˜ã€‚</li>\n<li>ä½¿ç”¨ <code>private</code> é™å®šä¸€ä¸ªå‚æ•°å±æ€§ä¼šå£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼›å¯¹äº <code>public</code> å’Œ <code>protected</code> æ¥è¯´ä¹Ÿæ˜¯ä¸€æ ·ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Octopus</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> numberOfLegs: <span class=\"built_in\">number</span> = <span class=\"number\">9</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">readonly</span> name: <span class=\"built_in\">string</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-7-å­˜å–å™¨-get-amp-set\"><a href=\"#4-7-å­˜å–å™¨-get-amp-set\" class=\"headerlink\" title=\"4.7 å­˜å–å™¨ get &amp; set\"></a>4.7 å­˜å–å™¨ get &amp; set</h3><blockquote>\n<p>å­˜å–å™¨ æ”¯æŒ <code>es5+</code>ï¼Œä¸æ”¯æŒ <code>es3</code></p>\n</blockquote>\n<ol>\n<li><code>TypeScript</code> æ”¯æŒé€šè¿‡ <code>getters/setters</code> æ¥æˆªå–å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚å®ƒèƒ½å¸®åŠ©ä½ æœ‰æ•ˆçš„æ§åˆ¶å¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚</li>\n<li>æ²¡æœ‰å­˜å–å™¨çš„ä¾‹å­</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Employee</span> </span>&#123;</span><br><span class=\"line\">  fullName: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _employee = <span class=\"keyword\">new</span> _Employee();</span><br><span class=\"line\">_employee.fullName = <span class=\"string\">&quot;Bob Smith&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (_employee.fullName) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(_employee.fullName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æ‹¥æœ‰å­˜å–å™¨çš„ä¾‹å­</li>\n</ol>\n<blockquote>\n<ol>\n<li>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹å¯†ç ï¼Œæ¥éªŒè¯ä¸€ä¸‹å­˜å–å™¨æ˜¯å¦æ˜¯å·¥ä½œçš„ã€‚å½“å¯†ç ä¸å¯¹æ—¶ï¼Œä¼šæç¤ºæˆ‘ä»¬æ²¡æœ‰æƒé™å»ä¿®æ”¹å‘˜å·¥ã€‚</li>\n<li>åªå¸¦æœ‰ <code>get</code> ä¸å¸¦æœ‰ <code>set</code> çš„å­˜å–å™¨è‡ªåŠ¨è¢«æ¨æ–­ä¸º <code>readonly</code>ã€‚</li>\n<li>è¿™åœ¨ä»ä»£ç ç”Ÿæˆ <code>.d.ts</code> æ–‡ä»¶æ—¶æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå› ä¸ºåˆ©ç”¨è¿™ä¸ªå±æ€§çš„ç”¨æˆ·ä¼šçœ‹åˆ°ä¸å…è®¸å¤Ÿæ”¹å˜å®ƒçš„å€¼ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> passcode = <span class=\"string\">&quot;secret passcode&quot;</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Employee</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _fullName: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">fullName</span>(): <span class=\"title\">string</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._fullName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">fullName</span>(<span class=\"params\">newName: <span class=\"built_in\">string</span></span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (passcode &amp;&amp; passcode === <span class=\"string\">&quot;secret passcode&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>._fullName = newName;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Error: Unauthorized update of employee!&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> employee = <span class=\"keyword\">new</span> Employee();</span><br><span class=\"line\">employee.fullName = <span class=\"string\">&quot;Bob smith&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (employee.fullName) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(employee.fullName);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-8-é™æ€å±æ€§\"><a href=\"#4-8-é™æ€å±æ€§\" class=\"headerlink\" title=\"4.8 é™æ€å±æ€§\"></a>4.8 é™æ€å±æ€§</h3><blockquote>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ›å»ºç±»çš„é™æ€æˆå‘˜ï¼Œè¿™äº›å±æ€§å­˜åœ¨äºç±»æœ¬èº«ä¸Šé¢è€Œä¸æ˜¯ç±»çš„å®ä¾‹ä¸Šã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Gird</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> origin = &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span> &#125;;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">calculateDistanceFromOrigin</span>(<span class=\"params\">point: &#123; x: <span class=\"built_in\">number</span>; y: <span class=\"built_in\">number</span> &#125;</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> xDist = point.x - Gird.origin.x;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> yDist = point.y - Gird.origin.y;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.sqrt(xDist * xDist + yDist * yDist) / <span class=\"built_in\">this</span>.scale;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">public</span> scale: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(Gird.origin.x);</span><br><span class=\"line\"><span class=\"keyword\">let</span> grid1 = <span class=\"keyword\">new</span> Gird(<span class=\"number\">1.0</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> gird2 = <span class=\"keyword\">new</span> Gird(<span class=\"number\">5.0</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(grid1.calculateDistanceFromOrigin(&#123; <span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"attr\">y</span>: <span class=\"number\">10</span> &#125;));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(gird2.calculateDistanceFromOrigin(&#123; <span class=\"attr\">x</span>: <span class=\"number\">10</span>, <span class=\"attr\">y</span>: <span class=\"number\">10</span> &#125;));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-9-æŠ½è±¡ç±»\"><a href=\"#4-9-æŠ½è±¡ç±»\" class=\"headerlink\" title=\"4.9 æŠ½è±¡ç±»\"></a>4.9 æŠ½è±¡ç±»</h3><ol>\n<li>æŠ½è±¡ç±»ä½œä¸ºå…¶ä»–æ´¾ç”Ÿç±»çš„åŸºç±»ä½¿ç”¨ï¼Œå®ƒä»¬ä¸€èˆ¬ä¸ä¼šç›´æ¥è¢«å®ä¾‹åŒ–ã€‚</li>\n<li>ä¸åŒäºæ¥å£ï¼ŒæŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜çš„å®ç°ç»†èŠ‚</li>\n<li><code>abstract</code> å…³é”®å­—æ˜¯ç”¨äºå®šä¹‰æŠ½è±¡ç±»å’Œåœ¨æŠ½è±¡ç±»å†…éƒ¨å®šä¹‰æŠ½è±¡æ–¹æ³•</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> makeSound(): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  move(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;roaming the earth ...&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ä¸åŒ…å«å…·ä½“å®ç°å¹¶ä¸”å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚</li>\n<li>æŠ½è±¡æ–¹æ³•çš„è¯­æ³•äºæ¥å£æ–¹æ³•ç›¸ä¼¼ï¼ŒäºŒè€…éƒ½æ˜¯å®šä¹‰æ–¹æ³•ç­¾åä½†ä¸åŒ…å«æ–¹æ³•ä½“ã€‚ç„¶è€ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å« <code>abstract</code> å…³é”®å­—å¹¶ä¸”å¯ä»¥åŒ…å«è®¿é—®ä¿®é¥°ç¬¦</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Department</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">public</span> name: <span class=\"built_in\">string</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">  printName(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`Department name: <span class=\"subst\">$&#123;<span class=\"built_in\">this</span>.name&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">abstract</span> printMeeting(): <span class=\"built_in\">void</span>; <span class=\"comment\">// å¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AccountingDepartment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Department</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(<span class=\"string\">&quot;Accounting and Auditing&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  printMeeting(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;The Accounting Department meets each Monday at 10am.&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  generateReports(): <span class=\"built_in\">void</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Generating accounting reports...&quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> department: Department; <span class=\"comment\">// å…è®¸åˆ›å»ºä¸€ä¸ªå¯¹æŠ½è±¡ç±»çš„å¼•ç”¨</span></span><br><span class=\"line\"><span class=\"comment\">// department = new Departmemnt(); // é”™è¯¯ï¼Œä¸èƒ½åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±»çš„å®ä¾‹</span></span><br><span class=\"line\">department = <span class=\"keyword\">new</span> AccountingDepartment(); <span class=\"comment\">// å…è®¸å¯¹ä¸€ä¸ªæŠ½è±¡å­ç±»è¿›è¡Œå®ä¾‹åŒ–å’Œèµ‹å€¼</span></span><br><span class=\"line\">department.printName();</span><br><span class=\"line\">department.printMeeting();</span><br><span class=\"line\"><span class=\"comment\">// department.generateReports(); // é”™è¯¯ï¼Œæ–¹æ³•åœ¨å£°æ˜çš„æŠ½è±¡ç±»ä¸­ä¸å­˜åœ¨</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-10-é«˜çº§æŠ€å·§-æ„é€ å‡½æ•°\"><a href=\"#4-10-é«˜çº§æŠ€å·§-æ„é€ å‡½æ•°\" class=\"headerlink\" title=\"4.10 é«˜çº§æŠ€å·§(æ„é€ å‡½æ•°)\"></a>4.10 é«˜çº§æŠ€å·§(æ„é€ å‡½æ•°)</h3><blockquote>\n<p>å½“åœ¨ <code>TypeScript</code> é‡Œå£°æ˜äº†ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šå£°æ˜äº†å¾ˆå¤šä¸œè¥¿ã€‚é¦–å…ˆå°±æ˜¯ç±»çš„å®ä¾‹ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello,&quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> greeter: Greeter; <span class=\"comment\">// =&gt;æ„æ€ï¼šGreeterç±»çš„å®ä¾‹çš„ç±»å‹æ˜¯Greeter</span></span><br><span class=\"line\">greeter = <span class=\"keyword\">new</span> Greeter(<span class=\"string\">&quot;world&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(greeter.greet());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥è®¤ä¸ºç±»å…·æœ‰ <em>å®ä¾‹éƒ¨åˆ†</em> ä¸ <em>é™æ€éƒ¨åˆ†</em></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">_Greeter</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> standardGreeting = <span class=\"string\">&quot;Hello, there&quot;</span>;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.greeting) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello,&quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> _Greeter.standardGreeting;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _greeter: _Greeter;</span><br><span class=\"line\">_greeter = <span class=\"keyword\">new</span> _Greeter();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(_greeter.greet());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ­¤å¤„åˆ›å»ºäº†ä¸€ä¸ª <code>greeterMaker</code> çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡ä¿å­˜äº†è¿™ä¸ª <em>ç±»</em> æˆ–è€…è¯´ä¿å­˜äº† _ç±»æ„é€ å‡½æ•°_ã€‚ç„¶åä½¿ç”¨ <code>typeof _Greeter</code>ï¼Œæ„æ€æ˜¯å– <code>Greeter</code> ç±»çš„ç±»å‹ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ç±»å‹ã€‚æˆ–è€…æ›´ç¡®åˆ‡çš„è¯´ï¼Œâ€å‘Šè¯‰æˆ‘ <code>Greeter</code> æ ‡è¯†ç¬¦çš„ç±»å‹â€ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡½æ•°çš„ç±»å‹ã€‚è¿™ä¸ªç±»å‹åŒ…å«äº†ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> _greeterMaker: <span class=\"keyword\">typeof</span> _Greeter = _Greeter;</span><br><span class=\"line\">_greeterMaker.standardGreeting = <span class=\"string\">&quot;Hey there!&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _greeter2: _Greeter = <span class=\"keyword\">new</span> _greeterMaker();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(_greeter2.greet());</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-11-é«˜çº§æŠ€å·§-æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨\"><a href=\"#4-11-é«˜çº§æŠ€å·§-æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨\" class=\"headerlink\" title=\"4.11 é«˜çº§æŠ€å·§(æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨)\"></a>4.11 é«˜çº§æŠ€å·§(æŠŠç±»å½“ä½œæ¥å£ä½¿ç”¨)</h3><blockquote>\n<p>ç±»å®šä¹‰ä¼šåˆ›å»ºä¸¤ä¸ªä¸œè¥¿ï¼š<em>ç±»çš„å®ä¾‹ç±»å‹</em> å’Œ _ä¸€ä¸ªæ„é€ å‡½æ•°_ã€‚<br>å› ä¸ºç±»å¯ä»¥åˆ›å»ºå‡ºç±»å‹ï¼Œæ‰€ä»¥èƒ½å¤Ÿåœ¨å…è®¸ä½¿ç”¨æ¥å£çš„åœ°æ–¹ä½¿ç”¨ç±»</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Point3d <span class=\"keyword\">extends</span> Point &#123;</span><br><span class=\"line\">  z: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> point3d: Point3d = &#123; <span class=\"attr\">x</span>: <span class=\"number\">1</span>, <span class=\"attr\">y</span>: <span class=\"number\">2</span>, <span class=\"attr\">z</span>: <span class=\"number\">4</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äº”ã€å‡½æ•°\"><a href=\"#äº”ã€å‡½æ•°\" class=\"headerlink\" title=\"äº”ã€å‡½æ•°\"></a>äº”ã€å‡½æ•°</h2><h3 id=\"5-1-ä»‹ç»\"><a href=\"#5-1-ä»‹ç»\" class=\"headerlink\" title=\"5.1 ä»‹ç»\"></a>5.1 ä»‹ç»</h3><blockquote>\n<p>å‡½æ•°æ˜¯ <code>JavaScript</code> åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚å®ƒå¸®åŠ©ä½ å®ç°æŠ½è±¡å±‚ï¼Œæ¨¡æ‹Ÿå±‚ï¼Œä¿¡æ¯éšè—å’Œæ¨¡å—ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œè™½ç„¶å·²ç»æ”¯æŒç±»ï¼Œå‘½åç©ºé—´å’Œæ¨¡å—ï¼Œä½†å‡½æ•°ä»ç„¶æ˜¯ä¸»è¦çš„å®šä¹‰ è¡Œä¸ºçš„åœ°æ–¹ã€‚<code>TypeScript</code> ä¸º <code>JavaScript</code> å‡½æ•°æ·»åŠ äº†é¢å¤–çš„åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“çš„ä½¿ç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"5-2-å‡½æ•°ç±»å‹\"><a href=\"#5-2-å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"5.2 å‡½æ•°ç±»å‹\"></a>5.2 å‡½æ•°ç±»å‹</h3><h4 id=\"5-2-1-ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\"><a href=\"#5-2-1-ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\" class=\"headerlink\" title=\"5.2.1 ä¸ºå‡½æ•°å®šä¹‰ç±»å‹\"></a>5.2.1 ä¸ºå‡½æ•°å®šä¹‰ç±»å‹</h4><blockquote>\n<p>æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå‚æ•°æ·»åŠ ç±»å‹ä¹‹åå†ä¸ºå‡½æ•°æœ¬èº«æ·»åŠ è¿”å›å€¼ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>TypeScript</code> èƒ½å¤Ÿæ ¹æ®è¿”å›è¯­å¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸çœç•¥å®ƒã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">add</span>(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myAdd = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5-2-2-ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\"><a href=\"#5-2-2-ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\" class=\"headerlink\" title=\"5.2.2 ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹\"></a>5.2.2 ä¹¦å†™å®Œæ•´çš„å‡½æ•°ç±»å‹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myAdd1: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">number</span> = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å‡½æ•°ç±»å‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š<em>å‚æ•°ç±»å‹</em> å’Œ _è¿”å›å€¼ç±»å‹_ã€‚å½“å†™å‡ºå®Œæ•´å‡½æ•°ç±»å‹çš„æ—¶å€™ï¼Œè¿™ä¸¤éƒ¨åˆ†éƒ½æ˜¯éœ€è¦çš„ã€‚æˆ‘ä»¬ä»¥å‚æ•°åˆ—è¡¨çš„å½¢å¼å†™å‡ºå‚æ•°ç±»å‹ï¼Œä¸ºæ¯ä¸€ä¸ªå‚æ•°æŒ‡å®šä¸€ä¸ªåå­—å’Œç±»å‹ã€‚è¿™ä¸ªåå­—åªæ˜¯ä¸ºäº†å¢åŠ å¯è¯»æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>åªè¦å‚æ•°ç±»å‹æ˜¯åŒ¹é…çš„ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒæ˜¯æœ‰æ•ˆçš„å‡½æ•°ç±»å‹ï¼Œè€Œä¸åœ¨ä¹å‚æ•°åæ˜¯å¦æ­£ç¡®ã€‚</li>\n<li>ç¬¬äºŒéƒ¨åˆ†æ˜¯è¿”å›å€¼ç±»å‹ã€‚å¯¹äºè¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹é—´ä½¿ç”¨ <code>=&gt;</code> ç¬¦å·ï¼Œä½¿ä¹‹æ¸…æ™°æ˜äº†ã€‚ å¦‚ä¹‹å‰æåˆ°çš„ï¼Œè¿”å›å€¼ç±»å‹æ˜¯å‡½æ•°ç±»å‹çš„å¿…è¦éƒ¨åˆ†ï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›ä»»ä½•å€¼ï¼Œä½ ä¹Ÿå¿…é¡»æŒ‡å®šè¿”å›å€¼ç±»å‹ä¸º <code>void</code>,è€Œä¸èƒ½ç•™ç©ºã€‚</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>å‡½æ•°çš„ç±»å‹åªæ˜¯ç”±å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç»„æˆçš„ã€‚å‡½æ•°ä¸­ä½¿ç”¨çš„æ•è·å˜é‡ä¸ä¼šä½“ç°åœ¨ç±»å‹é‡Œã€‚å®é™…ä¸Šï¼Œè¿™äº›å˜é‡æ˜¯å‡½æ•°çš„éšè—çŠ¶æ€å¹¶ä¸æ˜¯ç»„æˆ <code>API</code> çš„ä¸€éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> myAdd2: <span class=\"function\">(<span class=\"params\">baseValue: <span class=\"built_in\">number</span>, increment: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">number</span> = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5-2-3-æ¨æ–­ç±»å‹\"><a href=\"#5-2-3-æ¨æ–­ç±»å‹\" class=\"headerlink\" title=\"5.2.3 æ¨æ–­ç±»å‹\"></a>5.2.3 æ¨æ–­ç±»å‹</h4><blockquote>\n<p>åœ¨å°è¯•ä¸‹é¢è¿™ä¸ªä¾‹å­çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å¦‚æœä½ åœ¨èµ‹å€¼è¯­å¥çš„ä¸€è¾¹æŒ‡å®šäº†ç±»å‹ä½†æ˜¯å¦ä¸€è¾¹æ²¡æœ‰ç±»å‹çš„è¯ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¯†åˆ«å‡ºç±»å‹ã€‚è¿™å«åšï¼šâ€æŒ‰ä¸Šä¸‹æ–‡å½’ç±»â€ï¼Œæ˜¯ç±»å‹æ¨è®ºçš„ä¸€ç§ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ä¸ºç¨‹åºæŒ‡å®šç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// myAdd has the full function type</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myAdd3 = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123; <span class=\"keyword\">return</span> x + y &#125;;</span><br><span class=\"line\"><span class=\"comment\">// The parameters `x` and `y` have the type number</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> myAdd4: (baseValue: <span class=\"built_in\">number</span>, <span class=\"attr\">increment</span>: <span class=\"built_in\">number</span>) =<span class=\"built_in\">number</span> = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x, y</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x + y;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-3-å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\"><a href=\"#5-3-å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\" class=\"headerlink\" title=\"5.3 å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\"></a>5.3 å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</h3><blockquote>\n<p><code>TypeScript</code> é‡Œçš„æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½æ˜¯å¿…é¡»çš„ã€‚è¿™ä¸æ˜¯æŒ‡ä¸èƒ½ä¼ é€’ <code>null</code> æˆ– <code>undefined</code> ä½œä¸ºå‚æ•°ï¼Œè€Œæ˜¯è¯´ç¼–è¯‘å™¨æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºæ¯ä¸ªå‚æ•°éƒ½ä¼ å…¥äº†å€¼ã€‚ç¼–è¯‘å™¨è¿˜ä¼šå‡è®¾åªæœ‰è¿™äº›å‚æ•°ä¼šè¢«ä¼ é€’è¿›å‡½æ•°ã€‚</p>\n</blockquote>\n<ol>\n<li>ç®€çŸ­åœ°è¯´ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¸ªæ•°å¿…é¡»ä¸å‡½æ•°æœŸæœ›çš„å‚æ•°ä¸ªæ•°ä¸€è‡´ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, lastName: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// let result1 =  buildName(&quot;Bob&quot;); // error</span></span><br><span class=\"line\"><span class=\"comment\">// let result2 = buildName(&quot;Bob&quot;, &quot;Jack&quot;, &quot;Sr.&quot;); // error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result3 = buildName(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><code>JavaScript</code>é‡Œï¼Œæ¯ä¸ªå‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¯ä¼ å¯ä¸ä¼ ã€‚æ²¡ä¼ å‚çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯ <code>undefined</code>ã€‚åœ¨ <code>TypeScript</code> é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å‚æ•°æ—è¾¹ä½¿ç”¨ <code>?</code> å®ç°å¯é€‰å‚æ•°çš„åŠŸèƒ½ã€‚</li>\n<li>æ³¨æ„ï¼šå¯é€‰å‚æ•°å¿…é¡»è·Ÿåœ¨å¿…é€‰å‚æ•°åé¢ï¼Œä¸èƒ½æ”¾åœ¨å‰é¢</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName1</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, lastName?: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (lastName) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> firstName;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> result_1 = buildName1(<span class=\"string\">&quot;Bob&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result_2 = buildName1(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// let result_3 = buildName1(&quot;Bob&quot;, &quot;Jack&quot;, &quot;Sr.&quot;); // error</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>å¯ä»¥è®¾ç½®é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°</li>\n<li>åœ¨æ‰€æœ‰å¿…é¡»å‚æ•°åé¢çš„å¸¦é»˜è®¤åˆå§‹åŒ–çš„å‚æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œä¸å¯é€‰å‚æ•°ä¸€æ ·ï¼Œåœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™å¯ä»¥çœç•¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯é€‰å‚æ•°ä¸æœ«å°¾çš„é»˜è®¤å‚æ•°å…±äº«å‚æ•°ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName2</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, lastName = <span class=\"string\">&quot;Smith&quot;</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>ä¸æ™®é€šå¯é€‰å‚æ•°å‚æ•°ä¸åŒçš„æ˜¯ï¼Œå¸¦é»˜è®¤å€¼çš„å‚æ•°ä¸éœ€è¦æ”¾åœ¨å¿…é¡»å‚æ•°çš„åé¢ã€‚å¦‚æœå¸¦é»˜è®¤å€¼çš„å‚æ•°å‡ºç°åœ¨å¿…é¡»å‚æ•°çš„å‰é¢ï¼Œç”¨æˆ·å¿…é¡»æ˜ç¡®çš„ä¼ å…¥ <code>undefined</code> å€¼æ¥è·å¾—é»˜è®¤å€¼ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName3</span>(<span class=\"params\">firstName = <span class=\"string\">&quot;Will&quot;</span>, lastName: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + lastName;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// let result__1 = buildName3(&quot;Bob&quot;); // error</span></span><br><span class=\"line\"><span class=\"comment\">// let result__2 = buildName3(&quot;Bob&quot;, &quot;Jack&quot;, &quot;Sr.&quot;); // error</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result__3 = buildName3(<span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result__4 = buildName3(<span class=\"literal\">undefined</span>, <span class=\"string\">&quot;Jack&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-4-å‰©ä½™å‚æ•°\"><a href=\"#5-4-å‰©ä½™å‚æ•°\" class=\"headerlink\" title=\"5.4 å‰©ä½™å‚æ•°\"></a>5.4 å‰©ä½™å‚æ•°</h3><blockquote>\n<p>å¿…è¦å‚æ•°ï¼Œé»˜è®¤å‚æ•° å’Œ å¯é€‰å‚æ•° æœ‰ä¸ªå…±åŒç‚¹ï¼šå®ƒä»¬è¡¨ç¤ºæŸä¸€ä¸ªå‚æ•°ã€‚æœ‰æ—¶ï¼Œä½ æƒ³åŒæ—¶æ“ä½œå¤šä¸ªå‚æ•°ï¼Œæˆ–è€…ä½ å¹¶ä¸çŸ¥é“ä¼šæœ‰å¤šå°‘å‚æ•°ä¼ è¿›æ¥ã€‚åœ¨ <code>JavaScript</code> é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>arguments</code> æ¥è®¿é—®æ‰€æœ‰ä¼ å…¥çš„å‚æ•°ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰å‚æ•°æ”¶é›†åˆ°ä¸€ä¸ªå˜é‡é‡Œ</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, ...restOfName: <span class=\"built_in\">string</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + restOfName.join(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> employeeName = buildName(<span class=\"string\">&quot;Jose&quot;</span>, <span class=\"string\">&quot;Smith&quot;</span>, <span class=\"string\">&quot;Bob&quot;</span>, <span class=\"string\">&quot;Alice&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å‰©ä½™å‚æ•°ä¼šè¢«å½“ä½œä¸ªæ•°ä¸é™çš„å¯é€‰å‚æ•°ã€‚å¯ä»¥ä¸€ä¸ªéƒ½æ²¡æœ‰ï¼Œä¹Ÿå¯ä»¥æœ‰ä»»æ„ä¸ªã€‚ç¼–è¯‘å™¨åˆ›å»ºå‚æ•°æ•°ç»„ï¼Œåå­—æ˜¯ä½ åœ¨çœç•¥å·åé¢ç»™å®šçš„åå­—ï¼Œä½ å¯ä»¥åœ¨å‡½æ•°ä½“å†…ä½¿ç”¨è¿™ä¸ªæ•°ç»„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildName1</span>(<span class=\"params\">firstName: <span class=\"built_in\">string</span>, ...restOfName: <span class=\"built_in\">string</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> firstName + <span class=\"string\">&quot; &quot;</span> + restOfName.join(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> buildNameFun: <span class=\"function\">(<span class=\"params\">fName: <span class=\"built_in\">string</span>, ...rest: <span class=\"built_in\">string</span>[]</span>) =&gt;</span> <span class=\"built_in\">string</span> = buildName1;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>this</code> å‚æ•°ã€‚åœ¨ä½¿ç”¨äº† <code>--noImplicitThis</code> æ ‡è®°ä¹‹åï¼Œ<code>this</code> ç±»å‹å¯èƒ½ä¼šæ˜¯ <code>any</code>ã€‚æ­¤æ—¶éœ€è¦æä¾›ä¸€ä¸ªæ˜¾ç¤ºçš„ <code>this</code> å‚æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Card &#123;</span><br><span class=\"line\">  suit: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  card: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Deck &#123;</span><br><span class=\"line\">  suits: <span class=\"built_in\">string</span>[];</span><br><span class=\"line\">  cards: <span class=\"built_in\">number</span>[];</span><br><span class=\"line\"></span><br><span class=\"line\">  createCardPicker(<span class=\"built_in\">this</span>: Deck): <span class=\"function\">() =&gt;</span> Card;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> deck: Deck = &#123;</span><br><span class=\"line\">  suits: [<span class=\"string\">&quot;hearts&quot;</span>, <span class=\"string\">&quot;spades&quot;</span>, <span class=\"string\">&quot;clubs&quot;</span>, <span class=\"string\">&quot;diamonds&quot;</span>],</span><br><span class=\"line\">  cards: <span class=\"built_in\">Array</span>(<span class=\"number\">52</span>),</span><br><span class=\"line\">  createCardPicker(): <span class=\"function\">(<span class=\"params\"><span class=\"built_in\">this</span>: Deck</span>) =&gt;</span> Card &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"function\">() =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> pickedCard = <span class=\"built_in\">Math</span>.floor(<span class=\"built_in\">Math</span>.random() * <span class=\"number\">52</span>);</span><br><span class=\"line\">      <span class=\"keyword\">let</span> pickedSuit = <span class=\"built_in\">Math</span>.floor(pickedCard / <span class=\"number\">13</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> &#123; <span class=\"attr\">suit</span>: <span class=\"built_in\">this</span>.suits[pickedSuit], <span class=\"attr\">card</span>: pickedCard % <span class=\"number\">13</span> &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> cardPicker = deck.createCardPicker();</span><br><span class=\"line\"><span class=\"keyword\">let</span> pickedCard = cardPicker();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">`card: <span class=\"subst\">$&#123;pickedCard.card&#125;</span> of <span class=\"subst\">$&#123;pickedCard.suit&#125;</span>`</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"å…­ã€æ³›å‹\"><a href=\"#å…­ã€æ³›å‹\" class=\"headerlink\" title=\"å…­ã€æ³›å‹\"></a>å…­ã€æ³›å‹</h2><h3 id=\"6-1-ä»‹ç»\"><a href=\"#6-1-ä»‹ç»\" class=\"headerlink\" title=\"6.1 ä»‹ç»\"></a>6.1 ä»‹ç»</h3><blockquote>\n<p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ <code>API</code>ï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚<br>åœ¨åƒ <code>C#</code> å’Œ <code>Java</code> è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>æ³›å‹</code> æ¥åˆ›å»ºå¯é‡ç”¨ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚<br>é™¤äº†æ³›å‹æ¥å£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºæ³›å‹ç±»ã€‚æ³¨æ„ï¼Œæ— æ³•åˆ›å»ºæ³›å‹æšä¸¾å’Œæ³›å‹å‘½åç©ºé—´ã€‚</p>\n</blockquote>\n<h3 id=\"6-2-æ³›å‹ä¹‹-hello-world\"><a href=\"#6-2-æ³›å‹ä¹‹-hello-world\" class=\"headerlink\" title=\"6.2 æ³›å‹ä¹‹ hello world\"></a>6.2 æ³›å‹ä¹‹ hello world</h3><blockquote>\n<p>åˆ›å»ºä¸€ä¸ª <code>identity</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¿”å›ä»»ä½•ä¼ å…¥å®ƒçš„å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœä¸ä½¿ç”¨æ³›å‹ï¼Œå‡½æ•°å¯èƒ½æ˜¯ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity</span>(<span class=\"params\">arg: <span class=\"built_in\">number</span></span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>any</code> ç±»å‹å®šä¹‰å‡½æ•°ï¼Œä½†æ˜¯è¿™æ ·å¯èƒ½ä¼šå¯¼è‡´ä¼ å…¥çš„ç±»å‹ä¸è¿”å›çš„ç±»å‹ä¸ç›¸åŒã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity1</span>(<span class=\"params\">arg: <span class=\"built_in\">any</span></span>): <span class=\"title\">any</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿è¿”å›å€¼çš„ç±»å‹ä¸ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚</p>\n</blockquote>\n<ul>\n<li>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»å‹å˜é‡ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œåªèƒ½ç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity2</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨æ–¹å¼ä¸€ï¼šä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼ŒåŒ…æ‹¬ç±»å‹å‚æ•°</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> output = identity2&lt;<span class=\"built_in\">string</span>&gt;(<span class=\"string\">&quot;myString&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨æ–¹å¼äºŒ(æ›´æ™®é)ï¼šåˆ©ç”¨äº†ç±»å‹æ¨è®º-å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®š <code>T</code> çš„ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> output2 = identity2(<span class=\"string\">&quot;myString&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-3-ä½¿ç”¨æ³›å‹å˜é‡\"><a href=\"#6-3-ä½¿ç”¨æ³›å‹å˜é‡\" class=\"headerlink\" title=\"6.3 ä½¿ç”¨æ³›å‹å˜é‡\"></a>6.3 ä½¿ç”¨æ³›å‹å˜é‡</h3><blockquote>\n<p>ä½¿ç”¨æ³›å‹åˆ›å»ºåƒ <code>identity</code> è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œç¼–è¯‘å™¨è¦æ±‚ä½ åœ¨å‡½æ•°ä½“å¿…é¡»æ­£ç¡®çš„ä½¿ç”¨è¿™ä¸ªé€šç”¨çš„ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œä½ å¿…é¡»æŠŠè¿™äº›å‚æ•°å½“ä½œæ˜¯ä»»æ„æˆ–æ‰€æœ‰ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚æœæˆ‘ä»¬æƒ³æ‰“å°å‡º <code>arg</code> çš„é•¿åº¦ï¼Œä¹Ÿè®¸ä¼šè¿™æ ·åšã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length); <span class=\"comment\">// é”™è¯¯ï¼ŒT ç±»å‹ä¹Ÿè®¸ä¸ä¼šæœ‰.lengthå±æ€§</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¦‚æœæˆ‘ä»¬åƒæ“ä½œ <code>T</code> ç±»å‹çš„æ•°ç»„</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T[]</span>): <span class=\"title\">T</span>[] </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity2</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: <span class=\"built_in\">Array</span>&lt;T&gt;</span>): <span class=\"title\">Array</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-4-æ³›å‹ç±»å‹-æ³›å‹æ¥å£\"><a href=\"#6-4-æ³›å‹ç±»å‹-æ³›å‹æ¥å£\" class=\"headerlink\" title=\"6.4 æ³›å‹ç±»å‹(æ³›å‹æ¥å£)\"></a>6.4 æ³›å‹ç±»å‹(æ³›å‹æ¥å£)</h3><ol>\n<li>æ³›å‹å‡½æ•°çš„ç±»å‹å’Œéæ³›å‹å‡½æ•°çš„ç±»å‹ä¸€æ ·ï¼Œé¦–å…ˆåˆ—å‡ºç±»å‹å‚æ•°ï¼Œç±»ä¼¼äºå‡½æ•°å£°æ˜ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity: &lt;T&gt;<span class=\"function\">(<span class=\"params\">arg: T</span>) =&gt;</span> T = identity;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºç±»å‹ä¸­çš„æ³›å‹ç±»å‹å‚æ•°ä½¿ç”¨ä¸åŒçš„åç§°ï¼Œåªè¦åœ¨æ•°é‡ä¸Šå’Œä½¿ç”¨æ–¹å¼ä¸Šèƒ½å¯¹åº”ä¸Šå°±å¯ä»¥ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity1</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity1: &lt;U&gt;<span class=\"function\">(<span class=\"params\">arg: U</span>) =&gt;</span> U = identity;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¸¦æœ‰è°ƒç”¨ç­¾åçš„å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰æ³›å‹å‡½æ•°ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity2</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity2: &#123; &lt;T&gt;(arg: T): T &#125; = identity;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>è¿™å¼•å¯¼æˆ‘ä»¬å»å†™ç¬¬ä¸€ä¸ªæ³›å‹æ¥å£äº†ã€‚æˆ‘ä»¬æŠŠä¸Šé¢ä¾‹å­é‡Œçš„å¯¹è±¡å­—é¢é‡æ‹¿å‡ºæ¥åšä¸ºä¸€ä¸ªæ¥å£ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> GenericIdentityFn &#123;</span><br><span class=\"line\">  &lt;T&gt;(arg: T): T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">identity3</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myIdentity3: GenericIdentityFn = identity3;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>æˆ‘ä»¬å¯èƒ½æƒ³æŠŠæ³›å‹å‚æ•°å½“ä½œæ•´ä¸ªæ¥å£çš„ä¸€ä¸ªå‚æ•°ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çŸ¥é“ä½¿ç”¨çš„å…·ä½“æ˜¯å“ªä¸ªæ³›å‹ç±»å‹(æ¯”å¦‚ï¼š<code>Dictionary&lt;string&gt;</code> è€Œä¸åªæ˜¯ <code>Dictionary</code>)ã€‚è¿™æ ·æ¥å£é‡Œçš„å…¶å®ƒæˆå‘˜ä¹Ÿèƒ½çŸ¥é“è¿™ä¸ªå‚æ•°çš„ç±»å‹äº†ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> _GenericIdentityFn&lt;T&gt; &#123;</span><br><span class=\"line\">  (arg: T): T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">_identity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> _myIdentity: _GenericIdentityFn&lt;<span class=\"built_in\">number</span>&gt; = _identity;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹åšäº†å°‘è®¸æ”¹åŠ¨ã€‚ä¸å†æè¿°æ³›å‹å‡½æ•°ï¼Œè€Œæ˜¯æŠŠéæ³›å‹å‡½æ•°ç­¾åä½œä¸ºæ³›å‹ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>GenericIdentityFn</code> çš„æ—¶å€™ï¼Œè¿˜å¾—ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥æŒ‡å®šæ³›å‹ç±»å‹(è¿™é‡Œæ˜¯ï¼š<code>number</code>)ï¼Œä»è€Œé”å®šä¹‹åä»£ç é‡Œä½¿ç”¨çš„ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºæè¿°å“ªéƒ¨åˆ†ç±»å‹å±äºæ³›å‹éƒ¨åˆ†æ¥è¯´ï¼Œç†è§£ä½•æ—¶æŠŠå‚æ•° â€œæ”¾åœ¨è°ƒç”¨ç­¾åé‡Œâ€ å’Œä½•æ—¶ â€œæ”¾åœ¨æ¥å£ä¸Šâ€ æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p>\n</blockquote>\n<h3 id=\"6-5-æ³›å‹ç±»\"><a href=\"#6-5-æ³›å‹ç±»\" class=\"headerlink\" title=\"6.5 æ³›å‹ç±»\"></a>6.5 æ³›å‹ç±»</h3><blockquote>\n<p>æ³›å‹ç±»å’Œæ³›å‹æ¥å£å·®ä¸å¤šã€‚æ³›å‹ç±»ä½¿ç”¨ <code>&lt;&gt;</code> æ‹¬èµ·æ³›å‹ç±»å‹ï¼Œè·Ÿåœ¨ç±»ååé¢ã€‚ç±»åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šé™æ€éƒ¨åˆ† å’Œ å®ä¾‹éƒ¨åˆ†ã€‚æ³›å‹ç±»æŒ‡çš„æ˜¯å®ä¾‹éƒ¨åˆ†çš„ç±»å‹ï¼Œæ‰€ä»¥ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>enericNumber</code> ç±»çš„ä½¿ç”¨æ˜¯éå¸¸ç›´è§‚çš„ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå»é™åˆ¶å®ƒåªèƒ½ä½¿ç”¨ <code>number</code> ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–å…¶å®ƒæ›´å¤æ‚çš„ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GenericNumber</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  zeroValue: T;</span><br><span class=\"line\">  add: <span class=\"function\">(<span class=\"params\">x: T, y: T</span>) =&gt;</span> T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myGenericNumber = <span class=\"keyword\">new</span> GenericNumber&lt;<span class=\"built_in\">number</span>&gt;();</span><br><span class=\"line\">myGenericNumber.zeroValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">myGenericNumber.add = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸æ¥å£ä¸€æ ·ï¼Œç›´æ¥æŠŠæ³›å‹ç±»å‹æ”¾åœ¨ç±»åé¢ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¡®è®¤ç±»çš„æ‰€æœ‰å±æ€§éƒ½åœ¨ä½¿ç”¨ç›¸åŒçš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> stringNumeric = <span class=\"keyword\">new</span> GenericNumber&lt;<span class=\"built_in\">string</span>&gt;();</span><br><span class=\"line\">stringNumeric.zeroValue = <span class=\"string\">&quot; &quot;</span>;</span><br><span class=\"line\">stringNumeric.add = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x + y;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(stringNumeric.add(stringNumeric.zeroValue, <span class=\"string\">&quot;test&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-6-æ³›å‹çº¦æŸ\"><a href=\"#6-6-æ³›å‹çº¦æŸ\" class=\"headerlink\" title=\"6.6 æ³›å‹çº¦æŸ\"></a>6.6 æ³›å‹çº¦æŸ</h3><blockquote>\n<p>æˆ‘ä»¬åº”è¯¥è®°å¾—ä¹‹å‰çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™æƒ³è¦æ“ä½œæŸç±»å‹çš„ä¸€ç»„å€¼ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ç»„å€¼å…·æœ‰ä»€ä¹ˆæ ·çš„å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨ <code>loggingIdentity</code> ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®¿é—® <code>arg</code> çš„ <code>length</code> å±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å¹¶ä¸èƒ½è¯æ˜æ¯ç§ç±»å‹éƒ½æœ‰ length å±æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç›¸æ¯”ä¸æ“ä½œ <code>any</code> æ‰€æœ‰ç±»å‹ï¼Œæˆ‘ä»¬æƒ³è¦é™åˆ¶å‡½æ•°å»å¤„ç†ä»»æ„å¸¦æœ‰ <code>.length</code> å±æ€§çš„æ‰€æœ‰ç±»å‹ã€‚åªè¦ä¼ å…¥çš„ç±»å‹æœ‰è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±å…è®¸ï¼Œå°±æ˜¯è¯´è‡³å°‘åŒ…å«è¿™ä¸€å±æ€§ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ—å‡ºå¯¹äº <code>T</code> çš„çº¦æŸè¦æ±‚ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶ã€‚åˆ›å»ºä¸€ä¸ªåŒ…å« <code>.length</code> å±æ€§çš„æ¥å£ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£å’Œ <code>extends</code> å…³é”®å­—æ¥å®ç°çº¦æŸã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Lengthwise &#123;</span><br><span class=\"line\">  length: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loggingIdentity</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">Lengthwise</span>&gt;(<span class=\"params\">arg: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(arg.length);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> arg;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ­¤æ—¶è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸã€‚å› æ­¤å®ƒä¸å†é€‚ç”¨äºä»»æ„ç±»å‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loggingIdentity(<span class=\"number\">3</span>); <span class=\"comment\">// error</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«çš„å±æ€§ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">loggingIdentity(&#123; <span class=\"attr\">length</span>: <span class=\"number\">10</span>, <span class=\"attr\">value</span>: <span class=\"number\">3</span> &#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-7-åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\"><a href=\"#6-7-åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\" class=\"headerlink\" title=\"6.7 åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°\"></a>6.7 åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°</h3><blockquote>\n<p>ä½ å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¸”å®ƒè¢«å¦ä¸€ä¸ªç±»å‹å‚æ•°æ‰€çº¦æŸã€‚ä¾‹å¦‚ï¼Œç°åœ¨æˆ‘ä»¬éœ€æƒ³è¦ç”¨å±æ€§åä»å¯¹è±¡é‡Œè·å–è¿™ä¸ªå±æ€§ã€‚å¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸ªå±æ€§å­˜åœ¨äºå¯¹è±¡ <code>obj</code> ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸¤ä¸ªç±»å‹ä¹‹é—´ä½¿ç”¨çº¦æŸã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getProperty</span>&lt;<span class=\"title\">T</span>, <span class=\"title\">K</span> <span class=\"title\">extends</span> <span class=\"title\">keyof</span> <span class=\"title\">T</span>&gt;(<span class=\"params\">obj: T, key: K</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj[key];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: <span class=\"number\">2</span>, <span class=\"attr\">c</span>: <span class=\"number\">3</span>, <span class=\"attr\">d</span>: <span class=\"number\">4</span> &#125;;</span><br><span class=\"line\">getProperty(x, <span class=\"string\">&quot;a&quot;</span>);</span><br><span class=\"line\">getProperty(x, <span class=\"string\">&quot;m&quot;</span>); <span class=\"comment\">// error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-8-åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\"><a href=\"#6-8-åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\" class=\"headerlink\" title=\"6.8 åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹\"></a>6.8 åœ¨æ³›å‹é‡Œä½¿ç”¨ç±»ç±»å‹</h3><blockquote>\n<p>åœ¨ <code>TypeScript</code> ä½¿ç”¨æ³›å‹åˆ›å»ºå·¥å‚å‡½æ•°æ—¶ï¼Œéœ€è¦å¼•ç”¨æ„é€ å‡½æ•°çš„ç±»ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">create</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">c: &#123; <span class=\"keyword\">new</span> (): T &#125;</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> c();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­ï¼Œä½¿ç”¨åŸå‹å±æ€§æ¨æ–­å¹¶çº¦æŸæ„é€ å‡½æ•°ä¸ç±»å®ä¾‹çš„å…³ç³»ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BeeKeeper</span> </span>&#123;</span><br><span class=\"line\">  hasMask: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZooKeeper</span> </span>&#123;</span><br><span class=\"line\">  nameTag: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  numLegs: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bee</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  keeper: BeeKeeper;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Lion</span> <span class=\"keyword\">extends</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  keeper: ZooKeeper;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createInstance</span>&lt;<span class=\"title\">A</span> <span class=\"title\">extends</span> <span class=\"title\">Animal</span>&gt;(<span class=\"params\">c: <span class=\"keyword\">new</span> () =&gt; A</span>): <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> c();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">createInstance(Lion).keeper.nameTag;</span><br><span class=\"line\">createInstance(Bee).keeper.hasMask;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"6-9-å¤šä¸ªç±»å‹å˜é‡\"><a href=\"#6-9-å¤šä¸ªç±»å‹å˜é‡\" class=\"headerlink\" title=\"6.9 å¤šä¸ªç±»å‹å˜é‡\"></a>6.9 å¤šä¸ªç±»å‹å˜é‡</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">info</span>&lt;<span class=\"title\">S</span>, <span class=\"title\">N</span>&gt;(<span class=\"params\">name: S, age: N</span>): [<span class=\"title\">S</span>, <span class=\"title\">N</span>] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [name, age];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(info(<span class=\"string\">&quot;pr&quot;</span>, <span class=\"number\">10</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(info&lt;<span class=\"built_in\">string</span>, <span class=\"built_in\">number</span>&gt;(<span class=\"string\">&quot;pr&quot;</span>, <span class=\"number\">18</span>));</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¸ƒã€æšä¸¾\"><a href=\"#ä¸ƒã€æšä¸¾\" class=\"headerlink\" title=\"ä¸ƒã€æšä¸¾\"></a>ä¸ƒã€æšä¸¾</h2><h3 id=\"7-1-ä»‹ç»\"><a href=\"#7-1-ä»‹ç»\" class=\"headerlink\" title=\"7.1 ä»‹ç»\"></a>7.1 ä»‹ç»</h3><blockquote>\n<p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦æœ‰åå­—çš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚<code>TypeScript</code> æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚</p>\n</blockquote>\n<h3 id=\"7-2-æ•°å­—æšä¸¾\"><a href=\"#7-2-æ•°å­—æšä¸¾\" class=\"headerlink\" title=\"7.2 æ•°å­—æšä¸¾\"></a>7.2 æ•°å­—æšä¸¾</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Direction &#123;</span><br><span class=\"line\">  Up = <span class=\"number\">1</span>,</span><br><span class=\"line\">  Down,</span><br><span class=\"line\">  Left,</span><br><span class=\"line\">  Right</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ•°å­—æšä¸¾ï¼Œ<code>Up</code>ä½¿ç”¨åˆå§‹åŒ–ä¸º <code>1</code>ï¼Œå…¶ä½™æˆå‘˜ä¼šä» <code>1</code> å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚ æ¢å¥è¯è¯´ï¼Œ<code>Direction.Up</code> çš„å€¼ä¸º <code>1</code>ï¼Œ<code>Down</code> å€¼ä¸º <code>2</code>ï¼Œ<code>Left</code> å€¼ä¸º <code>3</code>ï¼Œ<code>Right</code> å€¼ä¸º <code>4</code>ã€‚</p>\n</blockquote>\n<ol>\n<li>æˆ‘ä»¬è¿˜å¯ä»¥å®Œå…¨ä¸ä½¿ç”¨åˆå§‹åŒ–å™¨</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Direction2 &#123;</span><br><span class=\"line\">  Up,</span><br><span class=\"line\">  Down,</span><br><span class=\"line\">  Left,</span><br><span class=\"line\">  Right</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç°åœ¨ï¼Œ<code>Up</code> çš„å€¼ä¸º <code>0</code>ï¼Œ<code>Down</code> çš„å€¼ä¸º <code>1</code> ç­‰ç­‰ã€‚ å½“æˆ‘ä»¬ä¸åœ¨ä¹æˆå‘˜çš„å€¼çš„æ—¶å€™ï¼Œè¿™ç§è‡ªå¢é•¿çš„è¡Œä¸ºæ˜¯å¾ˆæœ‰ç”¨å¤„çš„ï¼Œä½†æ˜¯è¦æ³¨æ„æ¯ä¸ªæšä¸¾æˆå‘˜çš„å€¼éƒ½æ˜¯ä¸åŒçš„ã€‚</p>\n</blockquote>\n<ol start=\"2\">\n<li>ä½¿ç”¨æšä¸¾å¾ˆç®€å•ï¼šé€šè¿‡æšä¸¾çš„å±æ€§æ¥è®¿é—®æšä¸¾æˆå‘˜ï¼Œå’Œæšä¸¾çš„åå­—æ¥è®¿é—®æšä¸¾ç±»å‹ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> _Response &#123;</span><br><span class=\"line\">  No = <span class=\"number\">0</span>,</span><br><span class=\"line\">  Yes = <span class=\"number\">1</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">respond</span>(<span class=\"params\">recipient: <span class=\"built_in\">string</span>, message: _Response</span>): <span class=\"title\">void</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">respond(<span class=\"string\">&quot;Princess Caroline&quot;</span>, _Response.Yes);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æ•°å­—æšä¸¾å¯ä»¥è¢«æ··å…¥åˆ°è®¡ç®—è¿‡çš„å’Œå¸¸é‡æˆå‘˜ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ã€‚</li>\n</ol>\n<blockquote>\n<p>ç®€çŸ­åœ°è¯´ï¼Œä¸å¸¦åˆå§‹åŒ–å™¨çš„æšä¸¾æˆ–è€…è¢«æ”¾åœ¨ç¬¬ä¸€çš„ä½ç½®ï¼Œæˆ–è€…è¢«æ”¾åœ¨ä½¿ç”¨äº†æ•°å­—å¸¸é‡æˆ–å…¶å®ƒå¸¸é‡åˆå§‹åŒ–äº†çš„æšä¸¾åé¢ã€‚æ¢å¥è¯è¯´ï¼Œä¸‹é¢çš„æƒ…å†µæ˜¯ä¸è¢«å…è®¸çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  A = getSomeValue(),</span><br><span class=\"line\">  B <span class=\"comment\">// error! &#x27;A&#x27; is not constant-initialized, so &#x27;B&#x27; needs an initializer</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-3-å­—ç¬¦ä¸²æšä¸¾\"><a href=\"#7-3-å­—ç¬¦ä¸²æšä¸¾\" class=\"headerlink\" title=\"7.3 å­—ç¬¦ä¸²æšä¸¾\"></a>7.3 å­—ç¬¦ä¸²æšä¸¾</h3><blockquote>\n<p>å­—ç¬¦ä¸²æšä¸¾çš„æ¦‚å¿µå¾ˆç®€å•ï¼Œä½†æ˜¯æœ‰ç»†å¾®çš„è¿è¡Œæ—¶çš„å·®åˆ«ã€‚åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ä½¿ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Direction &#123;</span><br><span class=\"line\">  Up = <span class=\"string\">&quot;UP&quot;</span>,</span><br><span class=\"line\">  Down = <span class=\"string\">&quot;DOWN&quot;</span>,</span><br><span class=\"line\">  Left = <span class=\"string\">&quot;LEFT&quot;</span>,</span><br><span class=\"line\">  Right = <span class=\"string\">&quot;RIGHT&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”±äºå­—ç¬¦ä¸²æšä¸¾æ²¡æœ‰è‡ªå¢é•¿çš„è¡Œä¸ºï¼Œå­—ç¬¦ä¸²æšä¸¾å¯ä»¥å¾ˆå¥½çš„åºåˆ—åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶ä¸”å¿…é¡»è¦è¯»ä¸€ä¸ªæ•°å­—æšä¸¾çš„è¿è¡Œæ—¶çš„å€¼ï¼Œè¿™ä¸ªå€¼é€šå¸¸æ˜¯å¾ˆéš¾è¯»çš„ - å®ƒå¹¶ä¸èƒ½è¡¨è¾¾æœ‰ç”¨çš„ä¿¡æ¯ï¼ˆå°½ç®¡åå‘æ˜ å°„ä¼šæœ‰æ‰€å¸®åŠ©ï¼‰ï¼Œå­—ç¬¦ä¸²æšä¸¾å…è®¸ä½ æä¾›ä¸€ä¸ªè¿è¡Œæ—¶æœ‰æ„ä¹‰çš„å¹¶ä¸”å¯è¯»çš„å€¼ï¼Œç‹¬ç«‹äºæšä¸¾æˆå‘˜çš„åå­—ã€‚</p>\n</blockquote>\n<h3 id=\"7-4-å¼‚æ„æšä¸¾\"><a href=\"#7-4-å¼‚æ„æšä¸¾\" class=\"headerlink\" title=\"7.4 å¼‚æ„æšä¸¾\"></a>7.4 å¼‚æ„æšä¸¾</h3><blockquote>\n<p>ä»æŠ€æœ¯çš„è§’åº¦æ¥è¯´ï¼Œæšä¸¾å¯ä»¥æ··åˆå­—ç¬¦ä¸²å’Œæ•°å­—æˆå‘˜ï¼Œä½†æ˜¯ä½ ä¼¼ä¹å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> BooleanLikeHeterogeneousEnum &#123;</span><br><span class=\"line\">  No = <span class=\"number\">0</span>,</span><br><span class=\"line\">  Yes = <span class=\"string\">&quot;YES&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é™¤éä½ çœŸçš„æƒ³è¦åˆ©ç”¨ <code>JavaScript</code> è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œå¦åˆ™æˆ‘ä»¬ä¸å»ºè®®è¿™æ ·åšã€‚</p>\n</blockquote>\n<h3 id=\"7-5-è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\"><a href=\"#7-5-è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\" class=\"headerlink\" title=\"7.5 è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜\"></a>7.5 è®¡ç®—çš„å’Œå¸¸é‡æˆå‘˜</h3><blockquote>\n<p>æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½å¸¦æœ‰ä¸€ä¸ªå€¼ï¼Œå®ƒå¯ä»¥æ˜¯å¸¸é‡æˆ–è®¡ç®—å‡ºæ¥çš„ã€‚å½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œæšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯å¸¸é‡</p>\n</blockquote>\n<ol>\n<li>å®ƒæ˜¯æšä¸¾çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸”æ²¡æœ‰åˆå§‹åŒ–å™¨ï¼Œè¿™ç§æƒ…å†µä¸‹å®ƒè¢«èµ‹äºˆå€¼ <code>0</code>ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  X</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>å®ƒä¸å¸¦æœ‰åˆå§‹åŒ–å™¨ä¸”å®ƒä¹‹å‰çš„æšä¸¾æˆå‘˜æ˜¯ä¸€ä¸ªæ•°å­—å¸¸é‡ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰æšä¸¾æˆå‘˜çš„å€¼ä¸ºå®ƒä¸Šä¸€ä¸ªæšä¸¾æˆå‘˜çš„å€¼åŠ  <code>1</code>ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E1 &#123;</span><br><span class=\"line\">  X,</span><br><span class=\"line\">  Y,</span><br><span class=\"line\">  Z</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">enum</span> E2 &#123;</span><br><span class=\"line\">  A = <span class=\"number\">1</span>,</span><br><span class=\"line\">  B,</span><br><span class=\"line\">  C</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>æšä¸¾æˆå‘˜ä½¿ç”¨ å¸¸é‡æšä¸¾è¡¨è¾¾å¼è¿›è¡Œåˆå§‹åŒ–ã€‚å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ˜¯ TypeScript è¡¨è¾¾å¼çš„å­é›†ï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µæ±‚å€¼ã€‚</li>\n</ol>\n<blockquote>\n<p>å½“ä¸€ä¸ªè¡¨è¾¾å¼æ»¡è¶³ä¸‹é¢æ¡ä»¶ä¹‹ä¸€æ—¶ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼š</p>\n<ol>\n<li>ä¸€ä¸ªæšä¸¾è¡¨è¾¾å¼å­—é¢é‡ï¼ˆä¸»è¦æ˜¯å­—ç¬¦ä¸²å­—é¢é‡æˆ–æ•°å­—å­—é¢é‡ï¼‰</li>\n<li>ä¸€ä¸ªå¯¹ä¹‹å‰å®šä¹‰çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å¼•ç”¨ï¼ˆå¯ä»¥æ˜¯åœ¨ä¸åŒçš„æšä¸¾ç±»å‹ä¸­å®šä¹‰çš„ï¼‰</li>\n<li>å¸¦æ‹¬å·çš„å¸¸é‡æšä¸¾è¡¨è¾¾å¼</li>\n<li>ä¸€å…ƒè¿ç®—ç¬¦ +ï¼Œ-ï¼Œï½ å…¶ä¸­ä¹‹ä¸€åº”ç”¨åœ¨äº†å¸¸é‡æšä¸¾è¡¨è¾¾å¼</li>\n<li>å¸¸é‡æšä¸¾è¡¨è¾¾å¼ä½œä¸ºäºŒå…ƒè¿ç®—ç¬¦ <code>+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%ï¼Œ&lt;&lt;ï¼Œ&gt;&gt;ï¼Œ&gt;&gt;&gt;ï¼Œ&amp;ï¼Œ|ï¼Œ^</code> çš„æ“ä½œå¯¹è±¡</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>è‹¥å¸¸é‡æšä¸¾è¡¨è¾¾å¼æ±‚å€¼åä¸º <code>NaN</code> æˆ– <code>Infinity</code>ï¼Œåˆ™ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ‰€æœ‰å…¶å®ƒæƒ…å†µçš„æšä¸¾æˆå‘˜è¢«å½“ä½œæ˜¯éœ€è¦è®¡ç®—å¾—å‡ºçš„å€¼</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> FileAccess &#123;</span><br><span class=\"line\">  <span class=\"comment\">// constant numbers</span></span><br><span class=\"line\">  None,</span><br><span class=\"line\">  Read = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">1</span>,</span><br><span class=\"line\">  White = <span class=\"number\">1</span> &lt;&lt; <span class=\"number\">2</span>,</span><br><span class=\"line\">  ReadWhite = Read | White,</span><br><span class=\"line\">  <span class=\"comment\">// computed number</span></span><br><span class=\"line\">  G = <span class=\"string\">&quot;123&quot;</span>.length</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-6-è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\"><a href=\"#7-6-è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\" class=\"headerlink\" title=\"7.6 è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹\"></a>7.6 è”åˆæšä¸¾ä¸æšä¸¾æˆå‘˜çš„ç±»å‹</h3><blockquote>\n<p>å­˜åœ¨ä¸€ç§ç‰¹æ®Šçš„éè®¡ç®—çš„å¸¸é‡æšä¸¾æˆå‘˜çš„å­é›†ï¼šå­—é¢é‡æšä¸¾æˆå‘˜ã€‚å­—é¢é‡æšä¸¾æˆå‘˜æ˜¯æŒ‡ä¸å¸¦æœ‰åˆå§‹å€¼çš„å¸¸é‡æšä¸¾æˆå‘˜ï¼Œæˆ–è€…æ˜¯è¢«åˆå§‹åŒ–ä¸ºï¼š</p>\n<ol>\n<li>ä»»ä½•å­—ç¬¦ä¸²å­—é¢é‡(ä¾‹å¦‚ï¼š<code>&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;</code>)</li>\n<li>ä»»ä½•æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š<code>1, 100</code>)</li>\n<li>åº”ç”¨äº†ä¸€å…ƒ - ç¬¦å·çš„æ•°å­—å­—é¢é‡(ä¾‹å¦‚ï¼š<code>-1, -100</code>) å½“æ‰€æœ‰æšä¸¾æˆå‘˜éƒ½æ‹¥æœ‰å­—é¢é‡æšä¸¾å€¼æ—¶ï¼Œå®ƒå°±æœ‰äº†ä¸€ç§ç‰¹æ®Šçš„å«ä¹‰ã€‚</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>é¦–å…ˆï¼Œæšä¸¾æˆå‘˜æˆä¸ºäº†ç±»å‹ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æŸäº›æˆå‘˜åªèƒ½æ˜¯æšä¸¾æˆå‘˜çš„å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> ShapeKind &#123;</span><br><span class=\"line\">  Circle,</span><br><span class=\"line\">  Square</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Circle &#123;</span><br><span class=\"line\">  kind: ShapeKind.Circle;</span><br><span class=\"line\">  radius: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Square &#123;</span><br><span class=\"line\">  kind: ShapeKind.Square;</span><br><span class=\"line\">  sideLength: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> c: Circle = &#123;</span><br><span class=\"line\">  kind: ShapeKind.Square, <span class=\"comment\">// error</span></span><br><span class=\"line\">  radius: <span class=\"number\">100</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦ä¸€ä¸ªå˜åŒ–æ˜¯æšä¸¾ç±»å‹æœ¬èº«å˜æˆäº†æ¯ä¸ªæšä¸¾æˆå‘˜çš„è”åˆã€‚è™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰è®¨è®º è”åˆç±»å‹ ã€‚ä½†ä½ åªè¦çŸ¥é“é€šè¿‡è”åˆæšä¸¾ï¼Œç±»å‹ç³»ç»Ÿèƒ½å¤Ÿåˆ©ç”¨è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå®ƒå¯ä»¥çŸ¥é“æšä¸¾é‡Œçš„å€¼çš„é›†åˆã€‚å› æ­¤ï¼Œ<code>TypeScript</code> èƒ½å¤Ÿæ•è·åœ¨æ¯”è¾ƒå€¼çš„æ—¶å€™çŠ¯çš„æ„šè ¢çš„é”™è¯¯ã€‚ä¾‹å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  Foo,</span><br><span class=\"line\">  Bar</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">x: E</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x !== E.Foo || x !== E.Bar) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// // Error! Operator &#x27;!==&#x27; cannot be applied to types &#x27;E.Foo&#x27; and &#x27;E.Bar&#x27;.</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å…ˆæ£€æŸ¥ <code>x</code> æ˜¯å¦ä¸æ˜¯ <code>E.Foo</code>ã€‚ å¦‚æœé€šè¿‡äº†è¿™ä¸ªæ£€æŸ¥ï¼Œç„¶å <code>||</code> ä¼šå‘ç”ŸçŸ­è·¯æ•ˆæœï¼Œ<br><code>if</code> è¯­å¥ä½“é‡Œçš„å†…å®¹ä¼šè¢«æ‰§è¡Œã€‚ ç„¶è€Œï¼Œè¿™ä¸ªæ£€æŸ¥æ²¡æœ‰é€šè¿‡ï¼Œé‚£ä¹ˆ x åˆ™åªèƒ½ä¸º <code>E.Foo</code>ï¼Œå› æ­¤æ²¡ç†ç”±å†å»æ£€æŸ¥å®ƒæ˜¯å¦ä¸º <code>E.Bar</code>ã€‚</p>\n</blockquote>\n<h3 id=\"7-7-è¿è¡Œæ—¶çš„æšä¸¾\"><a href=\"#7-7-è¿è¡Œæ—¶çš„æšä¸¾\" class=\"headerlink\" title=\"7.7 è¿è¡Œæ—¶çš„æšä¸¾\"></a>7.7 è¿è¡Œæ—¶çš„æšä¸¾</h3><ul>\n<li>æšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> E &#123;</span><br><span class=\"line\">  X,</span><br><span class=\"line\">  Y,</span><br><span class=\"line\">  Z</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯ä»¥ä¼ é€’ç»™å‡½æ•°ä¹ˆï¼Ÿ</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">obj: &#123; X: <span class=\"built_in\">number</span> &#125;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> obj.X;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ²¡é—®é¢˜ï¼Œå› ä¸º <code>&quot;E&quot;</code> åŒ…å«ä¸€ä¸ªæ•°å€¼å‹å±æ€§ <code>&quot;X&quot;</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">f(E);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-8-ç¼–è¯‘æ—¶çš„æšä¸¾\"><a href=\"#7-8-ç¼–è¯‘æ—¶çš„æšä¸¾\" class=\"headerlink\" title=\"7.8 ç¼–è¯‘æ—¶çš„æšä¸¾\"></a>7.8 ç¼–è¯‘æ—¶çš„æšä¸¾</h3><blockquote>\n<p>å°½ç®¡ä¸€ä¸ªæšä¸¾æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£å­˜åœ¨çš„å¯¹è±¡ï¼Œä½† <code>keyof</code> å…³é”®å­—çš„è¡Œä¸ºä¸å…¶ä½œç”¨åœ¨å¯¹è±¡ä¸Šæ—¶æœ‰æ‰€ä¸åŒã€‚åº”è¯¥ä½¿ç”¨ <code>keyof</code> <code>typeof</code> æ¥è·å–ä¸€ä¸ªè¡¨ç¤ºæšä¸¾é‡Œæ‰€æœ‰å­—ç¬¦ä¸² <code>key</code> çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> LogLevel &#123;</span><br><span class=\"line\">  ERROR,</span><br><span class=\"line\">  WARN,</span><br><span class=\"line\">  INFO,</span><br><span class=\"line\">  DEBUG</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç­‰åŒäºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> LogLevelStrings = <span class=\"string\">&quot;ERROR&quot;</span> | <span class=\"string\">&quot;WARN&quot;</span> | <span class=\"string\">&quot;INFO&quot;</span> | <span class=\"string\">&quot;DEBUG&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> LogLevelStrings = keyof <span class=\"keyword\">typeof</span> LogLevel;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">printImportant</span>(<span class=\"params\">key: LogLevelStrings, message: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> num = LogLevel[key];</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (num &lt;= LogLevel.WARN) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Level key is: &quot;</span>, key);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Level value is: &quot;</span>, num);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Log Level message is &quot;</span>, message);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">printImportant(<span class=\"string\">&quot;ERROR&quot;</span>, <span class=\"string\">&quot;This is a message&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-9-åå‘æ˜ å°„\"><a href=\"#7-9-åå‘æ˜ å°„\" class=\"headerlink\" title=\"7.9 åå‘æ˜ å°„\"></a>7.9 åå‘æ˜ å°„</h3><blockquote>\n<p>é™¤äº†åˆ›å»ºä¸€ä¸ªä»¥å±æ€§åä½œä¸ºå¯¹è±¡æˆå‘˜çš„å¯¹è±¡å¤–ï¼Œæ•°å­—æšä¸¾æˆå‘˜è¿˜å…·æœ‰äº†åå‘æ˜ å°„ï¼Œä»æšä¸¾å€¼åˆ°æšä¸¾åå­—ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> _Enum &#123;</span><br><span class=\"line\">  A</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _a = _Enum.A;</span><br><span class=\"line\"><span class=\"keyword\">let</span> _nameOfA = _Enum[_a]; <span class=\"comment\">// &quot;A&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>TypeScript</code> å¯èƒ½ä¼šå°†è¿™æ®µä»£ç ç¼–è¯‘ä¸ºä¸‹é¢çš„ <code>JavaScript</code>ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> Enum;</span><br><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">Enum</span>) </span>&#123;</span><br><span class=\"line\">  Enum[(Enum[<span class=\"string\">&quot;A&quot;</span>] = <span class=\"number\">0</span>)] = <span class=\"string\">&quot;A&quot;</span>;</span><br><span class=\"line\">&#125;)(Enum || (Enum = &#123;&#125;));</span><br><span class=\"line\"><span class=\"keyword\">var</span> a = Enum.A;</span><br><span class=\"line\"><span class=\"keyword\">var</span> nameOfA = Enum[a]; <span class=\"comment\">// &quot;A&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œæšä¸¾ç±»å‹è¢«ç¼–è¯‘æˆä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ­£å‘æ˜ å°„ï¼ˆ<code>name -&gt; value</code>ï¼‰å’Œåå‘æ˜ å°„ï¼ˆ<code>value -&gt; name</code>ï¼‰ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¼•ç”¨æšä¸¾æˆå‘˜æ€»ä¼šç”Ÿæˆä¸ºå¯¹å±æ€§è®¿é—®å¹¶ä¸”æ°¸è¿œä¹Ÿä¸ä¼šå†…è”ä»£ç ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è¦æ³¨æ„çš„æ˜¯ä¸ä¼šä¸ºå­—ç¬¦ä¸²æšä¸¾æˆå‘˜ç”Ÿæˆåå‘æ˜ å°„ã€‚</p>\n</blockquote>\n<h3 id=\"7-10-const-æšä¸¾\"><a href=\"#7-10-const-æšä¸¾\" class=\"headerlink\" title=\"7.10 const æšä¸¾\"></a>7.10 const æšä¸¾</h3><blockquote>\n<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæšä¸¾æ˜¯ååˆ†æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚ç„¶è€Œåœ¨æŸäº›æƒ…å†µä¸‹éœ€æ±‚å¾ˆä¸¥æ ¼ã€‚ä¸ºäº†é¿å…åœ¨é¢å¤–ç”Ÿæˆçš„ä»£ç ä¸Šçš„å¼€é”€å’Œé¢å¤–çš„éç›´æ¥çš„å¯¹æšä¸¾æˆå‘˜çš„è®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>const</code> æšä¸¾ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¸¸é‡æšä¸¾é€šè¿‡åœ¨æšä¸¾ä¸Šä½¿ç”¨ <code>const</code> ä¿®é¥°ç¬¦æ¥å®šä¹‰ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">enum</span> Enum &#123;</span><br><span class=\"line\">  A = <span class=\"number\">1</span>,</span><br><span class=\"line\">  B = A * <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¸¸é‡æšä¸¾åªèƒ½ä½¿ç”¨å¸¸é‡æšä¸¾è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒäºå¸¸è§„çš„æšä¸¾ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«åˆ é™¤ã€‚å¸¸é‡æšä¸¾æˆå‘˜åœ¨ä½¿ç”¨çš„åœ°æ–¹ä¼šè¢«å†…è”è¿›æ¥ã€‚ ä¹‹æ‰€ä»¥å¯ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºï¼Œå¸¸é‡æšä¸¾ä¸å…è®¸åŒ…å«è®¡ç®—æˆå‘˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">enum</span> Directions &#123;</span><br><span class=\"line\">  Up,</span><br><span class=\"line\">  Down,</span><br><span class=\"line\">  Left,</span><br><span class=\"line\">  Right</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> directions = [Directions.Up, Directions.Down, Directions.Left, Directions.Right];</span><br><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆåçš„ä»£ç ä¸ºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> directions1 = [<span class=\"number\">0</span> <span class=\"comment\">/* Up */</span>, <span class=\"number\">1</span> <span class=\"comment\">/* Down */</span>, <span class=\"number\">2</span> <span class=\"comment\">/* Left */</span>, <span class=\"number\">3</span> <span class=\"comment\">/* Right */</span>];</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"7-11-å¤–éƒ¨æšä¸¾\"><a href=\"#7-11-å¤–éƒ¨æšä¸¾\" class=\"headerlink\" title=\"7.11 å¤–éƒ¨æšä¸¾\"></a>7.11 å¤–éƒ¨æšä¸¾</h3><blockquote>\n<p>å¤–éƒ¨æšä¸¾ ç”¨æ¥æè¿°å·²ç»å­˜åœ¨çš„æšä¸¾ç±»å‹çš„å½¢çŠ¶ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">enum</span> Enum &#123;</span><br><span class=\"line\">  A = <span class=\"number\">1</span>,</span><br><span class=\"line\">  B,</span><br><span class=\"line\">  C = <span class=\"number\">2</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¤–éƒ¨æšä¸¾ å’Œ éå¤–éƒ¨æšä¸¾ ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼Œåœ¨æ­£å¸¸çš„æšä¸¾é‡Œï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•çš„æˆå‘˜è¢«å½“æˆå¸¸é‡æˆå‘˜ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºéå¸¸é‡çš„å¤–éƒ¨æšä¸¾è€Œè¨€ï¼Œæ²¡æœ‰åˆå§‹åŒ–æ–¹æ³•æ—¶è¢«å½“åšéœ€è¦ç»è¿‡è®¡ç®—çš„ã€‚</p>\n</blockquote>\n<h2 id=\"å…«ã€ç±»å‹åˆ«å\"><a href=\"#å…«ã€ç±»å‹åˆ«å\" class=\"headerlink\" title=\"å…«ã€ç±»å‹åˆ«å\"></a>å…«ã€ç±»å‹åˆ«å</h2><h3 id=\"8-1-ç±»å‹åˆ«å\"><a href=\"#8-1-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"8.1 ç±»å‹åˆ«å\"></a>8.1 ç±»å‹åˆ«å</h3><ol>\n<li>åˆ›å»ºåˆ«åéœ€è¦ä½¿ç”¨å…³é”®å­— <code>type</code></li>\n<li>ä½¿ç”¨åˆ«åé€šå¸¸ç”¨åœ¨æœ‰ è”åˆç±»å‹ çš„åœºæ™¯ä¸‹</li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šä¸è¦æ··æ·†äº† <code>TypeScript</code> ä¸­çš„ <code>=&gt;</code>; å’Œ <code>ES6</code> ä¸­çš„ <code>=&gt;</code> åœ¨ <code>TypeScript</code> çš„ç±»å‹å®šä¹‰ä¸­ï¼Œ<code>=&gt;</code> ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ã€‚(å·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œéœ€è¦ç”¨æ‹¬å·æ‰©èµ·æ¥ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹)ï¼›åœ¨ <code>ES6</code> ä¸­ï¼Œ<code>=&gt;</code> å«åšç®­å¤´å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Name = <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> ShowName = <span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NameOrShowName = Name | ShowName;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> getName = <span class=\"function\">(<span class=\"params\">name: NameOrShowName</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> name === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> name();</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> showName = <span class=\"function\">() =&gt;</span> <span class=\"string\">&quot;pr is a boy&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(getName(<span class=\"string\">&quot;pr&quot;</span>));</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(getName(showName()));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"8-2-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"><a href=\"#8-2-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"8.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"></a>8.2 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> EventNames = <span class=\"string\">&quot;click&quot;</span> | <span class=\"string\">&quot;scroll&quot;</span> | <span class=\"string\">&quot;mousemove&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> handleEvent: <span class=\"function\">(<span class=\"params\">a: Element, b: EventNames</span>) =&gt;</span> <span class=\"built_in\">string</span> = <span class=\"function\">(<span class=\"params\">ele: Element, event: EventNames</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">`<span class=\"subst\">$&#123;ele&#125;</span> <span class=\"subst\">$&#123;event&#125;</span>`</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">handleEvent(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;header&quot;</span>), <span class=\"string\">&quot;scroll&quot;</span>);</span><br><span class=\"line\">handleEvent(<span class=\"built_in\">document</span>.getElementById(<span class=\"string\">&quot;footer&quot;</span>), <span class=\"string\">&quot;click&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ä¹ã€ç±»å‹æ¨è®º\"><a href=\"#ä¹ã€ç±»å‹æ¨è®º\" class=\"headerlink\" title=\"ä¹ã€ç±»å‹æ¨è®º\"></a>ä¹ã€ç±»å‹æ¨è®º</h2><h3 id=\"9-1-åŸºç¡€\"><a href=\"#9-1-åŸºç¡€\" class=\"headerlink\" title=\"9.1 åŸºç¡€\"></a>9.1 åŸºç¡€</h3><blockquote>\n<p>åœ¨ <code>TypeScript</code> é‡Œï¼Œåœ¨æœ‰äº›æ²¡æœ‰æ˜ç¡®æŒ‡å‡ºç±»å‹çš„åœ°æ–¹ï¼Œç±»å‹æ¨è®ºä¼šå¸®åŠ©æä¾›ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"number\">3</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å˜é‡ <code>x</code> çš„ç±»å‹è¢«æ¨æ–­ä¸ºæ•°å­—ã€‚è¿™ç§æ¨æ–­å‘ç”Ÿåœ¨åˆå§‹åŒ–å˜é‡å’Œæˆå‘˜ï¼Œè®¾ç½®é»˜è®¤å‚æ•°å’Œå†³å®šå‡½æ•°è¿”å›å€¼æ—¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç±»å‹æ¨è®ºæ˜¯ç›´æ¥äº†å½“åœ°ã€‚</p>\n</blockquote>\n<h3 id=\"9-2-æœ€ä½³é€šç”¨ç±»å‹\"><a href=\"#9-2-æœ€ä½³é€šç”¨ç±»å‹\" class=\"headerlink\" title=\"9.2 æœ€ä½³é€šç”¨ç±»å‹\"></a>9.2 æœ€ä½³é€šç”¨ç±»å‹</h3><blockquote>\n<p>å½“éœ€è¦ä»å‡ ä¸ªè¡¨è¾¾å¼ä¸­æ¨æ–­ç±»å‹çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è¿™äº›è¡¨è¾¾å¼çš„ç±»å‹æ¥æ¨æ–­å‡ºä¸€ä¸ªæœ€åˆé€‚çš„é€šç”¨ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = [<span class=\"number\">0</span>, <span class=\"number\">1</span>, <span class=\"literal\">null</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºäº†æ¨æ–­ <code>x</code> çš„ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘æ‰€æœ‰å…ƒç´ çš„ç±»å‹ã€‚è¿™é‡Œæœ‰ä¸¤ç§é€‰æ‹©: <code>number</code> å’Œ <code>null</code>ã€‚è®¡ç®—é€šç”¨ç±»å‹ç®—æ³•ä¼šè€ƒè™‘æ‰€æœ‰çš„å€™é€‰ç±»å‹ï¼Œå¹¶ç»™å‡ºä¸€ä¸ªå…¼å®¹æ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç”±äºæœ€ç»ˆçš„é€šç”¨ç±»å‹å–è‡ªå€™é€‰ç±»å‹ï¼Œæœ‰äº›æ—¶å€™å€™é€‰ç±»å‹å…±äº«ç›¸åŒçš„é€šç”¨ç±»å‹ï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€ä¸ªç±»å‹èƒ½åšä¸ºæ‰€æœ‰å€™é€‰ç±»å‹çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> zoo = [<span class=\"keyword\">new</span> Rhino(), <span class=\"keyword\">new</span> Elephant(), <span class=\"keyword\">new</span> Snake()];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œï¼Œæˆ‘ä»¬æƒ³è®© <code>zoo</code> è¢«æ¨æ–­ä¸º <code>Animal[]</code> ç±»å‹ï¼Œä½†æ˜¯è¿™ä¸ªæ•°ç»„é‡Œæ²¡æœ‰å¯¹è±¡æ˜¯ <code>Animal</code> ç±»å‹çš„ï¼Œå› æ­¤ä¸èƒ½æ¨æ–­å‡ºè¿™ä¸ªç»“æœã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºäº†æ›´æ­£ï¼Œå½“å€™é€‰ç±»å‹ä¸èƒ½ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ˜ç¡®çš„æŒ‡å‡ºç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> zoo: Animal[] = [<span class=\"keyword\">new</span> Rhino(), <span class=\"keyword\">new</span> Elephant(), <span class=\"keyword\">new</span> Snake()];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰æ‰¾åˆ°æœ€ä½³é€šç”¨ç±»å‹çš„è¯ï¼Œç±»å‹æ¨æ–­çš„ç»“æœä¸ºè”åˆæ•°ç»„ç±»å‹ï¼Œ<code>(Rhino | Elephant | Snake)[]</code>ã€‚</p>\n</blockquote>\n<h3 id=\"9-3-ä¸Šä¸‹æ–‡å½’ç±»\"><a href=\"#9-3-ä¸Šä¸‹æ–‡å½’ç±»\" class=\"headerlink\" title=\"9.3 ä¸Šä¸‹æ–‡å½’ç±»\"></a>9.3 ä¸Šä¸‹æ–‡å½’ç±»</h3><ol>\n<li><code>TypeScript</code> ç±»å‹æ¨è®ºä¹Ÿå¯èƒ½æŒ‰ç…§ç›¸åçš„æ–¹å‘è¿›è¡Œï¼Œè¿™è¢«å«åšâ€ä¸Šä¸‹æ–‡å½’ç±»â€ã€‚æŒ‰ä¸Šä¸‹æ–‡å½’ç±»ä¼šå‘ç”Ÿåœ¨è¡¨è¾¾å¼ç±»å‹ä¸æ‰€å¤„çš„ä½ç½®ç›¸å…³æ—¶ã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸‹é¢è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>TypeScript</code> ç±»å‹æ£€æŸ¥å™¨ä¼šä½¿ç”¨ <code>Window.onmousedown</code> å‡½æ•°çš„ç±»å‹æ¥æ¨æ–­å³è¾¹å‡½æ•°è¡¨è¾¾å¼çš„ç±»å‹ã€‚æ‰€ä»¥å®ƒèƒ½å¤Ÿæ¨æ–­å‡º <code>mouseEvent</code> å‚æ•°çš„ç±»å‹ä¸­åŒ…å«äº† <code>button</code> å±æ€§è€Œä¸åŒ…å« <code>kangaroo</code> å±æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onmousedown = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">mouseEvent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(mouseEvent.button); <span class=\"comment\">// &lt;- Ok</span></span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(mouseEvent.kangaroo); <span class=\"comment\">// &lt;- error</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li><code>TypeScript</code> è¿˜èƒ½å¤Ÿå¾ˆå¥½åœ°æ¨æ–­å‡ºå…¶å®ƒä¸Šä¸‹æ–‡ä¸­çš„ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onscroll = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">uiEvent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(uiEvent.button); <span class=\"comment\">// Error</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„å‡½æ•°è¢«èµ‹ç»™ <code>window.onscroll``ï¼ŒTypeScript</code> èƒ½å¤ŸçŸ¥é“ <code>uiEvent</code> æ˜¯ <code>UIEvent</code>ï¼Œè€Œä¸æ˜¯ <code>MouseEventã€‚UIEvent</code> å¯¹è±¡ä¸åŒ…å« <code>button</code> å±æ€§ï¼Œå› æ­¤ <code>TypeScript</code> ä¼šæŠ¥é”™ã€‚</p>\n</blockquote>\n<ol>\n<li>å¦‚æœè¿™ä¸ªå‡½æ•°ä¸æ˜¯åœ¨ä¸Šä¸‹æ–‡å½’ç±»çš„ä½ç½®ä¸Šï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°çš„å‚æ•°ç±»å‹å°†éšå¼çš„æˆä¸º <code>any</code> ç±»å‹ï¼Œè€Œä¸”ä¹Ÿä¸ä¼šæŠ¥é”™(é™¤éä½ å¼€å¯äº† <code>--noImplicitAny</code> é€‰é¡¹)</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> handler = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">uiEvent</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(uiEvent.button); <span class=\"comment\">// &lt;- Ok</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜ç¡®åœ°ä¸ºå‡½æ•°å‚æ•°ç±»å‹èµ‹å€¼æ¥è¦†å†™ä¸Šä¸‹æ–‡ç±»å‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.onscroll = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">uiEvent: <span class=\"built_in\">any</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(uiEvent.button); <span class=\"comment\">// &lt;- Now, no error is given</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†è¿™æ®µä»£ç ä¼šæ‰“å° <code>undefined</code>ï¼Œå› ä¸º <code>uiEvent</code> å¹¶ä¸åŒ…å« <code>button</code> å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸Šä¸‹æ–‡å½’ç±»ä¼šåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½¿ç”¨åˆ°ã€‚é€šå¸¸åŒ…å«å‡½æ•°çš„å‚æ•°ï¼Œèµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œç±»å‹æ–­è¨€ï¼Œå¯¹è±¡æˆå‘˜å’Œæ•°ç»„å­—é¢é‡å’Œè¿”å›å€¼è¯­å¥ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸Šä¸‹æ–‡ç±»å‹ä¹Ÿä¼šåšä¸ºæœ€ä½³é€šç”¨ç±»å‹çš„å€™é€‰ç±»å‹ã€‚æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createZoo</span>(<span class=\"params\"></span>): <span class=\"title\">Animal</span>[] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> [<span class=\"keyword\">new</span> Rhino(), <span class=\"keyword\">new</span> Elephant(), <span class=\"keyword\">new</span> Snake()];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œæœ€ä½³é€šç”¨ç±»å‹æœ‰ <code>4</code> ä¸ªå€™é€‰è€…ï¼š<code>Animal, Rhino, Elephant, Snake</code>ã€‚å½“ç„¶ï¼Œ<code>Animal</code> ä¼šè¢«ä½œä¸ºæœ€ä½³é€šç”¨ç±»å‹ã€‚</p>\n</blockquote>\n<h2 id=\"åã€ç±»å‹å…¼å®¹æ€§\"><a href=\"#åã€ç±»å‹å…¼å®¹æ€§\" class=\"headerlink\" title=\"åã€ç±»å‹å…¼å®¹æ€§\"></a>åã€ç±»å‹å…¼å®¹æ€§</h2><h3 id=\"10-1-ä»‹ç»\"><a href=\"#10-1-ä»‹ç»\" class=\"headerlink\" title=\"10.1 ä»‹ç»\"></a>10.1 ä»‹ç»</h3><blockquote>\n<p><code>TypeScript</code> é‡Œçš„å…¼å®¹æ€§æ˜¯åŸºäºç»“æ„å­ç±»å‹çš„ã€‚ç»“æ„ç±»å‹æ˜¯ä¸€ç§åªä½¿ç”¨å…¶æˆå‘˜æ¥æè¿°ç±»å‹çš„æ–¹å¼ã€‚å®ƒæ­£å¥½ä¸åä¹‰( <code>nominal</code> )ç±»å‹å½¢æˆå¯¹æ¯”ã€‚(è¯‘è€…æ³¨ï¼šåœ¨åŸºäºåä¹‰ç±»å‹çš„ç±»å‹ç³»ç»Ÿä¸­ï¼Œæ•°æ®ç±»å‹çš„å…¼å®¹æ€§æˆ–ç­‰ä»·æ€§æ˜¯é€šè¿‡æ˜ç¡®çš„å£°æ˜/æˆ–ç±»å‹çš„åç§°æ¥å†³å®šçš„ã€‚è¿™ä¸ç»“æ„æ€§ç±»å‹ç³»ç»Ÿä¸åŒï¼Œå®ƒæ˜¯åŸºäºç±»å‹çš„ç»„æˆç»“æ„ï¼Œä¸”ä¸è¦æ±‚æ˜ç¡®åœ°å£°æ˜ã€‚)çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Named &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> p: Named;</span><br><span class=\"line\"><span class=\"comment\">// Ok, because of structural typing</span></span><br><span class=\"line\">p = <span class=\"keyword\">new</span> Person();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä½¿ç”¨åŸºäºåä¹‰ç±»å‹çš„æ–­è¨€ï¼Œæ¯”å¦‚ <code>C#</code> æˆ– <code>Java</code> ä¸­ï¼Œè¿™æ®µä»£ç ä¼šæŠ¥é”™ï¼Œ å› ä¸º <code>Person</code> ç±»æ²¡æœ‰æ˜ç¡®è¯´æ˜å…¶å®ç°äº† <code>Named</code> æ¥å£ã€‚<br><code>TypeScript</code> çš„ç»“æ„æ€§å­ç±»å‹æ˜¯æ ¹æ® <code>JavaScript</code> ä»£ç çš„å…¸å‹å†™æ³•æ¥è®¾è®¡çš„ã€‚ å› ä¸º <code>JavaScript</code> é‡Œå¹¿æ³›åœ°ä½¿ç”¨åŒ¿åå¯¹è±¡ï¼Œä¾‹å¦‚å‡½æ•°è¡¨è¾¾å¼å’Œå¯¹è±¡å­—é¢é‡ï¼Œ æ‰€ä»¥ä½¿ç”¨ç»“æ„ç±»å‹ç³»ç»Ÿæ¥æè¿°è¿™äº›ç±»å‹æ¯”ä½¿ç”¨åä¹‰ç±»å‹ç³»ç»Ÿæ›´å¥½ã€‚</p>\n</blockquote>\n<h3 id=\"10-2-å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\"><a href=\"#10-2-å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\" class=\"headerlink\" title=\"10.2 å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹\"></a>10.2 å…³äºå¯é æ€§çš„æ³¨æ„äº‹é¡¹</h3><blockquote>\n<p><code>TypeScript</code> çš„ç±»å‹ç³»ç»Ÿå…è®¸æŸäº›åœ¨ç¼–è¯‘é˜¶æ®µæ— æ³•ç¡®è®¤å…¶å®‰å…¨æ€§çš„æ“ä½œã€‚å½“ä¸€ä¸ªç±»å‹ç³»ç»Ÿå…·æ­¤å±æ€§æ—¶ï¼Œè¢«å½“åšæ˜¯â€œä¸å¯é â€çš„ã€‚TypeScript å…è®¸è¿™ç§ä¸å¯é è¡Œä¸ºçš„å‘ç”Ÿæ˜¯ç»è¿‡ä»”ç»†è€ƒè™‘çš„ã€‚é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šè§£é‡Šä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µå’Œå…¶æœ‰åˆ©çš„ä¸€é¢ã€‚</p>\n</blockquote>\n<h3 id=\"10-3-å¼€å§‹\"><a href=\"#10-3-å¼€å§‹\" class=\"headerlink\" title=\"10.3 å¼€å§‹\"></a>10.3 å¼€å§‹</h3><ul>\n<li><code>TypeScript</code> ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿçš„åŸºæœ¬è§„åˆ™æ˜¯ï¼Œå¦‚æœ <code>x</code> è¦å…¼å®¹ <code>y</code>ï¼Œé‚£ä¹ˆ <code>y</code> è‡³å°‘å…·æœ‰ä¸ <code>x</code> ç›¸åŒçš„å±æ€§ã€‚æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Named &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> x: Named;</span><br><span class=\"line\"><span class=\"comment\">// y&#x27;s inferred type is &#123; name: string; location: string &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> y = &#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;Alice&quot;</span>, <span class=\"attr\">location</span>: <span class=\"string\">&quot;Seattle&quot;</span> &#125;;</span><br><span class=\"line\">x = y;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œè¦æ£€æŸ¥ <code>y</code> æ˜¯å¦èƒ½èµ‹å€¼ç»™ <code>x</code>ï¼Œç¼–è¯‘å™¨æ£€æŸ¥ <code>x</code> ä¸­çš„æ¯ä¸ªå±æ€§ï¼Œçœ‹æ˜¯å¦èƒ½åœ¨ <code>y</code> ä¸­ä¹Ÿæ‰¾åˆ°å¯¹åº”å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>y</code> å¿…é¡»åŒ…å«åå­—æ˜¯ <code>name</code> çš„ <code>string</code> ç±»å‹æˆå‘˜ã€‚<code>y</code> æ»¡è¶³æ¡ä»¶ï¼Œå› æ­¤èµ‹å€¼æ­£ç¡®ã€‚</p>\n</blockquote>\n<ul>\n<li>æ£€æŸ¥å‡½æ•°å‚æ•°æ—¶ä½¿ç”¨ç›¸åŒçš„è§„åˆ™</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">greet</span>(<span class=\"params\">n: Named</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello, &quot;</span> + n.name);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">greet(y); <span class=\"comment\">// OK</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼Œ<code>y</code> æœ‰ä¸ªé¢å¤–çš„ <code>location</code> å±æ€§ï¼Œä½†è¿™ä¸ä¼šå¼•å‘é”™è¯¯ã€‚<br>åªæœ‰ç›®æ ‡ç±»å‹ï¼ˆè¿™é‡Œæ˜¯ <code>Named</code>ï¼‰çš„æˆå‘˜ä¼šè¢«ä¸€ä¸€æ£€æŸ¥æ˜¯å¦å…¼å®¹ã€‚<br>è¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹æ˜¯é€’å½’è¿›è¡Œçš„ï¼Œæ£€æŸ¥æ¯ä¸ªæˆå‘˜åŠå­æˆå‘˜ã€‚</p>\n</blockquote>\n<h3 id=\"10-4-æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\"><a href=\"#10-4-æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\" class=\"headerlink\" title=\"10.4 æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°\"></a>10.4 æ¯”è¾ƒä¸¤ä¸ªå‡½æ•°</h3><ol>\n<li>ç›¸å¯¹æ¥è®²ï¼Œåœ¨æ¯”è¾ƒåŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹çš„æ—¶å€™æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œé—®é¢˜æ˜¯å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå‡½æ•°æ˜¯å…¼å®¹çš„ã€‚</li>\n</ol>\n<ul>\n<li>ä¸‹é¢æˆ‘ä»¬ä»ä¸¤ä¸ªç®€å•çš„å‡½æ•°å…¥æ‰‹ï¼Œå®ƒä»¬ä»…æ˜¯å‚æ•°åˆ—è¡¨ç•¥æœ‰ä¸åŒï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"function\">(<span class=\"params\">a: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> y = <span class=\"function\">(<span class=\"params\">b: <span class=\"built_in\">number</span>, s: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">y = x; <span class=\"comment\">// &lt;- Ok</span></span><br><span class=\"line\"><span class=\"comment\">// x = y; // &lt;- Error</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¦æŸ¥çœ‹ <code>x</code> æ˜¯å¦èƒ½èµ‹å€¼ç»™ <code>y</code>ï¼Œé¦–å…ˆçœ‹å®ƒä»¬çš„å‚æ•°åˆ—è¡¨ã€‚ <code>x</code> çš„æ¯ä¸ªå‚æ•°å¿…é¡»èƒ½åœ¨ <code>y</code> é‡Œæ‰¾åˆ°å¯¹åº”ç±»å‹çš„å‚æ•°ã€‚æ³¨æ„çš„æ˜¯å‚æ•°çš„åå­—ç›¸åŒä¸å¦æ— æ‰€è°“ï¼Œåªçœ‹å®ƒä»¬çš„ç±»å‹ã€‚ è¿™é‡Œï¼Œ<code>x</code> çš„æ¯ä¸ªå‚æ•°åœ¨ <code>y</code> ä¸­éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„å‚æ•°ï¼Œæ‰€ä»¥å…è®¸èµ‹å€¼ã€‚ç¬¬äºŒä¸ªèµ‹å€¼é”™è¯¯ï¼Œå› ä¸º <code>y</code> æœ‰ä¸ªå¿…éœ€çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½†æ˜¯ <code>x</code> å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸å…è®¸èµ‹å€¼ã€‚<br>ä½ å¯èƒ½ä¼šç–‘æƒ‘ä¸ºä»€ä¹ˆå…è®¸å¿½ç•¥å‚æ•°ï¼Œåƒä¾‹å­ <code>y = x</code> ä¸­é‚£æ ·ã€‚ åŸå› æ˜¯å¿½ç•¥é¢å¤–çš„å‚æ•°åœ¨ <code>JavaScript</code> é‡Œæ˜¯å¾ˆå¸¸è§çš„ã€‚<br>ä¾‹å¦‚ï¼Œ<code>Array.forEach</code> ç»™å›è°ƒå‡½æ•°ä¼  <code>3</code> ä¸ªå‚æ•°ï¼šæ•°ç»„å…ƒç´ ï¼Œç´¢å¼• å’Œ æ•´ä¸ªæ•°ç»„ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œä¼ å…¥ä¸€ä¸ªåªä½¿ç”¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> items = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"comment\">// Don&#x27;t force these extra arguments</span></span><br><span class=\"line\">items.forEach(<span class=\"function\">(<span class=\"params\">item, index, array</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(item));</span><br><span class=\"line\"><span class=\"comment\">// Should be Ok</span></span><br><span class=\"line\">items.forEach(<span class=\"function\"><span class=\"params\">item</span> =&gt;</span> <span class=\"built_in\">console</span>.log(item));</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>ä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•å¤„ç†è¿”å›å€¼ç±»å‹ï¼Œåˆ›å»ºä¸¤ä¸ªä»…æ˜¯è¿”å›å€¼ç±»å‹ä¸åŒçš„å‡½æ•°ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> x1 = <span class=\"function\">() =&gt;</span> (&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;Alice&quot;</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">let</span> y1 = <span class=\"function\">() =&gt;</span> (&#123; <span class=\"attr\">name</span>: <span class=\"string\">&quot;Alice&quot;</span>, <span class=\"attr\">location</span>: <span class=\"string\">&quot;Seattle&quot;</span> &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">x1 = y1; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">y1 = x1; <span class=\"comment\">// Error, because x() lacks a location property</span></span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>ç±»å‹ç³»ç»Ÿå¼ºåˆ¶æºå‡½æ•°çš„è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ç›®æ ‡å‡½æ•°è¿”å›å€¼ç±»å‹çš„å­ç±»å‹ã€‚</li>\n</ol>\n<h3 id=\"10-5-å‡½æ•°å‚æ•°åŒå‘åå˜\"><a href=\"#10-5-å‡½æ•°å‚æ•°åŒå‘åå˜\" class=\"headerlink\" title=\"10.5 å‡½æ•°å‚æ•°åŒå‘åå˜\"></a>10.5 å‡½æ•°å‚æ•°åŒå‘åå˜</h3><blockquote>\n<p>å½“æ¯”è¾ƒå‡½æ•°å‚æ•°ç±»å‹æ—¶ï¼Œåªæœ‰å½“æºå‡½æ•°å‚æ•°èƒ½å¤Ÿèµ‹å€¼ç»™ç›®æ ‡å‡½æ•°æˆ–è€…åè¿‡æ¥æ—¶æ‰èƒ½èµ‹å€¼æˆåŠŸã€‚è¿™æ˜¯ä¸ç¨³å®šçš„ï¼Œå› ä¸ºè°ƒç”¨è€…å¯èƒ½ä¼ å…¥äº†ä¸€ä¸ªå…·æœ‰æ›´ç²¾ç¡®ç±»å‹ä¿¡æ¯çš„å‡½æ•°ï¼Œä½†æ˜¯è°ƒç”¨è¿™ä¸ªä¼ å…¥çš„å‡½æ•°çš„æ—¶å€™å´ä½¿ç”¨äº†ä¸æ˜¯é‚£ä¹ˆç²¾ç¡®çš„ç±»å‹ä¿¡æ¯ã€‚å®é™…ä¸Šï¼Œè¿™æå°‘ä¼šå‘å£°é”™è¯¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®ç°å¾ˆå¤š <code>JavaScript</code> é‡Œçš„å¸¸è§æ¨¡å¼ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> EventType &#123;</span><br><span class=\"line\">  Mouse,</span><br><span class=\"line\">  Keyboard</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Event &#123;</span><br><span class=\"line\">  timestamp: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> MouseEvent <span class=\"keyword\">extends</span> Event &#123;</span><br><span class=\"line\">  x1: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  y1: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> keyEvent <span class=\"keyword\">extends</span> Event &#123;</span><br><span class=\"line\">  keyCode: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">listenEvent</span>(<span class=\"params\">eventType: EventType, handler: (n: Event) =&gt; <span class=\"built_in\">void</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* â€¦â€¦ */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Unsound, but useful and common ä¸å®Œæ•´ï¼Œä½†æ˜¯å¸¸ç”¨å¸¸è§</span></span><br><span class=\"line\">listenEvent(EventType.Mouse, <span class=\"function\">(<span class=\"params\">e: MouseEvent</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;e.x1&#125;</span>,<span class=\"subst\">$&#123;e.y1&#125;</span>`</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Undesirable alternatives in presence of soundness å®Œæ•´ä½†æ˜¯ä¸å—æ¬¢è¿</span></span><br><span class=\"line\">listenEvent(EventType.Mouse, <span class=\"function\">(<span class=\"params\">e: Event</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;(&lt;MouseEvent&gt;e).x1&#125;</span>,<span class=\"subst\">$&#123;(&lt;MouseEvent&gt;e).y1&#125;</span>`</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">listenEvent(EventType.Mouse, &lt;<span class=\"function\">(<span class=\"params\">e: Event</span>) =&gt;</span> <span class=\"built_in\">void</span>&gt;(<span class=\"function\">(<span class=\"params\">e: MouseEvent</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;e.x1&#125;</span>,<span class=\"subst\">$&#123;e.y1&#125;</span>`</span>)));</span><br><span class=\"line\"><span class=\"comment\">// Still disallowed (clear error). Type safety enforced for wholly incompatible types</span></span><br><span class=\"line\"><span class=\"comment\">// ä»ç„¶ä¸å…è®¸ï¼ˆæ¸…é™¤é”™è¯¯ï¼‰ã€‚å®Œå…¨ä¸å…¼å®¹ç±»å‹æ‰€å¼ºåˆ¶è§„å®šçš„ç±»å‹å®‰å…¨</span></span><br><span class=\"line\"><span class=\"comment\">// listenEvent(EventType.Mouse, (e: number) =&gt; console.log(e));</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-6-å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\"><a href=\"#10-6-å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\" class=\"headerlink\" title=\"10.6 å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°\"></a>10.6 å¯é€‰å‚æ•°å’Œå‰©ä½™å‚æ•°</h3><ol>\n<li>æ¯”è¾ƒå‡½æ•°å…¼å®¹æ€§çš„æ—¶å€™ï¼Œå¯é€‰å‚æ•°ä¸å¿…é¡»å‚æ•°æ˜¯å¯äº’æ¢çš„ã€‚æºç±»å‹ä¸Šæœ‰é¢å¤–çš„å¯é€‰å‚æ•°ä¸æ˜¯é”™è¯¯ï¼Œç›®æ ‡ç±»å‹çš„å¯é€‰å‚æ•°åœ¨æºç±»å‹é‡Œæ²¡æœ‰å¯¹åº”çš„å‚æ•°ä¹Ÿä¸æ˜¯é”™è¯¯ã€‚</li>\n<li>å½“ä¸€ä¸ªå‡½æ•°æœ‰å‰©ä½™å‚æ•°æ—¶ï¼Œå®ƒè¢«å½“åšæ— é™ä¸ªå¯é€‰å‚æ•°ã€‚</li>\n<li>è¿™å¯¹äºç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¨³å®šçš„ï¼Œä½†ä»è¿è¡Œæ—¶çš„è§’åº¦æ¥çœ‹ï¼Œå¯é€‰å‚æ•°ä¸€èˆ¬æ¥è¯´æ˜¯ä¸å¼ºåˆ¶çš„ï¼Œå› ä¸ºå¯¹äºå¤§å¤šæ•°å‡½æ•°æ¥è¯´ç›¸å½“äºä¼ é€’äº†ä¸€äº› undefined ã€‚</li>\n</ol>\n<blockquote>\n<p>æœ‰ä¸€ä¸ªå¥½çš„ä¾‹å­ï¼Œå¸¸è§çš„å‡½æ•°æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å¹¶ç”¨å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯å¯é¢„çŸ¥çš„å‚æ•° ä½†å¯¹ç±»å‹ç³»ç»Ÿæ¥è¯´æ˜¯ä¸ç¡®å®šçš„å‚æ•°æ¥è°ƒç”¨ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">invokeLater</span>(<span class=\"params\">args: <span class=\"built_in\">any</span>[], callback: (...args: <span class=\"built_in\">any</span>[]) =&gt; <span class=\"built_in\">void</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... Invoke callback with &#x27;args&#x27; ... é€šè¿‡argsè°ƒç”¨callback */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Unsound - invokeLater &quot;might&quot; provide any number of arguments</span></span><br><span class=\"line\"><span class=\"comment\">// ä¸å¥å…¨çš„æ˜¯ - è¢«è°ƒç”¨æ—¶å€™å¯èƒ½ä¼šæä¾›ä»»æ„æ•°é‡çš„å‚æ•°</span></span><br><span class=\"line\">invokeLater([<span class=\"number\">1</span>, <span class=\"number\">2</span>], <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(x + <span class=\"string\">&quot;,&quot;</span> + y));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Confusing (x and y are actually required) and unrecoverable</span></span><br><span class=\"line\"><span class=\"comment\">// ä»¤æˆ‘ä»¬å›°æƒ‘(æ˜¯å¦éœ€è¦ x å’Œ y) å¹¶ä¸” ä¸å¯æ¢å¤</span></span><br><span class=\"line\">invokeLater([<span class=\"number\">1</span>, <span class=\"number\">2</span>], <span class=\"function\">(<span class=\"params\">x?, y?</span>) =&gt;</span> <span class=\"built_in\">console</span>.log(x + <span class=\"string\">&quot;,&quot;</span> + y));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-7-å‡½æ•°é‡è½½\"><a href=\"#10-7-å‡½æ•°é‡è½½\" class=\"headerlink\" title=\"10.7 å‡½æ•°é‡è½½\"></a>10.7 å‡½æ•°é‡è½½</h3><blockquote>\n<p>å¯¹äºæœ‰é‡è½½çš„å‡½æ•°ï¼Œæºå‡½æ•°çš„æ¯ä¸ªé‡è½½éƒ½è¦åœ¨ç›®æ ‡å‡½æ•°ä¸Šæ‰¾åˆ°å¯¹åº”çš„å‡½æ•°ç­¾åã€‚è¿™ç¡®ä¿äº†ç›®æ ‡å‡½æ•°å¯ä»¥åœ¨æ‰€æœ‰æºå‡½æ•°å¯è°ƒç”¨çš„åœ°æ–¹è°ƒç”¨ã€‚</p>\n</blockquote>\n<h3 id=\"10-8-æšä¸¾\"><a href=\"#10-8-æšä¸¾\" class=\"headerlink\" title=\"10.8 æšä¸¾\"></a>10.8 æšä¸¾</h3><blockquote>\n<p>æšä¸¾ç±»å‹ä¸æ•°å­—ç±»å‹å…¼å®¹ï¼Œå¹¶ä¸”æ•°å­—ç±»å‹ä¸æšä¸¾ç±»å‹å…¼å®¹ã€‚ä¸åŒæšä¸¾ç±»å‹ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">enum</span> Status &#123;</span><br><span class=\"line\">  Ready,</span><br><span class=\"line\">  Waiting</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">enum</span> Color &#123;</span><br><span class=\"line\">  Red,</span><br><span class=\"line\">  Blue,</span><br><span class=\"line\">  Green</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> _status = Status.Ready;</span><br><span class=\"line\"><span class=\"comment\">// _status = Color.Green; // Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-9-ç±»\"><a href=\"#10-9-ç±»\" class=\"headerlink\" title=\"10.9 ç±»\"></a>10.9 ç±»</h3><blockquote>\n<p>ç±»ä¸å¯¹è±¡å­—é¢é‡å’Œæ¥å£å·®ä¸å¤šï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒï¼šç±»çš„é™æ€éƒ¨åˆ†å’Œå®ä¾‹éƒ¨åˆ†çš„ç±»å‹ã€‚æ¯”è¾ƒä¸¤ä¸ªç±»ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œåªæœ‰å®ä¾‹çš„æˆå‘˜ä¼šè¢«æ¯”è¾ƒã€‚é™æ€æˆå‘˜å’Œæ„é€ å‡½æ•°ä¸åœ¨æ¯”è¾ƒçš„èŒƒå›´å†…ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Animal</span> </span>&#123;</span><br><span class=\"line\">  feet: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">name: <span class=\"built_in\">string</span>, numFeet: <span class=\"built_in\">number</span>, c: <span class=\"built_in\">boolean</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Size</span> </span>&#123;</span><br><span class=\"line\">  feet: <span class=\"built_in\">number</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">numFeet: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> a: Animal;</span><br><span class=\"line\"><span class=\"keyword\">let</span> s: Size;</span><br><span class=\"line\">a = s; <span class=\"comment\">//Ok</span></span><br><span class=\"line\">s = a; <span class=\"comment\">//Ok</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*  */</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-10-ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\"><a href=\"#10-10-ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\" class=\"headerlink\" title=\"10.10 ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜\"></a>10.10 ç±»çš„ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜</h3><blockquote>\n<p>ç±»çš„ç§æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜ä¼šå½±å“å…¼å®¹æ€§ã€‚ å½“æ£€æŸ¥ç±»å®ä¾‹çš„å…¼å®¹æ—¶ï¼Œå¦‚æœç›®æ ‡ç±»å‹åŒ…å«ä¸€ä¸ªç§æœ‰æˆå‘˜ï¼Œé‚£ä¹ˆæºç±»å‹å¿…é¡»åŒ…å«æ¥è‡ªåŒä¸€ä¸ªç±»çš„è¿™ä¸ªç§æœ‰æˆå‘˜ã€‚åŒæ ·åœ°ï¼Œè¿™æ¡è§„åˆ™ä¹Ÿé€‚ç”¨äºåŒ…å«å—ä¿æŠ¤æˆå‘˜å®ä¾‹çš„ç±»å‹æ£€æŸ¥ã€‚ è¿™å…è®¸å­ç±»èµ‹å€¼ç»™çˆ¶ç±»ï¼Œä½†æ˜¯ä¸èƒ½èµ‹å€¼ç»™å…¶å®ƒæœ‰åŒæ ·ç±»å‹çš„ç±»ã€‚</p>\n</blockquote>\n<h3 id=\"10-11-æ³›å‹\"><a href=\"#10-11-æ³›å‹\" class=\"headerlink\" title=\"10.11 æ³›å‹\"></a>10.11 æ³›å‹</h3><blockquote>\n<p>å› ä¸º <code>TypeScript</code> æ˜¯ç»“æ„æ€§çš„ç±»å‹ç³»ç»Ÿï¼Œç±»å‹å‚æ•°åªå½±å“ä½¿ç”¨å…¶åšä¸ºç±»å‹ä¸€éƒ¨åˆ†çš„ç»“æœç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Empty&lt;T&gt; &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> x: Empty&lt;<span class=\"built_in\">number</span>&gt;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> y: Empty&lt;<span class=\"built_in\">string</span>&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">x = y; <span class=\"comment\">// Ok, because y matches structure of x</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢ä»£ç é‡Œï¼Œ<code>x</code> å’Œ <code>y</code> æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬çš„ç»“æ„ä½¿ç”¨ç±»å‹å‚æ•°æ—¶ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p>\n</blockquote>\n<ul>\n<li>æŠŠè¿™ä¸ªä¾‹å­æ”¹å˜ä¸€ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªæˆå‘˜ï¼Œå°±èƒ½çœ‹å‡ºæ˜¯å¦‚ä½•å·¥ä½œçš„äº†ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> NotEmpty&lt;T&gt; &#123;</span><br><span class=\"line\">  data: T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> x1: NotEmpty&lt;<span class=\"built_in\">number</span>&gt;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> y1: NotEmpty&lt;<span class=\"built_in\">string</span>&gt;;</span><br><span class=\"line\">x1 = y1; <span class=\"comment\">// Errorï¼Œbecause x and y are not compatible</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨è¿™é‡Œï¼Œæ³›å‹ç±»å‹åœ¨ä½¿ç”¨æ—¶å°±å¥½æ¯”ä¸æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºæ²¡æŒ‡å®šæ³›å‹ç±»å‹çš„æ³›å‹å‚æ•°æ—¶ï¼Œä¼šæŠŠæ‰€æœ‰æ³›å‹å‚æ•°å½“æˆ <code>any</code> æ¯”è¾ƒã€‚ç„¶åç”¨ç»“æœç±»å‹è¿›è¡Œæ¯”è¾ƒï¼Œå°±åƒä¸Šé¢ç¬¬ä¸€ä¸ªä¾‹å­ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> identity = <span class=\"function\"><span class=\"keyword\">function</span> &lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">x: T</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> reverse = <span class=\"function\"><span class=\"keyword\">function</span> &lt;<span class=\"title\">U</span>&gt;(<span class=\"params\">y: U</span>): <span class=\"title\">U</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\">identity = reverse; <span class=\"comment\">// Ok, because (x: any) =&gt; any matches (y: any) =&gt; any</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"10-12-é«˜çº§ä¸»é¢˜\"><a href=\"#10-12-é«˜çº§ä¸»é¢˜\" class=\"headerlink\" title=\"10.12 é«˜çº§ä¸»é¢˜\"></a>10.12 é«˜çº§ä¸»é¢˜</h3><ul>\n<li>å­ç±»å‹å’Œèµ‹å€¼</li>\n</ul>\n<blockquote>\n<p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†â€å…¼å®¹æ€§â€ï¼Œå®ƒåœ¨è¯­è¨€è§„èŒƒé‡Œæ²¡æœ‰å®šä¹‰ï¼Œåœ¨ <code>TypeScript</code> é‡Œï¼Œæœ‰ä¸¤ç§å…¼å®¹æ€§ï¼šå­ç±»å‹ å’Œ èµ‹å€¼ã€‚å®ƒä»¬çš„ä¸åŒç‚¹åœ¨äºï¼šèµ‹å€¼æ‰©å±•äº†å­ç±»å‹å…¼å®¹æ€§ï¼Œå¢åŠ äº†ä¸€äº›è§„åˆ™ï¼Œå…è®¸å’Œ <code>any</code> æ¥å›èµ‹å€¼ï¼Œä»¥åŠ enum å’Œå¯¹åº”æ•°å­—å€¼ä¹‹é—´çš„æ¥å›èµ‹å€¼ã€‚<br>è¯­è¨€é‡Œçš„ä¸åŒåœ°æ–¹åˆ†åˆ«ä½¿ç”¨äº†å®ƒä»¬ä¹‹ä¸­çš„æœºåˆ¶ã€‚å®é™…ä¸Šï¼Œç±»å‹å…¼å®¹æ€§æ˜¯ç”±èµ‹å€¼å…¼å®¹æ€§æ¥æ§åˆ¶çš„ï¼Œå³ä½¿åœ¨ <code>implements</code> å’Œ <code>extends</code> è¯­å¥ä¹Ÿä¸ä¾‹å¤–ã€‚</p>\n</blockquote>\n<h2 id=\"åä¸€ã€é«˜çº§ç±»å‹\"><a href=\"#åä¸€ã€é«˜çº§ç±»å‹\" class=\"headerlink\" title=\"åä¸€ã€é«˜çº§ç±»å‹\"></a>åä¸€ã€é«˜çº§ç±»å‹</h2><h3 id=\"11-1-äº¤å‰ç±»å‹\"><a href=\"#11-1-äº¤å‰ç±»å‹\" class=\"headerlink\" title=\"11.1 äº¤å‰ç±»å‹\"></a>11.1 äº¤å‰ç±»å‹</h3><blockquote>\n<p>äº¤å‰ç±»å‹ æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œ<code>Person &amp; Serializable &amp; Loggable</code> åŒæ—¶æ˜¯ <code>Person</code> å’Œ <code>Serializable</code> å’Œ <code>Loggable</code>ã€‚å°±æ˜¯è¯´è¿™ä¸ªç±»å‹çš„å¯¹è±¡åŒæ—¶æ‹¥æœ‰äº†è¿™ä¸‰ç§ç±»å‹çš„æˆå‘˜ã€‚<br>æˆ‘ä»¬å¤§å¤šæ•°æ˜¯åœ¨æ··å…¥( <code>mixins</code> )æˆ–å…¶å®ƒä¸é€‚åˆå…¸å‹é¢å‘å¯¹è±¡æ¨¡å‹çš„åœ°æ–¹çœ‹åˆ°äº¤å‰ç±»å‹çš„ä½¿ç”¨ã€‚(åœ¨ <code>JavaScript</code> é‡Œå‘ç”Ÿè¿™ç§æƒ…å†µçš„åœºåˆå¾ˆå¤šï¼)</p>\n</blockquote>\n<h4 id=\"11-1-1-ReadOnly-çš„å®ç°\"><a href=\"#11-1-1-ReadOnly-çš„å®ç°\" class=\"headerlink\" title=\"11.1.1 ReadOnly çš„å®ç°\"></a>11.1.1 <code>ReadOnly</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> ReadOnly&lt;T&gt; = &#123;</span><br><span class=\"line\">    readOnly [P <span class=\"keyword\">in</span> keyof T]: T[P];</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-1-2-Partial-çš„å®ç°\"><a href=\"#11-1-2-Partial-çš„å®ç°\" class=\"headerlink\" title=\"11.1.2 Partial çš„å®ç°\"></a>11.1.2 <code>Partial</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Partial&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-1-3-Pick-çš„å®ç°\"><a href=\"#11-1-3-Pick-çš„å®ç°\" class=\"headerlink\" title=\"11.1.3 Pick çš„å®ç°\"></a>11.1.3 <code>Pick</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Pick&lt;T, K <span class=\"keyword\">extends</span> keyof T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T[P];</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-1-4-Record-çš„å®ç°\"><a href=\"#11-1-4-Record-çš„å®ç°\" class=\"headerlink\" title=\"11.1.4 Record çš„å®ç°\"></a>11.1.4 <code>Record</code> çš„å®ç°</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Record&lt;K <span class=\"keyword\">extends</span> <span class=\"built_in\">string</span>, T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢æ˜¯å¦‚ä½•åˆ›å»ºæ··å…¥çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­(<code>&quot;target&quot;: &quot;es5&quot;</code>):</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">extend</span>&lt;<span class=\"title\">First</span>, <span class=\"title\">Second</span>&gt;(<span class=\"params\">first: First, second: Second</span>): <span class=\"title\">First</span> &amp; <span class=\"title\">Second</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> result: Partial&lt;First &amp; Second&gt;= &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> prop <span class=\"keyword\">in</span> first) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (first.hasOwnProperty(prop)) &#123;</span><br><span class=\"line\">            (&lt;First&gt;result)[prop] = first[prop];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> prop <span class=\"keyword\">in</span> second) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (second.hasOwnProperty(prop)) &#123;</span><br><span class=\"line\">            (&lt;Second&gt;result)[prop] = second[prop];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">First</span> &amp; <span class=\"attr\">Second</span>&gt;</span>result;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">&gt;</span></span><br><span class=\"line\"><span class=\"xml\">class Person &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    constructor(public name: string) &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    &#125;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">interface Loggable &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    log(name: string): void;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">class ConsoleLogger implements Loggable &#123;</span></span><br><span class=\"line\"><span class=\"xml\">    log(name) &#123;</span></span><br><span class=\"line\"><span class=\"xml\">        console.log(`Hello, I&#x27;m $&#123;name&#125;`)</span></span><br><span class=\"line\"><span class=\"xml\">    &#125;</span></span><br><span class=\"line\"><span class=\"xml\">&#125;</span></span><br><span class=\"line\"><span class=\"xml\">const jim = extend(new Person(&quot;Jim&quot;), ConsoleLogger.prototype);</span></span><br><span class=\"line\"><span class=\"xml\">let c = jim.log(jim.name);</span></span><br><span class=\"line\"><span class=\"xml\">console.log(c);</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-2-è”åˆç±»å‹\"><a href=\"#11-2-è”åˆç±»å‹\" class=\"headerlink\" title=\"11.2 è”åˆç±»å‹\"></a>11.2 è”åˆç±»å‹</h3><blockquote>\n<p>è”åˆç±»å‹ å’Œ äº¤å‰ç±»å‹ å¾ˆæœ‰å…³è”ï¼Œä½†æ˜¯ä½¿ç”¨ä¸Šå´å®Œå…¨ä¸åŒã€‚å¶å°”ä½ ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªä»£ç åº“å¸Œæœ›ä¼ å…¥ <code>number</code> æˆ– <code>string</code> ç±»å‹çš„å‚æ•°ã€‚ä¾‹å¦‚ä¸‹é¢çš„å‡½æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Takes a string and adds &quot;padding&quot; to the left.</span></span><br><span class=\"line\"><span class=\"comment\"> * If &#x27;padding&#x27; is a string, then &#x27;padding&#x27; is appended to the left side.</span></span><br><span class=\"line\"><span class=\"comment\"> * If &#x27;padding&#x27; is a number, then that number of spaces is added to the left side.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">padLeft</span>(<span class=\"params\">value: <span class=\"built_in\">string</span>, padding: <span class=\"built_in\">any</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(padding + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>) + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> padding + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Expected string or number, got &#x27;<span class=\"subst\">$&#123;padding&#125;</span>&#x27;.`</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">padLeft(<span class=\"string\">&quot;Hello World&quot;</span>, <span class=\"number\">4</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>padLeft</code> å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œ<code>padding</code> å‚æ•°çš„ç±»å‹æŒ‡å®šæˆäº† <code>any</code>ã€‚è¿™å°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ—¢ä¸æ˜¯ <code>number</code> ä¹Ÿä¸æ˜¯ <code>string</code> ç±»å‹çš„å‚æ•°ï¼Œä½†æ˜¯ <code>TypeScript</code> å´ä¸ä¼šæŠ¥é”™ã€‚</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> indentedString = padLeft(<span class=\"string\">&quot;Hello World&quot;</span>, <span class=\"literal\">true</span>); <span class=\"comment\">// ç¼–è¯‘é˜¶æ®µé€šè¿‡ï¼Œè¿è¡Œæ—¶æŠ¥é”™ã€‚</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;  åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­è¨€é‡Œï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†è¿™ä¸¤ç§ç±»å‹æŠ½è±¡æˆæœ‰å±‚çº§çš„ç±»å‹ã€‚è¿™ä¹ˆåšæ˜¾ç„¶æ˜¯éå¸¸æ¸…æ™°çš„ï¼Œä½†åŒæ—¶ä¹Ÿå­˜åœ¨äº†è¿‡åº¦è®¾è®¡ã€‚&#96;padLeft&#96; åŸå§‹ç‰ˆæœ¬çš„å¥½å¤„ä¹‹ä¸€å°±æ˜¯å…è®¸æˆ‘ä»¬ä¼ å…¥åŸå§‹ç±»å‹ã€‚è¿™æ ·åšçš„è¯ä½¿ç”¨èµ·æ¥æ—¢ç®€å•åˆæ–¹ä¾¿ã€‚å¦‚æœæˆ‘ä»¬å°±æ˜¯æƒ³ä½¿ç”¨å·²ç»å­˜åœ¨çš„å‡½æ•°çš„è¯ï¼Œè¿™ç§æ–°çš„æ–¹å¼å°±ä¸é€‚ç”¨äº†ã€‚ä»£æ›¿ &#96;any&#96;ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ è”åˆç±»å‹ ä½œä¸º &#96;padding&#96; çš„å‚æ•°ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * Takes a string and adds &quot;padding&quot; to the left.</span><br><span class=\"line\"> * If &#39;padding&#39; is a string, then &#39;padding&#39; is appended to the left side.</span><br><span class=\"line\"> * If &#39;padding&#39; is a number, then that number of spaces is added to the left side.</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function padLeft1(value: string, padding: string | number) &#123;</span><br><span class=\"line\">    &#x2F;&#x2F; ...</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;&#x2F; let indentedString1 &#x3D; padLeft1(&quot;Hello world&quot;, true); &#x2F;&#x2F; errors during compilation</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è”åˆç±»å‹ è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚æˆ‘ä»¬ä½¿ç”¨ç«–çº¿(<code>|</code>)åˆ†éš”æ¯ä¸ªç±»å‹ï¼Œæ‰€ä»¥ <code>number | string | boolean</code> è¡¨ç¤ºä¸€ä¸ªå€¼å¯èƒ½æ˜¯ <code>number</code>, <code>string</code>, <code>boolean</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Bird &#123;</span><br><span class=\"line\">  fly();</span><br><span class=\"line\"></span><br><span class=\"line\">  lagEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Fish &#123;</span><br><span class=\"line\">  swim();</span><br><span class=\"line\"></span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSmallPet</span>(<span class=\"params\"></span>): <span class=\"title\">Fish</span> | <span class=\"title\">Bird</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> pet = getSmallPet();</span><br><span class=\"line\">pet.layEggs(); <span class=\"comment\">// &lt;- ok</span></span><br><span class=\"line\"><span class=\"comment\">// pet.swim(); // &lt;- errors</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„è”åˆç±»å‹å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä½†æ˜¯ä½ å¾ˆå®¹æ˜“å°±ä¹ æƒ¯äº†ã€‚å¦‚æœä¸€ä¸ªå€¼çš„ç±»å‹æ˜¯ <code>A | B</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿç¡®å®šçš„æ˜¯å®ƒåŒ…å«äº† <code>A</code> å’Œ <code>B</code> ä¸­å…±æœ‰çš„æˆå‘˜ã€‚è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>Bird</code> å…·æœ‰ä¸€ä¸ª <code>fly</code> æˆå‘˜ã€‚æˆ‘ä»¬ä¸èƒ½ç¡®å®šä¸€ä¸ª <code>Bird | Fish</code> ç±»å‹çš„å˜é‡æ˜¯å¦æœ‰ <code>fly</code> æ–¹æ³•ã€‚å¦‚æœå˜é‡åœ¨è¿è¡Œæ—¶æ˜¯ <code>Fish</code> ç±»å‹ï¼Œé‚£ä¹ˆè°ƒç”¨ <code>pet.fly()</code> å°±å‡ºé”™äº†ã€‚</p>\n</blockquote>\n<h3 id=\"11-3-ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\"><a href=\"#11-3-ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\" class=\"headerlink\" title=\"11.3 ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†\"></a>11.3 ç±»å‹å®ˆå«ä¸ç±»å‹åŒºåˆ†</h3><blockquote>\n<p>è”åˆç±»å‹é€‚ç”¨äºé‚£äº›å€¼å¯ä»¥ä¸ºä¸åŒç±»å‹çš„æƒ…å†µã€‚ä½†å½“æˆ‘ä»¬æƒ³ç¡®åˆ‡åœ°äº†è§£æ˜¯å¦ä¸º <code>Fish</code> æ—¶æ€ä¹ˆåŠï¼Ÿ<code>JavaScript</code> é‡Œå¸¸ç”¨æ¥åŒºåˆ† <code>2</code> ä¸ªå¯èƒ½å€¼çš„æ–¹æ³•æ˜¯æ£€æŸ¥æˆå‘˜æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¹‹å‰æåŠçš„ï¼Œæˆ‘ä»¬åªèƒ½è®¿é—®è”åˆç±»å‹ä¸­å…±åŒæ‹¥æœ‰çš„æˆå‘˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Fish &#123;</span><br><span class=\"line\">  swim();</span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Bird &#123;</span><br><span class=\"line\">  fly();</span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getSmallPet</span>(<span class=\"params\"></span>): <span class=\"title\">Fish</span> | <span class=\"title\">Bird</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> pet = getSmallPet();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¯ä¸€ä¸ªè®¿é—®çš„æˆå‘˜éƒ½ä¼šæŠ¥é”™</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (pet.swim) &#123;</span><br><span class=\"line\">  pet.swim();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (pet.fly) &#123;</span><br><span class=\"line\">  pet.fly();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸ºäº†è®©è¿™æ®µä»£ç å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç±»å‹æ–­è¨€</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> ((&lt;Fish&gt;pet).swim) &#123;</span><br><span class=\"line\">  (&lt;Fish&gt;pet).swim();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((&lt;Bird&gt;pet).fly) &#123;</span><br><span class=\"line\">  (&lt;Bird&gt;pet).fly();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-4-ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\"><a href=\"#11-4-ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\" class=\"headerlink\" title=\"11.4 ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«\"></a>11.4 ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹å®ˆå«</h3><blockquote>\n<p>è¿™é‡Œæˆ‘ä»¬æ³¨æ„åˆ°ä¸å¾—ä¸å¤šæ¬¡ä½¿ç”¨ç±»å‹æ–­è¨€ã€‚å‡è‹¥æˆ‘ä»¬ä¸€æ—¦æ£€æŸ¥è¿‡ç±»å‹ï¼Œå°±èƒ½åœ¨ä¹‹åçš„æ¯ä¸ªåˆ†æ”¯é‡Œæ¸…æ¥šåœ°çŸ¥é“ <code>pet</code> çš„ç±»å‹çš„è¯å°±å¥½äº†ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>TypeScript</code> é‡Œçš„ç±»å‹å®ˆå«æœºåˆ¶è®©å®ƒæˆä¸ºäº†ç°å®ã€‚ç±»å‹å®ˆå«å°±æ˜¯ä¸€äº›è¡¨è¾¾å¼ï¼Œå®ƒä»¬ä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥ä»¥ç¡®ä¿åœ¨æŸä¸ªä½œç”¨åŸŸé‡Œçš„ç±»å‹ã€‚è¦æƒ³å®šä¹‰ä¸€ä¸ªç±»å‹å®ˆå«ï¼Œæˆ‘ä»¬åªéœ€è¦ç®€å•åœ°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªç±»å‹è°“è¯ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Fish &#123;</span><br><span class=\"line\">  swim();</span><br><span class=\"line\"></span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Bird &#123;</span><br><span class=\"line\">  fly();</span><br><span class=\"line\"></span><br><span class=\"line\">  layEggs();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isFish</span>(<span class=\"params\">pet: Fish | Bird</span>): <span class=\"title\">pet</span> <span class=\"title\">is</span> <span class=\"title\">Fish</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (&lt;Fish&gt;pet).swim !== <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ<code>pet is Fish</code> å°±æ˜¯ç±»å‹è°“è¯ã€‚è°“è¯ä¸º <code>parameterName is Type</code> è¿™ç§å½¢å¼ï¼Œ <code>parameterName</code> å¿…é¡»æ˜¯æ¥è‡ªäºå½“å‰å‡½æ•°ç­¾åé‡Œçš„ä¸€ä¸ªå‚æ•°åã€‚<br>æ¯å½“ä½¿ç”¨ä¸€äº›å˜é‡è°ƒç”¨ <code>isFish</code> <code>æ—¶ï¼ŒTypeScript</code> ä¼šå°†å˜é‡ç¼©å‡ä¸ºé‚£ä¸ªå…·ä½“çš„ç±»å‹ï¼Œåªè¦è¿™ä¸ªç±»å‹ä¸å˜é‡çš„åŸå§‹ç±»å‹æ˜¯å…¼å®¹çš„<br><code>swim</code> å’Œ <code>fly</code> çš„è°ƒç”¨éƒ½æ²¡æœ‰é—®é¢˜äº†</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (isFish(pet)) &#123;</span><br><span class=\"line\">  pet.swim();</span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  pet.fly();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>TypeScript</code> ä¸ä»…çŸ¥é“åœ¨ <code>if</code> åˆ†æ”¯é‡Œ <code>pet</code> æ˜¯ <code>Fish</code> ç±»å‹ï¼›å®ƒè¿˜æ¸…æ¥šåœ¨ <code>else</code> åˆ†ä¹‹é‡Œï¼Œä¸€å®šä¸æ˜¯ <code>Fish</code> ç±»å‹ï¼Œä¸€å®šæ˜¯ Bird ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"11-5-typeof-ç±»å‹å®ˆå«\"><a href=\"#11-5-typeof-ç±»å‹å®ˆå«\" class=\"headerlink\" title=\"11.5 typeof ç±»å‹å®ˆå«\"></a>11.5 typeof ç±»å‹å®ˆå«</h3><blockquote>\n<p>ç°åœ¨æˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹æ€ä¹ˆä½¿ç”¨è”åˆç±»å‹ä¹¦å†™ <code>padLeft</code> ä»£ç ã€‚ æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ©ç”¨ç±»å‹æ–­è¨€æ¥å†™ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isNumber</span>(<span class=\"params\">x: <span class=\"built_in\">any</span></span>): <span class=\"title\">x</span> <span class=\"title\">is</span> <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> x === <span class=\"string\">&quot;number&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isString</span>(<span class=\"params\">x: <span class=\"built_in\">any</span></span>): <span class=\"title\">x</span> <span class=\"title\">is</span> <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">typeof</span> x === <span class=\"string\">&quot;string&quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">padLeft</span>(<span class=\"params\">value: <span class=\"built_in\">string</span>, padding: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isNumber(padding)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(padding + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>) + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isString(padding)) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> padding + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Expected string or number, go <span class=\"subst\">$&#123;padding&#125;</span>.`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç„¶è€Œï¼Œå¿…é¡»è¦å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ç±»å‹æ˜¯å¦æ˜¯åŸå§‹ç±»å‹ï¼Œè¿™å¤ªç—›è‹¦äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬ä¸å¿…å°† <code>typeof x === &quot;number&quot;</code> æŠ½è±¡æˆä¸€ä¸ªå‡½æ•°ï¼Œå› ä¸º <code>TypeScript</code> å¯ä»¥å°†å®ƒè¯†åˆ«ä¸ºä¸€ä¸ªç±»å‹å®ˆå«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ä»£ç é‡Œæ£€æŸ¥ç±»å‹äº†ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">newPadLeft</span>(<span class=\"params\">value: <span class=\"built_in\">string</span>, padding: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;number&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(padding + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>) + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> padding === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> padding + value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Expected string or number, go <span class=\"subst\">$&#123;padding&#125;</span>.`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™äº› <code>typeof</code> ç±»å‹å®ˆå«åªæœ‰ä¸¤ç§å½¢å¼èƒ½è¢«è¯†åˆ«ï¼š<code>typeof v === &quot;typename&quot;</code> å’Œ <code>typeof v !== &quot;typename&quot;</code>, <code>&quot;typename&quot;</code> å¿…é¡»æ˜¯ <code>&quot;number&quot;</code>, <code>&quot;string&quot;</code>, <code>&quot;boolean&quot;</code> æˆ– <code>&quot;symbol&quot;</code>ã€‚ä½†æ˜¯ <code>TypeScript</code> å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹å®ˆå«ã€‚</p>\n</blockquote>\n<h3 id=\"11-6-instanceof-ç±»å‹å®ˆå«\"><a href=\"#11-6-instanceof-ç±»å‹å®ˆå«\" class=\"headerlink\" title=\"11.6 instanceof ç±»å‹å®ˆå«\"></a>11.6 instanceof ç±»å‹å®ˆå«</h3><blockquote>\n<p><code>instanceof</code> ç±»å‹å®ˆå«æ˜¯é€šè¿‡æ„é€ å‡½æ•°æ¥ç»†åŒ–ç±»å‹çš„ä¸€ç§æ–¹å¼ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å€Ÿé‰´ä¸€ä¸‹ä¹‹å‰å­—ç¬¦ä¸²å¡«å……çš„ä¾‹å­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Padder &#123;</span><br><span class=\"line\">  getPaddingString(): <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SpaceRepeatingPadder</span> <span class=\"title\">implements</span> <span class=\"title\">Padder</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> numSpaces: <span class=\"built_in\">number</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">getPaddingString</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Array</span>(<span class=\"built_in\">this</span>.numSpaces + <span class=\"number\">1</span>).join(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StringPadder</span> <span class=\"title\">implements</span> <span class=\"title\">Padder</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">private</span> value: <span class=\"built_in\">string</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">getPaddingString</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getRandomPadder</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.random() &lt; <span class=\"number\">0.5</span> ? <span class=\"keyword\">new</span> SpaceRepeatingPadder(<span class=\"number\">4</span>) : <span class=\"keyword\">new</span> StringPadder(<span class=\"string\">&quot; &quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç±»å‹ä¸º SpaceRepeatingPadder | StringPadder</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> padder: Padder = getRandomPadder();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> (padder <span class=\"keyword\">instanceof</span> SpaceRepeatingPadder) &#123;</span><br><span class=\"line\">  padder; <span class=\"comment\">// ç±»å‹ç»†åŒ–ä¸º &#x27;SpaceRepeatingPadder&#x27;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (padder <span class=\"keyword\">instanceof</span> StringPadder) &#123;</span><br><span class=\"line\">  padder; <span class=\"comment\">// ç±»å‹ç»†åŒ–ä¸º &#x27;StringPadder&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>instanceof</code> çš„å³ä¾§è¦æ±‚æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œ<code>TypeScript</code> å°†ç»†åŒ–ä¸º:</p>\n</blockquote>\n<ol>\n<li>æ­¤æ„é€ å‡½æ•°çš„ <code>prototype</code> å±æ€§çš„ç±»å‹ï¼Œå¦‚æœå®ƒçš„ç±»å‹ä¸ä¸º <code>any</code> çš„è¯</li>\n<li>æ ‡ç­¾ç­¾åæ‰€è¿”å›çš„ç±»å‹çš„è”åˆ</li>\n</ol>\n<blockquote>\n<p>ä»¥æ­¤é¡ºåºã€‚</p>\n</blockquote>\n<h3 id=\"11-7-å¯ä¸º-null-çš„ç±»å‹\"><a href=\"#11-7-å¯ä¸º-null-çš„ç±»å‹\" class=\"headerlink\" title=\"11.7 å¯ä¸º null çš„ç±»å‹\"></a>11.7 å¯ä¸º null çš„ç±»å‹</h3><blockquote>\n<p><code>TypeScript</code> å…·æœ‰ä¸¤ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œ<code>null</code> å’Œ <code>undefined</code> ï¼Œå®ƒä»¬åˆ†åˆ«å…·æœ‰å€¼ <code>null</code> å’Œ <code>undefined</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å‹æ£€æŸ¥å™¨ä¼šè®¤ä¸º <code>null</code> å’Œ <code>undefined</code> å¯ä»¥èµ‹å€¼ç»™ä»»ä½•ç±»å‹ã€‚<code>null</code> å’Œ <code>undefined</code> æ˜¯æ‰€æœ‰å…¶å®ƒç±»å‹çš„ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚è¿™æ„å‘³ç€ï¼Œä½ é˜»æ­¢ä¸äº†å°†å®ƒä»¬èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œå°±ç®—æ˜¯ä½ æƒ³è¦é˜»æ­¢è¿™ç§æƒ…å†µä¹Ÿä¸è¡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>--strictNullChecks</code> æ ‡è®°å¯ä»¥è§£å†³æ­¤é”™è¯¯ï¼šå½“ä½ å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨åœ°åŒ…å« <code>null</code> æˆ– <code>undefined</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½ å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ˜ç¡®çš„åŒ…å«å®ƒä»¬ï¼š```typescript<br>let s = â€œfooâ€;<br>s = null; // â€“strictNullChecks æ¨¡å¼ä¸‹ é”™è¯¯ï¼Œ â€˜nullâ€™ ä¸èƒ½èµ‹å€¼ç»™ â€˜stringâ€™<br>let sn: string | null = â€œbarâ€;<br>sn = null; // Ok<br>sn = undefined; // â€“strictNullChecks æ¨¡å¼ä¸‹ error, å› ä¸ºâ€™undefinedâ€™ä¸èƒ½èµ‹å€¼ç»™â€™string | nullâ€™</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;  æ³¨æ„ï¼šæŒ‰ç…§ &#96;JavaScript&#96; &#96;çš„è¯­ä¹‰ï¼ŒTypeScript&#96; ä¼šæŠŠ &#96;null&#96; å’Œ &#96;undefined&#96; åŒºåˆ«å¯¹å¾…ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; &#96;string | null&#96;ï¼Œ&#96;string | undefined&#96; å’Œ &#96;string | undefined | null&#96; æ˜¯ä¸åŒçš„ç±»å‹ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">### 11.8 å¯é€‰å‚æ•°å’Œå¯é€‰å±æ€§</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">- ä½¿ç”¨äº† &#96;--strictNullChecks&#96; ï¼Œå¯é€‰å‚æ•°ä¼šè¢«è‡ªåŠ¨åœ°åŠ ä¸Š &#96;| undefined&#96;:</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">function f(x: number, y?: number) &#123;</span><br><span class=\"line\">    return x + (y || 0);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">f(1, 2);</span><br><span class=\"line\">f(1);</span><br><span class=\"line\">f(1, undefined);</span><br><span class=\"line\">f(1, null); &#x2F;&#x2F; error, &#39;null&#39; is not assignable to &#39;number | undefined&#39;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯é€‰å±æ€§ä¹Ÿä¼šæœ‰åŒæ ·çš„å¤„ç†</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  a: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  b?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">c.a = <span class=\"number\">12</span>;</span><br><span class=\"line\">c.a = <span class=\"literal\">undefined</span>; <span class=\"comment\">// error, &#x27;undefined&#x27; is not assignable to &#x27;number&#x27;</span></span><br><span class=\"line\">c.b = <span class=\"number\">13</span>;</span><br><span class=\"line\">c.b = <span class=\"literal\">undefined</span>; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">c.b = <span class=\"literal\">null</span>; <span class=\"comment\">// error, &#x27;null&#x27; is not assignable to &#x27;number | undefined&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-9-ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\"><a href=\"#11-9-ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\" class=\"headerlink\" title=\"11.9 ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€\"></a>11.9 ç±»å‹å®ˆå«å’Œç±»å‹æ–­è¨€</h3><blockquote>\n<p>ç”±äºå¯ä»¥ä¸º <code>null</code> çš„ç±»å‹æ˜¯é€šè¿‡è”åˆç±»å‹å®ç°ï¼Œé‚£ä¹ˆä½ éœ€è¦ä½¿ç”¨ç±»å‹å®ˆå«æ¥å»é™¤ <code>null</code>ã€‚å¹¸è¿åœ°æ˜¯è¿™ä¸åœ¨ <code>JavaScript</code> é‡Œå†™çš„ä»£ç ä¸€è‡´ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\">sn: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (sn == <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;default&quot;</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> sn;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œå¾ˆæ˜æ˜¾åœ°å»é™¤äº† <code>null</code>, ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨çŸ­è·¯è¿ç®—ç¬¦:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>(<span class=\"params\">sn: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> sn || <span class=\"string\">&quot;default&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœç¼–è¯‘å™¨ä¸èƒ½å¤Ÿå»é™¤ <code>null</code> æˆ– <code>undefined</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ‰‹åŠ¨å»é™¤ã€‚è¯­æ³•æ˜¯æ·»åŠ  <code>!</code> åç¼€ï¼š<code>identifier!</code> ä» <code>identifier</code> çš„ç±»å‹é‡Œå»é™¤äº† <code>null</code> å’Œ <code>undefined</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">broken</span>(<span class=\"params\">name: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postfix</span>(<span class=\"params\">epihet: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name.charAt(<span class=\"number\">0</span>) + <span class=\"string\">&quot;. the&quot;</span> + epihet; <span class=\"comment\">// error, &#x27;name&#x27; is possibly null</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  name = name || <span class=\"string\">&quot;Bob&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> postfix(<span class=\"string\">&quot;great&quot;</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fixed</span>(<span class=\"params\">name: <span class=\"built_in\">string</span> | <span class=\"literal\">null</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">postfix</span>(<span class=\"params\">epihet: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> name!.charAt(<span class=\"number\">0</span>) + <span class=\"string\">&quot;. the&quot;</span> + epihet; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  name = name || <span class=\"string\">&quot;Bob&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> postfix(<span class=\"string\">&quot;great&quot;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ¬ä¾‹ä½¿ç”¨äº†åµŒå¥—å‡½æ•°ï¼Œå› ä¸ºç¼–è¯‘å™¨æ— æ³•å»é™¤åµŒå¥—å‡½æ•°çš„ <code>null</code> (é™¤éæ˜¯ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼)ã€‚å› ä¸ºå®ƒæ— æ³•è·Ÿè¸ªæ‰€æœ‰å¯¹åµŒå¥—å‡½æ•°çš„è°ƒç”¨ï¼Œå°¤å…¶æ˜¯ä½ å°†å†…å±‚å‡½æ•°ä½œä¸ºå¤–å±‚å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœæ— æ³•çŸ¥é“å‡½æ•°åœ¨å“ªé‡Œè¢«è°ƒç”¨ï¼Œå°±æ— æ³•çŸ¥é“è°ƒç”¨æ—¶ <code>name</code> çš„ç±»å‹ã€‚</p>\n</blockquote>\n<h3 id=\"11-10-ç±»å‹åˆ«å\"><a href=\"#11-10-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"11.10 ç±»å‹åˆ«å\"></a>11.10 ç±»å‹åˆ«å</h3><ol>\n<li>ç±»å‹åˆ«åä¼šç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚ç±»å‹åˆ«åæœ‰æ—¶å’Œæ¥å£å¾ˆåƒï¼Œä½†æ˜¯å¯ä»¥ä½œç”¨äº åŸå§‹å€¼ï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ ä»¥åŠå…¶å®ƒä»»ä½•ä½ éœ€è¦æ‰‹å†™çš„ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Name = <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NameResolver = <span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> NameOrResolver = Name | NameResolver;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getName</span>(<span class=\"params\">n: NameOrResolver</span>): <span class=\"title\">Name</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> n === <span class=\"string\">&quot;string&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> n;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> n();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>èµ·åˆ«åä¸ä¼šæ–°å»ºä¸€ä¸ªç±»å‹ - å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°åå­—æ¥å¼•ç”¨é‚£ä¸ªç±»å‹ã€‚</li>\n</ol>\n<p>3.ç»™åŸå§‹ç±»å‹èµ·åˆ«åé€šå¸¸æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œå°½ç®¡å¯ä»¥ä½œä¸ºæ–‡æ¡£çš„ä¸€ç§å½¢å¼ä½¿ç”¨ã€‚</p>\n<ol start=\"4\">\n<li>åŒæ¥å£ä¸€æ ·ï¼Œç±»å‹åˆ«åä¹Ÿå¯ä»¥æ˜¯æ³›å‹ - æˆ‘ä»¬å¯ä»¥æ·»åŠ ç±»å‹å‚æ•°å¹¶ä¸”åœ¨åˆ«åå£°æ˜çš„å³ä¾§ä¼ å…¥ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Container&lt;T&gt; = &#123; <span class=\"attr\">value</span>: T &#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥åœ¨å±æ€§é‡Œå¼•ç”¨è‡ªå·±ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Tree&lt;T&gt; = &#123;</span><br><span class=\"line\">  value: T;</span><br><span class=\"line\">  left: Tree&lt;T&gt;;</span><br><span class=\"line\">  right: Tree&lt;T&gt;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>ä¸äº¤å‰ç±»å‹ä¸€èµ·ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå‡ºä¸€äº›ååˆ†ç¨€å¥‡å¤æ€ªçš„ç±»å‹</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> LinkedList&lt;T&gt; = T &amp; &#123; <span class=\"attr\">next</span>: LinkedList&lt;T&gt; &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Person &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> people: LinkedList&lt;Person&gt;;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.name;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.next.name;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.next.next.name;</span><br><span class=\"line\"><span class=\"keyword\">var</span> s = people.next.next.next.name;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç„¶è€Œï¼Œç±»å‹åˆ«åä¸èƒ½å‡ºç°åœ¨å£°æ˜å³ä¾§çš„ä»»ä½•åœ°æ–¹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// type Yikes = Array&lt;Yikes&gt;; // error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-11-æ¥å£-vs-ç±»å‹åˆ«å\"><a href=\"#11-11-æ¥å£-vs-ç±»å‹åˆ«å\" class=\"headerlink\" title=\"11.11 æ¥å£ vs ç±»å‹åˆ«å\"></a>11.11 æ¥å£ vs ç±»å‹åˆ«å</h3><blockquote>\n<p>åƒæˆ‘ä»¬æåˆ°çš„ï¼Œç±»å‹åˆ«åå¯ä»¥åƒæ¥å£ä¸€æ ·ï¼›ç„¶è€Œï¼Œä»æœ‰ä¸€äº›ç»†å¾®å·®åˆ«ã€‚</p>\n</blockquote>\n<ol>\n<li>æ¥å£åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„åå­—ï¼Œå¯ä»¥åœ¨å…¶å®ƒä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ç±»å‹åˆ«åå¹¶ä¸åˆ›å»ºæ–°åå­— - æ¯”å¦‚ï¼Œé”™è¯¯ä¿¡æ¯å°±ä¸ä¼šä½¿ç”¨åˆ«åã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä»£ç é‡Œï¼Œåœ¨ç¼–è¯‘å™¨ä¸­å°†é¼ æ ‡æ‚¬åœåœ¨ <code>interfaced</code> ä¸Šï¼Œæ˜¾ç¤ºå®ƒè¿”å›çš„æ˜¯ <code>Interface</code>ï¼Œä½†æ‚¬åœåœ¨ <code>aliased</code> ä¸Šæ—¶ï¼Œæ˜¾ç¤ºçš„å´æ˜¯å¯¹è±¡å­—é¢é‡ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Alias = &#123; <span class=\"attr\">num</span>: <span class=\"built_in\">number</span> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Interface &#123;</span><br><span class=\"line\">  num: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">aliased</span>(<span class=\"params\">arg: Alias</span>): <span class=\"title\">Alias</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">interfaced</span>(<span class=\"params\">arg: Interface</span>): <span class=\"title\">Interface</span></span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>å¦ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ç±»å‹åˆ«åä¸èƒ½è¢« <code>extends</code> å’Œ <code>implements</code> (è‡ªå·±ä¹Ÿä¸èƒ½ <code>extends</code> å’Œ <code>implements</code> å…¶å®ƒç±»å‹)ã€‚å› ä¸º è½¯ä»¶ä¸­çš„å¯¹è±¡åº”è¯¥å¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œä½†æ˜¯å¯¹äºä¿®æ”¹æ˜¯å°é—­çš„ï¼Œä½ åº”è¯¥å°½é‡å»ä½¿ç”¨æ¥å£ä»£æ›¿ç±»å‹åˆ«åã€‚</li>\n<li>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æ— æ³•é€šè¿‡æ¥å£æ¥æè¿°ä¸€ä¸ªç±»å‹å¹¶ä¸”éœ€è¦ä½¿ç”¨ è”åˆç±»å‹ æˆ– å…ƒç»„ç±»å‹ï¼Œè¿™æ—¶é€šå¸¸ä¼šä½¿ç”¨ç±»å‹åˆ«åã€‚</li>\n</ol>\n<h3 id=\"11-12-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"><a href=\"#11-12-å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"11.12 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹\"></a>11.12 å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹</h3><blockquote>\n<p>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å…è®¸ä½ æŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»çš„å›ºå®šå€¼ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ç±»å‹å¯ä»¥ä¸è”åˆç±»å‹ï¼Œç±»å‹å®ˆå«å’Œç±»å‹åˆ«åå¾ˆå¥½çš„é…åˆã€‚é€šè¿‡ç»“åˆä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä½ å¯ä»¥å®ç°ç±»ä¼¼æšä¸¾ç±»å‹çš„å­—ç¬¦ä¸²ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Easing = <span class=\"string\">&quot;ease-in&quot;</span> | <span class=\"string\">&quot;ease-out&quot;</span> | <span class=\"string\">&quot;ease-in-out&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UIElement</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">animate</span>(<span class=\"params\">dx: <span class=\"built_in\">number</span>, dy: <span class=\"built_in\">number</span>, easing: Easing</span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (easing === <span class=\"string\">&quot;ease-in&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (easing === <span class=\"string\">&quot;ease-out&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (easing === <span class=\"string\">&quot;ease-in-out&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// error! should not pass null or undefined.</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> button = <span class=\"keyword\">new</span> UIElement();</span><br><span class=\"line\">button.animate(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"string\">&quot;ease-in&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// button.animate(0, 0,&quot;uneasy&quot;); // error: &quot;uneasy&quot; is not allowed here</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½ åªèƒ½ä»ä¸‰ç§å…è®¸çš„å­—ç¬¦ä¸­é€‰æ‹©å…¶ä¸€æ¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä¼ å…¥å…¶å®ƒå€¼åˆ™ä¼šäº§ç”Ÿé”™è¯¯ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Argument of type &#x27;&quot;uneasy&quot;&#x27; is not assignable to parameter of type &#x27;&quot;ease-in&quot; | &quot;ease-out&quot; | &quot;ease-in-out&quot;&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹è¿˜å¯ä»¥ç”¨äºåŒºåˆ†å‡½æ•°é‡è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span>(<span class=\"params\">tagName: <span class=\"string\">&quot;img&quot;</span></span>): <span class=\"title\">HTMLImageElement</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createELement</span>(<span class=\"params\">tagName: <span class=\"string\">&quot;input&quot;</span></span>): <span class=\"title\">HTMLInputElement</span></span>;</span><br><span class=\"line\"><span class=\"comment\">// ... more overloads ...</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createElement</span>(<span class=\"params\">tagName: <span class=\"string\">&quot;string&quot;</span></span>): <span class=\"title\">Element</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... code goes here ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-13-æ•°å­—å­—é¢é‡ç±»å‹\"><a href=\"#11-13-æ•°å­—å­—é¢é‡ç±»å‹\" class=\"headerlink\" title=\"11.13 æ•°å­—å­—é¢é‡ç±»å‹\"></a>11.13 æ•°å­—å­—é¢é‡ç±»å‹</h3><ul>\n<li><code>TypeScript</code> è¿˜å…·æœ‰æ•°å­—å­—é¢é‡ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">rollDice</span>(<span class=\"params\"></span>): 1 | 2 | 3 | 4 | 5 | 6 </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¾ˆå°‘ç›´æ¥è¿™æ ·ä½¿ç”¨ï¼Œä½†å®ƒä»¬å¯ä»¥ç”¨åœ¨ç¼©å°èŒƒå›´è°ƒè¯• <code>bug</code> çš„æ—¶å€™ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>(<span class=\"params\">x: <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x !== <span class=\"number\">1</span> || x !== <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ~~~~~~</span></span><br><span class=\"line\">    <span class=\"comment\">// Operator &#x27;!==&#x27; cannot be applied to types &#x27;1&#x27; and &#x27;2&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¢å¥è¯è¯´ï¼Œå½“ <code>x</code> ä¸ <code>2</code> è¿›è¡Œæ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒçš„å€¼å¿…é¡»ä¸º <code>1</code>ï¼Œè¿™å°±æ„å‘³ç€ä¸Šé¢çš„æ¯”è¾ƒæ£€æŸ¥æ˜¯éæ³•çš„ã€‚</p>\n</blockquote>\n<h3 id=\"11-14-æšä¸¾æˆå‘˜ç±»å‹\"><a href=\"#11-14-æšä¸¾æˆå‘˜ç±»å‹\" class=\"headerlink\" title=\"11.14 æšä¸¾æˆå‘˜ç±»å‹\"></a>11.14 æšä¸¾æˆå‘˜ç±»å‹</h3><blockquote>\n<p>å¦‚æˆ‘ä»¬åœ¨æšä¸¾ä¸€èŠ‚é‡Œæåˆ°çš„ï¼Œå½“æ¯ä¸ªæšä¸¾æˆå‘˜éƒ½æ˜¯ç”¨å­—é¢é‡åˆå§‹åŒ–çš„æ—¶å€™æšä¸¾æˆå‘˜æ˜¯å…·æœ‰ç±»å‹çš„ã€‚åœ¨æˆ‘ä»¬è°ˆåŠâ€œå•ä¾‹ç±»å‹â€çš„æ—¶å€™ï¼Œå¤šæ•°æ˜¯æŒ‡ æšä¸¾æˆå‘˜ç±»å‹ å’Œ æ•°å­—/å­—ç¬¦ä¸² å­—é¢é‡ç±»å‹ï¼Œå°½ç®¡å¤§å¤šæ•°ç”¨æˆ·ä¼šäº’æ¢ä½¿ç”¨â€œå•ä¾‹ç±»å‹â€å’Œâ€œå­—é¢é‡ç±»å‹â€ã€‚</p>\n</blockquote>\n<h3 id=\"11-15-å¯è¾¨è¯†è”åˆ\"><a href=\"#11-15-å¯è¾¨è¯†è”åˆ\" class=\"headerlink\" title=\"11.15 å¯è¾¨è¯†è”åˆ\"></a>11.15 å¯è¾¨è¯†è”åˆ</h3><blockquote>\n<p>ä½ å¯ä»¥åˆå¹¶ å•ä¾‹ç±»å‹ï¼Œè”åˆç±»å‹ï¼Œç±»å‹å®ˆå« å’Œ ç±»å‹åˆ«å æ¥åˆ›å»ºä¸€ä¸ªå«åš å¯è¾¨è¯†è”åˆ çš„é«˜çº§æ¨¡å¼ï¼Œå®ƒä¹Ÿç§°ä½œ æ ‡ç­¾è”åˆ æˆ– ä»£æ•°æ•°æ®ç±»å‹ã€‚å¯è¾¨è¯†è”åˆ åœ¨å‡½æ•°å¼ç¼–ç¨‹é‡Œå¾ˆæœ‰ç”¨å¤„ã€‚ä¸€äº›è¯­è¨€ä¼šè‡ªåŠ¨åœ°ä¸ºä½ è¾¨è¯†è”åˆï¼›è€Œ <code>TypeScript</code> åˆ™åŸºäºå·²æœ‰çš„ <code>JavaScript</code> æ¨¡å¼ï¼Œã€‚å®ƒå…·æœ‰ <code>3</code> ä¸ªè¦ç´ ï¼š</p>\n</blockquote>\n<ol>\n<li>å…·æœ‰æ™®é€šçš„å•ä¾‹ç±»å‹å±æ€§ - å¯è¾¨è¯†çš„ç‰¹å¾</li>\n<li>ä¸€ä¸ªç±»å‹åˆ«ååŒ…å«äº†é‚£äº›ç±»å‹çš„è”åˆ - è”åˆã€‚</li>\n<li>æ­¤å±æ€§ä¸Šçš„ç±»å‹å®ˆå«</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Square &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;square&quot;</span>;</span><br><span class=\"line\">  size: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Rectangle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;rectangle&quot;</span>;</span><br><span class=\"line\">  width: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  height: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Circle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;circle&quot;</span>;</span><br><span class=\"line\">  radius: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é¦–å…ˆæˆ‘ä»¬å£°æ˜äº†å°†è¦è”åˆçš„æ¥å£ã€‚æ¯ä¸ªæ¥å£éƒ½æœ‰ <code>kind</code> å±æ€§ä½†æœ‰ä¸åŒçš„å­—ç¬¦ä¸²å­—é¢é‡ç±»å‹ã€‚<code>kind</code> å±æ€§ç§°ä½œ å¯è¾¨è¯†çš„ç‰¹å¾æˆ–æ ‡ç­¾ã€‚å…¶å®ƒçš„å±æ€§åˆ™ç‰¹å®šäºå„ä¸ªæ¥å£ã€‚æ³¨æ„ï¼Œç›®å‰å„ä¸ªæ¥å£é—´æ˜¯æ²¡æœ‰è”ç³»çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æˆ‘ä»¬å°†å®ƒä»¬è”åˆåˆ°ä¸€èµ·ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Shape = Square | Rectangle | Circle;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç°åœ¨æˆ‘ä»¬ä½¿ç”¨å¯è¾¨è¯†è”åˆ</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area</span>(<span class=\"params\">s: Shape</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.width * s.height;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> areaSquare = area(&#123; <span class=\"attr\">kind</span>: <span class=\"string\">&quot;square&quot;</span>, <span class=\"attr\">size</span>: <span class=\"number\">12</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">let</span> areaRectangle = area(&#123; <span class=\"attr\">kind</span>: <span class=\"string\">&quot;rectangle&quot;</span>, <span class=\"attr\">width</span>: <span class=\"number\">14</span>, <span class=\"attr\">height</span>: <span class=\"number\">13</span> &#125;);</span><br><span class=\"line\"><span class=\"keyword\">let</span> areaCircle = area(&#123; <span class=\"attr\">kind</span>: <span class=\"string\">&quot;circle&quot;</span>, <span class=\"attr\">radius</span>: <span class=\"number\">5</span> &#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(areaSquare, areaRectangle, areaCircle);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-16-å®Œæ•´æ€§æ£€æŸ¥\"><a href=\"#11-16-å®Œæ•´æ€§æ£€æŸ¥\" class=\"headerlink\" title=\"11.16 å®Œæ•´æ€§æ£€æŸ¥\"></a>11.16 å®Œæ•´æ€§æ£€æŸ¥</h3><blockquote>\n<p>å½“æ²¡æœ‰æ¶µç›–æ‰€æœ‰ å¯è¾¨è¯†è”åˆ çš„å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬æƒ³è®©ç¼–è¯‘å™¨å¯ä»¥é€šçŸ¥æˆ‘ä»¬ã€‚æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ äº† <code>Triangle</code> å’Œ <code>Shape</code>ï¼Œæˆ‘ä»¬åŒæ—¶è¿˜éœ€è¦æ›´æ–° <code>area</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Square &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;square&quot;</span>;</span><br><span class=\"line\">  size: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Rectangle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;rectangle&quot;</span>;</span><br><span class=\"line\">  width: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  height: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Circle &#123;</span><br><span class=\"line\">  kind: <span class=\"string\">&quot;circle&quot;</span>;</span><br><span class=\"line\">  radius: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// interface Triangle &#123; kind: &quot;triangle&quot;, bottom: number, height: number &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Shape = Square | Rectangle | Circle;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area</span>(<span class=\"params\">s: Shape</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.width * s.height;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// should error here - we didn&#x27;t handle case &quot;triangle&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®ç°ã€‚</li>\n</ul>\n<ol>\n<li>é¦–å…ˆæ˜¯å¯ç”¨ <code>--strictNullChecks</code> å¹¶ä¸”æŒ‡å®šä¸€ä¸ªè¿”å›å€¼ç±»å‹:</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area1</span>(<span class=\"params\">s: Shape</span>): <span class=\"title\">number</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.height * s.width;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› ä¸º <code>switch</code> æ²¡æœ‰åŒ…å«æ‰€æœ‰æƒ…å†µï¼Œæ‰€ä»¥ <code>TypeScript</code> è®¤ä¸ºè¿™ä¸ªå‡½æ•°æœ‰æ—¶å€™ä¼šè¿”å› <code>undefined</code>ã€‚å¦‚æœä½ æ˜ç¡®åœ°æŒ‡å®šäº†è¿”å›å€¼ç±»å‹ä¸º <code>number</code>ï¼Œé‚£ä¹ˆä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå®é™…ä¸Šè¿”å›å€¼ç±»å‹ä¸º <code>number | undefined</code>ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨äº›å¾®å¦™ä¹‹å¤„ä¸” <code>--strictNullChecks</code> å¯¹æ—§ä»£ç æ”¯æŒä¸å¥½ã€‚</p>\n</blockquote>\n<ol start=\"2\">\n<li>ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨ <code>never</code> ç±»å‹ï¼Œç¼–è¯‘å™¨ç”¨å®ƒæ¥è¿›è¡Œå®Œæ•´æ€§æ£€æŸ¥</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">assertNever</span>(<span class=\"params\">x: <span class=\"built_in\">never</span></span>): <span class=\"title\">never</span> </span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;Unexpected object: &quot;</span> + x);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">area2</span>(<span class=\"params\">s: Shape</span>) </span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">switch</span> (s.kind) &#123;</span><br><span class=\"line\">     <span class=\"keyword\">case</span> <span class=\"string\">&quot;square&quot;</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> s.size * s.size;</span><br><span class=\"line\">     <span class=\"keyword\">case</span> <span class=\"string\">&quot;rectangle&quot;</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> s.width * s.height;</span><br><span class=\"line\">     <span class=\"keyword\">case</span> <span class=\"string\">&quot;circle&quot;</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> <span class=\"built_in\">Math</span>.PI * s.radius ** <span class=\"number\">2</span>;</span><br><span class=\"line\">     <span class=\"keyword\">default</span>:</span><br><span class=\"line\">         <span class=\"keyword\">return</span> assertNever(s); <span class=\"comment\">// error here if there are missing cases</span></span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œï¼Œ<code>assertNever</code> æ£€æŸ¥ <code>s</code> æ˜¯å¦ä¸º <code>never</code> ç±»å‹ - å³ä¸ºé™¤å»æ‰€æœ‰å¯èƒ½æƒ…å†µåå‰©ä¸‹çš„ç±»å‹ã€‚å¦‚æœä½ å¿˜è®°äº†æŸä¸ª <code>case</code>ï¼Œé‚£ä¹ˆ <code>s</code> å°†å…·æœ‰ä¸€ä¸ªçœŸå®çš„ç±»å‹å¹¶ä¸”ä½ ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚è¿™ç§æ–¹å¼éœ€è¦ä½ å®šä¹‰ä¸€ä¸ªé¢å¤–çš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨ä½ å¿˜è®°æŸä¸ª <code>case</code> çš„æ—¶å€™ä¹Ÿæ›´åŠ æ˜æ˜¾ã€‚</p>\n</blockquote>\n<h3 id=\"11-17-å¤šæ€çš„-this-ç±»å‹\"><a href=\"#11-17-å¤šæ€çš„-this-ç±»å‹\" class=\"headerlink\" title=\"11.17 å¤šæ€çš„ this ç±»å‹\"></a>11.17 å¤šæ€çš„ this ç±»å‹</h3><blockquote>\n<p>å¤šæ€çš„ <code>this</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯æŸä¸ªåŒ…å«ç±»æˆ–æ¥å£çš„å­ç±»å‹ã€‚è¿™è¢«ç§°ä½œæ˜¯ <code>F-bounded</code> å¤šæ€æ€§ã€‚å®ƒèƒ½å¾ˆå®¹æ˜“çš„è¡¨ç°è¿è´¯æ¥å£é—´çš„ç»§æ‰¿ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼Œåœ¨è®¡ç®—å™¨çš„ä¾‹å­é‡Œï¼Œåœ¨æ¯ä¸ªæ“ä½œä¹‹åéƒ½è¿”å› <code>this</code> ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BasicCalculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">protected</span> value: <span class=\"built_in\">number</span> = <span class=\"number\">0</span></span>)</span> &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> currentValue(): <span class=\"built_in\">number</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> add(operand: <span class=\"built_in\">number</span>): <span class=\"built_in\">this</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.value += operand;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> multiply(operand: <span class=\"built_in\">number</span>): <span class=\"built_in\">this</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.value *= operand;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//...other operations go here...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> v = <span class=\"keyword\">new</span> BasicCalculator(<span class=\"number\">2</span>).multiply(<span class=\"number\">5</span>).add(<span class=\"number\">1</span>).currentValue();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(v);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”±äºè¿™ä¸ªç±»ä½¿ç”¨äº† <code>this</code> ç±»å‹ï¼Œä½ å¯ä»¥ç»§æ‰¿å®ƒï¼Œæ–°çš„ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼Œä¸éœ€è¦åšä»»ä½•æ”¹å˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ScientificCalculator</span> <span class=\"keyword\">extends</span> <span class=\"title\">BasicCalculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">value = <span class=\"number\">0</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>(value);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">sin</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.value = <span class=\"built_in\">Math</span>.sin(<span class=\"built_in\">this</span>.value);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ... other operations go here ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> v1 = <span class=\"keyword\">new</span> ScientificCalculator(<span class=\"number\">2</span>).multiply(<span class=\"number\">5</span>).sin().add(<span class=\"number\">1</span>).currentValue();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(v1);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœæ²¡æœ‰ <code>this</code> ç±»å‹ï¼Œ<code>ScientificCalculator</code> å°±ä¸èƒ½å¤Ÿåœ¨ç»§æ‰¿ <code>BasicCalculator</code> çš„åŒæ—¶è¿˜ä¿æŒæ¥å£çš„è¿è´¯æ€§ã€‚<code>multiply</code> å°†ä¼šè¿”å› <code>BasicCalculator</code>ï¼Œå®ƒå¹¶æ²¡æœ‰ <code>sin</code> æ–¹æ³•ã€‚ç„¶è€Œï¼Œä½¿ç”¨ <code>this</code> ç±»å‹ï¼Œ<code>multiply</code> ä¼šè¿”å› <code>this</code>ï¼Œåœ¨è¿™é‡Œå°±æ˜¯ <code>ScientificCalculator</code>ã€‚</p>\n</blockquote>\n<h3 id=\"11-18-ç´¢å¼•ç±»å‹\"><a href=\"#11-18-ç´¢å¼•ç±»å‹\" class=\"headerlink\" title=\"11.18 ç´¢å¼•ç±»å‹\"></a>11.18 ç´¢å¼•ç±»å‹</h3><blockquote>\n<p>ä½¿ç”¨ç´¢å¼•ç±»å‹ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿæ£€æŸ¥ä½¿ç”¨äº†åŠ¨æ€å±æ€§åçš„ä»£ç ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¸è§çš„ <code>JavaScript</code> æ¨¡å¼æ˜¯ä»å¯¹è±¡ä¸­é€‰å–å±æ€§çš„å­é›†ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">js_pluck</span>(<span class=\"params\">o, names</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> names.map(<span class=\"function\"><span class=\"params\">n</span> =&gt;</span> o[n]);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢æ˜¯å¦‚ä½•åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨æ­¤å‡½æ•°ï¼Œé€šè¿‡ ç´¢å¼•ç±»å‹æŸ¥è¯¢å’Œ ç´¢å¼•è®¿é—® æ“ä½œç¬¦ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">pluck</span>&lt;<span class=\"title\">T</span>, <span class=\"title\">K</span> <span class=\"title\">extends</span> <span class=\"title\">keyof</span> <span class=\"title\">T</span>&gt;(<span class=\"params\">o: T, names: K[]</span>): <span class=\"title\">T</span>[<span class=\"title\">K</span>][] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> names.map(<span class=\"function\"><span class=\"params\">n</span> =&gt;</span> o[n]);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Person &#123;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  age: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> person: Person = &#123;</span><br><span class=\"line\">  name: <span class=\"string\">&quot;Jarid&quot;</span>,</span><br><span class=\"line\">  age: <span class=\"number\">35</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strings: <span class=\"built_in\">string</span>[] = pluck(person, [<span class=\"string\">&quot;name&quot;</span>]);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(strings);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ <code>name</code> æ˜¯å¦çœŸçš„æ˜¯ <code>Person</code> çš„ä¸€ä¸ªå±æ€§ã€‚æœ¬ä¾‹è¿˜å¼•å…¥äº†å‡ ä¸ªæ–°çš„ç±»å‹æ“ä½œç¬¦ã€‚</p>\n</blockquote>\n<h4 id=\"11-18-1-é¦–å…ˆæ˜¯-keyof-Tï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\"><a href=\"#11-18-1-é¦–å…ˆæ˜¯-keyof-Tï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\" class=\"headerlink\" title=\"11.18.1 é¦–å…ˆæ˜¯ keyof Tï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚\"></a>11.18.1 é¦–å…ˆæ˜¯ <code>keyof T</code>ï¼Œç´¢å¼•ç±»å‹æŸ¥è¯¢æ“ä½œç¬¦ã€‚</h4><blockquote>\n<p>å¯¹äºä»»ä½•ç±»å‹ <code>T</code> ï¼Œ<code>keyof T</code> çš„ç»“æœä¸º <code>T</code> ä¸Šå·²çŸ¥çš„å…¬å…±å±æ€§åçš„è”åˆã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> personProps: keyof Person; <span class=\"comment\">// &#x27;name&#x27; | &#x27;age&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>keyof Person</code> æ˜¯å®Œå…¨å¯ä»¥ä¸ <code>&#39;name&#39; \\| &#39;age&#39;</code> äº’ç›¸æ›¿æ¢çš„ã€‚ä¸åŒçš„æ˜¯å¦‚æœä½ æ·»åŠ äº†å…¶å®ƒçš„å±æ€§åˆ° <code>Person</code>, ä¾‹å¦‚ <code>address: string</code>ï¼Œé‚£ä¹ˆ<code>keyof Person</code> ä¼šè‡ªåŠ¨å˜ä¸º <code>&#39;name&#39; | &#39;age&#39; | &#39;address&#39;</code>ã€‚ä½ å¯ä»¥åƒ <code>pluck</code> å‡½æ•°è¿™ç±»ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ <code>keyof</code> ï¼Œå› ä¸ºåœ¨ä½¿ç”¨ä¹‹å‰ä½ å¹¶ä¸æ¸…æ¥šå¯èƒ½å‡ºç°çš„å±æ€§åã€‚ä½†ç¼–è¯‘å™¨ä¼šæ£€æŸ¥ä½ æ˜¯å¦ä¼ å…¥äº†æ­£ç¡®çš„å±æ€§åç»™ <code>pluck</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// pluck(person, [&#x27;age&#x27;, &#x27;unknown&#x27;]); // error, &#x27;unknown&#x27; is not in &#x27;name&#x27; | &#x27;age&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-18-2-ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯-T-K-ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\"><a href=\"#11-18-2-ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯-T-K-ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\" class=\"headerlink\" title=\"11.18.2 ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯ T[K], ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚\"></a>11.18.2 ç¬¬äºŒä¸ªæ“ä½œç¬¦æ˜¯ <code>T[K]</code>, ç´¢å¼•è®¿é—®æ“ä½œç¬¦ã€‚</h4><blockquote>\n<p>åœ¨è¿™é‡Œï¼Œç±»å‹è¯­æ³•ååº”äº†è¡¨è¾¾å¼è¯­æ³•ã€‚è¿™æ„å‘³ç€ <code>person[&#39;name&#39;]</code> å…·æœ‰ç±»å‹ <code>Person[&#39;name&#39;]</code> â€“ åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œåˆ™ä¸º <code>string</code> ç±»å‹ã€‚ç„¶è€Œï¼Œå°±åƒç´¢å¼•ç±»å‹æŸ¥è¯¢ä¸€æ ·ï¼Œä½ å¯ä»¥åœ¨æ™®é€šçš„ä¸Šä¸‹æ–‡é‡Œä½¿ç”¨ <code>T[K]</code>ï¼Œè¿™æ­£æ˜¯å®ƒçš„å¼ºå¤§æ‰€åœ¨ã€‚ä½ åªè¦ç¡®ä¿ç±»å‹å˜é‡ <code>K extends keyof T</code> å°±å¯ä»¥äº†ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ä¸‹é¢ <code>getProperty</code> å‡½æ•°çš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getProperty</span>&lt;<span class=\"title\">T</span>, <span class=\"title\">K</span> <span class=\"title\">extends</span> <span class=\"title\">keyof</span> <span class=\"title\">T</span>&gt;(<span class=\"params\">o: T, name: K</span>): <span class=\"title\">T</span>[<span class=\"title\">K</span>] </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> o[name]; <span class=\"comment\">// o[name] is of type T[K]</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>getProperty</code> é‡Œçš„ <code>o: T</code> å’Œ <code>name: K</code>ï¼Œæ„å‘³ç€ <code>o[name]: T[K]</code>ã€‚å½“ä½ è¿”å› <code>T[K]</code> çš„ç»“æœï¼Œ</p>\n</blockquote>\n<blockquote>\n<p>ç¼–è¯‘å™¨ä¼šæ˜¯å®ä¾‹åŒ–é”®çš„çœŸå®ç±»å‹ï¼Œå› æ­¤ <code>getProperty</code> çš„è¿”å›å€¼ç±»å‹ä¼šéšç€ä½ éœ€è¦çš„å±æ€§æ”¹å˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> _name: <span class=\"built_in\">string</span> = getProperty(person, <span class=\"string\">&quot;name&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> _age: <span class=\"built_in\">number</span> = getProperty(person, <span class=\"string\">&quot;age&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// let unknown = getProperty(person, &quot;unknown&quot;); // error, &#x27;unknown&#x27; is not in &#x27;name&#x27; | &#x27;age&#x27;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(_name, <span class=\"string\">&quot; &quot;</span>, _age);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-19-ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\"><a href=\"#11-19-ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\" class=\"headerlink\" title=\"11.19 ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å\"></a>11.19 ç´¢å¼•ç±»å‹å’Œå­—ç¬¦ä¸²ç´¢å¼•ç­¾å</h3><blockquote>\n<p><code>keyof</code> å’Œ <code>T[K]</code> ä¸å­—ç¬¦ä¸²ç´¢å¼•ç­¾åè¿›è¡Œäº¤äº’ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²ç´¢å¼•ç­¾åçš„ç±»å‹ï¼Œé‚£ä¹ˆ <code>keyof T</code> ä¼šæ˜¯ <code>string</code>ã€‚å¹¶ä¸” <code>T[string]</code> ä¸ºç´¢å¼•ç­¾åçš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Dictionary&lt;T&gt; &#123;</span><br><span class=\"line\">  [key: <span class=\"built_in\">string</span>]: T;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> keys: keyof Dictionary&lt;<span class=\"built_in\">number</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> value: Dictionary&lt;<span class=\"built_in\">number</span>&gt;[<span class=\"string\">&quot;foo&quot;</span>]; <span class=\"comment\">// number</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-20-æ˜ å°„ç±»å‹\"><a href=\"#11-20-æ˜ å°„ç±»å‹\" class=\"headerlink\" title=\"11.20 æ˜ å°„ç±»å‹\"></a>11.20 æ˜ å°„ç±»å‹</h3><ul>\n<li>ä¸€ä¸ªå¸¸è§çš„ä»»åŠ¡æ˜¯å°†ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹æ¯ä¸ªå±æ€§éƒ½å˜ä¸ºå¯é€‰çš„ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PersonPartial &#123;</span><br><span class=\"line\">  name?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  age?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ–è€…æˆ‘ä»¬åªæƒ³è¦ä¸€ä¸ªåªè¯»ç‰ˆæœ¬</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PersonReadonly &#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> age: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™åœ¨ <code>JavaScript</code> é‡Œç»å¸¸å‡ºç°ã€‚<code>TypeScript</code> æä¾›äº†ä»æ—§ç±»å‹ä¸­åˆ›å»ºæ–°ç±»å‹çš„ä¸€ç§æ–¹å¼ <code>--</code> æ˜ å°„ç±»å‹ã€‚åœ¨æ˜ å°„ç±»å‹é‡Œï¼Œæ–°ç±»å‹ä»¥ç›¸åŒçš„å½¢å¼å»è½¬æ¢æ—§ç±»å‹é‡Œæ¯ä¸ªå±æ€§ã€‚å‡å¦‚ï¼Œä½ å¯ä»¥ä»¤æ¯ä¸ªå±æ€§æˆä¸º <code>readonly</code> ç±»å‹æˆ–å¯é€‰çš„ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Readonly&lt;T&gt; = &#123;</span><br><span class=\"line\">  <span class=\"keyword\">readonly</span> [P <span class=\"keyword\">in</span> keyof T]: T[P];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Partial&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>åƒä¸‹é¢è¿™æ ·ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Person &#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">type</span> PersonPartial = Partial;</span><br><span class=\"line\"><span class=\"keyword\">type</span> PersonReadonly = Readonly;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªè¯­æ³•æè¿°çš„æ˜¯ç±»å‹è€Œéæˆå‘˜ã€‚è‹¥æƒ³æ·»åŠ é¢å¤–çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ äº¤å‰ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>è¿™æ ·ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> PartialWithNewMember&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">&#125; &amp; &#123; <span class=\"attr\">newMember</span>: <span class=\"built_in\">boolean</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸è¦è¿™æ ·ä½¿ç”¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> PartialWithNewMember&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]?: T[P];</span><br><span class=\"line\">  newMember: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢æ¥çœ‹çœ‹æœ€ç®€å•çš„æ˜ å°„ç±»å‹å’Œå®ƒçš„ç»„æˆéƒ¨åˆ†</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Keys = <span class=\"string\">&quot;option1&quot;</span> | <span class=\"string\">&quot;option2&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Flags = &#123; [K <span class=\"keyword\">in</span> Keys]: <span class=\"built_in\">boolean</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒçš„è¯­æ³•ä¸ç´¢å¼•ç­¾åçš„è¯­æ³•ç±»å‹ï¼Œå†…éƒ¨ä½¿ç”¨äº† <code>for...in</code>ã€‚å…·æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>\n</blockquote>\n<ol>\n<li>ç±»å‹å˜é‡ <code>K</code>ï¼Œå®ƒä¼šä¾æ¬¡ç»‘å®šåˆ°æ¯ä¸ªå±æ€§ã€‚</li>\n<li>å­—ç¬¦ä¸²å­—é¢é‡è”åˆçš„ <code>Keys</code>ï¼Œå®ƒåŒ…å«äº†è¦è¿­ä»£çš„å±æ€§åçš„é›†åˆã€‚</li>\n<li>å±æ€§çš„ç»“æœç±»å‹ã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨ä¸Šé¢è¿™ä¸ªç®€å•çš„ä¾‹å­é‡Œï¼Œ<code>Keys</code> æ˜¯ç¡¬ç¼–ç çš„å±æ€§åˆ—è¡¨å¹¶ä¸”å±æ€§ç±»å‹æ°¸è¿œæ˜¯ <code>boolean</code>ï¼Œå› æ­¤è¿™ä¸ªæ˜ å°„ç±»å‹</p>\n</blockquote>\n<ul>\n<li>ç­‰åŒäºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> _FLags = &#123;</span><br><span class=\"line\">  option1: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  option2: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨çœŸæ­£çš„åº”ç”¨é‡Œï¼Œå¯èƒ½ä¸åŒäºä¸Šé¢çš„ <code>Readonly</code> æˆ– <code>Partial</code>ã€‚å®ƒä»¬ä¼šåŸºäºä¸€äº›å·²å­˜åœ¨çš„ç±»å‹ï¼Œä¸”æŒ‰ç…§ä¸€å®šçš„æ–¹å¼è½¬æ¢å­—æ®µã€‚è¿™å°±æ˜¯ <code>keyof</code> å’Œ <code>ç´¢å¼•è®¿é—®ç±»å‹</code> è¦åšçš„äº‹æƒ…ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> NullablePerson = &#123; [P <span class=\"keyword\">in</span> keyof Person]: Person[P] | <span class=\"literal\">null</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> PartialPerson = &#123; [P <span class=\"keyword\">in</span> keyof Person]?: Person[P] &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†å®ƒæ›´æœ‰ç”¨çš„åœ°æ–¹æ˜¯å¯ä»¥æœ‰ä¸€äº›é€šç”¨ç‰ˆæœ¬ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Nullable&lt;T&gt; = &#123; [P <span class=\"keyword\">in</span> keyof T]: T[P] | <span class=\"literal\">null</span> &#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Partial1&lt;T&gt; = &#123; [P <span class=\"keyword\">in</span> keyof T]?: T[P] &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨è¿™äº›ä¾‹å­é‡Œï¼Œå±æ€§åˆ—è¡¨æ˜¯ <code>keyof T</code> ä¸”ç»“æœç±»å‹æ˜¯ <code>T[P]</code> çš„å˜ä½“ã€‚è¿™æ˜¯ä½¿ç”¨é€šç”¨æ˜ å°„ç±»å‹çš„ä¸€ä¸ªå¥½æ¨¡ç‰ˆã€‚å› ä¸ºè¿™ç±»è½¬æ¢æ˜¯åŒæ€çš„ï¼Œæ˜ å°„åªä½œç”¨äº <code>T</code> çš„å±æ€§è€Œæ²¡æœ‰å…¶å®ƒçš„ã€‚ç¼–è¯‘å™¨çŸ¥é“åœ¨æ·»åŠ ä»»ä½•æ–°å±æ€§ä¹‹å‰å¯ä»¥æ‹·è´æ‰€æœ‰å­˜åœ¨çš„å±æ€§ä¿®é¥°ç¬¦ã€‚å‡å¦‚ï¼Œå‡è®¾ <code>Person.name</code> æ˜¯åªè¯»çš„ï¼Œé‚£ä¹ˆ <code>Partial1&lt;Person&gt;.name</code> ä¹Ÿå°†æ˜¯åªè¯»çš„ä¸”ä¸ºå¯é€‰çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼Œ<code>T[P]</code> è¢«åŒ…è£…åœ¨ <code>Proxy&lt;T&gt;</code> ç±»é‡Œï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> <span class=\"built_in\">Proxy</span>&lt;T&gt; = &#123;</span><br><span class=\"line\">  get(): T;</span><br><span class=\"line\">  set(value: T): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Proxify&lt;T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> keyof T]: <span class=\"built_in\">Proxy</span>&lt;T[P]&gt;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">proxify</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">o: T</span>): <span class=\"title\">Proxify</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...wrap proxies</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> proxyProps = proxify(props);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>Readonly&lt;T&gt;</code> å’Œ <code>Partial&lt;T&gt;</code> ç”¨å¤„ä¸å°ï¼Œå› æ­¤å®ƒä»¬äº <code>pick</code> å’Œ <code>Record</code> ä¸€åŒè¢«åŒ…å«è¿›äº† <code>TypeScript</code> çš„æ ‡å‡†åº“é‡Œï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Pick&lt;T, K <span class=\"keyword\">extends</span> keyof T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T[P];</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"keyword\">type</span> Record&lt;K <span class=\"keyword\">extends</span> keyof <span class=\"built_in\">any</span>, T&gt; = &#123;</span><br><span class=\"line\">  [P <span class=\"keyword\">in</span> K]: T;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Readonly</code>, <code>Partial</code> å’Œ <code>Pick</code> æ˜¯åŒæ€çš„ï¼Œä½† <code>Record</code> ä¸æ˜¯ã€‚å› ä¸º <code>Record</code> å¹¶ä¸éœ€è¦è¾“å…¥ç±»å‹æ¥æ‹·è´å±æ€§ï¼Œæ‰€ä»¥å®ƒä¸å±äºåŒæ€ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> ThreeStringProps = Record&lt;<span class=\"string\">&quot;prop1&quot;</span> | <span class=\"string\">&quot;prop2&quot;</span> | <span class=\"string\">&quot;prop3&quot;</span>, <span class=\"built_in\">string</span>&gt;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>éåŒæ€ç±»å‹æœ¬è´¨ä¸Šä¼šåˆ›å»ºæ–°çš„å±æ€§ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šä»å®ƒå¤„æ‹·è´å±æ€§ä¿®é¥°ç¬¦ã€‚</p>\n</blockquote>\n<h3 id=\"11-21-ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\"><a href=\"#11-21-ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\" class=\"headerlink\" title=\"11.21 ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­\"></a>11.21 ç”±æ˜ å°„ç±»å‹è¿›è¡Œåˆ¤æ–­</h3><blockquote>\n<p>ç°åœ¨ä½ äº†è§£äº†å¦‚ä½•åŒ…è£…ä¸€ä¸ªç±»å‹çš„å±æ€§ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•æ‹†åŒ…ã€‚å…¶å®è¿™ä¹Ÿéå¸¸å®¹æ˜“ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Proxify&lt;T&gt; = &#123;</span><br><span class=\"line\">  get(): T;</span><br><span class=\"line\">  set(value: T): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">unproxify</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">t: Proxify&lt;T&gt;</span>): <span class=\"title\">T</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = &#123;&#125; <span class=\"keyword\">as</span> T;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> k <span class=\"keyword\">in</span> t) &#123;</span><br><span class=\"line\">    result[k] = t[k].get();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// let originalProps = unproxify(proxyProps);</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„è¿™ä¸ªæ‹†åŒ…æ¨æ–­åªé€‚ç”¨äºåŒæ€çš„æ˜ å°„ç±»å‹ã€‚å¦‚æœæ˜ å°„ç±»å‹ä¸æ˜¯åŒæ€çš„ï¼Œé‚£ä¹ˆéœ€è¦ç»™æ‹†åŒ…å‡½æ•°ä¸€ä¸ªæ˜ç¡®çš„ç±»å‹å‚æ•°ã€‚</p>\n</blockquote>\n<h3 id=\"11-22-æœ‰æ¡ä»¶ç±»å‹\"><a href=\"#11-22-æœ‰æ¡ä»¶ç±»å‹\" class=\"headerlink\" title=\"11.22 æœ‰æ¡ä»¶ç±»å‹\"></a>11.22 æœ‰æ¡ä»¶ç±»å‹</h3><blockquote>\n<p><code>TypeScript 2.8</code> å¼•å…¥äº†æœ‰æ¡ä»¶ç±»å‹ï¼Œå®ƒèƒ½å¤Ÿè¡¨ç¤ºéç»Ÿä¸€çš„ç±»å‹ã€‚æœ‰æ¡ä»¶çš„ç±»å‹ä¼šä»¥ä¸€ä¸ªæ¡ä»¶è¡¨è¾¾å¼è¿›è¡Œç±»å‹å…³ç³»æ£€æµ‹ï¼Œä»è€Œåœ¨ä¸¤ç§ç±»å‹ä¸­é€‰æ‹©å…¶ä¸€ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">T <span class=\"keyword\">extends</span> U ? X : Y</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢çš„ç±»å‹æ„æ€æ˜¯ï¼šè‹¥ <code>T</code> èƒ½å¤Ÿèµ‹å€¼ç»™ <code>U</code>ï¼Œé‚£ä¹ˆç±»å‹æ˜¯ <code>X</code>ï¼Œå¦åˆ™ä¸º <code>Y</code></p>\n</blockquote>\n<blockquote>\n<p>æœ‰æ¡ä»¶çš„ç±»å‹ <code>T extends U ? X : Y</code> æˆ–è€…è§£æä¸º <code>X</code>ï¼Œæˆ–è€…è§£æä¸º <code>Y</code>ï¼Œå†æˆ–è€…å»¶è¿Ÿè§£æï¼Œå› ä¸ºå®ƒå¯èƒ½ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªç±»å‹å˜é‡ã€‚è‹¥ <code>T</code> æˆ– <code>U</code> åŒ…å«ç±»å‹å‚æ•°ï¼Œé‚£ä¹ˆæ˜¯å¦è§£æä¸º <code>X</code> æˆ– <code>Y</code> æˆ–æ¨è¿Ÿï¼Œå–å†³äºç±»å‹ç³»ç»Ÿæ˜¯å¦æœ‰è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç¡®å®š <code>T</code> æ€»æ˜¯å¯ä»¥èµ‹å€¼ç»™ <code>U</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€äº›ç±»å‹å¯ä»¥è¢«ç«‹å³è§£æçš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">boolean</span>&gt;(<span class=\"params\">x: T</span>): <span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">true</span> ? <span class=\"title\">string</span> : <span class=\"title\">number</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Type is &#x27;string&#x27; | &#x27;number&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> x = f(<span class=\"built_in\">Math</span>.random() &lt; <span class=\"number\">0.5</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦å¤–ä¸€ä¸ªä¾‹å­æ¶‰åŠ <code>TypeName</code> ç±»å‹åˆ«åï¼Œå®ƒä½¿ç”¨äº†åµŒå¥—äº†æœ‰æ¡ä»¶ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> TypeName&lt;T&gt; = T <span class=\"keyword\">extends</span> <span class=\"built_in\">string</span> ? <span class=\"string\">&quot;string&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"built_in\">number</span> ? <span class=\"string\">&quot;number&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"built_in\">boolean</span> ? <span class=\"string\">&quot;boolean&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"literal\">undefined</span> ? <span class=\"string\">&quot;undefined&quot;</span> : T <span class=\"keyword\">extends</span> <span class=\"built_in\">Function</span> ? <span class=\"string\">&quot;function&quot;</span> : <span class=\"string\">&quot;object&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T0 = TypeName&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// &quot;string&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T1 = TypeName&lt;<span class=\"string\">&quot;a&quot;</span>&gt;; <span class=\"comment\">// &quot;string&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T2 = TypeName&lt;<span class=\"literal\">true</span>&gt;; <span class=\"comment\">// &quot;boolean&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T3 = TypeName&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>&gt;; <span class=\"comment\">// &quot;function&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T4 = TypeName&lt;<span class=\"built_in\">string</span>[]&gt;; <span class=\"comment\">// &quot;object&quot;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€ä¸ªæœ‰æ¡ä»¶ç±»å‹è¢«æ¨è¿Ÿè§£æçš„ä¾‹å­</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Foo &#123;</span><br><span class=\"line\">  propA: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  propB: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">x: T</span>): <span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">Foo</span> ? <span class=\"title\">string</span> : <span class=\"title\">number</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">foo</span>&lt;<span class=\"title\">U</span>&gt;(<span class=\"params\">x: U</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// Has type &#x27;U extends Foo ? string : number&#x27;</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> a = f(x);</span><br><span class=\"line\">  <span class=\"comment\">// This assignment is allowed though!</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> b: <span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> = a;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œï¼Œ<code>a</code> å˜é‡å«æœ‰æœªç¡®å®šçš„æœ‰æ¡ä»¶ç±»å‹ã€‚å½“æœ‰å¦ä¸€æ®µä»£ç è°ƒç”¨ <code>foo</code>ï¼Œå®ƒä¼šç”¨å…¶å®ƒç±»å‹æ›¿æ¢ <code>U</code>ï¼Œ<code>TypeScript</code> å°†é‡æ–°è®¡ç®—æœ‰æ¡ä»¶ç±»å‹ï¼Œå†³å®šå®ƒæ˜¯å¦å¯ä»¥é€‰æ‹©ä¸€ä¸ªåˆ†æ”¯ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†æœ‰æ¡ä»¶ç±»å‹èµ‹å€¼ç»™å…¶å®ƒç±»å‹ï¼Œåªè¦æœ‰æ¡ä»¶ç±»å‹çš„æ¯ä¸ªåˆ†æ”¯ï¼Œéƒ½å¯ä»¥èµ‹å€¼ç»™ç›®æ ‡ç±»å‹ã€‚å› æ­¤åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å°† <code>U extends Foo ? string : number</code> èµ‹å€¼ç»™ <code>string | number</code>ï¼Œå› ä¸ºä¸ç®¡è¿™ä¸ªæœ‰æ¡ä»¶ç±»å‹æœ€ç»ˆç»“æœæ˜¯ä»€ä¹ˆï¼Œå®ƒåªèƒ½æ˜¯ <code>string | number</code>ã€‚</p>\n</blockquote>\n<h3 id=\"11-23-åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\"><a href=\"#11-23-åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\" class=\"headerlink\" title=\"11.23 åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹\"></a>11.23 åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹</h3><blockquote>\n<p>å¦‚æœæœ‰æ¡ä»¶ç±»å‹é‡Œå¾…æ£€æŸ¥çš„ç±»å‹æ˜¯ <code>naked type parameter</code> ï¼Œé‚£ä¹ˆå®ƒä¹Ÿè¢«ç§°ä¸ºâ€åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹â€ã€‚åˆ†å¸ƒå¼æœ‰æ¡ä»¶ç±»å‹åœ¨å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨åˆ†å‘æˆè”åˆç±»å‹ã€‚ä¾‹å¦‚ï¼šå®ä¾‹åŒ– <code>T extends U ? X : Y</code>ï¼Œ<code>T</code> çš„ç±»å‹ä¸º <code>A | B | C</code>ï¼Œä¼šè¢«è§£æä¸º <code>(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š```typescript<br>type TypeName<T> =<br>T extends string ? â€œstringâ€ :<br>T extends number ? â€œnumberâ€ :<br>T extends boolean ? â€œbooleanâ€ :<br>T extends undefined ? â€œundefinedâ€ :<br>T extends Function ? â€œfunctionâ€ : â€œobjectâ€;<br>type T10 = TypeName&lt;string | (() =&gt; void)&gt;; // â€œstringâ€ | â€œfunctionâ€<br>type T11 = TypeName&lt;string | string[] | undefined&gt;; // â€œstringâ€ | â€œobjectâ€ | â€œundefinedâ€<br>type T12 = TypeName&lt;string[] | number[]&gt;; // â€œobjectâ€</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt;  åœ¨ &#96;T extends U ? X : Y&#96; çš„å®ä¾‹åŒ–é‡Œï¼Œå¯¹ &#96;T&#96; çš„å¼•ç”¨è¢«è§£æä¸ºè”åˆç±»å‹çš„ä¸€éƒ¨åˆ†(æ¯”å¦‚ï¼Œ&#96;T&#96; æŒ‡å‘æŸä¸€å•ä¸ªéƒ¨åˆ†ï¼Œåœ¨æœ‰æ¡ä»¶ç±»å‹åˆ†å¸ƒåˆ°è”åˆç±»å‹ä¹‹å)ã€‚æ­¤å¤–ï¼Œåœ¨ &#96;X&#96; å†…å¯¹ &#96;T&#96; çš„å¼•ç”¨æœ‰ä¸€ä¸ªé™„åŠ çš„ç±»å‹å‚æ•°çº¦æŸ &#96;U&#96;(ä¾‹å¦‚ï¼Œ&#96;T&#96; è¢«å½“æˆåœ¨ &#96;X&#96; å†…å¯èµ‹å€¼ç»™ &#96;U&#96;)ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">- ä¾‹å­ï¼š</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">type BoxedValue&lt;T&gt; &#x3D; &#123; value: T &#125;;</span><br><span class=\"line\">type BoxedArray&lt;T&gt; &#x3D; &#123; array: T[] &#125;;</span><br><span class=\"line\">type Boxed&lt;T&gt; &#x3D; T extends any[] ? BoxedArray&lt;T[number]&gt; : BoxedValue&lt;T&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">type T20 &#x3D; Boxed&lt;string&gt;; &#x2F;&#x2F; BoxedValue&lt;string&gt;;</span><br><span class=\"line\">type T21 &#x3D; Boxed&lt;number[]&gt;; &#x2F;&#x2F; BoxedArray&lt;number&gt;;</span><br><span class=\"line\">type T22 &#x3D; Boxed&lt;string | number[]&gt;; &#x2F;&#x2F; BoxedValue&lt;string&gt; | BoxedArray&lt;number&gt;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-23-1-æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\"><a href=\"#11-23-1-æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\" class=\"headerlink\" title=\"11.23.1 æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š\"></a>11.23.1 æœ‰æ¡ä»¶ç±»å‹çš„åˆ†å¸ƒå¼çš„å±æ€§å¯ä»¥æ–¹ä¾¿åœ°ç”¨æ¥è¿‡æ»¤è”åˆç±»å‹ï¼š</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Diff&lt;T, U&gt; = T <span class=\"keyword\">extends</span> U ? <span class=\"built_in\">never</span> : T; <span class=\"comment\">// Remove types from T that are assignable to U(ä» T ä¸­åˆ é™¤å¯åˆ†é…ç»™ U çš„ç±»å‹)</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> Filter&lt;T, U&gt; = T <span class=\"keyword\">extends</span> U ? T : <span class=\"built_in\">never</span>; <span class=\"comment\">// Remove types from T that are not assignable to U(ä» T ä¸­åˆ é™¤ä¸å¯èµ‹å€¼ç»™ U çš„ç±»å‹)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T30 = Diff&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;b&quot; | &quot;d&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T31 = Filter&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;a&quot; | &quot;c&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T32 = Diff&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T33 = Filter&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// () =&gt; void</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> _NonNullable&lt;T&gt; = Diff&lt;T, <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// Remove null and undefined from T</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T34 = _NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T35 = _NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">string</span>[] | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | string[]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">x: T, y: _NonNullable&lt;T&gt;</span>) </span>&#123;</span><br><span class=\"line\">  x = y; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">  <span class=\"comment\">// y = x ;// Error</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f2</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> <span class=\"title\">string</span> | <span class=\"title\">undefined</span>&gt;(<span class=\"params\">x: T, y: _NonNullable&lt;T&gt;</span>) </span>&#123;</span><br><span class=\"line\">  x = y; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">  <span class=\"comment\">// y = x; //Error</span></span><br><span class=\"line\">  <span class=\"comment\">// let s1: string = x; // Error</span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> s2: <span class=\"built_in\">string</span> = y; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-23-2-æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\"><a href=\"#11-23-2-æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\" class=\"headerlink\" title=\"11.23.2 æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨\"></a>11.23.2 æœ‰æ¡ä»¶ç±»å‹ä¸æ˜ å°„ç±»å‹ç»“åˆæ—¶ç‰¹åˆ«æœ‰ç”¨</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> FunctionPropertyNames&lt;T&gt; = &#123; [K <span class=\"keyword\">in</span> keyof T]: T[K] <span class=\"keyword\">extends</span> <span class=\"built_in\">Function</span> ? K : <span class=\"built_in\">never</span> &#125;[keyof T];</span><br><span class=\"line\"><span class=\"keyword\">type</span> FunctionProperties&lt;T&gt; = Pick&lt;T, FunctionPropertyNames&lt;T&gt;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> NonFunctionPropertyNames&lt;T&gt; = &#123; [K <span class=\"keyword\">in</span> keyof T]: T[K] <span class=\"keyword\">extends</span> <span class=\"built_in\">Function</span> ? <span class=\"built_in\">never</span> : K &#125;[keyof T];</span><br><span class=\"line\"><span class=\"keyword\">type</span> NonFunctionProperties&lt;T&gt; = Pick&lt;T, NonFunctionPropertyNames&lt;T&gt;&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Part &#123;</span><br><span class=\"line\">  id: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  name: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  subparts: Part[];</span><br><span class=\"line\">  updatePart(newName: <span class=\"built_in\">string</span>): <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T40 = FunctionPropertyNames&lt;Part&gt;; <span class=\"comment\">// &quot;updatePart&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T41 = NonFunctionPropertyNames&lt;Part&gt;; <span class=\"comment\">// &quot;id&quot; | &quot;name&quot; | &quot;subparts&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T42 = FunctionProperties&lt;Part&gt;; <span class=\"comment\">// &#123; updatePart(newName: string): void &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T43 = NonFunctionProperties&lt;Part&gt;; <span class=\"comment\">// &#123; id: number, name: string, suparts: Part[] &#125;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-23-3-ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\"><a href=\"#11-23-3-ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\" class=\"headerlink\" title=\"11.23.3 ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚\"></a>11.23.3 ä¸è”åˆç±»å‹å’Œå¯äº¤å‰ç±»å‹ç›¸ä¼¼ï¼Œæœ‰æ¡ä»¶ç±»å‹ä¸å…è®¸é€’å½’åœ°å¼•ç”¨è‡ªå·±ã€‚</h4><ul>\n<li>æ¯”å¦‚ä¸‹é¢çš„é”™è¯¯ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// type ElementType&lt;T&gt; = T extends any[] ? ElementType&lt;T[number]&gt;: T; // Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-24-æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\"><a href=\"#11-24-æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\" class=\"headerlink\" title=\"11.24 æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­\"></a>11.24 æœ‰æ¡ä»¶ç±»å‹ä¸­çš„ç±»å‹æ¨æ–­</h3><blockquote>\n<p>ç°åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ <code>extends</code> å­è¯­å¥ä¸­ï¼Œå…è®¸å‡ºç° <code>infer</code> å£°æ˜ï¼Œå®ƒä¼šå¼•å…¥ä¸€ä¸ªå¾…æ¨æ–­çš„ç±»å‹å˜é‡ã€‚è¿™ä¸ªæ¨æ–­çš„ç±»å‹å˜é‡å¯ä»¥åœ¨æœ‰æ¡ä»¶ç±»å‹çš„ <code>true</code> åˆ†æ”¯ä¸­è¢«å¼•ç”¨ã€‚å…è®¸å‡ºç°å¤šä¸ªåŒç±»å‹å˜é‡çš„ <code>infer</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¾‹å¦‚ï¼šä¸‹é¢ä»£ç ä¼šæå–å‡½æ•°ç±»å‹çš„è¿”å›å€¼</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> _ReturnType&lt;T&gt; = T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>[]) =&gt; infer R ? R : <span class=\"built_in\">any</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ‰æ¡ä»¶ç±»å‹ å¯ä»¥åµŒå¥—æ¥æ„æˆä¸€ç³»åˆ—çš„åŒ¹é…æ¨¡å¼ï¼ŒæŒ‰é¡ºåºè¿›è¡Œæ±‚å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Unpacked&lt;T&gt; = T <span class=\"keyword\">extends</span> (infer U)[] ? U : T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>[]) =&gt; infer U ? U : T <span class=\"keyword\">extends</span> <span class=\"built_in\">Promise</span>&lt;infer U&gt; ? U : T;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T0 = Unpacked&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T1 = Unpacked&lt;<span class=\"built_in\">string</span>[]&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T2 = Unpacked&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T3 = Unpacked&lt;<span class=\"built_in\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt;&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T4 = Unpacked&lt;<span class=\"built_in\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt;[]&gt;; <span class=\"comment\">// Promise&lt;string&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T5 = Unpacked&lt;Unpacked&lt;<span class=\"built_in\">Promise</span>&lt;<span class=\"built_in\">string</span>&gt;[]&gt;&gt;; <span class=\"comment\">// string</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸‹é¢çš„ä¾‹å­è§£é‡Šäº†åœ¨åå˜ä½ç½®ä¸Šï¼ŒåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºè”åˆç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Foo&lt;T&gt; = T <span class=\"keyword\">extends</span> &#123; <span class=\"attr\">a</span>: infer U; b: infer U &#125; ? U : <span class=\"built_in\">never</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> T10 = Foo&lt;&#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b: <span class=\"built_in\">string</span> &#125;&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T11 = Foo&lt;&#123; <span class=\"attr\">a</span>: <span class=\"built_in\">string</span>; b: <span class=\"built_in\">number</span> &#125;&gt;; <span class=\"comment\">// string | number</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç›¸ä¼¼åœ°ï¼Œåœ¨æŠ—å˜ä½ç½®ä¸ŠåŒä¸€ä¸ªç±»å‹å˜é‡çš„å¤šä¸ªå€™é€‰ç±»å‹ä¼šè¢«æ¨æ–­ä¸ºäº¤å‰ç±»å‹ï¼š</p>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> Bar&lt;T&gt; = T <span class=\"keyword\">extends</span> &#123; <span class=\"attr\">a</span>: <span class=\"function\">(<span class=\"params\">x: infer U</span>) =&gt;</span> <span class=\"built_in\">void</span>; b: <span class=\"function\">(<span class=\"params\">x: infer U</span>) =&gt;</span> <span class=\"built_in\">void</span> &#125; ? U : <span class=\"built_in\">never</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> T20 = Bar&lt;&#123; <span class=\"attr\">a</span>: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>; b: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span> &#125;&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T21 = Bar&lt;&#123; <span class=\"attr\">a</span>: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>; b: <span class=\"function\">(<span class=\"params\">x: <span class=\"built_in\">number</span></span>) =&gt;</span> <span class=\"built_in\">void</span> &#125;&gt;; <span class=\"comment\">// string &amp; number</span></span><br></pre></td></tr></table></figure>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&gt; å½“æ¨æ–­å…·æœ‰å¤šä¸ªè°ƒç”¨ç­¾å(ä¾‹å¦‚å‡½æ•°é‡è½½ç±»å‹)çš„ç±»å‹æ—¶ï¼Œç”¨æœ€åçš„ç­¾å(å¤§æ¦‚æ˜¯æœ€è‡ªç”±çš„åŒ…å«æ‰€æœ‰æƒ…å†µçš„ç­¾å) è¿›è¡Œæ¨æ–­ã€‚æ— æ³•æ ¹æ®å‚æ•°ç±»å‹åˆ—è¡¨æ¥è¿›è¡Œè§£æé‡è½½ã€‚</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">&#96;&#96;&#96;typescript</span><br><span class=\"line\">declare function foo(x: string): number;</span><br><span class=\"line\">declare function foo(x: number): string;</span><br><span class=\"line\">declare function foo(x: string | number): string | number;</span><br><span class=\"line\"></span><br><span class=\"line\">type T30 &#x3D; ReturnType&lt;typeof foo&gt;; &#x2F;&#x2F; string | number</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ— æ³•åœ¨æ­£å¸¸ç±»å‹å‚æ•°çš„çº¦æŸå­è¯­å¥ä¸­ä½¿ç”¨ <code>infer</code> å£°æ˜ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// type ReturnType1&lt;T extends (...args: any[]) =&gt; infer R&gt; = R; // Error</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½†æ˜¯ï¼Œå¯ä»¥è¿™æ ·è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œåœ¨çº¦æŸé‡Œåˆ æ‰ç±»å‹å˜é‡ï¼Œç”¨ æœ‰æ¡ä»¶ç±»å‹ æ¥æ›¿æ¢ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> AnyFunction = <span class=\"function\">(<span class=\"params\">...args: <span class=\"built_in\">any</span>[]</span>) =&gt;</span> <span class=\"built_in\">any</span>;</span><br><span class=\"line\"><span class=\"keyword\">type</span> ReturnType2&lt;T <span class=\"keyword\">extends</span> AnyFunction&gt; = T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>[]) =&gt; infer R ? R : <span class=\"built_in\">any</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®é™…ä¸Šï¼Œå°±æ˜¯ <code>ReturnType</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> __ReturnType&lt;T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>) =&gt; <span class=\"built_in\">any</span>&gt; = T <span class=\"keyword\">extends</span> (...args: <span class=\"built_in\">any</span>) =&gt; infer R ? R : <span class=\"built_in\">never</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"11-25-é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\"><a href=\"#11-25-é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\" class=\"headerlink\" title=\"11.25 é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹\"></a>11.25 é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹</h3><blockquote>\n<p><code>TypeScript 2.8</code> åœ¨ <code>lib.d.ts</code> é‡Œå¢åŠ äº†ä¸€äº›é¢„å®šä¹‰çš„æœ‰æ¡ä»¶ç±»å‹</p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>Exclude&lt;T, U&gt;</code> â€“ ä» <code>T</code> ä¸­å‰”é™¤å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹</li>\n<li><code>Extract&lt;T, U&gt;</code> â€“ æå– <code>T</code> ä¸­å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹</li>\n<li><code>NonNullable&lt;T&gt;</code> â€“ ä» <code>T</code> ä¸­å‰”é™¤ <code>null</code> å’Œ <code>undefined</code></li>\n<li><code>ReturnType&lt;T&gt;</code> â€“ è·å–å‡½æ•°è¿”å›å€¼ç±»å‹</li>\n<li><code>InstanceType&lt;T&gt;</code> â€“ è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹</li>\n</ol>\n</blockquote>\n<ul>\n<li><code>Example</code>:</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T00 = Exclude&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;b&quot; | &quot;d&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T01 = Extract&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;d&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;c&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;a&quot; | &quot;c&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T02 = Exclude&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// &quot;string&quot; | &quot;number&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T03 = Extract&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// () =&gt; void</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T04 = NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T05 = NonNullable&lt;(<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>) | <span class=\"built_in\">string</span>[] | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// (() =&gt; string) | string[]</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: s &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  x = <span class=\"number\">0</span>;</span><br><span class=\"line\">  y = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T10 = ReturnType&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T11 = ReturnType&lt;<span class=\"function\">(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>&gt;; <span class=\"comment\">// void</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T12 = ReturnType&lt;&lt;T&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// &#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T13 = ReturnType&lt;&lt;T <span class=\"keyword\">extends</span> U, U <span class=\"keyword\">extends</span> <span class=\"built_in\">number</span>[]&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// number[]</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T14 = ReturnType&lt;<span class=\"keyword\">typeof</span> f1&gt;; <span class=\"comment\">// &#123; a: number, b: string &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T15 = ReturnType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T16 = ReturnType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"comment\">// type T17 = ReturnType&lt;string&gt;; // Error</span></span><br><span class=\"line\"><span class=\"comment\">// type T18 = ReturnType&lt;Function&gt;; // Error</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> T20 = InstanceType&lt;<span class=\"keyword\">typeof</span> C&gt;; <span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T21 = InstanceType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T22 = InstanceType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"comment\">// type T23 = InstanceType&lt;string&gt;; // Error</span></span><br><span class=\"line\"><span class=\"comment\">// type T24 = InstanceType&lt;Function&gt;; // Error</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼š<code>Exclude</code> ç±»å‹æ˜¯å»ºè®®çš„ <code>Diff</code> ç±»å‹çš„ä¸€ç§å®ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>Exclude</code> è¿™ä¸ªåå­—æ˜¯ä¸ºäº†é¿å…ç ´åå·²ç»å®šä¹‰äº†çš„ <code>Diff</code> çš„ä»£ç ï¼Œå¹¶ä¸”æˆ‘ä»¬æ„Ÿè§‰è¿™ä¸ªåå­—èƒ½æ›´å¥½åœ°è¡¨è¾¾ç±»å‹çš„è¯­ä¹‰ã€‚æˆ‘ä»¬æ²¡æœ‰å¢åŠ  <code>Omit&lt;T, K&gt;</code> ç±»å‹ï¼Œå› ä¸ºå®ƒå¯ä»¥å¾ˆå®¹æ˜“çš„ç”¨ <code>Pick&lt;T, Exclude&lt;keyof T, K&gt;&gt;</code> æ¥è¡¨ç¤º</p>\n</blockquote>\n<h2 id=\"åäºŒã€å®ç”¨å·¥å…·ç±»å‹\"><a href=\"#åäºŒã€å®ç”¨å·¥å…·ç±»å‹\" class=\"headerlink\" title=\"åäºŒã€å®ç”¨å·¥å…·ç±»å‹\"></a>åäºŒã€å®ç”¨å·¥å…·ç±»å‹</h2><blockquote>\n<p><code>TypeScript</code> æä¾›ä¸€äº›å·¥å…·ç±»å‹æ¥å¸®åŠ©å¸¸è§çš„ç±»å‹è½¬æ¢ã€‚è¿™äº›ç±»å‹æ˜¯å…¨å±€å¯è§çš„ã€‚</p>\n</blockquote>\n<h3 id=\"12-1-Partial-å±€éƒ¨çš„\"><a href=\"#12-1-Partial-å±€éƒ¨çš„\" class=\"headerlink\" title=\"12.1 Partial å±€éƒ¨çš„\"></a>12.1 Partial å±€éƒ¨çš„</h3><blockquote>\n<p>æ„é€ ç±»å‹ <code>T</code>, å¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®æˆå¯é€‰çš„ï¼Œå®ƒçš„è¿”å›ç±»å‹è¡¨ç¤ºè¾“å…¥ç±»å‹çš„æ‰€æœ‰å­ç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PartialTodo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  description: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">updateTodo</span>(<span class=\"params\">todo: PartialTodo, fieldsToUpdate: Partial&lt;PartialTodo&gt;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; ...todo, ...fieldsToUpdate &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> partialTodo1 = &#123;</span><br><span class=\"line\">  title: <span class=\"string\">&quot;organize desk&quot;</span>,</span><br><span class=\"line\">  description: <span class=\"string\">&quot;clear clutter&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> partialTodo2 = updateTodo(partialTodo1, &#123;</span><br><span class=\"line\">  description: <span class=\"string\">&quot;throw out trash&quot;</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-2-Readonly-åªè¯»çš„\"><a href=\"#12-2-Readonly-åªè¯»çš„\" class=\"headerlink\" title=\"12.2 Readonly åªè¯»çš„\"></a>12.2 Readonly åªè¯»çš„</h3><blockquote>\n<p>æ„é€ ç±»å‹ T<strong>ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸º</strong> readonly<strong>ï¼Œä¹Ÿå°±æ˜¯è¯´æ„é€ å‡ºçš„ç±»å‹çš„å±æ€§ä¸èƒ½è¢«å†æ¬¡èµ‹å€¼</strong></p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> ReadonlyTodo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> readonlyTodo: Readonly&lt;ReadonlyTodo&gt; = &#123;</span><br><span class=\"line\">  title: <span class=\"string\">&quot;Delete inactive users&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">readonlyTodo.title = <span class=\"string\">&quot;Hello&quot;</span>; <span class=\"comment\">// Error: cannot reassign a readonly property</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Object.freeze</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">freeze</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">obj: T</span>): <span class=\"title\">Readonly</span>&lt;<span class=\"title\">T</span>&gt;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-3-Record-lt-T-K-gt-è®°å½•\"><a href=\"#12-3-Record-lt-T-K-gt-è®°å½•\" class=\"headerlink\" title=\"12.3 Record&lt;T, K&gt; è®°å½•\"></a>12.3 Record&lt;T, K&gt; è®°å½•</h3><blockquote>\n<p>æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹ä¸º <code>K</code>ï¼Œå±æ€§å€¼çš„ç±»å‹ä¸º <code>T</code>ã€‚è¿™ä¸ªå·¥å…·å¯ç”¨æ¥å°†æŸä¸ªç±»å‹çš„å±æ€§æ˜ å°„åˆ°å¦ä¸€ä¸ªç±»å‹ä¸Šã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PageInfo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> Page = <span class=\"string\">&quot;home&quot;</span> | <span class=\"string\">&quot;about&quot;</span> | <span class=\"string\">&quot;contact&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> x: Record&lt;Page, PageInfo&gt; = &#123;</span><br><span class=\"line\">  about: &#123; <span class=\"attr\">title</span>: <span class=\"string\">&quot;about&quot;</span> &#125;,</span><br><span class=\"line\">  contact: &#123; <span class=\"attr\">title</span>: <span class=\"string\">&quot;concat&quot;</span> &#125;,</span><br><span class=\"line\">  home: &#123; <span class=\"attr\">title</span>: <span class=\"string\">&quot;home&quot;</span> &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-4-Pick-lt-T-K-gt-æŒ‘é€‰\"><a href=\"#12-4-Pick-lt-T-K-gt-æŒ‘é€‰\" class=\"headerlink\" title=\"12.4 Pick&lt;T, K&gt; æŒ‘é€‰\"></a>12.4 Pick&lt;T, K&gt; æŒ‘é€‰</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­æŒ‘é€‰éƒ¨åˆ†å±æ€§ <code>K</code> æ¥æ„é€ ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> PickTodo &#123;</span><br><span class=\"line\">  title: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  description: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  completed: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> TodoPreview = Pick&lt;PickTodo, <span class=\"string\">&quot;title&quot;</span> | <span class=\"string\">&quot;completed&quot;</span>&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> pickTodo: TodoPreview = &#123;</span><br><span class=\"line\">  title: <span class=\"string\">&quot;Clean room&quot;</span>,</span><br><span class=\"line\">  completed: <span class=\"literal\">false</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-5-Exclude-lt-T-U-gt-å‰”é™¤\"><a href=\"#12-5-Exclude-lt-T-U-gt-å‰”é™¤\" class=\"headerlink\" title=\"12.5 Exclude&lt;T, U&gt; å‰”é™¤\"></a>12.5 Exclude&lt;T, U&gt; å‰”é™¤</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­å‰”é™¤æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„å±æ€§ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T0 = Exclude&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;a&quot;</span>&gt;; <span class=\"comment\">// &quot;b&quot; | &quot;c&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T1 = Exclude&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span>&gt;; <span class=\"comment\">// &quot;c&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T2 = Exclude&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// string | number</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-6-Extract-lt-T-U-gt-æå–\"><a href=\"#12-6-Extract-lt-T-U-gt-æå–\" class=\"headerlink\" title=\"12.6 Extract&lt;T, U&gt; æå–\"></a>12.6 Extract&lt;T, U&gt; æå–</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­æå–æ‰€æœ‰å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T01 = Extract&lt;<span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;b&quot;</span> | <span class=\"string\">&quot;c&quot;</span>, <span class=\"string\">&quot;a&quot;</span> | <span class=\"string\">&quot;f&quot;</span>&gt;; <span class=\"comment\">// &quot;a&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T02 = Extract&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | (<span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>), <span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// () =&gt; void</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-7-NonNullable\"><a href=\"#12-7-NonNullable\" class=\"headerlink\" title=\"12.7 NonNullable\"></a>12.7 NonNullable</h3><blockquote>\n<p>ä»ç±»å‹ <code>T</code> ä¸­å‰”é™¤ <code>null</code> å’Œ <code>undefined</code>ï¼Œç„¶åæ„é€ ä¸€ä¸ªç±»å‹</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">type</span> T10 = NonNullable&lt;<span class=\"built_in\">string</span> | <span class=\"built_in\">number</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string | number</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> T11 = NonNullable&lt;<span class=\"built_in\">string</span>[] | <span class=\"literal\">null</span> | <span class=\"literal\">undefined</span>&gt;; <span class=\"comment\">// string[]</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-8-ReturnType-è¿”å›å€¼ç±»å‹\"><a href=\"#12-8-ReturnType-è¿”å›å€¼ç±»å‹\" class=\"headerlink\" title=\"12.8 ReturnType è¿”å›å€¼ç±»å‹\"></a>12.8 ReturnType è¿”å›å€¼ç±»å‹</h3><blockquote>\n<p>ç”±å‡½æ•°ç±»å‹ <code>T</code> çš„è¿”å›å€¼ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f1</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span>, <span class=\"attr\">b</span>: s &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T0 = ReturnType&lt;<span class=\"function\">() =&gt;</span> <span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// string</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T1 = ReturnType&lt;<span class=\"function\">(<span class=\"params\">s: <span class=\"built_in\">string</span></span>) =&gt;</span> <span class=\"built_in\">void</span>&gt;; <span class=\"comment\">// void</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T2 = ReturnType&lt;&lt;T&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// &#123;&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T3 = ReturnType&lt;&lt;T <span class=\"keyword\">extends</span> U, U <span class=\"keyword\">extends</span> <span class=\"built_in\">number</span>[]&gt;<span class=\"function\">() =&gt;</span> T&gt;; <span class=\"comment\">// number[]</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T4 = ReturnType&lt;<span class=\"keyword\">typeof</span> f1&gt;; <span class=\"comment\">// &#123; a: number, b: string &#125;</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T5 = ReturnType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T6 = ReturnType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T7 = ReturnType&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// Error</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T8 = ReturnType&lt;<span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-9-InstanceType-æ„é€ å‡½æ•°-å®ä¾‹ç±»å‹\"><a href=\"#12-9-InstanceType-æ„é€ å‡½æ•°-å®ä¾‹ç±»å‹\" class=\"headerlink\" title=\"12.9 InstanceType æ„é€ å‡½æ•° å®ä¾‹ç±»å‹\"></a>12.9 InstanceType æ„é€ å‡½æ•° å®ä¾‹ç±»å‹</h3><blockquote>\n<p>ç”±æ„é€ å‡½æ•°ç±»å‹ <code>T</code> çš„å®ä¾‹ç±»å‹æ„é€ ä¸€ä¸ªç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  x = <span class=\"number\">0</span>;</span><br><span class=\"line\">  y = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T01 = InstanceType&lt;<span class=\"keyword\">typeof</span> C&gt;; <span class=\"comment\">// C</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T02 = InstanceType&lt;<span class=\"built_in\">any</span>&gt;; <span class=\"comment\">// any</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T03 = InstanceType&lt;<span class=\"built_in\">never</span>&gt;; <span class=\"comment\">// never</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T04 = InstanceType&lt;<span class=\"built_in\">string</span>&gt;; <span class=\"comment\">// Error</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> _T05 = InstanceType&lt;<span class=\"built_in\">Function</span>&gt;; <span class=\"comment\">// Error</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-10-Required\"><a href=\"#12-10-Required\" class=\"headerlink\" title=\"12.10 Required\"></a>12.10 Required</h3><blockquote>\n<p>æ„é€ ä¸€ä¸ªç±»å‹ï¼Œä½¿ç±»å‹ <code>T</code> çš„æ‰€æœ‰å±æ€§ä¸º <code>required</code></p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Props &#123;</span><br><span class=\"line\">  a?: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  b?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj: Props = &#123; <span class=\"attr\">a</span>: <span class=\"number\">5</span> &#125;; <span class=\"comment\">// Ok</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> obj2: Required&lt;Props&gt; = &#123; <span class=\"attr\">a</span>: <span class=\"number\">5</span> &#125;; <span class=\"comment\">// Error, property &#x27;b&#x27; missing</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"12-11-ThisType-this\"><a href=\"#12-11-ThisType-this\" class=\"headerlink\" title=\"12.11 ThisType this\"></a>12.11 ThisType this</h3><blockquote>\n<p>è¿™ä¸ªå·¥å…·ä¸ä¼šè¿”å›ä¸€ä¸ªè½¬æ¢åçš„ç±»å‹ã€‚å®ƒä½œä¸ºä¸Šä¸‹æ–‡çš„ <code>this</code> ç±»å‹çš„ä¸€ä¸ªæ ‡è®°ã€‚<br>æ³¨æ„ï¼šè‹¥æƒ³è¦ä½¿ç”¨æ­¤ç±»å‹ï¼Œå¿…é¡»å¯ç”¨ <code>--noImplicitThis</code></p>\n</blockquote>\n<ul>\n<li>ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Compile with --noImplicitThis</span></span><br><span class=\"line\"><span class=\"keyword\">type</span> ObjectDescriptor&lt;D, M&gt; = &#123;</span><br><span class=\"line\">  data?: D;</span><br><span class=\"line\">  methods?: M &amp; ThisType&lt;D &amp; M&gt;; <span class=\"comment\">// Type of &#x27;this&#x27; in methods is D &amp; M</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">makeObject</span>&lt;<span class=\"title\">D</span>, <span class=\"title\">M</span>&gt;(<span class=\"params\">desc: ObjectDescriptor&lt;D, M&gt;</span>): <span class=\"title\">D</span> &amp; <span class=\"title\">M</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data: <span class=\"built_in\">object</span> = desc.data || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> methods: <span class=\"built_in\">object</span> = desc.methods || &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123; ...data, ...methods &#125; <span class=\"keyword\">as</span> D &amp; M;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> _obj = makeObject(&#123;</span><br><span class=\"line\">  data: &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span> &#125;,</span><br><span class=\"line\">  methods: &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">moveBy</span>(<span class=\"params\">dx: <span class=\"built_in\">number</span>, dy: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.x += dx; <span class=\"comment\">// Strongly typed this</span></span><br><span class=\"line\">      <span class=\"built_in\">this</span>.y += dy; <span class=\"comment\">// Strongly typed this</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">_obj.x = <span class=\"number\">10</span>;</span><br><span class=\"line\">_obj.y = <span class=\"number\">10</span>;</span><br><span class=\"line\">_obj.moveBy(<span class=\"number\">5</span>, <span class=\"number\">5</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>makeObject</code> å‚æ•°é‡Œçš„ <code>methods</code> å¯¹è±¡å…·æœ‰ä¸€ä¸ªä¸Šä¸‹æ–‡ç±»å‹ <code>ThisType&lt;D &amp; M&gt;</code>ï¼Œå› æ­¤ <code>methods</code> å¯¹è±¡çš„æ–¹æ³•é‡Œ this çš„ç±»å‹ä¸º <code>&#123; x: number, y: number &#125; &amp; &#123; moveBy(dx: number, dy: number): number &#125;</code>ã€‚<br>åœ¨ <code>lib.d.ts</code> é‡Œï¼Œ<code>ThisType&lt;T&gt;</code> æ ‡è¯†æ¥å£æ˜¯ä¸ªç®€å•çš„ç©ºæ¥å£å£°æ˜ã€‚é™¤äº†åœ¨è¢«è¯†åˆ«ä¸ºå¯¹è±¡å­—é¢é‡çš„ä¸Šä¸‹æ–‡ç±»å‹ä¹‹å¤–ï¼Œè¿™ä¸ªæ¥å£ä¸ä¸€èˆ¬çš„ç©ºæ¥å£æ²¡æœ‰ä»€ä¹ˆä¸åŒã€‚</p>\n</blockquote>\n<h2 id=\"åä¸‰ã€Symbols\"><a href=\"#åä¸‰ã€Symbols\" class=\"headerlink\" title=\"åä¸‰ã€Symbols\"></a>åä¸‰ã€Symbols</h2><blockquote>\n<p>ä»‹ç»ï¼šè‡ª <code>ECMAScript 2015</code> èµ·ï¼Œ<code>symbol</code> æˆä¸ºäº†ä¸€ç§æ–°çš„åŸç”Ÿç±»å‹ï¼Œå°±åƒ <code>number</code> å’Œ <code>string</code> ä¸€æ ·ã€‚</p>\n</blockquote>\n<h3 id=\"13-1-symbol-ç±»å‹çš„å€¼æ˜¯é€šè¿‡-Symbol-æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\"><a href=\"#13-1-symbol-ç±»å‹çš„å€¼æ˜¯é€šè¿‡-Symbol-æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\" class=\"headerlink\" title=\"13.1 symbol ç±»å‹çš„å€¼æ˜¯é€šè¿‡ Symbol æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚\"></a>13.1 <code>symbol</code> ç±»å‹çš„å€¼æ˜¯é€šè¿‡ <code>Symbol</code> æ„é€ å‡½æ•°åˆ›å»ºçš„ã€‚</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sym1 = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> sym2 = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>); <span class=\"comment\">// å¯é€‰çš„å­—ç¬¦ä¸² key</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-2-Symbols-æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\"><a href=\"#13-2-Symbols-æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\" class=\"headerlink\" title=\"13.2 Symbols æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„\"></a>13.2 <code>Symbols</code> æ˜¯ä¸å¯æ”¹å˜ä¸”å”¯ä¸€çš„</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> sym3 = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">let</span> sym4 = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;key&quot;</span>);</span><br><span class=\"line\">sym3 === sym4; <span class=\"comment\">// false symbols æ˜¯å”¯ä¸€çš„</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-3-åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols-ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\"><a href=\"#13-3-åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols-ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\" class=\"headerlink\" title=\"13.3 åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œsymbols ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚\"></a>13.3 åƒå­—ç¬¦ä¸²ä¸€æ ·ï¼Œ<code>symbols</code> ä¹Ÿå¯ä»¥è¢«ç”¨ä½œå¯¹è±¡å±æ€§çš„é”®ã€‚</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> sym = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\"><span class=\"keyword\">let</span> obj = &#123;</span><br><span class=\"line\">  [sym]: <span class=\"string\">&quot;value&quot;</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(obj[sym]); <span class=\"comment\">// &quot;value&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-4-Symbols-ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\"><a href=\"#13-4-Symbols-ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\" class=\"headerlink\" title=\"13.4 Symbols ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚\"></a>13.4 <code>Symbols</code> ä¹Ÿå¯ä»¥ä¸è®¡ç®—å‡ºçš„å±æ€§åç›¸ç»“åˆæ¥å£°æ˜å¯¹è±¡çš„å±æ€§å’Œç±»æˆå‘˜ã€‚</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> getClassNameSymbol = <span class=\"built_in\">Symbol</span>();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  [getClassNameSymbol]() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;C&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\"><span class=\"keyword\">let</span> className = c[getClassNameSymbol](); <span class=\"comment\">// &quot;C&quot;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"13-5-ä¼—æ‰€å‘¨çŸ¥çš„-Symbols\"><a href=\"#13-5-ä¼—æ‰€å‘¨çŸ¥çš„-Symbols\" class=\"headerlink\" title=\"13.5 ä¼—æ‰€å‘¨çŸ¥çš„ Symbols\"></a>13.5 ä¼—æ‰€å‘¨çŸ¥çš„ <code>Symbols</code></h3><blockquote>\n<p>é™¤äº†ç”¨æˆ·å®šä¹‰çš„ <code>Symbols</code>ï¼Œè¿˜æœ‰ä¸€äº›å·²ç»ä¼—æ‰€å‘¨çŸ¥çš„å†…ç½® <code>symbols</code>ã€‚å†…ç½® <code>symbols</code> ç”¨æ¥è¡¨ç¤ºè¯­è¨€å†…éƒ¨çš„è¡Œä¸ºã€‚<br>ä»¥ä¸‹ä¸ºè¿™äº› <code>symbols</code> çš„åˆ—è¡¨ï¼š</p>\n</blockquote>\n<ul>\n<li><code>Symbol.hasInstance</code></li>\n</ul>\n<blockquote>\n<p>è¯¥æ–¹æ³•ä¼šè¢« <code>instanceof</code> è¿ç®—ç¬¦è°ƒç”¨ã€‚æ„é€ å™¨å¯¹è±¡ç”¨æ¥è¯†åˆ«ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å…¶å®ä¾‹ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.isConcatSpreadable</code></li>\n</ul>\n<blockquote>\n<p>å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ <code>Array.prototype.concat</code> æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ•°ç»„å…ƒç´ æ˜¯å¦å¯å±•å¼€ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.iterator</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>for-of</code> è¯­å¥è°ƒç”¨ï¼Œã€‚è¿”å›å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨</p>\n</blockquote>\n<ul>\n<li><code>Symbol.match</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.match</code> è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²</p>\n</blockquote>\n<ul>\n<li><code>Symbol.replace</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.replac</code>e è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥æ›¿æ¢å­—ç¬¦ä¸²ä¸­åŒ¹é…çš„å­ä¸²ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.search</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.search</code> è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼è¿”å›è¢«åŒ¹é…éƒ¨åˆ†åœ¨å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.species</code></li>\n</ul>\n<blockquote>\n<p>å‡½æ•°å€¼ï¼Œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ç”¨æ¥åˆ›å»ºæ´¾ç”Ÿå¯¹è±¡ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.split</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>String.prototype.split</code> è°ƒç”¨ã€‚æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åˆ†å‰²å­—ç¬¦ä¸²ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.toPrimitive</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢« <code>ToPrimitive</code> æŠ½è±¡æ“ä½œè°ƒç”¨ã€‚æŠŠå¯¹è±¡è½¬æ¢ä¸ºç›¸åº”çš„åŸå§‹å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.toStringTag</code></li>\n</ul>\n<blockquote>\n<p>æ–¹æ³•ï¼Œè¢«å†…ç½®æ–¹æ³• <code>Object.prototype.toString</code> è°ƒç”¨ã€‚è¿”å›åˆ›å»ºå¯¹è±¡æ—¶é»˜è®¤çš„å­—ç¬¦ä¸²æè¿°ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Symbol.unscopables</code></li>\n</ul>\n<blockquote>\n<p>å¯¹è±¡ï¼Œå®ƒè‡ªå·±æ‹¥æœ‰çš„å±æ€§ä¼šè¢« <code>with</code> ä½œç”¨åŸŸæ’é™¤åœ¨å¤–ã€‚</p>\n</blockquote>\n<h2 id=\"åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\"><a href=\"#åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\" class=\"headerlink\" title=\"åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨\"></a>åå››ã€è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</h2><ul>\n<li>å¯è¿­ä»£æ€§</li>\n</ul>\n<blockquote>\n<p>å½“ä¸€ä¸ªå¯¹è±¡å®ç°äº† <code>Symbol.iterator</code> å±æ€§æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯å¯è¿­ä»£çš„ã€‚ä¸€äº›å†…ç½®çš„ç±»å‹å¦‚ <code>Array</code>ï¼Œ<code>Map</code>ï¼Œ<code>Set</code>ï¼Œ<code>String</code>ï¼Œ<code>Int32Array</code>ï¼Œ<code>Uint32Array</code> ç­‰éƒ½å·²ç»å®ç°äº†å„è‡ªçš„ <code>Symbol.iterator</code>ã€‚å¯¹è±¡ä¸Šçš„ <code>Symbol.iterator</code> å‡½æ•°è´Ÿè´£è¿”å›ä¾›è¿­ä»£çš„å€¼ã€‚</p>\n</blockquote>\n<h3 id=\"14-1-for-â€¦-of-è¯­å¥\"><a href=\"#14-1-for-â€¦-of-è¯­å¥\" class=\"headerlink\" title=\"14.1 for â€¦ of è¯­å¥\"></a>14.1 for â€¦ of è¯­å¥</h3><blockquote>\n<p><code>for ... of</code> ä¼šéå†å¯è¿­ä»£å¯¹è±¡ï¼Œè°ƒç”¨å¯¹è±¡ä¸Šçš„ <code>Symbol.iterator</code> æ–¹æ³•ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯åœ¨æ•°ç»„ä¸Šä½¿ç”¨ <code>for ... of</code> çš„ç®€å•ä¾‹å­</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> someArray = [<span class=\"number\">1</span>, <span class=\"string\">&quot;string&quot;</span>, <span class=\"literal\">false</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> entry <span class=\"keyword\">of</span> someArray) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(entry); <span class=\"comment\">// 1, &quot;string&quot;, false</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-2-for-â€¦-of-Vs-for-â€¦-in-è¯­å¥\"><a href=\"#14-2-for-â€¦-of-Vs-for-â€¦-in-è¯­å¥\" class=\"headerlink\" title=\"14.2 for â€¦ of Vs for â€¦ in è¯­å¥\"></a>14.2 for â€¦ of Vs for â€¦ in è¯­å¥</h3><blockquote>\n<p><code>for ... of</code> å’Œ <code>for ... in</code> å‡å¯è¿­ä»£ä¸€ä¸ªåˆ—è¡¨ï¼›ä½†æ˜¯ç”¨äºè¿­ä»£çš„å€¼å´ä¸åŒï¼Œ<code>for ... in</code> è¿­ä»£çš„æ˜¯å¯¹è±¡çš„ <code>é”®</code> çš„åˆ—è¡¨ï¼Œè€Œ <code>for ... of</code> åˆ™è¿­ä»£å¯¹è±¡çš„é”®å¯¹åº”çš„å€¼ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> list = [<span class=\"number\">4</span>, <span class=\"number\">5</span>, <span class=\"number\">6</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">in</span> list) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// &quot;0&quot; &quot;1&quot; &quot;2&quot;</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i <span class=\"keyword\">of</span> list) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(i); <span class=\"comment\">// &quot;4&quot; &quot;5&quot; &quot;6&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ <code>for ... in</code> å¯ä»¥æ“ä½œä»»ä½•å¯¹è±¡ï¼›å®ƒæä¾›äº†æŸ¥çœ‹å¯¹è±¡å±æ€§çš„ä¸€ç§æ–¹æ³•ã€‚ä½†æ˜¯ <code>for ... of</code> å…³æ³¨äºè¿­ä»£å¯¹è±¡çš„å€¼ã€‚å†…ç½®å¯¹è±¡ <code>Map</code> å’Œ <code>Set</code> å·²ç»å®ç°äº† <code>Symbol.iterator</code> æ–¹æ³•ï¼Œè®©æˆ‘ä»¬å¯ä»¥è®¿é—®å®ƒä»¬ä¿å­˜çš„å€¼ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> pets = <span class=\"keyword\">new</span> <span class=\"built_in\">Set</span>([<span class=\"string\">&quot;Cat&quot;</span>, <span class=\"string\">&quot;Dog&quot;</span>, <span class=\"string\">&quot;Hamster&quot;</span>]);</span><br><span class=\"line\">pets[<span class=\"string\">&quot;species&quot;</span>] = <span class=\"string\">&quot;mammals&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> pet <span class=\"keyword\">in</span> pets) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pet);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> pet <span class=\"keyword\">of</span> pets) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(pet); <span class=\"comment\">// &quot;Cat&quot;, &quot;Dog&quot;, &quot;Hamster&quot;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-3-ä»£ç ç”Ÿæˆç›®æ ‡ä¸º-ES5-å’Œ-ES3\"><a href=\"#14-3-ä»£ç ç”Ÿæˆç›®æ ‡ä¸º-ES5-å’Œ-ES3\" class=\"headerlink\" title=\"14.3 ä»£ç ç”Ÿæˆç›®æ ‡ä¸º ES5 å’Œ ES3\"></a>14.3 ä»£ç ç”Ÿæˆç›®æ ‡ä¸º <code>ES5</code> å’Œ <code>ES3</code></h3><blockquote>\n<p>å½“ç”Ÿæˆç›®æ ‡ä¸º <code>ES5</code> æˆ– <code>ES3</code>ï¼Œè¿­ä»£å™¨åªå…è®¸åœ¨ <code>Array</code> ç±»å‹ä¸Šä½¿ç”¨ã€‚åœ¨éæ•°ç»„å€¼ä¸Šä½¿ç”¨ <code>for ... of</code> è¯­å¥ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå°±ç®—è¿™äº›éæ•°ç»„å€¼å·²ç»å®ç°äº† <code>Symbol.iterator</code> å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç®€å•çš„ <code>for</code> å¾ªç¯åšä¸º <code>for ... of</code> å¾ªç¯ï¼Œæ¯”å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> numbers = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> num <span class=\"keyword\">of</span> numbers) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(num);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆçš„ä»£ç ä¸ºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> <span class=\"built_in\">number</span> = [<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>];</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> _i = <span class=\"number\">0</span>; _i &lt; numbers.length; _i++) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> num = numbers[_i];</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(num);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"14-4-ç›®æ ‡ä¸º-ECMAScript-2015-æˆ–æ›´é«˜\"><a href=\"#14-4-ç›®æ ‡ä¸º-ECMAScript-2015-æˆ–æ›´é«˜\" class=\"headerlink\" title=\"14.4 ç›®æ ‡ä¸º ECMAScript 2015 æˆ–æ›´é«˜\"></a>14.4 ç›®æ ‡ä¸º <code>ECMAScript 2015</code> æˆ–æ›´é«˜</h3><blockquote>\n<p>å½“ç›®æ ‡ä¸ºå…¼å®¹ <code>ECMAScript 2015</code> çš„å¼•æ“æ—¶ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”å¼•æ“çš„ <code>for ... of</code> å†…ç½®è¿­ä»£å™¨å®ç°æ–¹å¼ã€‚</p>\n</blockquote>\n<h2 id=\"åäº”ã€æ¨¡å—\"><a href=\"#åäº”ã€æ¨¡å—\" class=\"headerlink\" title=\"åäº”ã€æ¨¡å—\"></a>åäº”ã€æ¨¡å—</h2><h3 id=\"15-1-å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\"><a href=\"#15-1-å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\" class=\"headerlink\" title=\"15.1 å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜\"></a>15.1 å…³äºæœ¯è¯­çš„ä¸€ç‚¹è¯´æ˜</h3><blockquote>\n<p>è¯·åŠ¡å¿…æ³¨æ„ä¸€ç‚¹ï¼š<code>TypeScript 1.5</code> é‡Œæœ¯è¯­åå·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚â€<code>å†…éƒ¨æ¨¡å—</code>â€œ ç°åœ¨è¢«ç§°ä½œ â€œ<code>å‘½åç©ºé—´</code>â€œã€‚â€<code>å¤–éƒ¨æ¨¡å—</code>â€œ ç°åœ¨åˆ™ç®€ç§°ä¸º â€œ<code>æ¨¡å—</code>â€œã€‚è¿™æ˜¯ä¸ºäº†ä¸ <code>ECMAScript 2015</code> é‡Œçš„æœ¯è¯­ä¿æŒå·²ä¸€è‡´ï¼Œ (ä¹Ÿå°±æ˜¯è¯´ <code>module X</code> { ç›¸å½“äºç°åœ¨æ¨èçš„å†™æ³• <code>namespace X</code> })</p>\n</blockquote>\n<h3 id=\"15-2-ä»‹ç»\"><a href=\"#15-2-ä»‹ç»\" class=\"headerlink\" title=\"15.2 ä»‹ç»\"></a>15.2 ä»‹ç»</h3><ol>\n<li>ä» <code>ECMAScript 2015</code> å¼€å§‹ï¼Œ<code>JavaScript</code> å¼•å…¥äº†æ¨¡å—çš„æ¦‚å¿µã€‚<code>TypeScript</code> ä¹Ÿæ²¿ç”¨è¿™ä¸ªæ¦‚å¿µã€‚</li>\n<li>æ¨¡å—åœ¨å…¶è‡ªèº«çš„ä½œç”¨åŸŸé‡Œæ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸï¼›è¿™æ„å‘³ç€å®šä¹‰åœ¨ä¸€ä¸ªæ¨¡å—é‡Œçš„å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ç­‰ç­‰åœ¨æ¨¡å—å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½ æ˜ç¡®åœ°ä½¿ç”¨ <code>export</code> å½¢å¼ä¹‹ä¸€å¯¼å‡ºå®ƒä»¬ã€‚ç›¸åï¼Œå¦‚æœæƒ³ä½¿ç”¨å…¶å®ƒæ¨¡å—å¯¼å‡ºçš„ <code>å˜é‡</code>ï¼Œ<code>å‡½æ•°</code>ï¼Œ<code>ç±»</code>ï¼Œ<code>æ¥å£</code> ç­‰çš„æ—¶å€™ï¼Œä½ å¿…é¡»è¦å¯¼å…¥å®ƒä»¬ï¼Œå¯ä»¥ä½¿ç”¨ <code>import</code> å½¢å¼ä¹‹ä¸€ã€‚</li>\n<li>æ¨¡å—æ˜¯è‡ªå£°æ˜çš„ï¼›ä¸¤ä¸ªæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡åœ¨æ–‡ä»¶çº§åˆ«ä¸Šä½¿ç”¨ <code>import</code> å’Œ <code>exports</code> å»ºç«‹çš„ã€‚</li>\n<li>æ¨¡å—ä½¿ç”¨æ¨¡å—åŠ è½½å™¨å»å¯¼å…¥å…¶å®ƒçš„æ¨¡å—ã€‚åœ¨è¿è¡Œæ—¶ï¼Œæ¨¡å—åŠ è½½å™¨çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œæ­¤æ¨¡å—ä»£ç å‰å»æŸ¥æ‰¾å¹¶æ‰§è¡Œè¿™ä¸ªæ¨¡å—çš„æ‰€æœ‰ä¾èµ–ã€‚å¤§å®¶æœ€ç†ŸçŸ¥çš„ <code>JavaScript</code> æ¨¡å—åŠ è½½å™¨æ˜¯æœåŠ¡ä¸ <code>Node.js</code> çš„ <code>CommonJS</code> å’Œ æœåŠ¡äº <code>Web</code> åº”ç”¨çš„ <code>Require.js</code>ã€‚</li>\n<li><code>TypeScript</code> å’Œ <code>ECMAScript 2015</code> ä¸€æ ·ï¼Œä»»ä½•åŒ…å«é¡¶çº§ <code>import</code> æˆ–è€… <code>export</code> çš„æ–‡ä»¶éƒ½è¢«å½“æˆä¸€ä¸ªæ¨¡å—ã€‚ç›¸ååœ°ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶ä¸å¸¦æœ‰é¡¶çº§çš„ <code>import</code> æˆ–è€… <code>export</code> å£°æ˜ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å°†è¢«è§†ä¸ºå…¨å±€å¯è§çš„ (å› æ­¤å¯¹æ¨¡å—ä¹Ÿæ˜¯å¯è§çš„)ã€‚</li>\n</ol>\n<h3 id=\"15-3-å¯¼å‡º\"><a href=\"#15-3-å¯¼å‡º\" class=\"headerlink\" title=\"15.3 å¯¼å‡º\"></a>15.3 å¯¼å‡º</h3><h4 id=\"15-3-1-å¯¼å‡ºå£°æ˜\"><a href=\"#15-3-1-å¯¼å‡ºå£°æ˜\" class=\"headerlink\" title=\"15.3.1. å¯¼å‡ºå£°æ˜\"></a>15.3.1. å¯¼å‡ºå£°æ˜</h4><blockquote>\n<p>ä»»ä½•å£°æ˜( æ¯”å¦‚ <code>å˜é‡</code>ï¼Œ<code>å‡½æ•°</code>ï¼Œ<code>ç±»</code>ï¼Œ<code>ç±»å‹åˆ«å</code> æˆ– <code>æ¥å£</code> )éƒ½èƒ½å¤Ÿé€šè¿‡æ·»åŠ  <code>export</code> å…³é”®å­—æ¥å¯¼å‡ºã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> numberRegexp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegexp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-3-2-å¯¼å‡ºè¯­å¥\"><a href=\"#15-3-2-å¯¼å‡ºè¯­å¥\" class=\"headerlink\" title=\"15.3.2 å¯¼å‡ºè¯­å¥\"></a>15.3.2 å¯¼å‡ºè¯­å¥</h4><blockquote>\n<p>å¯¼å‡ºè¯­å¥å¾ˆä¾¿åˆ©ï¼Œå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹å¯¼å‡ºçš„éƒ¨åˆ†é‡å‘½åï¼Œæ‰€ä»¥ä¸Šé¢çš„ä¾‹å­å¯ä»¥è¿™æ ·æ”¹å†™ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator1</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegexp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ZipCodeValidator1 &#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ZipCodeValidator1 <span class=\"keyword\">as</span> mainValidator &#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-3-3-é‡æ–°å¯¼å‡º\"><a href=\"#15-3-3-é‡æ–°å¯¼å‡º\" class=\"headerlink\" title=\"15.3.3 é‡æ–°å¯¼å‡º\"></a>15.3.3 é‡æ–°å¯¼å‡º</h4><blockquote>\n<p>æˆ‘ä»¬ç»å¸¸ä¼šå»æ‰©å±•å…¶å®ƒæ¨¡å—ï¼Œå¹¶ä¸”åªå¯¼å‡ºé‚£ä¸ªæ¨¡å—çš„é‚£éƒ¨åˆ†å†…å®¹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é‡æ–°å¯¼å‡ºåŠŸèƒ½å¹¶ä¸ä¼šåœ¨å½“å‰æ¨¡å—å¯¼å…¥é‚£ä¸ªæ¨¡å—æˆ–å®šä¹‰ä¸€ä¸ªæ–°çš„å±€éƒ¨å˜é‡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ParseIntBasedZipCodeValidator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">isAcceptable</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; <span class=\"built_in\">parseInt</span>();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// å¯¼å‡ºåŸå…ˆçš„éªŒè¯å™¨ä½†åšäº†é‡å‘½å</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> RegExpBasedZipCodeValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æˆ–è€…ä¸€ä¸ªæ¨¡å—å¯ä»¥åŒ…è£¹å¤šä¸ªæ¨¡å—ï¼Œå¹¶æŠŠå®ƒä»¬å¯¼å‡ºçš„å†…å®¹è”åˆåœ¨ä¸€èµ·ï¼Œé€šè¿‡è¯­æ³•ï¼š<code>export * from &quot;module&quot;</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> <span class=\"string\">&quot;./StringValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> <span class=\"string\">&quot;./LetterOnlyValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> * <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-4-å¯¼å…¥\"><a href=\"#15-4-å¯¼å…¥\" class=\"headerlink\" title=\"15.4 å¯¼å…¥\"></a>15.4 å¯¼å…¥</h3><blockquote>\n<p>æ¨¡å—çš„å¯¼å…¥æ“ä½œä¸å¯¼å‡ºä¸€æ ·ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ <code>import</code> å½¢å¼ä¹‹ä¸€æ¥å¯¼å…¥å…¶å®ƒæ¨¡å—ä¸­çš„å¯¼å‡ºå†…å®¹ã€‚</p>\n</blockquote>\n<h4 id=\"15-4-1-å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\"><a href=\"#15-4-1-å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\" class=\"headerlink\" title=\"15.4.1 å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹\"></a>15.4.1 å¯¼å…¥ä¸€ä¸ªæ¨¡å—ä¸­çš„æŸä¸ªå¯¼å‡ºå†…å®¹</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥å¯¹å¯¼å…¥å†…å®¹é‡å‘½å</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> ZCV &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> ZCV();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-4-2-å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\"><a href=\"#15-4-2-å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\" class=\"headerlink\" title=\"15.4.2 å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†\"></a>15.4.2 å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥åˆ°ä¸€ä¸ªå˜é‡ï¼Œå¹¶é€šè¿‡å®ƒæ¥è®¿é—®æ¨¡å—çš„å¯¼å‡ºéƒ¨åˆ†</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> validator <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> validator.ZipCodeValidator();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-4-3-å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\"><a href=\"#15-4-3-å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\" class=\"headerlink\" title=\"15.4.3 å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—\"></a>15.4.3 å…·æœ‰å‰¯ä½œç”¨çš„å¯¼å…¥æ¨¡å—</h4><blockquote>\n<p>å°½ç®¡ä¸æ¨èè¿™ä¹ˆåšï¼Œä¸€äº›æ¨¡å—ä¼šè®¾ç½®ä¸€äº›å…¨å±€çŠ¶æ€ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚è¿™äº›æ¨¡å—å¯èƒ½æ²¡æœ‰ä»»ä½•çš„å¯¼å‡ºæˆ–ç”¨æˆ·æ ¹æœ¬</p>\n</blockquote>\n<blockquote>\n<p>å°±ä¸å…³æ³¨å®ƒçš„å¯¼å‡ºã€‚ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•æ¥å¯¼å…¥è¿™äº›æ¨¡å—ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./my-module.js&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-5-é»˜è®¤å¯¼å‡º\"><a href=\"#15-5-é»˜è®¤å¯¼å‡º\" class=\"headerlink\" title=\"15.5 é»˜è®¤å¯¼å‡º\"></a>15.5 é»˜è®¤å¯¼å‡º</h3><blockquote>\n<p>æ¯ä¸ªæ¨¡å—éƒ½å¯ä»¥æœ‰ä¸€ä¸ª <code>default</code> å¯¼å‡ºã€‚é»˜è®¤å¯¼å‡ºä½¿ç”¨ <code>default</code> å…³é”®å­—æ ‡è®°ï¼›å¹¶ä¸”ä¸€ä¸ªæ¨¡å—åªèƒ½å¤Ÿæœ‰ä¸€ä¸ª <code>default</code> å¯¼å‡ºã€‚éœ€è¦ä½¿ç”¨ ä¸€ç§ç‰¹æ®Šçš„å¯¼å…¥å½¢å¼æ¥å¯¼å…¥ <code>default</code> å¯¼å‡ºã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>default</code> å¯¼å‡ºååˆ†ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œåƒ <code>JQuery</code> è¿™æ ·çš„ç±»åº“å¯èƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡º <code>jQuery</code> æˆ– <code>$</code>ï¼Œå¹¶ä¸”æˆ‘ä»¬åŸºæœ¬ä¸Šä¹Ÿä¼šä½¿ç”¨åŒæ ·çš„åå­— <code>jQuery</code> æˆ– <code>$</code> å¯¼å‡º <code>JQuery</code>ã€‚</p>\n</blockquote>\n<ul>\n<li><code>JQuery.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">let</span> $: JQuery;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> $;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>App.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&quot;JQuery&quot;</span>;</span><br><span class=\"line\">$(<span class=\"string\">&quot;button.continue&quot;</span>).html(<span class=\"string\">&quot;Next step ...&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç±»å’Œå‡½æ•°å£°æ˜å¯ä»¥ç›´æ¥è¢«æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºã€‚æ ‡è®°ä¸ºé»˜è®¤å¯¼å‡ºçš„ç±»å’Œå‡½æ•°çš„åå­—æ˜¯å¯ä»¥çœç•¥çš„ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">isAcceptable</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; ZipCodeValidator.numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> validator <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> myValidator = <span class=\"keyword\">new</span> validator();</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>æˆ–è€…</code></p>\n</blockquote>\n<ul>\n<li><code>StaticZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> validate <span class=\"keyword\">from</span> <span class=\"string\">&quot;./StaticZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"comment\">// use function validate</span></span><br><span class=\"line\">strings.forEach(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; <span class=\"subst\">$&#123;validate(s)&#125;</span> ? &quot; matches&quot; : &quot; does not match&quot;`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>default</code> å¯¼å‡ºä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå€¼</p>\n</blockquote>\n<ul>\n<li><code>OneTwoThree.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"string\">&quot;123&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Log.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> num <span class=\"keyword\">from</span> <span class=\"string\">&quot;./OneTwoThree&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(num); <span class=\"comment\">// 123</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>export =</code> å’Œ <code>import = require()</code></p>\n</blockquote>\n<ol>\n<li><code>CommonJS</code> å’Œ <code>AMD</code> çš„ç¯å¢ƒé‡Œéƒ½æœ‰ä¸€ä¸ª <code>exports</code> å˜é‡ï¼Œè¿™ä¸ªå˜é‡åŒ…å«äº†ä¸€ä¸ªæ¨¡å—çš„æ‰€æœ‰å¯¼å‡ºå†…å®¹ã€‚</li>\n<li><code>CommonJS</code> å’Œ <code>AMD</code> çš„ <code>exports</code> éƒ½å¯ä»¥è¢«èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ç§æƒ…å†µä¸‹å…¶ä½œç”¨å°±ç±»ä¼¼äº es6 è¯­æ³•é‡Œçš„é»˜è®¤å¯¼å‡ºï¼Œå³ <code>export default</code> è¯­æ³•äº†ã€‚è™½ç„¶ä½œç”¨ç›¸ä¼¼ï¼Œä½†æ˜¯ <code>export default</code> è¯­æ³•å¹¶ä¸èƒ½å…¼å®¹ <code>CommonJS</code> å’Œ <code>AMD</code> çš„ <code>exports</code>ã€‚</li>\n<li>ä¸ºäº†æ”¯æŒ <code>CommonJS</code> å’Œ <code>AMD</code> çš„ <code>exports</code>ï¼Œ<code>TypeScript</code> æä¾›äº† <code>export =</code> è¯­æ³•ã€‚</li>\n<li><code>export =</code> è¯­æ³•å®šä¹‰ä¸€ä¸ªæ¨¡å—çš„å¯¼å‡ºå¯¹è±¡ã€‚è¿™é‡Œçš„å¯¹è±¡ä¸€è¯æŒ‡çš„æ˜¯ç±»ï¼Œæ¥å£ï¼Œå‘½åç©ºé—´ï¼Œå‡½æ•°æˆ–æšä¸¾ã€‚</li>\n<li>è‹¥ä½¿ç”¨ <code>export =</code> å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ <code>TypeScript</code> çš„ç‰¹å®šè¯­æ³• <code>import module = require(&#39;module&#39;)</code> æ¥å¯¼å…¥æ­¤æ¨¡å—ã€‚</li>\n</ol>\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">isAcceptable</span>(<span class=\"params\">s: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> = ZipCodeValidator; <span class=\"comment\">// é‡ç‚¹</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> zip = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>); <span class=\"comment\">// é‡ç‚¹</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98502&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> validator = <span class=\"keyword\">new</span> zip();</span><br><span class=\"line\">strings.forEach(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; - <span class=\"subst\">$&#123;validator.isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span>`</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-6-ç”Ÿæˆæ¨¡å—ä»£ç \"><a href=\"#15-6-ç”Ÿæˆæ¨¡å—ä»£ç \" class=\"headerlink\" title=\"15.6 ç”Ÿæˆæ¨¡å—ä»£ç \"></a>15.6 ç”Ÿæˆæ¨¡å—ä»£ç </h3><blockquote>\n<p>æ ¹æ®ç¼–è¯‘æ—¶æŒ‡å®šçš„æ¨¡å—ç›®æ ‡å‚æ•°ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆç›¸åº”çš„ä¾› <code>Node.js\\(CommonJS\\)ï¼ŒRequire.js\\(AMD\\)</code>ï¼Œ<code>UMD</code>ï¼Œ<code>SystemJS</code> æˆ– <code>ECMAScript 2015 native module\\(ES6\\)</code> æ¨¡å—åŠ è½½ç³»ç»Ÿä½¿ç”¨çš„ä»£ç ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æƒ³è¦äº†è§£ç”Ÿæˆä»£ç ä¸­ <code>define</code>ï¼Œ<code>require</code> å’Œ <code>register</code> çš„æ„ä¹‰ï¼Œéœ€è¦å‚è€ƒç›¸åº”çš„æ¨¡å—åŠ è½½å™¨çš„æ–‡æ¡£ã€‚</p>\n</blockquote>\n<ul>\n<li><code>SimpleModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> m = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;mod&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> t = m.something + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>AMD / RequireJS SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>, <span class=\"string\">&quot;./mod&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span>, mod_1</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">exports</span>.t = mod_1.something + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>CommonJS / Node SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> mod_1 = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./mod&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">exports</span>.t = mod_1.something + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>UMD SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">factory</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span> === <span class=\"string\">&quot;object&quot;</span> &amp;&amp; <span class=\"keyword\">typeof</span> <span class=\"built_in\">module</span>.exports === <span class=\"string\">&quot;object&quot;</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> v = factory(<span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (v !== <span class=\"literal\">undefined</span>) <span class=\"built_in\">module</span>.exports = v;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> define === <span class=\"string\">&quot;function&quot;</span> &amp;&amp; define.amd) &#123;</span><br><span class=\"line\">    define([<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>, <span class=\"string\">&quot;./mod&quot;</span>], factory);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;)(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> mod_1 = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./mod&quot;</span>);</span><br><span class=\"line\">  <span class=\"built_in\">exports</span>.t = mod_1.something + <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>System SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.register([<span class=\"string\">&quot;./mod&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">exports_1</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> mod_1;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> t;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    setters: [</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">mod_1_1</span>) </span>&#123;</span><br><span class=\"line\">        mod_1 = mod_1_1;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    execute: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">      exports_1(<span class=\"string\">&quot;t&quot;</span>, (t = mod_1.something + <span class=\"number\">1</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Native ECMAScript 2015 modules SimpleModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; something &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./mod&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">let</span> t = something + <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-7-ç®€å•ç¤ºä¾‹\"><a href=\"#15-7-ç®€å•ç¤ºä¾‹\" class=\"headerlink\" title=\"15.7 ç®€å•ç¤ºä¾‹\"></a>15.7 ç®€å•ç¤ºä¾‹</h3><blockquote>\n<p>ä¸‹é¢æˆ‘ä»¬æ¥æ•´ç†ä¸€ä¸‹å‰é¢çš„éªŒè¯å™¨å®ç°ï¼Œæ¯ä¸ªæ¨¡å—åªæœ‰ä¸€ä¸ªå‘½åçš„å¯¼å‡ºã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸ºäº†ç¼–è¯‘ï¼Œæˆ‘ä»¬å¿…é¡»è¦åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šä¸€ä¸ªæ¨¡å—ç›®æ ‡ã€‚å¯¹äº <code>Node.js</code> æ¥è¯´ï¼Œä½¿ç”¨ <code>--module commonjs</code>ï¼›å¯¹äº <code>Require.js</code> æ¥è¯´ï¼Œä½¿ç”¨ <code>--module amd</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc --<span class=\"built_in\">module</span> commonjs Test.ts</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¼–è¯‘å®Œæˆåï¼Œæ¯ä¸ªæ¨¡å—ä¼šç”Ÿæˆä¸€ä¸ªå•ç‹¬çš„ <code>.js</code> æ–‡ä»¶ã€‚å¥½æ¯”ä½¿ç”¨äº† <code>reference</code> æ ‡ç­¾ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ® <code>import</code> è¯­å¥ç¼–è¯‘ç›¸åº”çš„æ–‡ä»¶ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Validation.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>LetterOnlyValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StringValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Validation&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> lettersRegExp = <span class=\"regexp\">/^[A-Za-z]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> lettersRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StringValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Validation&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; StringValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Validation&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; LetterOnlyValidator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./LetterOnlyValidator&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Some samples to try</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Validators to use</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP code&quot;</span>] = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters only&quot;</span>] = <span class=\"keyword\">new</span> LetterOnlyValidator();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Show whether each string passed each validator</span></span><br><span class=\"line\">strings.forEach(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; - <span class=\"subst\">$&#123;validators[name].isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> <span class=\"subst\">$&#123;name&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-8-å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\"><a href=\"#15-8-å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\" class=\"headerlink\" title=\"15.8 å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯\"></a>15.8 å¯é€‰çš„æ¨¡å—åŠ è½½å’Œå…¶å®ƒé«˜çº§åŠ è½½åœºæ™¯</h3><ol>\n<li>æœ‰æ—¶å€™ï¼Œä½ åªæƒ³åœ¨æŸç§æ¡ä»¶ä¸‹æ‰åŠ è½½æŸä¸ªæ¨¡å—ã€‚åœ¨ <code>TypeScript</code> é‡Œï¼Œä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥å®ç°å®ƒå’Œå…¶å®ƒçš„é«˜çº§åŠ è½½åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨æ¨¡å—åŠ è½½å™¨å¹¶ä¸”ä¿è¯ç±»å‹å®Œå…¨ã€‚</li>\n<li>ç¼–è¯‘å™¨ä¼šæ£€æµ‹æ˜¯å¦æ¯ä¸ªæ¨¡å—éƒ½ä¼šåœ¨ç”Ÿæˆçš„ <code>JavaScript</code> ä¸­ç”¨åˆ°ã€‚å¦‚æœä¸€ä¸ªæ¨¡å—æ ‡è¯†ç¬¦åªåœ¨ç±»å‹æ³¨è§£éƒ¨åˆ†ä½¿ç”¨ï¼Œå¹¶ä¸”å®Œå…¨æ²¡æœ‰åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ï¼Œå°±ä¸ä¼šç”Ÿæˆ <code>require</code> è¿™ä¸ªæ¨¡å—çš„ä»£ç ã€‚çœç•¥æ‰æ²¡æœ‰ç”¨åˆ°çš„å¼•ç”¨å¯¹æ€§èƒ½æå‡æ˜¯å¾ˆæœ‰ç›Šçš„ï¼Œå¹¶åŒæ—¶æä¾›äº†é€‰æ‹©æ€§åŠ è½½æ¨¡å—çš„èƒ½åŠ›ã€‚</li>\n<li>è¿™ç§æ¨¡å¼çš„æ ¸å¿ƒæ˜¯ <code>import id = require(&quot;...&quot;)</code> è¯­å¥å¯ä»¥è®©æˆ‘ä»¬è®¿é—®æ¨¡å—å¯¼å‡ºçš„ç±»å‹ã€‚æ¨¡å—åŠ è½½å™¨ä¼šè¢«åŠ¨æ€è°ƒç”¨(é€šè¿‡ <code>require</code>)ï¼Œå°±åƒä¸‹é¢çš„ <code>if</code> ä»£ç å—é‡Œé‚£æ ·ã€‚å®ƒåˆ©ç”¨äº†çœç•¥å¼•ç”¨çš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æ¨¡å—åªåœ¨è¢«éœ€è¦æ—¶åŠ è½½ã€‚ä¸ºäº†è®©è¿™ä¸ªæ¨¡å—å·¥ä½œï¼Œä¸€å®šè¦æ³¨æ„ <code>import</code> å®šä¹‰çš„æ ‡è¯†ç¬¦åªèƒ½åœ¨è¡¨ç¤ºç±»å‹å¤„ä½¿ç”¨(ä¸èƒ½åœ¨ä¼šè½¬æ¢æˆ <code>JavaScript</code> çš„åœ°æ–¹ã€‚)</li>\n<li>ä¸ºäº†ç¡®ä¿ç±»å‹å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>typeof</code> å…³é”®å­—ã€‚<code>typeof</code> å…³é”®å­—ï¼Œå½“åœ¨è¡¨ç¤ºç±»å‹çš„åœ°æ–¹ä½¿ç”¨æ—¶ï¼Œä¼šå¾—å‡ºä¸€ä¸ªç±»å‹å€¼ï¼Œè¿™é‡Œå°±è¡¨ç¤ºæ¨¡å—çš„ç±»å‹ã€‚</li>\n</ol>\n<ul>\n<li><code>ç¤ºä¾‹ 1</code>. <code>Node.js</code> é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">require</span>(<span class=\"params\">moduleName: <span class=\"built_in\">string</span></span>): <span class=\"title\">any</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> Zip &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (needZipValidator) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> ZipCodeValidator: <span class=\"keyword\">typeof</span> Zip = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> validator = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (validator.isAcceptable(<span class=\"string\">&quot;...&quot;</span>)) &#123;</span><br><span class=\"line\">    /!* ... *!/;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ç¤ºä¾‹ 2</code>. <code>require.js</code> é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">require</span>(<span class=\"params\">moduleNames: <span class=\"built_in\">string</span>[], onLoad: (...args: <span class=\"built_in\">any</span>[]) =&gt; <span class=\"built_in\">void</span></span>): <span class=\"title\">void</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> Zip <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (needZipValidator) &#123;</span><br><span class=\"line\">  <span class=\"built_in\">require</span>([<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>], <span class=\"function\">(<span class=\"params\">ZipCodeValidator: <span class=\"keyword\">typeof</span> Zip</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> validator = <span class=\"keyword\">new</span> ZipCodeValidator.ZipCodeValidator();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (validator.isAcceptable(<span class=\"string\">&quot;...&quot;</span>)) &#123;</span><br><span class=\"line\">      /!* ... *!/;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ç¤ºä¾‹ 3</code>. <code>System.js</code> é‡Œçš„åŠ¨æ€æ¨¡å—åŠ è½½</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">const</span> System: <span class=\"built_in\">any</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; ZipCodeValidator <span class=\"keyword\">as</span> Zip &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ZipCodeValidator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">if</span> (needZipValidator) &#123;</span><br><span class=\"line\">  System.import(<span class=\"string\">&quot;./ZipCodeValidator&quot;</span>).then(<span class=\"function\">(<span class=\"params\">ZipCodeValidator: <span class=\"keyword\">typeof</span> Zip</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> x = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (x.isAcceptable(<span class=\"string\">&quot;...&quot;</span>)) &#123;</span><br><span class=\"line\">      /!*...*!/;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-9-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\"><a href=\"#15-9-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\" class=\"headerlink\" title=\"15.9 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\"></a>15.9 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“</h3><blockquote>\n<p>è¦æƒ³æè¿°é <code>TypeScript</code> ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“æ‰€æš´éœ²çš„ <code>API</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æˆ‘ä»¬å«å®ƒå£°æ˜å› ä¸ºå®ƒä¸æ˜¯â€™å¤–éƒ¨ç¨‹åºâ€™çš„å…·ä½“å®ç°ï¼Œå®ƒä»¬é€šå¸¸æ˜¯åœ¨ <code>.d.ts</code> æ–‡ä»¶é‡Œå®šä¹‰çš„ã€‚ç±»ä¼¼äº <code>C/C++</code> é‡Œçš„ <code>.h</code> æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h4 id=\"15-9-1-å¤–éƒ¨æ¨¡å—\"><a href=\"#15-9-1-å¤–éƒ¨æ¨¡å—\" class=\"headerlink\" title=\"15.9.1 å¤–éƒ¨æ¨¡å—\"></a>15.9.1 å¤–éƒ¨æ¨¡å—</h4><blockquote>\n<p>åœ¨ <code>Node.js</code> é‡Œå¤§éƒ¨åˆ†å·¥ä½œæ˜¯é€šè¿‡åŠ è½½ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—å®ç°çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¡¶çº§çš„ <code>export</code> å£°æ˜æ¥ä¸ºæ¯ä¸ªæ¨¡å—éƒ½å®šä¹‰ä¸€ä¸ª <code>.d.ts</code> æ–‡ä»¶ï¼Œä½†æœ€å¥½è¿˜æ˜¯å†™åœ¨ä¸€ä¸ªå¤§çš„ <code>.d.ts</code> æ–‡ä»¶é‡Œã€‚æˆ‘ä»¬ä½¿ç”¨ä¸æ„é€ ä¸€ä¸ªå¤–éƒ¨å‘½åç©ºé—´ç›¸ä¼¼çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™é‡Œä½¿ç”¨ <code>module</code> å…³é”®å­—å¹¶ä¸”æŠŠåå­—ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œæ–¹ä¾¿ä¹‹å <code>import</code>ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ä¾‹å¦‚ï¼š</code></li>\n<li><code>node.d.ts(simplified except)</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;url&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Url &#123;</span><br><span class=\"line\">    protocol?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    hostname?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">    pathname?: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">parse</span>(<span class=\"params\">urlStr: <span class=\"built_in\">string</span>, parseQueryString?, slashesDenoteHost?</span>): <span class=\"title\">Url</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;path&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">normalize</span>(<span class=\"params\">p: <span class=\"built_in\">string</span></span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">join</span>(<span class=\"params\">...paths: <span class=\"built_in\">any</span>[]</span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">let</span> sep: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ <code>/// &lt;reference&gt; node.d.ts</code> å¹¶ä¸”ä½¿ç”¨ <code>import url = require(&#39;url&#39;)</code>ï¼›æˆ– <code>import * as URl from &quot;url&quot;</code> åŠ è½½æ¨¡å—ã€‚`</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;node.d.ts&quot;&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> URL <span class=\"keyword\">from</span> <span class=\"string\">&quot;url&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> myUrl = URL.parse(<span class=\"string\">&quot;http://www.typescriptlang.org&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-9-2-å¤–éƒ¨æ¨¡å—ç®€å†™\"><a href=\"#15-9-2-å¤–éƒ¨æ¨¡å—ç®€å†™\" class=\"headerlink\" title=\"15.9.2 å¤–éƒ¨æ¨¡å—ç®€å†™\"></a>15.9.2 å¤–éƒ¨æ¨¡å—ç®€å†™</h4><blockquote>\n<p>å‡å¦‚ä½ ä¸æƒ³åœ¨ä½¿ç”¨ä¸€ä¸ªæ–°æ¨¡å—ä¹‹å‰èŠ±æ—¶é—´å»ç¼–å†™å£°æ˜ï¼Œä½ å¯ä»¥é‡‡ç”¨å£°æ˜çš„ç®€å†™å½¢å¼ä»¥ä¾¿èƒ½å¤Ÿå¿«é€Ÿä½¿ç”¨å®ƒã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>declarations.d.ts</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;hot-new-module&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç®€å†™æ¨¡å—é‡Œæ‰€æœ‰å¯¼å‡ºç±»å‹å°†æ˜¯ <code>any</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> x, &#123; y &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;hot-new-module&quot;</span>;</span><br><span class=\"line\">x(y);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-9-3-æ¨¡å—å£°æ˜é€šé…ç¬¦\"><a href=\"#15-9-3-æ¨¡å—å£°æ˜é€šé…ç¬¦\" class=\"headerlink\" title=\"15.9.3 æ¨¡å—å£°æ˜é€šé…ç¬¦\"></a>15.9.3 æ¨¡å—å£°æ˜é€šé…ç¬¦</h4><blockquote>\n<p>æŸäº›æ¨¡å—åŠ è½½å™¨å¦‚ <code>SystemJS</code> å’Œ <code>AMD</code> æ”¯æŒå¯¼å…¥é <code>JavaScript</code> å†…å®¹ã€‚å®ƒä»¬é€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªå‰ç¼€æˆ–åç¼€æ¥è¡¨ç¤ºç‰¹æ®Šçš„åŠ è½½è¯­æ³•ï¼Œæ¨¡å—å£°æ˜é€šé…ç¬¦å¯ä»¥ç”¨æ¥è¡¨ç¤ºè¿™äº›æƒ…å†µã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;*!text&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> content: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> content;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>some do it the other way around</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;json!*&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> value: <span class=\"built_in\">any</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> value;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç°åœ¨ä½ å¯ä»¥å°±å¯¼å…¥åŒ¹é… <code>&quot;!text&quot;</code> æˆ– <code>&quot;json!&quot;</code> çš„å†…å®¹äº†ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> fileContent <span class=\"keyword\">from</span> <span class=\"string\">&quot;./xyz.txt!txt&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> data <span class=\"keyword\">from</span> <span class=\"string\">&quot;json!http://example.com/data.json&quot;</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(data, fileContent);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-9-4-UMD-æ¨¡å—\"><a href=\"#15-9-4-UMD-æ¨¡å—\" class=\"headerlink\" title=\"15.9.4 UMD æ¨¡å—\"></a>15.9.4 <code>UMD</code> æ¨¡å—</h4><blockquote>\n<p>æœ‰äº›æ¨¡å—è¢«è®¾è®¡æˆå…¼å®¹å¤šä¸ªæ¨¡å—åŠ è½½å™¨ï¼Œæˆ–è€…ä¸ä½¿ç”¨æ¨¡å—åŠ è½½å™¨(å…¨å±€å˜é‡)ã€‚å®ƒä»¬ä»¥ <code>UMD</code> æ¨¡å—ä¸ºä»£è¡¨ã€‚è¿™äº›åº“å¯ä»¥é€šè¿‡å¯¼å…¥çš„å½¢å¼æˆ–å…¨å±€å˜é‡çš„å½¢å¼è®¿é—®ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ä¾‹å¦‚ï¼š</code></li>\n<li><code>math-lib.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">isPrime</span>(<span class=\"params\">x: <span class=\"built_in\">number</span></span>): <span class=\"title\">boolean</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">as</span> <span class=\"keyword\">namespace</span> mathLib;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¹‹åï¼Œè¿™ä¸ªåº“å¯ä»¥åœ¨æŸä¸ªæ¨¡å—é‡Œé€šè¿‡å¯¼å…¥æ¥ä½¿ç”¨:</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; isPrime &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;math-lib&quot;</span>;</span><br><span class=\"line\">isPrime(<span class=\"number\">2</span>);</span><br><span class=\"line\">mathLib.isPrime(<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å®ƒåŒæ ·å¯ä»¥é€šè¿‡å…¨å±€å˜é‡çš„å½¢å¼ä½¿ç”¨ï¼Œä½†åªèƒ½åœ¨æŸä¸ªè„šæœ¬(æŒ‡ä¸å¸¦æœ‰æ¨¡å—å¯¼å…¥æˆ–å¯¼å‡ºçš„è„šæœ¬æ–‡ä»¶)é‡Œã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mathLib.isPrime(<span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"15-10-åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\"><a href=\"#15-10-åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\" class=\"headerlink\" title=\"15.10 åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼\"></a>15.10 åˆ›å»ºæ¨¡å—ç»“æ„æŒ‡å¯¼</h3><h4 id=\"15-10-1-å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\"><a href=\"#15-10-1-å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\" class=\"headerlink\" title=\"15.10.1 å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º\"></a>15.10.1 å°½å¯èƒ½åœ°åœ¨é¡¶å±‚å¯¼å‡º</h4><ol>\n<li>ç”¨æˆ·åº”è¯¥æ›´å®¹æ˜“åœ°ä½¿ç”¨ä½ æ¨¡å—å¯¼å‡ºçš„å†…å®¹ã€‚åµŒå¥—å±‚æ¬¡è¿‡å¤šä¼šå˜å¾—éš¾ä»¥å¤„ç†ï¼Œå› æ­¤ä»”ç»†è€ƒè™‘ä¸€ä¸‹å¦‚ä½•ç»„ç»‡ä½ çš„ä»£ç ã€‚</li>\n<li>ä»ä½ çš„æ¨¡å—ä¸­å¯¼å‡ºä¸€ä¸ªå‘½åç©ºé—´å°±æ˜¯ä¸€ä¸ªå¢åŠ åµŒå¥—çš„ä¾‹å­ã€‚è™½ç„¶å‘½åç©ºé—´æœ‰æ—¶å€™æœ‰å®ƒä»¬çš„ç”¨å¤„ï¼Œåœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™å®ƒä»¬é¢å¤–åœ°å¢åŠ äº†ä¸€å±‚ã€‚è¿™å¯¹ç”¨æˆ·æ¥è¯´æ˜¯å¾ˆä¸æ–¹ä¾¿çš„å¹¶ä¸”é€šå¸¸æ˜¯å¤šä½™çš„ã€‚</li>\n<li>å¯¼å‡ºç±»çš„é™æ€æ–¹æ³•ä¹Ÿæœ‰åŒæ ·çš„é—®é¢˜ - è¿™ä¸ªç±»æœ¬èº«å°±å¢åŠ äº†ä¸€å±‚åµŒå¥—ã€‚é™¤éå®ƒèƒ½æ–¹ä¾¿åœ°è¡¨è¿°æˆ–ä¾¿äºæ¸…æ™°ä½¿ç”¨ï¼Œå¦åˆ™è¯·è€ƒè™‘ç›´æ¥å¯¼å‡ºä¸€ä¸ªè¾…åŠ©æ–¹æ³•ã€‚</li>\n</ol>\n<h4 id=\"15-10-2-å¦‚æœä»…å¯¼å‡ºå•ä¸ª-class-æˆ–-functionï¼Œä½¿ç”¨-export-default\"><a href=\"#15-10-2-å¦‚æœä»…å¯¼å‡ºå•ä¸ª-class-æˆ–-functionï¼Œä½¿ç”¨-export-default\" class=\"headerlink\" title=\"15.10.2 å¦‚æœä»…å¯¼å‡ºå•ä¸ª class æˆ– functionï¼Œä½¿ç”¨ export default\"></a>15.10.2 å¦‚æœä»…å¯¼å‡ºå•ä¸ª <code>class</code> æˆ– <code>function</code>ï¼Œä½¿ç”¨ <code>export default</code></h4><blockquote>\n<p>å°±åƒâ€ <code>åœ¨é¡¶å±‚å¯¼å‡º</code> â€œå¸®åŠ©å‡å°‘ç”¨æˆ·ä½¿ç”¨çš„éš¾åº¦ï¼Œä¸€ä¸ªé»˜è®¤çš„å¯¼å‡ºä¹Ÿèƒ½èµ·åˆ°è¿™ä¸ªæ•ˆæœã€‚å¦‚æœä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸ºäº†å¯¼å‡ºç‰¹å®šçš„å†…å®¹ï¼Œé‚£ä¹ˆä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨ä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€‚è¿™ä¼šä»¤æ¨¡å—çš„å¯¼å…¥å’Œä½¿ç”¨å˜å¾—äº›è®¸ç®€å•ï¼Œæ¯”å¦‚ï¼š</p>\n</blockquote>\n<ul>\n<li><code>MyClass.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SomeType</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    /!* ... *!/;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>MyFunc.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getThing</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"string\">&quot;thing&quot;</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Consumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> t <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyClass&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> f <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyFunc&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"keyword\">new</span> t();</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(f());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¹ç”¨æˆ·æ¥è¯´è¿™æ˜¯æœ€ç†æƒ³çš„ã€‚ä»–ä»¬å¯ä»¥éšæ„å‘½åå¯¼å…¥æ¨¡å—çš„ç±»å‹ (æœ¬ä¾‹ä¸º <code>t</code> ) å¹¶ä¸”ä¸éœ€è¦å¤šä½™çš„ ( <code>.</code> ) æ¥æ‰¾åˆ°ç›¸å…³å¯¹è±¡ã€‚</p>\n</blockquote>\n<h4 id=\"15-10-3-å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\"><a href=\"#15-10-3-å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\" class=\"headerlink\" title=\"15.10.3 å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º\"></a>15.10.3 å¦‚æœè¦å¯¼å‡ºå¤šä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒä»¬æ”¾åœ¨é¡¶å±‚é‡Œå¯¼å‡º</h4><ul>\n<li><code>MyThings.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SomeType</span> </span>&#123;/!*...*!/&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">someFunc</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/*...*/</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-4-ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™-æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\"><a href=\"#15-10-4-ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™-æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\" class=\"headerlink\" title=\"15.10.4 (ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™)æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚\"></a>15.10.4 (ç›¸ååœ°ï¼Œå½“å¯¼å…¥çš„æ—¶å€™)æ˜ç¡®åœ°åˆ—å‡ºå¯¼å…¥çš„åå­—ã€‚</h4><ul>\n<li><code>Consumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; SomeType, someFunc &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyThings&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"keyword\">new</span> SomeType();</span><br><span class=\"line\"><span class=\"keyword\">let</span> y = someFunc();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-5-ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\"><a href=\"#15-10-5-ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\" class=\"headerlink\" title=\"15.10.5 ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™\"></a>15.10.5 ä½¿ç”¨å‘½åç©ºé—´å¯¼å…¥æ¨¡å¼å½“ä½ è¦å¯¼å‡ºå¤§é‡å†…å®¹çš„æ—¶å€™</h4><ul>\n<li><code>MyLargeModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Cat</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Flower</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Consumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> myLargeModule <span class=\"keyword\">from</span> <span class=\"string\">&quot;./MyLargeModule.ts&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> x = <span class=\"keyword\">new</span> myLargeModule.Dog();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-6-ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\"><a href=\"#15-10-6-ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\" class=\"headerlink\" title=\"15.10.6 ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•\"></a>15.10.6 ä½¿ç”¨é‡æ–°å¯¼å‡ºè¿›è¡Œæ‰©å±•</h4><blockquote>\n<p>ä½ å¯èƒ½ç»å¸¸éœ€è¦æ‰©å±•ä¸€ä¸ªæ¨¡å—çš„åŠŸèƒ½ã€‚<code>JS</code> é‡Œå¸¸ç”¨çš„ä¸€ä¸ªæ¨¡å¼æ˜¯ <code>JQuery</code> é‚£æ ·å»æ‰©å±•åŸå¯¹è±¡ã€‚å¦‚æˆ‘ä»¬ä¹‹å‰æåˆ°çš„ï¼Œæ¨¡å—ä¸ä¼šåƒå…¨å±€å‘½åç©ºé—´é‚£æ ·å»åˆå¹¶ã€‚æ¨èçš„æ–¹æ¡ˆæ˜¯ ä¸è¦å»æ”¹å˜åŸæ¥çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¯¼å‡ºä¸€ä¸ªæ–°çš„å®ä½“æ¥æä¾›æ–°çš„åŠŸèƒ½ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾ <code>Calculator.ts</code> æ¨¡å—é‡Œå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨å®ç°ã€‚è¿™ä¸ªæ¨¡å—åŒæ ·æä¾›äº†ä¸€ä¸ªè¾…åŠ©å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¼ å…¥ä¸€ç³»åˆ—è¾“å…¥çš„å­—ç¬¦ä¸²å¹¶åœ¨æœ€åç»™å‡ºç»“æœã€‚</p>\n</blockquote>\n<ul>\n<li><code>Calculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> current = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> memory = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> operator: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">processDigit</span>(<span class=\"params\">digit: <span class=\"built_in\">string</span>, currentValue: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (digit &gt;= <span class=\"string\">&quot;0&quot;</span> &amp;&amp; digit &lt;= <span class=\"string\">&quot;9&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> currentValue * <span class=\"number\">10</span> + (digit.charCodeAt(<span class=\"number\">0</span>) - <span class=\"string\">&quot;0&quot;</span>.charCodeAt(<span class=\"number\">0</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"function\"><span class=\"title\">processOperator</span>(<span class=\"params\">operator: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"string\">&quot;+&quot;</span>, <span class=\"string\">&quot;-&quot;</span>, <span class=\"string\">&quot;*&quot;</span>, <span class=\"string\">&quot;/&quot;</span>].indexOf(operator) &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> operator;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">protected</span> evaluateOperator(operator: <span class=\"built_in\">string</span>, <span class=\"attr\">left</span>: <span class=\"built_in\">number</span>, <span class=\"attr\">right</span>: <span class=\"built_in\">number</span>): <span class=\"built_in\">number</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (<span class=\"built_in\">this</span>.operator) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;+&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left + right;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;-&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left - right;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;*&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left * right;</span><br><span class=\"line\">      <span class=\"keyword\">case</span> <span class=\"string\">&quot;/&quot;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> left / right;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"function\"><span class=\"title\">evaluate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"built_in\">this</span>.operator) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.memory = <span class=\"built_in\">this</span>.evaluateOperator(<span class=\"built_in\">this</span>.operator, <span class=\"built_in\">this</span>.memory, <span class=\"built_in\">this</span>.current);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.memory = <span class=\"built_in\">this</span>.current;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.current = <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">handleChar</span>(<span class=\"params\">char: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (char === <span class=\"string\">&quot;=&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"built_in\">this</span>.evaluate();</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">let</span> value = Calculator.processDigit(char, <span class=\"built_in\">this</span>.current);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (value !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.current = value;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> value = Calculator.processOperator(char);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (value !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">this</span>.evaluate();</span><br><span class=\"line\">          <span class=\"built_in\">this</span>.operator = value;</span><br><span class=\"line\">          <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Unsupported input: &#x27;<span class=\"subst\">$&#123;char&#125;</span>&#x27;`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"function\"><span class=\"title\">getResult</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>.memory;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">test</span>(<span class=\"params\">c: Calculator, input: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; input.length; i++) &#123;</span><br><span class=\"line\">    c.handleChar(input[i]);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`result of &#x27;<span class=\"subst\">$&#123;input&#125;</span>&#x27; is &#x27;<span class=\"subst\">$&#123;c.getResult()&#125;</span>&#x27;`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‹é¢ä½¿ç”¨å¯¼å‡ºçš„ <code>test</code> å‡½æ•°æ¥æµ‹è¯•è®¡ç®—å™¨</li>\n<li><code>TestCalculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Calculator, test &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Calculator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> Calculator();</span><br><span class=\"line\">test(c, <span class=\"string\">&quot;1+2*33/11=&quot;</span>); <span class=\"comment\">// prints 9</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç°åœ¨æ‰©å±•å®ƒï¼Œæ·»åŠ æ”¯æŒè¾“å…¥å…¶å®ƒè¿›åˆ¶(åè¿›åˆ¶ä»¥å¤–)ã€‚</li>\n<li><code>ProgrammerCalculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Calculator &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Calculator&quot;</span>;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ProgrammerCalculator</span> <span class=\"keyword\">extends</span> <span class=\"title\">Calculator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> digits = [<span class=\"string\">&quot;0&quot;</span>, <span class=\"string\">&quot;1&quot;</span>, <span class=\"string\">&quot;2&quot;</span>, <span class=\"string\">&quot;3&quot;</span>, <span class=\"string\">&quot;4&quot;</span>, <span class=\"string\">&quot;5&quot;</span>, <span class=\"string\">&quot;6&quot;</span>, <span class=\"string\">&quot;7&quot;</span>, <span class=\"string\">&quot;8&quot;</span>, <span class=\"string\">&quot;9&quot;</span>, <span class=\"string\">&quot;A&quot;</span>, <span class=\"string\">&quot;B&quot;</span>, <span class=\"string\">&quot;C&quot;</span>, <span class=\"string\">&quot;D&quot;</span>, <span class=\"string\">&quot;E&quot;</span>, <span class=\"string\">&quot;F&quot;</span>];</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"><span class=\"keyword\">public</span> base: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">super</span>();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> maxBase = ProgrammerCalculator.digits.length;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (base &lt;= <span class=\"number\">0</span> || base &gt; maxBase) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`base has to be within 0 to <span class=\"subst\">$&#123;maxBase&#125;</span> inclusive`</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">protected</span> <span class=\"function\"><span class=\"title\">processDigit</span>(<span class=\"params\">digit: <span class=\"built_in\">string</span>, currentValue: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (ProgrammerCalculator.digits.indexOf(digit) &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> currentValue * <span class=\"built_in\">this</span>.base + ProgrammerCalculator.digits.indexOf(digit);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; ProgrammerCalculator <span class=\"keyword\">as</span> Calculator &#125;;</span><br><span class=\"line\"><span class=\"keyword\">export</span> &#123; test &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./Calculator&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ–°çš„ <code>ProgrammerCalculator</code> æ¨¡å—å¯¼å‡ºçš„ API ä¸åŸå…ˆçš„ <code>Calculator</code> æ¨¡å—å¾ˆç›¸ä¼¼ï¼Œä½†å´æ²¡æœ‰æ”¹å˜åŸæ¨¡å—é‡Œçš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<ul>\n<li><code>TestProgrammerCalculator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Calculator, test &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./ProgrammerCalculator&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> Calculator(<span class=\"number\">2</span>);</span><br><span class=\"line\">test(c, <span class=\"string\">&quot;001+010=&quot;</span>); <span class=\"comment\">// prints 3</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"15-10-7-æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\"><a href=\"#15-10-7-æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\" class=\"headerlink\" title=\"15.10.7 æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´\"></a>15.10.7 æ¨¡å—é‡Œä¸è¦ä½¿ç”¨å‘½åç©ºé—´</h4><blockquote>\n<p>å½“åˆæ¬¡è¿›å…¥åŸºäºæ¨¡å—çš„å¼€å‘æ¨¡å¼æ—¶ï¼Œå¯èƒ½æ€»ä¼šæ§åˆ¶ä¸ä½è¦å°†å¯¼å‡ºåŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚æ¨¡å—å…·æœ‰å…¶è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”åªæœ‰å¯¼å‡ºçš„å£°æ˜æ‰ä¼šåœ¨æ¨¡å—å¤–éƒ¨å¯è§ã€‚è®°ä½è¿™ç‚¹ï¼Œå‘½åç©ºé—´åœ¨ä½¿ç”¨æ¨¡å—æ—¶å‡ ä¹æ²¡ä»€ä¹ˆä»·å€¼ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åœ¨ç»„ç»‡æ–¹é¢ï¼Œå‘½åç©ºé—´å¯¹äºåœ¨å…¨å±€ä½œç”¨åŸŸå†…å¯¹é€»è¾‘ä¸Šç›¸å…³çš„å¯¹è±¡å’Œç±»å‹åˆ†ç»„æ˜¯å¾ˆä¾¿åˆ©çš„ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>C\\#</code> é‡Œï¼Œä½ ä¼šä» <code>System.Collections</code> é‡Œæ‰¾åˆ°æ‰€æœ‰é›†åˆçš„ç±»å‹ã€‚é€šè¿‡å°†ç±»å‹æœ‰å±‚æ¬¡åœ°ç»„ç»‡åœ¨å‘½åç©ºé—´é‡Œï¼Œå¯ä»¥æ–¹ä¾¿ç”¨æˆ·æ‰¾åˆ°ä¸ä½¿ç”¨é‚£äº›ç±»å‹ã€‚ç„¶è€Œï¼Œæ¨¡å—æœ¬èº«å·²ç»å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¹‹ä¸­ï¼Œè¿™æ˜¯å¿…é¡»çš„ã€‚æˆ‘ä»¬å¿…é¡»é€šè¿‡è·¯å¾„å’Œæ–‡ä»¶åæ‰¾åˆ°å®ƒä»¬ï¼Œè¿™å·²ç»æä¾›äº†ä¸€ç§é€»è¾‘ä¸Šçš„ç»„ç»‡å½¢å¼ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»º <code>/collections/generic/</code> æ–‡ä»¶å¤¹ï¼ŒæŠŠç›¸åº”æ¨¡å—æ”¾åœ¨è¿™é‡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‘½åç©ºé—´å¯¹è§£å†³å…¨å±€ä½œç”¨åŸŸé‡Œå‘½åå†²çªæ¥è¯´æ˜¯å¾ˆé‡è¦çš„ã€‚æ¯”å¦‚ï¼Œä½ æœ‰ä¸€ä¸ª <code>My.Application.Customer.AddFrom</code> å’Œ <code>My.Application.Order.AddForm</code> <code>--</code> ä¸¤ä¸ªç±»å‹çš„åå­—ç›¸åŒï¼Œä½†å‘½åç©ºé—´ä¸åŒã€‚ç„¶è€Œï¼Œè¿™å¯¹äºæ¨¡å—æ¥è¯´å´ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚åœ¨ä¸€ä¸ªæ¨¡å—é‡Œï¼Œæ²¡æœ‰ç†ç”±ä¸¤ä¸ªå¯¹è±¡æ‹¥æœ‰åŒä¸€ä¸ªåå­—ã€‚ä»æ¨¡å—çš„ä½¿ç”¨è§’åº¦æ¥è¯´ï¼Œä½¿ç”¨è€…ä¼šæŒ‘å‡ºå®ƒä»¬ç”¨æ¥å¼•ç”¨æ¨¡å—çš„åå­—ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰ç†ç”±å‘å£°é‡åçš„æƒ…å†µã€‚</p>\n</blockquote>\n<h4 id=\"15-10-8-å±é™©ä¿¡å·\"><a href=\"#15-10-8-å±é™©ä¿¡å·\" class=\"headerlink\" title=\"15.10.8 å±é™©ä¿¡å·\"></a>15.10.8 å±é™©ä¿¡å·</h4><blockquote>\n<p>ä»¥ä¸‹å‡ä¸ºæ¨¡å—ç»“æ„ä¸Šçš„å±é™©ä¿¡å·ã€‚é‡æ–°æ£€æŸ¥ä»¥ç¡®ä¿ä½ æ²¡æœ‰åœ¨å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚</p>\n</blockquote>\n<ol>\n<li>æ–‡ä»¶çš„é¡¶å±‚å£°æ˜æ˜¯ <code>export namespace Foo &#123;...&#125;</code> ( åˆ é™¤ <code>Foo</code> å¹¶æŠŠæ‰€æœ‰å†…å®¹å‘ä¸Šå±‚ç§»åŠ¨ä¸€å±‚)</li>\n<li>æ–‡ä»¶åªæœ‰ä¸€ä¸ª <code>export class</code> æˆ– <code>export function</code> (è€ƒè™‘ä½¿ç”¨ <code>export default</code>)</li>\n<li>å¤šä¸ªæ–‡ä»¶çš„é¡¶å±‚å…·æœ‰åŒæ ·çš„ <code>export namespace Foo</code> {( ä¸è¦ä»¥ä¸ºè¿™äº›ä¼šåˆå¹¶åˆ°ä¸€ä¸ª <code>Foo</code> ä¸­! )}</li>\n</ol>\n<h2 id=\"åå…­ã€å‘½åç©ºé—´\"><a href=\"#åå…­ã€å‘½åç©ºé—´\" class=\"headerlink\" title=\"åå…­ã€å‘½åç©ºé—´\"></a>åå…­ã€å‘½åç©ºé—´</h2><h3 id=\"16-1-ä»‹ç»\"><a href=\"#16-1-ä»‹ç»\" class=\"headerlink\" title=\"16.1 ä»‹ç»\"></a>16.1 ä»‹ç»</h3><blockquote>\n<p>è¿™ç¯‡æ–‡ç« æè¿°äº†å¦‚ä½•åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨å‘½åç©ºé—´(ä¹‹å‰å«åšâ€å†…éƒ¨æ¨¡å—â€)æ¥ç»„ç»‡ä½ çš„ä»£ç ã€‚å°±åƒæˆ‘ä»¬åœ¨æœ¯è¯­è¯´æ˜é‡Œæåˆ°çš„é‚£æ ·ï¼Œ<code>&quot;å†…éƒ¨æ¨¡å—&quot;</code> ç°åœ¨å«åš <code>&quot;å‘½åç©ºé—´&quot;</code>ã€‚å¦å¤–ï¼Œä»»ä½•ä½¿ç”¨ <code>module</code> å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªå†…éƒ¨æ¨¡å—çš„åœ°æ–¹éƒ½åº”è¯¥ä½¿ç”¨ <code>namespace</code> å…³é”®å­—æ¥æ›¿æ¢ã€‚è¿™å°±é¿å…äº†è®©æ–°çš„ä½¿ç”¨è€…è¢«ç›¸ä¼¼çš„åç§°æ‰€è¿·æƒ‘ã€‚</p>\n</blockquote>\n<ul>\n<li><code>ç¬¬ä¸€æ­¥</code></li>\n</ul>\n<blockquote>\n<p>æˆ‘ä»¬å…ˆæ¥å†™ä¸€æ®µç¨‹åºå¹¶å°†åœ¨æ•´ç¯‡æ–‡ç« ä¸­éƒ½ä½¿ç”¨è¿™ä¸ªä¾‹å­ã€‚æˆ‘ä»¬å®šä¹‰å‡ ä¸ªç®€å•çš„å­—ç¬¦ä¸²éªŒè¯å™¨ï¼Œ</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾ä½ ä¼šä½¿ç”¨å®ƒä»¬æ¥éªŒè¯è¡¨å•é‡Œçš„ç”¨æˆ·è¾“å…¥æˆ–éªŒè¯å¤–éƒ¨æ•°æ®ã€‚</p>\n</blockquote>\n<ul>\n<li><code>æ‰€æœ‰éªŒè¯å™¨éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œ</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> letterRegExp = <span class=\"regexp\">/^[A-Za-z]$/</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> letterRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">  isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP code&quot;</span>] = <span class=\"keyword\">new</span> ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters Only&quot;</span>] = <span class=\"keyword\">new</span> LetterOnlyValidator();</span><br><span class=\"line\"><span class=\"comment\">// show whether each string passed each validator</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> s <span class=\"keyword\">of</span> strings) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> isMatch = validators[name].isAcceptable(s);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&#x27;<span class=\"subst\">$&#123;s&#125;</span>&#x27; <span class=\"subst\">$&#123;isMatch ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> &#x27;<span class=\"subst\">$&#123;name&#125;</span>&#x27;.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"16-2-å‘½åç©ºé—´\"><a href=\"#16-2-å‘½åç©ºé—´\" class=\"headerlink\" title=\"16.2 å‘½åç©ºé—´\"></a>16.2 å‘½åç©ºé—´</h3><blockquote>\n<p>éšç€æ›´å¤šéªŒè¯å™¨çš„åŠ å…¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ‰‹æ®µæ¥ç»„ç»‡ä»£ç ï¼Œä»¥ä¾¿äºåœ¨è®°å½•å®ƒä»¬ç±»å‹çš„åŒæ—¶è¿˜ä¸ç”¨æ‹…å¿ƒä¸å…¶å®ƒå¯¹è±¡äº§ç”Ÿå‘½åå†²çªã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŠŠéªŒè¯å™¨åŒ…è£¹åˆ°ä¸€ä¸ªå‘½åç©ºé—´é‡Œå†…ï¼Œè€Œä¸æ˜¯æŠŠå®ƒä»¬æ”¾åœ¨å…¨å±€ç©ºé—´ä¸‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸‹é¢çš„ä¾‹å­é‡Œï¼ŒæŠŠæ‰€æœ‰ä¸éªŒè¯å™¨ç›¸å…³çš„ç±»å‹éƒ½æ”¾åˆ°ä¸€ä¸ªå«åš <code>Validation</code> çš„å‘½åç©ºé—´é‡Œã€‚å› ä¸ºæˆ‘ä»¬æƒ³è®©è¿™äº›æ¥å£å’Œç±»åœ¨å‘½åç©ºé—´ä¹‹å¤–ä¹Ÿæ˜¯å¯è®¿é—®çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>export</code>ã€‚ç›¸åçš„ï¼Œå˜é‡ <code>LetterRegExp</code> å’Œ <code>numberRegExp</code> æ˜¯å®ç°çš„ç»†èŠ‚ï¼Œä¸éœ€è¦å¯¼å‡ºï¼Œå› æ­¤å®ƒä»¬åœ¨å‘½åç©ºé—´å¤–æ˜¯ä¸èƒ½è®¿é—®çš„ã€‚åœ¨æ–‡ä»¶æœ«å°¾çš„æµ‹è¯•ä»£ç é‡Œï¼Œç”±äºæ˜¯åœ¨å‘½åç©ºé—´ä¹‹å¤–è®¿é—®çš„ï¼Œå› æ­¤éœ€è¦é™å®šç±»å‹çš„åç§°ï¼Œæ¯”å¦‚ <code>Validation.LettersOnlyValidator</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨å‘½åç©ºé—´çš„éªŒè¯å™¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> LetterRegExp = <span class=\"regexp\">/^[A-Za-z]+$/</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LetterOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> LetterRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: Validation.StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP Code&quot;</span>] = <span class=\"keyword\">new</span> Validation.ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters Only&quot;</span>] = <span class=\"keyword\">new</span> Validation.LetterOnlyValidator();</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> s <span class=\"keyword\">of</span> strings) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&#x27;<span class=\"subst\">$&#123;s&#125;</span>&#x27; <span class=\"subst\">$&#123;validators[name].isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> &#x27;<span class=\"subst\">$&#123;name&#125;</span>&#x27;.`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"16-3-åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\"><a href=\"#16-3-åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\" class=\"headerlink\" title=\"16.3 åˆ†ç¦»åˆ°å¤šæ–‡ä»¶\"></a>16.3 åˆ†ç¦»åˆ°å¤šæ–‡ä»¶</h3><blockquote>\n<p>å½“åº”ç”¨å˜å¾—è¶Šæ¥è¶Šå¤§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ä»¥æ–¹ä¾¿ç»´æŠ¤ã€‚</p>\n</blockquote>\n<h4 id=\"16-3-1-å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\"><a href=\"#16-3-1-å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\" class=\"headerlink\" title=\"16.3.1 å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´\"></a>16.3.1 å¤šæ–‡ä»¶ä¸­çš„å‘½åç©ºé—´</h4><blockquote>\n<p>ç°åœ¨ï¼Œæˆ‘ä»¬æŠŠ <code>Validation</code> å‘½åç©ºé—´åˆ†å‰²æˆå¤šä¸ªæ–‡ä»¶ã€‚å°½ç®¡æ˜¯ä¸åŒçš„æ–‡ä»¶ï¼Œå®ƒä»¬ä»æ˜¯åŒä¸€ä¸ªå‘½åç©ºé—´ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨çš„æ—¶å€™å°±å¦‚åŒå®ƒä»¬åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„ä¸€æ ·ã€‚å› ä¸ºä¸åŒæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ å…¥äº†å¼•ç”¨æ ‡ç­¾æ¥å‘Šè¯‰ç¼–è¯‘å™¨æ–‡ä»¶ä¹‹é—´çš„å…³è”ã€‚</p>\n</blockquote>\n<ul>\n<li><code>Validation.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> StringValidator &#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>LetterOnlyValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;;</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> lettersRegExp = <span class=\"regexp\">/^[A-Za-z]+$/</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LettersOnlyValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> lettersRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>ZipCodeValidator.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Validation &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> numberRegExp = <span class=\"regexp\">/^[0-9]+$/</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZipCodeValidator</span> <span class=\"title\">implements</span> <span class=\"title\">StringValidator</span> </span>&#123;</span><br><span class=\"line\">    isAcceptable(s: <span class=\"built_in\">string</span>): <span class=\"built_in\">boolean</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> s.length === <span class=\"number\">5</span> &amp;&amp; numberRegExp.test(s);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Test.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;LettersOnlyValidator.ts&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;ZipCodeValidator.ts&quot; /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Some samples to try</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> strings = [<span class=\"string\">&quot;Hello&quot;</span>, <span class=\"string\">&quot;98052&quot;</span>, <span class=\"string\">&quot;101&quot;</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Validators to use</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> validators: &#123; [s: <span class=\"built_in\">string</span>]: Validation.StringValidator &#125; = &#123;&#125;;</span><br><span class=\"line\">validators[<span class=\"string\">&quot;ZIP code&quot;</span>] = <span class=\"keyword\">new</span> Validation.ZipCodeValidator();</span><br><span class=\"line\">validators[<span class=\"string\">&quot;Letters only&quot;</span>] = <span class=\"keyword\">new</span> Validation.LettersOnlyValidator();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Show whether each string passed each validator</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> s <span class=\"keyword\">of</span> strings) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> name <span class=\"keyword\">in</span> validators) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">`&quot;<span class=\"subst\">$&#123;s&#125;</span>&quot; - <span class=\"subst\">$&#123;validators[name].isAcceptable(s) ? <span class=\"string\">&quot;matches&quot;</span> : <span class=\"string\">&quot;does not match&quot;</span>&#125;</span> <span class=\"subst\">$&#123;name&#125;</span>`</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“æ¶‰åŠåˆ°å¤šæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿æ‰€æœ‰ç¼–è¯‘åçš„ä»£ç éƒ½è¢«åŠ è½½äº†ã€‚æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼ã€‚</p>\n</blockquote>\n<ol>\n<li>ç¬¬ä¸€ç§æ–¹å¼ï¼ŒæŠŠæ‰€æœ‰çš„è¾“å…¥æ–‡ä»¶ç¼–è¯‘ä¸ºä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ <code>--outFile</code> æ ‡è®°ï¼š <code>tsc --outFile sample.js Test.ts</code> ç¼–è¯‘å™¨ä¼šæ ¹æ®æºç é‡Œçš„å¼•ç”¨æ ‡ç­¾è‡ªåŠ¨åœ°å¯¹è¾“å‡ºè¿›è¡Œæ’åºã€‚ä½ ä¹Ÿå¯ä»¥å•ç‹¬åœ°æŒ‡å®šæ¯ä¸ªæ–‡ä»¶ã€‚ <code>tsc --outFile sample.js Validation.ts LetterOnlyValidator.ts ZipCodeValidator.ts Test.ts</code></li>\n<li>ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™æ¯ä¸€ä¸ªæ–‡ä»¶(é»˜è®¤æ–¹å¼)ï¼Œé‚£ä¹ˆæ¯ä¸ªæºæ–‡ä»¶éƒ½ä¼šå¯¹åº”ç”Ÿæˆä¸€ä¸ª <code>JavaScript</code> æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨é¡µé¢ä¸Šé€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŠŠæ‰€æœ‰ç”Ÿæˆçš„ <code>JavaScript</code> æ–‡ä»¶æŒ‰æ­£ç¡®çš„é¡ºåºå¼•è¿›æ¥ï¼Œæ¯”å¦‚ï¼š</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MyTestPage.html (excerpt)</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;Validation.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;LettersOnlyValidator.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;ZipCodeValidator.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span></span></span><br><span class=\"line\"><span class=\"handlebars\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;Test.js&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text/javascript&quot;</span> /&gt;</span></span></span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"16-4-åˆ«å\"><a href=\"#16-4-åˆ«å\" class=\"headerlink\" title=\"16.4 åˆ«å\"></a>16.4 åˆ«å</h3><blockquote>\n<p>å¦ä¸€ç§ç®€åŒ–å‘½åç©ºé—´æ“ä½œçš„æ–¹æ³•æ˜¯ç”¨ <code>import q = x.y.z</code> ç»™å¸¸ç”¨çš„å¯¹è±¡èµ·ä¸€ä¸ªçŸ­çš„åå­—ã€‚ä¸è¦ä¸ç”¨æ¥åŠ è½½æ¨¡å—çš„ <code>import x = require(&#39;name&#39;)</code> è¯­æ³•å¼„æ··äº†ï¼Œè¿™é‡Œçš„è¯­æ³•æ˜¯ä¸ºæŒ‡å®šçš„ç¬¦å·åˆ›å»ºä¸€ä¸ªåˆ«åã€‚ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•ä¸ºä»»æ„æ ‡è¯†ç¬¦åˆ›å»ºåˆ«åï¼Œä¹ŸåŒ…æ‹¬å¯¼å…¥çš„æ¨¡å—ä¸­çš„å¯¹è±¡ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Shapes &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">namespace</span> Polygons &#123;</span><br><span class=\"line\">    <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Triangle</span> </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Square</span> </span>&#123;&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">import</span> Polygons = Shapes.Polygons;</span><br><span class=\"line\"><span class=\"keyword\">let</span> sq = <span class=\"keyword\">new</span> Polygons.Square(); <span class=\"comment\">// Same as &quot;new Shapes.Polygons.Square()&quot;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ <code>require</code> å…³é”®å­—ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨å¯¼å…¥ç¬¦å·çš„é™å®šåèµ‹å€¼ã€‚è¿™ä¸ä½¿ç”¨ <code>var</code> ç›¸ä¼¼ï¼Œä½†å®ƒè¿˜é€‚ç”¨äºç±»å‹å’Œå¯¼å…¥çš„å…·æœ‰å‘½åç©ºé—´å«ä¹‰çš„ç¬¦å·ã€‚é‡è¦çš„æ˜¯ï¼Œå¯¹äºå€¼æ¥è®²ï¼Œ<code>import</code> ä¼šç”Ÿæˆä¸åŸå§‹ç¬¦å·ä¸åŒçš„å¼•ç”¨ï¼Œæ‰€ä»¥æ”¹å˜åˆ«åçš„ <code>var</code> å€¼å¹¶ä¸ä¼šå½±å“åŸå§‹å˜é‡çš„å€¼ã€‚</p>\n</blockquote>\n<h3 id=\"16-5-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\"><a href=\"#16-5-ä½¿ç”¨å…¶å®ƒçš„-JavaScript-åº“\" class=\"headerlink\" title=\"16.5 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“\"></a>16.5 ä½¿ç”¨å…¶å®ƒçš„ JavaScript åº“</h3><blockquote>\n<p>ä¸ºäº†æè¿°ä¸æ˜¯ç”¨ <code>TypeScript</code> ç¼–å†™çš„ç±»åº“çš„ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜ç±»åº“å¯¼å‡ºçš„ <code>API</code>ã€‚ç”±äºå¤§éƒ¨åˆ†ç¨‹åºåº“åªæä¾›å°‘æ•°çš„é¡¶çº§å¯¹è±¡ï¼Œå‘½åç©ºé—´æ˜¯ç”¨æ¥è¡¨ç¤ºå®ƒä»¬çš„ä¸€ä¸ªå¥½åŠæ³•ã€‚æˆ‘ä»¬ç§°å…¶ä¸ºå£°æ˜æ˜¯å› ä¸ºå®ƒä¸æ˜¯å¤–éƒ¨ç¨‹åºçš„å…·ä½“å®ç°ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ <code>.d.ts</code> é‡Œå†™è¿™äº›å£°æ˜ã€‚å¦‚æœä½ ç†Ÿæ‚‰ <code>C/C+</code>+ï¼Œä½ å¯ä»¥æŠŠå®ƒä»¬å½“ä½œ <code>.h</code> æ–‡ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¤–éƒ¨å‘½åç©ºé—´ (<code>declare namespace =&gt;</code>; å£°æ˜å…¨å±€å¯¹è±¡)</p>\n</blockquote>\n<blockquote>\n<p>æµè¡Œçš„ç¨‹åºåº“ <code>D3</code> åœ¨å…¨å±€å¯¹è±¡ <code>d3</code> é‡Œå®šä¹‰å®ƒçš„åŠŸèƒ½ã€‚å› ä¸ºè¿™ä¸ªåº“é€šè¿‡ä¸€ä¸ª<code>&lt;script&gt;</code> æ ‡ç­¾åŠ è½½ (ä¸æ˜¯é€šè¿‡æ¨¡å—åŠ è½½å™¨)ï¼Œå®ƒçš„å£°æ˜æ–‡ä»¶ä½¿ç”¨å†…éƒ¨æ¨¡å—æ¥å®šä¹‰å®ƒçš„ç±»å‹ã€‚ä¸ºäº†è®© <code>TypeScript</code> ç¼–è¯‘å™¨è¯†åˆ«å®ƒçš„ç±»å‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å¤–éƒ¨å‘½åç©ºé—´å£°æ˜ã€‚</p>\n</blockquote>\n<ul>\n<li>æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·å†™</li>\n<li><code>D3.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">namespace</span> D3 &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Selectors &#123;</span><br><span class=\"line\">    select: &#123;</span><br><span class=\"line\">      (selector: <span class=\"built_in\">string</span>): Selection;</span><br><span class=\"line\">      (element: EventTarget): Selection;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Event &#123;</span><br><span class=\"line\">    x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">    y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Base <span class=\"keyword\">extends</span> Selectors &#123;</span><br><span class=\"line\">    event: Event;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">var</span> d3: D3.Base;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\"><a href=\"#åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\" class=\"headerlink\" title=\"åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—\"></a>åä¸ƒã€å‘½åç©ºé—´å’Œæ¨¡å—</h2><h3 id=\"17-1-ä»‹ç»\"><a href=\"#17-1-ä»‹ç»\" class=\"headerlink\" title=\"17.1 ä»‹ç»\"></a>17.1 ä»‹ç»</h3><blockquote>\n<p>è¿™ç¯‡æ–‡ç« å°†æ¦‚æ‹¬ä»‹ç»åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨æ¨¡å—ä¸å‘½åç©ºé—´æ¥ç»„ç»‡ä»£ç çš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¹Ÿä¼šè°ˆåŠå‘½åç©ºé—´å’Œæ¨¡å—çš„é«˜çº§ä½¿ç”¨åœºæ™¯ï¼Œå’Œåœ¨ä½¿ç”¨å®ƒä»¬çš„è¿‡ç¨‹ä¸­å¸¸è§çš„é™·é˜±ã€‚</p>\n</blockquote>\n<h3 id=\"17-2-ä½¿ç”¨å‘½åç©ºé—´\"><a href=\"#17-2-ä½¿ç”¨å‘½åç©ºé—´\" class=\"headerlink\" title=\"17.2 ä½¿ç”¨å‘½åç©ºé—´\"></a>17.2 ä½¿ç”¨å‘½åç©ºé—´</h3><blockquote>\n<p>å‘½åç©ºé—´æ˜¯ä½äºå…¨å±€å‘½åç©ºé—´ä¸‹çš„ä¸€ä¸ªæ™®é€šçš„å¸¦æœ‰åå­—çš„ <code>JavaScript</code> å¯¹è±¡ã€‚è¿™ä»¤å‘½åç©ºé—´ååˆ†å®¹æ˜“ä½¿ç”¨ã€‚å®ƒä»¬å¯ä»¥åœ¨å¤šæ–‡ä»¶ä¸­åŒæ—¶ä½¿ç”¨ï¼Œå¹¶é€šè¿‡ <code>--outFile</code> ç»“åˆåœ¨ä¸€èµ·ã€‚å‘½åç©ºé—´æ˜¯å¸®ä½ ç»„ç»‡ <code>Web</code> åº”ç”¨ä¸é”™çš„æ–¹å¼ï¼Œä½ å¯ä»¥æŠŠæ‰€æœ‰ä¾èµ–éƒ½æ”¾åœ¨ <code>HTML</code> é¡µé¢çš„ <code>&lt;script&gt;</code> æ ‡ç­¾é‡Œã€‚ä½†å°±åƒå…¶å®ƒçš„å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ä¸€æ ·ï¼Œå®ƒå¾ˆéš¾å»è¯†åˆ«ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚</p>\n</blockquote>\n<h3 id=\"17-3-ä½¿ç”¨æ¨¡å—\"><a href=\"#17-3-ä½¿ç”¨æ¨¡å—\" class=\"headerlink\" title=\"17.3 ä½¿ç”¨æ¨¡å—\"></a>17.3 ä½¿ç”¨æ¨¡å—</h3><ol>\n<li>åƒå‘½åç©ºé—´ä¸€æ ·ï¼Œæ¨¡å—å¯ä»¥åŒ…å«ä»£ç å’Œå£°æ˜ã€‚ä¸åŒçš„æ¨¡å—å¯ä»¥å£°æ˜å®ƒçš„ä¾èµ–ã€‚</li>\n<li>æ¨¡å—ä¼šæŠŠä¾èµ–æ·»åŠ åˆ°æ¨¡å—åŠ è½½å™¨ä¸Š(åƒæ˜¯ <code>CommonJS</code> / <code>RequireJS</code>)ã€‚å¯¹äºå°å‹çš„ JS åº”ç”¨æ¥è¯´å¯èƒ½æ²¡å¿…è¦ï¼Œä½†æ˜¯å¯¹äºå¤§å‹åº”ç”¨ï¼Œè¿™ä¸€ç‚¹ç‚¹çš„èŠ±è´¹ä¼šå¸¦æ¥é•¿ä¹…çš„æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤æ€§ä¸Šçš„ä¾¿åˆ©ã€‚æ¨¡å—ä¹Ÿæä¾›äº†æ›´å¥½çš„ä»£ç é‡ç”¨ï¼Œæ›´å¼ºçš„å°é—­æ€§ä»¥åŠæ›´å¥½çš„ä½¿ç”¨å·¥å…·è¿›è¡Œä¼˜åŒ–ã€‚</li>\n<li>å¯¹äº <code>Node.js</code> åº”ç”¨æ¥è¯´ï¼Œæ¨¡å—æ˜¯é»˜è®¤å¹¶æ¨èçš„ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚</li>\n<li>ä» <code>ECMAScript 2015</code> å¼€å§‹ï¼Œæ¨¡å—æˆä¸ºäº†è¯­è¨€å†…ç½®çš„éƒ¨åˆ†ï¼Œåº”è¯¥ä¼šè¢«æ‰€æœ‰æ­£å¸¸çš„è§£é‡Šå¼•æ“æ‰€æ”¯æŒã€‚</li>\n</ol>\n<blockquote>\n<p>å› æ­¤ï¼Œå¯¹äºæ–°é¡¹ç›®æ¥è¯´æ¨èä½¿ç”¨æ¨¡å—ä½œä¸ºç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚</p>\n</blockquote>\n<h3 id=\"17-4-å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\"><a href=\"#17-4-å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\" class=\"headerlink\" title=\"17.4 å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±\"></a>17.4 å‘½åç©ºé—´å’Œæ¨¡å—çš„é™·é˜±</h3><blockquote>\n<p>è¿™éƒ¨åˆ†æˆ‘ä»¬ä¼šæè¿°å¸¸è§çš„å‘½åç©ºé—´å’Œæ¨¡å—çš„ä½¿ç”¨é™·é˜±å’Œå¦‚ä½•å…¶é¿å…å®ƒä»¬ã€‚</p>\n</blockquote>\n<h4 id=\"17-4-1-å¯¹æ¨¡å—ä½¿ç”¨-lt-reference-gt\"><a href=\"#17-4-1-å¯¹æ¨¡å—ä½¿ç”¨-lt-reference-gt\" class=\"headerlink\" title=\"17.4.1 å¯¹æ¨¡å—ä½¿ç”¨ /// &lt;reference&gt;\"></a>17.4.1 å¯¹æ¨¡å—ä½¿ç”¨ <code>/// &lt;reference&gt;</code></h4><blockquote>\n<p>ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯ä½¿ç”¨ <code>/// &lt;reference&gt;</code> å¼•ç”¨æ¨¡å—æ–‡ä»¶ï¼Œåº”è¯¥ä½¿ç”¨ <code>import</code>ã€‚è¦ç†è§£è¿™ä¹‹é—´çš„å·®åˆ«ï¼Œæˆ‘ä»¬é¦–å…ˆåº”è¯¥å¼„æ¸…ç¼–è¯‘å™¨æ˜¯å¦‚ä½•æ ¹æ® <code>import</code> è·¯å¾„(ä¾‹å¦‚ï¼š<code>import x from &quot;...&quot;</code>ï¼›æˆ– <code>import x = require(&quot;...&quot;)</code> é‡Œé¢çš„ <code>...</code>ï¼Œç­‰ç­‰)æ¥å®šä½æ¨¡å—çš„ç±»å‹ä¿¡æ¯çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç¼–è¯‘å™¨é¦–å…ˆå°è¯•å»æŸ¥æ‰¾ç›¸åº”è·¯å¾„ä¸‹çš„ <code>.ts</code>ï¼Œ<code>.tsx</code> å†æˆ–è€… <code>.d.ts</code>ã€‚å¦‚æœè¿™äº›æ–‡ä»¶éƒ½æ‰¾ä¸åˆ°ï¼Œç¼–è¯‘å™¨ä¼šæŸ¥æ‰¾å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚å›æƒ³ä¸€ä¸‹ï¼Œå®ƒä»¬æ˜¯åœ¨ <code>.d.ts</code> æ–‡ä»¶é‡Œå£°æ˜çš„ã€‚</p>\n</blockquote>\n<ul>\n<li><code>myModules.d.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// In a .d.ts file or .ts file that is not a module</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;SomeModule&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fn</span>(<span class=\"params\"></span>): <span class=\"title\">string</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>myOtherModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;myModules.d.ts&quot;&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> m <span class=\"keyword\">from</span> <span class=\"string\">&quot;SomeModule&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„å¼•ç”¨æ ‡ç­¾æŒ‡å®šäº†å¤–æ¥æ¨¡å—çš„ä½ç½®ã€‚è¿™å°±æ˜¯ä¸€äº› <code>TypeScript</code> ä¾‹å­ä¸­å¼•ç”¨ <code>node.d.ts</code> çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<h4 id=\"17-4-2-ä¸å¿…è¦çš„å‘½åç©ºé—´\"><a href=\"#17-4-2-ä¸å¿…è¦çš„å‘½åç©ºé—´\" class=\"headerlink\" title=\"17.4.2 ä¸å¿…è¦çš„å‘½åç©ºé—´\"></a>17.4.2 ä¸å¿…è¦çš„å‘½åç©ºé—´</h4><blockquote>\n<p>å¦‚æœä½ æƒ³æŠŠå‘½åç©ºé—´è½¬æ¢ä¸ºæ¨¡å—ï¼Œå®ƒå¯èƒ½ä¼šåƒä¸‹é¢è¿™ä¸ªæ–‡ä»¶ä¸€æ ·ã€‚</p>\n</blockquote>\n<ul>\n<li><code>shapes.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">namespace</span> Shapes &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Triangle</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Square</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é¡¶å±‚çš„æ¨¡å— <code>Shapes</code> åŒ…è£¹äº† <code>Triangle</code> å’Œ <code>Square</code>ã€‚å¯¹äºä½¿ç”¨å®ƒçš„äººæ¥è¯´è¿™æ˜¯ä»¤äººè¿·æƒ‘å’Œè®¨åŒçš„ã€‚</p>\n</blockquote>\n<ul>\n<li><code>shapeConsumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> shapes <span class=\"keyword\">from</span> <span class=\"string\">&quot;./shapes&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> t = <span class=\"keyword\">new</span> shapes.Shapes.Triangle(); <span class=\"comment\">// shapes.Shapes?</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>TypeScript</code> é‡Œæ¨¡å—çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä¸åŒçš„æ¨¡å—æ°¸è¿œä¹Ÿä¸ä¼šåœ¨ç›¸åŒçš„ä½œç”¨åŸŸå†…ä½¿ç”¨ç›¸åŒçš„åå­—ã€‚å› ä¸ºä½¿ç”¨æ¨¡å—çš„äººä¼šä¸ºå®ƒä»¬å‘½åï¼Œæ‰€ä»¥å®Œå…¨æ²¡æœ‰å¿…è¦æŠŠå¯¼å‡ºçš„ç¬¦å·åŒ…è£¹åœ¨ä¸€ä¸ªå‘½åç©ºé—´é‡Œã€‚å†æ¬¡é‡ç”³ï¼Œä¸åº”è¯¥å¯¹æ¨¡å—ä½¿ç”¨å‘½åç©ºé—´ã€‚ä½¿ç”¨å‘½åç©ºé—´æ˜¯ä¸ºäº†æä¾›é€»è¾‘åˆ†ç»„å’Œé¿å…å‘½åå†²çªã€‚æ¨¡å—æ–‡ä»¶æœ¬èº«å·²ç»æ˜¯ä¸€ä¸ªé€»è¾‘åˆ†ç»„ï¼Œå¹¶ä¸”å®ƒçš„åå­—æ˜¯ç”±å¯¼å…¥è¿™ä¸ªæ¨¡å—çš„ä»£ç æŒ‡å®šï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ä¸ºå¯¼å‡ºçš„å¯¹è±¡å¢åŠ é¢å¤–çš„æ¨¡å—å±‚ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯æ”¹è¿›çš„ä¾‹å­ï¼š</li>\n<li><code>shape.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Triangle</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Square</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* ... */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>shapeConsumer.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> shapes <span class=\"keyword\">from</span> <span class=\"string\">&quot;./shapes&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> t = <span class=\"keyword\">new</span> shapes.Triangle();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"17-4-3-æ¨¡å—çš„å–èˆ\"><a href=\"#17-4-3-æ¨¡å—çš„å–èˆ\" class=\"headerlink\" title=\"17.4.3 æ¨¡å—çš„å–èˆ\"></a>17.4.3 æ¨¡å—çš„å–èˆ</h4><blockquote>\n<p>å°±åƒæ¯ä¸ª <code>JS</code> æ–‡ä»¶å¯¹åº”ä¸€ä¸ªæ¨¡å—ä¸€æ ·ï¼Œ<code>TypeScript</code> é‡Œæ¨¡å—æ–‡ä»¶ä¸ç”Ÿæˆçš„ <code>JS</code> æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚è¿™ä¼šäº§ç”Ÿä¸€ç§å½±å“ï¼Œæ ¹æ®ä½ æŒ‡å®šçš„ç›®æ ‡æ¨¡å—ç³»ç»Ÿçš„ä¸åŒï¼Œä½ å¯èƒ½æ— æ³•è¿æ¥å¤šä¸ªæ¨¡å—æºæ–‡ä»¶ã€‚ä¾‹å¦‚å½“ç›®æ ‡æ¨¡å—ç³»ç»Ÿä¸º <code>commonjs</code> æˆ– <code>umd</code> æ—¶ï¼Œæ— æ³•ä½¿ç”¨ <code>outFile</code> é€‰é¡¹ï¼Œä½†æ˜¯ <code>TypeScript 1.8</code> ä»¥ä¸Šçš„ç‰ˆæœ¬èƒ½å¤Ÿä½¿ç”¨ <code>outFile</code> å½“ç›®æ ‡ä¸º <code>amd</code> æˆ– <code>system</code>ã€‚</p>\n</blockquote>\n<h2 id=\"åå…«ã€æ¨¡å—è§£æ\"><a href=\"#åå…«ã€æ¨¡å—è§£æ\" class=\"headerlink\" title=\"åå…«ã€æ¨¡å—è§£æ\"></a>åå…«ã€æ¨¡å—è§£æ</h2><h3 id=\"18-1-è¯´æ˜\"><a href=\"#18-1-è¯´æ˜\" class=\"headerlink\" title=\"18.1 è¯´æ˜\"></a>18.1 è¯´æ˜</h3><ol>\n<li>æ¨¡å—è§£ææ˜¯æŒ‡ç¼–è¯‘å™¨åœ¨æŸ¥æ‰¾å¯¼å…¥æ¨¡å—å†…å®¹æ—¶æ‰€éµå¾ªçš„æµç¨‹ã€‚å‡è®¾æœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ <code>import &#123; a &#125; from &quot;moduleA&quot;</code>; ä¸ºäº†å»æ£€æŸ¥ä»»ä½•å¯¹ <code>a</code> çš„ä½¿ç”¨ï¼Œç¼–è¯‘å™¨éœ€è¦å‡†ç¡®çš„çŸ¥é“å®ƒè¡¨ç¤ºä»€ä¹ˆï¼Œå¹¶ä¸”éœ€è¦æ£€æŸ¥å®ƒçš„å®šä¹‰ <code>moduleA</code>ã€‚</li>\n<li>è¿™æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæœ‰ä¸ªç–‘é—®â€œ <code>moduleA</code> çš„ç»“æ„æ˜¯æ€æ ·çš„ï¼Ÿâ€ è¿™å¬ä¸Šå»å¾ˆç®€å•ï¼Œä½† moduleA å¯èƒ½åœ¨ä½ å†™çš„æŸä¸ª .ts/.tsx æ–‡ä»¶é‡Œæˆ–è€…åœ¨ä½ çš„ä»£ç æ‰€ä¾èµ–çš„ <code>.d.ts</code> é‡Œã€‚</li>\n<li>é¦–å…ˆï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½è¡¨ç¤ºå¯¼å…¥æ¨¡å—çš„æ–‡ä»¶ã€‚ç¼–è¯‘å™¨ä¼šéµå¾ªä»¥ä¸‹äºŒç§ç­–ç•¥ä¹‹ä¸€ï¼š <code>Classic</code> æˆ– <code>Node</code>ã€‚è¿™äº›ç­–ç•¥ä¼šå‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾ <code>moduleA</code>ã€‚</li>\n<li>å¦‚æœä¸Šé¢çš„è§£æå¤±è´¥äº†å¹¶ä¸”æ¨¡å—åæ˜¯éç›¸å¯¹çš„ï¼ˆä¸”æ˜¯åœ¨â€ <code>moduleA</code> â€œçš„æƒ…å†µä¸‹ï¼‰ï¼Œç¼–è¯‘å™¨ä¼šå°è¯•å®šä½ä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²åˆ°éç›¸å¯¹å¯¼å…¥ã€‚</li>\n</ol>\n<p><code>5</code>. æœ€åï¼Œå¦‚æœç¼–è¯‘å™¨è¿˜æ˜¯ä¸èƒ½è§£æè¿™ä¸ªæ¨¡å—ï¼Œå®ƒä¼šè®°å½•ä¸€ä¸ªé”™è¯¯ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé”™è¯¯å¯èƒ½ä¸º <code>error TS2307: Cannot find module &#39;moduleA&#39;.</code></p>\n<h3 id=\"18-2-ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥\"><a href=\"#18-2-ç›¸å¯¹-vs-éç›¸å¯¹æ¨¡å—å¯¼å…¥\" class=\"headerlink\" title=\"18.2 ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥\"></a>18.2 ç›¸å¯¹ vs. éç›¸å¯¹æ¨¡å—å¯¼å…¥</h3><blockquote>\n<p>æ ¹æ®æ¨¡å—å¼•ç”¨æ˜¯ç›¸å¯¹çš„è¿˜æ˜¯éç›¸å¯¹çš„ï¼Œæ¨¡å—å¯¼å…¥ä¼šä»¥ä¸åŒçš„æ–¹å¼è§£æã€‚</p>\n</blockquote>\n<ol>\n<li>ç›¸å¯¹å¯¼å…¥æ˜¯ä»¥ <code>/ï¼Œ./</code> æˆ– <code>../</code> å¼€å¤´çš„ã€‚ ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> Entry <span class=\"keyword\">from</span> <span class=\"string\">&quot;./components/Entry&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Default &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;../constants/http&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;/mod&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>æ‰€æœ‰å…¶å®ƒå½¢å¼çš„å¯¼å…¥è¢«å½“ä½œéç›¸å¯¹çš„ã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> $ <span class=\"keyword\">from</span> <span class=\"string\">&quot;JQuery&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;@angular/core&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç›¸å¯¹å¯¼å…¥åœ¨è§£ææ—¶æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶ï¼Œå¹¶ä¸èƒ½è§£æä¸ºä¸€ä¸ªå¤–éƒ¨æ¨¡å—å£°æ˜ã€‚ä½ åº”è¯¥ä¸ºä½ è‡ªå·±å†™çš„æ¨¡å—ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ï¼Œè¿™æ ·èƒ½ç¡®ä¿å®ƒä»¬åœ¨è¿è¡Œæ—¶çš„ç›¸å¯¹ä½ç½®ã€‚</p>\n</blockquote>\n<blockquote>\n<p>éç›¸å¯¹æ¨¡å—çš„å¯¼å…¥å¯ä»¥ç›¸å¯¹äº baseUrl æˆ– é€šè¿‡ä¸‹æ–‡ä¼šè®²åˆ°çš„è·¯å¾„æ˜ å°„æ¥è§£æã€‚å®ƒä»¬è¿˜å¯ä»¥è¢«è§£ææˆ å¤–éƒ¨æ¨¡å—å£°æ˜ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä½¿ç”¨éç›¸å¯¹è·¯å¾„æ¥å¯¼å…¥ä½ çš„å¤–éƒ¨ä¾èµ–ã€‚</p>\n</blockquote>\n<h3 id=\"18-3-æ¨¡å—è§£æç­–ç•¥\"><a href=\"#18-3-æ¨¡å—è§£æç­–ç•¥\" class=\"headerlink\" title=\"18.3 æ¨¡å—è§£æç­–ç•¥\"></a>18.3 æ¨¡å—è§£æç­–ç•¥</h3><blockquote>\n<p>å…±æœ‰ä¸¤ç§å¯ç”¨çš„æ¨¡å—è§£æç­–ç•¥ï¼š<code>Node</code> å’Œ <code>Classic</code>ã€‚ ä½ å¯ä»¥ä½¿ç”¨ <code>--moduleResolution</code> æ ‡è®°æ¥æŒ‡å®šä½¿ç”¨å“ªç§æ¨¡å—è§£æç­–ç•¥ã€‚è‹¥æœªæŒ‡å®šï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨äº† -<code>-module AMD \\| System \\| ES2015</code> æ—¶çš„é»˜è®¤å€¼ä¸º <code>Classic</code>ï¼Œå…¶å®ƒæƒ…å†µæ—¶åˆ™ä¸º <code>Node</code>ã€‚</p>\n</blockquote>\n<h4 id=\"18-3-1-Classic\"><a href=\"#18-3-1-Classic\" class=\"headerlink\" title=\"18.3.1 Classic\"></a>18.3.1 Classic</h4><blockquote>\n<p>è¿™ç§ç­–ç•¥åœ¨ä»¥å‰æ˜¯ <code>TypeScript</code> é»˜è®¤çš„è§£æç­–ç•¥ã€‚ ç°åœ¨ï¼Œå®ƒå­˜åœ¨çš„ç†ç”±ä¸»è¦æ˜¯ä¸ºäº†å‘åå…¼å®¹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç›¸å¯¹å¯¼å…¥çš„æ¨¡å—æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒçš„æ–‡ä»¶è¿›è¡Œè§£æçš„ã€‚ å› æ­¤ <code>/root/src/folder/A.ts</code> æ–‡ä»¶é‡Œçš„ <code>import &#123; b &#125; from &quot;./moduleB&quot;</code> ä¼šä½¿ç”¨ä¸‹é¢çš„æŸ¥æ‰¾æµç¨‹ï¼š</p>\n</blockquote>\n<ol>\n<li>/root/src/folder/moduleB.ts``</li>\n<li>/root/src/folder/moduleB.d.ts``</li>\n</ol>\n<blockquote>\n<p>å¯¹äºéç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ï¼Œç¼–è¯‘å™¨åˆ™ä¼šä»åŒ…å«å¯¼å…¥æ–‡ä»¶çš„ç›®å½•å¼€å§‹ä¾æ¬¡å‘ä¸Šçº§ç›®å½•éå†ï¼Œå°è¯•å®šä½åŒ¹é…çš„å£°æ˜æ–‡ä»¶ã€‚</p>\n</blockquote>\n<ul>\n<li><code>æ¯”å¦‚ï¼š</code></li>\n</ul>\n<blockquote>\n<p>æœ‰ä¸€ä¸ªå¯¹ <code>moduleB</code> çš„éç›¸å¯¹å¯¼å…¥ <code>import &#123; b &#125; from &quot;moduleB&quot;</code>ï¼Œå®ƒæ˜¯åœ¨ <code>/root/src/folder/A.ts</code> æ–‡ä»¶é‡Œï¼Œä¼šä»¥å¦‚ä¸‹çš„æ–¹å¼æ¥å®šä½â€<code>moduleB</code>â€œï¼š</p>\n</blockquote>\n<blockquote>\n<ol>\n<li><code>/root/src/folder/moduleB.ts</code></li>\n<li><code>/root/src/folder/moduleB.d.ts</code></li>\n<li><code>/root/src/moduleB.ts</code></li>\n<li><code>/root/src/moduleB.d.ts</code></li>\n<li><code>/root/moduleB.ts</code></li>\n<li><code>/root/moduleB.d.ts</code></li>\n<li><code>/moduleB.ts</code></li>\n<li><code>/moduleB.d.ts</code></li>\n</ol>\n</blockquote>\n<h4 id=\"18-3-2-Node\"><a href=\"#18-3-2-Node\" class=\"headerlink\" title=\"18.3.2 Node\"></a>18.3.2 Node</h4><blockquote>\n<p>è¿™ä¸ªè§£æç­–ç•¥è¯•å›¾åœ¨è¿è¡Œæ—¶æ¨¡ä»¿ <code>Node.js</code> æ¨¡å—è§£ææœºåˆ¶ã€‚å®Œæ•´çš„ <code>Node.js</code> è§£æç®—æ³•å¯ä»¥åœ¨ <code>Node.js module documentation</code> æ‰¾åˆ°ã€‚</p>\n</blockquote>\n<ul>\n<li>Node.js å¦‚ä½•è§£ææ¨¡å—</li>\n</ul>\n<blockquote>\n<p>ä¸ºäº†ç†è§£ <code>TypeScript</code> ç¼–è¯‘ä¾ç…§çš„è§£ææ­¥éª¤ï¼Œå…ˆå¼„æ˜ç™½<code>Node.js</code>æ¨¡å—æ˜¯éå¸¸é‡è¦çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é€šå¸¸ï¼Œåœ¨ <code>Node.js</code> é‡Œå¯¼å…¥æ˜¯é€šè¿‡ <code>require</code> å‡½æ•°è°ƒç”¨è¿›è¡Œçš„ã€‚ <code>Node.js</code> ä¼šæ ¹æ® <code>require</code> æ˜¯ç›¸å¯¹è·¯å¾„è¿˜æ˜¯éç›¸å¯¹è·¯å¾„åšå‡ºä¸åŒçš„è¡Œä¸ºã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç›¸å¯¹è·¯å¾„å¾ˆç®€å•ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶è·¯å¾„ä¸º <code>/root/src/moduleA.js</code>ï¼ŒåŒ…å«äº†ä¸€ä¸ªå¯¼å…¥ <code>var x = require(&quot;./moduleB&quot;)</code>;</p>\n</blockquote>\n<ul>\n<li>Node.js ä»¥ä¸‹é¢çš„é¡ºåºè§£æè¿™ä¸ªå¯¼å…¥</li>\n</ul>\n<ol>\n<li>æ£€æŸ¥ <code>/root/src/moduleB.js</code> æ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€‚</li>\n<li>æ£€æŸ¥ <code>/root/src/moduleB</code> ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª <code>package.json</code> æ–‡ä»¶ï¼Œä¸” <code>package.json</code> æ–‡ä»¶æŒ‡å®šäº†ä¸€ä¸ªâ€<code>main</code>â€œæ¨¡å—ã€‚</li>\n</ol>\n<blockquote>\n<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­é‡Œï¼Œå¦‚æœ <code>Node.js</code> å‘ç°æ–‡ä»¶ <code>/root/src/moduleB/package.json</code> åŒ…å«äº† <code>&#123; &quot;main&quot;: &quot;lib/mainModule.js&quot; &#125;</code>ï¼Œé‚£ä¹ˆ <code>Node.js</code> ä¼šå¼•ç”¨ <code>/root/src/moduleB/lib/mainModule.js</code>ã€‚</p>\n</blockquote>\n<ol start=\"3\">\n<li>æ£€æŸ¥ <code>/root/src/moduleB</code> ç›®å½•æ˜¯å¦åŒ…å«ä¸€ä¸ª <code>index.js</code> æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šè¢«éšå¼åœ°å½“ä½œé‚£ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„â€<code>main</code>â€œæ¨¡å—ã€‚</li>\n</ol>\n<p>ä½ å¯ä»¥é˜…è¯» <code>Node.js</code> æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š<a href=\"https://nodejs.org/api/modules.html#modules_file_modules\">file modules</a> å’Œ <a href=\"https://nodejs.org/api/modules.html#modules_folders_as_modules\">folder modules</a>ã€‚</p>\n<blockquote>\n<p>ä½†æ˜¯ï¼Œéç›¸å¯¹æ¨¡å—åçš„è§£ææ˜¯ä¸ªå®Œå…¨ä¸åŒçš„è¿‡ç¨‹ã€‚<code>Node</code> ä¼šåœ¨ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶å¤¹ <code>node\\_modules</code> é‡ŒæŸ¥æ‰¾ä½ çš„æ¨¡å—ã€‚<code>node\\_modules</code> å¯èƒ½ä¸å½“å‰æ–‡ä»¶åœ¨åŒä¸€çº§ç›®å½•ä¸‹ï¼Œæˆ–è€…åœ¨ä¸Šå±‚ç›®å½•é‡Œã€‚<code>Node</code> ä¼šå‘ä¸Šçº§ç›®å½•éå†ï¼ŒæŸ¥æ‰¾æ¯ä¸ª <code>node\\_modules</code>ç›´åˆ°å®ƒæ‰¾åˆ°è¦åŠ è½½çš„æ¨¡å—ã€‚<br>è¿˜æ˜¯ç”¨ä¸Šé¢ä¾‹å­ï¼Œä½†å‡è®¾ <code>/root/src/moduleA.js</code> é‡Œä½¿ç”¨çš„æ˜¯éç›¸å¯¹è·¯å¾„å¯¼å…¥ <code>var x = require(&quot;moduleB&quot;)</code>;</p>\n</blockquote>\n<ul>\n<li><code>Node</code> åˆ™ä¼šä»¥ä¸‹é¢çš„é¡ºåºå»è§£æ <code>moduleB</code>ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªåŒ¹é…ä¸Šã€‚</li>\n</ul>\n<blockquote>\n<p>1.<code>/root/src/node_modules/moduleB.js</code> 2.<code>/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;main&quot;å±æ€§)</code> 3.<code>/root/src/node_modules/moduleB/index.js</code> 4.<code>/root/node_modules/moduleB.js</code> 5.<code>/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;main&quot;å±æ€§)</code> 6.<code>/root/node_modules/moduleB/index.js</code> 7.<code>/node_modules/moduleB.js</code> 8.<code>/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;main&quot;å±æ€§)</code> 9.<code>/node_modules/moduleB/index.js</code></p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ <code>Node.js</code> åœ¨æ­¥éª¤ï¼ˆ<code>4</code>ï¼‰å’Œï¼ˆ<code>7</code>ï¼‰ä¼šå‘ä¸Šè·³ä¸€çº§ç›®å½•ã€‚<br>ä½ å¯ä»¥é˜…è¯» <code>Node.js</code> æ–‡æ¡£äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼š<a href=\"https://nodejs.org/api/modules.html#modules_loading_from_node_modules_folders\">loading modules from node_modules</a>ã€‚</p>\n</blockquote>\n<ul>\n<li>TypeScript å¦‚ä½•è§£ææ¨¡å—</li>\n</ul>\n<blockquote>\n<p><code>TypeScript</code> æ˜¯æ¨¡ä»¿ <code>Node.js</code> è¿è¡Œæ—¶çš„è§£æç­–ç•¥æ¥åœ¨ç¼–è¯‘é˜¶æ®µå®šä½æ¨¡å—å®šä¹‰æ–‡ä»¶ã€‚å› æ­¤ï¼Œ<code>TypeScript</code> åœ¨ <code>Node</code> è§£æé€»è¾‘åŸºç¡€ä¸Šå¢åŠ äº† TypeScript æºæ–‡ä»¶çš„æ‰©å±•åï¼ˆ <code>.ts</code>ï¼Œ<code>.tsx</code> å’Œ <code>.d.ts</code>ï¼‰ã€‚åŒæ—¶ï¼Œ<code>TypeScript</code> åœ¨ <code>package.json</code> é‡Œä½¿ç”¨å­—æ®µâ€<code>types</code>â€œæ¥è¡¨ç¤ºç±»ä¼¼â€<code>main</code>â€œçš„æ„ä¹‰ <code>-</code> ç¼–è¯‘å™¨ä¼šä½¿ç”¨å®ƒæ¥æ‰¾åˆ°è¦ä½¿ç”¨çš„â€<code>main</code>â€œå®šä¹‰æ–‡ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªå¯¼å…¥è¯­å¥ <code>import &#123; b &#125; from &quot;./moduleB&quot;</code> åœ¨ <code>/root/src/moduleA.ts</code> é‡Œï¼Œä¼šä»¥ä¸‹é¢çš„æµç¨‹æ¥å®šä½ <code>&quot;./moduleB&quot;</code> ï¼š</p>\n<ol>\n<li><code>/root/src/moduleB.ts</code></li>\n<li><code>/root/src/moduleB.tsx</code></li>\n<li><code>/root/src/moduleB.d.ts</code></li>\n<li><code>/root/src/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/root/src/moduleB/index.ts</code></li>\n<li><code>/root/src/moduleB/index.tsx</code></li>\n<li><code>/root/src/moduleB/index.d.ts</code></li>\n</ol>\n</blockquote>\n<blockquote>\n<p>å›æƒ³ä¸€ä¸‹ <code>Node.js</code> å…ˆæŸ¥æ‰¾ <code>moduleB.js</code> æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„ <code>package.json</code>ï¼Œå†ä¹‹åæ˜¯ <code>index.js</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç±»ä¼¼åœ°ï¼Œéç›¸å¯¹çš„å¯¼å…¥ä¼šéµå¾ª <code>Node.js</code> çš„è§£æé€»è¾‘ï¼Œé¦–å…ˆæŸ¥æ‰¾æ–‡ä»¶ï¼Œç„¶åæ˜¯åˆé€‚çš„æ–‡ä»¶å¤¹ã€‚å› æ­¤ <code>/root/src/moduleA.ts</code> ä»¶é‡Œçš„ <code>import &#123; b &#125; from &quot;moduleB&quot;</code> ä¼šä»¥ä¸‹é¢çš„æŸ¥æ‰¾é¡ºåºè§£æï¼š</p>\n<ol>\n<li><code>/root/src/node_modules/moduleB.ts</code></li>\n<li><code>/root/src/node_modules/moduleB.tsx</code></li>\n<li><code>/root/src/node_modules/moduleB.d.ts</code></li>\n<li><code>/root/src/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/root/src/node_modules/moduleB/index.ts</code></li>\n<li><code>/root/src/node_modules/moduleB/index.tsx</code></li>\n<li><code>/root/src/node_modules/moduleB/index.d.ts</code></li>\n<li><code>/root/node_modules/moduleB.ts</code></li>\n<li><code>/root/node_modules/moduleB.tsx</code></li>\n<li><code>/root/node_modules/moduleB.d.ts</code></li>\n<li><code>/root/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/root/node_modules/moduleB/index.ts</code></li>\n<li><code>/root/node_modules/moduleB/index.tsx</code></li>\n<li><code>/root/node_modules/moduleB/index.d.ts</code></li>\n<li><code>/node_modules/moduleB.ts</code></li>\n<li><code>/node_modules/moduleB.tsx</code></li>\n<li><code>/node_modules/moduleB.d.ts</code></li>\n<li><code>/node_modules/moduleB/package.json (å¦‚æœæŒ‡å®šäº†&quot;types&quot;å±æ€§)</code></li>\n<li><code>/node_modules/moduleB/index.ts</code></li>\n<li><code>/node_modules/moduleB/index.tsx</code></li>\n<li><code>/node_modules/moduleB/index.d.ts</code></li>\n</ol>\n</blockquote>\n<blockquote>\n<p>ä¸è¦è¢«è¿™é‡Œæ­¥éª¤çš„æ•°é‡å“åˆ° <code>-</code> <code>TypeScript</code> åªæ˜¯åœ¨æ­¥éª¤ï¼ˆ<code>8</code>ï¼‰å’Œï¼ˆ<code>15</code>ï¼‰å‘ä¸Šè·³äº†ä¸¤æ¬¡ç›®å½•ã€‚ è¿™å¹¶ä¸æ¯” <code>Node.js</code> é‡Œçš„æµç¨‹å¤æ‚ã€‚</p>\n</blockquote>\n<h3 id=\"18-4-é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\"><a href=\"#18-4-é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\" class=\"headerlink\" title=\"18.4 é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°\"></a>18.4 é™„åŠ çš„æ¨¡å—è§£ææ ‡è®°</h3><blockquote>\n<ol>\n<li>æœ‰æ—¶å·¥ç¨‹æºç ç»“æ„ä¸è¾“å‡ºç»“æ„ä¸åŒã€‚ é€šå¸¸æ˜¯è¦ç»è¿‡ä¸€ç³»ç»Ÿçš„æ„å»ºæ­¥éª¤æœ€åç”Ÿæˆè¾“å‡ºã€‚ å®ƒä»¬åŒ…æ‹¬å°† <code>.ts</code> ç¼–è¯‘æˆ <code>.js</code>ï¼Œå°†ä¸åŒä½ç½®çš„ä¾èµ–æ‹·è´è‡³ä¸€ä¸ªè¾“å‡ºä½ç½®ã€‚ æœ€ç»ˆç»“æœå°±æ˜¯è¿è¡Œæ—¶çš„æ¨¡å—åä¸åŒ…å«å®ƒä»¬å£°æ˜çš„æºæ–‡ä»¶é‡Œçš„æ¨¡å—åä¸åŒã€‚ æˆ–è€…æœ€ç»ˆè¾“å‡ºæ–‡ä»¶é‡Œçš„æ¨¡å—è·¯å¾„ä¸ç¼–è¯‘æ—¶çš„æºæ–‡ä»¶è·¯å¾„ä¸åŒäº†ã€‚</li>\n<li><code>TypeScript</code> ç¼–è¯‘å™¨æœ‰ä¸€äº›é¢å¤–çš„æ ‡è®°ç”¨æ¥é€šçŸ¥ç¼–è¯‘å™¨åœ¨æºç ç¼–è¯‘æˆæœ€ç»ˆè¾“å‡ºçš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†å“ªä¸ªè½¬æ¢ã€‚</li>\n<li>æœ‰ä¸€ç‚¹è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ç¼–è¯‘å™¨ä¸ä¼šè¿›è¡Œè¿™äº›è½¬æ¢æ“ä½œï¼›å®ƒåªæ˜¯åˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥æŒ‡å¯¼æ¨¡å—çš„å¯¼å…¥ã€‚</li>\n</ol>\n</blockquote>\n<ul>\n<li><code>Base URL</code></li>\n</ul>\n<blockquote>\n<p>åœ¨åˆ©ç”¨ <code>AMD</code> æ¨¡å—åŠ è½½å™¨çš„åº”ç”¨é‡Œä½¿ç”¨ <code>baseUrl</code> æ˜¯å¸¸è§åšæ³•ï¼Œå®ƒè¦æ±‚åœ¨è¿è¡Œæ—¶æ¨¡å—éƒ½è¢«æ”¾åˆ°äº†ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚è¿™äº›æ¨¡å—çš„æºç å¯ä»¥åœ¨ä¸åŒçš„ç›®å½•ä¸‹ï¼Œä½†æ˜¯æ„å»ºè„šæœ¬ä¼šå°†å®ƒä»¬é›†ä¸­åˆ°ä¸€èµ·ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¾ç½® <code>baseUrl</code> æ¥å‘Šè¯‰ç¼–è¯‘å™¨åˆ°å“ªé‡Œå»æŸ¥æ‰¾æ¨¡å—ã€‚ æ‰€æœ‰ <code>éç›¸å¯¹æ¨¡å—</code> å¯¼å…¥éƒ½ä¼šè¢«å½“åšç›¸å¯¹äº <code>baseUrl</code>ã€‚</p>\n</blockquote>\n<ul>\n<li><code>baseUrl</code> çš„å€¼ç”±ä»¥ä¸‹ä¸¤è€…ä¹‹ä¸€å†³å®šï¼š</li>\n</ul>\n<blockquote>\n<ol>\n<li>å‘½ä»¤è¡Œä¸­ <code>baseUrl</code> çš„å€¼ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºå½“å‰è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰</li>\n<li><code>tsconfig.json</code>é‡Œçš„ <code>baseUrl</code> å±æ€§ï¼ˆå¦‚æœç»™å®šçš„è·¯å¾„æ˜¯ç›¸å¯¹çš„ï¼Œé‚£ä¹ˆå°†ç›¸å¯¹äºâ€˜<code>tsconfig.json</code>â€™è·¯å¾„è¿›è¡Œè®¡ç®—ï¼‰</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ç›¸å¯¹æ¨¡å—çš„å¯¼å…¥ä¸ä¼šè¢«è®¾ç½®çš„ <code>baseUrl</code> æ‰€å½±å“ï¼Œå› ä¸ºå®ƒä»¬æ€»æ˜¯ç›¸å¯¹äºå¯¼å…¥å®ƒä»¬çš„æ–‡ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é˜…è¯»æ›´å¤šå…³äº <code>baseUrl</code> çš„ä¿¡æ¯ <a href=\"https://requirejs.org/docs/api.html#config-baseUrl\">RequireJS</a> å’Œ <a href=\"https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#baseurl\"><code>SystemJS</code></a>ã€‚</p>\n</blockquote>\n<h3 id=\"18-5-è·¯å¾„æ˜ å°„\"><a href=\"#18-5-è·¯å¾„æ˜ å°„\" class=\"headerlink\" title=\"18.5 è·¯å¾„æ˜ å°„\"></a>18.5 è·¯å¾„æ˜ å°„</h3><blockquote>\n<p>æœ‰æ—¶æ¨¡å—ä¸æ˜¯ç›´æ¥æ”¾åœ¨ <code>baseUrl</code> ä¸‹é¢ã€‚ æ¯”å¦‚ï¼Œå……åˆ† â€œ<code>jquery</code>â€œæ¨¡å—åœ°å¯¼å…¥ï¼Œåœ¨è¿è¡Œæ—¶å¯èƒ½è¢«è§£é‡Šä¸ºâ€<code>node\\_modules/jquery/dist/jquery.slim.min.js</code>â€œã€‚ åŠ è½½å™¨ä½¿ç”¨æ˜ å°„é…ç½®æ¥å°†æ¨¡å—åæ˜ å°„åˆ°è¿è¡Œæ—¶çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹ <a href=\"https://requirejs.org/docs/api.html#config-paths\">RequireJs documentation</a> å’Œ <a href=\"https://github.com/systemjs/systemjs/blob/master/docs/config-api.md#paths\">SystemJS documentation</a>ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>TypeScript</code> ç¼–è¯‘å™¨é€šè¿‡ä½¿ç”¨ <code>tsconfig.json</code> æ–‡ä»¶é‡Œçš„ â€œ<code>paths</code>â€œ æ¥æ”¯æŒè¿™æ ·çš„å£°æ˜æ˜ å°„ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¦‚ä½•æŒ‡å®š <code>jquery</code> çš„â€<code>paths</code>â€œçš„ä¾‹å­ã€‚</p>\n</blockquote>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;.&quot;</span>, <span class=\"comment\">// This must be specified if &quot;paths&quot; is.</span></span><br><span class=\"line\">    <span class=\"attr\">&quot;paths&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;jquery&quot;</span>: [<span class=\"string\">&quot;node_modules/jquery/dist/jquery&quot;</span>] <span class=\"comment\">// æ­¤å¤„æ˜ å°„æ˜¯ç›¸å¯¹äº&quot;baseUrl&quot;</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¯·æ³¨æ„â€<code>paths</code>â€œæ˜¯ç›¸å¯¹äºâ€<code>baseUrl</code>â€œè¿›è¡Œè§£æã€‚ å¦‚æœ â€œ<code>baseUrl</code>â€œ è¢«è®¾ç½®æˆäº†é™¤â€<code>.</code>â€œå¤–çš„å…¶å®ƒå€¼ï¼Œæ¯”å¦‚ <code>tsconfig.json</code> æ‰€åœ¨çš„ç›®å½•ï¼Œé‚£ä¹ˆæ˜ å°„å¿…é¡»è¦åšç›¸åº”çš„æ”¹å˜ã€‚å¦‚æœä½ åœ¨ä¸Šä¾‹ä¸­è®¾ç½®äº† <code>&quot;baseUrl&quot;: &quot;./src&quot;</code>ï¼Œé‚£ä¹ˆ <code>jquery</code> åº”è¯¥æ˜ å°„åˆ° <code>&quot;../node\\_modules/jquery/dist/jquery&quot;</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é€šè¿‡â€<code>paths</code>â€œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå¤æ‚çš„æ˜ å°„ï¼ŒåŒ…æ‹¬æŒ‡å®šå¤šä¸ªå›é€€ä½ç½®ã€‚ å‡è®¾åœ¨ä¸€ä¸ªå·¥ç¨‹é…ç½®é‡Œï¼Œæœ‰ä¸€äº›æ¨¡å—ä½äºä¸€å¤„ï¼Œè€Œå…¶å®ƒçš„åˆ™åœ¨å¦ä¸ªçš„ä½ç½®ã€‚ æ„å»ºè¿‡ç¨‹ä¼šå°†å®ƒä»¬é›†ä¸­è‡³ä¸€å¤„ã€‚ å·¥ç¨‹ç»“æ„å¯èƒ½å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">projectRoot</span><br><span class=\"line\">â”œâ”€â”€ folder1</span><br><span class=\"line\">â”‚   â”œâ”€â”€ file1.ts (imports <span class=\"string\">&#x27;folder1/file2&#x27;</span> and <span class=\"string\">&#x27;folder2/file3&#x27;</span>)</span><br><span class=\"line\">â”‚   â””â”€â”€ file2.ts</span><br><span class=\"line\">â”œâ”€â”€ generated</span><br><span class=\"line\">â”‚   â”œâ”€â”€ folder1</span><br><span class=\"line\">â”‚   â””â”€â”€ folder2</span><br><span class=\"line\">â”‚       â””â”€â”€ file3.ts</span><br><span class=\"line\">â””â”€â”€ tsconfig.json</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç›¸åº”çš„ <code>tsconfig.json</code> æ–‡ä»¶å¦‚ä¸‹ï¼š</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;.&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;paths&quot;</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">&quot;*&quot;</span>: [<span class=\"string\">&quot;*&quot;</span>, <span class=\"string\">&quot;generated/*&quot;</span>]</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒå‘Šè¯‰ç¼–è¯‘å™¨æ‰€æœ‰åŒ¹é… <code>&quot;\\*&quot;</code>ï¼ˆæ‰€æœ‰çš„å€¼ï¼‰æ¨¡å¼çš„æ¨¡å—å¯¼å…¥ä¼šåœ¨ä»¥ä¸‹ä¸¤ä¸ªä½ç½®æŸ¥æ‰¾ï¼š</p>\n<ol>\n<li><code>&quot;\\*&quot;</code>ï¼š è¡¨ç¤ºåå­—ä¸å‘ç”Ÿæ”¹å˜ï¼Œæ‰€ä»¥æ˜ å°„ä¸º Â <code>=&gt;</code> <code>/</code></li>\n<li>â€œ<code>generated/</code>â€œè¡¨ç¤ºæ¨¡å—åæ·»åŠ äº†â€œ<code>generated</code>â€å‰ç¼€ï¼Œæ‰€ä»¥æ˜ å°„ä¸º <code>&lt;moduleName&gt; =&gt; &lt;baseUrl&gt;/generated/&lt;moduleName&gt;</code></li>\n</ol>\n</blockquote>\n<ul>\n<li><code>æŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œç¼–è¯‘å™¨å°†ä¼šå¦‚ä¸‹å°è¯•è§£æè¿™ä¸¤ä¸ªå¯¼å…¥ï¼š</code></li>\n</ul>\n<blockquote>\n<p>(i). å¯¼å…¥<code>&#39;folder1/file2&#39;</code></p>\n<ol>\n<li>åŒ¹é… <code>&#39;\\*&#39;</code> æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚</li>\n<li>å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š<code>&#39;\\*&#39; -&gt; folder1/file2</code>ã€‚</li>\n<li>æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ <code>baseUrl</code> åˆå¹¶ <code>-&gt; projectRoot/folder1/file2.ts</code>ã€‚</li>\n<li>æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚</li>\n</ol>\n<p>(ii). å¯¼å…¥<code>&#39;folder2/file3&#39;</code></p>\n<ol>\n<li>åŒ¹é… <code>&#39;\\*&#39;</code> æ¨¡å¼ä¸”é€šé…ç¬¦æ•è·åˆ°æ•´ä¸ªåå­—ã€‚</li>\n<li>å°è¯•åˆ—è¡¨é‡Œçš„ç¬¬ä¸€ä¸ªæ›¿æ¢ï¼š<code>&#39;\\*&#39; -&gt; folder2/file3</code>ã€‚</li>\n<li>æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ <code>baseUrl</code> åˆå¹¶ <code>-&gt; projectRoot/folder2/file3.ts</code>ã€‚</li>\n<li>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè·³åˆ°ç¬¬äºŒä¸ªæ›¿æ¢ã€‚</li>\n<li>ç¬¬äºŒä¸ªæ›¿æ¢ï¼š<code>&#39;generated/&#39; -&gt; generated/folder2/file3</code>ã€‚</li>\n<li>æ›¿æ¢ç»“æœä¸ºéç›¸å¯¹å - ä¸ <code>baseUrl</code> åˆå¹¶ <code>-&amp;gt; projectRoot/generated/folder2/file3.ts</code>ã€‚</li>\n<li>æ–‡ä»¶å­˜åœ¨ã€‚å®Œæˆã€‚</li>\n</ol>\n</blockquote>\n<ul>\n<li>åˆ©ç”¨ <code>rootDirs</code> æŒ‡å®šè™šæ‹Ÿç›®å½•</li>\n</ul>\n<blockquote>\n<p>æœ‰æ—¶å¤šä¸ªç›®å½•ä¸‹çš„å·¥ç¨‹æºæ–‡ä»¶åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œåˆå¹¶æ”¾åœ¨æŸä¸ªè¾“å‡ºç›®å½•ä¸‹ã€‚ è¿™å¯ä»¥çœ‹åšä¸€äº›æºç›®å½•åˆ›å»ºäº†ä¸€ä¸ªâ€œè™šæ‹Ÿâ€ç›®å½•ã€‚ åˆ©ç”¨ <code>rootDirs</code>ï¼Œå¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆè¿™ä¸ªè™šæ‹Ÿç›®å½•çš„ <code>roots</code>ï¼› å› æ­¤ç¼–è¯‘å™¨å¯ä»¥åœ¨â€œè™šæ‹Ÿâ€ç›®å½•ä¸‹è§£æç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå°±å¥½åƒå®ƒä»¬è¢«åˆå¹¶åœ¨äº†ä¸€èµ·ä¸€æ ·ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ¯”å¦‚ï¼Œæœ‰ä¸‹é¢çš„å·¥ç¨‹ç»“æ„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">src</span><br><span class=\"line\"> â””â”€â”€ views</span><br><span class=\"line\">     â””â”€â”€ view1.ts (imports <span class=\"string\">&#x27;./template1&#x27;</span>)</span><br><span class=\"line\">     â””â”€â”€ view2.ts</span><br><span class=\"line\"></span><br><span class=\"line\"> generated</span><br><span class=\"line\"> â””â”€â”€ templates</span><br><span class=\"line\">         â””â”€â”€ views</span><br><span class=\"line\">             â””â”€â”€ template1.ts (imports <span class=\"string\">&#x27;./view2&#x27;</span>)</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>src/views</code> é‡Œçš„æ–‡ä»¶æ˜¯ç”¨äºæ§åˆ¶ UI çš„ç”¨æˆ·ä»£ç ã€‚ <code>generated/templates</code> æ˜¯ <code>UI</code> æ¨¡ç‰ˆï¼Œåœ¨æ„å»ºæ—¶é€šè¿‡æ¨¡ç‰ˆç”Ÿæˆå™¨è‡ªåŠ¨ç”Ÿæˆã€‚æ„å»ºä¸­çš„ä¸€æ­¥ä¼šå°† <code>/src/views</code> å’Œ <code>/generated/templates/views</code> çš„è¾“å‡ºæ‹·è´åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ åœ¨è¿è¡Œæ—¶ï¼Œè§†å›¾å¯ä»¥å‡è®¾å®ƒçš„æ¨¡ç‰ˆä¸å®ƒåŒåœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ <code>&quot;./template&quot;</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯ä»¥ä½¿ç”¨â€<code>rootDirs</code>â€œæ¥å‘Šè¯‰ç¼–è¯‘å™¨ã€‚â€<code>rootDirs</code>â€œæŒ‡å®šäº†ä¸€ä¸ª <code>roots</code> åˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œçš„å†…å®¹ä¼šåœ¨è¿è¡Œæ—¶è¢«åˆå¹¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å› æ­¤ï¼Œé’ˆå¯¹è¿™ä¸ªä¾‹å­ï¼Œ <code>tsconfig.json</code> å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;rootDirs&quot;</span>: [<span class=\"string\">&quot;src/views&quot;</span>, <span class=\"string\">&quot;generated/templates/views&quot;</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¯å½“ç¼–è¯‘å™¨åœ¨æŸä¸€ <code>rootDirs</code> çš„å­ç›®å½•ä¸‹å‘ç°äº†ç›¸å¯¹æ¨¡å—å¯¼å…¥ï¼Œå®ƒå°±ä¼šå°è¯•ä»æ¯ä¸€ä¸ª <code>rootDirs</code> ä¸­å¯¼å…¥ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>rootDirs</code> çš„çµæ´»æ€§ä¸ä»…ä»…å±€é™äºå…¶æŒ‡å®šäº†è¦åœ¨é€»è¾‘ä¸Šåˆå¹¶çš„ç‰©ç†ç›®å½•åˆ—è¡¨ã€‚å®ƒæä¾›çš„æ•°ç»„å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„ä»»ä½•åå­—çš„ç›®å½•ï¼Œä¸è®ºå®ƒä»¬æ˜¯å¦å­˜åœ¨ã€‚è¿™å…è®¸ç¼–è¯‘å™¨ä»¥ç±»å‹å®‰å…¨çš„æ–¹å¼å¤„ç†å¤æ‚æ†ç»‘( <code>bundles</code> )å’Œè¿è¡Œæ—¶çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ¡ä»¶å¼•å…¥å’Œå·¥ç¨‹ç‰¹å®šçš„åŠ è½½å™¨æ’ä»¶ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¾æƒ³è¿™æ ·ä¸€ä¸ªå›½é™…åŒ–çš„åœºæ™¯ï¼Œæ„å»ºå·¥å…·è‡ªåŠ¨æ’å…¥ç‰¹å®šçš„è·¯å¾„è®°å·æ¥ç”Ÿæˆé’ˆå¯¹ä¸åŒåŒºåŸŸçš„æ†ç»‘ï¼Œæ¯”å¦‚å°† <code>\\#&#123;locale&#125;</code> åšä¸ºç›¸å¯¹æ¨¡å—è·¯å¾„ <code>./\\#&#123;locale&#125;/messages</code> çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªå‡å®šçš„è®¾ç½®ä¸‹ï¼Œå·¥å…·ä¼šæšä¸¾æ”¯æŒçš„åŒºåŸŸï¼Œå°†æŠ½åƒçš„è·¯å¾„æ˜ å°„æˆ <code>./zh/messages</code>ï¼Œ<code>./de/messages</code> ç­‰ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾æ¯ä¸ªæ¨¡å—éƒ½ä¼šå¯¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚æ¯”å¦‚ <code>./zh/messages</code> å¯èƒ½åŒ…å«ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> [<span class=\"string\">&quot;æ‚¨å¥½å—&quot;</span>, <span class=\"string\">&quot;å¾ˆé«˜å…´è®¤è¯†ä½ &quot;</span>];</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åˆ©ç”¨ <code>rootDirs</code> æˆ‘ä»¬å¯ä»¥è®©ç¼–è¯‘å™¨äº†è§£è¿™ä¸ªæ˜ å°„å…³ç³»ï¼Œä»è€Œä¹Ÿå…è®¸ç¼–è¯‘å™¨èƒ½å¤Ÿå®‰å…¨åœ°è§£æ <code>./\\#&#123;locale&#125;/messages</code>ï¼Œå°±ç®—è¿™ä¸ªç›®å½•æ°¸è¿œéƒ½ä¸å­˜åœ¨ã€‚æ¯”å¦‚ï¼Œä½¿ç”¨ä¸‹é¢çš„ <code>tsconfig.json</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;rootDirs&quot;</span>: [<span class=\"string\">&quot;src/zh&quot;</span>, <span class=\"string\">&quot;src/de&quot;</span>, <span class=\"string\">&quot;src/#&#123;locale&#125;&quot;</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç¼–è¯‘å™¨ç°åœ¨å¯ä»¥å°† <code>import messages from &#39;./#&#123;locale&#125;/messages&#39;</code> è§£æä¸º <code>import messages from &#39;./zh/messages&#39;</code> ç”¨åšå·¥å…·æ”¯æŒçš„ç›®çš„ï¼Œå¹¶å…è®¸åœ¨å¼€å‘æ—¶ä¸å¿…äº†è§£åŒºåŸŸä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"18-6-è·Ÿè¸ªæ¨¡å—è§£æ\"><a href=\"#18-6-è·Ÿè¸ªæ¨¡å—è§£æ\" class=\"headerlink\" title=\"18.6 è·Ÿè¸ªæ¨¡å—è§£æ\"></a>18.6 è·Ÿè¸ªæ¨¡å—è§£æ</h3><blockquote>\n<p>å¦‚ä¹‹å‰è®¨è®ºï¼Œç¼–è¯‘å™¨åœ¨è§£ææ¨¡å—æ—¶å¯èƒ½è®¿é—®å½“å‰æ–‡ä»¶å¤¹å¤–çš„æ–‡ä»¶ã€‚ è¿™ä¼šå¯¼è‡´å¾ˆéš¾è¯Šæ–­æ¨¡å—ä¸ºä»€ä¹ˆæ²¡æœ‰è¢«è§£æï¼Œæˆ–è§£æåˆ°äº†é”™è¯¯çš„ä½ç½®ã€‚ é€šè¿‡ <code>--traceResolution</code> å¯ç”¨ç¼–è¯‘å™¨çš„æ¨¡å—è§£æè·Ÿè¸ªï¼Œå®ƒä¼šå‘Šè¯‰æˆ‘ä»¬åœ¨æ¨¡å—è§£æè¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä½¿ç”¨äº† <code>typescript</code> æ¨¡å—çš„ç®€å•åº”ç”¨ã€‚<code>app.ts</code> é‡Œæœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¼å…¥ <code>import * as ts from &quot;typescript&quot;</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">â”‚   tsconfig.json</span><br><span class=\"line\">â”œâ”€â”€â”€node_modules</span><br><span class=\"line\">â”‚   â””â”€â”€â”€typescript</span><br><span class=\"line\">â”‚       â””â”€â”€â”€lib</span><br><span class=\"line\">â”‚               typescript.d.ts</span><br><span class=\"line\">â””â”€â”€â”€src</span><br><span class=\"line\">        app.ts</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>--traceResolution</code> è°ƒç”¨ç¼–è¯‘å™¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc --traceResolution</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">======== Resolving <span class=\"built_in\">module</span> <span class=\"string\">&#x27;typescript&#x27;</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;src/app.ts&#x27;</span>. ========</span><br><span class=\"line\">Module resolution kind is not specified, using <span class=\"string\">&#x27;NodeJs&#x27;</span>.</span><br><span class=\"line\">Loading <span class=\"built_in\">module</span> <span class=\"string\">&#x27;typescript&#x27;</span> <span class=\"keyword\">from</span> <span class=\"string\">&#x27;node_modules&#x27;</span> folder.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript.ts&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript.tsx&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript.d.ts&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;src/node_modules/typescript/package.json&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript.ts&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript.tsx&#x27;</span> does not exist.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript.d.ts&#x27;</span> does not exist.</span><br><span class=\"line\">Found <span class=\"string\">&#x27;package.json&#x27;</span> at <span class=\"string\">&#x27;node_modules/typescript/package.json&#x27;</span>.</span><br><span class=\"line\"><span class=\"string\">&#x27;package.json&#x27;</span> has <span class=\"string\">&#x27;types&#x27;</span> field <span class=\"string\">&#x27;./lib/typescript.d.ts&#x27;</span> that references <span class=\"string\">&#x27;node_modules/typescript/lib/typescript.d.ts&#x27;</span>.</span><br><span class=\"line\">File <span class=\"string\">&#x27;node_modules/typescript/lib/typescript.d.ts&#x27;</span> exist - use it <span class=\"keyword\">as</span> a <span class=\"built_in\">module</span> resolution result.</span><br><span class=\"line\">======== Module name <span class=\"string\">&#x27;typescript&#x27;</span> was successfully resolved to <span class=\"string\">&#x27;node_modules/typescript/lib/typescript.d.ts&#x27;</span>. ========</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>éœ€è¦ç•™æ„çš„åœ°æ–¹ï¼š</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>å¯¼å…¥çš„åå­—åŠä½ç½® <code>======== Resolving module &#39;typescript&#39; from &#39;src/app.ts&#39;. ========</code></li>\n<li>ç¼–è¯‘å™¨ä½¿ç”¨çš„ç­–ç•¥ <code>Module resolution kind is not specified, using &#39;NodeJs&#39;.</code></li>\n<li>ä» <code>npm</code> åŠ è½½ <code>types</code> <code>&#39;package.json&#39; has &#39;types&#39; field &#39;./lib/typescript.d.ts&#39; that references &#39;node\\_modules/typescript/lib/typescript.d.ts&#39;.</code></li>\n<li>æœ€ç»ˆç»“æœ <code>======== Module name &#39;typescript&#39; was successfully resolved to &#39;node\\_modules/typescript/lib/typescript.d.ts&#39;. ========</code></li>\n</ol>\n</blockquote>\n<ul>\n<li>ä½¿ç”¨ <code>--noResolve</code></li>\n</ul>\n<blockquote>\n<p>æ­£å¸¸æ¥è®²ç¼–è¯‘å™¨ä¼šåœ¨å¼€å§‹ç¼–è¯‘ä¹‹å‰è§£ææ¨¡å—å¯¼å…¥ã€‚ æ¯å½“å®ƒæˆåŠŸåœ°è§£æäº†å¯¹ä¸€ä¸ªæ–‡ä»¶ <code>import</code>ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ä¼šåŠ åˆ°ä¸€ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œï¼Œä»¥ä¾›ç¼–è¯‘å™¨ç¨åå¤„ç†ã€‚<code>--noResolve</code> ç¼–è¯‘é€‰é¡¹å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦æ·»åŠ ä»»ä½•ä¸æ˜¯åœ¨å‘½ä»¤è¡Œä¸Šä¼ å…¥çš„æ–‡ä»¶åˆ°ç¼–è¯‘åˆ—è¡¨ã€‚ ç¼–è¯‘å™¨ä»ç„¶ä¼šå°è¯•è§£ææ¨¡å—ï¼Œä½†æ˜¯åªè¦æ²¡æœ‰æŒ‡å®šè¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¸ä¼šè¢«åŒ…å«åœ¨å†…ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>æ¯”å¦‚</code>:</p>\n</blockquote>\n<ul>\n<li><code>app.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> A <span class=\"keyword\">from</span> <span class=\"string\">&quot;moduleA&quot;</span>; <span class=\"comment\">// OK, moduleA passed on the command-line</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> * <span class=\"keyword\">as</span> B <span class=\"keyword\">from</span> <span class=\"string\">&quot;moduleB&quot;</span>; <span class=\"comment\">// Error TS2307: Cannot find module &#x27;moduleB&#x27;.</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc app.ts moduleA.ts --noResolve</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>--noResolve</code> ç¼–è¯‘ <code>app.ts</code>ï¼š</p>\n</blockquote>\n<blockquote>\n<ol>\n<li>å¯èƒ½æ­£ç¡®æ‰¾åˆ° <code>moduleA</code>ï¼Œå› ä¸ºå®ƒåœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šäº†ã€‚</li>\n<li>æ‰¾ä¸åˆ° <code>moduleB</code>ï¼Œå› ä¸ºæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸Šä¼ é€’ã€‚</li>\n</ol>\n</blockquote>\n<h3 id=\"18-7-å¸¸è§é—®é¢˜\"><a href=\"#18-7-å¸¸è§é—®é¢˜\" class=\"headerlink\" title=\"18.7 å¸¸è§é—®é¢˜\"></a>18.7 å¸¸è§é—®é¢˜</h3><ul>\n<li>ä¸ºä»€ä¹ˆåœ¨ <code>exclude</code> åˆ—è¡¨é‡Œçš„æ¨¡å—è¿˜ä¼šè¢«ç¼–è¯‘å™¨ä½¿ç”¨</li>\n</ul>\n<blockquote>\n<p><code>tsconfig.json</code> å°†æ–‡ä»¶å¤¹è½¬å˜ä¸€ä¸ªâ€œå·¥ç¨‹â€ å¦‚æœä¸æŒ‡å®šä»»ä½• â€œ<code>exclude</code>â€ æˆ– â€œ<code>files</code>â€ï¼Œæ–‡ä»¶å¤¹é‡Œçš„æ‰€æœ‰æ–‡ä»¶åŒ…æ‹¬ <code>tsconfig.json</code> å’Œ æ‰€æœ‰çš„å­ç›®å½• éƒ½ä¼šåœ¨ç¼–è¯‘åˆ—è¡¨é‡Œã€‚ å¦‚æœä½ æƒ³åˆ©ç”¨ â€œ<code>exclude</code>â€æ’é™¤æŸäº›æ–‡ä»¶ï¼Œç”šè‡³ä½ æƒ³æŒ‡å®šæ‰€æœ‰è¦ç¼–è¯‘çš„æ–‡ä»¶åˆ—è¡¨ï¼Œè¯·ä½¿ç”¨â€œ<code>files</code>â€ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æœ‰äº›æ˜¯è¢« <code>tsconfig.json</code> è‡ªåŠ¨åŠ å…¥çš„ã€‚ å®ƒä¸ä¼šæ¶‰åŠåˆ°ä¸Šé¢è®¨è®ºçš„æ¨¡å—è§£æã€‚ å¦‚æœç¼–è¯‘å™¨è¯†åˆ«å‡ºä¸€ä¸ªæ–‡ä»¶æ˜¯æ¨¡å—å¯¼å…¥ç›®æ ‡ï¼Œå®ƒå°±ä¼šåŠ åˆ°ç¼–è¯‘åˆ—è¡¨é‡Œï¼Œä¸ç®¡å®ƒæ˜¯å¦è¢«æ’é™¤äº†ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å› æ­¤ï¼Œè¦ä»ç¼–è¯‘åˆ—è¡¨ä¸­æ’é™¤ä¸€ä¸ªæ–‡ä»¶ï¼Œä½ éœ€è¦åœ¨æ’é™¤å®ƒçš„åŒæ—¶ï¼Œè¿˜è¦æ’é™¤æ‰€æœ‰å¯¹å®ƒè¿›è¡Œ <code>import</code> æˆ–ä½¿ç”¨äº† <code>/// &lt;reference path=&quot;...&quot; /&gt;</code> æŒ‡ä»¤çš„æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h2 id=\"åä¹ã€å£°æ˜åˆå¹¶\"><a href=\"#åä¹ã€å£°æ˜åˆå¹¶\" class=\"headerlink\" title=\"åä¹ã€å£°æ˜åˆå¹¶\"></a>åä¹ã€å£°æ˜åˆå¹¶</h2><h3 id=\"19-1-ä»‹ç»\"><a href=\"#19-1-ä»‹ç»\" class=\"headerlink\" title=\"19.1 ä»‹ç»\"></a>19.1 ä»‹ç»</h3><blockquote>\n<p><code>TypeScript</code> ä¸­æœ‰äº›ç‹¬ç‰¹çš„æ¦‚å¿µå¯ä»¥åœ¨ç±»å‹å±‚é¢ä¸Šæè¿° <code>JavaScript</code> å¯¹è±¡çš„æ¨¡å‹ã€‚è¿™å…¶ä¸­å°¤å…¶ç‹¬ç‰¹çš„ä¸€ä¸ªä¾‹å­ â€œå£°æ˜åˆå¹¶â€ çš„æ¦‚å¿µã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œå°†æœ‰åŠ©äºæ“ä½œç°æœ‰çš„ <code>JavaScript</code> ä»£ç ã€‚åŒæ—¶ï¼Œä¹Ÿä¼šæœ‰åŠ©äºç†è§£æ›´å¤šé«˜çº§æŠ½è±¡çš„æ¦‚å¿µã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹æœ¬æ–‡ä»¶æ¥è®²ï¼Œâ€<code>å£°æ˜åˆå¹¶</code>â€œ æ˜¯æŒ‡ç¼–è¯‘å™¨å°†é’ˆå¯¹åŒä¸€ä¸ªåå­—çš„ä¸¤ä¸ªç‹¬ç«‹å£°æ˜åˆå¹¶ä¸ºå•ä¸€å£°æ˜ã€‚åˆå¹¶åçš„å£°æ˜åŒæ—¶æ‹¥æœ‰åŸå…ˆä¸¤ä¸ªå£°æ˜çš„ç‰¹æ€§ã€‚ä»»ä½•æ•°é‡çš„å£°æ˜éƒ½å¯è¢«åˆå¹¶ï¼›ä¸å±€é™äºä¸¤ä¸ªå£°æ˜ã€‚</p>\n</blockquote>\n<h3 id=\"19-2-åŸºç¡€æ¦‚å¿µ\"><a href=\"#19-2-åŸºç¡€æ¦‚å¿µ\" class=\"headerlink\" title=\"19.2 åŸºç¡€æ¦‚å¿µ\"></a>19.2 åŸºç¡€æ¦‚å¿µ</h3><blockquote>\n<p><code>TypeScript</code> ä¸­çš„å£°æ˜ä¼šåˆ›å»ºä»¥ä¸‹ä¸‰ç§å®ä½“ä¹‹ä¸€ï¼š<code>å‘½åç©ºé—´</code>ï¼Œ<code>ç±»å‹</code> æˆ– <code>å€¼</code>ã€‚åˆ›å»ºå‘½åç©ºé—´çš„å£°æ˜ä¼šæ–°å»ºä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒåŒ…å«äº†ç”¨(.)ç¬¦å·æ¥è®¿é—®æ—¶ä½¿ç”¨çš„åå­—ã€‚åˆ›å»ºç±»å‹çš„å£°æ˜æ˜¯ï¼šç”¨å£°æ˜çš„æ¨¡å‹åˆ›å»ºä¸€ä¸ªç±»å‹å¹¶ç»‘å®šåˆ°ç»™å®šçš„åå­—ä¸Šã€‚<br>æœ€åï¼Œåˆ›å»ºå€¼çš„å£°æ˜ä¼šåˆ›å»ºåœ¨ <code>JavaScript</code> è¾“å‡ºä¸­çœ‹åˆ°çš„å€¼ã€‚</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Declaration Type</th>\n<th align=\"left\">Namespace</th>\n<th align=\"left\">Type</th>\n<th align=\"left\">Value</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><code>Namespace</code></td>\n<td align=\"left\">X</td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Class</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Enum</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Interface</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>Type Alias</code></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\"><code>Function</code></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n</tr>\n<tr>\n<td align=\"left\"><code>Variable</code></td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n<td align=\"left\">X</td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>ç†è§£æ¯ä¸ªå£°æ˜åˆ›å»ºäº†ä»€ä¹ˆï¼Œæœ‰åŠ©äºç†è§£å½“å£°æ˜åˆå¹¶æ—¶ï¼Œæœ‰å“ªäº›ä¸œè¥¿è¢«åˆå¹¶äº†ã€‚</p>\n</blockquote>\n<h3 id=\"19-3-åˆå¹¶æ¥å£\"><a href=\"#19-3-åˆå¹¶æ¥å£\" class=\"headerlink\" title=\"19.3 åˆå¹¶æ¥å£\"></a>19.3 åˆå¹¶æ¥å£</h3><blockquote>\n<p>æœ€ç®€å•æœ€å¸¸è§çš„å£°æ˜åˆå¹¶ç±»å‹æ˜¯æ¥å£åˆå¹¶ã€‚ä»æ ¹æœ¬ä¸Šè¯´ï¼Œåˆå¹¶çš„æœºåˆ¶æ˜¯æŠŠåŒæ–¹çš„æˆå‘˜æ”¾åˆ°ä¸€ä¸ªåŒåçš„æ¥å£é‡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">interface</span> Box &#123;</span><br><span class=\"line\">  height: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  width: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Box &#123;</span><br><span class=\"line\">  scale: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> box: Box = &#123; <span class=\"attr\">height</span>: <span class=\"number\">5</span>, <span class=\"attr\">width</span>: <span class=\"number\">6</span>, <span class=\"attr\">scale</span>: <span class=\"number\">10</span> &#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¥å£çš„éå‡½æ•°æˆå‘˜åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚å¦‚æœå®ƒä»¬ä¸æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆå®ƒä»¬å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ã€‚å¦‚æœä¸¤ä¸ªæ¥å£ä¸­åŒæ—¶å£°æ˜äº†åŒåçš„éå‡½æ•°æˆå‘˜ä¸”å®ƒä»¬çš„ç±»å‹ä¸åŒï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¯¹äºå‡½æ•°æˆå‘˜ï¼Œæ¯ä¸ªåŒåå‡½æ•°å£°æ˜éƒ½ä¼šè¢«å½“æˆè¿™ä¸ªå‡½æ•°çš„ä¸€ä¸ªé‡è½½ã€‚åŒæ—¶éœ€è¦æ³¨æ„ï¼Œå½“æ¥å£ <code>A</code> ä¸åæ¥çš„æ¥å£ <code>A</code> åˆå¹¶æ—¶ï¼Œåé¢çš„æ¥å£å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Animal): Animal;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Sheep): Sheep;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Dog): Dog;</span><br><span class=\"line\">  clone(animal: Cat): Cat;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// è¿™ä¸‰ä¸ªæ¥å£åˆå¹¶æˆä¸€ä¸ªå£°æ˜ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Cloner &#123;</span><br><span class=\"line\">  clone(animal: Dog): Dog;</span><br><span class=\"line\">  clone(animal: Cat): Cat;</span><br><span class=\"line\">  clone(animal: Sheep): Sheep;</span><br><span class=\"line\">  clone(animal: Animal): Animal;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„æ¯ç»„æ¥å£é‡Œçš„å£°æ˜é¡ºåºä¿æŒä¸å˜ï¼Œä½†å„ç»„æ¥å£ä¹‹é—´çš„é¡ºåºæ˜¯åæ¥çš„æ¥å£é‡è½½å‡ºç°åœ¨é å‰çš„ä½ç½®ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è¿™ä¸ªè§„åˆ™æœ‰ä¸€ä¸ªä¾‹å¤–æ˜¯å½“å‡ºç°ç‰¹æ®Šçš„å‡½æ•°ç­¾åæ—¶ã€‚å¦‚æœç­¾åé‡Œæœ‰ä¸€ä¸ªå‚æ•°çš„ç±»å‹æ˜¯å•ä¸€çš„å­—ç¬¦ä¸²å­—é¢é‡(æ¯”å¦‚ï¼Œä¸æ˜¯å­—ç¬¦ä¸²å­—é¢é‡çš„è”åˆç±»å‹)ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«æå‡åˆ°é‡è½½åˆ—è¡¨çš„æœ€é¡¶ç«¯ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯”å¦‚ï¼Œä¸‹é¢çš„æ¥å£ä¼šåˆå¹¶åˆ°ä¸€èµ·</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">any</span>): ELement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;div&quot;</span>): HTMLDivElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;span&quot;</span>): HTMLSpanElement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">string</span>): HTMLElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;canvas&quot;</span>): HTMLCanvasElement;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// åˆå¹¶åçš„ Document å°†ä¼šåƒä¸‹é¢è¿™æ ·:</span></span><br><span class=\"line\"><span class=\"keyword\">interface</span> Document &#123;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;canvas&quot;</span>): HTMLCanvasElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;div&quot;</span>): HTMLDivElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"string\">&quot;span&quot;</span>): HTMLSpanElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">string</span>): HTMLElement;</span><br><span class=\"line\">  createElement(tagName: <span class=\"built_in\">any</span>): Element;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"19-4-åˆå¹¶å‘½åç©ºé—´\"><a href=\"#19-4-åˆå¹¶å‘½åç©ºé—´\" class=\"headerlink\" title=\"19.4 åˆå¹¶å‘½åç©ºé—´\"></a>19.4 åˆå¹¶å‘½åç©ºé—´</h3><ol>\n<li>ä¸æ¥å£ç›¸ä¼¼ï¼ŒåŒåçš„å‘½åç©ºé—´ä¹Ÿä¼šåˆå¹¶å…¶æˆå‘˜ã€‚å‘½åç©ºé—´ä¼šåˆ›å»ºå‡ºå‘½åç©ºé—´å’Œå€¼ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¿™ä¸¤è€…éƒ½æ˜¯æ€ä¹ˆåˆå¹¶çš„ã€‚</li>\n<li>å¯¹äºå‘½åç©ºé—´çš„åˆå¹¶ï¼Œæ¨¡å—å¯¼å‡ºçš„åŒåæ¥å£è¿›è¡Œåˆå¹¶ï¼Œæ„æˆå•ä¸€å‘½åç©ºé—´å†…å«åˆå¹¶åçš„æ¥å£ã€‚</li>\n<li>å¯¹äºå‘½åç©ºé—´é‡Œå€¼çš„åˆå¹¶ï¼Œå¦‚æœå½“å‰å·²ç»å­˜åœ¨ç»™å®šåå­—çš„å‘½åç©ºé—´ï¼Œé‚£ä¹ˆåæ¥çš„å‘½åç©ºé—´çš„å¯¼å‡ºæˆå‘˜ä¼šè¢«åŠ åˆ°å·²ç»å­˜åœ¨çš„é‚£ä¸ªæ¨¡å—é‡Œã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Animals å£°æ˜åˆå¹¶ç¤ºä¾‹ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animals &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Zebra</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animals &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Legged &#123;</span><br><span class=\"line\">    numberOfLegs: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ç­‰åŒäºï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animals &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">interface</span> Legged &#123;</span><br><span class=\"line\">    numberOfLegs: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Zebra</span> </span>&#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dog</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é™¤äº†è¿™äº›åˆå¹¶å¤–ï¼Œä½ è¿˜éœ€è¦äº†è§£éå¯¼å‡ºæˆå‘˜æ˜¯å¦‚ä½•å¤„ç†çš„ã€‚éå¯¼å‡ºæˆå‘˜ä»…åœ¨å…¶åŸæœ‰çš„(åˆå¹¶å‰çš„)å‘½åç©ºé—´å†…å¯è§ã€‚è¿™å°±æ˜¯è¯´åˆå¹¶ä¹‹åï¼Œä»å…¶å®ƒå‘½åç©ºé—´åˆå¹¶è¿›æ¥çš„æˆå‘˜æ— æ³•è®¿é—®éå¯¼å‡ºæˆå‘˜ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æä¾›äº†æ¸…æ™°çš„è¯´æ˜ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Animal &#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> haveMuscles = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">animalsHaveMuscles</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> haveMuscles;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Animal &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">doAnimalsHaveMuscles</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> haveMuscles; <span class=\"comment\">// // Error, because haveMuscles is not accessible here</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å› ä¸º <code>haveMuscles</code> å¹¶æ²¡æœ‰å¯¼å‡ºï¼Œåªæœ‰ <code>animalsHaveMuscles</code> å‡½æ•°å…±äº«äº†åŸå§‹æœªåˆå¹¶çš„å‘½åç©ºé—´å¯ä»¥è®¿é—®è¿™ä¸ªå˜é‡ã€‚<br><code>doAnimalsHaveMuscles</code> å‡½æ•°è™½æ˜¯åˆå¹¶å‘½åç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯è®¿é—®ä¸äº†æœªå¯¼å‡ºçš„æˆå‘˜ã€‚</p>\n</blockquote>\n<h3 id=\"19-5-å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\"><a href=\"#19-5-å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\" class=\"headerlink\" title=\"19.5 å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶\"></a>19.5 å‘½åç©ºé—´ä¸ç±»å’Œå‡½æ•°å’Œæšä¸¾ç±»å‹åˆå¹¶</h3><blockquote>\n<p>å‘½åç©ºé—´å¯ä»¥ä¸å…¶å®ƒç±»å‹çš„å£°æ˜åˆå¹¶ã€‚åªè¦å‘½åç©ºé—´çš„å®šä¹‰ç¬¦åˆå°†è¦åˆå¹¶ç±»å‹çš„å®šä¹‰ã€‚åˆå¹¶ç»“æœåŒ…å«ä¸¤è€…çš„å£°æ˜ç±»å‹ã€‚<br><code>TypeScript</code> ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½å»å®ç°ä¸€äº› <code>JavaScript</code> é‡Œçš„è®¾è®¡æ¨¡å¼ã€‚</p>\n</blockquote>\n<h4 id=\"19-5-1-åˆå¹¶å‘½åç©ºé—´å’Œç±»\"><a href=\"#19-5-1-åˆå¹¶å‘½åç©ºé—´å’Œç±»\" class=\"headerlink\" title=\"19.5.1 åˆå¹¶å‘½åç©ºé—´å’Œç±»\"></a>19.5.1 åˆå¹¶å‘½åç©ºé—´å’Œç±»</h4><blockquote>\n<p>è¿™è®©æˆ‘ä»¬å¯ä»¥è¡¨ç¤ºå†…éƒ¨ç±»</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Album</span> </span>&#123;</span><br><span class=\"line\">  label: Album.AlbumLabel;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Album &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AlbumLabel</span> </span>&#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>åˆå¹¶è§„åˆ™</code> ä¸ä¸Šé¢ <code>åˆå¹¶å‘½åç©ºé—´</code> å°èŠ‚é‡Œè®²çš„è§„åˆ™ä¸€è‡´ï¼Œæˆ‘ä»¬å¿…é¡»å¯¼å‡º <code>AlbumLabel</code> ç±»ï¼Œå¥½è®©åˆå¹¶çš„ç±»èƒ½è®¿é—®ã€‚</p>\n</blockquote>\n<blockquote>\n<p><code>åˆå¹¶ç»“æœ</code>æ˜¯ä¸€ä¸ªç±»å¹¶å¸¦æœ‰ä¸€ä¸ªå†…éƒ¨ç±»ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åç©ºé—´ä¸ºç±»å¢åŠ ä¸€äº›é™æ€å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>é™¤äº†å†…éƒ¨ç±»çš„æ¨¡å¼ï¼Œä½ åœ¨ <code>JavaScript</code> é‡Œï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ç¨åæ‰©å±•å®ƒå¢åŠ ä¸€äº›å±æ€§ä¹Ÿæ˜¯å¾ˆå¸¸è§çš„ã€‚<code>TypeScript</code> ä½¿ç”¨å£°æ˜åˆå¹¶æ¥è¾¾åˆ°è¿™ä¸ªç›®çš„å¹¶ä¿è¯ç±»å‹å®‰å…¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">buildLabel</span>(<span class=\"params\">name: <span class=\"built_in\">string</span></span>): <span class=\"title\">string</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> buildLabel.prefix + name + buildLabel.suffix;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> buildLabel &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">let</span> suffix = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"keyword\">let</span> prefix = <span class=\"string\">&quot;Hello, &quot;</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(buildLabel(<span class=\"string\">&quot;Sam Smith&quot;</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç›¸ä¼¼çš„ï¼Œå‘½åç©ºé—´å¯ä»¥ç”¨æ¥æ‰©å±•æšä¸¾ç±»å‹</span></span><br><span class=\"line\"><span class=\"built_in\">enum</span> Color &#123;</span><br><span class=\"line\">  red = <span class=\"number\">1</span>,</span><br><span class=\"line\">  green = <span class=\"number\">2</span>,</span><br><span class=\"line\">  blue = <span class=\"number\">4</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">namespace</span> Color &#123;</span><br><span class=\"line\">  <span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">mixColor</span>(<span class=\"params\">colorName: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;yellow&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.red + Color.green;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;white&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.red + Color.green + Color.blue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;magenta&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.red + Color.blue;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (colorName === <span class=\"string\">&quot;cyan&quot;</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> Color.green + Color.blue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"19-5-2-éæ³•çš„åˆå¹¶\"><a href=\"#19-5-2-éæ³•çš„åˆå¹¶\" class=\"headerlink\" title=\"19.5.2 éæ³•çš„åˆå¹¶\"></a>19.5.2 éæ³•çš„åˆå¹¶</h4><blockquote>\n<p><code>TypeScript</code> å¹¶éå…è®¸æ‰€æœ‰çš„åˆå¹¶ã€‚ç›®å‰ï¼Œç±»ä¸èƒ½ä¸å…¶å®ƒç±»æˆ–å˜é‡åˆå¹¶ã€‚æƒ³è¦äº†è§£å¦‚ä½•æ¨¡ä»¿ç±»çš„åˆå¹¶ï¼Œè¯·å‚ç…§ <a href=\"https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/Mixins%E6%B7%B7%E5%85%A5/README.md\">TypeScript æ··å…¥</a>ã€‚</p>\n</blockquote>\n<h3 id=\"19-6-æ¨¡å—æ‰©å±•\"><a href=\"#19-6-æ¨¡å—æ‰©å±•\" class=\"headerlink\" title=\"19.6 æ¨¡å—æ‰©å±•\"></a>19.6 æ¨¡å—æ‰©å±•</h3><blockquote>\n<p>è™½ç„¶ <code>JavaScript</code> ä¸æ”¯æŒåˆå¹¶ï¼Œä½†ä½ å¯ä»¥ä¸ºå¯¼å…¥çš„å¯¹è±¡æ‰“è¡¥ä¸ä»¥æ›´æ–°å®ƒä»¬ã€‚</p>\n</blockquote>\n<ul>\n<li>è®©æˆ‘ä»¬è€ƒå¯Ÿä¸€ä¸‹è¿™ä¸ªç©å…·æ€§çš„ç¤ºä¾‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// observable.js</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observable</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... implementation left as an exercise for the reader...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// map.js</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./observable&quot;</span>;</span><br><span class=\"line\">Observable.prototype.map = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... another exercise for the reader</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒä¹Ÿå¯ä»¥å¾ˆå¥½åœ°å·¥ä½œåœ¨ <code>TypeScript</code> ä¸­ï¼Œä½†ç¼–è¯‘å™¨å¯¹ <code>Observable.prototype.map</code> ä¸€æ— æ‰€çŸ¥ã€‚ä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ¨¡å—æ¥å°†å®ƒå‘Šè¯‰ç¼–è¯‘å™¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// observable.ts stays the same</span></span><br><span class=\"line\"><span class=\"comment\">// map.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./observable&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">module</span> <span class=\"string\">&quot;./observable&quot;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> Observable&lt;T&gt; &#123;</span><br><span class=\"line\">    map&lt;U&gt;(f: <span class=\"function\">(<span class=\"params\">x: T</span>) =&gt;</span> U): Observable&lt;U&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Observable.prototype.map = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">f</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... another exercise for the reader</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// consumer.ts</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; Observable &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;./observable&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;./map&quot;</span>;</span><br><span class=\"line\"><span class=\"keyword\">let</span> o: Observable&lt;<span class=\"built_in\">number</span>&gt;;</span><br><span class=\"line\">o.map(<span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x.toFixed());</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ¨¡å—åçš„è§£æå’Œç”¨ <code>import / export</code> è§£ææ¨¡å—æ ‡è¯†ç¬¦çš„æ–¹å¼æ˜¯ä¸€è‡´çš„ã€‚ æ›´å¤šä¿¡æ¯è¯·å‚è€ƒ <a href=\"https://github.com/magicwangxuanqi/typeScript-document/tree/364ec42f004be1686f97e1b02f97c1cf1fb2ba02/%E6%A8%A1%E5%9D%97/README.md\">Modules</a>ã€‚å½“è¿™äº›å£°æ˜åœ¨æ‰©å±•ä¸­åˆå¹¶æ—¶ï¼Œå°±å¥½åƒåœ¨åŸå§‹ä½ç½®è¢«å£°æ˜äº†ä¸€æ ·ã€‚ ä½†æ˜¯ï¼Œä½ ä¸èƒ½åœ¨æ‰©å±•ä¸­å£°æ˜æ–°çš„é¡¶çº§å£°æ˜(ä»…å¯ä»¥æ‰©å±•æ¨¡å—ä¸­å·²ç»å­˜åœ¨çš„å£°æ˜)ã€‚</p>\n</blockquote>\n<h3 id=\"19-7-å…¨å±€æ‰©å±•\"><a href=\"#19-7-å…¨å±€æ‰©å±•\" class=\"headerlink\" title=\"19.7 å…¨å±€æ‰©å±•\"></a>19.7 å…¨å±€æ‰©å±•</h3><blockquote>\n<p>ä½ ä¹Ÿå¯ä»¥åœ¨æ¨¡å—å†…éƒ¨æ·»åŠ å£°æ˜åˆ°å…¨å±€ä½œç”¨åŸŸä¸­</p>\n</blockquote>\n<blockquote>\n<p><code>observable.ts</code></p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Observable</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ... still no implementation ...</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"built_in\">global</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> Array&lt;T&gt; &#123;</span><br><span class=\"line\">    toObservable(): Observable&lt;T&gt;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">Array</span>.prototype.toObservable = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…¨å±€æ‰©å±•å’Œä¸æ¨¡å—æ‰©å±•çš„è¡Œä¸ºå’Œé™åˆ¶æ˜¯ç›¸åŒçš„ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒåã€JSX\"><a href=\"#äºŒåã€JSX\" class=\"headerlink\" title=\"äºŒåã€JSX\"></a>äºŒåã€JSX</h2><h3 id=\"20-1-ä»‹ç»\"><a href=\"#20-1-ä»‹ç»\" class=\"headerlink\" title=\"20.1 ä»‹ç»\"></a>20.1 ä»‹ç»</h3><blockquote>\n<p><code>JSX</code> æ˜¯ä¸€ç§åµŒå…¥å¼çš„ç±»ä¼¼ <code>XML</code> çš„è¯­æ³•ã€‚å®ƒå¯ä»¥è¢«è½¬æ¢æˆåˆæ³•çš„ <code>JavaScript</code>ï¼Œå°½ç®¡è½¬æ¢çš„è¯­ä¹‰æ˜¯æ ¹æ®ä¸åŒçš„å®ç°è€Œå®šçš„ã€‚<br><code>JSX</code> å›  <code>React</code> æ¡†æ¶è€Œæµè¡Œï¼Œä½†ä¹Ÿå­˜åœ¨å…¶å®ƒçš„å®ç°ã€‚<code>TypeScript</code> æ”¯æŒå†…åµŒï¼Œç±»å‹æ£€æŸ¥ä»¥åŠå°† <code>JSX</code> ç›´æ¥ç¼–è¯‘ä¸º JavaScriptã€‚</p>\n</blockquote>\n<h3 id=\"20-2-åŸºæœ¬ç”¨æ³•\"><a href=\"#20-2-åŸºæœ¬ç”¨æ³•\" class=\"headerlink\" title=\"20.2 åŸºæœ¬ç”¨æ³•\"></a>20.2 åŸºæœ¬ç”¨æ³•</h3><ul>\n<li>æƒ³è¦ä½¿ç”¨ <code>JSX</code> å¿…é¡»åšä¸¤ä»¶äº‹ï¼š</li>\n</ul>\n<blockquote>\n<ol>\n<li>ç»™æ–‡ä»¶ä¸€ä¸ª <code>.tsx</code> æ‰©å±•å</li>\n<li>å¯ç”¨ <code>jsx</code> é€‰é¡¹</li>\n</ol>\n</blockquote>\n<ul>\n<li><code>TypeScript</code> å…·æœ‰ä¸‰ç§ <code>JSX</code> æ¨¡å¼ï¼š<code>preserve</code>, <code>react</code> å’Œ <code>react-native</code>ã€‚è¿™äº›æ¨¡å¼åªåœ¨ä»£ç ç”Ÿæˆé˜¶æ®µèµ·ä½œç”¨ - ç±»å‹æ£€æŸ¥å¹¶ä¸å—å½±å“ã€‚</li>\n</ul>\n<blockquote>\n<ol>\n<li>åœ¨ <code>preserve</code> æ¨¡å¼ä¸‹ç”Ÿæˆä»£ç ä¸­ä¼šä¿ç•™ <code>JSX</code> ä»¥ä¾›åç»­çš„è½¬æ¢æ“ä½œä½¿ç”¨( <code>æ¯”å¦‚ï¼šBabel</code> )ã€‚å¦å¤–ï¼Œè¾“å‡ºæ–‡ä»¶ä¼šå¸¦æœ‰ <code>.jsx</code> æ‰©å±•åã€‚</li>\n<li><code>react</code> æ¨¡å¼ä¼šç”Ÿæˆ <code>React.createElement</code>ï¼Œåœ¨ä½¿ç”¨å‰ä¸éœ€è¦å†è¿›è¡Œè½¬æ¢æ“ä½œäº†ï¼Œè¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åä¸º <code>.js</code>ã€‚</li>\n<li><code>react-native</code> ç›¸å½“äº <code>preserve</code>ï¼Œå®ƒä¹Ÿä¿ç•™äº†æ‰€æœ‰çš„ <code>JSX</code>ï¼Œä½†æ˜¯è¾“å‡ºæ–‡ä»¶çš„æ‰©å±•åæ˜¯ <code>.js</code>ã€‚</li>\n</ol>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"left\">æ¨¡å¼</th>\n<th align=\"left\">è¾“å…¥</th>\n<th align=\"left\">è¾“å‡º</th>\n<th align=\"left\">è¾“å‡ºæ–‡ä»¶æ‰©å±•å</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">preserve</td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>.js</code></td>\n</tr>\n<tr>\n<td align=\"left\">react</td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>React.createElement(&quot;div&quot;)</code></td>\n<td align=\"left\"><code>.js</code></td>\n</tr>\n<tr>\n<td align=\"left\">react-native</td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>&lt;div /&gt;</code></td>\n<td align=\"left\"><code>.js</code></td>\n</tr>\n</tbody></table>\n<blockquote>\n<p>ä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ <code>--jsx</code> æ ‡è®°æˆ– <code>tsconfig.json</code> é‡Œçš„é€‰é¡¹æ¥æŒ‡å®šæ¨¡å¼ã€‚<br>æ³¨æ„ï¼š<code>React</code> æ ‡è¯†ç¬¦æ˜¯å†™æ­»çš„ç¡¬ç¼–ç ï¼Œæ‰€ä»¥ä½ å¿…é¡»ä¿è¯ <code>React</code>ï¼ˆå¤§å†™çš„<code>R</code>ï¼‰æ˜¯å¯ç”¨çš„ã€‚</p>\n</blockquote>\n<h3 id=\"20-3-as-æ“ä½œç¬¦\"><a href=\"#20-3-as-æ“ä½œç¬¦\" class=\"headerlink\" title=\"20.3 as æ“ä½œç¬¦\"></a>20.3 as æ“ä½œç¬¦</h3><blockquote>\n<p>å›æƒ³ä¸€ä¸‹æ€ä¹ˆå†™ç±»å‹æ–­è¨€</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> foo = &lt;foo&gt;bar;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œæ–­è¨€ <code>bar</code> å˜é‡æ˜¯ <code>foo</code> ç±»å‹çš„ã€‚ å› ä¸º <code>TypeScript</code> ä¹Ÿä½¿ç”¨å°–æ‹¬å·æ¥è¡¨ç¤ºç±»å‹æ–­è¨€ï¼Œåœ¨ç»“åˆ <code>JSX</code> çš„è¯­æ³•åå°†å¸¦æ¥è§£æä¸Šçš„å›°éš¾ã€‚å› æ­¤ï¼Œ<code>TypeScript</code> åœ¨ <code>.tsx</code> æ–‡ä»¶é‡Œç¦ç”¨äº†ä½¿ç”¨å°–æ‹¬å·çš„ç±»å‹æ–­è¨€ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ç”±äºä¸èƒ½å¤Ÿåœ¨ <code>.tsx</code> æ–‡ä»¶é‡Œä½¿ç”¨ä¸Šè¿°è¯­æ³•ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥ä½¿ç”¨å¦ä¸€ä¸ªç±»å‹æ–­è¨€æ“ä½œç¬¦ï¼š<code>as</code>ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨ <code>as</code> æ“ä½œç¬¦æ”¹å†™ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> foo = bar <span class=\"keyword\">as</span> foo;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>as</code> æ“ä½œç¬¦åœ¨ <code>.ts</code> å’Œ <code>.tsx</code> é‡Œéƒ½å¯ç”¨ï¼Œå¹¶ä¸”ä¸å°–æ‹¬å·ç±»å‹æ–­è¨€è¡Œä¸ºæ˜¯ç­‰ä»·çš„ã€‚</p>\n</blockquote>\n<h3 id=\"20-4-ç±»å‹æ£€æŸ¥\"><a href=\"#20-4-ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"20.4 ç±»å‹æ£€æŸ¥\"></a>20.4 ç±»å‹æ£€æŸ¥</h3><blockquote>\n<p>ä¸ºäº†ç†è§£ <code>JSX</code> çš„ç±»å‹æ£€æŸ¥ï¼Œä½ å¿…é¡»é¦–å…ˆç†è§£ <code>å›ºæœ‰å…ƒç´ </code> ä¸ <code>åŸºäºå€¼çš„å…ƒç´ </code> ä¹‹é—´çš„åŒºåˆ«ã€‚å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª <code>JSX</code> è¡¨è¾¾å¼ <code>&lt;expr /&gt;</code>ï¼Œ<code>expr</code> å¯èƒ½å¼•ç”¨ç¯å¢ƒè‡ªå¸¦çš„æŸäº›ä¸œè¥¿(æ¯”å¦‚ï¼Œåœ¨ <code>DOM</code> ç¯å¢ƒé‡Œçš„ <code>div</code> æˆ– <code>span</code>)æˆ–è€…æ˜¯ä½ è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚è¿™æ˜¯éå¸¸é‡è¦çš„ã€‚åŸå› æœ‰å¦‚ä¸‹ä¸¤ç‚¹ï¼š</p>\n</blockquote>\n<ol>\n<li>å¯¹äº <code>React</code>ï¼Œå›ºæœ‰å…ƒç´ ä¼šç”Ÿæˆå­—ç¬¦ä¸² (<code>React.createElement(&quot;div&quot;)</code> )ï¼Œç„¶åç”±ä½ è‡ªå®šä¹‰çš„ç»„ä»¶å´ä¸ä¼šç”Ÿæˆ( <code>React.createElement(MyComponent)</code>)ã€‚</li>\n<li>ä¼ å…¥ <code>JSX</code> å…ƒç´ é‡Œçš„å±æ€§ç±»å‹çš„æŸ¥æ‰¾æ–¹å¼ä¸åŒã€‚å›ºæœ‰å…ƒç´ æ€»ä»¥ä¸€ä¸ªå°å†™å­—æ¯å¼€å¤´ï¼ŒåŸºäºå€¼çš„å…ƒç´ æ€»æ˜¯ä»¥ä¸€ä¸ªå¤§å†™å­—æ¯å¼€å¤´ã€‚</li>\n</ol>\n<h4 id=\"20-4-1-å›ºæœ‰å…ƒç´ \"><a href=\"#20-4-1-å›ºæœ‰å…ƒç´ \" class=\"headerlink\" title=\"20.4.1 å›ºæœ‰å…ƒç´ \"></a>20.4.1 å›ºæœ‰å…ƒç´ </h4><blockquote>\n<p>å›ºæœ‰å…ƒç´ ä½¿ç”¨ç‰¹æ®Šçš„æ¥å£ <code>JSX.IntrinsicElements</code> æ¥æŸ¥æ‰¾ã€‚é»˜è®¤åœ°ï¼Œå¦‚æœè¿™ä¸ªæ¥å£æ²¡æœ‰æŒ‡å®šï¼Œä¼šå…¨éƒ¨é€šè¿‡ï¼Œä¸å¯¹å›ºæœ‰å…ƒç´ è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ç„¶è€Œï¼Œå¦‚æœè¿™ä¸ªæ¥å£å­˜åœ¨ï¼Œé‚£ä¹ˆå›ºæœ‰å…ƒç´ çš„åå­—éœ€è¦åœ¨ <code>JSX.IntrinsicElements</code> æ¥å£çš„å±æ€§é‡ŒæŸ¥æ‰¾ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        foo: any;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;foo /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;bar /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œ``æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯<code>ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæ²¡åœ¨ JSX.IntrinsicElements</code> é‡ŒæŒ‡å®šã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šä½ ä¹Ÿå¯ä»¥åœ¨ <code>JSX.IntrinsicElements</code> ä¸ŠæŒ‡å®šä¸€ä¸ªç”¨æ¥æ•è·æ‰€æœ‰å­—ç¬¦ä¸²ç´¢å¼•ï¼š</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        [elemName: string]: any;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"20-4-2-åŸºäºå€¼çš„å…ƒç´ \"><a href=\"#20-4-2-åŸºäºå€¼çš„å…ƒç´ \" class=\"headerlink\" title=\"20.4.2 åŸºäºå€¼çš„å…ƒç´ \"></a>20.4.2 åŸºäºå€¼çš„å…ƒç´ </h4><blockquote>\n<p>åŸºäºå€¼çš„å…ƒç´ ä¼šç®€å•çš„åœ¨å®ƒæ‰€åœ¨çš„ä½œç”¨åŸŸé‡ŒæŒ‰æ ‡è¯†ç¬¦æŸ¥æ‰¾ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> MyComponent <span class=\"keyword\">from</span> <span class=\"string\">&quot;./myComponent&quot;</span>;</span><br><span class=\"line\">&lt;MyComponent /&gt; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;SomeOtherComponent /&gt; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å®šä¹‰åŸºäºå€¼çš„å…ƒç´ ï¼š</p>\n<ol>\n<li>æ— çŠ¶æ€å‡½æ•°ç»„ä»¶ (<code>SFC</code>)</li>\n<li>ç±»ç»„ä»¶</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>ç”±äºè¿™ä¸¤ç§åŸºäºå€¼çš„å…ƒç´ åœ¨ <code>JSX</code> è¡¨è¾¾å¼é‡Œæ— æ³•åŒºåˆ†ï¼Œå› æ­¤ <code>TypeScript</code> é¦–å…ˆä¼šå°è¯•å°†è¡¨è¾¾å¼ä½œä¸ºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶è¿›è¡Œè§£æã€‚å¦‚æœè§£ææˆåŠŸï¼Œé‚£ä¹ˆ <code>TypeScript</code> å°±å®Œæˆäº†è¡¨è¾¾å¼åˆ°å…¶å£°æ˜çš„è§£ææ“ä½œã€‚å¦‚æœæŒ‰ç…§æ— çŠ¶æ€å‡½æ•°ç»„ä»¶è§£æå¤±è´¥ï¼Œé‚£ä¹ˆ <code>TypeScript</code> ä¼šç»§ç»­å°è¯•ä»¥ç±»ç»„ä»¶çš„å½¢å¼è¿›è¡Œè§£æã€‚å¦‚æœä¾æ—§å¤±è´¥ï¼Œé‚£ä¹ˆå°†è¾“å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<h5 id=\"1-æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\"><a href=\"#1-æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\" class=\"headerlink\" title=\"(1) æ— çŠ¶æ€å‡½æ•°ç»„ä»¶\"></a>(1) æ— çŠ¶æ€å‡½æ•°ç»„ä»¶</h5><blockquote>\n<p>æ­£å¦‚å…¶åï¼Œç»„ä»¶è¢«å®šä¹‰æˆ <code>JavaScript</code> å‡½æ•°ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>props</code> å¯¹è±¡ã€‚<code>TypeScript</code> ä¼šå¼ºåˆ¶å®ƒçš„è¿”å›å€¼å¯ä»¥èµ‹å€¼ç»™ <code>JSX.Element</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interface FooProp &#123;</span><br><span class=\"line\">    name: string;</span><br><span class=\"line\">    X: number;</span><br><span class=\"line\">    Y: number;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">declare <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">AnotherComponent</span>(<span class=\"params\">prop: &#123; name: string &#125;</span>)</span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ComponentFoo</span>(<span class=\"params\">prop: FooProp</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">AnotherComponent</span> <span class=\"attr\">name</span>=<span class=\"string\">&#123;prop.name&#125;</span> /&gt;</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">const</span> Button = <span class=\"function\">(<span class=\"params\">prop: &#123; value: string &#125;, context: &#123; color: string &#125;</span>) =&gt;</span> &lt;button&gt;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”±äºæ— çŠ¶æ€å‡½æ•°ç»„ä»¶æ˜¯ç®€å•çš„ <code>JavaScript</code> å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨å‡½æ•°é‡è½½ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interface ClickableProps &#123;</span><br><span class=\"line\">    children: JSX.Element[] | JSX.Element;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface HomeProps <span class=\"keyword\">extends</span> ClickableProps &#123;</span><br><span class=\"line\">    home: JSX.Element;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">interface SlideProps <span class=\"keyword\">extends</span> ClickableProps &#123;</span><br><span class=\"line\">    side: JSX.Element | string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MainButton</span>(<span class=\"params\">prop: HomeProps</span>): <span class=\"title\">JSX</span>.<span class=\"title\">Element</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MainButton</span>(<span class=\"params\">prop: SlideProps</span>): <span class=\"title\">JSX</span>.<span class=\"title\">Element</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"2-ç±»ç»„ä»¶\"><a href=\"#2-ç±»ç»„ä»¶\" class=\"headerlink\" title=\"(2) ç±»ç»„ä»¶\"></a>(2) ç±»ç»„ä»¶</h5><blockquote>\n<ol>\n<li>æˆ‘ä»¬å¯ä»¥å®šä¹‰ç±»ç»„ä»¶çš„ç±»å‹ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬é¦–å…ˆæœ€å¥½å¼„æ‡‚ä¸¤ä¸ªæ–°çš„æœ¯è¯­ï¼š<code>å…ƒç´ ç±»çš„ç±»å‹</code> å’Œ <code>å…ƒç´ å®ä¾‹çš„ç±»å‹</code>ã€‚</li>\n<li>ç°åœ¨æœ‰ <code>&lt;Expr /&gt;</code>ï¼Œå…ƒç´ ç±»çš„ç±»å‹ä¸º <code>Expr</code> çš„ç±»å‹ã€‚æ‰€ä»¥åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå¦‚æœ <code>MyComponent</code> æ˜¯ <code>ES6</code> çš„ç±»ï¼Œé‚£ä¹ˆç±»ç±»å‹å°±æ˜¯ç±»çš„æ„é€ å‡½æ•°å’Œé™æ€éƒ¨åˆ†ã€‚å¦‚æœ <code>MyComponent</code> æ˜¯ä¸ªå·¥å‚å‡½æ•°ï¼Œç±»ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°ã€‚</li>\n<li>ä¸€æ—¦å»ºç«‹èµ·äº†ç±»ç±»å‹ï¼Œå®ä¾‹ç±»å‹ç”±æ„é€ å™¨æˆ–è°ƒç”¨ç­¾å(å¦‚æœå­˜åœ¨çš„è¯)çš„è¿”å›å€¼çš„è”åˆæ„æˆã€‚å†æ¬¡è¯´æ˜ï¼Œåœ¨ <code>ES6</code> ç±»çš„æƒ…å†µä¸‹ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªç±»çš„å®ä¾‹çš„ç±»å‹ï¼Œå¹¶ä¸”å¦‚æœæ˜¯å·¥å‚å‡½æ•°ï¼Œå®ä¾‹ç±»å‹ä¸ºè¿™ä¸ªå‡½æ•°è¿”å›å€¼ç±»å‹ã€‚</li>\n</ol>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨æ„é€ ç­¾å</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myComponent = <span class=\"keyword\">new</span> MyComponent();</span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ ç±»çš„ç±»å‹ =&gt; MyComponent;</span></span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ å®ä¾‹çš„ç±»å‹ =&gt; &#123; render: () =&gt; void &#125;</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyFactoryFunction</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    render: <span class=\"function\">() =&gt;</span> &#123;&#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// ä½¿ç”¨è°ƒç”¨ç­¾å</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myComponent = MyFactoryFunction();</span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ ç±»çš„ç±»å‹ =&gt; FactoryFunction</span></span><br><span class=\"line\"><span class=\"comment\">// å…ƒç´ å®ä¾‹çš„ç±»å‹ =&gt; &#123; render: () =&gt; void &#125;</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å…ƒç´ çš„å®ä¾‹ç±»å‹å¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒå¿…é¡»èµ‹å€¼ç»™ <code>JSX.ElementClass</code> æˆ– <code>æŠ›å‡ºä¸€ä¸ªé”™è¯¯</code>ã€‚é»˜è®¤çš„ <code>JSX.ElementClass</code> ä¸º <code>&#123;&#125;</code>ï¼Œä½†æ˜¯å®ƒå¯ä»¥è¢«æ‰©å±•ç”¨æ¥é™åˆ¶ <code>JSX</code> çš„ç±»å‹ä»¥ç¬¦åˆç›¸åº”çš„æ¥å£ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface ElementClass &#123;</span><br><span class=\"line\">        render: any</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">MyFactoryFunction</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">        render: <span class=\"function\">() =&gt;</span> &#123;&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;MyComponent /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;MyFactoryFunction /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NotAValidComponent</span> </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">NotAValidFactoryFunction</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;NotAValidComponent /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br><span class=\"line\">&lt;NotAValidFactoryFunction /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-5-å±æ€§ç±»å‹æ£€æŸ¥\"><a href=\"#20-5-å±æ€§ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"20.5 å±æ€§ç±»å‹æ£€æŸ¥\"></a>20.5 å±æ€§ç±»å‹æ£€æŸ¥</h3><ol>\n<li>å±æ€§ç±»å‹æ£€æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯ ç¡®å®šå…ƒç´ ç±»å‹ã€‚è¿™åœ¨ <code>å›ºæœ‰å…ƒç´ </code> å’Œ <code>åŸºäºå€¼çš„å…ƒç´ </code> ä¹‹é—´ç¨æœ‰ä¸åŒã€‚</li>\n<li>å¯¹äºå›ºæœ‰å…ƒç´ ï¼Œè¿™æ˜¯ <code>JSX.IntrinsicElements</code> å±æ€§çš„ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        foo: &#123;</span><br><span class=\"line\">            bar?: boolean;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// `foo` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `&#123;bar?: boolean&#125;`</span></span><br><span class=\"line\">&lt;foo bar /&gt;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>å¯¹äºåŸºäºå€¼çš„å…ƒç´ ï¼Œå°±ç¨å¾®å¤æ‚äº›ã€‚å®ƒå–å†³äºå…ˆå‰ç¡®å®šçš„åœ¨å…ƒç´ å®ä¾‹ç±»å‹ä¸Šçš„æŸä¸ªå±æ€§çš„ç±»å‹ã€‚è‡³äºè¯¥ä½¿ç”¨å“ªä¸ªå±æ€§æ¥ç¡®å®šç±»å‹å–å†³äº <code>JSX.ElementAttributesProperty</code>ã€‚å®ƒåº”è¯¥ä½¿ç”¨å•ä¸€çš„å±æ€§æ¥å®šä¹‰ã€‚è¿™ä¸ªå±æ€§åä¹‹åä¼šè¢«ä½¿ç”¨ã€‚<code>TypeScript 2.8</code>ï¼Œå¦‚æœæœªæŒ‡å®š <code>JSX.ElementAttributesProperty</code>ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨ <code>ç±»å…ƒç´ æ„é€ å‡½æ•°</code> æˆ– <code>SFC</code> è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ã€‚</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">  interface ElementAttributesProperty &#123;</span><br><span class=\"line\">      props; <span class=\"comment\">// æŒ‡å®šç”¨æ¥ä½¿ç”¨çš„å±æ€§å</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// åœ¨å…ƒç´ å®ä¾‹ä¸ŠæŒ‡å®šç±»å‹</span></span><br><span class=\"line\">  props: &#123;</span><br><span class=\"line\">      foo?: string;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// `MyComponent` çš„å…ƒç´ å±æ€§ç±»å‹ä¸º `&#123;foo?: string&#125;`</span></span><br><span class=\"line\">&lt;MyComponent foo=<span class=\"string\">&quot;bar&quot;</span> /&gt;;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"4\">\n<li>å…ƒç´ å±æ€§ç±»å‹ç”¨äº <code>JSX</code> é‡Œè¿›è¡Œå±æ€§çš„ç±»å‹æ£€æŸ¥ã€‚æ”¯æŒå¯é€‰å±æ€§å’Œå¿…é¡»å±æ€§</li>\n</ol>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">declare namespace JSX &#123;</span><br><span class=\"line\">    interface IntrinsicElements &#123;</span><br><span class=\"line\">        foo: &#123;</span><br><span class=\"line\">            requiredProp: string;</span><br><span class=\"line\">            optionalProp?: number;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> optionalProp=&#123;<span class=\"number\">0</span>&#125; /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;foo /&gt;; <span class=\"comment\">// é”™è¯¯ï¼Œç¼ºå°‘requiredProp</span></span><br><span class=\"line\">&lt;foo requiredProp=&#123;<span class=\"number\">0</span>&#125; /&gt;; <span class=\"comment\">// é”™è¯¯ï¼ŒrequiredProp åº”è¯¥æ˜¯å­—ç¬¦ä¸²</span></span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> unknownProp /&gt;; <span class=\"comment\">// é”™è¯¯ï¼ŒunknownProp å±æ€§ä¸å­˜åœ¨</span></span><br><span class=\"line\">&lt;foo requiredProp=<span class=\"string\">&quot;bar&quot;</span> some-unknown-prop /&gt;; <span class=\"comment\">// æ­£ç¡®ï¼Œ`some-unknown-prop` ä¸æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä¸€ä¸ªå±æ€§åä¸æ˜¯ä¸ªåˆæ³•çš„ <code>JS</code> æ ‡è¯†ç¬¦(åƒ <code>data-\\*</code> å±æ€§)ï¼Œå¹¶ä¸”å®ƒæ²¡å‡ºç°åœ¨å…ƒç´ å±æ€§ç±»å‹é‡Œæ—¶ä¸ä¼šå½“ä½œä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦å¤–ï¼Œ<code>JSX</code> è¿˜ä¼šä½¿ç”¨ <code>JSX.IntrinsicAttributes</code> æ¥å£æ¥æŒ‡å®šé¢å¤–çš„å±æ€§ï¼Œè¿™äº›é¢å¤–çš„å±æ€§é€šå¸¸ä¸ä¼šè¢«ç»„ä»¶çš„ <code>props</code> æˆ– <code>arguments</code> ä½¿ç”¨ - æ¯”å¦‚ <code>React</code> é‡Œçš„ <code>key</code>ã€‚è¿˜æœ‰ï¼Œ<code>JSX.IntrinsicClassAttributes&lt;T&gt;</code> æ³›å‹ç±»å‹ä¹Ÿå¯ä»¥ç”¨æ¥åšåŒæ ·çš„äº‹æƒ…ã€‚è¿™é‡Œçš„æ³›å‹å‚æ•°è¡¨ç¤ºç±»å®ä¾‹ç±»å‹ã€‚åœ¨ <code>React</code> é‡Œï¼Œå®ƒç”¨æ¥å…è®¸ <code>Ref&lt;T&gt;</code> ç±»å‹ä¸Šçš„ <code>ref</code> å±æ€§ã€‚é€šå¸¸æ¥è®²ï¼Œè¿™äº›æ¥å£ä¸Šçš„æ‰€æœ‰å±æ€§éƒ½æ˜¯å¯é€‰çš„ï¼Œé™¤éä½ æƒ³è¦ç”¨æˆ·åœ¨æ¯ä¸ª <code>JSX</code> æ ‡ç­¾ä¸Šéƒ½æä¾›ä¸€äº›å±æ€§ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å»¶å±•æ“ä½œç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> props = &#123; <span class=\"attr\">requiredProp</span>: <span class=\"string\">&quot;bar&quot;</span> &#125;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> badProps = &#123;&#125;;</span><br><span class=\"line\">&lt;foo &#123;...badProps&#125; /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-6-å­å­™ç±»å‹æ£€æŸ¥\"><a href=\"#20-6-å­å­™ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"20.6 å­å­™ç±»å‹æ£€æŸ¥\"></a>20.6 å­å­™ç±»å‹æ£€æŸ¥</h3><blockquote>\n<p>ä» <code>TypeScript 2.3</code> å¼€å§‹ï¼Œæˆ‘ä»¬å¼•å…¥äº† <code>children</code> ç±»å‹æ£€æŸ¥ã€‚<code>children</code> æ˜¯å…ƒç´ å±æ€§(<code>attribute</code>)ç±»å‹çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§(<code>property</code>)ï¼Œå­ <code>JSXExpression</code> å°†ä¼šè¢«æ’å…¥åˆ°å±æ€§é‡Œã€‚ä¸ä½¿ç”¨ <code>JSX.ElementAttributesProperty</code> æ¥å†³å®š <code>props</code> åç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>JSX.ElementChildrenAttribute</code> æ¥å†³å®š <code>children</code> åã€‚<code>JSX.ElementChildrenAttribute</code> åº”è¯¥è¢«å£°æ˜åœ¨å•ä¸€çš„å±æ€§(<code>property</code>)é‡Œã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">namespace</span> JSX &#123;</span><br><span class=\"line\">  <span class=\"keyword\">interface</span> ElementChildrenAttribute &#123;</span><br><span class=\"line\">    children: &#123;&#125;; <span class=\"comment\">// specify children name to use</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚ä¸ç‰¹æ®ŠæŒ‡å®šå­å­™çš„ç±»å‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>React typings</code> é‡Œçš„é»˜è®¤ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">&lt;/div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">  World</span><br><span class=\"line\">&lt;/div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> CustomComp = <span class=\"function\">(<span class=\"params\">props</span>) =&gt;</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span>props.children<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span></span><br><span class=\"line\">&lt;CustomComp&gt;</span><br><span class=\"line\">  &lt;div&gt;Hello World&lt;/div&gt;</span><br><span class=\"line\">  &#123;<span class=\"string\">&quot;This is just a JS expression...&quot;</span> + <span class=\"number\">1000</span>&#125;</span><br><span class=\"line\">&lt;/CustomComp&gt;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">interface PropsType &#123;</span><br><span class=\"line\">  children: JSX.Element;</span><br><span class=\"line\">  name: string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Component</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span>&lt;<span class=\"title\">PropsType</span>, </span>&#123;&#125;&gt; &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (</span><br><span class=\"line\">          &lt;h2&gt;</span><br><span class=\"line\">              &#123;<span class=\"built_in\">this</span>.props.children&#125;</span><br><span class=\"line\">          &lt;/h2&gt;</span><br><span class=\"line\">      )</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// Ok</span></span><br><span class=\"line\">&lt;Component&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class=\"line\">&lt;/Component&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error: children is of type JSX.Element not array of JSX.Element</span></span><br><span class=\"line\">&lt;Component&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello World&lt;/h1&gt;</span><br><span class=\"line\">  &lt;h2&gt;Hello World&lt;/h2&gt;</span><br><span class=\"line\">&lt;/Component&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Error: children is of type JSX.Element not array of JSX.Element or string.</span></span><br><span class=\"line\">&lt;Component&gt;</span><br><span class=\"line\">  &lt;h1&gt;Hello&lt;/h1&gt;</span><br><span class=\"line\">  World</span><br><span class=\"line\">&lt;/Component&gt;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-7-JSX-ç»“æœç±»å‹\"><a href=\"#20-7-JSX-ç»“æœç±»å‹\" class=\"headerlink\" title=\"20.7 JSX ç»“æœç±»å‹\"></a>20.7 JSX ç»“æœç±»å‹</h3><blockquote>\n<p>é»˜è®¤åœ° <code>JSX</code> è¡¨è¾¾å¼ç»“æœçš„ç±»å‹ä¸º <code>any</code>ã€‚ä½ å¯ä»¥è‡ªå®šä¹‰è¿™ä¸ªç±»å‹ï¼Œé€šè¿‡æŒ‡å®š <code>JSX.Element</code> æ¥å£ã€‚ç„¶è€Œï¼Œä¸èƒ½å¤Ÿä»æ¥å£é‡Œæ£€ç´¢å…ƒç´ ï¼Œå±æ€§æˆ– <code>JSX</code> çš„å­å…ƒç´ çš„ç±»å‹ä¿¡æ¯ã€‚å®ƒæ˜¯ä¸€ä¸ªé»‘ç›’ã€‚</p>\n</blockquote>\n<h3 id=\"20-8-åµŒå…¥çš„è¡¨è¾¾å¼\"><a href=\"#20-8-åµŒå…¥çš„è¡¨è¾¾å¼\" class=\"headerlink\" title=\"20.8 åµŒå…¥çš„è¡¨è¾¾å¼\"></a>20.8 åµŒå…¥çš„è¡¨è¾¾å¼</h3><blockquote>\n<p><code>JSX</code> å…è®¸ä½ ä½¿ç”¨ <code>&#123;&#125;</code> æ ‡ç­¾æ¥å†…åµŒè¡¨è¾¾å¼</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var a &#x3D; (</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &#123;[&quot;foo&quot;, &quot;bar&quot;].map(i &#x3D;&gt; (</span><br><span class=\"line\">      &lt;span&gt;&#123;i &#x2F; 2&#125;&lt;&#x2F;span&gt;</span><br><span class=\"line\">    ))&#125;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">);</span><br><span class=\"line\">&#x2F;&#x2F; ä¸Šé¢çš„ä»£ç äº§ç”Ÿä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºä½ ä¸èƒ½ç”¨æ•°å­—æ¥é™¤ä»¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¾“å‡ºå¦‚ä¸‹ï¼Œè‹¥ä½ ä½¿ç”¨äº† preserve é€‰é¡¹</span><br><span class=\"line\">var a &#x3D; (</span><br><span class=\"line\">  &lt;div&gt;</span><br><span class=\"line\">    &#123;[&quot;foo&quot;, &quot;bar&quot;].map(function (i) &#123;</span><br><span class=\"line\">      return &lt;span&gt;&#123;i &#x2F; 2&#125;&lt;&#x2F;span&gt;;</span><br><span class=\"line\">    &#125;)&#125;</span><br><span class=\"line\">  &lt;&#x2F;div&gt;</span><br><span class=\"line\">);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-9-react-æ•´åˆ\"><a href=\"#20-9-react-æ•´åˆ\" class=\"headerlink\" title=\"20.9 react æ•´åˆ\"></a>20.9 react æ•´åˆ</h3><blockquote>\n<p>è¦æƒ³ä¸€èµ·ä½¿ç”¨ <code>JSX</code> å’Œ <code>React</code>ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>React</code> ç±»å‹å®šä¹‰ã€‚è¿™äº›ç±»å‹å£°æ˜å®šä¹‰äº† <code>JSX</code> åˆé€‚å‘½åç©ºé—´æ¥ä½¿ç”¨ <code>React</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;react.d.ts&quot; /&gt;</span></span><br><span class=\"line\">interface Props &#123;</span><br><span class=\"line\">  foo: string;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">React</span>.<span class=\"title\">Component</span>&lt;<span class=\"title\">Props</span>, </span>&#123;&#125;&gt; &#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">span</span>&gt;</span>&#123;this.props.foo&#125;<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&lt;MyComponent foo=<span class=\"string\">&quot;bar&quot;</span> /&gt;; <span class=\"comment\">// æ­£ç¡®</span></span><br><span class=\"line\">&lt;MyComponent foo=&#123;<span class=\"number\">0</span>&#125; /&gt;; <span class=\"comment\">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"20-10-å·¥å‚å‡½æ•°\"><a href=\"#20-10-å·¥å‚å‡½æ•°\" class=\"headerlink\" title=\"20.10 å·¥å‚å‡½æ•°\"></a>20.10 å·¥å‚å‡½æ•°</h3><blockquote>\n<p><code>jsx</code>ï¼š<code>react</code> ç¼–è¯‘é€‰é¡¹ä½¿ç”¨çš„å·¥å‚å‡½æ•°æ˜¯å¯ä»¥é…ç½®çš„ã€‚å¯ä»¥ä½¿ç”¨ <code>jsxFactory</code> å‘½ä»¤è¡Œé€‰é¡¹ï¼Œæˆ–å†…è”çš„ <code>@jsx</code> æ³¨é‡ŠæŒ‡ä»¤åœ¨æ¯ä¸ªæ–‡ä»¶ä¸Šè®¾ç½®ã€‚æ¯”å¦‚ï¼Œç»™ <code>createElement</code> è®¾ç½® <code>jsxFactory</code>ï¼Œ<code>&lt;div /&gt;</code> ä¼šä½¿ç”¨ <code>createElement(&quot;div&quot;)</code> æ¥ç”Ÿæˆï¼Œè€Œä¸æ˜¯ <code>React.createElement(&quot;div&quot;)</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ³¨é‡ŠæŒ‡ä»¤å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼š(åœ¨ TypeScript 2.8 é‡Œ)</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> preact = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;preact&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">/* @jsx preact.h */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> x = <span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">div</span>/&gt;</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ç”Ÿæˆ</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> preact = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;preact&quot;</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> x = preact.h(<span class=\"string\">&quot;div&quot;</span>, <span class=\"literal\">null</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å·¥å‚å‡½æ•°çš„é€‰æ‹©åŒæ ·ä¼šå½±å“ <code>JSX</code> å‘½åç©ºé—´çš„æŸ¥æ‰¾(ç±»å‹æ£€æŸ¥)ã€‚å¦‚æœå·¥å‚å‡½æ•°ä½¿ç”¨ <code>React.createElement</code> å®šä¹‰(é»˜è®¤)ï¼Œç¼–è¯‘å™¨ä¼šå…ˆæ£€æŸ¥ <code>React.JSX</code>ï¼Œä¹‹åæ‰æ£€æŸ¥å…¨å±€çš„ <code>JSX</code>ã€‚å¦‚æœå·¥å‚å‡½æ•°å®šä¹‰ä¸º <code>h</code>ï¼Œé‚£ä¹ˆåœ¨æ£€æŸ¥å…¨å±€çš„ <code>JSX</code> ä¹‹å‰å…ˆæ£€æŸ¥ <code>h.JSX</code>ã€‚</p>\n</blockquote>\n<h2 id=\"äºŒåä¸€ã€è£…é¥°å™¨\"><a href=\"#äºŒåä¸€ã€è£…é¥°å™¨\" class=\"headerlink\" title=\"äºŒåä¸€ã€è£…é¥°å™¨\"></a>äºŒåä¸€ã€è£…é¥°å™¨</h2><h3 id=\"21-1-ä»‹ç»\"><a href=\"#21-1-ä»‹ç»\" class=\"headerlink\" title=\"21.1 ä»‹ç»\"></a>21.1 ä»‹ç»</h3><blockquote>\n<p>éšç€ <code>TypeScript</code> å’Œ <code>ES6</code> é‡Œå¼•å…¥äº†ç±»ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦é¢å¤–çš„ç‰¹å®šæ¥æ”¯æŒæ ‡æ³¨æˆ–ä¿®æ”¹ç±»åŠå…¶æˆå‘˜ã€‚è£…é¥°å™¨(<code>Decorators</code>)ä¸ºæˆ‘ä»¬åœ¨ç±»çš„å£°æ˜åŠæˆå‘˜ä¸Šé€šè¿‡å…ƒç¼–ç¨‹è¯­æ³•æ·»åŠ æ ‡æ³¨æä¾›äº†ä¸€ç§æ–¹å¼ã€‚<code>JavaScript</code> é‡Œçš„è£…é¥°å™¨ç›®å‰å¤„åœ¨ å»ºè®®å¾é›†çš„ç¬¬äºŒé˜¶æ®µï¼Œä½†åœ¨ <code>TypeScript</code> é‡Œå·²ä½œä¸ºä¸€é¡¹å®éªŒæ€§ç‰¹æ€§äºˆä»¥æ”¯æŒã€‚<br>æ³¨æ„ï¼šè£…é¥°å™¨æ˜¯ä¸€é¡¹å®éªŒæ€§ç‰¹æ€§ï¼Œåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜<br>è‹¥è¦å¯ç”¨å®éªŒæ€§çš„è£…é¥°å™¨ç‰¹æ€§ï¼Œä½ å¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ– <code>tsconfig.json</code> é‡Œå¯ç”¨ <code>experimentalDecorators</code> ç¼–è¯‘å™¨é€‰é¡¹ã€‚<br>å‘½ä»¤è¡Œï¼š <code>tsc --target ES5 --experimentalDecorators</code></p>\n</blockquote>\n<ul>\n<li>tsconfig.json</li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;target&quot;</span>: <span class=\"string\">&quot;ES5&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;experimentalDecorators&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-2-è£…é¥°å™¨\"><a href=\"#21-2-è£…é¥°å™¨\" class=\"headerlink\" title=\"21.2 è£…é¥°å™¨\"></a>21.2 è£…é¥°å™¨</h3><blockquote>\n<p>è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å£°æ˜ï¼Œå®ƒèƒ½å¤Ÿè¢«é™„åŠ åˆ° <code>ç±»å£°æ˜</code>ã€<code>æ–¹æ³•</code>ã€<code>è®¿é—®ç¬¦</code>ã€<code>å±æ€§æˆ–å‚æ•°ä¸Š</code>ã€‚è£…é¥°å™¨ä½¿ç”¨ <code>@expression</code> è¿™ç§å½¢å¼ï¼Œ<code>expression</code> æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°å™¨çš„å£°æ˜ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚<br>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ª <code>@sealed</code> è£…é¥°å™¨ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å®šä¹‰ <code>sealed</code> å‡½æ•°</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sealed</span>(<span class=\"params\">target</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// do something with target</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šåé¢ç±»è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚</p>\n</blockquote>\n<h3 id=\"21-3-è£…é¥°å™¨å·¥å‚\"><a href=\"#21-3-è£…é¥°å™¨å·¥å‚\" class=\"headerlink\" title=\"21.3 è£…é¥°å™¨å·¥å‚\"></a>21.3 è£…é¥°å™¨å·¥å‚</h3><blockquote>\n<p>å¦‚æœæˆ‘ä»¬è¦å®šåˆ¶ä¸€ä¸ªä¿®é¥°å™¨å¦‚ä½•åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œæˆ‘ä»¬å¾—å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ã€‚è£…é¥°å™¨å·¥å‚å°±æ˜¯ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»¥ä¾›è£…é¥°å™¨åœ¨è¿è¡Œæ—¶è°ƒç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å†™ä¸€ä¸ªè£…é¥°å™¨å·¥å‚å‡½æ•°ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">color</span>(<span class=\"params\">value: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// è¿™æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// è¿™æ˜¯è£…é¥°å™¨</span></span><br><span class=\"line\">    <span class=\"comment\">// do something with &quot;target&quot; and &quot;value&quot; ...</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼šä¸‹é¢æ–¹æ³•è£…é¥°å™¨å°èŠ‚é‡Œæœ‰ä¸€ä¸ªæ›´åŠ è¯¦ç»†çš„ä¾‹å­ã€‚</p>\n</blockquote>\n<h3 id=\"21-4-è£…é¥°å™¨ç»„åˆ\"><a href=\"#21-4-è£…é¥°å™¨ç»„åˆ\" class=\"headerlink\" title=\"21.4 è£…é¥°å™¨ç»„åˆ\"></a>21.4 è£…é¥°å™¨ç»„åˆ</h3><blockquote>\n<p>å¤šä¸ªè£…é¥°å™¨å¯ä»¥åŒæ—¶åº”ç”¨åˆ°ä¸€ä¸ªå£°æ˜ä¸Šï¼Œå°±åƒä¸‹é¢çš„å®ä¾‹ï¼š</p>\n</blockquote>\n<ol>\n<li>ä¹¦å†™åœ¨åŒä¸€è¡Œï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@f</span> <span class=\"meta\">@g</span> x</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>ä¹¦å†™åœ¨å¤šè¡Œä¸Šï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@f</span></span><br><span class=\"line\"><span class=\"meta\">@g</span></span><br><span class=\"line\">x</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå£°æ˜ä¸Šï¼Œå®ƒä»¬æ±‚å€¼æ–¹å¼ä¸ å¤åˆå‡½æ•° ç›¸ä¼¼ã€‚åœ¨è¿™ä¸ªæ¨¡å‹ä¸‹ï¼Œå½“å¤åˆ f å’Œ g æ—¶ï¼Œå¤åˆçš„ç»“æœ <code>\\(fâˆ˜g\\)\\(x\\)</code> ç­‰åŒäº <code>f\\(g\\(x\\)\\)</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>åŒæ ·çš„ï¼Œåœ¨ <code>TypeScript</code> é‡Œï¼Œå½“å¤šä¸ªè£…é¥°å™¨åº”ç”¨åœ¨ä¸€ä¸ªå£°æ˜ä¸Šæ—¶ä¼šè¿›è¡Œå¦‚ä¸‹æ­¥éª¤çš„æ“ä½œï¼š <code>1</code>. ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡å¯¹è£…é¥°å™¨è¡¨è¾¾å¼æ±‚å€¼ <code>2</code>. æ±‚å€¼çš„ç»“æœä¼šè¢«å½“ä½œå‡½æ•°ï¼Œç”±ä¸‹è‡³ä¸Šä¾æ¬¡è¢«è°ƒç”¨ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¦‚æœæˆ‘ä»¬ä½¿ç”¨ è£…é¥°å™¨å·¥å‚ çš„è¯ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥è§‚å¯Ÿå®ƒä»¬æ±‚å€¼çš„é¡ºåºï¼š</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">f</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;f(): evaluated&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, prototypeKey: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;f(): called&quot;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">g</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;g(): evaluated&quot;</span>);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target, prototypeKey: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;g(): called&quot;</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@f</span>()</span><br><span class=\"line\">  <span class=\"meta\">@g</span>()</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åœ¨æ§åˆ¶å°é‡Œä¼šæ‰“å°å‡ºå¦‚ä¸‹ç»“æœï¼š</span></span><br><span class=\"line\">f(): evaluated</span><br><span class=\"line\">g(): evaluated</span><br><span class=\"line\">g(): called</span><br><span class=\"line\">f(): called</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-5-è£…é¥°å™¨æ±‚å€¼\"><a href=\"#21-5-è£…é¥°å™¨æ±‚å€¼\" class=\"headerlink\" title=\"21.5 è£…é¥°å™¨æ±‚å€¼\"></a>21.5 è£…é¥°å™¨æ±‚å€¼</h3><blockquote>\n<p>ç±»ä¸­ä¸åŒå£°æ˜ä¸Šçš„è£…é¥°å™¨å°†æŒ‰ä»¥ä¸‹è§„å®šçš„é¡ºåºåº”ç”¨ï¼š</p>\n</blockquote>\n<ul>\n<li>å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªå®ä¾‹æˆå‘˜ã€‚</li>\n<li>å‚æ•°è£…é¥°å™¨ï¼Œç„¶åä¾æ¬¡æ˜¯æ–¹æ³•è£…é¥°å™¨ï¼Œè®¿é—®ç¬¦è£…é¥°å™¨ï¼Œæˆ–å±æ€§è£…é¥°å™¨åº”ç”¨åˆ°æ¯ä¸ªé™æ€æˆå‘˜ã€‚</li>\n<li>å‚æ•°è£…é¥°å™¨åº”ç”¨åˆ°æ„é€ å‡½æ•°ã€‚</li>\n<li>ç±»è£…é¥°å™¨åº”ç”¨åˆ°ç±»ã€‚</li>\n</ul>\n<h3 id=\"21-6-ç±»è£…é¥°å™¨\"><a href=\"#21-6-ç±»è£…é¥°å™¨\" class=\"headerlink\" title=\"21.6 ç±»è£…é¥°å™¨\"></a>21.6 ç±»è£…é¥°å™¨</h3><p>1.ç±»è£…é¥°å™¨åœ¨ç±»å£°æ˜ä¹‹å‰è¢«å£°æ˜(ç´§é ç€ç±»å£°æ˜)ã€‚ç±»è£…é¥°å™¨åº”ç”¨äºç±»æ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ä¿®æ”¹æˆ–æ›¿æ¢ç±»å®šä¹‰ã€‚ç±»è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( <code>.d.ts</code> )ï¼Œä¹Ÿä¸èƒ½ç”¨åœ¨ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ä¸­(æ¯”å¦‚ <code>declare</code> çš„ç±»)ã€‚</p>\n<ol start=\"2\">\n<li>ç±»è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œç±»çš„æ„é€ å‡½æ•°ä½œä¸ºå…¶å”¯ä¸€çš„å‚æ•°ã€‚</li>\n<li>å¦‚æœç±»è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šä½¿ç”¨æä¾›çš„æ„é€ å‡½æ•°æ¥æ›¿æ¢ç±»çš„å£°æ˜ã€‚</li>\n</ol>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä½ è¦è¿”å›ä¸€ä¸ªæ–°çš„æ„é€ å‡½æ•°ï¼Œä½ å¿…é¡»æ³¨æ„å¤„ç†å¥½åŸæ¥çš„åŸå‹é“¾ã€‚åœ¨è¿è¡Œæ—¶çš„è£…é¥°å™¨è°ƒç”¨é€»è¾‘ä¸­ ä¸ä¼šä¸ºä½ åšè¿™äº›ã€‚<br>ä¸‹é¢æ˜¯ä½¿ç”¨ç±»è£…é¥°å™¨( <code>@sealed</code> )çš„ä¾‹å­ï¼Œåº”ç”¨åœ¨ <code>Greeter</code> ç±»ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@sealed</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter1</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello, &quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ @sealed è£…é¥°å™¨</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sealed</span>(<span class=\"params\">constructor: <span class=\"built_in\">Function</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.seal(<span class=\"title\">constructor</span>);</span><br><span class=\"line\">  <span class=\"built_in\">Object</span>.seal(<span class=\"title\">constructor</span>.<span class=\"title\">prototype</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“ <code>@sealed</code> è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒå°†å¯†é—­æ­¤ç±»çš„æ„é€ å‡½æ•°å’ŒåŸå‹ã€‚(æ³¨ï¼šå‚è§ <code>Object.seal</code> )</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€ä¸ªé‡è½½æ„é€ å‡½æ•°çš„ä¾‹å­ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">classDecorator</span>&lt;<span class=\"title\">T</span> <span class=\"title\">extends</span> </span>&#123; <span class=\"keyword\">new</span> (...args: <span class=\"built_in\">any</span>[]): &#123;&#125; &#125;&gt;(<span class=\"title\">constructor</span>: <span class=\"title\">T</span>) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"keyword\">extends</span> <span class=\"title\">constructor</span> </span>&#123;</span><br><span class=\"line\">    newProperty = <span class=\"string\">&quot;new property&quot;</span>;</span><br><span class=\"line\">    hello = <span class=\"string\">&quot;override&quot;</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@classDecorator</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter2</span> </span>&#123;</span><br><span class=\"line\">  property = <span class=\"string\">&quot;property&quot;</span>;</span><br><span class=\"line\">  hello: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">m: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.hello = m;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"keyword\">new</span> Greeter2(<span class=\"string\">&quot;world&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-7-æ–¹æ³•è£…é¥°å™¨\"><a href=\"#21-7-æ–¹æ³•è£…é¥°å™¨\" class=\"headerlink\" title=\"21.7 æ–¹æ³•è£…é¥°å™¨\"></a>21.7 æ–¹æ³•è£…é¥°å™¨</h3><blockquote>\n<p>æ–¹æ³•è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•çš„å£°æ˜ä¹‹å‰(ç´§é ç€æ–¹æ³•å£°æ˜)ã€‚å®ƒä¼šè¢«åº”ç”¨åˆ°æ–¹æ³•çš„ <code>å±æ€§æè¿°ç¬¦</code> ä¸Šï¼Œå¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–è€…æ›¿æ¢æ–¹æ³•å®šä¹‰ã€‚æ–¹æ³•è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ <code>.d.ts</code> ä¸Šï¼Œé‡è½½æˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ <code>declare</code> çš„ç±»)ä¸­ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ–¹æ³•è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>3</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—</li>\n<li>æˆå‘˜çš„å±æ€§ä¿®é¥°ç¬¦</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ä»£ç å°äº <code>ES5</code>ï¼Œå±æ€§æè¿°ç¬¦ å°†ä¼šæ˜¯ <code>undefined</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœæ–¹æ³•è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ å±æ€§æè¿°ç¬¦ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº <code>ES5</code>ï¼Œè¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä¸€ä¸ªæ–¹æ³•è£…é¥°å™¨ (<code>@enumerable</code>) çš„ä¾‹å­ï¼Œåº”ç”¨äº <code>Greeter</code> ç±»çš„æ–¹æ³•ä¸Šã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@enumerable</span>(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello, &quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å‡½æ•°å£°æ˜æ¥å®šä¹‰ <code>@enumerable</code> è£…é¥°å™¨ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">enumerable</span>(<span class=\"params\">value: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target: <span class=\"built_in\">any</span>, property: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    descriptor.enumerable = value;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™é‡Œçš„ <code>@enumerable(false)</code> æ˜¯ä¸€ä¸ªè£…é¥°å™¨å·¥å‚ï¼Œå½“è£…é¥°å™¨ <code>@enumerable(false)</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šä¿®æ”¹å±æ€§æè¿°ç¬¦çš„ <code>enumerable</code> å±æ€§ã€‚</p>\n</blockquote>\n<h3 id=\"21-8-è®¿é—®å™¨è£…é¥°å™¨\"><a href=\"#21-8-è®¿é—®å™¨è£…é¥°å™¨\" class=\"headerlink\" title=\"21.8 è®¿é—®å™¨è£…é¥°å™¨\"></a>21.8 è®¿é—®å™¨è£…é¥°å™¨</h3><blockquote>\n<p>è®¿é—®å™¨è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªè®¿é—®å™¨çš„å£°æ˜ä¹‹å‰(ç´§é ç€è®¿é—®å™¨å£°æ˜)ã€‚è®¿é—®å™¨è£…é¥°å™¨ åº”ç”¨äºè®¿é—®å™¨çš„ <code>å±æ€§æè¿°ç¬¦</code> å¹¶ä¸”å¯ä»¥ç”¨æ¥ç›‘è§†ï¼Œä¿®æ”¹æˆ–æ›¿æ¢ä¸€ä¸ªè®¿é—®å™¨çš„å®šä¹‰ã€‚è®¿é—®å™¨è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­( <code>.d.ts</code> )ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡(æ¯”å¦‚ <code>declare</code> çš„ç±»)é‡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼š<code>TypeScript</code> ä¸å…è®¸åŒæ—¶è£…é¥°ä¸€ä¸ªæˆå‘˜çš„ <code>get</code> å’Œ <code>set</code> è®¿é—®å™¨ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä¸€ä¸ªæˆå‘˜çš„æ‰€æœ‰è£…é¥°çš„å¿…é¡»åº”ç”¨åœ¨æ–‡æ¡£é¡ºåºçš„ç¬¬ä¸€ä¸ªè®¿é—®å™¨ä¸Šã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨è£…é¥°å™¨åº”ç”¨äºä¸€ä¸ªå±æ€§æè¿°ç¬¦æ—¶ï¼Œå®ƒè”åˆäº† <code>get</code> å’Œ <code>set</code> è®¿é—®å™¨ï¼Œè€Œä¸æ˜¯åˆ†å¼€å£°æ˜çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>è®¿é—®å™¨è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>3</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ¥è¯´æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—</li>\n<li>æˆå‘˜çš„å±æ€§æè¿°ç¬¦</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº <code>ES5</code>ï¼Œ<code>Property Descriptor</code> å°†ä¼šæ˜¯ <code>undefined</code>ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœè®¿é—®å™¨è£…é¥°å™¨è¿”å›ä¸€ä¸ªå€¼ï¼Œå®ƒä¼šè¢«ç”¨ä½œæ–¹æ³•çš„ <code>å±æ€§æè¿°ç¬¦</code> æ³¨æ„ï¼šå¦‚æœä»£ç è¾“å‡ºç›®æ ‡ç‰ˆæœ¬å°äº <code>ES5</code> è¿”å›å€¼ä¼šè¢«å¿½ç•¥ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢æ˜¯ä½¿ç”¨äº†è®¿é—®å™¨è£…é¥°å™¨ (<code>@configurable</code>) çš„ä¾‹å­ï¼Œåº”ç”¨äº <code>Point</code> ç±»çš„æˆå‘˜ä¸Šã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">x: <span class=\"built_in\">number</span>, y: <span class=\"built_in\">number</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._x = x;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._y = y;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@configurable</span>(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">x</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._x;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@configurable</span>(<span class=\"literal\">false</span>)</span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">y</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._y;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> p: Point = <span class=\"keyword\">new</span> Point(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(p);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å‡½æ•°å£°æ˜æ¥å®šä¹‰ <code>@configurable</code> è£…é¥°å™¨ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">configurable</span>(<span class=\"params\">value: <span class=\"built_in\">boolean</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyKey: <span class=\"built_in\">string</span>, descriptor: PropertyDescriptor</span>) </span>&#123;</span><br><span class=\"line\">    descriptor.configurable = value;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"21-9-å±æ€§è£…é¥°å™¨\"><a href=\"#21-9-å±æ€§è£…é¥°å™¨\" class=\"headerlink\" title=\"21.9 å±æ€§è£…é¥°å™¨\"></a>21.9 å±æ€§è£…é¥°å™¨</h3><blockquote>\n<p>å±æ€§è£…é¥°å™¨å£°æ˜åœ¨ä¸€ä¸ªå±æ€§å£°æ˜ä¹‹å‰(ç´§é ç€å±æ€§å£°æ˜)ã€‚å±æ€§è£…é¥°å™¨ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ä¸­ï¼ˆ<code>.d.ts</code>ï¼‰ï¼Œæˆ–è€…ä»»ä½•å¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ <code>declare</code> çš„ç±»ï¼‰é‡Œã€‚</p>\n</blockquote>\n<blockquote>\n<p>å±æ€§è£…é¥°å™¨è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>2</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—ã€‚</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼š<code>å±æ€§æè¿°ç¬¦</code> ä¸ä¼šä½œä¸ºå‚æ•°ä¼ å…¥å±æ€§è£…é¥°å™¨ï¼Œè¿™ä¸ <code>TypeScript</code> æ˜¯å¦‚ä½•åˆå§‹åŒ–å±æ€§è£…é¥°å™¨æœ‰å…³ã€‚å› ä¸ºç›®å‰æ²¡æœ‰åŠæ³•åœ¨å®šä¹‰ä¸€ä¸ªåŸå‹å¯¹è±¡çš„æˆå‘˜æ—¶æè¿°ä¸€ä¸ªå®ä¾‹å±æ€§ï¼Œå¹¶ä¸”æ²¡åŠæ³•ç›‘è§†æˆ–ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„åˆå§‹åŒ–æ–¹æ³•ã€‚è¿”å›å€¼ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚å› æ­¤ï¼Œå±æ€§æè¿°ç¬¦åªèƒ½ç”¨æ¥ç›‘è§†ç±»ä¸­æ˜¯å¦å£°æ˜äº†æŸä¸ªåå­—çš„å±æ€§ã€‚</p>\n</blockquote>\n<ul>\n<li>æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥è®°å½•è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@format</span>(<span class=\"string\">&quot;Hello, %s&quot;</span>)</span><br><span class=\"line\">    greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">let</span> formatString = getFormat(<span class=\"built_in\">this</span>, <span class=\"string\">&quot;greeting&quot;</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> formatString.replace(<span class=\"string\">&quot;%s&quot;</span>, <span class=\"built_in\">this</span>.greeting);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"keyword\">let</span> g: Greeter = <span class=\"keyword\">new</span> Greeter(<span class=\"string\">&quot;é¼“åŠ±&quot;</span>);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(g);</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"comment\">// ç„¶åå®šä¹‰ @format è£…é¥°å™¨ å’Œ getFormat å‡½æ•°</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;reflect-metadata&quot;</span>;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"keyword\">const</span> formatMetadataKey = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;format&quot;</span>);</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">format</span>(<span class=\"params\">formatString: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Reflect</span>.metadata(formatMetadataKey, formatString);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&gt;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">getFormat</span>(<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyKey: <span class=\"built_in\">string</span></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">Reflect</span>.getMetadata(formatMetadataKey, target, propertyKey);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¸ª <code>@format(&quot;Hello, %s&quot;)</code> è£…é¥°å™¨æ˜¯ä¸ª <code>è£…é¥°å™¨å·¥å‚</code>ã€‚å½“ <code>@format(&quot;Hello, %s&quot;)</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒæ·»åŠ ä¸€æ¡è¿™ä¸ªå±æ€§çš„å…ƒæ•°æ®ï¼Œé€šè¿‡ <code>reflect-metadata</code> åº“é‡Œçš„ <code>Reflect.metadata</code> å‡½æ•°ã€‚å½“ <code>getFormat</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒè¯»å–æ ¼å¼çš„å…ƒæ•°æ®ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šè¿™ä¸ªä¾‹å­éœ€è¦ä½¿ç”¨ <code>reflect-metadata</code> åº“ã€‚æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ <code>reflect-metadata</code> åº“æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"21-10-å‚æ•°è£…é¥°å™¨\"><a href=\"#21-10-å‚æ•°è£…é¥°å™¨\" class=\"headerlink\" title=\"21.10 å‚æ•°è£…é¥°å™¨\"></a>21.10 å‚æ•°è£…é¥°å™¨</h3><blockquote>\n<p><code>å‚æ•°è£…é¥°å™¨</code> å£°æ˜åœ¨ä¸€ä¸ªå‚æ•°å£°æ˜ä¹‹å‰(ç´§é ç€å‚æ•°å£°æ˜)ã€‚å‚æ•°è£…é¥°å™¨åº”ç”¨äº <code>ç±»æ„é€ å‡½æ•°</code> æˆ– <code>æ–¹æ³•å£°æ˜</code>ã€‚å‚æ•°è£…é¥°å™¨ ä¸èƒ½ç”¨åœ¨å£°æ˜æ–‡ä»¶ï¼ˆ<code>.d.ts</code>ï¼‰ï¼Œé‡è½½æˆ–å…¶å®ƒå¤–éƒ¨ä¸Šä¸‹æ–‡ï¼ˆæ¯”å¦‚ <code>declare</code> çš„ç±»ï¼‰é‡Œã€‚<br><code>å‚æ•°è£…é¥°å™¨</code> è¡¨è¾¾å¼ä¼šåœ¨è¿è¡Œæ—¶å½“ä½œå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼ å…¥ä¸‹åˆ— <code>3</code> ä¸ªå‚æ•°ï¼š</p>\n<ol>\n<li>å¯¹äºé™æ€æˆå‘˜æ¥è¯´æ˜¯ç±»çš„æ„é€ å‡½æ•°ï¼Œå¯¹äºå®ä¾‹æˆå‘˜æ˜¯ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>\n<li>æˆå‘˜çš„åå­—</li>\n<li>å‚æ•°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨çš„ç´¢å¼•</li>\n</ol>\n</blockquote>\n<blockquote>\n<p>æ³¨æ„ï¼šå‚æ•°è£…é¥°å™¨åªèƒ½ç”¨æ¥ç›‘è§†ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯å¦è¢«ä¼ å…¥ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å‚æ•°è£…é¥°å™¨çš„è¿”å›å€¼ä¼šè¢«å¿½ç•¥</p>\n</blockquote>\n<ul>\n<li>ä¸‹é¢å®šä¹‰äº†å‚æ•°è£…é¥°å™¨( <code>@required</code> )å¹¶åº”ç”¨äº <code>Greeter</code> ç±»æ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Greeter</span> </span>&#123;</span><br><span class=\"line\">  greeting: <span class=\"built_in\">string</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\">message: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.greeting = message;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">greet</span>(<span class=\"params\"><span class=\"meta\">@required</span> name: <span class=\"built_in\">string</span></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&quot;Hello &quot;</span> + name + <span class=\"string\">&quot;, &quot;</span> + <span class=\"built_in\">this</span>.greeting;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç„¶åæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°å®šä¹‰ <code>@required</code> å’Œ <code>@validate</code> è£…é¥°å™¨</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;reflect-metadata&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> requiredMetadataKey = <span class=\"built_in\">Symbol</span>(<span class=\"string\">&quot;required&quot;</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">required</span>(<span class=\"params\">target: <span class=\"built_in\">Object</span>, propertyKey: <span class=\"built_in\">string</span> | symbol, parameterIndex: <span class=\"built_in\">number</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> existingRequiredParameters: <span class=\"built_in\">number</span>[] = <span class=\"built_in\">Reflect</span>.getOwnMetadata(requiredMetadataKey, target, propertyKey) || [];</span><br><span class=\"line\">  existingRequiredParameters.push(parameterIndex);</span><br><span class=\"line\">  <span class=\"built_in\">Reflect</span>.defineMetadata(requiredMetadataKey, existingRequiredParameters, target, propertyKey);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">validate</span>(<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyName: <span class=\"built_in\">string</span>, descriptor: TypedPropertyDescriptor&lt;<span class=\"built_in\">Function</span>&gt;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> method = descriptor.value;</span><br><span class=\"line\">  descriptor.value = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> requiredParameters: <span class=\"built_in\">number</span>[] = <span class=\"built_in\">Reflect</span>.getOwnMetadata(requiredMetadataKey, target, propertyName);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (requiredParameters) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> parameterIndex <span class=\"keyword\">of</span> requiredParameters) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (parameterIndex &gt;= <span class=\"built_in\">arguments</span>.length || <span class=\"built_in\">arguments</span>[parameterIndex] === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">&quot;Missing required argument.&quot;</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> method.apply(<span class=\"built_in\">this</span>, <span class=\"built_in\">arguments</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>@required</code> è£…é¥°å™¨æ·»åŠ äº†å…ƒæ•°æ®å®ä½“æŠŠå‚æ•°æ ‡è®°ä¸ºå¿…é¡»çš„ã€‚<br><code>@validate</code> è£…é¥°å™¨æŠŠ <code>greet</code> æ–¹æ³•åŒ…è£¹åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œåœ¨è°ƒç”¨åŸå…ˆçš„å‡½æ•°å‰éªŒè¯å‡½æ•°å‚æ•°ã€‚<br><code>æ³¨æ„ï¼š</code>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† <code>reflect-metadata</code> åº“ã€‚ æŸ¥çœ‹ å…ƒæ•°æ® äº†è§£ <code>reflect-metadata</code> åº“çš„æ›´å¤šä¿¡æ¯ã€‚</p>\n</blockquote>\n<h3 id=\"21-11-å…ƒæ•°æ®\"><a href=\"#21-11-å…ƒæ•°æ®\" class=\"headerlink\" title=\"21.11 å…ƒæ•°æ®\"></a>21.11 å…ƒæ•°æ®</h3><blockquote>\n<p>ä¸€éƒ¨åˆ†ä¾‹å­ä½¿ç”¨äº† <code>reflect-metadata</code> åº“æ¥æ”¯æŒå®ç°æ€§çš„ <code>metadata API</code>ã€‚è¿™ä¸ªåº“è¿˜ä¸æ˜¯ <code>ECMAScript\\( JavaScript \\)</code> æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚ç„¶è€Œï¼Œå½“è£…é¥°å™¨è¢« <code>ECMAScript</code> å®˜æ–¹æ ‡å‡†é‡‡çº³åï¼Œè¿™äº›æ‰©å±•ä¹Ÿå°†è¢«æ¨èç»™ <code>ECMAScript</code> ä»¥é‡‡çº³ã€‚</p>\n</blockquote>\n<ul>\n<li>ä½ å¯ä»¥é€šè¿‡ <code>npm</code> å®‰è£…è¿™ä¸ªåº“</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i reflect-metadata --save</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>TypeScript</code> æ”¯æŒä¸ºå¸¦æœ‰è£…é¥°å™¨çš„å£°æ˜ç”Ÿæˆå…ƒæ•°æ®ã€‚ä½ éœ€è¦åœ¨ <code>å‘½ä»¤è¡Œ</code> æˆ– <code>tsconfig.json</code> é‡Œå¯ç”¨ <code>emitDecoratorMetadata</code> ç¼–è¯‘å™¨é€‰é¡¹ã€‚</p>\n</blockquote>\n<ul>\n<li>å‘½ä»¤è¡Œï¼š</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tsc --target ES5 --experimentalDecorators --emitDecoratorMetadata</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>tsconfig.json</code></li>\n</ul>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;target&quot;</span>: <span class=\"string\">&quot;ES5&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;experimentalDecorators&quot;</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;emitDecoratorMetadata&quot;</span>: <span class=\"literal\">true</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“å¯ç”¨äº†ï¼Œåªè¦ <code>reflect-metadata</code> åº“è¢«å¼•å…¥äº†ï¼Œè®¾è®¡é˜¶æ®µæ·»åŠ çš„ç±»å‹ä¿¡æ¯å¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨ã€‚</p>\n</blockquote>\n<ul>\n<li>å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">&quot;reflect-metadata&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Point</span> </span>&#123;</span><br><span class=\"line\">  x: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">  y: <span class=\"built_in\">number</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Line</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p0: Point;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p1: Point;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p0</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p0 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p0</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p1</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p1 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p1</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">validate</span>&lt;<span class=\"title\">T</span>&gt;(<span class=\"params\">target: <span class=\"built_in\">any</span>, propertyKey: <span class=\"built_in\">string</span>, descriptor: TypedPropertyDescriptor&lt;T&gt;</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> set = descriptor.set;</span><br><span class=\"line\">  descriptor.set = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value: T</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> <span class=\"keyword\">type</span> = <span class=\"built_in\">Reflect</span>.getMetadata(<span class=\"string\">&quot;design:type&quot;</span>, target, propertyKey);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!(value <span class=\"keyword\">instanceof</span> <span class=\"keyword\">type</span>)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">TypeError</span>(<span class=\"string\">&quot;Invalid type.&quot;</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    set(value);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>TypeScript</code> ç¼–è¯‘å™¨å¯ä»¥é€šè¿‡ <code>@Reflect.metadata</code> è£…é¥°å™¨æ³¨å…¥è®¾è®¡é˜¶æ®µçš„ç±»å‹ä¿¡æ¯ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒç›¸å½“äºä¸‹é¢çš„ <code>TypeScriptï¼š</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Line1</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p0: Point;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> _p1: Point;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"meta\">@Reflect</span>.metadata(<span class=\"string\">&quot;design:type&quot;</span>, Point)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p0</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p0 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p0</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p0;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@validate</span></span><br><span class=\"line\">  <span class=\"meta\">@Reflect</span>.metadata(<span class=\"string\">&quot;design:type&quot;</span>, Point)</span><br><span class=\"line\">  <span class=\"keyword\">set</span> <span class=\"title\">p1</span>(<span class=\"params\">value: Point</span>) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>._p1 = value;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">get</span> <span class=\"title\">p1</span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">this</span>._p1;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ï¼š è£…é¥°å™¨å…ƒæ•°æ®æ˜¯ä¸ªå®éªŒæ€§çš„ç‰¹æ€§å¹¶ä¸”å¯èƒ½åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­å‘å£°ç ´åæ€§çš„æ”¹å˜ã€‚</p>\n</blockquote>\n<h3 id=\"21-12-Reflect-metadata-åº“\"><a href=\"#21-12-Reflect-metadata-åº“\" class=\"headerlink\" title=\"21.12 Reflect-metadata åº“\"></a>21.12 Reflect-metadata åº“</h3><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">namespace</span> Reflect &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ç”¨äºè£…é¥°å™¨</span></span><br><span class=\"line\">    metadata(k, v): <span class=\"function\">(<span class=\"params\">target, property?</span>) =&gt;</span> <span class=\"built_in\">void</span></span><br><span class=\"line\">    <span class=\"comment\">// åœ¨å¯¹è±¡ä¸Šé¢å®šä¹‰å…ƒæ•°æ®</span></span><br><span class=\"line\">    defineMetadata(k, v, o, p?): <span class=\"built_in\">void</span></span><br><span class=\"line\">    <span class=\"comment\">// æ˜¯å¦å­˜åœ¨å…ƒæ•°æ®</span></span><br><span class=\"line\">    hasMetadata(k, o, p?): <span class=\"built_in\">boolean</span></span><br><span class=\"line\">    hasOwnMetadata(k, o, p?): <span class=\"built_in\">boolean</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–å…ƒæ•°æ®</span></span><br><span class=\"line\">    getMetadata(k, o, p?): <span class=\"built_in\">any</span></span><br><span class=\"line\">    getOwnMetadata(k, o, p?): <span class=\"built_in\">any</span></span><br><span class=\"line\">    <span class=\"comment\">// è·å–æ‰€æœ‰å…ƒæ•°æ®çš„ Key</span></span><br><span class=\"line\">    getMetadataKeys(o, p?): <span class=\"built_in\">any</span>[]</span><br><span class=\"line\">    getOwnMetadataKeys(o, p?): <span class=\"built_in\">any</span>[]</span><br><span class=\"line\">    <span class=\"comment\">// åˆ é™¤å…ƒæ•°æ®</span></span><br><span class=\"line\">    deleteMetadata(k, o, p?): <span class=\"built_in\">boolean</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"21-12-1-å®‰è£…\"><a href=\"#21-12-1-å®‰è£…\" class=\"headerlink\" title=\"21.12.1 å®‰è£…\"></a>21.12.1 å®‰è£…</h4><h5 id=\"Metadata-Reflection-API\"><a href=\"#Metadata-Reflection-API\" class=\"headerlink\" title=\"Metadata Reflection API\"></a>Metadata Reflection API</h5><ul>\n<li><a href=\"%5Bhttps://rbuckton.github.io/reflect-metadata%5D(https://rbuckton.github.io/reflect-metadata)\">Detailed proposal</a></li>\n</ul>\n<ol>\n<li>Installation</li>\n</ol>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install reflect-metadata</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>Background</li>\n</ol>\n<ul>\n<li>Decorators add the ability to augment a class and its members as the class is defined, through a declarative syntax.</li>\n<li>Traceur attaches annotations to a static property on the class.</li>\n<li>Languages like C# (.NET), and Java support attributes or annotations that add metadata to types, along with a reflective API for reading metadata.</li>\n</ul>\n<ol start=\"3\">\n<li>Goals</li>\n</ol>\n<ul>\n<li>A number of use cases (Composition/Dependency Injection, Runtime Type Assertions, Reflection/Mirroring, Testing) want the ability to add additional metadata to a class in a consistent manner.</li>\n<li>A consistent approach is needed for various tools and libraries to be able to reason over metadata.</li>\n<li>Metadata-producing decorators (nee. â€œAnnotationsâ€) need to be generally composable with mutating decorators.</li>\n<li>Metadata should be available not only on an object but also through a Proxy, with related traps.</li>\n<li>Defining new metadata-producing decorators should not be arduous or over-complex for a developer.</li>\n<li>Metadata should be consistent with other language and runtime features of ECMAScript.</li>\n</ul>\n<ol start=\"4\">\n<li>Syntax</li>\n</ol>\n<ul>\n<li>Declarative definition of metadata:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  @<span class=\"built_in\">Reflect</span>.metadata(metadataKey, metadataValue)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Imperative definition of metadata:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Reflect</span>.defineMetadata(metadataKey, metadataValue, C.prototype, <span class=\"string\">&quot;method&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Imperative introspection of metadata:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> obj = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\"><span class=\"keyword\">let</span> metadataValue = <span class=\"built_in\">Reflect</span>.getMetadata(metadataKey, obj, <span class=\"string\">&quot;method&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>Semantics</li>\n</ol>\n<ul>\n<li>Object has a new [[Metadata]] internal property that will contain a Map whose keys are property keys (or <code>undefined</code> ) and whose values are Maps of metadata keys to metadata values.</li>\n<li>Object will have a number of new internal methods for [[DefineOwnMetadata]], [[GetOwnMetadata]], [[HasOwnMetadata]], etc.<ul>\n<li>These internal methods can be overridden by a Proxy to support additional traps.</li>\n<li>These internal methods will by default call a set of abstract operations to define and read metadata.</li>\n</ul>\n</li>\n<li>The Reflect object will expose the MOP operations to allow imperative access to metadata.</li>\n<li>Metadata defined on class declaration <em>C</em> is stored in <em>C</em>.[[Metadata]], with <code>undefined</code> as the key.</li>\n<li>Metadata defined on static members of class declaration <em>C</em> are stored in <em>C</em>.[[Metadata]], with the property key as the key.</li>\n<li>Metadata defined on instance members of class declaration <em>C</em> are stored in <em>C</em>.prototype.[[Metadata]], with the property key as the key.</li>\n</ul>\n<ol>\n<li>API</li>\n</ol>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// define metadata on an object or property</span></span><br><span class=\"line\"><span class=\"built_in\">Reflect</span>.defineMetadata(metadataKey, metadataValue, target);</span><br><span class=\"line\"><span class=\"built_in\">Reflect</span>.defineMetadata(metadataKey, metadataValue, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// check for presence of a metadata key on the prototype chain of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// check for presence of an own metadata key of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasOwnMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.hasOwnMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get metadata value of a metadata key on the prototype chain of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get metadata value of an own metadata key of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get all metadata keys on the prototype chain of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadataKeys(target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getMetadataKeys(target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// get all own metadata keys of an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadataKeys(target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.getOwnMetadataKeys(target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// delete metadata from an object or property</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.deleteMetadata(metadataKey, target);</span><br><span class=\"line\"><span class=\"keyword\">let</span> result = <span class=\"built_in\">Reflect</span>.deleteMetadata(metadataKey, target, propertyKey);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// apply metadata via a decorator to a constructor</span></span><br><span class=\"line\">@<span class=\"built_in\">Reflect</span>.metadata(metadataKey, metadataValue)</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// apply metadata via a decorator to a method (property)</span></span><br><span class=\"line\">  @<span class=\"built_in\">Reflect</span>.metadata(metadataKey, metadataValue)</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"7\">\n<li>Alternatives</li>\n</ol>\n<ul>\n<li>Use properties rather than a separate API.<ul>\n<li>Obvious downside is that this can be a lot of code:</li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ParamTypes</span>(<span class=\"params\">...types</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">target, propertyKey</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> symParamTypes = <span class=\"built_in\">Symbol</span>.for(<span class=\"string\">&quot;design:paramtypes&quot;</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (propertyKey === <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">      target[symParamTypes] = types;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> symProperties = <span class=\"built_in\">Symbol</span>.for(<span class=\"string\">&quot;design:properties&quot;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">let</span> properties, property;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(target, symProperties)) &#123;</span><br><span class=\"line\">        properties = target[symProperties];</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        properties = target[symProperties] = &#123;&#125;;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"built_in\">Object</span>.prototype.hasOwnProperty.call(properties, propertyKey)) &#123;</span><br><span class=\"line\">        property = properties[propertyKey];</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        property = properties[propertyKey] = &#123;&#125;;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      property[symParamTypes] = types;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"8\">\n<li>Notes</li>\n</ol>\n<ul>\n<li>Though it may seem counterintuitive, the methods on Reflect place the parameters for the metadata key and metadata value before the target or property key. This is due to the fact that the property key is the only optional parameter in the argument list. This also makes the methods easier to curry with Function#bind. This also helps reduce the overall footprint and complexity of a metadata-producing decorator that could target both a class or a property:</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ParamTypes</span>(<span class=\"params\">...types</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// as propertyKey is effectively optional, its easier to use here</span></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">target, propertyKey</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Reflect</span>.defineMetadata(<span class=\"string\">&quot;design:paramtypes&quot;</span>, types, target, propertyKey);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// vs. having multiple overloads with the target and key in the front:</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">// return (target, propertyKey) =&gt; &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//    if (propertyKey === undefined) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.defineMetadata(target, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//    else &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.defineMetadata(target, propertyKey, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">// vs. having a different methods for the class or a property:</span></span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"comment\">// return (target, propertyKey) =&gt; &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//    if (propertyKey === undefined) &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.defineMetadata(target, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">//    else &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//      Reflect.definePropertyMetadata(target, propertyKey, &quot;design:paramtypes&quot;, types);</span></span><br><span class=\"line\">  <span class=\"comment\">//    &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>To enable experimental support for metadata decorators in your TypeScript project, you must add <code>&quot;experimentalDecorators&quot;: true</code> to your tsconfig.json file.</li>\n<li>To enable experimental support for auto-generated type metadata in your TypeScript project, you must add <code>&quot;emitDecoratorMetadata&quot;: true</code> to your tsconfig.json file.<ul>\n<li>Please note that auto-generated type metadata may have issues with circular or forward references for types.</li>\n</ul>\n</li>\n</ul>\n<ol start=\"9\">\n<li>Issues</li>\n</ol>\n<ul>\n<li>A poorly written mutating decorator for a class constructor could cause metadata to become lost if the prototype chain is not maintained. Though, not maintaining the prototype chain in a mutating decorator for a class constructor would have other negative side effects as well. <a href=\"/rbuckton\">@rbuckton </a><ul>\n<li>This is mitigated if the mutating decorator returns a class expression that extends from the target, or returns a proxy for the decorator. <a href=\"/rbuckton\">@rbuckton </a></li>\n</ul>\n</li>\n<li>Metadata for a method is attached to the class (or prototype) via the property key. It would not then be available if trying to read metadata on the function of the method (e.g. â€œtearing-offâ€ the method from the class). <a href=\"/rbuckton\">@rbuckton </a></li>\n</ul>\n<h2 id=\"äºŒåäºŒã€Mixins-æ··å…¥\"><a href=\"#äºŒåäºŒã€Mixins-æ··å…¥\" class=\"headerlink\" title=\"äºŒåäºŒã€Mixins æ··å…¥\"></a>äºŒåäºŒã€Mixins æ··å…¥</h2><h3 id=\"22-1-ä»‹ç»\"><a href=\"#22-1-ä»‹ç»\" class=\"headerlink\" title=\"22.1 ä»‹ç»\"></a>22.1 ä»‹ç»</h3><blockquote>\n<p>é™¤äº†ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡ç»§æ‰¿æ–¹å¼ï¼Œè¿˜æµè¡Œä¸€ç§é€šç”¨å¯é‡ç”¨ç»„ä»¶åˆ›å»ºç±»çš„æ–¹å¼ï¼Œå°±æ˜¯è”åˆå¦ä¸€ä¸ªç®€å•ç±»çš„ä»£ç ã€‚<br>ä½ å¯èƒ½åœ¨ <code>Scala</code> ç­‰è¯­è¨€é‡Œå¯¹ <code>mixins</code> åŠå…¶ç‰¹æ€§å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†å®ƒåœ¨ <code>JavaScript</code> ä¸­ä¹Ÿæ˜¯å¾ˆæµè¡Œçš„ã€‚</p>\n</blockquote>\n<h3 id=\"22-2-æ··å…¥ç¤ºä¾‹\"><a href=\"#22-2-æ··å…¥ç¤ºä¾‹\" class=\"headerlink\" title=\"22.2 æ··å…¥ç¤ºä¾‹\"></a>22.2 æ··å…¥ç¤ºä¾‹</h3><blockquote>\n<p>ä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•åœ¨ <code>TypeScript</code> é‡Œä½¿ç”¨æ··å…¥ã€‚åé¢æˆ‘ä»¬è¿˜ä¼šè§£é‡Šè¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Disposable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Disposable</span> </span>&#123;</span><br><span class=\"line\">  isDisposed: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">dispose</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isDisposed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Activatable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Activatable</span> </span>&#123;</span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">activate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">deactivate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmartObject</span> <span class=\"title\">implements</span> <span class=\"title\">Disposable</span>, <span class=\"title\">Activatable</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">setInterval</span>(<span class=\"function\">() =&gt;</span> <span class=\"built_in\">console</span>.log(<span class=\"built_in\">this</span>.isActive + <span class=\"string\">&quot;:&quot;</span> + <span class=\"built_in\">this</span>.isDisposed), <span class=\"number\">500</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">interact</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.activate();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// Disposable</span></span><br><span class=\"line\">  isDisposed: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  dispose: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  <span class=\"comment\">// Activatable</span></span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  activate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  deactivate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">applyMixins(SmartObject, [Disposable, Activatable]);</span><br><span class=\"line\"><span class=\"keyword\">let</span> smartObj = <span class=\"keyword\">new</span> SmartObject();</span><br><span class=\"line\"><span class=\"built_in\">setTimeout</span>(<span class=\"function\">() =&gt;</span> smartObj.interact(), <span class=\"number\">1000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">////////////////////////////////////////</span></span><br><span class=\"line\"><span class=\"comment\">// In your runtime library somewhere</span></span><br><span class=\"line\"><span class=\"comment\">////////////////////////////////////////</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMixins</span>(<span class=\"params\">derivedCtor: <span class=\"built_in\">any</span>, baseCtors: <span class=\"built_in\">any</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  baseCtors.forEach(<span class=\"function\"><span class=\"params\">baseCtor</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.getOwnPropertyNames(baseCtor.prototype).forEach(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">      derivedCtor.prototype[name] = baseCtor.prototype[name];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"22-3-ç†è§£è¿™ä¸ªä¾‹å­\"><a href=\"#22-3-ç†è§£è¿™ä¸ªä¾‹å­\" class=\"headerlink\" title=\"22.3 ç†è§£è¿™ä¸ªä¾‹å­\"></a>22.3 ç†è§£è¿™ä¸ªä¾‹å­</h3><ol>\n<li>ä»£ç é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œå®ƒä»¬å°†åšä¸º <code>mixins</code>ã€‚å¯ä»¥çœ‹åˆ°æ¯ä¸ªç±»éƒ½åªå®šä¹‰äº†ä¸€ä¸ªç‰¹å®šçš„è¡Œä¸ºæˆ–åŠŸèƒ½ã€‚ç¨åæˆ‘ä»¬ä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼ŒåŒæ—¶å…·æœ‰è¿™ä¸¤ç§åŠŸèƒ½ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Disposable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Disponsable</span> </span>&#123;</span><br><span class=\"line\">  isDisponsed: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">dispose</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isDisponsed = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Activatable Mixin</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Activatable</span> </span>&#123;</span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">activate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">deactivate</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.isActive = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>ä¸‹é¢åˆ›å»ºä¸€ä¸ªç±»ï¼Œç»“åˆäº†è¿™ä¸¤ä¸ª <code>mixins</code>ã€‚ ä¸‹é¢æ¥çœ‹ä¸€ä¸‹å…·ä½“æ˜¯æ€ä¹ˆæ“ä½œçš„ï¼š</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SmartObject</span> <span class=\"title\">implements</span> <span class=\"title\">Disposable</span>, <span class=\"title\">Activatable</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>é¦–å…ˆåº”è¯¥æ³¨æ„åˆ°çš„æ˜¯ï¼Œæ²¡ä½¿ç”¨ <code>extends</code> è€Œæ˜¯ä½¿ç”¨ <code>implements</code>ã€‚ æŠŠç±»å½“æˆäº†æ¥å£ï¼Œä»…ä½¿ç”¨ <code>Disposable</code> å’Œ <code>Activatable</code> çš„ç±»å‹è€Œéå…¶å®ç°ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨ç±»é‡Œé¢å®ç°æ¥å£ã€‚ä½†æ˜¯è¿™æ˜¯æˆ‘ä»¬åœ¨ç”¨ <code>mixin</code> æ—¶æƒ³é¿å…çš„ã€‚</li>\n<li>æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšæ¥è¾¾åˆ°ç›®çš„ï¼Œä¸ºå°†è¦ <code>mixin</code> è¿›æ¥çš„å±æ€§æ–¹æ³•åˆ›å»ºå‡ºå ä½å±æ€§ã€‚è¿™å‘Šè¯‰ç¼–è¯‘å™¨è¿™äº›æˆå‘˜åœ¨è¿è¡Œæ—¶æ˜¯å¯ç”¨çš„ã€‚ è¿™æ ·å°±èƒ½ä½¿ç”¨ <code>mixin</code> å¸¦æ¥çš„ä¾¿åˆ©ï¼Œè™½è¯´éœ€è¦æå‰å®šä¹‰ä¸€äº›å ä½å±æ€§ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Disposable</span></span><br><span class=\"line\">  isDisposed: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  dispose: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\"><span class=\"comment\">// Activatable</span></span><br><span class=\"line\">  isActive: <span class=\"built_in\">boolean</span> = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  activate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br><span class=\"line\">  deactivate: <span class=\"function\">() =&gt;</span> <span class=\"built_in\">void</span>;</span><br></pre></td></tr></table></figure>\n\n<ol start=\"5\">\n<li>æœ€åï¼ŒæŠŠ <code>mixins</code> æ··å…¥å®šä¹‰çš„ç±»ï¼Œå®Œæˆå…¨éƒ¨å®ç°éƒ¨åˆ†ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">applyMixins(SmartObject, [Disposable, Activatable]);</span><br></pre></td></tr></table></figure>\n\n<ol start=\"6\">\n<li>æœ€åï¼Œåˆ›å»ºè¿™ä¸ªå¸®åŠ©å‡½æ•°ï¼Œå¸®æˆ‘ä»¬åšæ··å…¥æ“ä½œã€‚ å®ƒä¼šéå† <code>mixins</code> ä¸Šçš„æ‰€æœ‰å±æ€§ï¼Œå¹¶å¤åˆ¶åˆ°ç›®æ ‡ä¸Šå»ï¼ŒæŠŠä¹‹å‰çš„å ä½å±æ€§æ›¿æ¢æˆçœŸæ­£çš„å®ç°ä»£ç ã€‚</li>\n</ol>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">applyMixins</span>(<span class=\"params\">derivedCtor: <span class=\"built_in\">any</span>, baseCtors: <span class=\"built_in\">any</span>[]</span>) </span>&#123;</span><br><span class=\"line\">  baseCtors.forEach(<span class=\"function\"><span class=\"params\">baseCtor</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.getOwnPropertyNames(baseCtor.prototype).forEach(<span class=\"function\"><span class=\"params\">name</span> =&gt;</span> &#123;</span><br><span class=\"line\">      derivedCtor.prototype[name] = baseCtor.prototype[name];</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\"><a href=\"#äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\" class=\"headerlink\" title=\"äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤\"></a>äºŒåä¸‰ã€ä¸‰æ–œçº¿æŒ‡ä»¤</h2><ul>\n<li>ä¸‰æ–œçº¿æŒ‡ä»¤æ˜¯åŒ…å«å•ä¸ª <code>XML</code> æ ‡ç­¾çš„å•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šå†…å®¹ä¼šåšä¸ºç¼–è¯‘å™¨æŒ‡ä»¤ä½¿ç”¨ã€‚</li>\n<li>ä¸‰æ–œçº¿æŒ‡ä»¤ä»…å¯æ”¾åœ¨åŒ…å«å®ƒçš„æ–‡ä»¶æœ€é¡¶ç«¯ã€‚ä¸€ä¸ªä¸‰æ–œçº¿æŒ‡ä»¤çš„å‰é¢åªèƒ½å‡ºç°å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šï¼Œè¿™åŒ…æ‹¬å…¶å®ƒçš„ä¸‰æ–œçº¿æŒ‡ä»¤ã€‚å¦‚æœå®ƒä»¬å‡ºç°åœ¨ä¸€ä¸ªè¯­å¥æˆ–å£°æ˜ä¹‹åï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šè¢«å½“ä½œæ™®é€šçš„å•è¡Œæ³¨é‡Šï¼Œå¹¶ä¸”ä¸å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;...&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"comment\">/// &lt;reference path=&quot;...&quot; /&gt; æŒ‡ä»¤æ˜¯ä¸‰æ–œçº¿æŒ‡ä»¤ä¸­æœ€å¸¸è§çš„ä¸€ç§ã€‚ å®ƒç”¨äºå£°æ˜æ–‡ä»¶é—´çš„ ä¾èµ–ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸‰æ–œçº¿å¼•ç”¨å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¦å¼•å…¥çš„é¢å¤–æ–‡ä»¶ã€‚</li>\n<li>å½“ä½¿ç”¨ <code>--out</code> æˆ– <code>--outFile</code> æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥åšä¸ºè°ƒæ•´è¾“å‡ºå†…å®¹é¡ºåºçš„ä¸€ç§æ–¹æ³•ã€‚æ–‡ä»¶åœ¨è¾“å‡ºæ–‡ä»¶å†…å®¹ä¸­çš„ä½ç½®ä¸ç»è¿‡é¢„å¤„ç†åçš„è¾“å…¥é¡ºåºä¸€è‡´ã€‚</li>\n</ul>\n<h3 id=\"23-1-é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\"><a href=\"#23-1-é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\" class=\"headerlink\" title=\"23.1 é¢„å¤„ç†è¾“å…¥æ–‡ä»¶\"></a>23.1 é¢„å¤„ç†è¾“å…¥æ–‡ä»¶</h3><blockquote>\n<p>ç¼–è¯‘å™¨ä¼šå¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†æ¥è§£ææ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨æŒ‡ä»¤ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œé¢å¤–çš„æ–‡ä»¶ä¼šåŠ åˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚<br>è¿™ä¸ªè¿‡ç¨‹ä¼šä»¥ä¸€äº›æ ¹æ–‡ä»¶å¼€å§‹ï¼›å®ƒä»¬æ˜¯åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–æ˜¯åœ¨ <code>tsconfig.json</code> ä¸­çš„ <code>&quot;files&quot;</code> åˆ—è¡¨é‡Œçš„æ–‡ä»¶ã€‚è¿™äº›æ ¹æ–‡ä»¶æŒ‰æŒ‡å®šçš„é¡ºåºè¿›è¡Œé¢„å¤„ç†ã€‚åœ¨ä¸€ä¸ªæ–‡ä»¶è¢«åŠ å…¥åˆ—è¡¨å‰ï¼Œå®ƒåŒ…å«çš„æ‰€æœ‰ä¸‰æ–œçº¿å¼•ç”¨éƒ½è¦è¢«å¤„ç†ï¼Œè¿˜æœ‰å®ƒä»¬åŒ…å«çš„ç›®æ ‡ã€‚ä¸‰æ–œçº¿å¼•ç”¨ä»¥å®ƒä»¬åœ¨æ–‡ä»¶é‡Œå‡ºç°çš„é¡ºåºï¼Œä½¿ç”¨æ·±åº¦ä¼˜å…ˆçš„æ–¹å¼è§£æã€‚<br>Â  ä¸€ä¸ªä¸‰æ–œçº¿å¼•ç”¨è·¯å¾„æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æ–‡ä»¶çš„ï¼Œå¦‚æœä¸æ˜¯æ ¹æ–‡ä»¶ã€‚</p>\n</blockquote>\n<h3 id=\"23-2-é”™è¯¯\"><a href=\"#23-2-é”™è¯¯\" class=\"headerlink\" title=\"23.2 é”™è¯¯\"></a>23.2 é”™è¯¯</h3><blockquote>\n<p>å¼•ç”¨ä¸å­˜åœ¨çš„æ–‡ä»¶ä¼šæŠ¥é”™ã€‚ä¸€ä¸ªæ–‡ä»¶ç”¨ä¸‰æ–œçº¿æŒ‡ä»¤å¼•ç”¨è‡ªå·±ä¼šæŠ¥é”™ã€‚</p>\n</blockquote>\n<h3 id=\"23-3-ä½¿ç”¨-noResolve\"><a href=\"#23-3-ä½¿ç”¨-noResolve\" class=\"headerlink\" title=\"23.3 ä½¿ç”¨ --noResolve\"></a>23.3 ä½¿ç”¨ <code>--noResolve</code></h3><blockquote>\n<p>å¦‚æœæŒ‡å®šäº† <code>--noResolve</code> ç¼–è¯‘é€‰é¡¹ï¼Œä¸‰æ–œçº¿æŒ‡ä»¤ä¼šè¢«å¿½ç•¥ï¼›å®ƒä»¬ä¸ä¼šå¢åŠ æ–°æ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šæ”¹å˜ç»™å®šæ–‡ä»¶çš„é¡ºåºã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;reference types=&quot;...&quot; /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¸ <code>/// &lt;reference path=&quot;...&quot; /&gt;</code> æŒ‡ä»¤ç›¸ä¼¼ï¼Œè¿™ä¸ªæŒ‡ä»¤æ˜¯ç”¨æ¥å£°æ˜ä¾èµ–çš„ï¼›ä¸€ä¸ª <code>/// &lt;reference types=&quot;...&quot; /&gt;</code> æŒ‡ä»¤åˆ™å£°æ˜äº†å¯¹æŸä¸ªåŒ…çš„ä¾èµ–ã€‚</li>\n<li>å¯¹è¿™äº›åŒ…çš„åå­—çš„è§£æä¸åœ¨ <code>import</code> è¯­å¥é‡Œå¯¹æ¨¡å—åçš„è§£æç±»ä¼¼ã€‚å¯ä»¥ç®€å•åœ°æŠŠä¸‰æ–œçº¿ç±»å‹å¼•ç”¨æŒ‡ä»¤å½“åš <code>import</code> å£°æ˜çš„åŒ…ã€‚</li>\n<li>ä¾‹å¦‚ï¼ŒæŠŠ <code>/// &lt;reference types=&quot;node&quot; /&gt;</code>å¼•å…¥åˆ°å£°æ˜æ–‡ä»¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–‡ä»¶ä½¿ç”¨äº†<code>@types/node/index.d.ts</code> é‡Œé¢å£°æ˜çš„åå­—ï¼›å¹¶ä¸”ï¼Œè¿™ä¸ªåŒ…éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä¸å£°æ˜æ–‡ä»¶ä¸€èµ·è¢«åŒ…å«è¿›æ¥ã€‚</li>\n<li>ä»…å½“åœ¨ä½ éœ€è¦å†™ä¸€ä¸ª <code>.d.ts</code> æ–‡ä»¶æ—¶æ‰ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ã€‚</li>\n<li>å¯¹äºé‚£äº›åœ¨ç¼–è¯‘é˜¶æ®µç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨åœ°æ·»åŠ  <code>/// &lt;reference types=&quot;...&quot; /&gt;</code>ï¼›å½“ä¸”ä»…å½“ç»“æœæ–‡ä»¶ä¸­ä½¿ç”¨äº†å¼•ç”¨çš„åŒ…é‡Œçš„å£°æ˜æ—¶æ‰ä¼šåœ¨ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶é‡Œæ·»åŠ  Â <code>/// &lt;reference types=&quot;...&quot; /&gt;</code> è¯­å¥ã€‚</li>\n<li>è‹¥è¦åœ¨ <code>.ts</code> æ–‡ä»¶é‡Œå£°æ˜ä¸€ä¸ªå¯¹ <code>@types</code> åŒ…çš„ä¾èµ–ï¼Œä½¿ç”¨ <code>--types</code> å‘½ä»¤è¡Œé€‰é¡¹ æˆ–åœ¨ <code>tsconfig.json</code> é‡ŒæŒ‡å®šã€‚æŸ¥çœ‹ åœ¨ <code>tsconfig.json</code> é‡Œä½¿ç”¨ <code>@types</code>ï¼Œ<code>typeRoots</code> å’Œ <code>types</code> äº†è§£è¯¦æƒ…ã€‚</li>\n<li><code>/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</code> è¿™ä¸ªæŒ‡ä»¤æŠŠä¸€ä¸ªæ–‡ä»¶æ ‡è®°æˆé»˜è®¤åº“ã€‚ä½ ä¼šåœ¨ <code>lib.d.ts</code> æ–‡ä»¶å’Œå®ƒä¸åŒçš„å˜ä½“çš„é¡¶ç«¯çœ‹åˆ°è¿™ä¸ªæ³¨é‡Šã€‚è¿™ä¸ªæŒ‡ä»¤å‘Šè¯‰ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¸è¦åŒ…å«è¿™ä¸ªé»˜è®¤åº“ï¼ˆæ¯”å¦‚ï¼Œ<code>lib.d.ts</code>ï¼‰ã€‚ è¿™ä¸åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨ -<code>-noLib</code> ç›¸ä¼¼ã€‚</li>\n<li>è¿˜è¦æ³¨æ„ï¼Œå½“ä¼ é€’äº† <code>--skipDefaultLibCheck</code> æ—¶ï¼Œç¼–è¯‘å™¨åªä¼šå¿½ç•¥æ£€æŸ¥å¸¦æœ‰ <code>/// &lt;reference no-default-lib=&quot;true&quot;/&gt;</code> çš„æ–‡ä»¶ã€‚</li>\n</ul>\n<h3 id=\"23-4-lt-amd-module-gt\"><a href=\"#23-4-lt-amd-module-gt\" class=\"headerlink\" title=\"23.4 &lt;amd-module /&gt;\"></a>23.4 <code>&lt;amd-module /&gt;</code></h3><blockquote>\n<p>é»˜è®¤æƒ…å†µä¸‹ç”Ÿæˆçš„ <code>AMD</code> æ¨¡å— éƒ½æ˜¯åŒ¿åçš„ã€‚ä½†æ˜¯ï¼Œå½“ä¸€äº›å·¥å…·éœ€è¦å¤„ç†ç”Ÿæˆçš„æ¨¡å—æ—¶ä¼šäº§ç”Ÿé—®é¢˜ï¼Œæ¯”å¦‚ <code>r.jsã€‚amd-module</code> æŒ‡ä»¤å…è®¸ç»™ç¼–è¯‘å™¨ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„æ¨¡å—åï¼š</p>\n</blockquote>\n<ul>\n<li><code>amdModule.ts</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;amd-module name=&quot;NamedModule&quot; /&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿™ä¼šå°† <code>NamedModule</code> ä¼ å…¥åˆ° <code>AMD define</code> å‡½æ•°é‡Œï¼š</p>\n</blockquote>\n<ul>\n<li><code>amdModule.js</code></li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define(<span class=\"string\">&quot;NamedModule&quot;</span>, [<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> C = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> C;</span><br><span class=\"line\">  &#125;)();</span><br><span class=\"line\">  <span class=\"built_in\">exports</span>.C = C;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"23-5-lt-amd-dependency-gt\"><a href=\"#23-5-lt-amd-dependency-gt\" class=\"headerlink\" title=\"23.5 &lt;amd-dependency /&gt;\"></a>23.5 <code>&lt;amd-dependency /&gt;</code></h3><ul>\n<li>æ³¨æ„ï¼šè¿™ä¸ªæŒ‡ä»¤è¢«åºŸå¼ƒäº†ã€‚ä½¿ç”¨ <code>import &quot;moduleName&quot;;</code> è¯­å¥ä»£æ›¿ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;amd-dependency path=&quot;x&quot; /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// å‘Šè¯‰ç¼–è¯‘å™¨æœ‰ä¸€ä¸ªé TypeScript æ¨¡å—ä¾èµ–éœ€è¦è¢«æ³¨å…¥ï¼Œåšä¸ºç›®æ ‡æ¨¡å— require è°ƒç”¨çš„ä¸€éƒ¨åˆ†ã€‚</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>amd-dependency</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå¯é€‰çš„ <code>name</code> å±æ€§ï¼›å®ƒå…è®¸æˆ‘ä»¬ä¸º <code>amd-dependency</code> ä¼ å…¥ä¸€ä¸ªå¯é€‰åå­—ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/// &lt;amd-dependency path=&quot;legacy/moduleA&quot; name=&quot;moduleA&quot;/&gt;</span></span><br><span class=\"line\"><span class=\"keyword\">declare</span> <span class=\"keyword\">var</span> moduleA: MyType;</span><br><span class=\"line\">moduleA.callStuff();</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ç”Ÿæˆçš„ <code>JavaScript</code> ä»£ç ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">define([<span class=\"string\">&quot;require&quot;</span>, <span class=\"string\">&quot;exports&quot;</span>, <span class=\"string\">&quot;legacy/moduleA&quot;</span>], <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"><span class=\"built_in\">require</span>, <span class=\"built_in\">exports</span>, moduleA</span>) </span>&#123;</span><br><span class=\"line\">  moduleA.callStuff();</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"äºŒåå››ã€JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\"><a href=\"#äºŒåå››ã€JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"äºŒåå››ã€JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\"></a>äºŒåå››ã€JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥</h2><h3 id=\"24-1-JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\"><a href=\"#24-1-JavaScript-æ–‡ä»¶ç±»å‹æ£€æŸ¥\" class=\"headerlink\" title=\"24.1 JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥\"></a>24.1 JavaScript æ–‡ä»¶ç±»å‹æ£€æŸ¥</h3><blockquote>\n<p><code>TypeScript 2.3</code> ä»¥åçš„ç‰ˆæœ¬æ”¯æŒä½¿ç”¨ <code>--checkJs</code> å¯¹ <code>.js</code> æ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥å’Œé”™è¯¯æç¤ºã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä½ å¯ä»¥é€šè¿‡æ·»åŠ  <code>// @ts-nocheck</code> æ³¨é‡Šæ¥å¿½ç•¥ç±»å‹æ£€æŸ¥ï¼›ç›¸åï¼Œä½ å¯ä»¥é€šè¿‡å»æ‰ <code>--checkJs</code> è®¾ç½®å¹¶æ·»åŠ ä¸€ä¸ª <code>// @ts-nocheck</code> æ³¨é‡Šæ¥é€‰æ‹©æ£€æŸ¥æŸäº› <code>.js</code> æ–‡ä»¶ã€‚ä½ è¿˜å¯ä»¥ç”¨ <code>// @ts-ignore</code> æ¥å¿½ç•¥æœ¬è¡Œçš„é”™è¯¯ã€‚å¦‚æœä½ ä½¿ç”¨äº† <code>tsconfig.json</code>ï¼Œ<code>JS</code> æ£€æŸ¥å°†éµç…§ä¸€äº›ä¸¥æ ¼æ£€æŸ¥æ ‡è®°ï¼Œå¦‚ <code>noImplicitAny</code>ï¼Œ<code>strictNullChecks</code> ç­‰ã€‚ä½†å› ä¸º <code>JS</code> æ£€æŸ¥æ˜¯ç›¸å¯¹å®½æ¾çš„ï¼Œåœ¨ä½¿ç”¨ä¸¥æ ¼æ ‡è®°æ—¶å¯èƒ½ä¼šæœ‰äº›å‡ºä¹æ„æ–™çš„æƒ…å†µã€‚</p>\n</blockquote>\n<ul>\n<li>å¯¹æ¯” <code>.js</code>æ–‡ä»¶å’Œ <code>.ts</code> æ–‡ä»¶åœ¨ç±»å‹æ£€æŸ¥ä¸Šçš„å·®å¼‚ï¼Œæœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æ³¨æ„</li>\n</ul>\n<h4 id=\"1-ç”¨-JSDoc-ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\"><a href=\"#1-ç”¨-JSDoc-ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\" class=\"headerlink\" title=\"(1) ç”¨ JSDoc ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯\"></a>(1) ç”¨ <code>JSDoc</code> ç±»å‹è¡¨ç¤ºç±»å‹ä¿¡æ¯</h4><blockquote>\n<p><code>.js</code> æ–‡ä»¶é‡Œï¼Œç±»å‹å¯ä»¥å’Œåœ¨ <code>.ts</code> æ–‡ä»¶é‡Œä¸€æ ·è¢«æ¨æ–­å‡ºæ¥ã€‚åŒæ ·åœ°ï¼Œå½“ç±»å‹ä¸èƒ½è¢«æ¨æ–­æ—¶ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ <code>JSDoc</code> æ¥æŒ‡å®šï¼Œå°±å¥½æ¯”åœ¨ <code>.ts</code> æ–‡ä»¶é‡Œé‚£æ ·ã€‚å¦‚åŒ <code>TypeScript</code>ï¼Œ<code>--noImplicitAny</code> ä¼šåœ¨ç¼–è¯‘å™¨æ— æ³•æ¨æ–­ç±»å‹çš„ä½ç½®æŠ¥é”™ã€‚ï¼ˆé™¤äº†å¯¹è±¡å­—é¢é‡çš„æƒ…å†µï¼›åé¢ä¼šè¯¦ç»†ä»‹ç»ï¼‰<code>JSDoc</code> æ³¨è§£ä¿®é¥°çš„å£°æ˜ä¼šè¢«è®¾ç½®ä¸ºè¿™ä¸ªå£°æ˜çš„ç±»å‹ã€‚æ¯”å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x;</span><br><span class=\"line\">x = <span class=\"number\">0</span>; <span class=\"comment\">// OK</span></span><br><span class=\"line\">x = <span class=\"literal\">false</span>; <span class=\"comment\">// Error: boolean is not assignable to number</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ‰€æœ‰ <code>JSDoc</code> æ”¯æŒçš„æ¨¡å¼ï¼Œ<a href=\"https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript\">JSDoc æ–‡æ¡£</a>ã€‚</p>\n</blockquote>\n<h4 id=\"2-å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\"><a href=\"#2-å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\" class=\"headerlink\" title=\"(2) å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥\"></a>(2) å±æ€§çš„æ¨æ–­æ¥è‡ªäºç±»å†…çš„èµ‹å€¼è¯­å¥</h4><blockquote>\n<p><code>ES2015</code> æ²¡æä¾›å£°æ˜ç±»å±æ€§çš„æ–¹æ³•ã€‚å±æ€§æ˜¯åŠ¨æ€èµ‹å€¼çš„ï¼Œå°±åƒå¯¹è±¡å­—é¢é‡ä¸€æ ·ã€‚åœ¨ <code>.js</code> æ–‡ä»¶é‡Œï¼Œç¼–è¯‘å™¨ä»ç±»å†…éƒ¨çš„å±æ€§èµ‹å€¼è¯­å¥æ¥æ¨æ–­å±æ€§ç±»å‹ã€‚å±æ€§çš„ç±»å‹æ˜¯åœ¨æ„é€ å‡½æ•°é‡Œèµ‹çš„å€¼çš„ç±»å‹ï¼Œé™¤éå®ƒæ²¡åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰æˆ–è€…åœ¨æ„é€ å‡½æ•°é‡Œæ˜¯ <code>undefined</code> æˆ– <code>null</code>ã€‚è‹¥æ˜¯è¿™ç§æƒ…å†µï¼Œç±»å‹å°†ä¼šæ˜¯æ‰€æœ‰èµ‹å€¼çš„ç±»å‹çš„è”åˆç±»å‹ã€‚åœ¨æ„é€ å‡½æ•°é‡Œå®šä¹‰çš„å±æ€§ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ç›´å­˜åœ¨çš„ï¼Œç„¶è€Œé‚£äº›åœ¨æ–¹æ³•ï¼Œå­˜å–å™¨é‡Œå®šä¹‰çš„å±æ€§è¢«å½“æˆå¯é€‰çš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorOnly = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorOnly = <span class=\"literal\">false</span>; <span class=\"comment\">// error, constructorOnly is a number</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"string\">&quot;plunkbat&quot;</span>; <span class=\"comment\">// ok, constructorUnknown is string | undefined</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.methodOnly = <span class=\"string\">&quot;ok&quot;</span>; <span class=\"comment\">// ok, but y could also be undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">method2</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.methodOnly = <span class=\"literal\">true</span>; <span class=\"comment\">// also, ok, y&#x27;s type is string | boolean | undefined</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¦‚æœä¸€ä¸ªå±æ€§ä»æ²¡åœ¨ç±»å†…è®¾ç½®è¿‡ï¼Œå®ƒä»¬ä¼šè¢«å½“æˆæœªçŸ¥çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>å¦‚æœç±»çš„å±æ€§åªæ˜¯è¯»å–ç”¨çš„ï¼Œé‚£ä¹ˆå°±åœ¨æ„é€ å‡½æ•°é‡Œç”¨ <code>JSDoc</code> å£°æ˜å®ƒçš„ç±»å‹ã€‚å¦‚æœå®ƒç¨åä¼šè¢«åˆå§‹åŒ–ï¼Œä½ ç”šè‡³éƒ½ä¸éœ€è¦åœ¨æ„é€ å‡½æ•°é‡Œç»™å®ƒèµ‹å€¼ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">constructor</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;name | undefined&#125;</span> </span>*/</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.prop = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number | undefined&#125;</span> </span>*/</span></span><br><span class=\"line\">    <span class=\"built_in\">this</span>.count;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">let</span> c = <span class=\"keyword\">new</span> C();</span><br><span class=\"line\">c.prop = <span class=\"number\">0</span>; <span class=\"comment\">// Ok</span></span><br><span class=\"line\">c.count = <span class=\"string\">&quot;string&quot;</span>; <span class=\"comment\">// Error: string is not assignable to number | undefined</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-æ„é€ å‡½æ•°ç­‰åŒäºç±»\"><a href=\"#3-æ„é€ å‡½æ•°ç­‰åŒäºç±»\" class=\"headerlink\" title=\"(3) æ„é€ å‡½æ•°ç­‰åŒäºç±»\"></a>(3) æ„é€ å‡½æ•°ç­‰åŒäºç±»</h4><blockquote>\n<p><code>ES2015</code> ä»¥å‰ï¼Œ<code>Javascript</code> ä½¿ç”¨æ„é€ å‡½æ•°ä»£æ›¿ç±»ã€‚ç¼–è¯‘å™¨æ”¯æŒè¿™ç§æ¨¡å¼å¹¶èƒ½å¤Ÿå°†æ„é€ å‡½æ•°è¯†åˆ«ä¸º <code>ES2015</code> çš„ç±»ã€‚å±æ€§ç±»å‹æ¨æ–­æœºåˆ¶å’Œä¸Šé¢ä»‹ç»çš„ä¸€è‡´ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorOnly = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">C.prototype.method = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorOnly = <span class=\"literal\">false</span>; <span class=\"comment\">// error</span></span><br><span class=\"line\">  <span class=\"built_in\">this</span>.constructorUnknown = <span class=\"string\">&quot;plunkbat&quot;</span>; <span class=\"comment\">// OK, the type is string | undefined</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-æ”¯æŒ-CommonJS-æ¨¡å—\"><a href=\"#4-æ”¯æŒ-CommonJS-æ¨¡å—\" class=\"headerlink\" title=\"(4) æ”¯æŒ CommonJS æ¨¡å—\"></a>(4) æ”¯æŒ <code>CommonJS</code> æ¨¡å—</h4><blockquote>\n<p>åœ¨ <code>.js</code> æ–‡ä»¶é‡Œï¼Œ<code>TypeScript</code> èƒ½è¯†åˆ«å‡º <code>CommonJS</code> æ¨¡å—ã€‚å¯¹ <code>exports</code> å’Œ <code>module.exports</code> çš„èµ‹å€¼è¢«è¯†åˆ«ä¸ºå¯¼å‡ºå£°æ˜ã€‚ç›¸ä¼¼åœ°ï¼Œ<code>require</code> å‡½æ•°è°ƒç”¨è¢«è¯†åˆ«ä¸ºæ¨¡å—å¯¼å…¥ã€‚ä¾‹å¦‚ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// same as `import module &#x27;fs&#x27;`</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;fs&quot;</span>);</span><br><span class=\"line\"><span class=\"comment\">// same as `export function readFile`</span></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports.readFile = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">f</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> fs.readFileSync(f);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¹ <code>JavaScript</code> æ–‡ä»¶é‡Œæ¨¡å—è¯­æ³•çš„æ”¯æŒæ¯”åœ¨ <code>TypeScript</code> é‡Œå®½æ³›å¤šäº†ã€‚ å¤§éƒ¨åˆ†çš„èµ‹å€¼å’Œå£°æ˜æ–¹å¼éƒ½æ˜¯å…è®¸çš„ã€‚</p>\n</blockquote>\n<h4 id=\"5-ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\"><a href=\"#5-ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\" class=\"headerlink\" title=\"(5) ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´\"></a>(5) ç±»ï¼Œå‡½æ•°å’Œå¯¹è±¡å­—é¢é‡æ˜¯å‘½åç©ºé—´</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// .js æ–‡ä»¶é‡Œçš„ç±»æ˜¯å‘½åç©ºé—´ã€‚å®ƒå¯ä»¥ç”¨äºåµŒå¥—ç±»ï¼Œæ¯”å¦‚ï¼š</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">C</span> </span>&#123;&#125;</span><br><span class=\"line\">C.D = <span class=\"class\"><span class=\"keyword\">class</span> </span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// ES2015 ä¹‹å‰çš„ä»£ç ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿé™æ€æ–¹æ³•ã€‚</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Outer</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.y = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">Outer.Inner = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.yy = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">// å®ƒè¿˜å¯ä»¥ç”¨äºåˆ›å»ºç®€å•çš„å‘½åç©ºé—´ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ns = &#123;&#125;;</span><br><span class=\"line\">ns.C = <span class=\"class\"><span class=\"keyword\">class</span> </span>&#123;&#125;;</span><br><span class=\"line\">ns.func = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;&#125;;</span><br><span class=\"line\"><span class=\"comment\">// åŒæ—¶è¿˜æ”¯æŒå…¶å®ƒçš„å˜åŒ–</span></span><br><span class=\"line\"><span class=\"comment\">// ç«‹å³è°ƒç”¨çš„å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ns = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">n</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> n | &#123;&#125;;</span><br><span class=\"line\">&#125;)();</span><br><span class=\"line\">ns.COUNT = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// defaulting to global</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> assign =</span><br><span class=\"line\">  assign ||</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// code goes here</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">assign.extra = <span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6-å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\"><a href=\"#6-å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\" class=\"headerlink\" title=\"(6) å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„\"></a>(6) å¯¹è±¡å­—é¢é‡æ˜¯å¼€æ”¾çš„</h4><ul>\n<li><code>.ts</code> æ–‡ä»¶é‡Œï¼Œç”¨å¯¹è±¡å­—é¢é‡åˆå§‹åŒ–ä¸€ä¸ªå˜é‡çš„åŒæ—¶ä¹Ÿç»™å®ƒå£°æ˜äº†ç±»å‹ã€‚ æ–°çš„æˆå‘˜ä¸èƒ½å†è¢«æ·»åŠ åˆ°å¯¹è±¡å­—é¢é‡ä¸­ã€‚è¿™ä¸ªè§„åˆ™åœ¨ <code>.js</code> æ–‡ä»¶é‡Œè¢«æ”¾å®½äº†ï¼›å¯¹è±¡å­—é¢é‡å…·æœ‰å¼€æ”¾çš„ç±»å‹ï¼Œå…è®¸æ·»åŠ å¹¶è®¿é—®åŸå…ˆæ²¡æœ‰å®šä¹‰çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">obj.b = <span class=\"number\">2</span>; <span class=\"comment\">// Allowed</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯¹è±¡å­—é¢é‡çš„è¡¨ç°å°±å¥½æ¯”å…·æœ‰ä¸€ä¸ªé»˜è®¤çš„ç´¢å¼•ç­¾å <code>\\[x:string\\]: any</code>ï¼Œå®ƒä»¬å¯ä»¥è¢«å½“æˆå¼€æ”¾çš„æ˜ å°„è€Œä¸æ˜¯å°é—­çš„å¯¹è±¡ã€‚</li>\n<li>ä¸å…¶å®ƒ <code>JS</code> æ£€æŸ¥è¡Œä¸ºç›¸ä¼¼ï¼Œè¿™ç§è¡Œä¸ºå¯ä»¥é€šè¿‡æŒ‡å®š <code>JSDoc</code> ç±»å‹æ¥æ”¹å˜ï¼Œä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;&#123; a: number &#125;</span></span>&#125; */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> obj = &#123; <span class=\"attr\">a</span>: <span class=\"number\">1</span> &#125;;</span><br><span class=\"line\">obj.b = <span class=\"number\">2</span>; <span class=\"comment\">// Error, type &#123;a: number&#125; does not have property b</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-null-undefined-å’Œ-ç©ºæ•°ç»„çš„ç±»å‹æ˜¯-any-æˆ–-any\"><a href=\"#7-null-undefined-å’Œ-ç©ºæ•°ç»„çš„ç±»å‹æ˜¯-any-æˆ–-any\" class=\"headerlink\" title=\"(7) null undefined å’Œ ç©ºæ•°ç»„çš„ç±»å‹æ˜¯ any æˆ– any[]\"></a>(7) null undefined å’Œ ç©ºæ•°ç»„çš„ç±»å‹æ˜¯ any æˆ– any[]</h4><blockquote>\n<p>ä»»ä½•ç”¨ <code>null</code>ï¼Œ<code>undefined</code> åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ <code>any</code>ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ <code>null</code> æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ä»»ä½•ç”¨ <code>[]</code> åˆå§‹åŒ–çš„å˜é‡ï¼Œå‚æ•°æˆ–å±æ€§ï¼Œå®ƒä»¬çš„ç±»å‹æ˜¯ <code>any[]</code>ï¼Œå°±ç®—æ˜¯åœ¨ä¸¥æ ¼ <code>null</code> æ£€æŸ¥æ¨¡å¼ä¸‹ã€‚ å”¯ä¸€çš„ä¾‹å¤–æ˜¯åƒä¸Šé¢é‚£æ ·æœ‰å¤šä¸ªåˆå§‹åŒ–å™¨çš„å±æ€§ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Foo</span>(<span class=\"params\">i = <span class=\"literal\">null</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!i) i = <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> j = <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">  j = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.l = [];</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">var</span> foo = <span class=\"keyword\">new</span> Foo();</span><br><span class=\"line\">foo.l.push(foo.i);</span><br><span class=\"line\">foo.l.push(<span class=\"string\">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"8-å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\"><a href=\"#8-å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\" class=\"headerlink\" title=\"(8) å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„\"></a>(8) å‡½æ•°å‚æ•°æ˜¯é»˜è®¤å¯é€‰çš„</h4><blockquote>\n<p>ç”±äºåœ¨ <code>ES2015</code> ä¹‹å‰æ— æ³•æŒ‡å®šå¯é€‰å‚æ•°ï¼Œå› æ­¤ <code>.js</code> æ–‡ä»¶é‡Œæ‰€æœ‰å‡½æ•°å‚æ•°éƒ½è¢«å½“åšæ˜¯å¯é€‰çš„ã€‚ ä½¿ç”¨æ¯”é¢„æœŸå°‘çš„å‚æ•°è°ƒç”¨å‡½æ•°æ˜¯å…è®¸çš„ã€‚</p>\n</blockquote>\n<blockquote>\n<p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä½¿ç”¨è¿‡å¤šçš„å‚æ•°è°ƒç”¨å‡½æ•°ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">bar</span>(<span class=\"params\">a, b</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(a + <span class=\"string\">&quot; &quot;</span> + b);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">bar(<span class=\"number\">1</span>); <span class=\"comment\">// OK, second argument considered optional</span></span><br><span class=\"line\">bar(<span class=\"number\">1</span>, <span class=\"number\">2</span>);</span><br><span class=\"line\">bar(<span class=\"number\">1</span>, <span class=\"number\">2</span>, <span class=\"number\">3</span>); <span class=\"comment\">// Error, too many arguments</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä½¿ç”¨ <code>JSDoc</code> æ³¨è§£çš„å‡½æ•°ä¼šè¢«ä»è¿™æ¡è§„åˆ™é‡Œç§»é™¤ã€‚ä½¿ç”¨ <code>JSDoc</code> å¯é€‰å‚æ•°è¯­æ³•æ¥è¡¨ç¤ºå¯é€‰æ€§ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¯”å¦‚ï¼š</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>[somebody] - Somebody&#x27;s name.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sayHello</span>(<span class=\"params\">somebody</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!somebody) &#123;</span><br><span class=\"line\">    somebody = <span class=\"string\">&quot;John Doe&quot;</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">&quot;Hello &quot;</span> + somebody);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">sayHello();</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"9-ç”±-arguments-æ¨æ–­å‡ºçš„-var-args-å‚æ•°å£°æ˜\"><a href=\"#9-ç”±-arguments-æ¨æ–­å‡ºçš„-var-args-å‚æ•°å£°æ˜\" class=\"headerlink\" title=\"(9) ç”± arguments æ¨æ–­å‡ºçš„ var-args å‚æ•°å£°æ˜\"></a>(9) ç”± <code>arguments</code> æ¨æ–­å‡ºçš„ <code>var-args</code> å‚æ•°å£°æ˜</h4><blockquote>\n<p>å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ä½“å†…æœ‰å¯¹ <code>arguments</code> çš„å¼•ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¼šéšå¼åœ°è¢«è®¤ä¸ºå…·æœ‰ä¸€ä¸ª <code>var-arg</code> å‚æ•°ï¼ˆæ¯”å¦‚: <code>(...arg: any[]) =&gt;; any)</code>ï¼‰ã€‚ä½¿ç”¨ <code>JSDoc</code> çš„ <code>var-arg</code> è¯­æ³•æ¥æŒ‡å®š <code>arguments</code> çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@param <span class=\"type\">&#123;...number&#125;</span> </span>args */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">sum</span>(<span class=\"params\"><span class=\"comment\">/* numbers */</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> total = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"built_in\">arguments</span>.length; i++) &#123;</span><br><span class=\"line\">    total += <span class=\"built_in\">arguments</span>[i];</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> total;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"10-æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º-any\"><a href=\"#10-æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º-any\" class=\"headerlink\" title=\"(10) æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º any\"></a>(10) æœªæŒ‡å®šçš„ç±»å‹å‚æ•°é»˜è®¤ä¸º <code>any</code></h4><blockquote>\n<p>ç”±äº <code>JavaScript</code> é‡Œæ²¡æœ‰ä¸€ç§è‡ªç„¶çš„è¯­æ³•æ¥æŒ‡å®šæ³›å‹å‚æ•°ï¼Œå› æ­¤æœªæŒ‡å®šçš„å‚æ•°ç±»å‹é»˜è®¤ä¸º <code>any</code>ã€‚</p>\n</blockquote>\n<h4 id=\"11-åœ¨-extends-è¯­å¥ä¸­ï¼š\"><a href=\"#11-åœ¨-extends-è¯­å¥ä¸­ï¼š\" class=\"headerlink\" title=\"(11) åœ¨ extends è¯­å¥ä¸­ï¼š\"></a>(11) åœ¨ <code>extends</code> è¯­å¥ä¸­ï¼š</h4><blockquote>\n<p>ä¾‹å¦‚ï¼Œ<code>React.Component</code> è¢«å®šä¹‰æˆå…·æœ‰ä¸¤ä¸ªç±»å‹å‚æ•°ï¼Œ<code>Props</code> å’Œ <code>State</code>ã€‚ åœ¨ä¸€ä¸ª <code>.js</code> æ–‡ä»¶é‡Œï¼Œæ²¡æœ‰ä¸€ä¸ªåˆæ³•çš„æ–¹å¼åœ¨ <code>extends</code> è¯­å¥é‡ŒæŒ‡å®šå®ƒä»¬ã€‚é»˜è®¤åœ°å‚æ•°ç±»å‹ä¸º <code>any</code>ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.props.b; <span class=\"comment\">// Allowed, since this.props is of type any</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä½¿ç”¨ <code>JSDoc</code> çš„ <code>@augments</code> æ¥æ˜ç¡®åœ°æŒ‡å®šç±»å‹ã€‚</p>\n</blockquote>\n<ul>\n<li>ä¾‹å¦‚ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; Component &#125; <span class=\"keyword\">from</span> <span class=\"string\">&quot;react&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@augments <span class=\"type\">&#123;Component&lt;&#123;a: number&#125;</span></span>, State&gt;&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyComponent</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"title\">render</span>(<span class=\"params\"></span>)</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">this</span>.props.b; <span class=\"comment\">// Error: b does not exist on &#123;a:number&#125;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"12-åœ¨-JSDoc-å¼•ç”¨ä¸­\"><a href=\"#12-åœ¨-JSDoc-å¼•ç”¨ä¸­\" class=\"headerlink\" title=\"(12) åœ¨ JSDoc å¼•ç”¨ä¸­\"></a>(12) åœ¨ JSDoc å¼•ç”¨ä¸­</h4><figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type<span class=\"type\">&#123;Array&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x = [];</span><br><span class=\"line\"></span><br><span class=\"line\">x.push(<span class=\"number\">1</span>); <span class=\"comment\">// OK</span></span><br><span class=\"line\">x.push(<span class=\"string\">&quot;string&quot;</span>); <span class=\"comment\">// OK, x is of type Array&lt;any&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type<span class=\"type\">&#123;Array.&lt;number&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> y = [];</span><br><span class=\"line\"></span><br><span class=\"line\">y.push(<span class=\"number\">1</span>); <span class=\"comment\">// OK</span></span><br><span class=\"line\">y.push(<span class=\"string\">&quot;string&quot;</span>); <span class=\"comment\">// Error, string is not assignable to number</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"13-åœ¨å‡½æ•°è°ƒç”¨ä¸­\"><a href=\"#13-åœ¨å‡½æ•°è°ƒç”¨ä¸­\" class=\"headerlink\" title=\"(13) åœ¨å‡½æ•°è°ƒç”¨ä¸­\"></a>(13) åœ¨å‡½æ•°è°ƒç”¨ä¸­</h4><blockquote>\n<p>æ³›å‹å‡½æ•°çš„è°ƒç”¨ä½¿ç”¨ <code>arguments</code> æ¥æ¨æ–­æ³›å‹å‚æ•°ã€‚æœ‰æ—¶å€™ï¼Œè¿™ä¸ªæµç¨‹ä¸èƒ½å¤Ÿæ¨æ–­å‡ºç±»å‹ï¼Œå¤§å¤šæ˜¯å› ä¸ºç¼ºå°‘æ¨æ–­çš„æºï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç±»å‹å‚æ•°ç±»å‹é»˜è®¤ä¸º <code>any</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä¾‹å¦‚ï¼š</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  reject();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">p; <span class=\"comment\">// Promise&lt;any&gt;;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"24-2-æ”¯æŒçš„-JSDoc\"><a href=\"#24-2-æ”¯æŒçš„-JSDoc\" class=\"headerlink\" title=\"24.2 æ”¯æŒçš„ JSDoc\"></a>24.2 æ”¯æŒçš„ JSDoc</h3><blockquote>\n<p>é¢çš„åˆ—è¡¨åˆ—å‡ºäº†å½“å‰æ‰€æ”¯æŒçš„ <code>JSDoc</code> æ³¨è§£ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬åœ¨ <code>JavaScript</code> æ–‡ä»¶é‡Œæ·»åŠ ç±»å‹ä¿¡æ¯ã€‚ æ³¨æ„ï¼Œæ²¡æœ‰åœ¨ä¸‹é¢åˆ—å‡ºçš„æ ‡è®°ï¼ˆä¾‹å¦‚ <code>@async</code>ï¼‰éƒ½æ˜¯è¿˜ä¸æ”¯æŒçš„ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"number\">1.</span>  <span class=\"meta\">@type</span></span><br><span class=\"line\"><span class=\"number\">2.</span>  <span class=\"meta\">@param</span> (or <span class=\"meta\">@arg</span> or <span class=\"meta\">@argument</span>)</span><br><span class=\"line\"><span class=\"number\">3.</span>  <span class=\"meta\">@returns</span> (or <span class=\"meta\">@return</span>)</span><br><span class=\"line\"><span class=\"number\">4.</span>  <span class=\"meta\">@typedef</span></span><br><span class=\"line\"><span class=\"number\">5.</span>  <span class=\"meta\">@callback</span></span><br><span class=\"line\"><span class=\"number\">6.</span>  <span class=\"meta\">@template</span></span><br><span class=\"line\"><span class=\"number\">7.</span>  <span class=\"meta\">@class</span> (or <span class=\"meta\">@constructor</span>)</span><br><span class=\"line\"><span class=\"number\">8.</span>  <span class=\"meta\">@this</span></span><br><span class=\"line\"><span class=\"number\">9.</span>  <span class=\"meta\">@extends</span> (or <span class=\"meta\">@augments</span>)</span><br><span class=\"line\"><span class=\"number\">10.</span> <span class=\"meta\">@enum</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å®ƒä»¬ä»£è¡¨çš„æ„ä¹‰ä¸ <code>usejsdoc.org</code> ä¸Šé¢ç»™å‡ºçš„é€šå¸¸æ˜¯ä¸€è‡´çš„æˆ–è€…æ˜¯å®ƒçš„è¶…é›†ã€‚ ä¸‹é¢çš„ä»£ç æè¿°äº†å®ƒä»¬çš„åŒºåˆ«å¹¶ç»™å‡ºäº†ä¸€äº›ç¤ºä¾‹ã€‚</p>\n</blockquote>\n<h4 id=\"1-type\"><a href=\"#1-type\" class=\"headerlink\" title=\"(1) @type \"></a>(1) <a href=\"/type\">@type </a></h4><blockquote>\n<p>å¯ä»¥ä½¿ç”¨ <code>@type</code> æ ‡è®°å¹¶å¼•ç”¨ä¸€ä¸ªç±»å‹åç§°ï¼ˆåŸå§‹ç±»å‹ï¼Œ<code>TypeScript</code> é‡Œå£°æ˜çš„ç±»å‹ï¼Œæˆ–åœ¨ <code>JSDoc</code> é‡Œ <code>@typedef</code> æ ‡è®°æŒ‡å®šçš„ï¼‰å¯ä»¥ä½¿ç”¨ä»»ä½• <code>TypeScript</code> ç±»å‹å’Œå¤§å¤šæ•° <code>JSDoc</code> ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;string&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> s;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Window&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> win;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;PromiseLike&lt;string&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> promisedString;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// You can specify an HTML Element with DOM properties</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;HTMLElement&#125;</span> </span>*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> myElement = <span class=\"built_in\">document</span>.querySelector(selector);</span><br><span class=\"line\">element.dataset.myData = <span class=\"string\">&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>@type</code> å¯ä»¥æŒ‡å®šè”åˆç±»å‹â€”ä¾‹å¦‚ï¼Œ<code>string</code> å’Œ <code>boolean</code> ç±»å‹çš„è”åˆã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;&#123;string | boolean&#125;</span></span>&#125; */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sb;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æ³¨æ„ï¼šæ‹¬å·æ˜¯å¯é€‰çš„</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;string | boolean&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sb;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æœ‰å¤šç§æ–¹å¼æ¥æŒ‡å®šæ•°ç»„ç±»å‹</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number[]&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> ns;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Array.&lt;number&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nds;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Array&lt;number&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nas;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿˜å¯ä»¥æŒ‡å®šå¯¹è±¡å­—é¢é‡ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰ <code>a(å­—ç¬¦ä¸²)</code> å’Œ <code>b(æ•°å­—)</code> å±æ€§çš„å¯¹è±¡ï¼Œä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;&#123;a: string, b: number&#125;</span></span>&#125; */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> var9;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²å’Œæ•°å­—ç´¢å¼•ç­¾åæ¥æŒ‡å®š <code>map-like</code> å’Œ <code>array-like</code> çš„å¯¹è±¡ï¼Œä½¿ç”¨æ ‡å‡†çš„ <code>JSDoc</code> è¯­æ³•æˆ–è€… <code>TypeScript</code> è¯­æ³•ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A map-like object that maps arbitrary `string` properties to `number`s.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;Object.&lt;string, number&gt;&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> stringToNumber;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Object.&lt;number, object&gt;&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> arrayLike;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>è¿™ä¸¤ä¸ªç±»å‹ä¸ <code>TypeScript</code> é‡Œçš„ <code>&#123; [x: string]: number &#125;</code> å’Œ <code>&#123; [x: number]: any &#125;</code> æ˜¯ç­‰åŒçš„ã€‚ ç¼–è¯‘å™¨èƒ½è¯†åˆ«å‡ºè¿™ä¸¤ç§è¯­æ³•ã€‚</li>\n<li>å¯ä»¥ä½¿ç”¨ <code>TypeScript</code> æˆ– <code>Closure</code> è¯­æ³•æŒ‡å®šå‡½æ•°ç±»å‹ã€‚</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;function(string, boolean): number&#125;</span> </span>Closure syntax */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sbn;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;(s: string, b: boolean) =&gt; number&#125;</span> </span>Typescript syntax */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> sbn2;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>æˆ–è€…ç›´æ¥ä½¿ç”¨æœªæŒ‡å®šçš„ <code>Function</code> ç±»å‹ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Function&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn7;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;function&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> fn6;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><code>Closure</code> çš„å…¶å®ƒç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š</li>\n</ul>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;*&#125;</span> </span>- can be &#x27;any&#x27; type */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> star;</span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;?&#125;</span> </span>- unknown type (same as &#x27;any&#x27;) */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> question;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-è½¬æ¢\"><a href=\"#2-è½¬æ¢\" class=\"headerlink\" title=\"(2) è½¬æ¢\"></a>(2) è½¬æ¢</h4><blockquote>\n<p><code>TypeScript</code> å€Ÿé‰´äº† <code>Closure</code> é‡Œçš„è½¬æ¢è¯­æ³•ã€‚åœ¨æ‹¬å·è¡¨è¾¾å¼å‰é¢ä½¿ç”¨ <code>@type</code> æ ‡è®°ï¼Œå¯ä»¥å°†ä¸€ç§ç±»å‹è½¬æ¢æˆå¦ä¸€ç§ç±»å‹</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;number | string&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> numberOrString = <span class=\"built_in\">Math</span>.random() &lt; <span class=\"number\">0.5</span> ? <span class=\"string\">&quot;hello&quot;</span> : <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> typeAssertedNumber = <span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;number&#125;</span> </span>*/</span> numberOrString;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-å¯¼å…¥ç±»å‹\"><a href=\"#3-å¯¼å…¥ç±»å‹\" class=\"headerlink\" title=\"(3) å¯¼å…¥ç±»å‹\"></a>(3) å¯¼å…¥ç±»å‹</h4><blockquote>\n<p>å¯ä»¥ä½¿ç”¨å¯¼å…¥ç±»å‹ä»å…¶å®ƒæ–‡ä»¶ä¸­å¯¼å…¥å£°æ˜ã€‚ è¿™ä¸ªè¯­æ³•æ˜¯ <code>TypeScript</code> ç‰¹æœ‰çš„ï¼Œä¸ <code>JSDoc</code> æ ‡å‡†ä¸åŒï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param </span>p &#123; import(&quot;./a&quot;).Pet &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">walk</span>(<span class=\"params\">p</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">`Walking <span class=\"subst\">$&#123;p.name&#125;</span>...`</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å…¥ç±»å‹ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨ç±»å‹åˆ«åå£°æ˜ä¸­ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@typedef </span>Pet &#123; import(&quot;./a&quot;).Pet &#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;Pet&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> myPet;</span><br><span class=\"line\">myPet.name;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¼å…¥ç±»å‹å¯ä»¥ç”¨åœ¨ä»æ¨¡å—ä¸­å¾—åˆ°ä¸€ä¸ªå€¼çš„ç±»å‹ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;typeof import(&quot;./a&quot;).x &#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"built_in\">require</span>(<span class=\"string\">&quot;./a&quot;</span>).x;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-param-å’Œ-returns\"><a href=\"#4-param-å’Œ-returns\" class=\"headerlink\" title=\"(4) @param  å’Œ @returns \"></a>(4) <a href=\"/param\">@param </a> å’Œ <a href=\"/returns\">@returns </a></h4><blockquote>\n<p><code>@param</code> è¯­æ³• å’Œ <code>@type</code> ç›¸åŒï¼Œä½†å¢åŠ äº†ä¸€ä¸ªå‚æ•°åã€‚ ä½¿ç”¨ <code>[]</code> å¯ä»¥æŠŠå‚æ•°å£°æ˜ä¸ºå¯é€‰çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Parameters may be declared in a variety of syntactic forms</span></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span>  <span class=\"variable\">p1</span></span> - A string param.</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string=&#125;</span> <span class=\"variable\">p2</span></span> - An optional param (Closure syntax)</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>[p3] - Another optional param (JSDoc syntax).</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>[p4=&quot;test&quot;] - An optional param with a default value</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;string&#125;</span> </span>This is the result</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">stringsStringStrings</span>(<span class=\"params\">p1, p2, p3, p4</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// TODO</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å‡½æ•°çš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;PromiseLike&lt;string&gt;&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ps</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@returns <span class=\"type\">&#123;&#123; a: string, b: number &#125;</span></span>&#125; - May use &#x27;<span class=\"doctag\">@returns</span>&#x27; as well as &#x27;<span class=\"doctag\">@return</span>&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">ab</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"5-typedef-callback-å’Œ-param\"><a href=\"#5-typedef-callback-å’Œ-param\" class=\"headerlink\" title=\"(5) @typedef, @callback, å’Œ @param \"></a>(5) @typedef, @callback, å’Œ <a href=\"/param\">@param </a></h4><blockquote>\n<p><code>@typedef</code> å¯ä»¥ç”¨æ¥å£°æ˜å¤æ‚ç±»å‹ã€‚å’Œ <code>@param</code> ç±»ä¼¼çš„è¯­æ³•ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@typedef <span class=\"type\">&#123;Object&#125;</span> <span class=\"variable\">SpecialType</span></span> - creates a new type named &#x27;SpecialType&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">prop1</span></span> - a string property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number&#125;</span> <span class=\"variable\">prop2</span></span> - a number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number=&#125;</span> <span class=\"variable\">prop3</span></span> - an optional number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@prop <span class=\"type\">&#123;number&#125;</span> </span>[prop4] - an optional number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@prop <span class=\"type\">&#123;number&#125;</span> </span>[prop5=42] - an optional number property of SpecialType with default</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;SpecialType&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> specialTypeObject;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯ä»¥åœ¨ç¬¬ä¸€è¡Œä¸Šä½¿ç”¨ <code>object</code> æˆ– <code>Object</code>ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@typedef <span class=\"type\">&#123;object&#125;</span> <span class=\"variable\">SpecialType1</span></span> - creates a new type named &#x27;SpecialType&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">prop1</span></span> - a string property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number&#125;</span> <span class=\"variable\">prop2</span></span> - a number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@property <span class=\"type\">&#123;number=&#125;</span> <span class=\"variable\">prop3</span></span> - an optional number property of SpecialType</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;SpecialType1&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> specialTypeObject1;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>@param</code> å…è®¸ä½¿ç”¨ç›¸ä¼¼çš„è¯­æ³•ã€‚ æ³¨æ„ï¼ŒåµŒå¥—çš„å±æ€§åå¿…é¡»ä½¿ç”¨å‚æ•°ååšä¸ºå‰ç¼€ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;Object&#125;</span> <span class=\"variable\">options</span></span> - The shape is the same as SpecialType above</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> </span>options.prop1</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>options.prop2</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number=&#125;</span> </span>options.prop3</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>[options.prop4]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>[options.prop5=42]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">special</span>(<span class=\"params\">options</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (options.prop4 || <span class=\"number\">1001</span>) + options.prop5;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>@callback</code> ä¸ <code>@typedef</code> ç›¸ä¼¼ï¼Œä½†å®ƒæŒ‡å®šå‡½æ•°ç±»å‹è€Œä¸æ˜¯å¯¹è±¡ç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@callback <span class=\"variable\">Predicate</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">data</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> </span>[index]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@returns <span class=\"type\">&#123;boolean&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@type <span class=\"type\">&#123;Predicate&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> ok = <span class=\"function\"><span class=\"params\">s</span> =&gt;</span> !(s.length % <span class=\"number\">2</span>);</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å½“ç„¶ï¼Œæ‰€æœ‰è¿™äº›ç±»å‹éƒ½å¯ä»¥ä½¿ç”¨ <code>TypeScript</code> çš„è¯­æ³• <code>@typedef</code> åœ¨ä¸€è¡Œä¸Šå£°æ˜ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@typedef <span class=\"type\">&#123;&#123; prop1: string, prop2: string, prop3?: number &#125;</span></span>&#125; SpecialType */</span></span><br><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@typedef <span class=\"type\">&#123;(data: string, index?: number) =&gt; boolean&#125;</span> </span>Predicate */</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6-template\"><a href=\"#6-template\" class=\"headerlink\" title=\"(6) @template \"></a>(6) <a href=\"/template\">@template </a></h4><blockquote>\n<p>ä½¿ç”¨ <code>@template</code> å£°æ˜æ³›å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"variable\">T</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;T&#125;</span> <span class=\"variable\">p1</span></span> - A generic parameter that flows through to the return type</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;T&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">id</span>(<span class=\"params\">x</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> x;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ç”¨é€—å·æˆ–å¤šä¸ªæ ‡è®°æ¥å£°æ˜å¤šä¸ªç±»å‹å‚æ•°ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template </span>T,U,V</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template </span>W,X</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>è¿˜å¯ä»¥åœ¨å‚æ•°åå‰æŒ‡å®šç±»å‹çº¦æŸã€‚åªæœ‰åˆ—è¡¨çš„ç¬¬ä¸€é¡¹ç±»å‹å‚æ•°ä¼šè¢«çº¦æŸ:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">K</span></span> - K must be a string or string literal</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"type\">&#123;&#123; serious(): string &#125;</span></span>&#125; Seriousalizable - must have a serious method</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;K&#125;</span> <span class=\"variable\">key</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;Seriousalizable&#125;</span> <span class=\"variable\">object</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">seriousalize</span>(<span class=\"params\">key, <span class=\"built_in\">object</span></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ????</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"7-constructor\"><a href=\"#7-constructor\" class=\"headerlink\" title=\"(7) @constructor \"></a>(7) <a href=\"/constructor\">@constructor </a></h4><blockquote>\n<p>ç¼–è¯‘å™¨é€šè¿‡ <code>this</code> å±æ€§çš„èµ‹å€¼æ¥æ¨æ–­æ„é€ å‡½æ•°, ä½†ä½ å¯ä»¥è®©æ£€æŸ¥æ›´ä¸¥æ ¼æç¤ºæ›´å‹å¥½, ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>@constructor</code> æ ‡è®°:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@constructor</span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;number&#125;</span> <span class=\"variable\">data</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">C</span>(<span class=\"params\">data</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.size = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.initialize(data); <span class=\"comment\">// Should error, initializer expects a string</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;string&#125;</span> <span class=\"variable\">s</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">C.prototype.initialize = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">s</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.size = s.length;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> c = <span class=\"keyword\">new</span> C(<span class=\"number\">0</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> result = C(<span class=\"number\">1</span>); <span class=\"comment\">// C should only be called with new</span></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>é€šè¿‡ <code>@constructor</code>, <code>this</code> å°†åœ¨æ„é€ å‡½æ•°<code>C</code>é‡Œè¢«æ£€æŸ¥ï¼Œå› æ­¤ä½ åœ¨ <code>initialize</code> æ–¹æ³•é‡Œå¾—åˆ°ä¸€ä¸ªæç¤ºï¼Œå¦‚æœä½ ä¼ å…¥ä¸€ä¸ªæ•°å­—ä½ è¿˜å°†å¾—åˆ°ä¸€ä¸ªé”™è¯¯æç¤ºã€‚å¦‚æœä½ ç›´æ¥è°ƒç”¨<code>C</code>è€Œä¸æ˜¯æ„é€ å®ƒï¼Œä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ„å‘³ç€é‚£äº›æ—¢èƒ½æ„é€ ä¹Ÿèƒ½ç›´æ¥è°ƒç”¨çš„æ„é€ å‡½æ•°ä¸èƒ½ä½¿ç”¨ <code>@constructor</code>ã€‚</p>\n</blockquote>\n<h4 id=\"8-this\"><a href=\"#8-this\" class=\"headerlink\" title=\"(8) @this \"></a>(8) <a href=\"/this\">@this </a></h4><blockquote>\n<p>ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡æ¥æ¨æ–­å‡º <code>this</code> çš„ç±»å‹ã€‚ä½†ä½ å¯ä»¥ä½¿ç”¨ <code>@this</code> æ¥æ˜ç¡®æŒ‡å®šå®ƒçš„ç±»å‹ï¼š</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@this <span class=\"type\">&#123;HTMLElement&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;*&#125;</span> <span class=\"variable\">e</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">callbackForLater</span>(<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">this</span>.clientHeight = <span class=\"built_in\">parseInt</span>(e); <span class=\"comment\">// should be fine!</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"9-extends\"><a href=\"#9-extends\" class=\"headerlink\" title=\"(9) @extends \"></a>(9) <a href=\"/extends\">@extends </a></h4><blockquote>\n<p>å½“ <code>JavaScript</code> ç±»ç»§æ‰¿äº†ä¸€ä¸ªåŸºç±», æ— å¤„æŒ‡å®šç±»å‹å‚æ•°çš„ç±»å‹, è€Œ <code>@extends</code> æ ‡è®°æä¾›äº†è¿™æ ·ä¸€ç§æ–¹å¼:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@template <span class=\"variable\">T</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@extends <span class=\"type\">&#123;Set&lt;T&gt;&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SortableSet</span> <span class=\"keyword\">extends</span> <span class=\"title\">Set</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>@extends</code> åªä½œç”¨äºç±»ã€‚å½“å‰ï¼Œæ— æ³•å®ç°æ„é€ å‡½æ•°ç»§æ‰¿ç±»çš„æƒ…å†µã€‚</p>\n</blockquote>\n<h4 id=\"10-enum\"><a href=\"#10-enum\" class=\"headerlink\" title=\"(10) @enum \"></a>(10) <a href=\"/enum\">@enum </a></h4><blockquote>\n<p><code>@enum</code> æ ‡è®°å…è®¸ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡å­—é¢é‡, å®ƒçš„æˆå‘˜éƒ½æœ‰ç¡®å®šçš„ç±»å‹ã€‚ä¸åŒäº <code>JavaScript</code> é‡Œå¤§å¤šæ•°çš„å¯¹è±¡å­—é¢é‡ï¼Œå®ƒä¸å…è®¸æ·»åŠ é¢å¤–æˆå‘˜ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@enum <span class=\"type\">&#123;number&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> JSDocState = &#123;</span><br><span class=\"line\">  BeginningOfLine: <span class=\"number\">0</span>,</span><br><span class=\"line\">  SawAsterisk: <span class=\"number\">1</span>,</span><br><span class=\"line\">  SavingComments: <span class=\"number\">2</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>æ³¨æ„ <code>@enum</code> ä¸ <code>TypeScript</code> çš„ <code>@enum</code> å¤§ä¸ç›¸åŒ, å®ƒæ›´åŠ ç®€å•ã€‚ç„¶è€Œï¼Œä¸åŒäº <code>TypeScript</code> çš„æšä¸¾, <code>@enum</code> å¯ä»¥æ˜¯ä»»ä½•ç±»å‹:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** <span class=\"doctag\">@enum <span class=\"type\">&#123;function(number): number&#125;</span> </span>*/</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> <span class=\"built_in\">Math</span> = &#123;</span><br><span class=\"line\">  add1: <span class=\"function\"><span class=\"params\">n</span> =&gt;</span> n + <span class=\"number\">1</span>,</span><br><span class=\"line\">  id: <span class=\"function\"><span class=\"params\">n</span> =&gt;</span> -n,</span><br><span class=\"line\">  sub1: <span class=\"function\"><span class=\"params\">n</span> =&gt;</span> n - <span class=\"number\">1</span></span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"11-æ›´å¤šç¤ºä¾‹\"><a href=\"#11-æ›´å¤šç¤ºä¾‹\" class=\"headerlink\" title=\"(11) æ›´å¤šç¤ºä¾‹\"></a>(11) æ›´å¤šç¤ºä¾‹</h4><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">var someObj &#x3D; &#123;</span><br><span class=\"line\">  &#x2F;**</span><br><span class=\"line\">   * @param &#123;string&#125; param1 - Docs on property assignments work</span><br><span class=\"line\">   *&#x2F;</span><br><span class=\"line\">  x: function (param1) &#123;&#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * As do docs on variable assignments</span><br><span class=\"line\"> * @return &#123;Window&#125;</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">let someFunc &#x3D; function () &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * And class methods</span><br><span class=\"line\"> * @param &#123;string&#125; greeting The greeting to use</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">Foo.prototype.sayHi &#x3D; greeting &#x3D;&gt; console.log(&quot;Hi!&quot;);</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * And arrow functions expressions</span><br><span class=\"line\"> * @param &#123;number&#125; x - A multiplier</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">let myArrow &#x3D; x &#x3D;&gt; x * x;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * Which means it works for stateless function components in JSX too</span><br><span class=\"line\"> * @param &#123;&#123;a: string, b: number&#125;&#125; test - Some param</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">var sfc &#x3D; test &#x3D;&gt; &lt;div&gt;&#123;test.a.charAt(0)&#125;&lt;&#x2F;div&gt;;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * A parameter can be a class constructor, using Closure syntax.</span><br><span class=\"line\"> *</span><br><span class=\"line\"> * @param &#123;&#123;new(...args: any[]): object&#125;&#125; C - The class to register</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function registerClass(C) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;...string&#125; p1 - A &#39;rest&#39; arg (array) of strings. (treated as &#39;any&#39;)</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function fn10(p1) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;**</span><br><span class=\"line\"> * @param &#123;...string&#125; p1 - A &#39;rest&#39; arg (array) of strings. (treated as &#39;any&#39;)</span><br><span class=\"line\"> *&#x2F;</span><br><span class=\"line\">function fn9(p1) &#123;</span><br><span class=\"line\">  return p1.join();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"12-å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\"><a href=\"#12-å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\" class=\"headerlink\" title=\"(12) å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼\"></a>(12) å·²çŸ¥ä¸æ”¯æŒçš„æ¨¡å¼</h4><blockquote>\n<p>åœ¨å€¼ç©ºé—´ä¸­å°†å¯¹è±¡è§†ä¸ºç±»å‹æ˜¯ä¸å¯ä»¥çš„, é™¤éå¯¹è±¡åˆ›å»ºäº†ç±»å‹, å¦‚æ„é€ å‡½æ•°ã€‚</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">aNormalFunction</span>(<span class=\"params\"></span>) </span>&#123;&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;aNormalFunction&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> wrong;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Use &#x27;typeof&#x27; instead:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;typeof aNormalFunction&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> right;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>å¯¹è±¡å­—é¢é‡å±æ€§ä¸Šçš„ <code>=</code> åç¼€ä¸èƒ½æŒ‡å®šè¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;&#123; a: string, b: number= &#125;</span></span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> wrong;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Use postfix question on the property name instead:</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;&#123; a: string, b?: number &#125;</span></span>&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> right;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Nullable</code> ç±»å‹åªåœ¨å¯ç”¨äº† <code>strictNullChecks</code> æ£€æŸ¥æ—¶æ‰å¯ä½œç”¨:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;?number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * With strictNullChecks: true -- number | null</span></span><br><span class=\"line\"><span class=\"comment\"> * With strictNullChecks: off  -- number</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> nullable;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><code>Non-nullable</code> ç±»å‹æ²¡æœ‰æ„ä¹‰, ä»¥å…¶åŸç±»å‹å¯¹å¾…:</p>\n</blockquote>\n<figure class=\"highlight typescript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@type <span class=\"type\">&#123;!number&#125;</span></span></span></span><br><span class=\"line\"><span class=\"comment\"> * Just has type number</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> normal;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>ä¸åŒäº <code>JSDoc</code> ç±»å‹ç³»ç»Ÿ, <code>TypeScript</code> åªå…è®¸å°†ç±»å‹æ ‡è®°ä¸ºåŒ…ä¸åŒ…å« <code>null</code>ã€‚<code>Non-nullable</code> â€“ å¦‚æœå¯ç”¨äº† <code>strictNullChecks</code>ï¼Œé‚£ä¹ˆ <code>number</code> æ˜¯ <code>énull</code> çš„ã€‚ å¦‚æœæ²¡æœ‰å¯ç”¨ï¼Œé‚£ä¹ˆ <code>number</code> æ˜¯å¯ä»¥ä¸º <code>null</code> çš„ã€‚</p>\n</blockquote>\n"},{"title":"H5 ç›¸å…³é—®é¢˜æ”¶é›†","date":"2020-07-18T16:00:00.000Z","_content":"\n## 1. html\n\n### è®¾ç½®ç¦æ­¢ç¼©æ”¾\n\n```html\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\" />\n```\n\n## 2. css\n\n### 2.1 ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\n\n> è®¾ç½®å±æ€§ `touch-action:none;` ä¼šå¯¼è‡´å®‰å“ç³»ç»Ÿæ— æ³•è¿›è¡Œæ»‘åŠ¨ã€‚`ios` ç³»ç»Ÿä¸å—å½±å“ï¼Œå› ä¸º `ios` é»˜è®¤æ”¯æŒ `touch` äº‹ä»¶ã€‚\n\n```css\n/* ç¦æ­¢è§¦å‘é»˜è®¤çš„æ‰‹åŠ¿æ“ä½œ */\ntouch-action: none;\n```\n\n### 2.2 è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\n\n> è®¾ç½® `border` çš„å®½é«˜æˆ–è€…é€šè¿‡ `div` è®¾ç½®å®½é«˜çš„çš„æ—¶å€™ï¼Œå¯¹äºè§†ç½‘è†œå±å¹• `(Retina)`ï¼Œ`1px` ä¼šæ˜¾ç¤ºæˆ `2px`ï¼›\n> å¦‚æœç”¨ç›¸å¯¹åº”çš„ `rem` å¤„ç†ï¼Œéƒ¨åˆ†æ‰‹æœºä¼šæ— æ³•æ˜¾ç¤ºã€‚\n> åœ¨ `ios8` ä¸­ï¼Œå·²ç»æ”¯æŒ `0.5px`ï¼Œåœ¨ `ios7` ä»¥ä¸‹ï¼Œ`android` ç­‰å…¶ä»–ç³»ç»Ÿé‡Œï¼Œ`0.5px` ä¼šè¢«æ˜¾ç¤ºä¸º `0px`ï¼Œæ‰€ä»¥éœ€è¦å†™ `hack` æ¥å…¼å®¹æ—§ç‰ˆæœ¬çš„ç³»ç»Ÿã€‚é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼\n\n#### 2.2.1 åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\n\n```css\ndiv {\n  border: 1px solid #000;\n}\n\n@media (-webkit-min-device-pixel-ratio: 2) {\n  div {\n    border: 0.5px solid #000;\n  }\n}\n```\n\n#### 2.2.2 åœ¨ html çš„ meta æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\n\n```html\n<meta name=\"viewport\" content=\"initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no\" />\n```\n\n#### 2.2.3 è®¾ç½®å±æ€§ `transform: scale(0.5)ï¼›`\n\n- ç¼ºç‚¹\n\n> åœ†è§’æ— æ³•å®ç°ï¼Œå®ç° `4` æ¡è¾¹æ¡†æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”åªèƒ½å•ç‹¬å®ç°ï¼Œå¦‚æœåµŒå¥—ï¼Œä¼šå¯¹åŒ…å«çš„æ•ˆæœäº§ç”Ÿä¸æƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆé…åˆ `:after` å’Œ `before` ç‹¬ç«‹ä½¿ç”¨è¾ƒå¤šã€‚æ¯”å¦‚ç”»ä¸€ä¸ªå•†å“çš„è¾¹æ¡†å››æ¡çº¿ï¼Œå®¹å™¨çš„ `after` å’Œ `before` å¯ä»¥ç”» `2` æ¡çº¿ï¼Œåˆ©ç”¨å®¹å™¨çš„çˆ¶å…ƒç´ çš„ `after`ã€`before` å†ç”» `2` æ¡çº¿ã€‚\n\n```css\ndiv {\n  height: 1px;\n  -webkit-transform: scaleY(0.5);\n  -webkit-transform-origin: 0 0;\n  overflow: hidden;\n  background: #000;\n}\n```\n\n```css\ndiv {\n  Â Â Â Â position: relative;\n}\n\ndiv:after {\n  content: \"\";\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  border-bottom: 1px solid #000;\n  -webkit-transform: scaleY(0.5);\n  -webkit-transform-origin: 0 0;\n}\n```\n\n### 2.3 å®ç° 0.5px æ•ˆæœ\n\n```css\nxx {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.5);\n}\n```\n\n- ä¼˜ç‚¹\n\n> åŸºæœ¬æ‰€æœ‰åœºæ™¯éƒ½èƒ½æ»¡è¶³ï¼ŒåŒ…å«åœ†è§’çš„ `button`ï¼Œå•æ¡ï¼Œå¤šæ¡çº¿ã€‚\n\n- ç¼ºç‚¹\n\n> é¢œè‰²ä¸å¥½å¤„ç†ï¼Œ é»‘è‰² `rgba(0, 0, 0, 1)` æœ€æ·±çš„æƒ…å†µäº†ã€‚æœ‰é˜´å½±å‡ºç°ï¼Œä¸å¥½ç”¨ã€‚å¤§é‡ä½¿ç”¨ `box-shadow` å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚å››æ¡è¾¹æ¡†å®ç°æ•ˆæœä¸ç†æƒ³ã€‚\n\n### 2.4 ä½¿ç”¨ background-image\n\n#### 2.4.1 æ¸å˜ `linear-gradient` Â  (`50%` æœ‰é¢œè‰²ï¼Œ`50%` é€æ˜)\n\n```css\n  /* å•æ¡çº¿ */\n  div {\n      height: 1px;\n      background-image: -webkit-linear-gradient(top,transparent 50%,#000 50%);\n      background-position: top left;\n      background-repeat: no-repeat;\n      background-size: 100% 1px;\n  }\n\n  /* å¤šæ¡çº¿ */\n  div {\n      background-image:-webkit-linear-gradient(top, transparent 50%, #000 50%),-webkit-linear-gradient(bottom, transparent 50%, #000 50%),-webkit-linear-gradient(left, transparent 50%, #000 50%),-webkit-linear-gradient(right, transparent 50%, #000 50%);\n      background-size: 100% 1px,100% 1px,1px 100%,1px 100%;\n      background-repeat: no-repeat;\n      background-position: top left, bottom left, left top, right top;\n  }\n```\n\n- ä¼˜ç‚¹ï¼š\n  1.  å¯ä»¥è®¾ç½®å•æ¡\n  2.  å¤šæ¡è¾¹æ¡†å¯ä»¥è®¾ç½®é¢œè‰²\n- ç¼ºç‚¹ï¼š\n  1.  å¤§é‡ä½¿ç”¨æ¸å˜å¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆï¼›\n  2.  ä»£ç é‡å¤§ï¼›\n  3.  å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜\n\n#### 2.4.2 ç”¨å›¾ç‰‡( `base64` )ï¼š\n\n```css\ndiv {\n  border-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAECAYAAABP2FU6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5JREFUeNpiPnH8zH/G////MzAxAAHTyRNn/wMEGABpvQm9g9TJ1QAAAABJRU5ErkJggg==\")\n    2 0 stretch;\n  border-width: 0px 0px 1px;\n}\n```\n\n- ä¼˜ç‚¹ï¼š\n  1.  å¯ä»¥è®¾ç½®å•æ¡,å¤šæ¡è¾¹æ¡†\n  2.  æ²¡æœ‰æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜\n- ç¼ºç‚¹ï¼š\n  1.  ä¿®æ”¹é¢œè‰²éº»çƒ¦, éœ€è¦æ›¿æ¢å›¾ç‰‡\n  2.  éœ€è¦ç”¨åˆ°ä¸¤å¼ å›¾ç‰‡\n  3.  å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜\n\n### 2.5 iphone X å…¼å®¹\n\n```css\n/*\n* iphone x\n*/\n@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {\n  .u-fixed-left {\n    padding-bottom: 0.6rem;\n  }\n  .u-fixed-left {\n    padding-bottom: 0.6rem;\n  }\n}\n```\n\n## 3. js\n\n### 3.1 setInterval\n\n### 3.2 ios æ—¥æœŸå…¼å®¹\n\n- `ios`\n\n> ä¸æ”¯æŒ `-` è¿æ¥æ—¥æœŸï¼Œéœ€è¦å†™æˆ\n\n```javascript\nvar d = new Date(\"2017-08-11 12:00:00\".replace(/-/g, \"/\"));\n```\n\n### 3.3 è·å–å…ƒç´ çœŸå®å®½é«˜\n\n```javascript\n// example:\nif (DOMå…ƒç´ .currentStyle) {\n  // IEã€Opera\n  // console.log(\"æ”¯æŒcurrentStyle\");\n  // alert(oAbc.currentStyle.width);\n} else {\n  // FFã€chromeã€safari\n  // alert(getComputedStyle(oAbc,false).width);\n  _this.$trueWeight = (($art.getBoundingClientRect().width - $lRow[idx].getBoundingClientRect().width) / 2) * 5;\n}\n```\n\n### 3.4 jsonp å¤±è´¥çš„å›è°ƒå‡½æ•°\n\n```javascript\n// å¯ä»¥ä½¿ç”¨timeoutè¶…æ—¶æ¥åˆ¤æ–­\ncomplete: function (XMLHttpRequest, status) {\n    //è¯·æ±‚å®Œæˆåæœ€ç»ˆæ‰§è¡Œå‚æ•°\n    if (status == 'timeout') {\n        //è¶…æ—¶,statusè¿˜æœ‰success,errorç­‰å€¼çš„æƒ…å†µ\n        xhr.abort();\n    }\n}\n```\n\n### 3.5 åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\n\n```javascript\n// è·å–è§’åº¦\nthis.getAngle = function (angx, angy) {\n  return (Math.atan2(angy, angx) * 180) / Math.PI;\n};\n//æ ¹æ®èµ·ç‚¹ç»ˆç‚¹è¿”å›æ–¹å‘ 1å‘ä¸Š 2å‘ä¸‹ 3å‘å·¦ 4å‘å³ 0æœªæ»‘åŠ¨\nthis.getDirection = function (startx, starty, endx, endy) {\n  let angx = endx - startx;\n  let angy = endy - starty;\n  let result = 0;\n  //å¦‚æœæ»‘åŠ¨è·ç¦»å¤ªçŸ­\n  if (Math.abs(angx) < 2 && Math.abs(angy) < 2) {\n    return result;\n  }\n  let angle = this.getAngle(angx, angy);\n  if (angle >= -135 && angle <= -45) {\n    result = 1;\n  } else if (angle > 45 && angle < 135) {\n    result = 2;\n  } else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {\n    result = 3;\n  } else if (angle >= -45 && angle <= 45) {\n    result = 4;\n  }\n\n  return result;\n};\n\n// ä¸‹æ»‘çš„æ—¶å€™ï¼Œå¤±å»ç„¦ç‚¹\n// jq ç”¨e.originalEvent.touches[0];\n// zepto ç”¨e.touches[0];\nlet startx = \"\",\n  starty = \"\";\n//æ‰‹æŒ‡æ¥è§¦å±å¹•\n_this.$document.on(\"touchstart\", function (e) {\n  startx = e.originalEvent.touches[0].pageX;\n  starty = e.originalEvent.touches[0].pageY;\n});\n//æ‰‹æŒ‡ç¦»å¼€å±å¹•\n_this.$document.on(\"touchmove\", function (e) {\n  let endx = e.originalEvent.changedTouches[0].pageX,\n    endy = e.originalEvent.changedTouches[0].pageY;\n  let direction = _this.getDirection(startx, starty, endx, endy);\n  if (direction == 1) {\n    // ä¸Šæ»‘çš„æ“ä½œ\n  }\n  if (direction == 2) {\n    // ä¸‹æ»‘çš„æ“ä½œ\n  }\n});\n```\n","source":"_posts/å‰ç«¯/H5 ç›¸å…³é—®é¢˜æ”¶é›†.md","raw":"---\ntitle: H5 ç›¸å…³é—®é¢˜æ”¶é›†\ndate: 2020-07-19\ncategories: [å‰ç«¯, h5]\ntags:\n  - è§£å†³æ–¹æ¡ˆ\n---\n\n## 1. html\n\n### è®¾ç½®ç¦æ­¢ç¼©æ”¾\n\n```html\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\" />\n```\n\n## 2. css\n\n### 2.1 ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\n\n> è®¾ç½®å±æ€§ `touch-action:none;` ä¼šå¯¼è‡´å®‰å“ç³»ç»Ÿæ— æ³•è¿›è¡Œæ»‘åŠ¨ã€‚`ios` ç³»ç»Ÿä¸å—å½±å“ï¼Œå› ä¸º `ios` é»˜è®¤æ”¯æŒ `touch` äº‹ä»¶ã€‚\n\n```css\n/* ç¦æ­¢è§¦å‘é»˜è®¤çš„æ‰‹åŠ¿æ“ä½œ */\ntouch-action: none;\n```\n\n### 2.2 è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\n\n> è®¾ç½® `border` çš„å®½é«˜æˆ–è€…é€šè¿‡ `div` è®¾ç½®å®½é«˜çš„çš„æ—¶å€™ï¼Œå¯¹äºè§†ç½‘è†œå±å¹• `(Retina)`ï¼Œ`1px` ä¼šæ˜¾ç¤ºæˆ `2px`ï¼›\n> å¦‚æœç”¨ç›¸å¯¹åº”çš„ `rem` å¤„ç†ï¼Œéƒ¨åˆ†æ‰‹æœºä¼šæ— æ³•æ˜¾ç¤ºã€‚\n> åœ¨ `ios8` ä¸­ï¼Œå·²ç»æ”¯æŒ `0.5px`ï¼Œåœ¨ `ios7` ä»¥ä¸‹ï¼Œ`android` ç­‰å…¶ä»–ç³»ç»Ÿé‡Œï¼Œ`0.5px` ä¼šè¢«æ˜¾ç¤ºä¸º `0px`ï¼Œæ‰€ä»¥éœ€è¦å†™ `hack` æ¥å…¼å®¹æ—§ç‰ˆæœ¬çš„ç³»ç»Ÿã€‚é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼\n\n#### 2.2.1 åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\n\n```css\ndiv {\n  border: 1px solid #000;\n}\n\n@media (-webkit-min-device-pixel-ratio: 2) {\n  div {\n    border: 0.5px solid #000;\n  }\n}\n```\n\n#### 2.2.2 åœ¨ html çš„ meta æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\n\n```html\n<meta name=\"viewport\" content=\"initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no\" />\n```\n\n#### 2.2.3 è®¾ç½®å±æ€§ `transform: scale(0.5)ï¼›`\n\n- ç¼ºç‚¹\n\n> åœ†è§’æ— æ³•å®ç°ï¼Œå®ç° `4` æ¡è¾¹æ¡†æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”åªèƒ½å•ç‹¬å®ç°ï¼Œå¦‚æœåµŒå¥—ï¼Œä¼šå¯¹åŒ…å«çš„æ•ˆæœäº§ç”Ÿä¸æƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆé…åˆ `:after` å’Œ `before` ç‹¬ç«‹ä½¿ç”¨è¾ƒå¤šã€‚æ¯”å¦‚ç”»ä¸€ä¸ªå•†å“çš„è¾¹æ¡†å››æ¡çº¿ï¼Œå®¹å™¨çš„ `after` å’Œ `before` å¯ä»¥ç”» `2` æ¡çº¿ï¼Œåˆ©ç”¨å®¹å™¨çš„çˆ¶å…ƒç´ çš„ `after`ã€`before` å†ç”» `2` æ¡çº¿ã€‚\n\n```css\ndiv {\n  height: 1px;\n  -webkit-transform: scaleY(0.5);\n  -webkit-transform-origin: 0 0;\n  overflow: hidden;\n  background: #000;\n}\n```\n\n```css\ndiv {\n  Â Â Â Â position: relative;\n}\n\ndiv:after {\n  content: \"\";\n  position: absolute;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  border-bottom: 1px solid #000;\n  -webkit-transform: scaleY(0.5);\n  -webkit-transform-origin: 0 0;\n}\n```\n\n### 2.3 å®ç° 0.5px æ•ˆæœ\n\n```css\nxx {\n  -webkit-box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.5);\n}\n```\n\n- ä¼˜ç‚¹\n\n> åŸºæœ¬æ‰€æœ‰åœºæ™¯éƒ½èƒ½æ»¡è¶³ï¼ŒåŒ…å«åœ†è§’çš„ `button`ï¼Œå•æ¡ï¼Œå¤šæ¡çº¿ã€‚\n\n- ç¼ºç‚¹\n\n> é¢œè‰²ä¸å¥½å¤„ç†ï¼Œ é»‘è‰² `rgba(0, 0, 0, 1)` æœ€æ·±çš„æƒ…å†µäº†ã€‚æœ‰é˜´å½±å‡ºç°ï¼Œä¸å¥½ç”¨ã€‚å¤§é‡ä½¿ç”¨ `box-shadow` å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚å››æ¡è¾¹æ¡†å®ç°æ•ˆæœä¸ç†æƒ³ã€‚\n\n### 2.4 ä½¿ç”¨ background-image\n\n#### 2.4.1 æ¸å˜ `linear-gradient` Â  (`50%` æœ‰é¢œè‰²ï¼Œ`50%` é€æ˜)\n\n```css\n  /* å•æ¡çº¿ */\n  div {\n      height: 1px;\n      background-image: -webkit-linear-gradient(top,transparent 50%,#000 50%);\n      background-position: top left;\n      background-repeat: no-repeat;\n      background-size: 100% 1px;\n  }\n\n  /* å¤šæ¡çº¿ */\n  div {\n      background-image:-webkit-linear-gradient(top, transparent 50%, #000 50%),-webkit-linear-gradient(bottom, transparent 50%, #000 50%),-webkit-linear-gradient(left, transparent 50%, #000 50%),-webkit-linear-gradient(right, transparent 50%, #000 50%);\n      background-size: 100% 1px,100% 1px,1px 100%,1px 100%;\n      background-repeat: no-repeat;\n      background-position: top left, bottom left, left top, right top;\n  }\n```\n\n- ä¼˜ç‚¹ï¼š\n  1.  å¯ä»¥è®¾ç½®å•æ¡\n  2.  å¤šæ¡è¾¹æ¡†å¯ä»¥è®¾ç½®é¢œè‰²\n- ç¼ºç‚¹ï¼š\n  1.  å¤§é‡ä½¿ç”¨æ¸å˜å¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆï¼›\n  2.  ä»£ç é‡å¤§ï¼›\n  3.  å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜\n\n#### 2.4.2 ç”¨å›¾ç‰‡( `base64` )ï¼š\n\n```css\ndiv {\n  border-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAECAYAAABP2FU6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5JREFUeNpiPnH8zH/G////MzAxAAHTyRNn/wMEGABpvQm9g9TJ1QAAAABJRU5ErkJggg==\")\n    2 0 stretch;\n  border-width: 0px 0px 1px;\n}\n```\n\n- ä¼˜ç‚¹ï¼š\n  1.  å¯ä»¥è®¾ç½®å•æ¡,å¤šæ¡è¾¹æ¡†\n  2.  æ²¡æœ‰æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜\n- ç¼ºç‚¹ï¼š\n  1.  ä¿®æ”¹é¢œè‰²éº»çƒ¦, éœ€è¦æ›¿æ¢å›¾ç‰‡\n  2.  éœ€è¦ç”¨åˆ°ä¸¤å¼ å›¾ç‰‡\n  3.  å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜\n\n### 2.5 iphone X å…¼å®¹\n\n```css\n/*\n* iphone x\n*/\n@media only screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) {\n  .u-fixed-left {\n    padding-bottom: 0.6rem;\n  }\n  .u-fixed-left {\n    padding-bottom: 0.6rem;\n  }\n}\n```\n\n## 3. js\n\n### 3.1 setInterval\n\n### 3.2 ios æ—¥æœŸå…¼å®¹\n\n- `ios`\n\n> ä¸æ”¯æŒ `-` è¿æ¥æ—¥æœŸï¼Œéœ€è¦å†™æˆ\n\n```javascript\nvar d = new Date(\"2017-08-11 12:00:00\".replace(/-/g, \"/\"));\n```\n\n### 3.3 è·å–å…ƒç´ çœŸå®å®½é«˜\n\n```javascript\n// example:\nif (DOMå…ƒç´ .currentStyle) {\n  // IEã€Opera\n  // console.log(\"æ”¯æŒcurrentStyle\");\n  // alert(oAbc.currentStyle.width);\n} else {\n  // FFã€chromeã€safari\n  // alert(getComputedStyle(oAbc,false).width);\n  _this.$trueWeight = (($art.getBoundingClientRect().width - $lRow[idx].getBoundingClientRect().width) / 2) * 5;\n}\n```\n\n### 3.4 jsonp å¤±è´¥çš„å›è°ƒå‡½æ•°\n\n```javascript\n// å¯ä»¥ä½¿ç”¨timeoutè¶…æ—¶æ¥åˆ¤æ–­\ncomplete: function (XMLHttpRequest, status) {\n    //è¯·æ±‚å®Œæˆåæœ€ç»ˆæ‰§è¡Œå‚æ•°\n    if (status == 'timeout') {\n        //è¶…æ—¶,statusè¿˜æœ‰success,errorç­‰å€¼çš„æƒ…å†µ\n        xhr.abort();\n    }\n}\n```\n\n### 3.5 åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\n\n```javascript\n// è·å–è§’åº¦\nthis.getAngle = function (angx, angy) {\n  return (Math.atan2(angy, angx) * 180) / Math.PI;\n};\n//æ ¹æ®èµ·ç‚¹ç»ˆç‚¹è¿”å›æ–¹å‘ 1å‘ä¸Š 2å‘ä¸‹ 3å‘å·¦ 4å‘å³ 0æœªæ»‘åŠ¨\nthis.getDirection = function (startx, starty, endx, endy) {\n  let angx = endx - startx;\n  let angy = endy - starty;\n  let result = 0;\n  //å¦‚æœæ»‘åŠ¨è·ç¦»å¤ªçŸ­\n  if (Math.abs(angx) < 2 && Math.abs(angy) < 2) {\n    return result;\n  }\n  let angle = this.getAngle(angx, angy);\n  if (angle >= -135 && angle <= -45) {\n    result = 1;\n  } else if (angle > 45 && angle < 135) {\n    result = 2;\n  } else if ((angle >= 135 && angle <= 180) || (angle >= -180 && angle < -135)) {\n    result = 3;\n  } else if (angle >= -45 && angle <= 45) {\n    result = 4;\n  }\n\n  return result;\n};\n\n// ä¸‹æ»‘çš„æ—¶å€™ï¼Œå¤±å»ç„¦ç‚¹\n// jq ç”¨e.originalEvent.touches[0];\n// zepto ç”¨e.touches[0];\nlet startx = \"\",\n  starty = \"\";\n//æ‰‹æŒ‡æ¥è§¦å±å¹•\n_this.$document.on(\"touchstart\", function (e) {\n  startx = e.originalEvent.touches[0].pageX;\n  starty = e.originalEvent.touches[0].pageY;\n});\n//æ‰‹æŒ‡ç¦»å¼€å±å¹•\n_this.$document.on(\"touchmove\", function (e) {\n  let endx = e.originalEvent.changedTouches[0].pageX,\n    endy = e.originalEvent.changedTouches[0].pageY;\n  let direction = _this.getDirection(startx, starty, endx, endy);\n  if (direction == 1) {\n    // ä¸Šæ»‘çš„æ“ä½œ\n  }\n  if (direction == 2) {\n    // ä¸‹æ»‘çš„æ“ä½œ\n  }\n});\n```\n","slug":"å‰ç«¯/H5 ç›¸å…³é—®é¢˜æ”¶é›†","published":1,"updated":"2021-04-07T07:29:13.982Z","_id":"ckn74b69w003lyx7y79keby5p","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"1-html\"><a href=\"#1-html\" class=\"headerlink\" title=\"1. html\"></a>1. html</h2><h3 id=\"è®¾ç½®ç¦æ­¢ç¼©æ”¾\"><a href=\"#è®¾ç½®ç¦æ­¢ç¼©æ”¾\" class=\"headerlink\" title=\"è®¾ç½®ç¦æ­¢ç¼©æ”¾\"></a>è®¾ç½®ç¦æ­¢ç¼©æ”¾</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-css\"><a href=\"#2-css\" class=\"headerlink\" title=\"2. css\"></a>2. css</h2><h3 id=\"2-1-ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\"><a href=\"#2-1-ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\" class=\"headerlink\" title=\"2.1 ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\"></a>2.1 ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜</h3><blockquote>\n<p>è®¾ç½®å±æ€§ <code>touch-action:none;</code> ä¼šå¯¼è‡´å®‰å“ç³»ç»Ÿæ— æ³•è¿›è¡Œæ»‘åŠ¨ã€‚<code>ios</code> ç³»ç»Ÿä¸å—å½±å“ï¼Œå› ä¸º <code>ios</code> é»˜è®¤æ”¯æŒ <code>touch</code> äº‹ä»¶ã€‚</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ç¦æ­¢è§¦å‘é»˜è®¤çš„æ‰‹åŠ¿æ“ä½œ */</span></span><br><span class=\"line\">touch-action: none;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\"><a href=\"#2-2-è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\" class=\"headerlink\" title=\"2.2 è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\"></a>2.2 è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜</h3><blockquote>\n<p>è®¾ç½® <code>border</code> çš„å®½é«˜æˆ–è€…é€šè¿‡ <code>div</code> è®¾ç½®å®½é«˜çš„çš„æ—¶å€™ï¼Œå¯¹äºè§†ç½‘è†œå±å¹• <code>(Retina)</code>ï¼Œ<code>1px</code> ä¼šæ˜¾ç¤ºæˆ <code>2px</code>ï¼›<br>å¦‚æœç”¨ç›¸å¯¹åº”çš„ <code>rem</code> å¤„ç†ï¼Œéƒ¨åˆ†æ‰‹æœºä¼šæ— æ³•æ˜¾ç¤ºã€‚<br>åœ¨ <code>ios8</code> ä¸­ï¼Œå·²ç»æ”¯æŒ <code>0.5px</code>ï¼Œåœ¨ <code>ios7</code> ä»¥ä¸‹ï¼Œ<code>android</code> ç­‰å…¶ä»–ç³»ç»Ÿé‡Œï¼Œ<code>0.5px</code> ä¼šè¢«æ˜¾ç¤ºä¸º <code>0px</code>ï¼Œæ‰€ä»¥éœ€è¦å†™ <code>hack</code> æ¥å…¼å®¹æ—§ç‰ˆæœ¬çš„ç³»ç»Ÿã€‚é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼</p>\n</blockquote>\n<h4 id=\"2-2-1-åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\"><a href=\"#2-2-1-åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\" class=\"headerlink\" title=\"2.2.1 åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\"></a>2.2.1 åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬</h4><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">-webkit-min-device-pixel-ratio</span>: <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">0.5px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-2-åœ¨-html-çš„-meta-æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\"><a href=\"#2-2-2-åœ¨-html-çš„-meta-æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\" class=\"headerlink\" title=\"2.2.2 åœ¨ html çš„ meta æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\"></a>2.2.2 åœ¨ html çš„ meta æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-3-è®¾ç½®å±æ€§-transform-scale-0-5-ï¼›\"><a href=\"#2-2-3-è®¾ç½®å±æ€§-transform-scale-0-5-ï¼›\" class=\"headerlink\" title=\"2.2.3 è®¾ç½®å±æ€§ transform: scale(0.5)ï¼›\"></a>2.2.3 è®¾ç½®å±æ€§ <code>transform: scale(0.5)ï¼›</code></h4><ul>\n<li>ç¼ºç‚¹</li>\n</ul>\n<blockquote>\n<p>åœ†è§’æ— æ³•å®ç°ï¼Œå®ç° <code>4</code> æ¡è¾¹æ¡†æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”åªèƒ½å•ç‹¬å®ç°ï¼Œå¦‚æœåµŒå¥—ï¼Œä¼šå¯¹åŒ…å«çš„æ•ˆæœäº§ç”Ÿä¸æƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆé…åˆ <code>:after</code> å’Œ <code>before</code> ç‹¬ç«‹ä½¿ç”¨è¾ƒå¤šã€‚æ¯”å¦‚ç”»ä¸€ä¸ªå•†å“çš„è¾¹æ¡†å››æ¡çº¿ï¼Œå®¹å™¨çš„ <code>after</code> å’Œ <code>before</code> å¯ä»¥ç”» <code>2</code> æ¡çº¿ï¼Œåˆ©ç”¨å®¹å™¨çš„çˆ¶å…ƒç´ çš„ <code>after</code>ã€<code>before</code> å†ç”» <code>2</code> æ¡çº¿ã€‚</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleY</span>(<span class=\"number\">0.5</span>);</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform-origin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  Â Â Â Â <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">div</span>:after &#123;</span><br><span class=\"line\">  content: <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleY</span>(<span class=\"number\">0.5</span>);</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform-origin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-å®ç°-0-5px-æ•ˆæœ\"><a href=\"#2-3-å®ç°-0-5px-æ•ˆæœ\" class=\"headerlink\" title=\"2.3 å®ç° 0.5px æ•ˆæœ\"></a>2.3 å®ç° 0.5px æ•ˆæœ</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xx &#123;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">1px</span> <span class=\"number\">1px</span> -<span class=\"number\">1px</span> <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.5</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¼˜ç‚¹</li>\n</ul>\n<blockquote>\n<p>åŸºæœ¬æ‰€æœ‰åœºæ™¯éƒ½èƒ½æ»¡è¶³ï¼ŒåŒ…å«åœ†è§’çš„ <code>button</code>ï¼Œå•æ¡ï¼Œå¤šæ¡çº¿ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¼ºç‚¹</li>\n</ul>\n<blockquote>\n<p>é¢œè‰²ä¸å¥½å¤„ç†ï¼Œ é»‘è‰² <code>rgba(0, 0, 0, 1)</code> æœ€æ·±çš„æƒ…å†µäº†ã€‚æœ‰é˜´å½±å‡ºç°ï¼Œä¸å¥½ç”¨ã€‚å¤§é‡ä½¿ç”¨ <code>box-shadow</code> å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚å››æ¡è¾¹æ¡†å®ç°æ•ˆæœä¸ç†æƒ³ã€‚</p>\n</blockquote>\n<h3 id=\"2-4-ä½¿ç”¨-background-image\"><a href=\"#2-4-ä½¿ç”¨-background-image\" class=\"headerlink\" title=\"2.4 ä½¿ç”¨ background-image\"></a>2.4 ä½¿ç”¨ background-image</h3><h4 id=\"2-4-1-æ¸å˜-linear-gradient-50-æœ‰é¢œè‰²ï¼Œ50-é€æ˜\"><a href=\"#2-4-1-æ¸å˜-linear-gradient-50-æœ‰é¢œè‰²ï¼Œ50-é€æ˜\" class=\"headerlink\" title=\"2.4.1 æ¸å˜ linear-gradient Â  (50% æœ‰é¢œè‰²ï¼Œ50% é€æ˜)\"></a>2.4.1 æ¸å˜ <code>linear-gradient</code> Â  (<code>50%</code> æœ‰é¢œè‰²ï¼Œ<code>50%</code> é€æ˜)</h4><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* å•æ¡çº¿ */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: <span class=\"built_in\">-webkit-linear-gradient</span>(top,transparent <span class=\"number\">50%</span>,<span class=\"number\">#000</span> <span class=\"number\">50%</span>);</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: top left;</span><br><span class=\"line\">    <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: <span class=\"number\">100%</span> <span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¤šæ¡çº¿ */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>:<span class=\"built_in\">-webkit-linear-gradient</span>(top, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>),<span class=\"built_in\">-webkit-linear-gradient</span>(bottom, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>),<span class=\"built_in\">-webkit-linear-gradient</span>(left, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>),<span class=\"built_in\">-webkit-linear-gradient</span>(right, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>);</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: <span class=\"number\">100%</span> <span class=\"number\">1px</span>,<span class=\"number\">100%</span> <span class=\"number\">1px</span>,<span class=\"number\">1px</span> <span class=\"number\">100%</span>,<span class=\"number\">1px</span> <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: top left, bottom left, left top, right top;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¼˜ç‚¹ï¼š<ol>\n<li> å¯ä»¥è®¾ç½®å•æ¡</li>\n<li> å¤šæ¡è¾¹æ¡†å¯ä»¥è®¾ç½®é¢œè‰²</li>\n</ol>\n</li>\n<li>ç¼ºç‚¹ï¼š<ol>\n<li> å¤§é‡ä½¿ç”¨æ¸å˜å¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆï¼›</li>\n<li> ä»£ç é‡å¤§ï¼›</li>\n<li> å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"2-4-2-ç”¨å›¾ç‰‡-base64-ï¼š\"><a href=\"#2-4-2-ç”¨å›¾ç‰‡-base64-ï¼š\" class=\"headerlink\" title=\"2.4.2 ç”¨å›¾ç‰‡( base64 )ï¼š\"></a>2.4.2 ç”¨å›¾ç‰‡( <code>base64</code> )ï¼š</h4><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAECAYAAABP2FU6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5JREFUeNpiPnH8zH/G////MzAxAAHTyRNn/wMEGABpvQm9g9TJ1QAAAABJRU5ErkJggg==&quot;</span>)</span><br><span class=\"line\">    <span class=\"number\">2</span> <span class=\"number\">0</span> stretch;</span><br><span class=\"line\">  <span class=\"attribute\">border-width</span>: <span class=\"number\">0px</span> <span class=\"number\">0px</span> <span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¼˜ç‚¹ï¼š<ol>\n<li> å¯ä»¥è®¾ç½®å•æ¡,å¤šæ¡è¾¹æ¡†</li>\n<li> æ²¡æœ‰æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜</li>\n</ol>\n</li>\n<li>ç¼ºç‚¹ï¼š<ol>\n<li> ä¿®æ”¹é¢œè‰²éº»çƒ¦, éœ€è¦æ›¿æ¢å›¾ç‰‡</li>\n<li> éœ€è¦ç”¨åˆ°ä¸¤å¼ å›¾ç‰‡</li>\n<li> å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"2-5-iphone-X-å…¼å®¹\"><a href=\"#2-5-iphone-X-å…¼å®¹\" class=\"headerlink\" title=\"2.5 iphone X å…¼å®¹\"></a>2.5 iphone X å…¼å®¹</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* iphone x</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">@media</span> <span class=\"keyword\">only</span> screen <span class=\"keyword\">and</span> (<span class=\"attribute\">device-width</span>: <span class=\"number\">375px</span>) <span class=\"keyword\">and</span> (<span class=\"attribute\">device-height</span>: <span class=\"number\">812px</span>) <span class=\"keyword\">and</span> (<span class=\"attribute\">-webkit-device-pixel-ratio</span>: <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.u-fixed-left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">0.6rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.u-fixed-left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">0.6rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-js\"><a href=\"#3-js\" class=\"headerlink\" title=\"3. js\"></a>3. js</h2><h3 id=\"3-1-setInterval\"><a href=\"#3-1-setInterval\" class=\"headerlink\" title=\"3.1 setInterval\"></a>3.1 setInterval</h3><h3 id=\"3-2-ios-æ—¥æœŸå…¼å®¹\"><a href=\"#3-2-ios-æ—¥æœŸå…¼å®¹\" class=\"headerlink\" title=\"3.2 ios æ—¥æœŸå…¼å®¹\"></a>3.2 ios æ—¥æœŸå…¼å®¹</h3><ul>\n<li><code>ios</code></li>\n</ul>\n<blockquote>\n<p>ä¸æ”¯æŒ <code>-</code> è¿æ¥æ—¥æœŸï¼Œéœ€è¦å†™æˆ</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"string\">&quot;2017-08-11 12:00:00&quot;</span>.replace(<span class=\"regexp\">/-/g</span>, <span class=\"string\">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-è·å–å…ƒç´ çœŸå®å®½é«˜\"><a href=\"#3-3-è·å–å…ƒç´ çœŸå®å®½é«˜\" class=\"headerlink\" title=\"3.3 è·å–å…ƒç´ çœŸå®å®½é«˜\"></a>3.3 è·å–å…ƒç´ çœŸå®å®½é«˜</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// example:</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (DOMå…ƒç´ .currentStyle) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// IEã€Opera</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;æ”¯æŒcurrentStyle&quot;);</span></span><br><span class=\"line\">  <span class=\"comment\">// alert(oAbc.currentStyle.width);</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// FFã€chromeã€safari</span></span><br><span class=\"line\">  <span class=\"comment\">// alert(getComputedStyle(oAbc,false).width);</span></span><br><span class=\"line\">  _this.$trueWeight = (($art.getBoundingClientRect().width - $lRow[idx].getBoundingClientRect().width) / <span class=\"number\">2</span>) * <span class=\"number\">5</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-4-jsonp-å¤±è´¥çš„å›è°ƒå‡½æ•°\"><a href=\"#3-4-jsonp-å¤±è´¥çš„å›è°ƒå‡½æ•°\" class=\"headerlink\" title=\"3.4 jsonp å¤±è´¥çš„å›è°ƒå‡½æ•°\"></a>3.4 jsonp å¤±è´¥çš„å›è°ƒå‡½æ•°</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯ä»¥ä½¿ç”¨timeoutè¶…æ—¶æ¥åˆ¤æ–­</span></span><br><span class=\"line\">complete: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">XMLHttpRequest, status</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//è¯·æ±‚å®Œæˆåæœ€ç»ˆæ‰§è¡Œå‚æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (status == <span class=\"string\">&#x27;timeout&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//è¶…æ—¶,statusè¿˜æœ‰success,errorç­‰å€¼çš„æƒ…å†µ</span></span><br><span class=\"line\">        xhr.abort();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-5-åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\"><a href=\"#3-5-åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\" class=\"headerlink\" title=\"3.5 åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\"></a>3.5 åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–è§’åº¦</span></span><br><span class=\"line\"><span class=\"built_in\">this</span>.getAngle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">angx, angy</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (<span class=\"built_in\">Math</span>.atan2(angy, angx) * <span class=\"number\">180</span>) / <span class=\"built_in\">Math</span>.PI;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//æ ¹æ®èµ·ç‚¹ç»ˆç‚¹è¿”å›æ–¹å‘ 1å‘ä¸Š 2å‘ä¸‹ 3å‘å·¦ 4å‘å³ 0æœªæ»‘åŠ¨</span></span><br><span class=\"line\"><span class=\"built_in\">this</span>.getDirection = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">startx, starty, endx, endy</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> angx = endx - startx;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> angy = endy - starty;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"comment\">//å¦‚æœæ»‘åŠ¨è·ç¦»å¤ªçŸ­</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.abs(angx) &lt; <span class=\"number\">2</span> &amp;&amp; <span class=\"built_in\">Math</span>.abs(angy) &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> angle = <span class=\"built_in\">this</span>.getAngle(angx, angy);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (angle &gt;= -<span class=\"number\">135</span> &amp;&amp; angle &lt;= -<span class=\"number\">45</span>) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (angle &gt; <span class=\"number\">45</span> &amp;&amp; angle &lt; <span class=\"number\">135</span>) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((angle &gt;= <span class=\"number\">135</span> &amp;&amp; angle &lt;= <span class=\"number\">180</span>) || (angle &gt;= -<span class=\"number\">180</span> &amp;&amp; angle &lt; -<span class=\"number\">135</span>)) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (angle &gt;= -<span class=\"number\">45</span> &amp;&amp; angle &lt;= <span class=\"number\">45</span>) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">4</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸‹æ»‘çš„æ—¶å€™ï¼Œå¤±å»ç„¦ç‚¹</span></span><br><span class=\"line\"><span class=\"comment\">// jq ç”¨e.originalEvent.touches[0];</span></span><br><span class=\"line\"><span class=\"comment\">// zepto ç”¨e.touches[0];</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> startx = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  starty = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//æ‰‹æŒ‡æ¥è§¦å±å¹•</span></span><br><span class=\"line\">_this.$document.on(<span class=\"string\">&quot;touchstart&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  startx = e.originalEvent.touches[<span class=\"number\">0</span>].pageX;</span><br><span class=\"line\">  starty = e.originalEvent.touches[<span class=\"number\">0</span>].pageY;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">//æ‰‹æŒ‡ç¦»å¼€å±å¹•</span></span><br><span class=\"line\">_this.$document.on(<span class=\"string\">&quot;touchmove&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> endx = e.originalEvent.changedTouches[<span class=\"number\">0</span>].pageX,</span><br><span class=\"line\">    endy = e.originalEvent.changedTouches[<span class=\"number\">0</span>].pageY;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> direction = _this.getDirection(startx, starty, endx, endy);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (direction == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸Šæ»‘çš„æ“ä½œ</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (direction == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸‹æ»‘çš„æ“ä½œ</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"1-html\"><a href=\"#1-html\" class=\"headerlink\" title=\"1. html\"></a>1. html</h2><h3 id=\"è®¾ç½®ç¦æ­¢ç¼©æ”¾\"><a href=\"#è®¾ç½®ç¦æ­¢ç¼©æ”¾\" class=\"headerlink\" title=\"è®¾ç½®ç¦æ­¢ç¼©æ”¾\"></a>è®¾ç½®ç¦æ­¢ç¼©æ”¾</h3><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-css\"><a href=\"#2-css\" class=\"headerlink\" title=\"2. css\"></a>2. css</h2><h3 id=\"2-1-ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\"><a href=\"#2-1-ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\" class=\"headerlink\" title=\"2.1 ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜\"></a>2.1 ç§»åŠ¨ç«¯æ»‘åŠ¨é—®é¢˜</h3><blockquote>\n<p>è®¾ç½®å±æ€§ <code>touch-action:none;</code> ä¼šå¯¼è‡´å®‰å“ç³»ç»Ÿæ— æ³•è¿›è¡Œæ»‘åŠ¨ã€‚<code>ios</code> ç³»ç»Ÿä¸å—å½±å“ï¼Œå› ä¸º <code>ios</code> é»˜è®¤æ”¯æŒ <code>touch</code> äº‹ä»¶ã€‚</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ç¦æ­¢è§¦å‘é»˜è®¤çš„æ‰‹åŠ¿æ“ä½œ */</span></span><br><span class=\"line\">touch-action: none;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-2-è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\"><a href=\"#2-2-è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\" class=\"headerlink\" title=\"2.2 è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜\"></a>2.2 è§†ç½‘è†œå±æ˜¾ç¤ºé—®é¢˜</h3><blockquote>\n<p>è®¾ç½® <code>border</code> çš„å®½é«˜æˆ–è€…é€šè¿‡ <code>div</code> è®¾ç½®å®½é«˜çš„çš„æ—¶å€™ï¼Œå¯¹äºè§†ç½‘è†œå±å¹• <code>(Retina)</code>ï¼Œ<code>1px</code> ä¼šæ˜¾ç¤ºæˆ <code>2px</code>ï¼›<br>å¦‚æœç”¨ç›¸å¯¹åº”çš„ <code>rem</code> å¤„ç†ï¼Œéƒ¨åˆ†æ‰‹æœºä¼šæ— æ³•æ˜¾ç¤ºã€‚<br>åœ¨ <code>ios8</code> ä¸­ï¼Œå·²ç»æ”¯æŒ <code>0.5px</code>ï¼Œåœ¨ <code>ios7</code> ä»¥ä¸‹ï¼Œ<code>android</code> ç­‰å…¶ä»–ç³»ç»Ÿé‡Œï¼Œ<code>0.5px</code> ä¼šè¢«æ˜¾ç¤ºä¸º <code>0px</code>ï¼Œæ‰€ä»¥éœ€è¦å†™ <code>hack</code> æ¥å…¼å®¹æ—§ç‰ˆæœ¬çš„ç³»ç»Ÿã€‚é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹å‡ ç§æ–¹å¼</p>\n</blockquote>\n<h4 id=\"2-2-1-åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\"><a href=\"#2-2-1-åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\" class=\"headerlink\" title=\"2.2.1 åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬\"></a>2.2.1 åª’ä½“æŸ¥è¯¢çš„æ–¹å¼ï¼Œéœ€è¦åˆ¤æ–­ç³»ç»Ÿå’Œç‰ˆæœ¬</h4><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@media</span> (<span class=\"attribute\">-webkit-min-device-pixel-ratio</span>: <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">0.5px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-2-åœ¨-html-çš„-meta-æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\"><a href=\"#2-2-2-åœ¨-html-çš„-meta-æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\" class=\"headerlink\" title=\"2.2.2 åœ¨ html çš„ meta æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†\"></a>2.2.2 åœ¨ html çš„ meta æ ‡ç­¾åŠ ä¸Šä»¥ä¸‹éƒ¨åˆ†</h4><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;viewport&quot;</span> <span class=\"attr\">content</span>=<span class=\"string\">&quot;initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=no&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-2-3-è®¾ç½®å±æ€§-transform-scale-0-5-ï¼›\"><a href=\"#2-2-3-è®¾ç½®å±æ€§-transform-scale-0-5-ï¼›\" class=\"headerlink\" title=\"2.2.3 è®¾ç½®å±æ€§ transform: scale(0.5)ï¼›\"></a>2.2.3 è®¾ç½®å±æ€§ <code>transform: scale(0.5)ï¼›</code></h4><ul>\n<li>ç¼ºç‚¹</li>\n</ul>\n<blockquote>\n<p>åœ†è§’æ— æ³•å®ç°ï¼Œå®ç° <code>4</code> æ¡è¾¹æ¡†æ¯”è¾ƒéº»çƒ¦ï¼Œå¹¶ä¸”åªèƒ½å•ç‹¬å®ç°ï¼Œå¦‚æœåµŒå¥—ï¼Œä¼šå¯¹åŒ…å«çš„æ•ˆæœäº§ç”Ÿä¸æƒ³è¦çš„æ•ˆæœï¼Œæ‰€ä»¥æ­¤æ–¹æ¡ˆé…åˆ <code>:after</code> å’Œ <code>before</code> ç‹¬ç«‹ä½¿ç”¨è¾ƒå¤šã€‚æ¯”å¦‚ç”»ä¸€ä¸ªå•†å“çš„è¾¹æ¡†å››æ¡çº¿ï¼Œå®¹å™¨çš„ <code>after</code> å’Œ <code>before</code> å¯ä»¥ç”» <code>2</code> æ¡çº¿ï¼Œåˆ©ç”¨å®¹å™¨çš„çˆ¶å…ƒç´ çš„ <code>after</code>ã€<code>before</code> å†ç”» <code>2</code> æ¡çº¿ã€‚</p>\n</blockquote>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleY</span>(<span class=\"number\">0.5</span>);</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform-origin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">background</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  Â Â Â Â <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-tag\">div</span>:after &#123;</span><br><span class=\"line\">  content: <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">bottom</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">right</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-bottom</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#000</span>;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform</span>: <span class=\"built_in\">scaleY</span>(<span class=\"number\">0.5</span>);</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform-origin</span>: <span class=\"number\">0</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-3-å®ç°-0-5px-æ•ˆæœ\"><a href=\"#2-3-å®ç°-0-5px-æ•ˆæœ\" class=\"headerlink\" title=\"2.3 å®ç° 0.5px æ•ˆæœ\"></a>2.3 å®ç° 0.5px æ•ˆæœ</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xx &#123;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">1px</span> <span class=\"number\">1px</span> -<span class=\"number\">1px</span> <span class=\"built_in\">rgba</span>(<span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0.5</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¼˜ç‚¹</li>\n</ul>\n<blockquote>\n<p>åŸºæœ¬æ‰€æœ‰åœºæ™¯éƒ½èƒ½æ»¡è¶³ï¼ŒåŒ…å«åœ†è§’çš„ <code>button</code>ï¼Œå•æ¡ï¼Œå¤šæ¡çº¿ã€‚</p>\n</blockquote>\n<ul>\n<li>ç¼ºç‚¹</li>\n</ul>\n<blockquote>\n<p>é¢œè‰²ä¸å¥½å¤„ç†ï¼Œ é»‘è‰² <code>rgba(0, 0, 0, 1)</code> æœ€æ·±çš„æƒ…å†µäº†ã€‚æœ‰é˜´å½±å‡ºç°ï¼Œä¸å¥½ç”¨ã€‚å¤§é‡ä½¿ç”¨ <code>box-shadow</code> å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ç“¶é¢ˆã€‚å››æ¡è¾¹æ¡†å®ç°æ•ˆæœä¸ç†æƒ³ã€‚</p>\n</blockquote>\n<h3 id=\"2-4-ä½¿ç”¨-background-image\"><a href=\"#2-4-ä½¿ç”¨-background-image\" class=\"headerlink\" title=\"2.4 ä½¿ç”¨ background-image\"></a>2.4 ä½¿ç”¨ background-image</h3><h4 id=\"2-4-1-æ¸å˜-linear-gradient-50-æœ‰é¢œè‰²ï¼Œ50-é€æ˜\"><a href=\"#2-4-1-æ¸å˜-linear-gradient-50-æœ‰é¢œè‰²ï¼Œ50-é€æ˜\" class=\"headerlink\" title=\"2.4.1 æ¸å˜ linear-gradient Â  (50% æœ‰é¢œè‰²ï¼Œ50% é€æ˜)\"></a>2.4.1 æ¸å˜ <code>linear-gradient</code> Â  (<code>50%</code> æœ‰é¢œè‰²ï¼Œ<code>50%</code> é€æ˜)</h4><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* å•æ¡çº¿ */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">height</span>: <span class=\"number\">1px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: <span class=\"built_in\">-webkit-linear-gradient</span>(top,transparent <span class=\"number\">50%</span>,<span class=\"number\">#000</span> <span class=\"number\">50%</span>);</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: top left;</span><br><span class=\"line\">    <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: <span class=\"number\">100%</span> <span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* å¤šæ¡çº¿ */</span></span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>:<span class=\"built_in\">-webkit-linear-gradient</span>(top, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>),<span class=\"built_in\">-webkit-linear-gradient</span>(bottom, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>),<span class=\"built_in\">-webkit-linear-gradient</span>(left, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>),<span class=\"built_in\">-webkit-linear-gradient</span>(right, transparent <span class=\"number\">50%</span>, <span class=\"number\">#000</span> <span class=\"number\">50%</span>);</span><br><span class=\"line\">    <span class=\"attribute\">background-size</span>: <span class=\"number\">100%</span> <span class=\"number\">1px</span>,<span class=\"number\">100%</span> <span class=\"number\">1px</span>,<span class=\"number\">1px</span> <span class=\"number\">100%</span>,<span class=\"number\">1px</span> <span class=\"number\">100%</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-repeat</span>: no-repeat;</span><br><span class=\"line\">    <span class=\"attribute\">background-position</span>: top left, bottom left, left top, right top;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¼˜ç‚¹ï¼š<ol>\n<li> å¯ä»¥è®¾ç½®å•æ¡</li>\n<li> å¤šæ¡è¾¹æ¡†å¯ä»¥è®¾ç½®é¢œè‰²</li>\n</ol>\n</li>\n<li>ç¼ºç‚¹ï¼š<ol>\n<li> å¤§é‡ä½¿ç”¨æ¸å˜å¯èƒ½å¯¼è‡´æ€§èƒ½ç“¶é¢ˆï¼›</li>\n<li> ä»£ç é‡å¤§ï¼›</li>\n<li> å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜</li>\n</ol>\n</li>\n</ul>\n<h4 id=\"2-4-2-ç”¨å›¾ç‰‡-base64-ï¼š\"><a href=\"#2-4-2-ç”¨å›¾ç‰‡-base64-ï¼š\" class=\"headerlink\" title=\"2.4.2 ç”¨å›¾ç‰‡( base64 )ï¼š\"></a>2.4.2 ç”¨å›¾ç‰‡( <code>base64</code> )ï¼š</h4><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border-image</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAECAYAAABP2FU6AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAB5JREFUeNpiPnH8zH/G////MzAxAAHTyRNn/wMEGABpvQm9g9TJ1QAAAABJRU5ErkJggg==&quot;</span>)</span><br><span class=\"line\">    <span class=\"number\">2</span> <span class=\"number\">0</span> stretch;</span><br><span class=\"line\">  <span class=\"attribute\">border-width</span>: <span class=\"number\">0px</span> <span class=\"number\">0px</span> <span class=\"number\">1px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>ä¼˜ç‚¹ï¼š<ol>\n<li> å¯ä»¥è®¾ç½®å•æ¡,å¤šæ¡è¾¹æ¡†</li>\n<li> æ²¡æœ‰æ€§èƒ½ç“¶é¢ˆçš„é—®é¢˜</li>\n</ol>\n</li>\n<li>ç¼ºç‚¹ï¼š<ol>\n<li> ä¿®æ”¹é¢œè‰²éº»çƒ¦, éœ€è¦æ›¿æ¢å›¾ç‰‡</li>\n<li> éœ€è¦ç”¨åˆ°ä¸¤å¼ å›¾ç‰‡</li>\n<li> å¤šèƒŒæ™¯å›¾ç‰‡æœ‰å…¼å®¹æ€§é—®é¢˜</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"2-5-iphone-X-å…¼å®¹\"><a href=\"#2-5-iphone-X-å…¼å®¹\" class=\"headerlink\" title=\"2.5 iphone X å…¼å®¹\"></a>2.5 iphone X å…¼å®¹</h3><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">* iphone x</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"keyword\">@media</span> <span class=\"keyword\">only</span> screen <span class=\"keyword\">and</span> (<span class=\"attribute\">device-width</span>: <span class=\"number\">375px</span>) <span class=\"keyword\">and</span> (<span class=\"attribute\">device-height</span>: <span class=\"number\">812px</span>) <span class=\"keyword\">and</span> (<span class=\"attribute\">-webkit-device-pixel-ratio</span>: <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.u-fixed-left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">0.6rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"selector-class\">.u-fixed-left</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">padding-bottom</span>: <span class=\"number\">0.6rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-js\"><a href=\"#3-js\" class=\"headerlink\" title=\"3. js\"></a>3. js</h2><h3 id=\"3-1-setInterval\"><a href=\"#3-1-setInterval\" class=\"headerlink\" title=\"3.1 setInterval\"></a>3.1 setInterval</h3><h3 id=\"3-2-ios-æ—¥æœŸå…¼å®¹\"><a href=\"#3-2-ios-æ—¥æœŸå…¼å®¹\" class=\"headerlink\" title=\"3.2 ios æ—¥æœŸå…¼å®¹\"></a>3.2 ios æ—¥æœŸå…¼å®¹</h3><ul>\n<li><code>ios</code></li>\n</ul>\n<blockquote>\n<p>ä¸æ”¯æŒ <code>-</code> è¿æ¥æ—¥æœŸï¼Œéœ€è¦å†™æˆ</p>\n</blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> d = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(<span class=\"string\">&quot;2017-08-11 12:00:00&quot;</span>.replace(<span class=\"regexp\">/-/g</span>, <span class=\"string\">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-è·å–å…ƒç´ çœŸå®å®½é«˜\"><a href=\"#3-3-è·å–å…ƒç´ çœŸå®å®½é«˜\" class=\"headerlink\" title=\"3.3 è·å–å…ƒç´ çœŸå®å®½é«˜\"></a>3.3 è·å–å…ƒç´ çœŸå®å®½é«˜</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// example:</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (DOMå…ƒç´ .currentStyle) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// IEã€Opera</span></span><br><span class=\"line\">  <span class=\"comment\">// console.log(&quot;æ”¯æŒcurrentStyle&quot;);</span></span><br><span class=\"line\">  <span class=\"comment\">// alert(oAbc.currentStyle.width);</span></span><br><span class=\"line\">&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// FFã€chromeã€safari</span></span><br><span class=\"line\">  <span class=\"comment\">// alert(getComputedStyle(oAbc,false).width);</span></span><br><span class=\"line\">  _this.$trueWeight = (($art.getBoundingClientRect().width - $lRow[idx].getBoundingClientRect().width) / <span class=\"number\">2</span>) * <span class=\"number\">5</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-4-jsonp-å¤±è´¥çš„å›è°ƒå‡½æ•°\"><a href=\"#3-4-jsonp-å¤±è´¥çš„å›è°ƒå‡½æ•°\" class=\"headerlink\" title=\"3.4 jsonp å¤±è´¥çš„å›è°ƒå‡½æ•°\"></a>3.4 jsonp å¤±è´¥çš„å›è°ƒå‡½æ•°</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å¯ä»¥ä½¿ç”¨timeoutè¶…æ—¶æ¥åˆ¤æ–­</span></span><br><span class=\"line\">complete: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">XMLHttpRequest, status</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//è¯·æ±‚å®Œæˆåæœ€ç»ˆæ‰§è¡Œå‚æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (status == <span class=\"string\">&#x27;timeout&#x27;</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//è¶…æ—¶,statusè¿˜æœ‰success,errorç­‰å€¼çš„æƒ…å†µ</span></span><br><span class=\"line\">        xhr.abort();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-5-åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\"><a href=\"#3-5-åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\" class=\"headerlink\" title=\"3.5 åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘\"></a>3.5 åŸç”Ÿåˆ¤æ–­æ»‘åŠ¨æ–¹å‘</h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–è§’åº¦</span></span><br><span class=\"line\"><span class=\"built_in\">this</span>.getAngle = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">angx, angy</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (<span class=\"built_in\">Math</span>.atan2(angy, angx) * <span class=\"number\">180</span>) / <span class=\"built_in\">Math</span>.PI;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"comment\">//æ ¹æ®èµ·ç‚¹ç»ˆç‚¹è¿”å›æ–¹å‘ 1å‘ä¸Š 2å‘ä¸‹ 3å‘å·¦ 4å‘å³ 0æœªæ»‘åŠ¨</span></span><br><span class=\"line\"><span class=\"built_in\">this</span>.getDirection = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">startx, starty, endx, endy</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> angx = endx - startx;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> angy = endy - starty;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> result = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"comment\">//å¦‚æœæ»‘åŠ¨è·ç¦»å¤ªçŸ­</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"built_in\">Math</span>.abs(angx) &lt; <span class=\"number\">2</span> &amp;&amp; <span class=\"built_in\">Math</span>.abs(angy) &lt; <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> angle = <span class=\"built_in\">this</span>.getAngle(angx, angy);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (angle &gt;= -<span class=\"number\">135</span> &amp;&amp; angle &lt;= -<span class=\"number\">45</span>) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (angle &gt; <span class=\"number\">45</span> &amp;&amp; angle &lt; <span class=\"number\">135</span>) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">2</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> ((angle &gt;= <span class=\"number\">135</span> &amp;&amp; angle &lt;= <span class=\"number\">180</span>) || (angle &gt;= -<span class=\"number\">180</span> &amp;&amp; angle &lt; -<span class=\"number\">135</span>)) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">3</span>;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (angle &gt;= -<span class=\"number\">45</span> &amp;&amp; angle &lt;= <span class=\"number\">45</span>) &#123;</span><br><span class=\"line\">    result = <span class=\"number\">4</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸‹æ»‘çš„æ—¶å€™ï¼Œå¤±å»ç„¦ç‚¹</span></span><br><span class=\"line\"><span class=\"comment\">// jq ç”¨e.originalEvent.touches[0];</span></span><br><span class=\"line\"><span class=\"comment\">// zepto ç”¨e.touches[0];</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> startx = <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">  starty = <span class=\"string\">&quot;&quot;</span>;</span><br><span class=\"line\"><span class=\"comment\">//æ‰‹æŒ‡æ¥è§¦å±å¹•</span></span><br><span class=\"line\">_this.$document.on(<span class=\"string\">&quot;touchstart&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  startx = e.originalEvent.touches[<span class=\"number\">0</span>].pageX;</span><br><span class=\"line\">  starty = e.originalEvent.touches[<span class=\"number\">0</span>].pageY;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">//æ‰‹æŒ‡ç¦»å¼€å±å¹•</span></span><br><span class=\"line\">_this.$document.on(<span class=\"string\">&quot;touchmove&quot;</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> endx = e.originalEvent.changedTouches[<span class=\"number\">0</span>].pageX,</span><br><span class=\"line\">    endy = e.originalEvent.changedTouches[<span class=\"number\">0</span>].pageY;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> direction = _this.getDirection(startx, starty, endx, endy);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (direction == <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸Šæ»‘çš„æ“ä½œ</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (direction == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ä¸‹æ»‘çš„æ“ä½œ</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n"},{"title":"Hybrid ç®€ä»‹","date":"2020-07-16T16:00:00.000Z","_content":"\n## hybrid å®ç°åŸç†\n\n> åŸç”Ÿçš„ `App` ä¸­ï¼Œä½¿ç”¨ `WebView` ä½œä¸ºå®¹å™¨ç›´æ¥æ‰¿è½½ `Web` é¡µé¢ã€‚ ä¸­é—´é€šè¿‡ `JSBridge` æ¥å®Œæˆ `Native` ä¸ `JavaScript` ä¹‹é—´çš„é€šè®¯ã€‚\n\n## hybrid å‡ ç§æ–¹æ¡ˆ\n\n### åŸºäº Â WebView UIÂ  çš„åŸºç¡€æ–¹æ¡ˆ\n\n> ä¾‹å¦‚å¾®ä¿¡ `JS-SDK`ï¼Œé€šè¿‡ `JSBridge` å®Œæˆ `H5` ä¸ `Native` çš„åŒå‘é€šè®¯ï¼Œä»è€Œèµ‹äºˆ `H5` ä¸€å®šç¨‹åº¦çš„åŸç”Ÿèƒ½åŠ›ã€‚\n\n### åŸºäº Â `Native UI`Â  çš„æ–¹æ¡ˆ\n\n> ä¾‹å¦‚ `React-Nativeã€Weex` ã€‚åœ¨èµ‹äºˆ `H5` åŸç”Ÿ `API` èƒ½åŠ›çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥é€šè¿‡ `JSBridge` å°† `js` è§£ææˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘( `Virtual DOM` )ä¼ é€’åˆ° `Native` å¹¶ä½¿ç”¨åŸç”Ÿæ¸²æŸ“ã€‚\n\n### å°ç¨‹åºæ–¹æ¡ˆ\n\n> é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ `JSBridge`ï¼Œå¹¶ä½¿ç”¨åŒ `WebView` åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† `JS` é€»è¾‘ä¸ `UI` æ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† `H5` ä¸ `Native` æ··åˆç¨‹åº¦ï¼Œæé«˜äº†é¡µé¢æ€§èƒ½åŠå¼€å‘ä½“éªŒã€‚\n\n## hybrid å’Œ h5 å¯¹æ¯”\n\n### h5\n\n- ä¼˜ç‚¹\n  - å¼€å‘é€Ÿåº¦å¿«ï¼Œä¸€ç«¯å¼€å‘å¤šç«¯è¿è¡Œ\n  - å¦‚æœéœ€è¦é¢‘ç¹æ›´æ¢é¡µé¢ï¼Œç”¨ `h5` ç»´æŠ¤ä¼šæ›´åŠ å®¹æ˜“\n  - ç‰ˆæœ¬æ›´æ–°ä¸éœ€è¦æ‰“åŒ…ä¾¿å¯å‘å¸ƒ\n- ç¼ºç‚¹\n  - æµç•…åº¦ï¼Œå®‰å…¨é—®é¢˜\n  - æ€§èƒ½ä¸å¦‚åŸç”Ÿ\n  - ä¸èƒ½è°ƒç”¨ç§»åŠ¨ç¡¬ä»¶è®¾å¤‡çš„åŠŸèƒ½\n","source":"_posts/å‰ç«¯/Hybrid ç®€ä»‹.md","raw":"---\ntitle: Hybrid ç®€ä»‹\ndate: 2020-07-17\ncategories: [å‰ç«¯, js]\ntags:\n  - hybrid\n---\n\n## hybrid å®ç°åŸç†\n\n> åŸç”Ÿçš„ `App` ä¸­ï¼Œä½¿ç”¨ `WebView` ä½œä¸ºå®¹å™¨ç›´æ¥æ‰¿è½½ `Web` é¡µé¢ã€‚ ä¸­é—´é€šè¿‡ `JSBridge` æ¥å®Œæˆ `Native` ä¸ `JavaScript` ä¹‹é—´çš„é€šè®¯ã€‚\n\n## hybrid å‡ ç§æ–¹æ¡ˆ\n\n### åŸºäº Â WebView UIÂ  çš„åŸºç¡€æ–¹æ¡ˆ\n\n> ä¾‹å¦‚å¾®ä¿¡ `JS-SDK`ï¼Œé€šè¿‡ `JSBridge` å®Œæˆ `H5` ä¸ `Native` çš„åŒå‘é€šè®¯ï¼Œä»è€Œèµ‹äºˆ `H5` ä¸€å®šç¨‹åº¦çš„åŸç”Ÿèƒ½åŠ›ã€‚\n\n### åŸºäº Â `Native UI`Â  çš„æ–¹æ¡ˆ\n\n> ä¾‹å¦‚ `React-Nativeã€Weex` ã€‚åœ¨èµ‹äºˆ `H5` åŸç”Ÿ `API` èƒ½åŠ›çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥é€šè¿‡ `JSBridge` å°† `js` è§£ææˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘( `Virtual DOM` )ä¼ é€’åˆ° `Native` å¹¶ä½¿ç”¨åŸç”Ÿæ¸²æŸ“ã€‚\n\n### å°ç¨‹åºæ–¹æ¡ˆ\n\n> é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ `JSBridge`ï¼Œå¹¶ä½¿ç”¨åŒ `WebView` åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† `JS` é€»è¾‘ä¸ `UI` æ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† `H5` ä¸ `Native` æ··åˆç¨‹åº¦ï¼Œæé«˜äº†é¡µé¢æ€§èƒ½åŠå¼€å‘ä½“éªŒã€‚\n\n## hybrid å’Œ h5 å¯¹æ¯”\n\n### h5\n\n- ä¼˜ç‚¹\n  - å¼€å‘é€Ÿåº¦å¿«ï¼Œä¸€ç«¯å¼€å‘å¤šç«¯è¿è¡Œ\n  - å¦‚æœéœ€è¦é¢‘ç¹æ›´æ¢é¡µé¢ï¼Œç”¨ `h5` ç»´æŠ¤ä¼šæ›´åŠ å®¹æ˜“\n  - ç‰ˆæœ¬æ›´æ–°ä¸éœ€è¦æ‰“åŒ…ä¾¿å¯å‘å¸ƒ\n- ç¼ºç‚¹\n  - æµç•…åº¦ï¼Œå®‰å…¨é—®é¢˜\n  - æ€§èƒ½ä¸å¦‚åŸç”Ÿ\n  - ä¸èƒ½è°ƒç”¨ç§»åŠ¨ç¡¬ä»¶è®¾å¤‡çš„åŠŸèƒ½\n","slug":"å‰ç«¯/Hybrid ç®€ä»‹","published":1,"updated":"2021-04-07T07:29:06.242Z","_id":"ckn74eabc003pyx7y5tijf0d1","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"hybrid-å®ç°åŸç†\"><a href=\"#hybrid-å®ç°åŸç†\" class=\"headerlink\" title=\"hybrid å®ç°åŸç†\"></a>hybrid å®ç°åŸç†</h2><blockquote>\n<p>åŸç”Ÿçš„ <code>App</code> ä¸­ï¼Œä½¿ç”¨ <code>WebView</code> ä½œä¸ºå®¹å™¨ç›´æ¥æ‰¿è½½ <code>Web</code> é¡µé¢ã€‚ ä¸­é—´é€šè¿‡ <code>JSBridge</code> æ¥å®Œæˆ <code>Native</code> ä¸ <code>JavaScript</code> ä¹‹é—´çš„é€šè®¯ã€‚</p>\n</blockquote>\n<h2 id=\"hybrid-å‡ ç§æ–¹æ¡ˆ\"><a href=\"#hybrid-å‡ ç§æ–¹æ¡ˆ\" class=\"headerlink\" title=\"hybrid å‡ ç§æ–¹æ¡ˆ\"></a>hybrid å‡ ç§æ–¹æ¡ˆ</h2><h3 id=\"åŸºäº-WebView-UI-çš„åŸºç¡€æ–¹æ¡ˆ\"><a href=\"#åŸºäº-WebView-UI-çš„åŸºç¡€æ–¹æ¡ˆ\" class=\"headerlink\" title=\"åŸºäº Â WebView UIÂ  çš„åŸºç¡€æ–¹æ¡ˆ\"></a>åŸºäº Â WebView UIÂ  çš„åŸºç¡€æ–¹æ¡ˆ</h3><blockquote>\n<p>ä¾‹å¦‚å¾®ä¿¡ <code>JS-SDK</code>ï¼Œé€šè¿‡ <code>JSBridge</code> å®Œæˆ <code>H5</code> ä¸ <code>Native</code> çš„åŒå‘é€šè®¯ï¼Œä»è€Œèµ‹äºˆ <code>H5</code> ä¸€å®šç¨‹åº¦çš„åŸç”Ÿèƒ½åŠ›ã€‚</p>\n</blockquote>\n<h3 id=\"åŸºäº-Native-UI-çš„æ–¹æ¡ˆ\"><a href=\"#åŸºäº-Native-UI-çš„æ–¹æ¡ˆ\" class=\"headerlink\" title=\"åŸºäº Â Native UIÂ  çš„æ–¹æ¡ˆ\"></a>åŸºäº Â <code>Native UI</code>Â  çš„æ–¹æ¡ˆ</h3><blockquote>\n<p>ä¾‹å¦‚ <code>React-Nativeã€Weex</code> ã€‚åœ¨èµ‹äºˆ <code>H5</code> åŸç”Ÿ <code>API</code> èƒ½åŠ›çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥é€šè¿‡ <code>JSBridge</code> å°† <code>js</code> è§£ææˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘( <code>Virtual DOM</code> )ä¼ é€’åˆ° <code>Native</code> å¹¶ä½¿ç”¨åŸç”Ÿæ¸²æŸ“ã€‚</p>\n</blockquote>\n<h3 id=\"å°ç¨‹åºæ–¹æ¡ˆ\"><a href=\"#å°ç¨‹åºæ–¹æ¡ˆ\" class=\"headerlink\" title=\"å°ç¨‹åºæ–¹æ¡ˆ\"></a>å°ç¨‹åºæ–¹æ¡ˆ</h3><blockquote>\n<p>é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ <code>JSBridge</code>ï¼Œå¹¶ä½¿ç”¨åŒ <code>WebView</code> åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† <code>JS</code> é€»è¾‘ä¸ <code>UI</code> æ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† <code>H5</code> ä¸ <code>Native</code> æ··åˆç¨‹åº¦ï¼Œæé«˜äº†é¡µé¢æ€§èƒ½åŠå¼€å‘ä½“éªŒã€‚</p>\n</blockquote>\n<h2 id=\"hybrid-å’Œ-h5-å¯¹æ¯”\"><a href=\"#hybrid-å’Œ-h5-å¯¹æ¯”\" class=\"headerlink\" title=\"hybrid å’Œ h5 å¯¹æ¯”\"></a>hybrid å’Œ h5 å¯¹æ¯”</h2><h3 id=\"h5\"><a href=\"#h5\" class=\"headerlink\" title=\"h5\"></a>h5</h3><ul>\n<li>ä¼˜ç‚¹<ul>\n<li>å¼€å‘é€Ÿåº¦å¿«ï¼Œä¸€ç«¯å¼€å‘å¤šç«¯è¿è¡Œ</li>\n<li>å¦‚æœéœ€è¦é¢‘ç¹æ›´æ¢é¡µé¢ï¼Œç”¨ <code>h5</code> ç»´æŠ¤ä¼šæ›´åŠ å®¹æ˜“</li>\n<li>ç‰ˆæœ¬æ›´æ–°ä¸éœ€è¦æ‰“åŒ…ä¾¿å¯å‘å¸ƒ</li>\n</ul>\n</li>\n<li>ç¼ºç‚¹<ul>\n<li>æµç•…åº¦ï¼Œå®‰å…¨é—®é¢˜</li>\n<li>æ€§èƒ½ä¸å¦‚åŸç”Ÿ</li>\n<li>ä¸èƒ½è°ƒç”¨ç§»åŠ¨ç¡¬ä»¶è®¾å¤‡çš„åŠŸèƒ½</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"hybrid-å®ç°åŸç†\"><a href=\"#hybrid-å®ç°åŸç†\" class=\"headerlink\" title=\"hybrid å®ç°åŸç†\"></a>hybrid å®ç°åŸç†</h2><blockquote>\n<p>åŸç”Ÿçš„ <code>App</code> ä¸­ï¼Œä½¿ç”¨ <code>WebView</code> ä½œä¸ºå®¹å™¨ç›´æ¥æ‰¿è½½ <code>Web</code> é¡µé¢ã€‚ ä¸­é—´é€šè¿‡ <code>JSBridge</code> æ¥å®Œæˆ <code>Native</code> ä¸ <code>JavaScript</code> ä¹‹é—´çš„é€šè®¯ã€‚</p>\n</blockquote>\n<h2 id=\"hybrid-å‡ ç§æ–¹æ¡ˆ\"><a href=\"#hybrid-å‡ ç§æ–¹æ¡ˆ\" class=\"headerlink\" title=\"hybrid å‡ ç§æ–¹æ¡ˆ\"></a>hybrid å‡ ç§æ–¹æ¡ˆ</h2><h3 id=\"åŸºäº-WebView-UI-çš„åŸºç¡€æ–¹æ¡ˆ\"><a href=\"#åŸºäº-WebView-UI-çš„åŸºç¡€æ–¹æ¡ˆ\" class=\"headerlink\" title=\"åŸºäº Â WebView UIÂ  çš„åŸºç¡€æ–¹æ¡ˆ\"></a>åŸºäº Â WebView UIÂ  çš„åŸºç¡€æ–¹æ¡ˆ</h3><blockquote>\n<p>ä¾‹å¦‚å¾®ä¿¡ <code>JS-SDK</code>ï¼Œé€šè¿‡ <code>JSBridge</code> å®Œæˆ <code>H5</code> ä¸ <code>Native</code> çš„åŒå‘é€šè®¯ï¼Œä»è€Œèµ‹äºˆ <code>H5</code> ä¸€å®šç¨‹åº¦çš„åŸç”Ÿèƒ½åŠ›ã€‚</p>\n</blockquote>\n<h3 id=\"åŸºäº-Native-UI-çš„æ–¹æ¡ˆ\"><a href=\"#åŸºäº-Native-UI-çš„æ–¹æ¡ˆ\" class=\"headerlink\" title=\"åŸºäº Â Native UIÂ  çš„æ–¹æ¡ˆ\"></a>åŸºäº Â <code>Native UI</code>Â  çš„æ–¹æ¡ˆ</h3><blockquote>\n<p>ä¾‹å¦‚ <code>React-Nativeã€Weex</code> ã€‚åœ¨èµ‹äºˆ <code>H5</code> åŸç”Ÿ <code>API</code> èƒ½åŠ›çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥é€šè¿‡ <code>JSBridge</code> å°† <code>js</code> è§£ææˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘( <code>Virtual DOM</code> )ä¼ é€’åˆ° <code>Native</code> å¹¶ä½¿ç”¨åŸç”Ÿæ¸²æŸ“ã€‚</p>\n</blockquote>\n<h3 id=\"å°ç¨‹åºæ–¹æ¡ˆ\"><a href=\"#å°ç¨‹åºæ–¹æ¡ˆ\" class=\"headerlink\" title=\"å°ç¨‹åºæ–¹æ¡ˆ\"></a>å°ç¨‹åºæ–¹æ¡ˆ</h3><blockquote>\n<p>é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ <code>JSBridge</code>ï¼Œå¹¶ä½¿ç”¨åŒ <code>WebView</code> åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† <code>JS</code> é€»è¾‘ä¸ <code>UI</code> æ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† <code>H5</code> ä¸ <code>Native</code> æ··åˆç¨‹åº¦ï¼Œæé«˜äº†é¡µé¢æ€§èƒ½åŠå¼€å‘ä½“éªŒã€‚</p>\n</blockquote>\n<h2 id=\"hybrid-å’Œ-h5-å¯¹æ¯”\"><a href=\"#hybrid-å’Œ-h5-å¯¹æ¯”\" class=\"headerlink\" title=\"hybrid å’Œ h5 å¯¹æ¯”\"></a>hybrid å’Œ h5 å¯¹æ¯”</h2><h3 id=\"h5\"><a href=\"#h5\" class=\"headerlink\" title=\"h5\"></a>h5</h3><ul>\n<li>ä¼˜ç‚¹<ul>\n<li>å¼€å‘é€Ÿåº¦å¿«ï¼Œä¸€ç«¯å¼€å‘å¤šç«¯è¿è¡Œ</li>\n<li>å¦‚æœéœ€è¦é¢‘ç¹æ›´æ¢é¡µé¢ï¼Œç”¨ <code>h5</code> ç»´æŠ¤ä¼šæ›´åŠ å®¹æ˜“</li>\n<li>ç‰ˆæœ¬æ›´æ–°ä¸éœ€è¦æ‰“åŒ…ä¾¿å¯å‘å¸ƒ</li>\n</ul>\n</li>\n<li>ç¼ºç‚¹<ul>\n<li>æµç•…åº¦ï¼Œå®‰å…¨é—®é¢˜</li>\n<li>æ€§èƒ½ä¸å¦‚åŸç”Ÿ</li>\n<li>ä¸èƒ½è°ƒç”¨ç§»åŠ¨ç¡¬ä»¶è®¾å¤‡çš„åŠŸèƒ½</li>\n</ul>\n</li>\n</ul>\n"},{"title":"æ¸è¿›å¼ web åº”ç”¨ç¨‹åº pwa ç®€ä»‹","date":"2020-07-15T16:00:00.000Z","_content":"\nä»‹ç»\n\n> æ¸è¿›å¼ Web åº”ç”¨ç¨‹åº\n\n## progressive web app\n\n### ä¼˜ç‚¹\n\n1. æ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦\n2. `web` åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ä½¿ç”¨\n3. `web` åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±å¹•\n4. `web` åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥\n5. `web` åº”ç”¨äºæ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›è¿›ä¸€æ­¥æé«˜\n\n### å…³é”®æŠ€æœ¯\n\n- w3c web app manifest\n\n> ç”±æ—©æœŸçš„å®šä¹‰åœ¨ `html` é¡µé¢å¤´éƒ¨è½¬æ¢æˆäº†å®šä¹‰åœ¨ `json` æ–‡ä»¶ä¸­\n\n- `scope`ï¼šå®šä¹‰äº† `web` åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–é¢çš„ `URL` å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰`PWA`ä¸­ç»§ç»­æµè§ˆ\n\n- `start_url`ï¼šå®šä¹‰äº†ä¸€ä¸ª `PWA` çš„å…¥å£é¡µé¢\n- `orientation`ï¼šé”å®šå±å¹•æ—‹è½¬\n- `theme_color`/`background_color`ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ `UI` ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ `Android` çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰\n\n- service worker\n  - è®©`web`åº”ç”¨ç¦»çº¿ä½¿ç”¨çš„ç¬¬ä¸‰æ¬¡å°è¯•\n  - å¯ç¼–ç¨‹çš„ `web worker`\n  - åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä¸æ‹¦æˆªã€å¤„ç†ã€ç›¸åº”æµç»çš„ `HTTP` è¯·æ±‚\n  - é…åˆ `Cache Storage API`ï¼Œå¯ä»¥è‡ªç”±ç®¡ç† `HTTP` è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜\n- push notification\n  - `push api` çš„å‡ºç°è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘`web`åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›\n  - `push API` ä¸ä¾èµ–`web`åº”ç”¨å’Œæµè§ˆå™¨`UI`å­˜æ´»\n","source":"_posts/å‰ç«¯/æ¸è¿›å¼ web åº”ç”¨ç¨‹åº pwa ç®€ä»‹.md","raw":"---\ntitle: æ¸è¿›å¼ web åº”ç”¨ç¨‹åº pwa ç®€ä»‹\ndate: 2020-07-16\ncategories: [å‰ç«¯, js]\ntags: \n  - pwa\n---\n\nä»‹ç»\n\n> æ¸è¿›å¼ Web åº”ç”¨ç¨‹åº\n\n## progressive web app\n\n### ä¼˜ç‚¹\n\n1. æ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦\n2. `web` åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ä½¿ç”¨\n3. `web` åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±å¹•\n4. `web` åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥\n5. `web` åº”ç”¨äºæ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›è¿›ä¸€æ­¥æé«˜\n\n### å…³é”®æŠ€æœ¯\n\n- w3c web app manifest\n\n> ç”±æ—©æœŸçš„å®šä¹‰åœ¨ `html` é¡µé¢å¤´éƒ¨è½¬æ¢æˆäº†å®šä¹‰åœ¨ `json` æ–‡ä»¶ä¸­\n\n- `scope`ï¼šå®šä¹‰äº† `web` åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–é¢çš„ `URL` å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰`PWA`ä¸­ç»§ç»­æµè§ˆ\n\n- `start_url`ï¼šå®šä¹‰äº†ä¸€ä¸ª `PWA` çš„å…¥å£é¡µé¢\n- `orientation`ï¼šé”å®šå±å¹•æ—‹è½¬\n- `theme_color`/`background_color`ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ `UI` ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ `Android` çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰\n\n- service worker\n  - è®©`web`åº”ç”¨ç¦»çº¿ä½¿ç”¨çš„ç¬¬ä¸‰æ¬¡å°è¯•\n  - å¯ç¼–ç¨‹çš„ `web worker`\n  - åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä¸æ‹¦æˆªã€å¤„ç†ã€ç›¸åº”æµç»çš„ `HTTP` è¯·æ±‚\n  - é…åˆ `Cache Storage API`ï¼Œå¯ä»¥è‡ªç”±ç®¡ç† `HTTP` è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜\n- push notification\n  - `push api` çš„å‡ºç°è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘`web`åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›\n  - `push API` ä¸ä¾èµ–`web`åº”ç”¨å’Œæµè§ˆå™¨`UI`å­˜æ´»\n","slug":"å‰ç«¯/æ¸è¿›å¼ web åº”ç”¨ç¨‹åº pwa ç®€ä»‹","published":1,"updated":"2021-04-07T07:27:07.656Z","_id":"ckn74f72o003qyx7y4fit8fiw","comments":1,"layout":"post","photos":[],"link":"","content":"<p>ä»‹ç»</p>\n<blockquote>\n<p>æ¸è¿›å¼ Web åº”ç”¨ç¨‹åº</p>\n</blockquote>\n<h2 id=\"progressive-web-app\"><a href=\"#progressive-web-app\" class=\"headerlink\" title=\"progressive web app\"></a>progressive web app</h2><h3 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h3><ol>\n<li>æ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦</li>\n<li><code>web</code> åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ä½¿ç”¨</li>\n<li><code>web</code> åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±å¹•</li>\n<li><code>web</code> åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥</li>\n<li><code>web</code> åº”ç”¨äºæ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›è¿›ä¸€æ­¥æé«˜</li>\n</ol>\n<h3 id=\"å…³é”®æŠ€æœ¯\"><a href=\"#å…³é”®æŠ€æœ¯\" class=\"headerlink\" title=\"å…³é”®æŠ€æœ¯\"></a>å…³é”®æŠ€æœ¯</h3><ul>\n<li>w3c web app manifest</li>\n</ul>\n<blockquote>\n<p>ç”±æ—©æœŸçš„å®šä¹‰åœ¨ <code>html</code> é¡µé¢å¤´éƒ¨è½¬æ¢æˆäº†å®šä¹‰åœ¨ <code>json</code> æ–‡ä»¶ä¸­</p>\n</blockquote>\n<ul>\n<li><p><code>scope</code>ï¼šå®šä¹‰äº† <code>web</code> åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–é¢çš„ <code>URL</code> å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰<code>PWA</code>ä¸­ç»§ç»­æµè§ˆ</p>\n</li>\n<li><p><code>start_url</code>ï¼šå®šä¹‰äº†ä¸€ä¸ª <code>PWA</code> çš„å…¥å£é¡µé¢</p>\n</li>\n<li><p><code>orientation</code>ï¼šé”å®šå±å¹•æ—‹è½¬</p>\n</li>\n<li><p><code>theme_color</code>/<code>background_color</code>ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ <code>UI</code> ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ <code>Android</code> çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰</p>\n</li>\n<li><p>service worker</p>\n<ul>\n<li>è®©<code>web</code>åº”ç”¨ç¦»çº¿ä½¿ç”¨çš„ç¬¬ä¸‰æ¬¡å°è¯•</li>\n<li>å¯ç¼–ç¨‹çš„ <code>web worker</code></li>\n<li>åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä¸æ‹¦æˆªã€å¤„ç†ã€ç›¸åº”æµç»çš„ <code>HTTP</code> è¯·æ±‚</li>\n<li>é…åˆ <code>Cache Storage API</code>ï¼Œå¯ä»¥è‡ªç”±ç®¡ç† <code>HTTP</code> è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜</li>\n</ul>\n</li>\n<li><p>push notification</p>\n<ul>\n<li><code>push api</code> çš„å‡ºç°è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘<code>web</code>åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›</li>\n<li><code>push API</code> ä¸ä¾èµ–<code>web</code>åº”ç”¨å’Œæµè§ˆå™¨<code>UI</code>å­˜æ´»</li>\n</ul>\n</li>\n</ul>\n","site":{"data":{}},"excerpt":"","more":"<p>ä»‹ç»</p>\n<blockquote>\n<p>æ¸è¿›å¼ Web åº”ç”¨ç¨‹åº</p>\n</blockquote>\n<h2 id=\"progressive-web-app\"><a href=\"#progressive-web-app\" class=\"headerlink\" title=\"progressive web app\"></a>progressive web app</h2><h3 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h3><ol>\n<li>æ˜¾è‘—æé«˜åº”ç”¨åŠ è½½é€Ÿåº¦</li>\n<li><code>web</code> åº”ç”¨å¯ä»¥åœ¨ç¦»çº¿ç¯å¢ƒä¸‹ä½¿ç”¨</li>\n<li><code>web</code> åº”ç”¨èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·è¢«æ·»åŠ åˆ°ä¸»å±å¹•</li>\n<li><code>web</code> åº”ç”¨èƒ½åœ¨æœªè¢«æ¿€æ´»æ—¶å‘èµ·æ¨é€é€šçŸ¥</li>\n<li><code>web</code> åº”ç”¨äºæ“ä½œç³»ç»Ÿé›†æˆèƒ½åŠ›è¿›ä¸€æ­¥æé«˜</li>\n</ol>\n<h3 id=\"å…³é”®æŠ€æœ¯\"><a href=\"#å…³é”®æŠ€æœ¯\" class=\"headerlink\" title=\"å…³é”®æŠ€æœ¯\"></a>å…³é”®æŠ€æœ¯</h3><ul>\n<li>w3c web app manifest</li>\n</ul>\n<blockquote>\n<p>ç”±æ—©æœŸçš„å®šä¹‰åœ¨ <code>html</code> é¡µé¢å¤´éƒ¨è½¬æ¢æˆäº†å®šä¹‰åœ¨ <code>json</code> æ–‡ä»¶ä¸­</p>\n</blockquote>\n<ul>\n<li><p><code>scope</code>ï¼šå®šä¹‰äº† <code>web</code> åº”ç”¨çš„æµè§ˆä½œç”¨åŸŸï¼Œæ¯”å¦‚ä½œç”¨åŸŸå¤–é¢çš„ <code>URL</code> å°±ä¼šæ‰“å¼€æµè§ˆå™¨è€Œä¸ä¼šåœ¨å½“å‰<code>PWA</code>ä¸­ç»§ç»­æµè§ˆ</p>\n</li>\n<li><p><code>start_url</code>ï¼šå®šä¹‰äº†ä¸€ä¸ª <code>PWA</code> çš„å…¥å£é¡µé¢</p>\n</li>\n<li><p><code>orientation</code>ï¼šé”å®šå±å¹•æ—‹è½¬</p>\n</li>\n<li><p><code>theme_color</code>/<code>background_color</code>ï¼šä¸»é¢˜è‰²ä¸èƒŒæ™¯è‰²ï¼Œç”¨äºé…ç½®ä¸€äº›å¯å®šåˆ¶çš„æ“ä½œç³»ç»Ÿ <code>UI</code> ä»¥æé«˜ç”¨æˆ·ä½“éªŒï¼Œæ¯”å¦‚ <code>Android</code> çš„çŠ¶æ€æ ã€ä»»åŠ¡æ ç­‰</p>\n</li>\n<li><p>service worker</p>\n<ul>\n<li>è®©<code>web</code>åº”ç”¨ç¦»çº¿ä½¿ç”¨çš„ç¬¬ä¸‰æ¬¡å°è¯•</li>\n<li>å¯ç¼–ç¨‹çš„ <code>web worker</code></li>\n<li>åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä¸æ‹¦æˆªã€å¤„ç†ã€ç›¸åº”æµç»çš„ <code>HTTP</code> è¯·æ±‚</li>\n<li>é…åˆ <code>Cache Storage API</code>ï¼Œå¯ä»¥è‡ªç”±ç®¡ç† <code>HTTP</code> è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜</li>\n</ul>\n</li>\n<li><p>push notification</p>\n<ul>\n<li><code>push api</code> çš„å‡ºç°è®©æ¨é€æœåŠ¡å…·å¤‡äº†å‘<code>web</code>åº”ç”¨æ¨é€æ¶ˆæ¯çš„èƒ½åŠ›</li>\n<li><code>push API</code> ä¸ä¾èµ–<code>web</code>åº”ç”¨å’Œæµè§ˆå™¨<code>UI</code>å­˜æ´»</li>\n</ul>\n</li>\n</ul>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"ckn72xyzx00014f7ybq9j8n0k","category_id":"ckn724nl000024d7y3eu5gt0i","_id":"ckn73inu9001e4f7y06xj2hac"},{"post_id":"ckn72xyzx00014f7ybq9j8n0k","category_id":"ckn73g6cm000v4f7y0pks8fht","_id":"ckn73inu9001f4f7yhegn2whk"},{"post_id":"ckn72xyzx00014f7ybq9j8n0k","category_id":"ckn73gnhk000x4f7y1wry0ks4","_id":"ckn73m9fu001x4f7y768s5ava"},{"post_id":"ckn7476ad001yyx7ybs7v7hez","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476af0024yx7yex7e1oep"},{"post_id":"ckn7476ad001yyx7ybs7v7hez","category_id":"ckn73y16z00012b7y8cj11ow7","_id":"ckn7476ag0027yx7ybvz70rx2"},{"post_id":"ckn7476ad001zyx7yhda41in0","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476ag0029yx7yezj30ob6"},{"post_id":"ckn7476ad001zyx7yhda41in0","category_id":"ckn73z9ui002n2b7yduwfbvhf","_id":"ckn7476ag002byx7y8d92bjfh"},{"post_id":"ckn7476ae0021yx7y45at6zsv","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476ah002cyx7y6wiz6hz0"},{"post_id":"ckn7476ae0021yx7y45at6zsv","category_id":"ckn73z9ui002n2b7yduwfbvhf","_id":"ckn7476ah002dyx7y9yhcbnkw"},{"post_id":"ckn7476af0023yx7ydfxjb6vn","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476ah002eyx7yhusr09hw"},{"post_id":"ckn7476af0023yx7ydfxjb6vn","category_id":"ckn73z9ui002n2b7yduwfbvhf","_id":"ckn7476ah002fyx7y3mp90tx0"},{"post_id":"ckn7476ai002iyx7y4htk6ur4","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476al002oyx7ya6bffuo6"},{"post_id":"ckn7476ai002iyx7y4htk6ur4","category_id":"ckn73y16z00012b7y8cj11ow7","_id":"ckn7476am002ryx7yexxebsdm"},{"post_id":"ckn7476aj002jyx7ydtbx6zny","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476an002uyx7y74yb5ur8"},{"post_id":"ckn7476aj002jyx7ydtbx6zny","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn7476ap002wyx7y4uo274ft"},{"post_id":"ckn7476ak002lyx7y36092igs","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476ap002yyx7y0ke0h8h5"},{"post_id":"ckn7476ak002lyx7y36092igs","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn7476as0030yx7y1d32gzpt"},{"post_id":"ckn7476ak002nyx7yfi4b9int","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476as0031yx7y7dk3hsvh"},{"post_id":"ckn7476ak002nyx7yfi4b9int","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn7476as0032yx7y8jrr51fs"},{"post_id":"ckn7476al002qyx7y8i352o5l","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476at0033yx7yhtte4mjx"},{"post_id":"ckn7476al002qyx7y8i352o5l","category_id":"ckn73z9ui002n2b7yduwfbvhf","_id":"ckn7476at0034yx7y9wx9grmz"},{"post_id":"ckn7476am002tyx7ybva35va3","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476at0035yx7y0yt41jck"},{"post_id":"ckn7476am002tyx7ybva35va3","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn7476at0036yx7yhrw299uj"},{"post_id":"ckn7476au0037yx7y3aac6bor","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476av0039yx7y9e0fgbch"},{"post_id":"ckn7476au0037yx7y3aac6bor","category_id":"ckn73y16z00012b7y8cj11ow7","_id":"ckn7476av003ayx7ybce406im"},{"post_id":"ckn7476aw003byx7y6rl88saa","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476aw003dyx7yg2ul3msg"},{"post_id":"ckn7476aw003byx7y6rl88saa","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn7476aw003eyx7yc8a46bx7"},{"post_id":"ckn7476az003fyx7ybx8ffg98","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn7476b0003hyx7y6bafc7vt"},{"post_id":"ckn7476az003fyx7ybx8ffg98","category_id":"ckn747lph003jyx7ya58sbihb","_id":"ckn747lph003kyx7yd4p435vv"},{"post_id":"ckn74b69w003lyx7y79keby5p","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn74b6a0003nyx7y9lypep5a"},{"post_id":"ckn74b69w003lyx7y79keby5p","category_id":"ckn73yq2u002d2b7y8v6r4oxf","_id":"ckn74b6a1003oyx7yd1be5gox"},{"post_id":"ckn74f72o003qyx7y4fit8fiw","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn74ftut003syx7y09fm6spx"},{"post_id":"ckn74f72o003qyx7y4fit8fiw","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn74ftuu003tyx7y1dyy5k27"},{"post_id":"ckn74eabc003pyx7y5tijf0d1","category_id":"ckn73y16y00002b7yhsgu5ukt","_id":"ckn74gjkc003wyx7ybs1nhxl4"},{"post_id":"ckn74eabc003pyx7y5tijf0d1","category_id":"ckn73yagp00222b7yftoc34u4","_id":"ckn74gjkc003xyx7y15xec0kl"}],"PostTag":[{"post_id":"ckn72xyzx00014f7ybq9j8n0k","tag_id":"ckn736mpa000k4f7yexx66xnr","_id":"ckn73ir1r001h4f7yc5ml4yha"},{"post_id":"ckn7476ad001yyx7ybs7v7hez","tag_id":"ckn73ofmm00254f7ygp0eamqs","_id":"ckn7476ae0020yx7y7dg8bh8r"},{"post_id":"ckn7476ad001zyx7yhda41in0","tag_id":"ckn73r9or002p4f7yfncxhshj","_id":"ckn7476af0022yx7y2gjeh6yg"},{"post_id":"ckn7476ae0021yx7y45at6zsv","tag_id":"ckn73paob00294f7y7ayrhnls","_id":"ckn7476af0025yx7y0qsr7055"},{"post_id":"ckn7476af0023yx7ydfxjb6vn","tag_id":"ckn73qg8l002k4f7y362zh4wm","_id":"ckn7476ag0028yx7yg091b9ic"},{"post_id":"ckn7476ai002iyx7y4htk6ur4","tag_id":"ckn72uimf0001nd7y7azr3nhz","_id":"ckn7476aj002kyx7yf6aqcfii"},{"post_id":"ckn7476aj002jyx7ydtbx6zny","tag_id":"ckn73nhpw00214f7y216bawn3","_id":"ckn7476ak002myx7y84yebkko"},{"post_id":"ckn7476aj002jyx7ydtbx6zny","tag_id":"ckn73nhpw00224f7yd0o8563q","_id":"ckn7476al002pyx7y6xwj3htx"},{"post_id":"ckn7476ak002lyx7y36092igs","tag_id":"ckn73jbgh001i4f7y8ioag4xv","_id":"ckn7476am002syx7ye2lg57ss"},{"post_id":"ckn7476ak002nyx7yfi4b9int","tag_id":"ckn736mpa000k4f7yexx66xnr","_id":"ckn7476an002vyx7yalnfaudf"},{"post_id":"ckn7476al002qyx7y8i352o5l","tag_id":"ckn73pp2c002f4f7yabxs5ch5","_id":"ckn7476ap002xyx7y0prj0jpf"},{"post_id":"ckn7476am002tyx7ybva35va3","tag_id":"ckn734h7t000h4f7yaock3v2v","_id":"ckn7476as002zyx7yb91b90ug"},{"post_id":"ckn7476au0037yx7y3aac6bor","tag_id":"ckn73pp2c002f4f7yabxs5ch5","_id":"ckn7476av0038yx7yd5b25jct"},{"post_id":"ckn7476aw003byx7y6rl88saa","tag_id":"ckn73i9p4001b4f7yc8ve2ik7","_id":"ckn7476aw003cyx7y11240y0c"},{"post_id":"ckn7476az003fyx7ybx8ffg98","tag_id":"ckn73pp2c002f4f7yabxs5ch5","_id":"ckn7476b0003gyx7ycuqte0lt"},{"post_id":"ckn74b69w003lyx7y79keby5p","tag_id":"ckn73jbgh001i4f7y8ioag4xv","_id":"ckn74b69z003myx7y3fzx4041"},{"post_id":"ckn74f72o003qyx7y4fit8fiw","tag_id":"ckn74ftus003ryx7y8oyu3ha8","_id":"ckn74ftuu003uyx7y4wspcx4n"},{"post_id":"ckn74eabc003pyx7y5tijf0d1","tag_id":"ckn74gjkc003vyx7y381c9n73","_id":"ckn74gjkd003yyx7ygi1xgntg"}],"Tag":[{"name":"æµ‹è¯•","_id":"ckn724nl100034d7ycmdp25dp"},{"name":"react","_id":"ckn72uimf0001nd7y7azr3nhz"},{"name":"React","_id":"ckn7335m4000c4f7ydzcbcqe5"},{"name":"js","_id":"ckn734h7s000f4f7yav46ej0s"},{"name":"äºŒè¿›åˆ¶","_id":"ckn734h7t000h4f7yaock3v2v"},{"name":"ä½¿ç”¨æŠ€å·§","_id":"ckn736mpa000k4f7yexx66xnr"},{"name":"é˜²æŠ–å’ŒèŠ‚æµ","_id":"ckn73ey0r000q4f7y2wiy0719"},{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","_id":"ckn73i9p4001b4f7yc8ve2ik7"},{"name":"è§£å†³æ–¹æ¡ˆ","_id":"ckn73jbgh001i4f7y8ioag4xv"},{"name":"ajax","_id":"ckn73nhpw00214f7y216bawn3"},{"name":"fetch","_id":"ckn73nhpw00224f7yd0o8563q"},{"name":"react-hooks","_id":"ckn73ofmm00254f7ygp0eamqs"},{"name":"æ•°æ®é©±åŠ¨","_id":"ckn73paob00294f7y7ayrhnls"},{"name":"æ–‡æ¡£","_id":"ckn73pp2c002f4f7yabxs5ch5"},{"name":"è™šæ‹Ÿ dom","_id":"ckn73qg8l002k4f7y362zh4wm"},{"name":"diff ç®—æ³•","_id":"ckn73r9or002p4f7yfncxhshj"},{"name":"pwa","_id":"ckn74ftus003ryx7y8oyu3ha8"},{"name":"hybrid","_id":"ckn74gjkc003vyx7y381c9n73"}]}}